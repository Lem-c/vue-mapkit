const tQ=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}};tQ();function CP(r,e){const t=Object.create(null),i=r.split(",");for(let n=0;n<i.length;n++)t[i[n]]=!0;return e?n=>!!t[n.toLowerCase()]:n=>!!t[n]}const rQ="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",iQ=CP(rQ);function fU(r){return!!r||r===""}function bo(r){if(Si(r)){const e={};for(let t=0;t<r.length;t++){const i=r[t],n=La(i)?oQ(i):bo(i);if(n)for(const s in n)e[s]=n[s]}return e}else{if(La(r))return r;if(ka(r))return r}}const nQ=/;(?![^(]*\))/g,aQ=/:(.+)/;function oQ(r){const e={};return r.split(nQ).forEach(t=>{if(t){const i=t.split(aQ);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function $r(r){let e="";if(La(r))e=r;else if(Si(r))for(let t=0;t<r.length;t++){const i=$r(r[t]);i&&(e+=i+" ")}else if(ka(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}const Pi=r=>La(r)?r:r==null?"":Si(r)||ka(r)&&(r.toString===vU||!Bi(r.toString))?JSON.stringify(r,pU,2):String(r),pU=(r,e)=>e&&e.__v_isRef?pU(r,e.value):Hg(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,n])=>(t[`${i} =>`]=n,t),{})}:mU(e)?{[`Set(${e.size})`]:[...e.values()]}:ka(e)&&!Si(e)&&!_U(e)?String(e):e,Vn={},jg=[],Ql=()=>{},sQ=()=>!1,lQ=/^on[^a-z]/,dT=r=>lQ.test(r),IP=r=>r.startsWith("onUpdate:"),wo=Object.assign,EP=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},uQ=Object.prototype.hasOwnProperty,an=(r,e)=>uQ.call(r,e),Si=Array.isArray,Hg=r=>fT(r)==="[object Map]",mU=r=>fT(r)==="[object Set]",Bi=r=>typeof r=="function",La=r=>typeof r=="string",DP=r=>typeof r=="symbol",ka=r=>r!==null&&typeof r=="object",gU=r=>ka(r)&&Bi(r.then)&&Bi(r.catch),vU=Object.prototype.toString,fT=r=>vU.call(r),cQ=r=>fT(r).slice(8,-1),_U=r=>fT(r)==="[object Object]",PP=r=>La(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,Ow=CP(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),pT=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},hQ=/-(\w)/g,ec=pT(r=>r.replace(hQ,(e,t)=>t?t.toUpperCase():"")),dQ=/\B([A-Z])/g,_v=pT(r=>r.replace(dQ,"-$1").toLowerCase()),mT=pT(r=>r.charAt(0).toUpperCase()+r.slice(1)),DA=pT(r=>r?`on${mT(r)}`:""),E0=(r,e)=>!Object.is(r,e),PA=(r,e)=>{for(let t=0;t<r.length;t++)r[t](e)},lS=(r,e,t)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value:t})},fQ=r=>{const e=parseFloat(r);return isNaN(e)?r:e};let rF;const pQ=()=>rF||(rF=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Fu;class yU{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&Fu&&(this.parent=Fu,this.index=(Fu.scopes||(Fu.scopes=[])).push(this)-1)}run(e){if(this.active){const t=Fu;try{return Fu=this,e()}finally{Fu=t}}}on(){Fu=this}off(){Fu=this.parent}stop(e){if(this.active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.active=!1}}}function xU(r){return new yU(r)}function mQ(r,e=Fu){e&&e.active&&e.effects.push(r)}const LP=r=>{const e=new Set(r);return e.w=0,e.n=0,e},bU=r=>(r.w&Pd)>0,wU=r=>(r.n&Pd)>0,gQ=({deps:r})=>{if(r.length)for(let e=0;e<r.length;e++)r[e].w|=Pd},vQ=r=>{const{deps:e}=r;if(e.length){let t=0;for(let i=0;i<e.length;i++){const n=e[i];bU(n)&&!wU(n)?n.delete(r):e[t++]=n,n.w&=~Pd,n.n&=~Pd}e.length=t}},gE=new WeakMap;let Gy=0,Pd=1;const vE=30;let Xl;const Ip=Symbol(""),_E=Symbol("");class kP{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,mQ(this,i)}run(){if(!this.active)return this.fn();let e=Xl,t=Td;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Xl,Xl=this,Td=!0,Pd=1<<++Gy,Gy<=vE?gQ(this):iF(this),this.fn()}finally{Gy<=vE&&vQ(this),Pd=1<<--Gy,Xl=this.parent,Td=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Xl===this?this.deferStop=!0:this.active&&(iF(this),this.onStop&&this.onStop(),this.active=!1)}}function iF(r){const{deps:e}=r;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(r);e.length=0}}let Td=!0;const SU=[];function yv(){SU.push(Td),Td=!1}function xv(){const r=SU.pop();Td=r===void 0?!0:r}function zs(r,e,t){if(Td&&Xl){let i=gE.get(r);i||gE.set(r,i=new Map);let n=i.get(t);n||i.set(t,n=LP()),TU(n)}}function TU(r,e){let t=!1;Gy<=vE?wU(r)||(r.n|=Pd,t=!bU(r)):t=!r.has(Xl),t&&(r.add(Xl),Xl.deps.push(r))}function ih(r,e,t,i,n,s){const u=gE.get(r);if(!u)return;let a=[];if(e==="clear")a=[...u.values()];else if(t==="length"&&Si(r))u.forEach((h,p)=>{(p==="length"||p>=i)&&a.push(h)});else switch(t!==void 0&&a.push(u.get(t)),e){case"add":Si(r)?PP(t)&&a.push(u.get("length")):(a.push(u.get(Ip)),Hg(r)&&a.push(u.get(_E)));break;case"delete":Si(r)||(a.push(u.get(Ip)),Hg(r)&&a.push(u.get(_E)));break;case"set":Hg(r)&&a.push(u.get(Ip));break}if(a.length===1)a[0]&&yE(a[0]);else{const h=[];for(const p of a)p&&h.push(...p);yE(LP(h))}}function yE(r,e){const t=Si(r)?r:[...r];for(const i of t)i.computed&&nF(i);for(const i of t)i.computed||nF(i)}function nF(r,e){(r!==Xl||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const _Q=CP("__proto__,__v_isRef,__isVue"),MU=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(DP)),yQ=RP(),xQ=RP(!1,!0),bQ=RP(!0),aF=wQ();function wQ(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...t){const i=cn(this);for(let s=0,u=this.length;s<u;s++)zs(i,"get",s+"");const n=i[e](...t);return n===-1||n===!1?i[e](...t.map(cn)):n}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...t){yv();const i=cn(this)[e].apply(this,t);return xv(),i}}),r}function RP(r=!1,e=!1){return function(i,n,s){if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return e;if(n==="__v_raw"&&s===(r?e?FQ:DU:e?EU:IU).get(i))return i;const u=Si(i);if(!r&&u&&an(aF,n))return Reflect.get(aF,n,s);const a=Reflect.get(i,n,s);return(DP(n)?MU.has(n):_Q(n))||(r||zs(i,"get",n),e)?a:$n(a)?u&&PP(n)?a:a.value:ka(a)?r?PU(a):Kp(a):a}}const SQ=AU(),TQ=AU(!0);function AU(r=!1){return function(t,i,n,s){let u=t[i];if(D0(u)&&$n(u)&&!$n(n))return!1;if(!r&&!D0(n)&&(xE(n)||(n=cn(n),u=cn(u)),!Si(t)&&$n(u)&&!$n(n)))return u.value=n,!0;const a=Si(t)&&PP(i)?Number(i)<t.length:an(t,i),h=Reflect.set(t,i,n,s);return t===cn(s)&&(a?E0(n,u)&&ih(t,"set",i,n):ih(t,"add",i,n)),h}}function MQ(r,e){const t=an(r,e);r[e];const i=Reflect.deleteProperty(r,e);return i&&t&&ih(r,"delete",e,void 0),i}function AQ(r,e){const t=Reflect.has(r,e);return(!DP(e)||!MU.has(e))&&zs(r,"has",e),t}function CQ(r){return zs(r,"iterate",Si(r)?"length":Ip),Reflect.ownKeys(r)}const CU={get:yQ,set:SQ,deleteProperty:MQ,has:AQ,ownKeys:CQ},IQ={get:bQ,set(r,e){return!0},deleteProperty(r,e){return!0}},EQ=wo({},CU,{get:xQ,set:TQ}),OP=r=>r,gT=r=>Reflect.getPrototypeOf(r);function Sb(r,e,t=!1,i=!1){r=r.__v_raw;const n=cn(r),s=cn(e);t||(e!==s&&zs(n,"get",e),zs(n,"get",s));const{has:u}=gT(n),a=i?OP:t?FP:P0;if(u.call(n,e))return a(r.get(e));if(u.call(n,s))return a(r.get(s));r!==n&&r.get(e)}function Tb(r,e=!1){const t=this.__v_raw,i=cn(t),n=cn(r);return e||(r!==n&&zs(i,"has",r),zs(i,"has",n)),r===n?t.has(r):t.has(r)||t.has(n)}function Mb(r,e=!1){return r=r.__v_raw,!e&&zs(cn(r),"iterate",Ip),Reflect.get(r,"size",r)}function oF(r){r=cn(r);const e=cn(this);return gT(e).has.call(e,r)||(e.add(r),ih(e,"add",r,r)),this}function sF(r,e){e=cn(e);const t=cn(this),{has:i,get:n}=gT(t);let s=i.call(t,r);s||(r=cn(r),s=i.call(t,r));const u=n.call(t,r);return t.set(r,e),s?E0(e,u)&&ih(t,"set",r,e):ih(t,"add",r,e),this}function lF(r){const e=cn(this),{has:t,get:i}=gT(e);let n=t.call(e,r);n||(r=cn(r),n=t.call(e,r)),i&&i.call(e,r);const s=e.delete(r);return n&&ih(e,"delete",r,void 0),s}function uF(){const r=cn(this),e=r.size!==0,t=r.clear();return e&&ih(r,"clear",void 0,void 0),t}function Ab(r,e){return function(i,n){const s=this,u=s.__v_raw,a=cn(u),h=e?OP:r?FP:P0;return!r&&zs(a,"iterate",Ip),u.forEach((p,m)=>i.call(n,h(p),h(m),s))}}function Cb(r,e,t){return function(...i){const n=this.__v_raw,s=cn(n),u=Hg(s),a=r==="entries"||r===Symbol.iterator&&u,h=r==="keys"&&u,p=n[r](...i),m=t?OP:e?FP:P0;return!e&&zs(s,"iterate",h?_E:Ip),{next(){const{value:v,done:x}=p.next();return x?{value:v,done:x}:{value:a?[m(v[0]),m(v[1])]:m(v),done:x}},[Symbol.iterator](){return this}}}}function Xh(r){return function(...e){return r==="delete"?!1:this}}function DQ(){const r={get(s){return Sb(this,s)},get size(){return Mb(this)},has:Tb,add:oF,set:sF,delete:lF,clear:uF,forEach:Ab(!1,!1)},e={get(s){return Sb(this,s,!1,!0)},get size(){return Mb(this)},has:Tb,add:oF,set:sF,delete:lF,clear:uF,forEach:Ab(!1,!0)},t={get(s){return Sb(this,s,!0)},get size(){return Mb(this,!0)},has(s){return Tb.call(this,s,!0)},add:Xh("add"),set:Xh("set"),delete:Xh("delete"),clear:Xh("clear"),forEach:Ab(!0,!1)},i={get(s){return Sb(this,s,!0,!0)},get size(){return Mb(this,!0)},has(s){return Tb.call(this,s,!0)},add:Xh("add"),set:Xh("set"),delete:Xh("delete"),clear:Xh("clear"),forEach:Ab(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=Cb(s,!1,!1),t[s]=Cb(s,!0,!1),e[s]=Cb(s,!1,!0),i[s]=Cb(s,!0,!0)}),[r,t,e,i]}const[PQ,LQ,kQ,RQ]=DQ();function zP(r,e){const t=e?r?RQ:kQ:r?LQ:PQ;return(i,n,s)=>n==="__v_isReactive"?!r:n==="__v_isReadonly"?r:n==="__v_raw"?i:Reflect.get(an(t,n)&&n in i?t:i,n,s)}const OQ={get:zP(!1,!1)},zQ={get:zP(!1,!0)},BQ={get:zP(!0,!1)},IU=new WeakMap,EU=new WeakMap,DU=new WeakMap,FQ=new WeakMap;function NQ(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function VQ(r){return r.__v_skip||!Object.isExtensible(r)?0:NQ(cQ(r))}function Kp(r){return D0(r)?r:BP(r,!1,CU,OQ,IU)}function $Q(r){return BP(r,!1,EQ,zQ,EU)}function PU(r){return BP(r,!0,IQ,BQ,DU)}function BP(r,e,t,i,n){if(!ka(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const s=n.get(r);if(s)return s;const u=VQ(r);if(u===0)return r;const a=new Proxy(r,u===2?i:t);return n.set(r,a),a}function Md(r){return D0(r)?Md(r.__v_raw):!!(r&&r.__v_isReactive)}function D0(r){return!!(r&&r.__v_isReadonly)}function xE(r){return!!(r&&r.__v_isShallow)}function LU(r){return Md(r)||D0(r)}function cn(r){const e=r&&r.__v_raw;return e?cn(e):r}function Jg(r){return lS(r,"__v_skip",!0),r}const P0=r=>ka(r)?Kp(r):r,FP=r=>ka(r)?PU(r):r;function kU(r){Td&&Xl&&(r=cn(r),TU(r.dep||(r.dep=LP())))}function RU(r,e){r=cn(r),r.dep&&yE(r.dep)}function $n(r){return!!(r&&r.__v_isRef===!0)}function tc(r){return OU(r,!1)}function GQ(r){return OU(r,!0)}function OU(r,e){return $n(r)?r:new UQ(r,e)}class UQ{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:cn(e),this._value=t?e:P0(e)}get value(){return kU(this),this._value}set value(e){e=this.__v_isShallow?e:cn(e),E0(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:P0(e),RU(this))}}function zt(r){return $n(r)?r.value:r}const jQ={get:(r,e,t)=>zt(Reflect.get(r,e,t)),set:(r,e,t,i)=>{const n=r[e];return $n(n)&&!$n(t)?(n.value=t,!0):Reflect.set(r,e,t,i)}};function zU(r){return Md(r)?r:new Proxy(r,jQ)}function HQ(r){const e=Si(r)?new Array(r.length):{};for(const t in r)e[t]=qQ(r,t);return e}class WQ{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function qQ(r,e,t){const i=r[e];return $n(i)?i:new WQ(r,e,t)}class ZQ{constructor(e,t,i,n){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new kP(e,()=>{this._dirty||(this._dirty=!0,RU(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){const e=cn(this);return kU(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function XQ(r,e,t=!1){let i,n;const s=Bi(r);return s?(i=r,n=Ql):(i=r.get,n=r.set),new ZQ(i,n,s||!n,t)}function Ad(r,e,t,i){let n;try{n=i?r(...i):r()}catch(s){vT(s,e,t)}return n}function ml(r,e,t,i){if(Bi(r)){const s=Ad(r,e,t,i);return s&&gU(s)&&s.catch(u=>{vT(u,e,t)}),s}const n=[];for(let s=0;s<r.length;s++)n.push(ml(r[s],e,t,i));return n}function vT(r,e,t,i=!0){const n=e?e.vnode:null;if(e){let s=e.parent;const u=e.proxy,a=t;for(;s;){const p=s.ec;if(p){for(let m=0;m<p.length;m++)if(p[m](r,u,a)===!1)return}s=s.parent}const h=e.appContext.config.errorHandler;if(h){Ad(h,null,10,[r,u,a]);return}}YQ(r,t,n,i)}function YQ(r,e,t,i=!0){console.error(r)}let uS=!1,bE=!1;const Es=[];let Zc=0;const r0=[];let Uy=null,Eg=0;const i0=[];let ld=null,Dg=0;const BU=Promise.resolve();let NP=null,wE=null;function VP(r){const e=NP||BU;return r?e.then(this?r.bind(this):r):e}function KQ(r){let e=Zc+1,t=Es.length;for(;e<t;){const i=e+t>>>1;L0(Es[i])<r?e=i+1:t=i}return e}function FU(r){(!Es.length||!Es.includes(r,uS&&r.allowRecurse?Zc+1:Zc))&&r!==wE&&(r.id==null?Es.push(r):Es.splice(KQ(r.id),0,r),NU())}function NU(){!uS&&!bE&&(bE=!0,NP=BU.then(GU))}function JQ(r){const e=Es.indexOf(r);e>Zc&&Es.splice(e,1)}function VU(r,e,t,i){Si(r)?t.push(...r):(!e||!e.includes(r,r.allowRecurse?i+1:i))&&t.push(r),NU()}function QQ(r){VU(r,Uy,r0,Eg)}function eee(r){VU(r,ld,i0,Dg)}function _T(r,e=null){if(r0.length){for(wE=e,Uy=[...new Set(r0)],r0.length=0,Eg=0;Eg<Uy.length;Eg++)Uy[Eg]();Uy=null,Eg=0,wE=null,_T(r,e)}}function $U(r){if(_T(),i0.length){const e=[...new Set(i0)];if(i0.length=0,ld){ld.push(...e);return}for(ld=e,ld.sort((t,i)=>L0(t)-L0(i)),Dg=0;Dg<ld.length;Dg++)ld[Dg]();ld=null,Dg=0}}const L0=r=>r.id==null?1/0:r.id;function GU(r){bE=!1,uS=!0,_T(r),Es.sort((t,i)=>L0(t)-L0(i));const e=Ql;try{for(Zc=0;Zc<Es.length;Zc++){const t=Es[Zc];t&&t.active!==!1&&Ad(t,null,14)}}finally{Zc=0,Es.length=0,$U(),uS=!1,NP=null,(Es.length||r0.length||i0.length)&&GU(r)}}function tee(r,e,...t){if(r.isUnmounted)return;const i=r.vnode.props||Vn;let n=t;const s=e.startsWith("update:"),u=s&&e.slice(7);if(u&&u in i){const m=`${u==="modelValue"?"model":u}Modifiers`,{number:v,trim:x}=i[m]||Vn;x&&(n=t.map(w=>w.trim())),v&&(n=t.map(fQ))}let a,h=i[a=DA(e)]||i[a=DA(ec(e))];!h&&s&&(h=i[a=DA(_v(e))]),h&&ml(h,r,6,n);const p=i[a+"Once"];if(p){if(!r.emitted)r.emitted={};else if(r.emitted[a])return;r.emitted[a]=!0,ml(p,r,6,n)}}function UU(r,e,t=!1){const i=e.emitsCache,n=i.get(r);if(n!==void 0)return n;const s=r.emits;let u={},a=!1;if(!Bi(r)){const h=p=>{const m=UU(p,e,!0);m&&(a=!0,wo(u,m))};!t&&e.mixins.length&&e.mixins.forEach(h),r.extends&&h(r.extends),r.mixins&&r.mixins.forEach(h)}return!s&&!a?(i.set(r,null),null):(Si(s)?s.forEach(h=>u[h]=null):wo(u,s),i.set(r,u),u)}function yT(r,e){return!r||!dT(e)?!1:(e=e.slice(2).replace(/Once$/,""),an(r,e[0].toLowerCase()+e.slice(1))||an(r,_v(e))||an(r,e))}let zo=null,xT=null;function cS(r){const e=zo;return zo=r,xT=r&&r.type.__scopeId||null,e}function ree(r){xT=r}function iee(){xT=null}function Xe(r,e=zo,t){if(!e||r._n)return r;const i=(...n)=>{i._d&&xF(-1);const s=cS(e),u=r(...n);return cS(s),i._d&&xF(1),u};return i._n=!0,i._c=!0,i._d=!0,i}function LA(r){const{type:e,vnode:t,proxy:i,withProxy:n,props:s,propsOptions:[u],slots:a,attrs:h,emit:p,render:m,renderCache:v,data:x,setupState:w,ctx:T,inheritAttrs:C}=r;let I,k;const R=cS(r);try{if(t.shapeFlag&4){const $=n||i;I=ju(m.call($,$,v,s,w,x,T)),k=h}else{const $=e;I=ju($.length>1?$(s,{attrs:h,slots:a,emit:p}):$(s,null)),k=e.props?h:nee(h)}}catch($){o0.length=0,vT($,r,1),I=Me(gl)}let z=I;if(k&&C!==!1){const $=Object.keys(k),{shapeFlag:j}=z;$.length&&j&7&&(u&&$.some(IP)&&(k=aee(k,u)),z=Ld(z,k))}return t.dirs&&(z=Ld(z),z.dirs=z.dirs?z.dirs.concat(t.dirs):t.dirs),t.transition&&(z.transition=t.transition),I=z,cS(R),I}const nee=r=>{let e;for(const t in r)(t==="class"||t==="style"||dT(t))&&((e||(e={}))[t]=r[t]);return e},aee=(r,e)=>{const t={};for(const i in r)(!IP(i)||!(i.slice(9)in e))&&(t[i]=r[i]);return t};function oee(r,e,t){const{props:i,children:n,component:s}=r,{props:u,children:a,patchFlag:h}=e,p=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&h>=0){if(h&1024)return!0;if(h&16)return i?cF(i,u,p):!!u;if(h&8){const m=e.dynamicProps;for(let v=0;v<m.length;v++){const x=m[v];if(u[x]!==i[x]&&!yT(p,x))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:i===u?!1:i?u?cF(i,u,p):!0:!!u;return!1}function cF(r,e,t){const i=Object.keys(e);if(i.length!==Object.keys(r).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(e[s]!==r[s]&&!yT(t,s))return!0}return!1}function see({vnode:r,parent:e},t){for(;e&&e.subTree===r;)(r=e.vnode).el=t,e=e.parent}const lee=r=>r.__isSuspense;function uee(r,e){e&&e.pendingBranch?Si(r)?e.effects.push(...r):e.effects.push(r):eee(r)}function zw(r,e){if($a){let t=$a.provides;const i=$a.parent&&$a.parent.provides;i===t&&(t=$a.provides=Object.create(i)),t[r]=e}}function Kc(r,e,t=!1){const i=$a||zo;if(i){const n=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(n&&r in n)return n[r];if(arguments.length>1)return t&&Bi(e)?e.call(i.proxy):e}}const hF={};function Ep(r,e,t){return jU(r,e,t)}function jU(r,e,{immediate:t,deep:i,flush:n,onTrack:s,onTrigger:u}=Vn){const a=$a;let h,p=!1,m=!1;if($n(r)?(h=()=>r.value,p=xE(r)):Md(r)?(h=()=>r,i=!0):Si(r)?(m=!0,p=r.some(k=>Md(k)||xE(k)),h=()=>r.map(k=>{if($n(k))return k.value;if(Md(k))return Fg(k);if(Bi(k))return Ad(k,a,2)})):Bi(r)?e?h=()=>Ad(r,a,2):h=()=>{if(!(a&&a.isUnmounted))return v&&v(),ml(r,a,3,[x])}:h=Ql,e&&i){const k=h;h=()=>Fg(k())}let v,x=k=>{v=I.onStop=()=>{Ad(k,a,4)}};if(R0)return x=Ql,e?t&&ml(e,a,3,[h(),m?[]:void 0,x]):h(),Ql;let w=m?[]:hF;const T=()=>{if(!!I.active)if(e){const k=I.run();(i||p||(m?k.some((R,z)=>E0(R,w[z])):E0(k,w)))&&(v&&v(),ml(e,a,3,[k,w===hF?void 0:w,x]),w=k)}else I.run()};T.allowRecurse=!!e;let C;n==="sync"?C=T:n==="post"?C=()=>is(T,a&&a.suspense):C=()=>QQ(T);const I=new kP(h,C);return e?t?T():w=I.run():n==="post"?is(I.run.bind(I),a&&a.suspense):I.run(),()=>{I.stop(),a&&a.scope&&EP(a.scope.effects,I)}}function cee(r,e,t){const i=this.proxy,n=La(r)?r.includes(".")?HU(i,r):()=>i[r]:r.bind(i,i);let s;Bi(e)?s=e:(s=e.handler,t=e);const u=$a;Qg(this);const a=jU(n,s.bind(i),t);return u?Qg(u):Dp(),a}function HU(r,e){const t=e.split(".");return()=>{let i=r;for(let n=0;n<t.length&&i;n++)i=i[t[n]];return i}}function Fg(r,e){if(!ka(r)||r.__v_skip||(e=e||new Set,e.has(r)))return r;if(e.add(r),$n(r))Fg(r.value,e);else if(Si(r))for(let t=0;t<r.length;t++)Fg(r[t],e);else if(mU(r)||Hg(r))r.forEach(t=>{Fg(t,e)});else if(_U(r))for(const t in r)Fg(r[t],e);return r}function hee(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return en(()=>{r.isMounted=!0}),GP(()=>{r.isUnmounting=!0}),r}const el=[Function,Array],dee={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:el,onEnter:el,onAfterEnter:el,onEnterCancelled:el,onBeforeLeave:el,onLeave:el,onAfterLeave:el,onLeaveCancelled:el,onBeforeAppear:el,onAppear:el,onAfterAppear:el,onAppearCancelled:el},setup(r,{slots:e}){const t=qP(),i=hee();let n;return()=>{const s=e.default&&qU(e.default(),!0);if(!s||!s.length)return;let u=s[0];if(s.length>1){for(const C of s)if(C.type!==gl){u=C;break}}const a=cn(r),{mode:h}=a;if(i.isLeaving)return kA(u);const p=dF(u);if(!p)return kA(u);const m=SE(p,a,i,t);TE(p,m);const v=t.subTree,x=v&&dF(v);let w=!1;const{getTransitionKey:T}=p.type;if(T){const C=T();n===void 0?n=C:C!==n&&(n=C,w=!0)}if(x&&x.type!==gl&&(!pp(p,x)||w)){const C=SE(x,a,i,t);if(TE(x,C),h==="out-in")return i.isLeaving=!0,C.afterLeave=()=>{i.isLeaving=!1,t.update()},kA(u);h==="in-out"&&p.type!==gl&&(C.delayLeave=(I,k,R)=>{const z=WU(i,x);z[String(x.key)]=x,I._leaveCb=()=>{k(),I._leaveCb=void 0,delete m.delayedLeave},m.delayedLeave=R})}return u}}},fee=dee;function WU(r,e){const{leavingVNodes:t}=r;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function SE(r,e,t,i){const{appear:n,mode:s,persisted:u=!1,onBeforeEnter:a,onEnter:h,onAfterEnter:p,onEnterCancelled:m,onBeforeLeave:v,onLeave:x,onAfterLeave:w,onLeaveCancelled:T,onBeforeAppear:C,onAppear:I,onAfterAppear:k,onAppearCancelled:R}=e,z=String(r.key),$=WU(t,r),j=(Z,H)=>{Z&&ml(Z,i,9,H)},G=(Z,H)=>{const re=H[1];j(Z,H),Si(Z)?Z.every(ne=>ne.length<=1)&&re():Z.length<=1&&re()},Y={mode:s,persisted:u,beforeEnter(Z){let H=a;if(!t.isMounted)if(n)H=C||a;else return;Z._leaveCb&&Z._leaveCb(!0);const re=$[z];re&&pp(r,re)&&re.el._leaveCb&&re.el._leaveCb(),j(H,[Z])},enter(Z){let H=h,re=p,ne=m;if(!t.isMounted)if(n)H=I||h,re=k||p,ne=R||m;else return;let se=!1;const me=Z._enterCb=Se=>{se||(se=!0,Se?j(ne,[Z]):j(re,[Z]),Y.delayedLeave&&Y.delayedLeave(),Z._enterCb=void 0)};H?G(H,[Z,me]):me()},leave(Z,H){const re=String(r.key);if(Z._enterCb&&Z._enterCb(!0),t.isUnmounting)return H();j(v,[Z]);let ne=!1;const se=Z._leaveCb=me=>{ne||(ne=!0,H(),me?j(T,[Z]):j(w,[Z]),Z._leaveCb=void 0,$[re]===r&&delete $[re])};$[re]=r,x?G(x,[Z,se]):se()},clone(Z){return SE(Z,e,t,i)}};return Y}function kA(r){if(bT(r))return r=Ld(r),r.children=null,r}function dF(r){return bT(r)?r.children?r.children[0]:void 0:r}function TE(r,e){r.shapeFlag&6&&r.component?TE(r.component.subTree,e):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function qU(r,e=!1,t){let i=[],n=0;for(let s=0;s<r.length;s++){let u=r[s];const a=t==null?u.key:String(t)+String(u.key!=null?u.key:s);u.type===Hn?(u.patchFlag&128&&n++,i=i.concat(qU(u.children,e,a))):(e||u.type!==gl)&&i.push(a!=null?Ld(u,{key:a}):u)}if(n>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function $P(r){return Bi(r)?{setup:r,name:r.name}:r}const n0=r=>!!r.type.__asyncLoader,bT=r=>r.type.__isKeepAlive;function pee(r,e){ZU(r,"a",e)}function mee(r,e){ZU(r,"da",e)}function ZU(r,e,t=$a){const i=r.__wdc||(r.__wdc=()=>{let n=t;for(;n;){if(n.isDeactivated)return;n=n.parent}return r()});if(wT(e,i,t),t){let n=t.parent;for(;n&&n.parent;)bT(n.parent.vnode)&&gee(i,e,t,n),n=n.parent}}function gee(r,e,t,i){const n=wT(e,r,i,!0);bv(()=>{EP(i[e],n)},t)}function wT(r,e,t=$a,i=!1){if(t){const n=t[r]||(t[r]=[]),s=e.__weh||(e.__weh=(...u)=>{if(t.isUnmounted)return;yv(),Qg(t);const a=ml(e,t,r,u);return Dp(),xv(),a});return i?n.unshift(s):n.push(s),s}}const fh=r=>(e,t=$a)=>(!R0||r==="sp")&&wT(r,e,t),vee=fh("bm"),en=fh("m"),_ee=fh("bu"),yee=fh("u"),GP=fh("bum"),bv=fh("um"),xee=fh("sp"),bee=fh("rtg"),wee=fh("rtc");function See(r,e=$a){wT("ec",r,e)}function Pf(r,e,t,i){const n=r.dirs,s=e&&e.dirs;for(let u=0;u<n.length;u++){const a=n[u];s&&(a.oldValue=s[u].value);let h=a.dir[i];h&&(yv(),ml(h,t,8,[r.el,a,r,e]),xv())}}const UP="components";function Tee(r,e){return YU(UP,r,!0,e)||r}const XU=Symbol();function Mee(r){return La(r)?YU(UP,r,!1)||r:r||XU}function YU(r,e,t=!0,i=!1){const n=zo||$a;if(n){const s=n.type;if(r===UP){const a=Qee(s);if(a&&(a===e||a===ec(e)||a===mT(ec(e))))return s}const u=fF(n[r]||s[r],e)||fF(n.appContext[r],e);return!u&&i?s:u}}function fF(r,e){return r&&(r[e]||r[ec(e)]||r[mT(ec(e))])}function a0(r,e,t,i){let n;const s=t&&t[i];if(Si(r)||La(r)){n=new Array(r.length);for(let u=0,a=r.length;u<a;u++)n[u]=e(r[u],u,void 0,s&&s[u])}else if(typeof r=="number"){n=new Array(r);for(let u=0;u<r;u++)n[u]=e(u+1,u,void 0,s&&s[u])}else if(ka(r))if(r[Symbol.iterator])n=Array.from(r,(u,a)=>e(u,a,void 0,s&&s[a]));else{const u=Object.keys(r);n=new Array(u.length);for(let a=0,h=u.length;a<h;a++){const p=u[a];n[a]=e(r[p],p,a,s&&s[a])}}else n=[];return t&&(t[i]=n),n}function ru(r,e,t={},i,n){if(zo.isCE||zo.parent&&n0(zo.parent)&&zo.parent.isCE)return Me("slot",e==="default"?null:{name:e},i&&i());let s=r[e];s&&s._c&&(s._d=!1),Yt();const u=s&&KU(s(t)),a=Wn(Hn,{key:t.key||`_${e}`},u||(i?i():[]),u&&r._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function KU(r){return r.some(e=>fS(e)?!(e.type===gl||e.type===Hn&&!KU(e.children)):!0)?r:null}const ME=r=>r?c8(r)?ZP(r)||r.proxy:ME(r.parent):null,hS=wo(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>ME(r.parent),$root:r=>ME(r.root),$emit:r=>r.emit,$options:r=>QU(r),$forceUpdate:r=>r.f||(r.f=()=>FU(r.update)),$nextTick:r=>r.n||(r.n=VP.bind(r.proxy)),$watch:r=>cee.bind(r)}),Aee={get({_:r},e){const{ctx:t,setupState:i,data:n,props:s,accessCache:u,type:a,appContext:h}=r;let p;if(e[0]!=="$"){const w=u[e];if(w!==void 0)switch(w){case 1:return i[e];case 2:return n[e];case 4:return t[e];case 3:return s[e]}else{if(i!==Vn&&an(i,e))return u[e]=1,i[e];if(n!==Vn&&an(n,e))return u[e]=2,n[e];if((p=r.propsOptions[0])&&an(p,e))return u[e]=3,s[e];if(t!==Vn&&an(t,e))return u[e]=4,t[e];AE&&(u[e]=0)}}const m=hS[e];let v,x;if(m)return e==="$attrs"&&zs(r,"get",e),m(r);if((v=a.__cssModules)&&(v=v[e]))return v;if(t!==Vn&&an(t,e))return u[e]=4,t[e];if(x=h.config.globalProperties,an(x,e))return x[e]},set({_:r},e,t){const{data:i,setupState:n,ctx:s}=r;return n!==Vn&&an(n,e)?(n[e]=t,!0):i!==Vn&&an(i,e)?(i[e]=t,!0):an(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(s[e]=t,!0)},has({_:{data:r,setupState:e,accessCache:t,ctx:i,appContext:n,propsOptions:s}},u){let a;return!!t[u]||r!==Vn&&an(r,u)||e!==Vn&&an(e,u)||(a=s[0])&&an(a,u)||an(i,u)||an(hS,u)||an(n.config.globalProperties,u)},defineProperty(r,e,t){return t.get!=null?r._.accessCache[e]=0:an(t,"value")&&this.set(r,e,t.value,null),Reflect.defineProperty(r,e,t)}};let AE=!0;function Cee(r){const e=QU(r),t=r.proxy,i=r.ctx;AE=!1,e.beforeCreate&&pF(e.beforeCreate,r,"bc");const{data:n,computed:s,methods:u,watch:a,provide:h,inject:p,created:m,beforeMount:v,mounted:x,beforeUpdate:w,updated:T,activated:C,deactivated:I,beforeDestroy:k,beforeUnmount:R,destroyed:z,unmounted:$,render:j,renderTracked:G,renderTriggered:Y,errorCaptured:Z,serverPrefetch:H,expose:re,inheritAttrs:ne,components:se,directives:me,filters:Se}=e;if(p&&Iee(p,i,null,r.appContext.config.unwrapInjectedRef),u)for(const Fe in u){const Ce=u[Fe];Bi(Ce)&&(i[Fe]=Ce.bind(t))}if(n){const Fe=n.call(t,t);ka(Fe)&&(r.data=Kp(Fe))}if(AE=!0,s)for(const Fe in s){const Ce=s[Fe],We=Bi(Ce)?Ce.bind(t,t):Bi(Ce.get)?Ce.get.bind(t,t):Ql,gt=!Bi(Ce)&&Bi(Ce.set)?Ce.set.bind(t):Ql,St=Ds({get:We,set:gt});Object.defineProperty(i,Fe,{enumerable:!0,configurable:!0,get:()=>St.value,set:et=>St.value=et})}if(a)for(const Fe in a)JU(a[Fe],i,t,Fe);if(h){const Fe=Bi(h)?h.call(t):h;Reflect.ownKeys(Fe).forEach(Ce=>{zw(Ce,Fe[Ce])})}m&&pF(m,r,"c");function ke(Fe,Ce){Si(Ce)?Ce.forEach(We=>Fe(We.bind(t))):Ce&&Fe(Ce.bind(t))}if(ke(vee,v),ke(en,x),ke(_ee,w),ke(yee,T),ke(pee,C),ke(mee,I),ke(See,Z),ke(wee,G),ke(bee,Y),ke(GP,R),ke(bv,$),ke(xee,H),Si(re))if(re.length){const Fe=r.exposed||(r.exposed={});re.forEach(Ce=>{Object.defineProperty(Fe,Ce,{get:()=>t[Ce],set:We=>t[Ce]=We})})}else r.exposed||(r.exposed={});j&&r.render===Ql&&(r.render=j),ne!=null&&(r.inheritAttrs=ne),se&&(r.components=se),me&&(r.directives=me)}function Iee(r,e,t=Ql,i=!1){Si(r)&&(r=CE(r));for(const n in r){const s=r[n];let u;ka(s)?"default"in s?u=Kc(s.from||n,s.default,!0):u=Kc(s.from||n):u=Kc(s),$n(u)&&i?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>u.value,set:a=>u.value=a}):e[n]=u}}function pF(r,e,t){ml(Si(r)?r.map(i=>i.bind(e.proxy)):r.bind(e.proxy),e,t)}function JU(r,e,t,i){const n=i.includes(".")?HU(t,i):()=>t[i];if(La(r)){const s=e[r];Bi(s)&&Ep(n,s)}else if(Bi(r))Ep(n,r.bind(t));else if(ka(r))if(Si(r))r.forEach(s=>JU(s,e,t,i));else{const s=Bi(r.handler)?r.handler.bind(t):e[r.handler];Bi(s)&&Ep(n,s,r)}}function QU(r){const e=r.type,{mixins:t,extends:i}=e,{mixins:n,optionsCache:s,config:{optionMergeStrategies:u}}=r.appContext,a=s.get(e);let h;return a?h=a:!n.length&&!t&&!i?h=e:(h={},n.length&&n.forEach(p=>dS(h,p,u,!0)),dS(h,e,u)),s.set(e,h),h}function dS(r,e,t,i=!1){const{mixins:n,extends:s}=e;s&&dS(r,s,t,!0),n&&n.forEach(u=>dS(r,u,t,!0));for(const u in e)if(!(i&&u==="expose")){const a=Eee[u]||t&&t[u];r[u]=a?a(r[u],e[u]):e[u]}return r}const Eee={data:mF,props:ap,emits:ap,methods:ap,computed:ap,beforeCreate:Po,created:Po,beforeMount:Po,mounted:Po,beforeUpdate:Po,updated:Po,beforeDestroy:Po,beforeUnmount:Po,destroyed:Po,unmounted:Po,activated:Po,deactivated:Po,errorCaptured:Po,serverPrefetch:Po,components:ap,directives:ap,watch:Pee,provide:mF,inject:Dee};function mF(r,e){return e?r?function(){return wo(Bi(r)?r.call(this,this):r,Bi(e)?e.call(this,this):e)}:e:r}function Dee(r,e){return ap(CE(r),CE(e))}function CE(r){if(Si(r)){const e={};for(let t=0;t<r.length;t++)e[r[t]]=r[t];return e}return r}function Po(r,e){return r?[...new Set([].concat(r,e))]:e}function ap(r,e){return r?wo(wo(Object.create(null),r),e):e}function Pee(r,e){if(!r)return e;if(!e)return r;const t=wo(Object.create(null),r);for(const i in e)t[i]=Po(r[i],e[i]);return t}function Lee(r,e,t,i=!1){const n={},s={};lS(s,ST,1),r.propsDefaults=Object.create(null),e8(r,e,n,s);for(const u in r.propsOptions[0])u in n||(n[u]=void 0);t?r.props=i?n:$Q(n):r.type.props?r.props=n:r.props=s,r.attrs=s}function kee(r,e,t,i){const{props:n,attrs:s,vnode:{patchFlag:u}}=r,a=cn(n),[h]=r.propsOptions;let p=!1;if((i||u>0)&&!(u&16)){if(u&8){const m=r.vnode.dynamicProps;for(let v=0;v<m.length;v++){let x=m[v];if(yT(r.emitsOptions,x))continue;const w=e[x];if(h)if(an(s,x))w!==s[x]&&(s[x]=w,p=!0);else{const T=ec(x);n[T]=IE(h,a,T,w,r,!1)}else w!==s[x]&&(s[x]=w,p=!0)}}}else{e8(r,e,n,s)&&(p=!0);let m;for(const v in a)(!e||!an(e,v)&&((m=_v(v))===v||!an(e,m)))&&(h?t&&(t[v]!==void 0||t[m]!==void 0)&&(n[v]=IE(h,a,v,void 0,r,!0)):delete n[v]);if(s!==a)for(const v in s)(!e||!an(e,v)&&!0)&&(delete s[v],p=!0)}p&&ih(r,"set","$attrs")}function e8(r,e,t,i){const[n,s]=r.propsOptions;let u=!1,a;if(e)for(let h in e){if(Ow(h))continue;const p=e[h];let m;n&&an(n,m=ec(h))?!s||!s.includes(m)?t[m]=p:(a||(a={}))[m]=p:yT(r.emitsOptions,h)||(!(h in i)||p!==i[h])&&(i[h]=p,u=!0)}if(s){const h=cn(t),p=a||Vn;for(let m=0;m<s.length;m++){const v=s[m];t[v]=IE(n,h,v,p[v],r,!an(p,v))}}return u}function IE(r,e,t,i,n,s){const u=r[t];if(u!=null){const a=an(u,"default");if(a&&i===void 0){const h=u.default;if(u.type!==Function&&Bi(h)){const{propsDefaults:p}=n;t in p?i=p[t]:(Qg(n),i=p[t]=h.call(null,e),Dp())}else i=h}u[0]&&(s&&!a?i=!1:u[1]&&(i===""||i===_v(t))&&(i=!0))}return i}function t8(r,e,t=!1){const i=e.propsCache,n=i.get(r);if(n)return n;const s=r.props,u={},a=[];let h=!1;if(!Bi(r)){const m=v=>{h=!0;const[x,w]=t8(v,e,!0);wo(u,x),w&&a.push(...w)};!t&&e.mixins.length&&e.mixins.forEach(m),r.extends&&m(r.extends),r.mixins&&r.mixins.forEach(m)}if(!s&&!h)return i.set(r,jg),jg;if(Si(s))for(let m=0;m<s.length;m++){const v=ec(s[m]);gF(v)&&(u[v]=Vn)}else if(s)for(const m in s){const v=ec(m);if(gF(v)){const x=s[m],w=u[v]=Si(x)||Bi(x)?{type:x}:x;if(w){const T=yF(Boolean,w.type),C=yF(String,w.type);w[0]=T>-1,w[1]=C<0||T<C,(T>-1||an(w,"default"))&&a.push(v)}}}const p=[u,a];return i.set(r,p),p}function gF(r){return r[0]!=="$"}function vF(r){const e=r&&r.toString().match(/^\s*function (\w+)/);return e?e[1]:r===null?"null":""}function _F(r,e){return vF(r)===vF(e)}function yF(r,e){return Si(e)?e.findIndex(t=>_F(t,r)):Bi(e)&&_F(e,r)?0:-1}const r8=r=>r[0]==="_"||r==="$stable",jP=r=>Si(r)?r.map(ju):[ju(r)],Ree=(r,e,t)=>{if(e._n)return e;const i=Xe((...n)=>jP(e(...n)),t);return i._c=!1,i},i8=(r,e,t)=>{const i=r._ctx;for(const n in r){if(r8(n))continue;const s=r[n];if(Bi(s))e[n]=Ree(n,s,i);else if(s!=null){const u=jP(s);e[n]=()=>u}}},n8=(r,e)=>{const t=jP(e);r.slots.default=()=>t},Oee=(r,e)=>{if(r.vnode.shapeFlag&32){const t=e._;t?(r.slots=cn(e),lS(e,"_",t)):i8(e,r.slots={})}else r.slots={},e&&n8(r,e);lS(r.slots,ST,1)},zee=(r,e,t)=>{const{vnode:i,slots:n}=r;let s=!0,u=Vn;if(i.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:(wo(n,e),!t&&a===1&&delete n._):(s=!e.$stable,i8(e,n)),u=e}else e&&(n8(r,e),u={default:1});if(s)for(const a in n)!r8(a)&&!(a in u)&&delete n[a]};function a8(){return{app:null,config:{isNativeTag:sQ,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Bee=0;function Fee(r,e){return function(i,n=null){Bi(i)||(i=Object.assign({},i)),n!=null&&!ka(n)&&(n=null);const s=a8(),u=new Set;let a=!1;const h=s.app={_uid:Bee++,_component:i,_props:n,_container:null,_context:s,_instance:null,version:tte,get config(){return s.config},set config(p){},use(p,...m){return u.has(p)||(p&&Bi(p.install)?(u.add(p),p.install(h,...m)):Bi(p)&&(u.add(p),p(h,...m))),h},mixin(p){return s.mixins.includes(p)||s.mixins.push(p),h},component(p,m){return m?(s.components[p]=m,h):s.components[p]},directive(p,m){return m?(s.directives[p]=m,h):s.directives[p]},mount(p,m,v){if(!a){const x=Me(i,n);return x.appContext=s,m&&e?e(x,p):r(x,p,v),a=!0,h._container=p,p.__vue_app__=h,ZP(x.component)||x.component.proxy}},unmount(){a&&(r(null,h._container),delete h._container.__vue_app__)},provide(p,m){return s.provides[p]=m,h}};return h}}function EE(r,e,t,i,n=!1){if(Si(r)){r.forEach((x,w)=>EE(x,e&&(Si(e)?e[w]:e),t,i,n));return}if(n0(i)&&!n)return;const s=i.shapeFlag&4?ZP(i.component)||i.component.proxy:i.el,u=n?null:s,{i:a,r:h}=r,p=e&&e.r,m=a.refs===Vn?a.refs={}:a.refs,v=a.setupState;if(p!=null&&p!==h&&(La(p)?(m[p]=null,an(v,p)&&(v[p]=null)):$n(p)&&(p.value=null)),Bi(h))Ad(h,a,12,[u,m]);else{const x=La(h),w=$n(h);if(x||w){const T=()=>{if(r.f){const C=x?m[h]:h.value;n?Si(C)&&EP(C,s):Si(C)?C.includes(s)||C.push(s):x?(m[h]=[s],an(v,h)&&(v[h]=m[h])):(h.value=[s],r.k&&(m[r.k]=h.value))}else x?(m[h]=u,an(v,h)&&(v[h]=u)):$n(h)&&(h.value=u,r.k&&(m[r.k]=u))};u?(T.id=-1,is(T,t)):T()}}}const is=uee;function Nee(r){return Vee(r)}function Vee(r,e){const t=pQ();t.__VUE__=!0;const{insert:i,remove:n,patchProp:s,createElement:u,createText:a,createComment:h,setText:p,setElementText:m,parentNode:v,nextSibling:x,setScopeId:w=Ql,cloneNode:T,insertStaticContent:C}=r,I=(Re,Ve,Ue,Be=null,ce=null,ye=null,De=!1,qe=null,Ze=!!Ve.dynamicChildren)=>{if(Re===Ve)return;Re&&!pp(Re,Ve)&&(Be=vt(Re),ht(Re,ce,ye,!0),Re=null),Ve.patchFlag===-2&&(Ze=!1,Ve.dynamicChildren=null);const{type:Je,ref:xt,shapeFlag:ot}=Ve;switch(Je){case HP:k(Re,Ve,Ue,Be);break;case gl:R(Re,Ve,Ue,Be);break;case Bw:Re==null&&z(Ve,Ue,Be,De);break;case Hn:me(Re,Ve,Ue,Be,ce,ye,De,qe,Ze);break;default:ot&1?G(Re,Ve,Ue,Be,ce,ye,De,qe,Ze):ot&6?Se(Re,Ve,Ue,Be,ce,ye,De,qe,Ze):(ot&64||ot&128)&&Je.process(Re,Ve,Ue,Be,ce,ye,De,qe,Ze,jt)}xt!=null&&ce&&EE(xt,Re&&Re.ref,ye,Ve||Re,!Ve)},k=(Re,Ve,Ue,Be)=>{if(Re==null)i(Ve.el=a(Ve.children),Ue,Be);else{const ce=Ve.el=Re.el;Ve.children!==Re.children&&p(ce,Ve.children)}},R=(Re,Ve,Ue,Be)=>{Re==null?i(Ve.el=h(Ve.children||""),Ue,Be):Ve.el=Re.el},z=(Re,Ve,Ue,Be)=>{[Re.el,Re.anchor]=C(Re.children,Ve,Ue,Be,Re.el,Re.anchor)},$=({el:Re,anchor:Ve},Ue,Be)=>{let ce;for(;Re&&Re!==Ve;)ce=x(Re),i(Re,Ue,Be),Re=ce;i(Ve,Ue,Be)},j=({el:Re,anchor:Ve})=>{let Ue;for(;Re&&Re!==Ve;)Ue=x(Re),n(Re),Re=Ue;n(Ve)},G=(Re,Ve,Ue,Be,ce,ye,De,qe,Ze)=>{De=De||Ve.type==="svg",Re==null?Y(Ve,Ue,Be,ce,ye,De,qe,Ze):re(Re,Ve,ce,ye,De,qe,Ze)},Y=(Re,Ve,Ue,Be,ce,ye,De,qe)=>{let Ze,Je;const{type:xt,props:ot,shapeFlag:bt,transition:qt,patchFlag:Kt,dirs:Cr}=Re;if(Re.el&&T!==void 0&&Kt===-1)Ze=Re.el=T(Re.el);else{if(Ze=Re.el=u(Re.type,ye,ot&&ot.is,ot),bt&8?m(Ze,Re.children):bt&16&&H(Re.children,Ze,null,Be,ce,ye&&xt!=="foreignObject",De,qe),Cr&&Pf(Re,null,Be,"created"),ot){for(const Ur in ot)Ur!=="value"&&!Ow(Ur)&&s(Ze,Ur,null,ot[Ur],ye,Re.children,Be,ce,nt);"value"in ot&&s(Ze,"value",null,ot.value),(Je=ot.onVnodeBeforeMount)&&Lu(Je,Be,Re)}Z(Ze,Re,Re.scopeId,De,Be)}Cr&&Pf(Re,null,Be,"beforeMount");const Rr=(!ce||ce&&!ce.pendingBranch)&&qt&&!qt.persisted;Rr&&qt.beforeEnter(Ze),i(Ze,Ve,Ue),((Je=ot&&ot.onVnodeMounted)||Rr||Cr)&&is(()=>{Je&&Lu(Je,Be,Re),Rr&&qt.enter(Ze),Cr&&Pf(Re,null,Be,"mounted")},ce)},Z=(Re,Ve,Ue,Be,ce)=>{if(Ue&&w(Re,Ue),Be)for(let ye=0;ye<Be.length;ye++)w(Re,Be[ye]);if(ce){let ye=ce.subTree;if(Ve===ye){const De=ce.vnode;Z(Re,De,De.scopeId,De.slotScopeIds,ce.parent)}}},H=(Re,Ve,Ue,Be,ce,ye,De,qe,Ze=0)=>{for(let Je=Ze;Je<Re.length;Je++){const xt=Re[Je]=qe?hd(Re[Je]):ju(Re[Je]);I(null,xt,Ve,Ue,Be,ce,ye,De,qe)}},re=(Re,Ve,Ue,Be,ce,ye,De)=>{const qe=Ve.el=Re.el;let{patchFlag:Ze,dynamicChildren:Je,dirs:xt}=Ve;Ze|=Re.patchFlag&16;const ot=Re.props||Vn,bt=Ve.props||Vn;let qt;Ue&&Lf(Ue,!1),(qt=bt.onVnodeBeforeUpdate)&&Lu(qt,Ue,Ve,Re),xt&&Pf(Ve,Re,Ue,"beforeUpdate"),Ue&&Lf(Ue,!0);const Kt=ce&&Ve.type!=="foreignObject";if(Je?ne(Re.dynamicChildren,Je,qe,Ue,Be,Kt,ye):De||We(Re,Ve,qe,null,Ue,Be,Kt,ye,!1),Ze>0){if(Ze&16)se(qe,Ve,ot,bt,Ue,Be,ce);else if(Ze&2&&ot.class!==bt.class&&s(qe,"class",null,bt.class,ce),Ze&4&&s(qe,"style",ot.style,bt.style,ce),Ze&8){const Cr=Ve.dynamicProps;for(let Rr=0;Rr<Cr.length;Rr++){const Ur=Cr[Rr],Kr=ot[Ur],ei=bt[Ur];(ei!==Kr||Ur==="value")&&s(qe,Ur,Kr,ei,ce,Re.children,Ue,Be,nt)}}Ze&1&&Re.children!==Ve.children&&m(qe,Ve.children)}else!De&&Je==null&&se(qe,Ve,ot,bt,Ue,Be,ce);((qt=bt.onVnodeUpdated)||xt)&&is(()=>{qt&&Lu(qt,Ue,Ve,Re),xt&&Pf(Ve,Re,Ue,"updated")},Be)},ne=(Re,Ve,Ue,Be,ce,ye,De)=>{for(let qe=0;qe<Ve.length;qe++){const Ze=Re[qe],Je=Ve[qe],xt=Ze.el&&(Ze.type===Hn||!pp(Ze,Je)||Ze.shapeFlag&70)?v(Ze.el):Ue;I(Ze,Je,xt,null,Be,ce,ye,De,!0)}},se=(Re,Ve,Ue,Be,ce,ye,De)=>{if(Ue!==Be){for(const qe in Be){if(Ow(qe))continue;const Ze=Be[qe],Je=Ue[qe];Ze!==Je&&qe!=="value"&&s(Re,qe,Je,Ze,De,Ve.children,ce,ye,nt)}if(Ue!==Vn)for(const qe in Ue)!Ow(qe)&&!(qe in Be)&&s(Re,qe,Ue[qe],null,De,Ve.children,ce,ye,nt);"value"in Be&&s(Re,"value",Ue.value,Be.value)}},me=(Re,Ve,Ue,Be,ce,ye,De,qe,Ze)=>{const Je=Ve.el=Re?Re.el:a(""),xt=Ve.anchor=Re?Re.anchor:a("");let{patchFlag:ot,dynamicChildren:bt,slotScopeIds:qt}=Ve;qt&&(qe=qe?qe.concat(qt):qt),Re==null?(i(Je,Ue,Be),i(xt,Ue,Be),H(Ve.children,Ue,xt,ce,ye,De,qe,Ze)):ot>0&&ot&64&&bt&&Re.dynamicChildren?(ne(Re.dynamicChildren,bt,Ue,ce,ye,De,qe),(Ve.key!=null||ce&&Ve===ce.subTree)&&o8(Re,Ve,!0)):We(Re,Ve,Ue,xt,ce,ye,De,qe,Ze)},Se=(Re,Ve,Ue,Be,ce,ye,De,qe,Ze)=>{Ve.slotScopeIds=qe,Re==null?Ve.shapeFlag&512?ce.ctx.activate(Ve,Ue,Be,De,Ze):Ie(Ve,Ue,Be,ce,ye,De,Ze):ke(Re,Ve,Ze)},Ie=(Re,Ve,Ue,Be,ce,ye,De)=>{const qe=Re.component=Zee(Re,Be,ce);if(bT(Re)&&(qe.ctx.renderer=jt),Xee(qe),qe.asyncDep){if(ce&&ce.registerDep(qe,Fe),!Re.el){const Ze=qe.subTree=Me(gl);R(null,Ze,Ve,Ue)}return}Fe(qe,Re,Ve,Ue,ce,ye,De)},ke=(Re,Ve,Ue)=>{const Be=Ve.component=Re.component;if(oee(Re,Ve,Ue))if(Be.asyncDep&&!Be.asyncResolved){Ce(Be,Ve,Ue);return}else Be.next=Ve,JQ(Be.update),Be.update();else Ve.el=Re.el,Be.vnode=Ve},Fe=(Re,Ve,Ue,Be,ce,ye,De)=>{const qe=()=>{if(Re.isMounted){let{next:xt,bu:ot,u:bt,parent:qt,vnode:Kt}=Re,Cr=xt,Rr;Lf(Re,!1),xt?(xt.el=Kt.el,Ce(Re,xt,De)):xt=Kt,ot&&PA(ot),(Rr=xt.props&&xt.props.onVnodeBeforeUpdate)&&Lu(Rr,qt,xt,Kt),Lf(Re,!0);const Ur=LA(Re),Kr=Re.subTree;Re.subTree=Ur,I(Kr,Ur,v(Kr.el),vt(Kr),Re,ce,ye),xt.el=Ur.el,Cr===null&&see(Re,Ur.el),bt&&is(bt,ce),(Rr=xt.props&&xt.props.onVnodeUpdated)&&is(()=>Lu(Rr,qt,xt,Kt),ce)}else{let xt;const{el:ot,props:bt}=Ve,{bm:qt,m:Kt,parent:Cr}=Re,Rr=n0(Ve);if(Lf(Re,!1),qt&&PA(qt),!Rr&&(xt=bt&&bt.onVnodeBeforeMount)&&Lu(xt,Cr,Ve),Lf(Re,!0),ot&&Wt){const Ur=()=>{Re.subTree=LA(Re),Wt(ot,Re.subTree,Re,ce,null)};Rr?Ve.type.__asyncLoader().then(()=>!Re.isUnmounted&&Ur()):Ur()}else{const Ur=Re.subTree=LA(Re);I(null,Ur,Ue,Be,Re,ce,ye),Ve.el=Ur.el}if(Kt&&is(Kt,ce),!Rr&&(xt=bt&&bt.onVnodeMounted)){const Ur=Ve;is(()=>Lu(xt,Cr,Ur),ce)}(Ve.shapeFlag&256||Cr&&n0(Cr.vnode)&&Cr.vnode.shapeFlag&256)&&Re.a&&is(Re.a,ce),Re.isMounted=!0,Ve=Ue=Be=null}},Ze=Re.effect=new kP(qe,()=>FU(Je),Re.scope),Je=Re.update=()=>Ze.run();Je.id=Re.uid,Lf(Re,!0),Je()},Ce=(Re,Ve,Ue)=>{Ve.component=Re;const Be=Re.vnode.props;Re.vnode=Ve,Re.next=null,kee(Re,Ve.props,Be,Ue),zee(Re,Ve.children,Ue),yv(),_T(void 0,Re.update),xv()},We=(Re,Ve,Ue,Be,ce,ye,De,qe,Ze=!1)=>{const Je=Re&&Re.children,xt=Re?Re.shapeFlag:0,ot=Ve.children,{patchFlag:bt,shapeFlag:qt}=Ve;if(bt>0){if(bt&128){St(Je,ot,Ue,Be,ce,ye,De,qe,Ze);return}else if(bt&256){gt(Je,ot,Ue,Be,ce,ye,De,qe,Ze);return}}qt&8?(xt&16&&nt(Je,ce,ye),ot!==Je&&m(Ue,ot)):xt&16?qt&16?St(Je,ot,Ue,Be,ce,ye,De,qe,Ze):nt(Je,ce,ye,!0):(xt&8&&m(Ue,""),qt&16&&H(ot,Ue,Be,ce,ye,De,qe,Ze))},gt=(Re,Ve,Ue,Be,ce,ye,De,qe,Ze)=>{Re=Re||jg,Ve=Ve||jg;const Je=Re.length,xt=Ve.length,ot=Math.min(Je,xt);let bt;for(bt=0;bt<ot;bt++){const qt=Ve[bt]=Ze?hd(Ve[bt]):ju(Ve[bt]);I(Re[bt],qt,Ue,null,ce,ye,De,qe,Ze)}Je>xt?nt(Re,ce,ye,!0,!1,ot):H(Ve,Ue,Be,ce,ye,De,qe,Ze,ot)},St=(Re,Ve,Ue,Be,ce,ye,De,qe,Ze)=>{let Je=0;const xt=Ve.length;let ot=Re.length-1,bt=xt-1;for(;Je<=ot&&Je<=bt;){const qt=Re[Je],Kt=Ve[Je]=Ze?hd(Ve[Je]):ju(Ve[Je]);if(pp(qt,Kt))I(qt,Kt,Ue,null,ce,ye,De,qe,Ze);else break;Je++}for(;Je<=ot&&Je<=bt;){const qt=Re[ot],Kt=Ve[bt]=Ze?hd(Ve[bt]):ju(Ve[bt]);if(pp(qt,Kt))I(qt,Kt,Ue,null,ce,ye,De,qe,Ze);else break;ot--,bt--}if(Je>ot){if(Je<=bt){const qt=bt+1,Kt=qt<xt?Ve[qt].el:Be;for(;Je<=bt;)I(null,Ve[Je]=Ze?hd(Ve[Je]):ju(Ve[Je]),Ue,Kt,ce,ye,De,qe,Ze),Je++}}else if(Je>bt)for(;Je<=ot;)ht(Re[Je],ce,ye,!0),Je++;else{const qt=Je,Kt=Je,Cr=new Map;for(Je=Kt;Je<=bt;Je++){const Ki=Ve[Je]=Ze?hd(Ve[Je]):ju(Ve[Je]);Ki.key!=null&&Cr.set(Ki.key,Je)}let Rr,Ur=0;const Kr=bt-Kt+1;let ei=!1,fi=0;const Ti=new Array(Kr);for(Je=0;Je<Kr;Je++)Ti[Je]=0;for(Je=qt;Je<=ot;Je++){const Ki=Re[Je];if(Ur>=Kr){ht(Ki,ce,ye,!0);continue}let Ji;if(Ki.key!=null)Ji=Cr.get(Ki.key);else for(Rr=Kt;Rr<=bt;Rr++)if(Ti[Rr-Kt]===0&&pp(Ki,Ve[Rr])){Ji=Rr;break}Ji===void 0?ht(Ki,ce,ye,!0):(Ti[Ji-Kt]=Je+1,Ji>=fi?fi=Ji:ei=!0,I(Ki,Ve[Ji],Ue,null,ce,ye,De,qe,Ze),Ur++)}const wn=ei?$ee(Ti):jg;for(Rr=wn.length-1,Je=Kr-1;Je>=0;Je--){const Ki=Kt+Je,Ji=Ve[Ki],za=Ki+1<xt?Ve[Ki+1].el:Be;Ti[Je]===0?I(null,Ji,Ue,za,ce,ye,De,qe,Ze):ei&&(Rr<0||Je!==wn[Rr]?et(Ji,Ue,za,2):Rr--)}}},et=(Re,Ve,Ue,Be,ce=null)=>{const{el:ye,type:De,transition:qe,children:Ze,shapeFlag:Je}=Re;if(Je&6){et(Re.component.subTree,Ve,Ue,Be);return}if(Je&128){Re.suspense.move(Ve,Ue,Be);return}if(Je&64){De.move(Re,Ve,Ue,jt);return}if(De===Hn){i(ye,Ve,Ue);for(let ot=0;ot<Ze.length;ot++)et(Ze[ot],Ve,Ue,Be);i(Re.anchor,Ve,Ue);return}if(De===Bw){$(Re,Ve,Ue);return}if(Be!==2&&Je&1&&qe)if(Be===0)qe.beforeEnter(ye),i(ye,Ve,Ue),is(()=>qe.enter(ye),ce);else{const{leave:ot,delayLeave:bt,afterLeave:qt}=qe,Kt=()=>i(ye,Ve,Ue),Cr=()=>{ot(ye,()=>{Kt(),qt&&qt()})};bt?bt(ye,Kt,Cr):Cr()}else i(ye,Ve,Ue)},ht=(Re,Ve,Ue,Be=!1,ce=!1)=>{const{type:ye,props:De,ref:qe,children:Ze,dynamicChildren:Je,shapeFlag:xt,patchFlag:ot,dirs:bt}=Re;if(qe!=null&&EE(qe,null,Ue,Re,!0),xt&256){Ve.ctx.deactivate(Re);return}const qt=xt&1&&bt,Kt=!n0(Re);let Cr;if(Kt&&(Cr=De&&De.onVnodeBeforeUnmount)&&Lu(Cr,Ve,Re),xt&6)dt(Re.component,Ue,Be);else{if(xt&128){Re.suspense.unmount(Ue,Be);return}qt&&Pf(Re,null,Ve,"beforeUnmount"),xt&64?Re.type.remove(Re,Ve,Ue,ce,jt,Be):Je&&(ye!==Hn||ot>0&&ot&64)?nt(Je,Ve,Ue,!1,!0):(ye===Hn&&ot&384||!ce&&xt&16)&&nt(Ze,Ve,Ue),Be&&$e(Re)}(Kt&&(Cr=De&&De.onVnodeUnmounted)||qt)&&is(()=>{Cr&&Lu(Cr,Ve,Re),qt&&Pf(Re,null,Ve,"unmounted")},Ue)},$e=Re=>{const{type:Ve,el:Ue,anchor:Be,transition:ce}=Re;if(Ve===Hn){He(Ue,Be);return}if(Ve===Bw){j(Re);return}const ye=()=>{n(Ue),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(Re.shapeFlag&1&&ce&&!ce.persisted){const{leave:De,delayLeave:qe}=ce,Ze=()=>De(Ue,ye);qe?qe(Re.el,ye,Ze):Ze()}else ye()},He=(Re,Ve)=>{let Ue;for(;Re!==Ve;)Ue=x(Re),n(Re),Re=Ue;n(Ve)},dt=(Re,Ve,Ue)=>{const{bum:Be,scope:ce,update:ye,subTree:De,um:qe}=Re;Be&&PA(Be),ce.stop(),ye&&(ye.active=!1,ht(De,Re,Ve,Ue)),qe&&is(qe,Ve),is(()=>{Re.isUnmounted=!0},Ve),Ve&&Ve.pendingBranch&&!Ve.isUnmounted&&Re.asyncDep&&!Re.asyncResolved&&Re.suspenseId===Ve.pendingId&&(Ve.deps--,Ve.deps===0&&Ve.resolve())},nt=(Re,Ve,Ue,Be=!1,ce=!1,ye=0)=>{for(let De=ye;De<Re.length;De++)ht(Re[De],Ve,Ue,Be,ce)},vt=Re=>Re.shapeFlag&6?vt(Re.component.subTree):Re.shapeFlag&128?Re.suspense.next():x(Re.anchor||Re.el),Pt=(Re,Ve,Ue)=>{Re==null?Ve._vnode&&ht(Ve._vnode,null,null,!0):I(Ve._vnode||null,Re,Ve,null,null,null,Ue),$U(),Ve._vnode=Re},jt={p:I,um:ht,m:et,r:$e,mt:Ie,mc:H,pc:We,pbc:ne,n:vt,o:r};let Et,Wt;return e&&([Et,Wt]=e(jt)),{render:Pt,hydrate:Et,createApp:Fee(Pt,Et)}}function Lf({effect:r,update:e},t){r.allowRecurse=e.allowRecurse=t}function o8(r,e,t=!1){const i=r.children,n=e.children;if(Si(i)&&Si(n))for(let s=0;s<i.length;s++){const u=i[s];let a=n[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[s]=hd(n[s]),a.el=u.el),t||o8(u,a))}}function $ee(r){const e=r.slice(),t=[0];let i,n,s,u,a;const h=r.length;for(i=0;i<h;i++){const p=r[i];if(p!==0){if(n=t[t.length-1],r[n]<p){e[i]=n,t.push(i);continue}for(s=0,u=t.length-1;s<u;)a=s+u>>1,r[t[a]]<p?s=a+1:u=a;p<r[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,u=t[s-1];s-- >0;)t[s]=u,u=e[u];return t}const Gee=r=>r.__isTeleport,Hn=Symbol(void 0),HP=Symbol(void 0),gl=Symbol(void 0),Bw=Symbol(void 0),o0=[];let Yl=null;function Yt(r=!1){o0.push(Yl=r?null:[])}function Uee(){o0.pop(),Yl=o0[o0.length-1]||null}let k0=1;function xF(r){k0+=r}function s8(r){return r.dynamicChildren=k0>0?Yl||jg:null,Uee(),k0>0&&Yl&&Yl.push(r),r}function lr(r,e,t,i,n,s){return s8(ie(r,e,t,i,n,s,!0))}function Wn(r,e,t,i,n){return s8(Me(r,e,t,i,n,!0))}function fS(r){return r?r.__v_isVNode===!0:!1}function pp(r,e){return r.type===e.type&&r.key===e.key}const ST="__vInternal",l8=({key:r})=>r!=null?r:null,Fw=({ref:r,ref_key:e,ref_for:t})=>r!=null?La(r)||$n(r)||Bi(r)?{i:zo,r,k:e,f:!!t}:r:null;function ie(r,e=null,t=null,i=0,n=null,s=r===Hn?0:1,u=!1,a=!1){const h={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&l8(e),ref:e&&Fw(e),scopeId:xT,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null};return a?(WP(h,t),s&128&&r.normalize(h)):t&&(h.shapeFlag|=La(t)?8:16),k0>0&&!u&&Yl&&(h.patchFlag>0||s&6)&&h.patchFlag!==32&&Yl.push(h),h}const Me=jee;function jee(r,e=null,t=null,i=0,n=null,s=!1){if((!r||r===XU)&&(r=gl),fS(r)){const a=Ld(r,e,!0);return t&&WP(a,t),k0>0&&!s&&Yl&&(a.shapeFlag&6?Yl[Yl.indexOf(r)]=a:Yl.push(a)),a.patchFlag|=-2,a}if(ete(r)&&(r=r.__vccOpts),e){e=Hee(e);let{class:a,style:h}=e;a&&!La(a)&&(e.class=$r(a)),ka(h)&&(LU(h)&&!Si(h)&&(h=wo({},h)),e.style=bo(h))}const u=La(r)?1:lee(r)?128:Gee(r)?64:ka(r)?4:Bi(r)?2:0;return ie(r,e,t,i,n,u,s,!0)}function Hee(r){return r?LU(r)||ST in r?wo({},r):r:null}function Ld(r,e,t=!1){const{props:i,ref:n,patchFlag:s,children:u}=r,a=e?u8(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:a,key:a&&l8(a),ref:e&&e.ref?t&&n?Si(n)?n.concat(Fw(e)):[n,Fw(e)]:Fw(e):n,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:u,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==Hn?s===-1?16:s|16:s,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&Ld(r.ssContent),ssFallback:r.ssFallback&&Ld(r.ssFallback),el:r.el,anchor:r.anchor}}function mt(r=" ",e=0){return Me(HP,null,r,e)}function au(r,e){const t=Me(Bw,null,r);return t.staticCount=e,t}function kd(r="",e=!1){return e?(Yt(),Wn(gl,null,r)):Me(gl,null,r)}function ju(r){return r==null||typeof r=="boolean"?Me(gl):Si(r)?Me(Hn,null,r.slice()):typeof r=="object"?hd(r):Me(HP,null,String(r))}function hd(r){return r.el===null||r.memo?r:Ld(r)}function WP(r,e){let t=0;const{shapeFlag:i}=r;if(e==null)e=null;else if(Si(e))t=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),WP(r,n()),n._c&&(n._d=!0));return}else{t=32;const n=e._;!n&&!(ST in e)?e._ctx=zo:n===3&&zo&&(zo.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else Bi(e)?(e={default:e,_ctx:zo},t=32):(e=String(e),i&64?(t=16,e=[mt(e)]):t=8);r.children=e,r.shapeFlag|=t}function u8(...r){const e={};for(let t=0;t<r.length;t++){const i=r[t];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=$r([e.class,i.class]));else if(n==="style")e.style=bo([e.style,i.style]);else if(dT(n)){const s=e[n],u=i[n];u&&s!==u&&!(Si(s)&&s.includes(u))&&(e[n]=s?[].concat(s,u):u)}else n!==""&&(e[n]=i[n])}return e}function Lu(r,e,t,i=null){ml(r,e,7,[t,i])}const Wee=a8();let qee=0;function Zee(r,e,t){const i=r.type,n=(e?e.appContext:r.appContext)||Wee,s={uid:qee++,vnode:r,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new yU(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:t8(i,n),emitsOptions:UU(i,n),emit:null,emitted:null,propsDefaults:Vn,inheritAttrs:i.inheritAttrs,ctx:Vn,data:Vn,props:Vn,attrs:Vn,slots:Vn,refs:Vn,setupState:Vn,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=tee.bind(null,s),r.ce&&r.ce(s),s}let $a=null;const qP=()=>$a||zo,Qg=r=>{$a=r,r.scope.on()},Dp=()=>{$a&&$a.scope.off(),$a=null};function c8(r){return r.vnode.shapeFlag&4}let R0=!1;function Xee(r,e=!1){R0=e;const{props:t,children:i}=r.vnode,n=c8(r);Lee(r,t,n,e),Oee(r,i);const s=n?Yee(r,e):void 0;return R0=!1,s}function Yee(r,e){const t=r.type;r.accessCache=Object.create(null),r.proxy=Jg(new Proxy(r.ctx,Aee));const{setup:i}=t;if(i){const n=r.setupContext=i.length>1?Jee(r):null;Qg(r),yv();const s=Ad(i,r,0,[r.props,n]);if(xv(),Dp(),gU(s)){if(s.then(Dp,Dp),e)return s.then(u=>{bF(r,u,e)}).catch(u=>{vT(u,r,0)});r.asyncDep=s}else bF(r,s,e)}else h8(r,e)}function bF(r,e,t){Bi(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:ka(e)&&(r.setupState=zU(e)),h8(r,t)}let wF;function h8(r,e,t){const i=r.type;if(!r.render){if(!e&&wF&&!i.render){const n=i.template;if(n){const{isCustomElement:s,compilerOptions:u}=r.appContext.config,{delimiters:a,compilerOptions:h}=i,p=wo(wo({isCustomElement:s,delimiters:a},u),h);i.render=wF(n,p)}}r.render=i.render||Ql}Qg(r),yv(),Cee(r),xv(),Dp()}function Kee(r){return new Proxy(r.attrs,{get(e,t){return zs(r,"get","$attrs"),e[t]}})}function Jee(r){const e=i=>{r.exposed=i||{}};let t;return{get attrs(){return t||(t=Kee(r))},slots:r.slots,emit:r.emit,expose:e}}function ZP(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(zU(Jg(r.exposed)),{get(e,t){if(t in e)return e[t];if(t in hS)return hS[t](r)}}))}function Qee(r){return Bi(r)&&r.displayName||r.name}function ete(r){return Bi(r)&&"__vccOpts"in r}const Ds=(r,e)=>XQ(r,e,R0);function jc(r,e,t){const i=arguments.length;return i===2?ka(e)&&!Si(e)?fS(e)?Me(r,null,[e]):Me(r,e):Me(r,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&fS(t)&&(t=[t]),Me(r,e,t))}const tte="3.2.36",rte="http://www.w3.org/2000/svg",mp=typeof document!="undefined"?document:null,SF=mp&&mp.createElement("template"),ite={insert:(r,e,t)=>{e.insertBefore(r,t||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,t,i)=>{const n=e?mp.createElementNS(rte,r):mp.createElement(r,t?{is:t}:void 0);return r==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:r=>mp.createTextNode(r),createComment:r=>mp.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>mp.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},cloneNode(r){const e=r.cloneNode(!0);return"_value"in r&&(e._value=r._value),e},insertStaticContent(r,e,t,i,n,s){const u=t?t.previousSibling:e.lastChild;if(n&&(n===s||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),t),!(n===s||!(n=n.nextSibling)););else{SF.innerHTML=i?`<svg>${r}</svg>`:r;const a=SF.content;if(i){const h=a.firstChild;for(;h.firstChild;)a.appendChild(h.firstChild);a.removeChild(h)}e.insertBefore(a,t)}return[u?u.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function nte(r,e,t){const i=r._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?r.removeAttribute("class"):t?r.setAttribute("class",e):r.className=e}function ate(r,e,t){const i=r.style,n=La(t);if(t&&!n){for(const s in t)DE(i,s,t[s]);if(e&&!La(e))for(const s in e)t[s]==null&&DE(i,s,"")}else{const s=i.display;n?e!==t&&(i.cssText=t):e&&r.removeAttribute("style"),"_vod"in r&&(i.display=s)}}const TF=/\s*!important$/;function DE(r,e,t){if(Si(t))t.forEach(i=>DE(r,e,i));else if(t==null&&(t=""),e.startsWith("--"))r.setProperty(e,t);else{const i=ote(r,e);TF.test(t)?r.setProperty(_v(i),t.replace(TF,""),"important"):r[i]=t}}const MF=["Webkit","Moz","ms"],RA={};function ote(r,e){const t=RA[e];if(t)return t;let i=ec(e);if(i!=="filter"&&i in r)return RA[e]=i;i=mT(i);for(let n=0;n<MF.length;n++){const s=MF[n]+i;if(s in r)return RA[e]=s}return e}const AF="http://www.w3.org/1999/xlink";function ste(r,e,t,i,n){if(i&&e.startsWith("xlink:"))t==null?r.removeAttributeNS(AF,e.slice(6,e.length)):r.setAttributeNS(AF,e,t);else{const s=iQ(e);t==null||s&&!fU(t)?r.removeAttribute(e):r.setAttribute(e,s?"":t)}}function lte(r,e,t,i,n,s,u){if(e==="innerHTML"||e==="textContent"){i&&u(i,n,s),r[e]=t==null?"":t;return}if(e==="value"&&r.tagName!=="PROGRESS"&&!r.tagName.includes("-")){r._value=t;const h=t==null?"":t;(r.value!==h||r.tagName==="OPTION")&&(r.value=h),t==null&&r.removeAttribute(e);return}let a=!1;if(t===""||t==null){const h=typeof r[e];h==="boolean"?t=fU(t):t==null&&h==="string"?(t="",a=!0):h==="number"&&(t=0,a=!0)}try{r[e]=t}catch{}a&&r.removeAttribute(e)}const[d8,ute]=(()=>{let r=Date.now,e=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(r=performance.now.bind(performance));const t=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(t&&Number(t[1])<=53)}return[r,e]})();let PE=0;const cte=Promise.resolve(),hte=()=>{PE=0},dte=()=>PE||(cte.then(hte),PE=d8());function fte(r,e,t,i){r.addEventListener(e,t,i)}function pte(r,e,t,i){r.removeEventListener(e,t,i)}function mte(r,e,t,i,n=null){const s=r._vei||(r._vei={}),u=s[e];if(i&&u)u.value=i;else{const[a,h]=gte(e);if(i){const p=s[e]=vte(i,n);fte(r,a,p,h)}else u&&(pte(r,a,u,h),s[e]=void 0)}}const CF=/(?:Once|Passive|Capture)$/;function gte(r){let e;if(CF.test(r)){e={};let t;for(;t=r.match(CF);)r=r.slice(0,r.length-t[0].length),e[t[0].toLowerCase()]=!0}return[_v(r.slice(2)),e]}function vte(r,e){const t=i=>{const n=i.timeStamp||d8();(ute||n>=t.attached-1)&&ml(_te(i,t.value),e,5,[i])};return t.value=r,t.attached=dte(),t}function _te(r,e){if(Si(e)){const t=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{t.call(r),r._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const IF=/^on[a-z]/,yte=(r,e,t,i,n=!1,s,u,a,h)=>{e==="class"?nte(r,i,n):e==="style"?ate(r,t,i):dT(e)?IP(e)||mte(r,e,t,i,u):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):xte(r,e,i,n))?lte(r,e,i,s,u,a,h):(e==="true-value"?r._trueValue=i:e==="false-value"&&(r._falseValue=i),ste(r,e,i,n))};function xte(r,e,t,i){return i?!!(e==="innerHTML"||e==="textContent"||e in r&&IF.test(e)&&Bi(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA"||IF.test(e)&&La(t)?!1:e in r}const bte={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};fee.props;const wte=wo({patchProp:yte},ite);let EF;function Ste(){return EF||(EF=Nee(wte))}const f8=(...r)=>{const e=Ste().createApp(...r),{mount:t}=e;return e.mount=i=>{const n=Tte(i);if(!n)return;const s=e._component;!Bi(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.innerHTML="";const u=t(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),u},e};function Tte(r){return La(r)?document.querySelector(r):r}var Mte=!1;/*!
  * pinia v2.0.14
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let p8;const TT=r=>p8=r,m8=Symbol();function LE(r){return r&&typeof r=="object"&&Object.prototype.toString.call(r)==="[object Object]"&&typeof r.toJSON!="function"}var s0;(function(r){r.direct="direct",r.patchObject="patch object",r.patchFunction="patch function"})(s0||(s0={}));function Ate(){const r=xU(!0),e=r.run(()=>tc({}));let t=[],i=[];const n=Jg({install(s){TT(n),n._a=s,s.provide(m8,n),s.config.globalProperties.$pinia=n,i.forEach(u=>t.push(u)),i=[]},use(s){return!this._a&&!Mte?i.push(s):t.push(s),this},_p:t,_a:null,_e:r,_s:new Map,state:e});return n}const g8=()=>{};function DF(r,e,t,i=g8){r.push(e);const n=()=>{const s=r.indexOf(e);s>-1&&(r.splice(s,1),i())};return!t&&qP()&&bv(n),n}function og(r,...e){r.slice().forEach(t=>{t(...e)})}function kE(r,e){for(const t in e){if(!e.hasOwnProperty(t))continue;const i=e[t],n=r[t];LE(n)&&LE(i)&&r.hasOwnProperty(t)&&!$n(i)&&!Md(i)?r[t]=kE(n,i):r[t]=i}return r}const Cte=Symbol();function Ite(r){return!LE(r)||!r.hasOwnProperty(Cte)}const{assign:Hc}=Object;function Ete(r){return!!($n(r)&&r.effect)}function Dte(r,e,t,i){const{state:n,actions:s,getters:u}=e,a=t.state.value[r];let h;function p(){a||(t.state.value[r]=n?n():{});const m=HQ(t.state.value[r]);return Hc(m,s,Object.keys(u||{}).reduce((v,x)=>(v[x]=Jg(Ds(()=>{TT(t);const w=t._s.get(r);return u[x].call(w,w)})),v),{}))}return h=v8(r,p,e,t,i,!0),h.$reset=function(){const v=n?n():{};this.$patch(x=>{Hc(x,v)})},h}function v8(r,e,t={},i,n,s){let u;const a=Hc({actions:{}},t),h={deep:!0};let p,m,v=Jg([]),x=Jg([]),w;const T=i.state.value[r];!s&&!T&&(i.state.value[r]={}),tc({});let C;function I(Y){let Z;p=m=!1,typeof Y=="function"?(Y(i.state.value[r]),Z={type:s0.patchFunction,storeId:r,events:w}):(kE(i.state.value[r],Y),Z={type:s0.patchObject,payload:Y,storeId:r,events:w});const H=C=Symbol();VP().then(()=>{C===H&&(p=!0)}),m=!0,og(v,Z,i.state.value[r])}const k=g8;function R(){u.stop(),v=[],x=[],i._s.delete(r)}function z(Y,Z){return function(){TT(i);const H=Array.from(arguments),re=[],ne=[];function se(Ie){re.push(Ie)}function me(Ie){ne.push(Ie)}og(x,{args:H,name:Y,store:j,after:se,onError:me});let Se;try{Se=Z.apply(this&&this.$id===r?this:j,H)}catch(Ie){throw og(ne,Ie),Ie}return Se instanceof Promise?Se.then(Ie=>(og(re,Ie),Ie)).catch(Ie=>(og(ne,Ie),Promise.reject(Ie))):(og(re,Se),Se)}}const $={_p:i,$id:r,$onAction:DF.bind(null,x),$patch:I,$reset:k,$subscribe(Y,Z={}){const H=DF(v,Y,Z.detached,()=>re()),re=u.run(()=>Ep(()=>i.state.value[r],ne=>{(Z.flush==="sync"?m:p)&&Y({storeId:r,type:s0.direct,events:w},ne)},Hc({},h,Z)));return H},$dispose:R},j=Kp(Hc({},$));i._s.set(r,j);const G=i._e.run(()=>(u=xU(),u.run(()=>e())));for(const Y in G){const Z=G[Y];if($n(Z)&&!Ete(Z)||Md(Z))s||(T&&Ite(Z)&&($n(Z)?Z.value=T[Y]:kE(Z,T[Y])),i.state.value[r][Y]=Z);else if(typeof Z=="function"){const H=z(Y,Z);G[Y]=H,a.actions[Y]=Z}}return Hc(j,G),Hc(cn(j),G),Object.defineProperty(j,"$state",{get:()=>i.state.value[r],set:Y=>{I(Z=>{Hc(Z,Y)})}}),i._p.forEach(Y=>{Hc(j,u.run(()=>Y({store:j,app:i._a,pinia:i,options:a})))}),T&&s&&t.hydrate&&t.hydrate(j.$state,T),p=!0,m=!0,j}function Pte(r,e,t){let i,n;const s=typeof e=="function";typeof r=="string"?(i=r,n=s?t:e):(n=r,i=r.id);function u(a,h){const p=qP();return a=a||p&&Kc(m8),a&&TT(a),a=p8,a._s.has(i)||(s?v8(i,e,n,a):Dte(i,n,a)),a._s.get(i)}return u.$id=i,u}/*!
  * vue-router v4.0.15
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const _8=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",wv=r=>_8?Symbol(r):"_vr_"+r,Lte=wv("rvlm"),PF=wv("rvd"),XP=wv("r"),y8=wv("rl"),RE=wv("rvl"),Pg=typeof window!="undefined";function kte(r){return r.__esModule||_8&&r[Symbol.toStringTag]==="Module"}const zn=Object.assign;function OA(r,e){const t={};for(const i in e){const n=e[i];t[i]=Array.isArray(n)?n.map(r):r(n)}return t}const l0=()=>{},Rte=/\/$/,Ote=r=>r.replace(Rte,"");function zA(r,e,t="/"){let i,n={},s="",u="";const a=e.indexOf("?"),h=e.indexOf("#",a>-1?a:0);return a>-1&&(i=e.slice(0,a),s=e.slice(a+1,h>-1?h:e.length),n=r(s)),h>-1&&(i=i||e.slice(0,h),u=e.slice(h,e.length)),i=Nte(i!=null?i:e,t),{fullPath:i+(s&&"?")+s+u,path:i,query:n,hash:u}}function zte(r,e){const t=e.query?r(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function LF(r,e){return!e||!r.toLowerCase().startsWith(e.toLowerCase())?r:r.slice(e.length)||"/"}function Bte(r,e,t){const i=e.matched.length-1,n=t.matched.length-1;return i>-1&&i===n&&ev(e.matched[i],t.matched[n])&&x8(e.params,t.params)&&r(e.query)===r(t.query)&&e.hash===t.hash}function ev(r,e){return(r.aliasOf||r)===(e.aliasOf||e)}function x8(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(!Fte(r[t],e[t]))return!1;return!0}function Fte(r,e){return Array.isArray(r)?kF(r,e):Array.isArray(e)?kF(e,r):r===e}function kF(r,e){return Array.isArray(e)?r.length===e.length&&r.every((t,i)=>t===e[i]):r.length===1&&r[0]===e}function Nte(r,e){if(r.startsWith("/"))return r;if(!r)return e;const t=e.split("/"),i=r.split("/");let n=t.length-1,s,u;for(s=0;s<i.length;s++)if(u=i[s],!(n===1||u==="."))if(u==="..")n--;else break;return t.slice(0,n).join("/")+"/"+i.slice(s-(s===i.length?1:0)).join("/")}var O0;(function(r){r.pop="pop",r.push="push"})(O0||(O0={}));var u0;(function(r){r.back="back",r.forward="forward",r.unknown=""})(u0||(u0={}));function Vte(r){if(!r)if(Pg){const e=document.querySelector("base");r=e&&e.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),Ote(r)}const $te=/^[^#]+#/;function Gte(r,e){return r.replace($te,"#")+e}function Ute(r,e){const t=document.documentElement.getBoundingClientRect(),i=r.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const MT=()=>({left:window.pageXOffset,top:window.pageYOffset});function jte(r){let e;if("el"in r){const t=r.el,i=typeof t=="string"&&t.startsWith("#"),n=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!n)return;e=Ute(n,r)}else e=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function RF(r,e){return(history.state?history.state.position-e:-1)+r}const OE=new Map;function Hte(r,e){OE.set(r,e)}function Wte(r){const e=OE.get(r);return OE.delete(r),e}let qte=()=>location.protocol+"//"+location.host;function b8(r,e){const{pathname:t,search:i,hash:n}=e,s=r.indexOf("#");if(s>-1){let a=n.includes(r.slice(s))?r.slice(s).length:1,h=n.slice(a);return h[0]!=="/"&&(h="/"+h),LF(h,"")}return LF(t,r)+i+n}function Zte(r,e,t,i){let n=[],s=[],u=null;const a=({state:x})=>{const w=b8(r,location),T=t.value,C=e.value;let I=0;if(x){if(t.value=w,e.value=x,u&&u===T){u=null;return}I=C?x.position-C.position:0}else i(w);n.forEach(k=>{k(t.value,T,{delta:I,type:O0.pop,direction:I?I>0?u0.forward:u0.back:u0.unknown})})};function h(){u=t.value}function p(x){n.push(x);const w=()=>{const T=n.indexOf(x);T>-1&&n.splice(T,1)};return s.push(w),w}function m(){const{history:x}=window;!x.state||x.replaceState(zn({},x.state,{scroll:MT()}),"")}function v(){for(const x of s)x();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",m)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",m),{pauseListeners:h,listen:p,destroy:v}}function OF(r,e,t,i=!1,n=!1){return{back:r,current:e,forward:t,replaced:i,position:window.history.length,scroll:n?MT():null}}function Xte(r){const{history:e,location:t}=window,i={value:b8(r,t)},n={value:e.state};n.value||s(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(h,p,m){const v=r.indexOf("#"),x=v>-1?(t.host&&document.querySelector("base")?r:r.slice(v))+h:qte()+r+h;try{e[m?"replaceState":"pushState"](p,"",x),n.value=p}catch(w){console.error(w),t[m?"replace":"assign"](x)}}function u(h,p){const m=zn({},e.state,OF(n.value.back,h,n.value.forward,!0),p,{position:n.value.position});s(h,m,!0),i.value=h}function a(h,p){const m=zn({},n.value,e.state,{forward:h,scroll:MT()});s(m.current,m,!0);const v=zn({},OF(i.value,h,null),{position:m.position+1},p);s(h,v,!1),i.value=h}return{location:i,state:n,push:a,replace:u}}function Yte(r){r=Vte(r);const e=Xte(r),t=Zte(r,e.state,e.location,e.replace);function i(s,u=!0){u||t.pauseListeners(),history.go(s)}const n=zn({location:"",base:r,go:i,createHref:Gte.bind(null,r)},e,t);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function Kte(r){return typeof r=="string"||r&&typeof r=="object"}function w8(r){return typeof r=="string"||typeof r=="symbol"}const Yh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},S8=wv("nf");var zF;(function(r){r[r.aborted=4]="aborted",r[r.cancelled=8]="cancelled",r[r.duplicated=16]="duplicated"})(zF||(zF={}));function tv(r,e){return zn(new Error,{type:r,[S8]:!0},e)}function Kh(r,e){return r instanceof Error&&S8 in r&&(e==null||!!(r.type&e))}const BF="[^/]+?",Jte={sensitive:!1,strict:!1,start:!0,end:!0},Qte=/[.+*?^${}()[\]/\\]/g;function ere(r,e){const t=zn({},Jte,e),i=[];let n=t.start?"^":"";const s=[];for(const p of r){const m=p.length?[]:[90];t.strict&&!p.length&&(n+="/");for(let v=0;v<p.length;v++){const x=p[v];let w=40+(t.sensitive?.25:0);if(x.type===0)v||(n+="/"),n+=x.value.replace(Qte,"\\$&"),w+=40;else if(x.type===1){const{value:T,repeatable:C,optional:I,regexp:k}=x;s.push({name:T,repeatable:C,optional:I});const R=k||BF;if(R!==BF){w+=10;try{new RegExp(`(${R})`)}catch($){throw new Error(`Invalid custom RegExp for param "${T}" (${R}): `+$.message)}}let z=C?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;v||(z=I&&p.length<2?`(?:/${z})`:"/"+z),I&&(z+="?"),n+=z,w+=20,I&&(w+=-8),C&&(w+=-20),R===".*"&&(w+=-50)}m.push(w)}i.push(m)}if(t.strict&&t.end){const p=i.length-1;i[p][i[p].length-1]+=.7000000000000001}t.strict||(n+="/?"),t.end?n+="$":t.strict&&(n+="(?:/|$)");const u=new RegExp(n,t.sensitive?"":"i");function a(p){const m=p.match(u),v={};if(!m)return null;for(let x=1;x<m.length;x++){const w=m[x]||"",T=s[x-1];v[T.name]=w&&T.repeatable?w.split("/"):w}return v}function h(p){let m="",v=!1;for(const x of r){(!v||!m.endsWith("/"))&&(m+="/"),v=!1;for(const w of x)if(w.type===0)m+=w.value;else if(w.type===1){const{value:T,repeatable:C,optional:I}=w,k=T in p?p[T]:"";if(Array.isArray(k)&&!C)throw new Error(`Provided param "${T}" is an array but it is not repeatable (* or + modifiers)`);const R=Array.isArray(k)?k.join("/"):k;if(!R)if(I)x.length<2&&r.length>1&&(m.endsWith("/")?m=m.slice(0,-1):v=!0);else throw new Error(`Missing required param "${T}"`);m+=R}}return m}return{re:u,score:i,keys:s,parse:a,stringify:h}}function tre(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=e[t]-r[t];if(i)return i;t++}return r.length<e.length?r.length===1&&r[0]===40+40?-1:1:r.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function rre(r,e){let t=0;const i=r.score,n=e.score;for(;t<i.length&&t<n.length;){const s=tre(i[t],n[t]);if(s)return s;t++}return n.length-i.length}const ire={type:0,value:""},nre=/[a-zA-Z0-9_]/;function are(r){if(!r)return[[]];if(r==="/")return[[ire]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function e(w){throw new Error(`ERR (${t})/"${p}": ${w}`)}let t=0,i=t;const n=[];let s;function u(){s&&n.push(s),s=[]}let a=0,h,p="",m="";function v(){!p||(t===0?s.push({type:0,value:p}):t===1||t===2||t===3?(s.length>1&&(h==="*"||h==="+")&&e(`A repeatable param (${p}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:p,regexp:m,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):e("Invalid state to consume buffer"),p="")}function x(){p+=h}for(;a<r.length;){if(h=r[a++],h==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:h==="/"?(p&&v(),u()):h===":"?(v(),t=1):x();break;case 4:x(),t=i;break;case 1:h==="("?t=2:nre.test(h)?x():(v(),t=0,h!=="*"&&h!=="?"&&h!=="+"&&a--);break;case 2:h===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+h:t=3:m+=h;break;case 3:v(),t=0,h!=="*"&&h!=="?"&&h!=="+"&&a--,m="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${p}"`),v(),u(),n}function ore(r,e,t){const i=ere(are(r.path),t),n=zn(i,{record:r,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function sre(r,e){const t=[],i=new Map;e=NF({strict:!1,end:!0,sensitive:!1},e);function n(m){return i.get(m)}function s(m,v,x){const w=!x,T=ure(m);T.aliasOf=x&&x.record;const C=NF(e,m),I=[T];if("alias"in m){const z=typeof m.alias=="string"?[m.alias]:m.alias;for(const $ of z)I.push(zn({},T,{components:x?x.record.components:T.components,path:$,aliasOf:x?x.record:T}))}let k,R;for(const z of I){const{path:$}=z;if(v&&$[0]!=="/"){const j=v.record.path,G=j[j.length-1]==="/"?"":"/";z.path=v.record.path+($&&G+$)}if(k=ore(z,v,C),x?x.alias.push(k):(R=R||k,R!==k&&R.alias.push(k),w&&m.name&&!FF(k)&&u(m.name)),"children"in T){const j=T.children;for(let G=0;G<j.length;G++)s(j[G],k,x&&x.children[G])}x=x||k,h(k)}return R?()=>{u(R)}:l0}function u(m){if(w8(m)){const v=i.get(m);v&&(i.delete(m),t.splice(t.indexOf(v),1),v.children.forEach(u),v.alias.forEach(u))}else{const v=t.indexOf(m);v>-1&&(t.splice(v,1),m.record.name&&i.delete(m.record.name),m.children.forEach(u),m.alias.forEach(u))}}function a(){return t}function h(m){let v=0;for(;v<t.length&&rre(m,t[v])>=0&&(m.record.path!==t[v].record.path||!T8(m,t[v]));)v++;t.splice(v,0,m),m.record.name&&!FF(m)&&i.set(m.record.name,m)}function p(m,v){let x,w={},T,C;if("name"in m&&m.name){if(x=i.get(m.name),!x)throw tv(1,{location:m});C=x.record.name,w=zn(lre(v.params,x.keys.filter(R=>!R.optional).map(R=>R.name)),m.params),T=x.stringify(w)}else if("path"in m)T=m.path,x=t.find(R=>R.re.test(T)),x&&(w=x.parse(T),C=x.record.name);else{if(x=v.name?i.get(v.name):t.find(R=>R.re.test(v.path)),!x)throw tv(1,{location:m,currentLocation:v});C=x.record.name,w=zn({},v.params,m.params),T=x.stringify(w)}const I=[];let k=x;for(;k;)I.unshift(k.record),k=k.parent;return{name:C,path:T,params:w,matched:I,meta:hre(I)}}return r.forEach(m=>s(m)),{addRoute:s,resolve:p,removeRoute:u,getRoutes:a,getRecordMatcher:n}}function lre(r,e){const t={};for(const i of e)i in r&&(t[i]=r[i]);return t}function ure(r){return{path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:void 0,beforeEnter:r.beforeEnter,props:cre(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||{}:{default:r.component}}}function cre(r){const e={},t=r.props||!1;if("component"in r)e.default=t;else for(const i in r.components)e[i]=typeof t=="boolean"?t:t[i];return e}function FF(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function hre(r){return r.reduce((e,t)=>zn(e,t.meta),{})}function NF(r,e){const t={};for(const i in r)t[i]=i in e?e[i]:r[i];return t}function T8(r,e){return e.children.some(t=>t===r||T8(r,t))}const M8=/#/g,dre=/&/g,fre=/\//g,pre=/=/g,mre=/\?/g,A8=/\+/g,gre=/%5B/g,vre=/%5D/g,C8=/%5E/g,_re=/%60/g,I8=/%7B/g,yre=/%7C/g,E8=/%7D/g,xre=/%20/g;function YP(r){return encodeURI(""+r).replace(yre,"|").replace(gre,"[").replace(vre,"]")}function bre(r){return YP(r).replace(I8,"{").replace(E8,"}").replace(C8,"^")}function zE(r){return YP(r).replace(A8,"%2B").replace(xre,"+").replace(M8,"%23").replace(dre,"%26").replace(_re,"`").replace(I8,"{").replace(E8,"}").replace(C8,"^")}function wre(r){return zE(r).replace(pre,"%3D")}function Sre(r){return YP(r).replace(M8,"%23").replace(mre,"%3F")}function Tre(r){return r==null?"":Sre(r).replace(fre,"%2F")}function pS(r){try{return decodeURIComponent(""+r)}catch{}return""+r}function Mre(r){const e={};if(r===""||r==="?")return e;const i=(r[0]==="?"?r.slice(1):r).split("&");for(let n=0;n<i.length;++n){const s=i[n].replace(A8," "),u=s.indexOf("="),a=pS(u<0?s:s.slice(0,u)),h=u<0?null:pS(s.slice(u+1));if(a in e){let p=e[a];Array.isArray(p)||(p=e[a]=[p]),p.push(h)}else e[a]=h}return e}function VF(r){let e="";for(let t in r){const i=r[t];if(t=wre(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(Array.isArray(i)?i.map(s=>s&&zE(s)):[i&&zE(i)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function Are(r){const e={};for(const t in r){const i=r[t];i!==void 0&&(e[t]=Array.isArray(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return e}function uy(){let r=[];function e(i){return r.push(i),()=>{const n=r.indexOf(i);n>-1&&r.splice(n,1)}}function t(){r=[]}return{add:e,list:()=>r,reset:t}}function dd(r,e,t,i,n){const s=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((u,a)=>{const h=v=>{v===!1?a(tv(4,{from:t,to:e})):v instanceof Error?a(v):Kte(v)?a(tv(2,{from:e,to:v})):(s&&i.enterCallbacks[n]===s&&typeof v=="function"&&s.push(v),u())},p=r.call(i&&i.instances[n],e,t,h);let m=Promise.resolve(p);r.length<3&&(m=m.then(h)),m.catch(v=>a(v))})}function BA(r,e,t,i){const n=[];for(const s of r)for(const u in s.components){let a=s.components[u];if(!(e!=="beforeRouteEnter"&&!s.instances[u]))if(Cre(a)){const p=(a.__vccOpts||a)[e];p&&n.push(dd(p,t,i,s,u))}else{let h=a();n.push(()=>h.then(p=>{if(!p)return Promise.reject(new Error(`Couldn't resolve component "${u}" at "${s.path}"`));const m=kte(p)?p.default:p;s.components[u]=m;const x=(m.__vccOpts||m)[e];return x&&dd(x,t,i,s,u)()}))}}return n}function Cre(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function $F(r){const e=Kc(XP),t=Kc(y8),i=Ds(()=>e.resolve(zt(r.to))),n=Ds(()=>{const{matched:h}=i.value,{length:p}=h,m=h[p-1],v=t.matched;if(!m||!v.length)return-1;const x=v.findIndex(ev.bind(null,m));if(x>-1)return x;const w=GF(h[p-2]);return p>1&&GF(m)===w&&v[v.length-1].path!==w?v.findIndex(ev.bind(null,h[p-2])):x}),s=Ds(()=>n.value>-1&&Dre(t.params,i.value.params)),u=Ds(()=>n.value>-1&&n.value===t.matched.length-1&&x8(t.params,i.value.params));function a(h={}){return Ere(h)?e[zt(r.replace)?"replace":"push"](zt(r.to)).catch(l0):Promise.resolve()}return{route:i,href:Ds(()=>i.value.href),isActive:s,isExactActive:u,navigate:a}}const Ire=$P({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:$F,setup(r,{slots:e}){const t=Kp($F(r)),{options:i}=Kc(XP),n=Ds(()=>({[UF(r.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[UF(r.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&e.default(t);return r.custom?s:jc("a",{"aria-current":t.isExactActive?r.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:n.value},s)}}}),ci=Ire;function Ere(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const e=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return r.preventDefault&&r.preventDefault(),!0}}function Dre(r,e){for(const t in e){const i=e[t],n=r[t];if(typeof i=="string"){if(i!==n)return!1}else if(!Array.isArray(n)||n.length!==i.length||i.some((s,u)=>s!==n[u]))return!1}return!0}function GF(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const UF=(r,e,t)=>r!=null?r:e!=null?e:t,Pre=$P({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(r,{attrs:e,slots:t}){const i=Kc(RE),n=Ds(()=>r.route||i.value),s=Kc(PF,0),u=Ds(()=>n.value.matched[s]);zw(PF,s+1),zw(Lte,u),zw(RE,n);const a=tc();return Ep(()=>[a.value,u.value,r.name],([h,p,m],[v,x,w])=>{p&&(p.instances[m]=h,x&&x!==p&&h&&h===v&&(p.leaveGuards.size||(p.leaveGuards=x.leaveGuards),p.updateGuards.size||(p.updateGuards=x.updateGuards))),h&&p&&(!x||!ev(p,x)||!v)&&(p.enterCallbacks[m]||[]).forEach(T=>T(h))},{flush:"post"}),()=>{const h=n.value,p=u.value,m=p&&p.components[r.name],v=r.name;if(!m)return jF(t.default,{Component:m,route:h});const x=p.props[r.name],w=x?x===!0?h.params:typeof x=="function"?x(h):x:null,C=jc(m,zn({},w,e,{onVnodeUnmounted:I=>{I.component.isUnmounted&&(p.instances[v]=null)},ref:a}));return jF(t.default,{Component:C,route:h})||C}}});function jF(r,e){if(!r)return null;const t=r(e);return t.length===1?t[0]:t}const D8=Pre;function Lre(r){const e=sre(r.routes,r),t=r.parseQuery||Mre,i=r.stringifyQuery||VF,n=r.history,s=uy(),u=uy(),a=uy(),h=GQ(Yh);let p=Yh;Pg&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=OA.bind(null,He=>""+He),v=OA.bind(null,Tre),x=OA.bind(null,pS);function w(He,dt){let nt,vt;return w8(He)?(nt=e.getRecordMatcher(He),vt=dt):vt=He,e.addRoute(vt,nt)}function T(He){const dt=e.getRecordMatcher(He);dt&&e.removeRoute(dt)}function C(){return e.getRoutes().map(He=>He.record)}function I(He){return!!e.getRecordMatcher(He)}function k(He,dt){if(dt=zn({},dt||h.value),typeof He=="string"){const Wt=zA(t,He,dt.path),Re=e.resolve({path:Wt.path},dt),Ve=n.createHref(Wt.fullPath);return zn(Wt,Re,{params:x(Re.params),hash:pS(Wt.hash),redirectedFrom:void 0,href:Ve})}let nt;if("path"in He)nt=zn({},He,{path:zA(t,He.path,dt.path).path});else{const Wt=zn({},He.params);for(const Re in Wt)Wt[Re]==null&&delete Wt[Re];nt=zn({},He,{params:v(He.params)}),dt.params=v(dt.params)}const vt=e.resolve(nt,dt),Pt=He.hash||"";vt.params=m(x(vt.params));const jt=zte(i,zn({},He,{hash:bre(Pt),path:vt.path})),Et=n.createHref(jt);return zn({fullPath:jt,hash:Pt,query:i===VF?Are(He.query):He.query||{}},vt,{redirectedFrom:void 0,href:Et})}function R(He){return typeof He=="string"?zA(t,He,h.value.path):zn({},He)}function z(He,dt){if(p!==He)return tv(8,{from:dt,to:He})}function $(He){return Y(He)}function j(He){return $(zn(R(He),{replace:!0}))}function G(He){const dt=He.matched[He.matched.length-1];if(dt&&dt.redirect){const{redirect:nt}=dt;let vt=typeof nt=="function"?nt(He):nt;return typeof vt=="string"&&(vt=vt.includes("?")||vt.includes("#")?vt=R(vt):{path:vt},vt.params={}),zn({query:He.query,hash:He.hash,params:He.params},vt)}}function Y(He,dt){const nt=p=k(He),vt=h.value,Pt=He.state,jt=He.force,Et=He.replace===!0,Wt=G(nt);if(Wt)return Y(zn(R(Wt),{state:Pt,force:jt,replace:Et}),dt||nt);const Re=nt;Re.redirectedFrom=dt;let Ve;return!jt&&Bte(i,vt,nt)&&(Ve=tv(16,{to:Re,from:vt}),gt(vt,vt,!0,!1)),(Ve?Promise.resolve(Ve):H(Re,vt)).catch(Ue=>Kh(Ue)?Kh(Ue,2)?Ue:We(Ue):Fe(Ue,Re,vt)).then(Ue=>{if(Ue){if(Kh(Ue,2))return Y(zn(R(Ue.to),{state:Pt,force:jt,replace:Et}),dt||Re)}else Ue=ne(Re,vt,!0,Et,Pt);return re(Re,vt,Ue),Ue})}function Z(He,dt){const nt=z(He,dt);return nt?Promise.reject(nt):Promise.resolve()}function H(He,dt){let nt;const[vt,Pt,jt]=kre(He,dt);nt=BA(vt.reverse(),"beforeRouteLeave",He,dt);for(const Wt of vt)Wt.leaveGuards.forEach(Re=>{nt.push(dd(Re,He,dt))});const Et=Z.bind(null,He,dt);return nt.push(Et),sg(nt).then(()=>{nt=[];for(const Wt of s.list())nt.push(dd(Wt,He,dt));return nt.push(Et),sg(nt)}).then(()=>{nt=BA(Pt,"beforeRouteUpdate",He,dt);for(const Wt of Pt)Wt.updateGuards.forEach(Re=>{nt.push(dd(Re,He,dt))});return nt.push(Et),sg(nt)}).then(()=>{nt=[];for(const Wt of He.matched)if(Wt.beforeEnter&&!dt.matched.includes(Wt))if(Array.isArray(Wt.beforeEnter))for(const Re of Wt.beforeEnter)nt.push(dd(Re,He,dt));else nt.push(dd(Wt.beforeEnter,He,dt));return nt.push(Et),sg(nt)}).then(()=>(He.matched.forEach(Wt=>Wt.enterCallbacks={}),nt=BA(jt,"beforeRouteEnter",He,dt),nt.push(Et),sg(nt))).then(()=>{nt=[];for(const Wt of u.list())nt.push(dd(Wt,He,dt));return nt.push(Et),sg(nt)}).catch(Wt=>Kh(Wt,8)?Wt:Promise.reject(Wt))}function re(He,dt,nt){for(const vt of a.list())vt(He,dt,nt)}function ne(He,dt,nt,vt,Pt){const jt=z(He,dt);if(jt)return jt;const Et=dt===Yh,Wt=Pg?history.state:{};nt&&(vt||Et?n.replace(He.fullPath,zn({scroll:Et&&Wt&&Wt.scroll},Pt)):n.push(He.fullPath,Pt)),h.value=He,gt(He,dt,nt,Et),We()}let se;function me(){se||(se=n.listen((He,dt,nt)=>{const vt=k(He),Pt=G(vt);if(Pt){Y(zn(Pt,{replace:!0}),vt).catch(l0);return}p=vt;const jt=h.value;Pg&&Hte(RF(jt.fullPath,nt.delta),MT()),H(vt,jt).catch(Et=>Kh(Et,12)?Et:Kh(Et,2)?(Y(Et.to,vt).then(Wt=>{Kh(Wt,20)&&!nt.delta&&nt.type===O0.pop&&n.go(-1,!1)}).catch(l0),Promise.reject()):(nt.delta&&n.go(-nt.delta,!1),Fe(Et,vt,jt))).then(Et=>{Et=Et||ne(vt,jt,!1),Et&&(nt.delta?n.go(-nt.delta,!1):nt.type===O0.pop&&Kh(Et,20)&&n.go(-1,!1)),re(vt,jt,Et)}).catch(l0)}))}let Se=uy(),Ie=uy(),ke;function Fe(He,dt,nt){We(He);const vt=Ie.list();return vt.length?vt.forEach(Pt=>Pt(He,dt,nt)):console.error(He),Promise.reject(He)}function Ce(){return ke&&h.value!==Yh?Promise.resolve():new Promise((He,dt)=>{Se.add([He,dt])})}function We(He){return ke||(ke=!He,me(),Se.list().forEach(([dt,nt])=>He?nt(He):dt()),Se.reset()),He}function gt(He,dt,nt,vt){const{scrollBehavior:Pt}=r;if(!Pg||!Pt)return Promise.resolve();const jt=!nt&&Wte(RF(He.fullPath,0))||(vt||!nt)&&history.state&&history.state.scroll||null;return VP().then(()=>Pt(He,dt,jt)).then(Et=>Et&&jte(Et)).catch(Et=>Fe(Et,He,dt))}const St=He=>n.go(He);let et;const ht=new Set;return{currentRoute:h,addRoute:w,removeRoute:T,hasRoute:I,getRoutes:C,resolve:k,options:r,push:$,replace:j,go:St,back:()=>St(-1),forward:()=>St(1),beforeEach:s.add,beforeResolve:u.add,afterEach:a.add,onError:Ie.add,isReady:Ce,install(He){const dt=this;He.component("RouterLink",ci),He.component("RouterView",D8),He.config.globalProperties.$router=dt,Object.defineProperty(He.config.globalProperties,"$route",{enumerable:!0,get:()=>zt(h)}),Pg&&!et&&h.value===Yh&&(et=!0,$(n.location).catch(Pt=>{}));const nt={};for(const Pt in Yh)nt[Pt]=Ds(()=>h.value[Pt]);He.provide(XP,dt),He.provide(y8,Kp(nt)),He.provide(RE,h);const vt=He.unmount;ht.add(He),He.unmount=function(){ht.delete(He),ht.size<1&&(p=Yh,se&&se(),se=null,h.value=Yh,et=!1,ke=!1),vt()}}}}function sg(r){return r.reduce((e,t)=>e.then(()=>t()),Promise.resolve())}function kre(r,e){const t=[],i=[],n=[],s=Math.max(e.matched.length,r.matched.length);for(let u=0;u<s;u++){const a=e.matched[u];a&&(r.matched.find(p=>ev(p,a))?i.push(a):t.push(a));const h=r.matched[u];h&&(e.matched.find(p=>ev(p,h))||n.push(h))}return[t,i,n]}const Rre={name:"App",setup(r){return(e,t)=>(Yt(),Wn(zt(D8)))}};function P8(){let r=tc(window.innerWidth);const e=()=>r.value=window.innerWidth;en(()=>window.addEventListener("resize",e)),bv(()=>window.removeEventListener("resize",e));const t=Ds(()=>r.value<992?"mobile":r.value>=992?"desktop":null);return{width:Ds(()=>r.value),type:t}}var mS="/assets/down-arrow-dark.1490a532.svg",cy="/assets/down-arrow.019a2471.svg",L8="/assets/down-arrow-white.e66846bd.svg";const Ore=mt(" Home "),zre=au('<button class="navbar-toggler shadow-none ms-2" type="button" data-bs-toggle="collapse" data-bs-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon mt-2"><span class="navbar-toggler-bar bar1"></span><span class="navbar-toggler-bar bar2"></span><span class="navbar-toggler-bar bar3"></span></span></button>',1),Bre={class:"collapse navbar-collapse w-100 pt-3 pb-2 py-lg-0",id:"navigation"},Fre={class:"navbar-nav navbar-nav-hover ms-auto"},Nre={class:"nav-item dropdown dropdown-hover mx-2"},Vre=mt(" Pages "),$re=["src"],Gre={class:"dropdown-menu dropdown-menu-animation ms-n3 dropdown-md p-3 border-radius-xl mt-0 mt-lg-3","aria-labelledby":"dropdownMenuPages"},Ure={class:"row d-none d-lg-block"},jre={class:"col-12 px-4 py-2"},Hre={class:"row"},Wre={class:"position-relative"},qre=ie("div",{class:"dropdown-header text-dark font-weight-bolder d-flex align-items-center px-1"}," Features ",-1),Zre=ie("span",null,"UK stations",-1),k8={name:"NavbarMap",props:{action:{type:Object,route:String,color:String,label:String,default:()=>({route:"https://www.creative-tim.com/product/vue-material-kit",color:"bg-gradient-success",label:"Free Download"})},transparent:{type:Boolean,default:!1},light:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},darkText:{type:Boolean,default:!1}},setup(r){const e=r;function t(){return e.transparent&&n.value?mS:e.transparent?L8:mS}const i=()=>{let u;return e.transparent&&n.value?u="text-dark":e.transparent?u="text-white":u="text-dark",u};let n=tc(e.darkText);const{type:s}=P8();return s.value==="mobile"?n.value=!0:s.value==="desktop"&&n.value==!1&&(n.value=!1),Ep(()=>s.value,u=>{u==="mobile"?n.value=!0:n.value=!1}),(u,a)=>(Yt(),lr("nav",{class:$r(["navbar navbar-expand-lg top-0",{"z-index-3 w-100 shadow-none navbar-transparent position-absolute my-3":e.transparent,"my-3 blur border-radius-lg z-index-3 py-2 shadow py-2 start-0 end-0 mx-4 position-absolute mt-4":e.sticky,"navbar-light bg-white py-3":e.light," navbar-dark bg-gradient-dark z-index-3 py-3":e.dark}])},[ie("div",{class:$r(e.transparent||e.light||e.dark?"container":"container-fluid px-0")},[Me(zt(ci),{class:$r(["navbar-brand d-none d-md-block",[e.transparent&&zt(n).value||!e.transparent?"text-dark font-weight-bolder ms-sm-3":"text-white font-weight-bolder ms-sm-3"]]),to:{name:"presentation"},rel:"tooltip",title:"Designed and Coded by Creative Tim","data-placement":"bottom"},{default:Xe(()=>[Ore]),_:1},8,["class"]),zre,ie("div",Bre,[ie("ul",Fre,[ie("li",Nre,[ie("a",{role:"button",class:$r(["nav-link ps-2 d-flex cursor-pointer align-items-center",i()]),id:"dropdownMenuPages","data-bs-toggle":"dropdown","aria-expanded":"false"},[ie("i",{class:$r(["material-icons opacity-6 me-2 text-md",i()])},"dashboard",2),Vre,ie("img",{src:t(),alt:"down-arrow",class:"arrow ms-2 d-lg-block d-none"},null,8,$re)],2),ie("div",Gre,[ie("div",Ure,[ie("div",jre,[ie("div",Hre,[ie("div",Wre,[qre,Me(zt(ci),{to:{name:"stations"},class:"dropdown-item border-radius-md"},{default:Xe(()=>[Zre]),_:1})])])])])])])])])],2)],2))}};var Xre="/assets/logo-ct-dark.7a12dae2.png";const Yre={class:"footer pt-3 mt-3"},Kre={class:"container"},Jre={class:"row"},Qre={class:"col-md-8 mb-4 ms-auto"},eie=["href"],tie=["src"],rie={class:"font-weight-bolder mb-3"},iie={class:"d-flex flex-row ms-n3 nav"},nie=["href","innerHTML"],aie={class:"text-sm"},oie={class:"flex-column ms-n3 nav"},sie=["href"],lie={class:"col-12"},uie={class:"text-center"},cie={class:"text-dark my-4 text-sm font-weight-normal"},AT={name:"FooterDefault",props:{brand:{type:Object,name:String,logo:String,route:"",default:()=>({name:"Made by Material Kit 2",logo:Xre,route:"/"})},socials:{type:Array,icon:String,link:String,default:()=>[{icon:'<i class="fab fa-github text-lg opacity-8"></i>',link:"https://github.com/creativetimofficial"}]},menus:{type:Array,name:String,items:{type:Array,name:String,href:String},default:()=>[{name:"Info",items:[{name:"about us",href:"https://github.com/Lem-c/vue-mapkit"}]}]}},setup(r){return(e,t)=>(Yt(),lr("footer",Yre,[ie("div",Kre,[ie("div",Jre,[ie("div",Qre,[ie("div",null,[ie("a",{href:r.brand.route},[ie("img",{src:r.brand.logo,class:"mb-3 footer-logo",alt:"main_logo"},null,8,tie)],8,eie),ie("h6",rie,Pi(r.brand.name),1)]),ie("div",null,[ie("ul",iie,[(Yt(!0),lr(Hn,null,a0(r.socials,({icon:i,link:n})=>(Yt(),lr("li",{class:"nav-item",key:n},[ie("a",{class:"nav-link pe-1",href:n,target:"_blank",innerHTML:i},null,8,nie)]))),128))])])]),(Yt(!0),lr(Hn,null,a0(r.menus,({name:i,items:n})=>(Yt(),lr("div",{class:"col-md-2 col-sm-6 col-6 mb-4",key:i},[ie("h6",aie,Pi(i),1),ie("ul",oie,[(Yt(!0),lr(Hn,null,a0(n,s=>(Yt(),lr("li",{class:"nav-item",key:s.name},[ie("a",{class:"nav-link",href:s.href,target:"_blank"},Pi(s.name),9,sie)]))),128))])]))),128)),ie("div",lie,[ie("div",uie,[ie("p",cie," @CASA0003 "+Pi(new Date().getFullYear())+" Group Mini Project ",1)])])])])]))}},hie={class:"header-2"},die={class:"row"},KP={name:"Header",props:{image:{type:String,default:""},title:{type:[String,Object],default:"",text:String,variant:{validator(r){return["h1","h2","h3","h4","h5","h6"].includes(r)}},class:{type:String,default:""}},description:{type:[String,Object],default:"",text:String,class:String},mask:{type:String,default:"mask bg-gradient-success opacity-4"},center:{type:Boolean,default:!1},minHeight:{type:String,default:" min-vh-75"},fullWidth:{type:Boolean,default:!1}},setup(r){return(e,t)=>{var i;return Yt(),lr("header",hie,[r.title?(Yt(),lr("div",{key:0,class:$r(["page-header",r.minHeight]),style:bo(`background-image: url(${r.image})`),loading:"lazy"},[ie("span",{class:$r(r.mask)},null,2),ie("div",{class:$r(r.fullWidth?"w-100":"container")},[ie("div",die,[ie("div",{class:$r(`${(i=e.$attrs.class)!=null?i:"col-lg-7"} ${r.center?"text-center mx-auto":""}`)},[(Yt(),Wn(Mee(r.title.variant?r.title.variant:"h1"),{class:$r(["text-white",r.title.class])},{default:Xe(()=>[mt(Pi(typeof r.title=="object"?r.title.text:r.title),1)]),_:1},8,["class"])),ie("p",{class:$r(["lead text-white",r.description.class])},Pi(typeof r.description=="object"?r.description.text:r.description),3),ru(e.$slots,"default")],2)])],2)],6)):ru(e.$slots,"default",{key:1})])}}},fie={class:"ps-0 ps-md-3 mt-3 mt-md-0"},pie=["href"],mie=ie("i",{class:"fas fa-arrow-right text-sm ms-1"},null,-1),FA={name:"FilledInfoCard",props:{color:{text:String,background:{validator(r){return["primary","secondary","info","success","warning","error","light","dark","white"].includes(r)}},default(){return{text:"",background:"bg-gray-100"}}},icon:{type:Object,required:!0,component:String,color:String},title:{type:String,required:!0},description:{type:String,required:!0},action:{type:Object,required:!0,label:{type:Object,required:!0,text:String,color:String},route:{type:String,required:!0}}},setup(r){return(e,t)=>{var i,n,s,u;return Yt(),lr("div",{class:$r(["info-horizontal border-radius-xl d-block d-md-flex",`${(i=r.color.background)!=null?i:""}`])},[ie("i",{class:$r(["material-icons text-3xl",`text-${r.icon.color}`])},Pi(r.icon.component),3),ie("div",fie,[ie("h5",{class:$r(`text-${(n=r.color.text)!=null?n:""}`)},Pi(r.title),3),ie("p",{class:$r(`text-${(s=r.color.text)!=null?s:""}`)},Pi(r.description),3),ie("a",{href:r.action.route,class:$r(["icon-move-right",`text-${(u=r.action.label.color)!=null?u:"success"}`])},[mt(Pi(r.action.label.text)+" ",1),mie],10,pie)])],2)}}};var gie="/assets/ui-bg.b5360db0.jpg",vie="/assets/waves-white.19ec813a.svg";const _ie={class:"container position-sticky z-index-sticky top-0"},yie={class:"row"},xie={class:"col-12"},bie=ie("div",{class:"container"},[ie("div",{class:"row"},[ie("div",{class:"col-lg-7 text-center mx-auto position-relative"},[ie("h1",{class:"text-white pt-3 mt-n5 me-2",style:{display:"inline-block "}}," Title Title Title "),ie("p",{class:"lead text-white px-5 mt-3",style:{fontWeight:"500"}}," Start the Development With Bootstrap 5 Design System inspired by Material Design. ")])])],-1),wie=[bie],Sie={class:"card card-body blur shadow-blur mx-3 mx-md-4 mt-n6"},Tie={class:"container"},Mie={class:"row"},Aie={class:"col-lg-4"},Cie={class:"col-lg-4"},Iie={class:"col-lg-4"},Eie=ie("span",{class:"mask bg-gradient-dark"},null,-1),Die=mt(" Content "),Pie=[Eie,Die],Lie=ie("div",{class:"py-5"},[ie("div",{class:"container"},[ie("div",{class:"row"})])],-1),kie={name:"PresentationView",setup(r){const e=document.getElementsByTagName("body")[0];return en(()=>{e.classList.add("presentation-page"),e.classList.add("bg-gray-200")}),bv(()=>{e.classList.remove("presentation-page"),e.classList.remove("bg-gray-200")}),(t,i)=>(Yt(),lr(Hn,null,[ie("div",_ie,[ie("div",yie,[ie("div",xie,[Me(k8,{sticky:!0})])])]),Me(KP,null,{default:Xe(()=>[ie("div",{class:"page-header min-vh-75",style:bo(`background-image: url(${zt(gie)})`),loading:"lazy"},wie,4)]),_:1}),ie("div",Sie,[ie("div",Tie,[ie("div",Mie,[ie("div",Aie,[Me(FA,{class:"p-4",color:{text:"white",background:"bg-gradient-success"},icon:{component:"flag",color:"white"},title:"Getting Started",description:"Check the possible ways of working with our product and the necessary files for building your own project.",action:{route:"https://www.creative-tim.com/learning-lab/vue/overview/material-kit/",label:{text:"Let's start",color:"white"}}},null,8,["action"])]),ie("div",Cie,[Me(FA,{class:"px-lg-1 mt-lg-0 mt-4 p-4",height:"h-100",icon:{component:"precision_manufacturing",color:"success"},title:"Plugins",description:`Get inspiration and have an overview about the plugins that we\r
                used to create the Material Kit.`,action:{route:"https://www.creative-tim.com/learning-lab/vue/input/material-kit/",label:{text:"Read more"}}},null,8,["action"])]),ie("div",Iie,[Me(FA,{class:"px-lg-1 mt-lg-0 mt-4 p-4",icon:{component:"receipt_long",color:"success"},title:"Comtrade Dataset",description:"Exploring the sources of our inspiration and data reveals much.",action:{route:"https://comtradeplus.un.org/",label:{text:"Read more"}}},null,8,["action"])])])]),ie("div",{class:"container-fluid mt-sm-5 border-radius-xl",style:bo({background:"linear-gradient(195deg, rgb(66, 66, 74), rgb(25, 25, 25))"})},[ie("div",{class:"page-header py-6 py-md-5 my-sm-3 mb-3 border-radius-xl",style:bo({backgroundImage:`url(${zt(vie)})`}),loading:"lazy"},Pie,4)],4),Lie]),Me(AT)],64))}},Rie=mt(" Material Kit 2 "),Oie=mt(" Material Design "),zie=au('<a href="https://www.creative-tim.com/product/vue-material-kit-pro" class="btn btn-sm bg-gradient-success mb-0 ms-auto d-lg-none d-block">Buy Now</a><button class="navbar-toggler shadow-none ms-2" type="button" data-bs-toggle="collapse" data-bs-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon mt-2"><span class="navbar-toggler-bar bar1"></span><span class="navbar-toggler-bar bar2"></span><span class="navbar-toggler-bar bar3"></span></span></button>',2),Bie={class:"collapse navbar-collapse w-100 pt-3 pb-2 py-lg-0",id:"navigation"},Fie={class:"navbar-nav navbar-nav-hover ms-auto"},Nie={class:"nav-item dropdown dropdown-hover mx-2"},Vie=mt(" Pages "),$ie=["src"],Gie=["src"],Uie={class:"dropdown-menu dropdown-menu-animation ms-n3 dropdown-md p-3 border-radius-xl mt-0 mt-lg-3","aria-labelledby":"dropdownMenuPages"},jie={class:"row d-none d-lg-block"},Hie={class:"col-12 px-4 py-2"},Wie={class:"row"},qie={class:"position-relative"},Zie=ie("div",{class:"dropdown-header text-dark font-weight-bolder d-flex align-items-center px-1"}," Landing Pages ",-1),Xie=ie("span",null,"About Us",-1),Yie=ie("span",null,"Contact Us",-1),Kie=ie("span",null,"Author",-1),Jie=ie("div",{class:"dropdown-header text-dark font-weight-bolder d-flex align-items-center px-0 mt-3"}," Account ",-1),Qie=ie("span",null,"Sign In",-1),ene={class:"d-lg-none"},tne=ie("div",{class:"dropdown-header text-dark font-weight-bolder d-flex align-items-center px-0"}," Landing Pages ",-1),rne=ie("span",null,"About Us",-1),ine=ie("span",null,"Contact Us",-1),nne=ie("span",null,"Author",-1),ane=ie("div",{class:"dropdown-header text-dark font-weight-bolder d-flex align-items-center px-0 mt-3"}," Account ",-1),one=ie("span",null,"Sign In",-1),sne={class:"nav-item dropdown dropdown-hover mx-2"},lne=mt(" Sections "),une=["src"],cne=["src"],hne={class:"dropdown-menu dropdown-menu-end dropdown-menu-animation dropdown-md dropdown-md-responsive p-3 border-radius-lg mt-0 mt-lg-3","aria-labelledby":"dropdownMenuBlocks"},dne={class:"d-none d-lg-block"},fne={class:"list-group"},pne={class:"nav-item dropdown dropdown-hover dropdown-subitem list-group-item border-0 p-0"},mne={class:"dropdown-item py-2 ps-3 border-radius-md",href:"javascript:;"},gne={class:"d-flex"},vne={class:"w-100 d-flex align-items-center justify-content-between"},_ne=ie("div",null,[ie("h6",{class:"dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"}," Page Sections "),ie("span",{class:"text-sm"},"See all sections")],-1),yne=["src"],xne={class:"dropdown-menu mt-0 py-3 px-2 mt-3"},bne=mt(" Page Headers "),wne=mt(" Features "),Sne={class:"nav-item dropdown dropdown-hover dropdown-subitem list-group-item border-0 p-0"},Tne={class:"dropdown-item py-2 ps-3 border-radius-md",href:"javascript:;"},Mne={class:"d-flex"},Ane={class:"w-100 d-flex align-items-center justify-content-between"},Cne=ie("div",null,[ie("h6",{class:"dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"}," Navigation "),ie("span",{class:"text-sm"},"See all navigations")],-1),Ine=["src"],Ene={class:"dropdown-menu mt-0 py-3 px-2 mt-3"},Dne=mt(" Navbars "),Pne=mt(" Nav Tabs "),Lne=mt(" Pagination "),kne={class:"nav-item dropdown dropdown-hover dropdown-subitem list-group-item border-0 p-0"},Rne={class:"dropdown-item py-2 ps-3 border-radius-md",href:"javascript:;"},One={class:"d-flex"},zne={class:"w-100 d-flex align-items-center justify-content-between"},Bne=ie("div",null,[ie("h6",{class:"dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"}," Input Areas "),ie("span",{class:"text-sm"},"See all input areas")],-1),Fne=["src"],Nne={class:"dropdown-menu mt-0 py-3 px-2 mt-3"},Vne=mt(" Inputs "),$ne=mt(" Forms "),Gne={class:"nav-item dropdown dropdown-hover dropdown-subitem list-group-item border-0 p-0"},Une={class:"dropdown-item py-2 ps-3 border-radius-md",href:"javascript:;"},jne={class:"d-flex"},Hne={class:"w-100 d-flex align-items-center justify-content-between"},Wne=ie("div",null,[ie("h6",{class:"dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"}," Attention Catchers "),ie("span",{class:"text-sm"},"See all examples")],-1),qne=["src"],Zne={class:"dropdown-menu mt-0 py-3 px-2 mt-3"},Xne=mt(" Alerts "),Yne=mt(" Modals "),Kne=mt(" Tooltips & Popovers "),Jne={class:"nav-item dropdown dropdown-hover dropdown-subitem list-group-item border-0 p-0"},Qne={class:"dropdown-item py-2 ps-3 border-radius-md",href:"javascript:;"},eae={class:"d-flex"},tae={class:"w-100 d-flex align-items-center justify-content-between"},rae=ie("div",null,[ie("h6",{class:"dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"}," Elements "),ie("span",{class:"text-sm"},"See all elements")],-1),iae=["src"],nae={class:"dropdown-menu mt-0 py-3 px-2 mt-3"},aae=mt(" Avatars "),oae=mt(" Badges "),sae=mt(" Breadcrumbs "),lae=mt(" Buttons "),uae=mt(" Button Groups "),cae=mt(" Dropdowns "),hae=mt(" Progress Bars "),dae=mt(" Toggles "),fae=mt(" Typography "),pae={class:"row d-lg-none"},mae={class:"col-md-12"},gae=ie("div",{class:"d-flex mb-2"},[ie("div",{class:"w-100 d-flex align-items-center justify-content-between"},[ie("div",null,[ie("h6",{class:"dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"}," Page Sections ")])])],-1),vae=mt(" Page Headers "),_ae=mt(" Features "),yae=ie("div",{class:"d-flex mb-2 mt-3"},[ie("div",{class:"w-100 d-flex align-items-center justify-content-between"},[ie("div",null,[ie("h6",{class:"dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"}," Navigation ")])])],-1),xae=mt(" Navbars "),bae=mt(" Nav Tabs "),wae=mt(" Pagination "),Sae=ie("div",{class:"d-flex mb-2 mt-3"},[ie("div",{class:"w-100 d-flex align-items-center justify-content-between"},[ie("div",null,[ie("h6",{class:"dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"}," Input Areas ")])])],-1),Tae=mt(" Inputs "),Mae=mt(" Forms "),Aae=ie("div",{class:"d-flex mb-2 mt-3"},[ie("div",{class:"w-100 d-flex align-items-center justify-content-between"},[ie("div",null,[ie("h6",{class:"dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"}," Attention Catchers ")])])],-1),Cae=mt(" Alerts "),Iae=mt(" Modals "),Eae=mt(" Tooltips & Popovers "),Dae=ie("div",{class:"d-flex mb-2 mt-3"},[ie("div",{class:"w-100 d-flex align-items-center justify-content-between"},[ie("div",null,[ie("h6",{class:"dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"}," Elements ")])])],-1),Pae=mt(" Avatars "),Lae=mt(" Badges "),kae=mt(" Breadcrumbs "),Rae=mt(" Buttons "),Oae=mt(" Button Groups "),zae=mt(" Dropdowns "),Bae=mt(" Progress Bars "),Fae=mt(" Toggles "),Nae=mt(" Typography "),Vae={class:"nav-item dropdown dropdown-hover mx-2"},$ae=mt(" Docs "),Gae=["src"],Uae=["src"],jae=au('<div class="dropdown-menu dropdown-menu-end dropdown-menu-animation dropdown-md mt-0 mt-lg-3 p-3 border-radius-lg" aria-labelledby="dropdownMenuDocs"><div class="d-none d-lg-block"><ul class="list-group"><li class="nav-item list-group-item border-0 p-0"><a class="dropdown-item py-2 ps-3 border-radius-md" href=" https://www.creative-tim.com/learning-lab/vue/overview/material-kit/"><h6 class="dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"> Getting Started </h6><span class="text-sm">All about overview, quick start, license and contents</span></a></li><li class="nav-item list-group-item border-0 p-0"><a class="dropdown-item py-2 ps-3 border-radius-md" href=" https://www.creative-tim.com/learning-lab/vue/colors/material-kit/"><h6 class="dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"> Foundation </h6><span class="text-sm">See our colors, icons and typography</span></a></li><li class="nav-item list-group-item border-0 p-0"><a class="dropdown-item py-2 ps-3 border-radius-md" href=" https://www.creative-tim.com/learning-lab/vue/alerts/material-kit/"><h6 class="dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"> Components </h6><span class="text-sm">Explore our collection of fully designed components</span></a></li></ul></div><div class="row d-lg-none"><div class="col-md-12 g-0"><a class="dropdown-item py-2 ps-3 border-radius-md" href="./pages/about-us.html"><h6 class="dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"> Getting Started </h6><span class="text-sm">All about overview, quick start, license and contents</span></a><a class="dropdown-item py-2 ps-3 border-radius-md" href="./pages/about-us.html"><h6 class="dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"> Foundation </h6><span class="text-sm">See our colors, icons and typography</span></a><a class="dropdown-item py-2 ps-3 border-radius-md" href="./pages/about-us.html"><h6 class="dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"> Components </h6><span class="text-sm">Explore our collection of fully designed components</span></a><a class="dropdown-item py-2 ps-3 border-radius-md" href="./pages/about-us.html"><h6 class="dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"> Plugins </h6><span class="text-sm">Check how you can integrate our plugins</span></a><a class="dropdown-item py-2 ps-3 border-radius-md" href="./pages/about-us.html"><h6 class="dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0"> Utility Classes </h6><span class="text-sm">For those who want flexibility, use our utility classes</span></a></div></div></div>',1),Hae={class:"nav-item dropdown dropdown-hover mx-2"},Wae={href:"https://www.github.com/creativetimofficial/vue-material-kit",class:"nav-link d-flex cursor-pointer align-items-center"},qae=["fill"],Zae=ie("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"},null,-1),Xae=[Zae],Yae=mt(" Github "),Kae={class:"navbar-nav d-lg-block d-none"},Jae={class:"nav-item"},Qae=["href"],cx={name:"NavbarDefault",props:{action:{type:Object,route:String,color:String,label:String,default:()=>({route:"https://www.creative-tim.com/product/vue-material-kit",color:"bg-gradient-success",label:"Free Download"})},transparent:{type:Boolean,default:!1},light:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},darkText:{type:Boolean,default:!1}},setup(r){const e=r;function t(){return e.transparent&&n.value?mS:e.transparent?L8:mS}const i=()=>{let u;return e.transparent&&n.value?u="text-dark":e.transparent?u="text-white":u="text-dark",u};let n=tc(e.darkText);const{type:s}=P8();return s.value==="mobile"?n.value=!0:s.value==="desktop"&&n.value==!1&&(n.value=!1),Ep(()=>s.value,u=>{u==="mobile"?n.value=!0:n.value=!1}),(u,a)=>(Yt(),lr("nav",{class:$r(["navbar navbar-expand-lg top-0",{"z-index-3 w-100 shadow-none navbar-transparent position-absolute my-3":e.transparent,"my-3 blur border-radius-lg z-index-3 py-2 shadow py-2 start-0 end-0 mx-4 position-absolute mt-4":e.sticky,"navbar-light bg-white py-3":e.light," navbar-dark bg-gradient-dark z-index-3 py-3":e.dark}])},[ie("div",{class:$r(e.transparent||e.light||e.dark?"container":"container-fluid px-0")},[Me(zt(ci),{class:$r(["navbar-brand d-none d-md-block",[e.transparent&&zt(n).value||!e.transparent?"text-dark font-weight-bolder ms-sm-3":"text-white font-weight-bolder ms-sm-3"]]),to:{name:"presentation"},rel:"tooltip",title:"Designed and Coded by Creative Tim","data-placement":"bottom"},{default:Xe(()=>[Rie]),_:1},8,["class"]),Me(zt(ci),{class:$r(["navbar-brand d-block d-md-none",e.transparent||e.dark?"text-white":"font-weight-bolder ms-sm-3"]),to:"/",rel:"tooltip",title:"Designed and Coded by Creative Tim","data-placement":"bottom"},{default:Xe(()=>[Oie]),_:1},8,["class"]),zie,ie("div",Bie,[ie("ul",Fie,[ie("li",Nie,[ie("a",{role:"button",class:$r(["nav-link ps-2 d-flex cursor-pointer align-items-center",i()]),id:"dropdownMenuPages","data-bs-toggle":"dropdown","aria-expanded":"false"},[ie("i",{class:$r(["material-icons opacity-6 me-2 text-md",i()])},"dashboard",2),Vie,ie("img",{src:t(),alt:"down-arrow",class:"arrow ms-2 d-lg-block d-none"},null,8,$ie),ie("img",{src:t(),alt:"down-arrow",class:"arrow ms-1 d-lg-none d-block ms-auto"},null,8,Gie)],2),ie("div",Uie,[ie("div",jie,[ie("div",Hie,[ie("div",Wie,[ie("div",qie,[Zie,Me(zt(ci),{to:{name:"about"},class:"dropdown-item border-radius-md"},{default:Xe(()=>[Xie]),_:1}),Me(zt(ci),{to:{name:"contactus"},class:"dropdown-item border-radius-md"},{default:Xe(()=>[Yie]),_:1}),Me(zt(ci),{to:{name:"author"},class:"dropdown-item border-radius-md"},{default:Xe(()=>[Kie]),_:1}),Jie,Me(zt(ci),{to:{name:"signin-basic"},class:"dropdown-item border-radius-md"},{default:Xe(()=>[Qie]),_:1})])])])]),ie("div",ene,[tne,Me(zt(ci),{to:{name:"about"},class:"dropdown-item border-radius-md"},{default:Xe(()=>[rne]),_:1}),Me(zt(ci),{to:{name:"contactus"},class:"dropdown-item border-radius-md"},{default:Xe(()=>[ine]),_:1}),Me(zt(ci),{to:{name:"author"},class:"dropdown-item border-radius-md"},{default:Xe(()=>[nne]),_:1}),ane,Me(zt(ci),{to:{name:"signin-basic"},class:"dropdown-item border-radius-md"},{default:Xe(()=>[one]),_:1})])])]),ie("li",sne,[ie("a",{role:"button",class:$r(["nav-link ps-2 d-flex cursor-pointer align-items-center",i()]),id:"dropdownMenuBlocks","data-bs-toggle":"dropdown","aria-expanded":"false"},[ie("i",{class:$r(["material-icons opacity-6 me-2 text-md",i()])},"view_day",2),lne,ie("img",{src:t(),alt:"down-arrow",class:"arrow ms-2 d-lg-block d-none"},null,8,une),ie("img",{src:t(),alt:"down-arrow",class:"arrow ms-1 d-lg-none d-block ms-auto"},null,8,cne)],2),ie("div",hne,[ie("div",dne,[ie("ul",fne,[ie("li",pne,[ie("a",mne,[ie("div",gne,[ie("div",vne,[_ne,ie("img",{src:zt(cy),alt:"down-arrow",class:"arrow"},null,8,yne)])])]),ie("div",xne,[Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"page-headers"}},{default:Xe(()=>[bne]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"page-features"}},{default:Xe(()=>[wne]),_:1})])]),ie("li",Sne,[ie("a",Tne,[ie("div",Mne,[ie("div",Ane,[Cne,ie("img",{src:zt(cy),alt:"down-arrow",class:"arrow"},null,8,Ine)])])]),ie("div",Ene,[Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"navigation-navbars"}},{default:Xe(()=>[Dne]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"navigation-navtabs"}},{default:Xe(()=>[Pne]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"navigation-pagination"}},{default:Xe(()=>[Lne]),_:1})])]),ie("li",kne,[ie("a",Rne,[ie("div",One,[ie("div",zne,[Bne,ie("img",{src:zt(cy),alt:"down-arrow",class:"arrow"},null,8,Fne)])])]),ie("div",Nne,[Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"inputareas-inputs"}},{default:Xe(()=>[Vne]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"inputareas-forms"}},{default:Xe(()=>[$ne]),_:1})])]),ie("li",Gne,[ie("a",Une,[ie("div",jne,[ie("div",Hne,[Wne,ie("img",{src:zt(cy),alt:"down-arrow",class:"arrow"},null,8,qne)])])]),ie("div",Zne,[Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"ac-alerts"}},{default:Xe(()=>[Xne]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"ac-modals"}},{default:Xe(()=>[Yne]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"ac-tooltips-popovers"}},{default:Xe(()=>[Kne]),_:1})])]),ie("li",Jne,[ie("a",Qne,[ie("div",eae,[ie("div",tae,[rae,ie("img",{src:zt(cy),alt:"down-arrow",class:"arrow"},null,8,iae)])])]),ie("div",nae,[Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-avatars"}},{default:Xe(()=>[aae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-badges"}},{default:Xe(()=>[oae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-breadcrumbs"}},{default:Xe(()=>[sae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-buttons"}},{default:Xe(()=>[lae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-button-groups"}},{default:Xe(()=>[uae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-dropdowns"}},{default:Xe(()=>[cae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-progress-bars"}},{default:Xe(()=>[hae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-toggles"}},{default:Xe(()=>[dae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-typography"}},{default:Xe(()=>[fae]),_:1})])])])]),ie("div",pae,[ie("div",mae,[gae,Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"page-headers"}},{default:Xe(()=>[vae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"page-features"}},{default:Xe(()=>[_ae]),_:1}),yae,Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"navigation-navbars"}},{default:Xe(()=>[xae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"navigation-navtabs"}},{default:Xe(()=>[bae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"navigation-pagination"}},{default:Xe(()=>[wae]),_:1}),Sae,Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"inputareas-inputs"}},{default:Xe(()=>[Tae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"inputareas-forms"}},{default:Xe(()=>[Mae]),_:1}),Aae,Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"ac-alerts"}},{default:Xe(()=>[Cae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"ac-modals"}},{default:Xe(()=>[Iae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"ac-tooltips-popovers"}},{default:Xe(()=>[Eae]),_:1}),Dae,Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-avatars"}},{default:Xe(()=>[Pae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-badges"}},{default:Xe(()=>[Lae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-breadcrumbs"}},{default:Xe(()=>[kae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-buttons"}},{default:Xe(()=>[Rae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-button-groups"}},{default:Xe(()=>[Oae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-dropdowns"}},{default:Xe(()=>[zae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-progress-bars"}},{default:Xe(()=>[Bae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-toggles"}},{default:Xe(()=>[Fae]),_:1}),Me(zt(ci),{class:"dropdown-item ps-3 border-radius-md mb-1",to:{name:"el-typography"}},{default:Xe(()=>[Nae]),_:1})])])])]),ie("li",Vae,[ie("a",{role:"button",class:$r(["nav-link ps-2 d-flex cursor-pointer align-items-center",i()]),id:"dropdownMenuDocs","data-bs-toggle":"dropdown","aria-expanded":"false"},[ie("i",{class:$r(["material-icons opacity-6 me-2 text-md",i()])},"article",2),$ae,ie("img",{src:t(),alt:"down-arrow",class:"arrow ms-2 d-lg-block d-none"},null,8,Gae),ie("img",{src:t(),alt:"down-arrow",class:"arrow ms-1 d-lg-none d-block ms-auto"},null,8,Uae)],2),jae]),ie("li",Hae,[ie("a",Wae,[(Yt(),lr("svg",{width:"20px",height:"20px",class:"material-icons me-2 opacity-6",viewBox:"0 0 24 24","aria-hidden":"true","data-testid":"GitHubIcon",fill:e.transparent&&"#fff"},Xae,8,qae)),Yae])])]),ie("ul",Kae,[ie("li",Jae,[ie("a",{href:r.action.route,class:$r(["btn btn-sm mb-0",r.action.color]),onclick:"smoothToPricing('pricing-soft-ui')"},Pi(r.action.label),11,Qae)])])])],2)],2))}};var eoe="/assets/bg9.71f6e235.jpg",Gp=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function CT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function toe(r){if(r.__esModule)return r;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(r).forEach(function(t){var i=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,i.get?i:{enumerable:!0,get:function(){return r[t]}})}),e}var R8={exports:{}};/*!
 * 
 *   typed.js - A JavaScript Typing Animation Library
 *   Author: Matt Boldt <me@mattboldt.com>
 *   Version: v2.0.12
 *   Url: https://github.com/mattboldt/typed.js
 *   License(s): MIT
 * 
 */(function(r,e){(function(i,n){r.exports=n()})(Gp,function(){return function(t){var i={};function n(s){if(i[s])return i[s].exports;var u=i[s]={exports:{},id:s,loaded:!1};return t[s].call(u.exports,u,u.exports,n),u.loaded=!0,u.exports}return n.m=t,n.c=i,n.p="",n(0)}([function(t,i,n){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function m(v,x){for(var w=0;w<x.length;w++){var T=x[w];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}return function(v,x,w){return x&&m(v.prototype,x),w&&m(v,w),v}}();function u(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}var a=n(1),h=n(3),p=function(){function m(v,x){u(this,m),a.initializer.load(this,x,v),this.begin()}return s(m,[{key:"toggle",value:function(){this.pause.status?this.start():this.stop()}},{key:"stop",value:function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))}},{key:"start",value:function(){this.typingComplete||!this.pause.status||(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))}},{key:"destroy",value:function(){this.reset(!1),this.options.onDestroy(this)}},{key:"reset",value:function(){var x=arguments.length<=0||arguments[0]===void 0?!0:arguments[0];clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,x&&(this.insertCursor(),this.options.onReset(this),this.begin())}},{key:"begin",value:function(){var x=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){!x.currentElContent||x.currentElContent.length===0?x.typewrite(x.strings[x.sequence[x.arrayPos]],x.strPos):x.backspace(x.currentElContent,x.currentElContent.length)},this.startDelay)}},{key:"typewrite",value:function(x,w){var T=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var C=this.humanizer(this.typeSpeed),I=1;if(this.pause.status===!0){this.setPauseStatus(x,w,!0);return}this.timeout=setTimeout(function(){w=h.htmlParser.typeHtmlChars(x,w,T);var k=0,R=x.substr(w);if(R.charAt(0)==="^"&&/^\^\d+/.test(R)){var z=1;R=/\d+/.exec(R)[0],z+=R.length,k=parseInt(R),T.temporaryPause=!0,T.options.onTypingPaused(T.arrayPos,T),x=x.substring(0,w)+x.substring(w+z),T.toggleBlinking(!0)}if(R.charAt(0)==="`"){for(;x.substr(w+I).charAt(0)!=="`"&&(I++,!(w+I>x.length)););var $=x.substring(0,w),j=x.substring($.length+1,w+I),G=x.substring(w+I+1);x=$+j+G,I--}T.timeout=setTimeout(function(){T.toggleBlinking(!1),w>=x.length?T.doneTyping(x,w):T.keepTyping(x,w,I),T.temporaryPause&&(T.temporaryPause=!1,T.options.onTypingResumed(T.arrayPos,T))},k)},C)}},{key:"keepTyping",value:function(x,w,T){w===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this)),w+=T;var C=x.substr(0,w);this.replaceText(C),this.typewrite(x,w)}},{key:"doneTyping",value:function(x,w){var T=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),!(this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount))&&(this.timeout=setTimeout(function(){T.backspace(x,w)},this.backDelay))}},{key:"backspace",value:function(x,w){var T=this;if(this.pause.status===!0){this.setPauseStatus(x,w,!1);return}if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var C=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){w=h.htmlParser.backSpaceHtmlChars(x,w,T);var I=x.substr(0,w);if(T.replaceText(I),T.smartBackspace){var k=T.strings[T.arrayPos+1];k&&I===k.substr(0,w)?T.stopNum=w:T.stopNum=0}w>T.stopNum?(w--,T.backspace(x,w)):w<=T.stopNum&&(T.arrayPos++,T.arrayPos===T.strings.length?(T.arrayPos=0,T.options.onLastStringBackspaced(),T.shuffleStringsIfNeeded(),T.begin()):T.typewrite(T.strings[T.sequence[T.arrayPos]],w))},C)}},{key:"complete",value:function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0}},{key:"setPauseStatus",value:function(x,w,T){this.pause.typewrite=T,this.pause.curString=x,this.pause.curStrPos=w}},{key:"toggleBlinking",value:function(x){!this.cursor||this.pause.status||this.cursorBlinking!==x&&(this.cursorBlinking=x,x?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink"))}},{key:"humanizer",value:function(x){return Math.round(Math.random()*x/2)+x}},{key:"shuffleStringsIfNeeded",value:function(){!this.shuffle||(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))}},{key:"initFadeOut",value:function(){var x=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){x.arrayPos++,x.replaceText(""),x.strings.length>x.arrayPos?x.typewrite(x.strings[x.sequence[x.arrayPos]],0):(x.typewrite(x.strings[0],0),x.arrayPos=0)},this.fadeOutDelay)}},{key:"replaceText",value:function(x){this.attr?this.el.setAttribute(this.attr,x):this.isInput?this.el.value=x:this.contentType==="html"?this.el.innerHTML=x:this.el.textContent=x}},{key:"bindFocusEvents",value:function(){var x=this;!this.isInput||(this.el.addEventListener("focus",function(w){x.stop()}),this.el.addEventListener("blur",function(w){x.el.value&&x.el.value.length!==0||x.start()}))}},{key:"insertCursor",value:function(){!this.showCursor||this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling))}}]),m}();i.default=p,t.exports=i.default},function(t,i,n){Object.defineProperty(i,"__esModule",{value:!0});var s=Object.assign||function(w){for(var T=1;T<arguments.length;T++){var C=arguments[T];for(var I in C)Object.prototype.hasOwnProperty.call(C,I)&&(w[I]=C[I])}return w},u=function(){function w(T,C){for(var I=0;I<C.length;I++){var k=C[I];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(T,k.key,k)}}return function(T,C,I){return C&&w(T.prototype,C),I&&w(T,I),T}}();function a(w){return w&&w.__esModule?w:{default:w}}function h(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}var p=n(2),m=a(p),v=function(){function w(){h(this,w)}return u(w,[{key:"load",value:function(C,I,k){if(typeof k=="string"?C.el=document.querySelector(k):C.el=k,C.options=s({},m.default,I),C.isInput=C.el.tagName.toLowerCase()==="input",C.attr=C.options.attr,C.bindInputFocusEvents=C.options.bindInputFocusEvents,C.showCursor=C.isInput?!1:C.options.showCursor,C.cursorChar=C.options.cursorChar,C.cursorBlinking=!0,C.elContent=C.attr?C.el.getAttribute(C.attr):C.el.textContent,C.contentType=C.options.contentType,C.typeSpeed=C.options.typeSpeed,C.startDelay=C.options.startDelay,C.backSpeed=C.options.backSpeed,C.smartBackspace=C.options.smartBackspace,C.backDelay=C.options.backDelay,C.fadeOut=C.options.fadeOut,C.fadeOutClass=C.options.fadeOutClass,C.fadeOutDelay=C.options.fadeOutDelay,C.isPaused=!1,C.strings=C.options.strings.map(function(G){return G.trim()}),typeof C.options.stringsElement=="string"?C.stringsElement=document.querySelector(C.options.stringsElement):C.stringsElement=C.options.stringsElement,C.stringsElement){C.strings=[],C.stringsElement.style.display="none";var R=Array.prototype.slice.apply(C.stringsElement.children),z=R.length;if(z)for(var $=0;$<z;$+=1){var j=R[$];C.strings.push(j.innerHTML.trim())}}C.strPos=0,C.arrayPos=0,C.stopNum=0,C.loop=C.options.loop,C.loopCount=C.options.loopCount,C.curLoop=0,C.shuffle=C.options.shuffle,C.sequence=[],C.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},C.typingComplete=!1;for(var $ in C.strings)C.sequence[$]=$;C.currentElContent=this.getCurrentElContent(C),C.autoInsertCss=C.options.autoInsertCss,this.appendAnimationCss(C)}},{key:"getCurrentElContent",value:function(C){var I="";return C.attr?I=C.el.getAttribute(C.attr):C.isInput?I=C.el.value:C.contentType==="html"?I=C.el.innerHTML:I=C.el.textContent,I}},{key:"appendAnimationCss",value:function(C){var I="data-typed-js-css";if(!!C.autoInsertCss&&!(!C.showCursor&&!C.fadeOut)&&!document.querySelector("["+I+"]")){var k=document.createElement("style");k.type="text/css",k.setAttribute(I,!0);var R="";C.showCursor&&(R+=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `),C.fadeOut&&(R+=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `),k.length!==0&&(k.innerHTML=R,document.body.appendChild(k))}}}]),w}();i.default=v;var x=new v;i.initializer=x},function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(u){},onComplete:function(u){},preStringTyped:function(u,a){},onStringTyped:function(u,a){},onLastStringBackspaced:function(u){},onTypingPaused:function(u,a){},onTypingResumed:function(u,a){},onReset:function(u){},onStop:function(u,a){},onStart:function(u,a){},onDestroy:function(u){}};i.default=n,t.exports=i.default},function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function h(p,m){for(var v=0;v<m.length;v++){var x=m[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(p,x.key,x)}}return function(p,m,v){return m&&h(p.prototype,m),v&&h(p,v),p}}();function s(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}var u=function(){function h(){s(this,h)}return n(h,[{key:"typeHtmlChars",value:function(m,v,x){if(x.contentType!=="html")return v;var w=m.substr(v).charAt(0);if(w==="<"||w==="&"){var T="";for(w==="<"?T=">":T=";";m.substr(v+1).charAt(0)!==T&&(v++,!(v+1>m.length)););v++}return v}},{key:"backSpaceHtmlChars",value:function(m,v,x){if(x.contentType!=="html")return v;var w=m.substr(v).charAt(0);if(w===">"||w===";"){var T="";for(w===">"?T="<":T="&";m.substr(v-1).charAt(0)!==T&&(v--,!(v<0)););v--}return v}}]),h}();i.default=u;var a=new u;i.htmlParser=a}])})})(R8);var roe=CT(R8.exports);const ioe=["src"],noe={inheritAttrs:!1},Ib=Object.assign(noe,{name:"DefaultInfoCard",props:{icon:{type:[String,Object],default:"",component:String,size:String,color:String},image:{type:Object,component:String,class:String,default:()=>{}},title:{type:[String,Object],required:!0,text:String,class:String},description:{type:[String,Object],required:!0,text:String,class:String},col:{type:String,default:""}},setup(r){return(e,t)=>(Yt(),lr("div",{class:$r(`${r.col?r.col:"col-md-6"}`)},[ie("div",u8(e.$attrs,{class:"info"}),[r.icon?(Yt(),lr("i",{key:0,class:$r(["material-icons text-gradient",`${typeof r.icon=="object"?`text-${r.icon.color} text-${r.icon.size}`:"text-success text-3xl"}`])},Pi(typeof r.icon=="object"?r.icon.component:r.icon),3)):kd("",!0),r.image?(Yt(),lr("img",{key:1,src:r.image.component,class:$r(r.image.class)},null,10,ioe)):kd("",!0),ie("h5",{class:$r(typeof r.title=="string"?"font-weight-bolder mt-3":r.title.class)},Pi(typeof r.title=="string"?r.title:r.title.text),3),ie("p",{class:$r(typeof r.description=="string"?"pe-5":r.description.class)},Pi(typeof r.description=="string"?r.description:r.description.text),3)],16)],2))}}),aoe={class:"card"},ooe={class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},soe=["href"],loe=["src","alt"],uoe={class:"card-body text-center"},coe={class:"font-weight-normal"},hoe={href:"javascript:;"},doe={class:"mb-0"},foe={name:"CenteredBlogCard",props:{image:{type:String,required:!0},title:{type:String,required:!0},description:{type:String,required:!0},action:{type:Object,color:String,route:String,label:String,default:()=>({color:"bg-gradient-success",label:"Find Out More"})}},setup(r){return(e,t)=>(Yt(),lr("div",aoe,[ie("div",ooe,[ie("a",{href:r.action.route,class:"d-block blur-shadow-image"},[ie("img",{src:r.image,alt:r.title,class:"img-fluid border-radius-lg"},null,8,loe)],8,soe)]),ie("div",uoe,[ie("h5",coe,[ie("a",hoe,Pi(r.title),1)]),ie("p",doe,Pi(r.description),1),ie("button",{type:"button",class:$r(["btn btn-sm mb-0 mt-3",r.action.color])},Pi(r.action.label),3)])]))}},poe={class:"py-7"},moe={class:"container"},goe={class:"row align-items-center"},voe={class:"col-lg-6"},_oe={class:"row justify-content-start"},yoe={class:"row justify-content-start mt-4"},xoe={class:"col-lg-4 ms-auto mt-lg-0 mt-6"},boe={name:"AboutInformation",setup(r){return(e,t)=>(Yt(),lr("section",poe,[ie("div",moe,[ie("div",goe,[ie("div",voe,[ie("div",_oe,[Me(Ib,{color:"info",icon:"public",title:"Fully integrated",description:`We get insulted by others, lose trust for those We get back\r
                  freezes`}),Me(Ib,{color:"info",icon:"payments",title:"Payments functionality",description:`We get insulted by others, lose trust for those We get back\r
                  freezes`})]),ie("div",yoe,[Me(Ib,{color:"info",icon:"apps",title:"Prebuilt components",description:`We get insulted by others, lose trust for those We get back\r
                  freezes`}),Me(Ib,{color:"info",icon:"3p",title:"Improved platform",description:`We get insulted by others, lose trust for those We get back\r
                  freezes`})])]),ie("div",xoe,[Me(foe,{image:"https://images.unsplash.com/photo-1544717302-de2939b7ef71?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80",title:"Get insights on Search",description:"Website visitors today demand a frictionless user expericence \u2014 especially when using search. Because of the hight standards."})])])])]))}},woe={class:"card card-profile"},Soe={class:"row"},Toe={class:"col-lg-4 col-md-6 col-12 mt-n5"},Moe=["href"],Aoe={class:"p-3 pe-md-0"},Coe=["src","alt"],Ioe={class:"col-lg-8 col-md-6 col-12 my-auto"},Eoe={class:"card-body ps-lg-0"},Doe={class:"mb-0"},Poe={class:"mb-0"},Eb={name:"HorizontalTeamCard",props:{image:{type:String,required:!0},profile:{type:Object,required:!0,name:String,link:String},position:{type:Object,label:String,color:String,required:!0},description:{type:String,required:!0}},setup(r){return(e,t)=>(Yt(),lr("div",woe,[ie("div",Soe,[ie("div",Toe,[ie("a",{href:r.profile.link},[ie("div",Aoe,[ie("img",{class:"w-100 border-radius-md shadow-lg",src:r.image,alt:r.profile.name},null,8,Coe)])],8,Moe)]),ie("div",Ioe,[ie("div",Eoe,[ie("h5",Doe,Pi(r.profile.name),1),ie("h6",{class:$r(`text-${r.position.color}`)},Pi(r.position.label),3),ie("p",Poe,Pi(r.description),1)])])])]))}};var Loe="/assets/team-5.913bf21f.jpg",O8="/assets/bruce-mars.f4e2d5ca.jpg",koe="/assets/ivana-squares.7a21484a.jpg",Roe="/assets/ivana-square.d5f3cb13.jpg";const Ooe={class:"pb-5 position-relative bg-gradient-dark mx-n3"},zoe={class:"container"},Boe=ie("div",{class:"row"},[ie("div",{class:"col-md-8 text-start mb-5 mt-5"},[ie("h3",{class:"text-white z-index-1 position-relative"}," The Executive Team "),ie("p",{class:"text-white opacity-8 mb-0"}," There\u2019s nothing I really wanted to do in life that I wasn\u2019t able to get good at. That\u2019s my skill. ")])],-1),Foe={class:"row"},Noe={class:"col-lg-6 col-12"},Voe={class:"col-lg-6 col-12"},$oe={class:"row mt-4"},Goe={class:"col-lg-6 col-12"},Uoe={class:"col-lg-6 col-12"},joe={name:"AboutTeam",setup(r){return(e,t)=>(Yt(),lr("section",Ooe,[ie("div",zoe,[Boe,ie("div",Foe,[ie("div",Noe,[Me(Eb,{class:"mt-4",image:zt(Loe),profile:{name:"Emma Roberts",link:"javascript:;"},position:{label:"UI Designer",color:"success"},description:`Artist is a term applied to a person who engages in an\r
                    activity deemed to be an art.`},null,8,["image"])]),ie("div",Voe,[Me(Eb,{class:"mt-lg-4 mt-5",image:zt(O8),profile:{name:"William Pearce",link:"javascript:;"},position:{label:"Boss",color:"success"},description:`Artist is a term applied to a person who engages in an\r
                    activity deemed to be an art.`},null,8,["image"])])]),ie("div",$oe,[ie("div",Goe,[Me(Eb,{class:"mt-4 z-index-2",image:zt(koe),profile:{name:"Ivana Flow",link:"javascript:;"},position:{label:"Athlete",color:"success"},description:`Artist is a term applied to a person who engages in an\r
                    activity deemed to be an art.`},null,8,["image"])]),ie("div",Uoe,[Me(Eb,{class:"mt-lg-4 mt-5 z-index-2",image:zt(Roe),profile:{name:"Marquez Garcia",link:"javascript:;"},position:{label:"JS Developer",color:"success"},description:`Artist is a term applied to a person who engages in an\r
                    activity deemed to be an art.`},null,8,["image"])])])])]))}};var Hoe="/assets/logo-coinbase.5b2f1a35.svg",Woe="/assets/logo-nasa.98d2c4fa.svg",qoe="/assets/logo-netflix.5140c329.svg",Zoe="/assets/logo-pinterest.2c5342d8.svg",Xoe="/assets/logo-spotify.e7181a97.svg",Yoe="/assets/logo-vodafone.3aa29ca3.svg";let HF=0;const WF="webkit moz ms o".split(" ");let $u,Gu;const Koe=typeof window=="undefined";if(Koe)$u=function(){},Gu=function(){};else{$u=window.requestAnimationFrame,Gu=window.cancelAnimationFrame;let r;for(let e=0;e<WF.length&&!($u&&Gu);e++)r=WF[e],$u=$u||window[r+"RequestAnimationFrame"],Gu=Gu||window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"];(!$u||!Gu)&&($u=function(e){const t=new Date().getTime(),i=Math.max(0,16-(t-HF)),n=window.setTimeout(()=>{e(t+i)},i);return HF=t+i,n},Gu=function(e){window.clearTimeout(e)})}var ph=(r,e)=>{const t=r.__vccOpts||r;for(const[i,n]of e)t[i]=n;return t};const Joe={props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator(r){return r>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default(r,e,t,i){return t*(-Math.pow(2,-10*r/i)+1)*1024/1023+e}}},data(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown(){return this.startVal>this.endVal}},watch:{startVal(){this.autoplay&&this.start()},endVal(){this.autoplay&&this.start()}},mounted(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=$u(this.count)},pauseResume(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause(){Gu(this.rAF)},resume(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,$u(this.count)},reset(){this.startTime=null,Gu(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count(r){this.startTime||(this.startTime=r),this.timestamp=r;const e=r-this.startTime;this.remaining=this.localDuration-e,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(e,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(e,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(e/this.localDuration):this.printVal=this.localStartVal+(this.endVal-this.localStartVal)*(e/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),e<this.localDuration?this.rAF=$u(this.count):this.$emit("callback")},isNumber(r){return!isNaN(parseFloat(r))},formatNumber(r){r=r.toFixed(this.decimals),r+="";const e=r.split(".");let t=e[0];const i=e.length>1?this.decimal+e[1]:"",n=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;n.test(t);)t=t.replace(n,"$1"+this.separator+"$2");return this.prefix+t+i+this.suffix}},destroyed(){Gu(this.rAF)}};function Qoe(r,e,t,i,n,s){return Yt(),lr("span",null,Pi(n.displayValue),1)}var z8=ph(Joe,[["render",Qoe]]);typeof window!="undefined"&&window.Vue&&window.Vue.component("count-to",z8);const ese={class:"text-center"},tse={class:"mt-3"},rse={class:"text-sm font-weight-normal"},NA={name:"DefaultCounterCard",props:{count:{type:Number,required:!0},suffix:{type:String,default:""},duration:{type:Number,default:4e3},title:{type:String,required:!0},description:{type:String,required:!0},color:{validator(r){return["primary","secondary","info","success","warning","error","light","dark"].includes(r)}},divider:{validator(r){return["vertical","horizontal"].includes(r)}}},setup(r){return(e,t)=>{var i;return Yt(),lr(Hn,null,[ie("div",ese,[ie("h1",{class:$r(`text-gradient text-${(i=r.color)!=null?i:"success"}`)},[Me(zt(z8),{"start-val":0,"end-val":r.count,duration:r.duration},null,8,["end-val","duration"]),mt(Pi(r.suffix),1)],2),ie("h5",tse,Pi(r.title),1),ie("p",rse,Pi(r.description),1)]),ie("hr",{class:$r(`${r.divider?r.divider:""} dark`)},null,2)],64)}}},ise={class:"pt-4 pb-6",id:"count-stats"},nse={class:"container"},ase=au('<div class="row mb-7"><div class="col-lg-2 col-md-4 col-6 mb-4"><img class="w-100 opacity-7" src="'+Hoe+'" alt="logo"></div><div class="col-lg-2 col-md-4 col-6 mb-4"><img class="w-100 opacity-7" src="'+Woe+'" alt="logo"></div><div class="col-lg-2 col-md-4 col-6 mb-4"><img class="w-100 opacity-7" src="'+qoe+'" alt="logo"></div><div class="col-lg-2 col-md-4 col-6 mb-4"><img class="w-100 opacity-7" src="'+Zoe+'" alt="logo"></div><div class="col-lg-2 col-md-4 col-6 mb-4"><img class="w-100 opacity-7" src="'+Xoe+'" alt="logo"></div><div class="col-lg-2 col-md-4 col-6 mb-4"><img class="w-100 opacity-7" src="'+Yoe+'" alt="logo"></div></div>',1),ose={class:"row justify-content-center text-center"},sse={class:"col-md-3"},lse={class:"col-md-3"},use={class:"col-md-3"},cse={name:"AboutFeaturing",setup(r){return(e,t)=>(Yt(),lr("section",ise,[ie("div",nse,[ase,ie("div",ose,[ie("div",sse,[Me(NA,{title:"Projects",description:"Of \u201Chigh-performing\u201D level are led by a certified project manager",count:5234,duration:3e3})]),ie("div",lse,[Me(NA,{title:"Hours",description:"That meets quality standards required by our users",count:3400,suffix:"+",duration:3e3})]),ie("div",use,[Me(NA,{title:"Support",description:"Actively engage team members that finishes on time",count:24,suffix:"/7",duration:4e3})])])])]))}};var hse="/assets/macbook.7b9e2036.png";const dse={class:"input-group"},fse={key:1,class:"input-group-text"},pse=["id","type","value","placeholder","isRequired","disabled"],Ja={name:"MaterialInput",props:{id:{type:String,default:""},type:{type:String,default:"text"},label:{type:[String,Object],text:String,class:String,default:()=>({class:""})},value:{type:String,default:""},placeholder:{type:String,default:""},size:{type:String,default:"md"},error:{type:Boolean,default:!1},success:{type:Boolean,default:!1},isRequired:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1},inputClass:{type:String,default:""},icon:{type:String,default:""}},setup(r){function e(t,i,n){let s,u;return s=t&&`form-control-${t}`,n?u="is-invalid":i?u="is-valid":u="",`${s} ${u}`}return(t,i)=>(Yt(),lr("div",dse,[r.label?(Yt(),lr("label",{key:0,class:$r(r.label.class)},Pi(typeof r.label=="string"?r.label:r.label.text),3)):kd("",!0),r.icon?(Yt(),lr("span",fse,[ie("i",{class:$r(["fas",`fa-${r.icon}`]),"aria-hidden":"true"},null,2)])):kd("",!0),ie("input",{id:r.id,type:r.type,class:$r(["form-control",[e(r.size,r.success,r.error),r.inputClass]]),value:r.value,placeholder:r.placeholder,isRequired:r.isRequired,disabled:r.isDisabled},null,10,pse)]))}},Lr={name:"MaterialButton",props:{variant:{type:String,validator(r){return["contained","gradient","outline"].includes(r)},default:"contained"},color:{validator(r){return["primary","secondary","info","success","warning","danger","error","light","white","dark","none"].includes(r)},default:""},size:{validator(r){return["sm","md","lg"].includes(r)},default:"md"},fullWidth:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},setup(r){function e(t,i,n,s,u){let a,h,p,m;return t==="gradient"?a=`bg-gradient-${i}`:t==="outline"?a=`btn-outline-${i}`:a=`btn-${i}`,h=n&&`btn-${n}`,p=s&&"w-100",m=u&&"disabled",`${a} ${h} ${p} ${m}`}return(t,i)=>(Yt(),lr("button",{class:$r(["btn",e(r.variant,r.color,r.size,r.fullWidth,r.disabled)])},[ru(t.$slots,"default")],2))}};function mse(r,e){Object.keys(e).forEach(function(t){r.setAttribute(t,e[t])})}if(document.querySelectorAll(".input-group").length!=0){var gse=document.querySelectorAll("input.form-control");gse.forEach(r=>mse(r,{onfocus:"focused(this)",onfocusout:"defocused(this)"}))}function Sv(){for(var r=document.querySelectorAll("input"),e=0;e<r.length;e++)r[e].hasAttribute("value")&&r[e].parentElement.classList.add("is-filled"),r[e].addEventListener("focus",function(t){this.parentElement.classList.add("is-focused")},!1),r[e].onkeyup=function(t){this.value!=""?this.parentElement.classList.add("is-filled"):this.parentElement.classList.remove("is-filled")},r[e].addEventListener("focusout",function(t){this.value!=""&&this.parentElement.classList.add("is-filled"),this.parentElement.classList.remove("is-focused")},!1)}const vse={class:"my-5 pt-5"},_se={class:"container"},yse={class:"row"},xse={class:"col-md-6 m-auto"},bse=ie("h4",null,"Be the first to see the news",-1),wse=ie("p",{class:"mb-4"}," Your company may not be in the software business, but eventually, a software company will be in your business. ",-1),Sse={class:"row"},Tse={class:"col-8"},Mse={class:"col-4 ps-0"},Ase=mt("Subscribe"),Cse=ie("div",{class:"col-md-5 ms-auto mt-6 md-mt-0"},[ie("div",{class:"position-relative"},[ie("img",{class:"max-width-50 w-100 position-relative z-index-2",src:hse,alt:"image"})])],-1),Ise={name:"AboutNewsletter",setup(r){return en(()=>{Sv()}),(e,t)=>(Yt(),lr("section",vse,[ie("div",_se,[ie("div",yse,[ie("div",xse,[bse,wse,ie("div",Sse,[ie("div",Tse,[Me(Ja,{class:"input-group-outline",id:"email",label:{text:"Email Here...",class:"form-label"},type:"email"},null,8,["label"])]),ie("div",Mse,[Me(Lr,{variant:"gradient",color:"success",class:"mb-0 h-100 position-relative z-index-2"},{default:Xe(()=>[Ase]),_:1})])])]),Cse])])]))}},Ese={class:"bg-gradient-dark"},Dse=au('<span class="mask bg-gradient-dark opacity-6"></span><div class="container"><div class="row justify-content-center"><div class="col-lg-8 text-center mx-auto my-auto"><h1 class="text-white"> Work with an amazing <span class="text-white" id="typed"></span></h1><div id="typed-strings"><h1>team</h1><h1>design</h1><h1>tool</h1></div><p class="lead mb-4 text-white opacity-8"> We\u2019re constantly trying to express ourselves and actualize our dreams. If you have the opportunity to play this game </p><button type="submit" class="btn bg-white text-dark"> Create Account </button><h6 class="text-white mb-2 mt-5">Find us on</h6><div class="d-flex justify-content-center"><a href="javascript:;"><i class="fab fa-facebook text-lg text-white me-4"></i></a><a href="javascript:;"><i class="fab fa-instagram text-lg text-white me-4"></i></a><a href="javascript:;"><i class="fab fa-twitter text-lg text-white me-4"></i></a><a href="javascript:;"><i class="fab fa-google-plus text-lg text-white"></i></a></div></div></div></div>',2),Pse=[Dse],Lse={class:"card card-body shadow-xl mx-3 mx-md-4 mt-n6"},kse={name:"AboutView",setup(r){const e=document.getElementsByTagName("body")[0];return en(()=>{e.classList.add("about-us"),e.classList.add("bg-gray-200"),document.getElementById("typed")&&new roe("#typed",{stringsElement:"#typed-strings",typeSpeed:90,backSpeed:90,backDelay:200,startDelay:500,loop:!0})}),bv(()=>{e.classList.remove("about-us"),e.classList.remove("bg-gray-200")}),(t,i)=>(Yt(),lr(Hn,null,[Me(cx,{action:{route:"javascript:;",label:"Buy Now",color:"btn-white"},transparent:""}),ie("header",Ese,[ie("div",{class:"page-header min-vh-75",style:bo({backgroundImage:`url(${zt(eoe)})`})},Pse,4)]),ie("div",Lse,[Me(boe),Me(joe),Me(cse),Me(Ise)]),Me(AT)],64))}};var Rse="/assets/illustration-signin.4fb4c335.jpg";const Ose={class:"input-group"},zse=["for"],Bse=["id","placeholder","rows"],JP={name:"MaterialTextArea",props:{id:{type:String,default:"message"},rows:{type:Number,default:4},placeholder:{type:String,default:""},labelClass:{type:String,default:""}},setup(r){return(e,t)=>(Yt(),lr("div",Ose,[ie("label",{for:r.id,class:$r(r.labelClass)},[ru(e.$slots,"default")],10,zse),ie("textarea",{name:"message",class:"form-control",id:r.id,placeholder:r.placeholder,rows:r.rows},null,8,Bse)]))}},Fse={class:"container position-sticky z-index-sticky top-0"},Nse={class:"row"},Vse={class:"col-12"},$se={class:"page-header min-vh-100"},Gse={class:"container"},Use={class:"row"},jse={class:"col-6 d-lg-flex d-none h-100 my-auto pe-0 position-absolute top-0 start-0 text-center justify-content-center flex-column"},Hse={class:"mt-8 col-xl-5 col-lg-6 col-md-7 d-flex flex-column ms-auto me-auto ms-lg-auto me-lg-5"},Wse={class:"card d-flex blur justify-content-center shadow-lg my-sm-0 my-sm-6 mt-8 mb-5"},qse=ie("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2 bg-transparent"},[ie("div",{class:"bg-gradient-success shadow-success border-radius-lg p-3"},[ie("h3",{class:"text-white text-success mb-0"},"Contact us")])],-1),Zse={class:"card-body"},Xse=ie("p",{class:"pb-3"}," For further questions, including partnership opportunities, please email hello@creative-tim.com or contact using our contact form. ",-1),Yse={id:"contact-form",method:"post",autocomplete:"off"},Kse={class:"card-body p-0 my-3"},Jse={class:"row"},Qse={class:"col-md-6"},ele={class:"col-md-6 ps-md-2"},tle={class:"form-group mb-0 mt-md-0 mt-4"},rle=mt("How can we help you?"),ile={class:"row"},nle={class:"col-md-12 text-center"},ale=mt("Send Message"),ole={name:"ContactView",setup(r){return en(()=>{Sv()}),(e,t)=>(Yt(),lr(Hn,null,[ie("div",Fse,[ie("div",Nse,[ie("div",Vse,[Me(cx,{sticky:!0,action:{route:"https://www.creative-tim.com/product/vue-material-kit-pro",color:"bg-gradient-success",label:"Buy Now"}},null,8,["action"])])])]),ie("section",null,[ie("div",$se,[ie("div",Gse,[ie("div",Use,[ie("div",jse,[ie("div",{class:"position-relative h-100 m-3 px-7 border-radius-lg d-flex flex-column justify-content-center",style:bo({backgroundImage:`url(${zt(Rse)})`,backgroundSize:"cover"}),loading:"lazy"},null,4)]),ie("div",Hse,[ie("div",Wse,[qse,ie("div",Zse,[Xse,ie("form",Yse,[ie("div",Kse,[ie("div",Jse,[ie("div",Qse,[Me(Ja,{class:"input-group-static mb-4",type:"text",label:"Full Name",placeholder:"Full Name"})]),ie("div",ele,[Me(Ja,{class:"input-group-static mb-4",type:"email",label:"Email",placeholder:"hello@creative-tim.com"})])]),ie("div",tle,[Me(JP,{id:"message",class:"input-group-static mb-4",rows:6,placeholder:"Describe your problem in at least 250 characters"},{default:Xe(()=>[rle]),_:1})]),ie("div",ile,[ie("div",nle,[Me(Lr,{variant:"gradient",color:"success",class:"mt-3 mb-0"},{default:Xe(()=>[ale]),_:1})])])])])])])])])])])]),Me(AT)],64))}},sle={},lle={class:"footer py-5"},ule={class:"container z-index-1 position-relative"},cle={class:"row"},hle={class:"col-lg-4 me-auto mb-lg-0 mb-4 text-lg-start text-center"},dle=au('<h6 class="text-dark font-weight-bolder text-uppercase mb-lg-4 mb-3"> Material Design </h6><ul class="nav flex-row ms-n3 justify-content-lg-start justify-content-center mb-4 mt-sm-0"><li class="nav-item"><a class="nav-link text-dark opacity-8" href="https://www.creative-tim.com" target="_blank"> Home </a></li><li class="nav-item"><a class="nav-link text-dark opacity-8" href="https://www.creative-tim.com/presentation" target="_blank"> About </a></li><li class="nav-item"><a class="nav-link text-dark opacity-8" href="https://www.creative-tim.com/blog" target="_blank"> Blog </a></li><li class="nav-item"><a class="nav-link text-dark opacity-8" href="https://www.creative-tim.com" target="_blank"> Services </a></li></ul>',2),fle={class:"text-sm text-dark opacity-8 mb-0"},ple=au('<div class="col-lg-6 ms-auto text-lg-end text-center"><p class="mb-5 text-lg text-dark font-weight-bold"> The reward for getting on the stage is fame. The price of fame is you can\u2019t get off the stage. </p><a href="javascript:;" target="_blank" class="text-dark me-xl-4 me-4 opacity-5"><span class="fab fa-dribbble"></span></a><a href="javascript:;" target="_blank" class="text-dark me-xl-4 me-4 opacity-5"><span class="fab fa-twitter"></span></a><a href="javascript:;" target="_blank" class="text-dark me-xl-4 me-4 opacity-5"><span class="fab fa-pinterest"></span></a><a href="javascript:;" target="_blank" class="text-dark opacity-5"><span class="fab fa-github"></span></a></div>',1);function mle(r,e){return Yt(),lr("footer",lle,[ie("div",ule,[ie("div",cle,[ie("div",hle,[dle,ie("p",fle," Copyright \xA9 "+Pi(new Date().getFullYear())+" Material Design by Creative Tim. ",1)]),ple])])])}var gle=ph(sle,[["render",mle]]);const vle=["src","alt"],Zl={name:"MaterialAvatar",props:{image:{type:String,required:!0},alt:{type:String,required:!0},size:{type:String,default:"xxl"},borderRadius:{type:String,default:""}},setup(r){function e(t,i){let n=t&&`avatar-${t}`,s=i&&`border-radius-${i}`;return`${n} ${s}`}return(t,i)=>(Yt(),lr("img",{class:$r(["avatar",e(r.size,r.borderRadius)]),src:r.image,alt:r.alt},null,10,vle))}},_le={class:"py-sm-7 py-5 position-relative"},yle={class:"container"},xle={class:"row"},ble={class:"col-12 mx-auto"},wle={class:"mt-n8 mt-md-n9 text-center"},Sle={class:"blur-shadow-avatar"},Tle={class:"row py-7"},Mle={class:"col-lg-7 col-md-7 z-index-2 position-relative px-md-2 px-sm-5 mx-auto"},Ale={class:"d-flex justify-content-between align-items-center mb-2"},Cle=ie("h3",{class:"mb-0"},"Michael Roven",-1),Ile={class:"d-block"},Ele=mt("Follow"),Dle=au('<div class="row mb-4"><div class="col-auto"><span class="h6 me-1">323</span><span>Posts</span></div><div class="col-auto"><span class="h6 me-1">3.5k</span><span>Followers</span></div><div class="col-auto"><span class="h6 me-1">260</span><span>Following</span></div></div><p class="text-lg mb-0"> Decisions: If you can\u2019t decide, the answer is no. If two equally difficult paths, choose the one more painful in the short term (pain avoidance is creating an illusion of equality). Choose the path that leaves you more equanimous. <br><a href="javascript:;" class="text-success icon-move-right">More about me <i class="fas fa-arrow-right text-sm ms-1"></i></a></p>',2),Ple={name:"AuthorProfile",setup(r){return en(()=>{Sv()}),(e,t)=>(Yt(),lr("section",_le,[ie("div",yle,[ie("div",xle,[ie("div",ble,[ie("div",wle,[ie("div",Sle,[Me(Zl,{size:"xxl",class:"shadow-xl position-relative z-index-2",image:zt(O8),alt:"Avatar"},null,8,["image"])])]),ie("div",Tle,[ie("div",Mle,[ie("div",Ale,[Cle,ie("div",Ile,[Me(Lr,{class:"text-nowrap mb-0",variant:"outline",color:"success",size:"sm"},{default:Xe(()=>[Ele]),_:1})])]),Dle])])])])])]))}},Lle={class:"card card-plain"},kle={class:"card-header p-0 position-relative"},Rle={class:"d-block blur-shadow-image"},Ole=["src","alt"],zle={class:"card-body px-0"},Ble=["href"],Fle=["href"],Nle=ie("i",{class:"fas fa-arrow-right text-xs ms-1"},null,-1),VA={name:"TransparentBlogCard",props:{image:{type:String,required:!0},title:{type:String,required:!0},description:{type:String,required:!0},action:{type:Object,route:String,color:String,label:String,default:()=>({route:"javascript:;",color:"success",label:"Read more"})}},setup(r){return(e,t)=>(Yt(),lr("div",Lle,[ie("div",kle,[ie("a",Rle,[ie("img",{src:r.image,alt:r.title,class:"img-fluid shadow border-radius-lg",loading:"lazy"},null,8,Ole)])]),ie("div",zle,[ie("h5",null,[ie("a",{href:r.action.route,class:"text-dark font-weight-bold"},Pi(r.title),9,Ble)]),ie("p",null,Pi(r.description),1),ie("a",{href:r.action.route,class:$r(["text-sm icon-move-right",`text-${r.action.color}`])},[mt(Pi(r.action.label)+" ",1),Nle],10,Fle)])]))}},Vle={class:"card card-blog card-background cursor-pointer"},$le={class:"card-body"},Gle={class:"content-left text-start my-auto py-4"},Ule={class:"card-title text-white"},jle={class:"card-description text-white"},Hle=ie("i",{class:"fas fa-arrow-right text-xs ms-1"},null,-1),Wle={name:"BackgroundBlogCard",props:{image:{type:String,required:!0},title:{type:String,requierd:!0},description:{type:String,required:!0},action:{type:Object,route:String,label:String,color:String,default:()=>({route:"javascript:;",label:"Read more",color:"white"})}},setup(r){return(e,t)=>(Yt(),lr("div",Vle,[ie("div",{class:"full-background",style:bo({backgroundImage:`url(${r.image})`}),loading:"lazy"},null,4),ie("div",$le,[ie("div",Gle,[ie("h2",Ule,Pi(r.title),1),ie("p",jle,Pi(r.description),1),ie("a",{href:"javascript:;",class:$r(["text-sm icon-move-right",`text-${r.action.color}`])},[mt(Pi(r.action.label)+" ",1),Hle],2)])])]))}};var qle="/assets/testimonial-6-2.04ddfb8e.jpg",Zle="/assets/testimonial-6-3.4714eae5.jpg",Xle="/assets/blog-9-4.b058d197.jpg",B8="/assets/blog2.fe63ab0e.jpg";const Yle={class:"py-3"},Kle={class:"container"},Jle=ie("div",{class:"row"},[ie("div",{class:"col-lg-6"},[ie("h3",{class:"mb-5"},"Check my latest blogposts")])],-1),Qle={class:"row"},eue={class:"col-lg-3 col-sm-6"},tue={class:"col-lg-3 col-sm-6"},rue={class:"col-lg-3 col-sm-6"},iue={class:"col-lg-3 col-md-12 col-12"},nue={name:"AuthorPosts",setup(r){return(e,t)=>(Yt(),lr("section",Yle,[ie("div",Kle,[Jle,ie("div",Qle,[ie("div",eue,[Me(VA,{image:zt(qle),title:"Rover raised $65 million",description:"Finding temporary housing for your dog should be as easy as renting an Airbnb. That\u2019s the idea behind Rover ..."},null,8,["image"])]),ie("div",tue,[Me(VA,{image:zt(Zle),title:"MateLabs machine learning",description:"If you\u2019ve ever wanted to train a machine learning model and integrate it with IFTTT, you now can with ..."},null,8,["image"])]),ie("div",rue,[Me(VA,{image:zt(Xle),title:"MateLabs machine learning",description:"If you\u2019ve ever wanted to train a machine learning model and integrate it with IFTTT, you now can with ..."},null,8,["image"])]),ie("div",iue,[Me(Wle,{image:zt(B8),title:"Flexible work hours",description:"Rather than worrying about switching offices every couple years, you stay in the same place."},null,8,["image"])])])])]))}};function QP(r){var e=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));e.map(function(t){return new r.Tooltip(t)})}var F8={exports:{}},Bo="top",Bs="bottom",Fs="right",Fo="left",IT="auto",Tv=[Bo,Bs,Fs,Fo],Up="start",rv="end",N8="clippingParents",eL="viewport",Lg="popper",V8="reference",BE=Tv.reduce(function(r,e){return r.concat([e+"-"+Up,e+"-"+rv])},[]),tL=[].concat(Tv,[IT]).reduce(function(r,e){return r.concat([e,e+"-"+Up,e+"-"+rv])},[]),$8="beforeRead",G8="read",U8="afterRead",j8="beforeMain",H8="main",W8="afterMain",q8="beforeWrite",Z8="write",X8="afterWrite",Y8=[$8,G8,U8,j8,H8,W8,q8,Z8,X8];function rc(r){return r?(r.nodeName||"").toLowerCase():null}function ou(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function iv(r){var e=ou(r).Element;return r instanceof e||r instanceof Element}function vl(r){var e=ou(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function rL(r){if(typeof ShadowRoot=="undefined")return!1;var e=ou(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function aue(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},s=e.elements[t];!vl(s)||!rc(s)||(Object.assign(s.style,i),Object.keys(n).forEach(function(u){var a=n[u];a===!1?s.removeAttribute(u):s.setAttribute(u,a===!0?"":a)}))})}function oue(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var n=e.elements[i],s=e.attributes[i]||{},u=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),a=u.reduce(function(h,p){return h[p]="",h},{});!vl(n)||!rc(n)||(Object.assign(n.style,a),Object.keys(s).forEach(function(h){n.removeAttribute(h)}))})}}var iL={name:"applyStyles",enabled:!0,phase:"write",fn:aue,effect:oue,requires:["computeStyles"]};function Ku(r){return r.split("-")[0]}var Pp=Math.max,gS=Math.min,nv=Math.round;function av(r,e){e===void 0&&(e=!1);var t=r.getBoundingClientRect(),i=1,n=1;if(vl(r)&&e){var s=r.offsetHeight,u=r.offsetWidth;u>0&&(i=nv(t.width)/u||1),s>0&&(n=nv(t.height)/s||1)}return{width:t.width/i,height:t.height/n,top:t.top/n,right:t.right/i,bottom:t.bottom/n,left:t.left/i,x:t.left/i,y:t.top/n}}function nL(r){var e=av(r),t=r.offsetWidth,i=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:i}}function K8(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&rL(t)){var i=e;do{if(i&&r.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function nh(r){return ou(r).getComputedStyle(r)}function sue(r){return["table","td","th"].indexOf(rc(r))>=0}function Ud(r){return((iv(r)?r.ownerDocument:r.document)||window.document).documentElement}function ET(r){return rc(r)==="html"?r:r.assignedSlot||r.parentNode||(rL(r)?r.host:null)||Ud(r)}function qF(r){return!vl(r)||nh(r).position==="fixed"?null:r.offsetParent}function lue(r){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&vl(r)){var i=nh(r);if(i.position==="fixed")return null}var n=ET(r);for(rL(n)&&(n=n.host);vl(n)&&["html","body"].indexOf(rc(n))<0;){var s=nh(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function hx(r){for(var e=ou(r),t=qF(r);t&&sue(t)&&nh(t).position==="static";)t=qF(t);return t&&(rc(t)==="html"||rc(t)==="body"&&nh(t).position==="static")?e:t||lue(r)||e}function aL(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function c0(r,e,t){return Pp(r,gS(e,t))}function uue(r,e,t){var i=c0(r,e,t);return i>t?t:i}function J8(){return{top:0,right:0,bottom:0,left:0}}function Q8(r){return Object.assign({},J8(),r)}function ej(r,e){return e.reduce(function(t,i){return t[i]=r,t},{})}var cue=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Q8(typeof e!="number"?e:ej(e,Tv))};function hue(r){var e,t=r.state,i=r.name,n=r.options,s=t.elements.arrow,u=t.modifiersData.popperOffsets,a=Ku(t.placement),h=aL(a),p=[Fo,Fs].indexOf(a)>=0,m=p?"height":"width";if(!(!s||!u)){var v=cue(n.padding,t),x=nL(s),w=h==="y"?Bo:Fo,T=h==="y"?Bs:Fs,C=t.rects.reference[m]+t.rects.reference[h]-u[h]-t.rects.popper[m],I=u[h]-t.rects.reference[h],k=hx(s),R=k?h==="y"?k.clientHeight||0:k.clientWidth||0:0,z=C/2-I/2,$=v[w],j=R-x[m]-v[T],G=R/2-x[m]/2+z,Y=c0($,G,j),Z=h;t.modifiersData[i]=(e={},e[Z]=Y,e.centerOffset=Y-G,e)}}function due(r){var e=r.state,t=r.options,i=t.element,n=i===void 0?"[data-popper-arrow]":i;n!=null&&(typeof n=="string"&&(n=e.elements.popper.querySelector(n),!n)||!K8(e.elements.popper,n)||(e.elements.arrow=n))}var tj={name:"arrow",enabled:!0,phase:"main",fn:hue,effect:due,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ov(r){return r.split("-")[1]}var fue={top:"auto",right:"auto",bottom:"auto",left:"auto"};function pue(r){var e=r.x,t=r.y,i=window,n=i.devicePixelRatio||1;return{x:nv(e*n)/n||0,y:nv(t*n)/n||0}}function ZF(r){var e,t=r.popper,i=r.popperRect,n=r.placement,s=r.variation,u=r.offsets,a=r.position,h=r.gpuAcceleration,p=r.adaptive,m=r.roundOffsets,v=r.isFixed,x=u.x,w=x===void 0?0:x,T=u.y,C=T===void 0?0:T,I=typeof m=="function"?m({x:w,y:C}):{x:w,y:C};w=I.x,C=I.y;var k=u.hasOwnProperty("x"),R=u.hasOwnProperty("y"),z=Fo,$=Bo,j=window;if(p){var G=hx(t),Y="clientHeight",Z="clientWidth";if(G===ou(t)&&(G=Ud(t),nh(G).position!=="static"&&a==="absolute"&&(Y="scrollHeight",Z="scrollWidth")),G=G,n===Bo||(n===Fo||n===Fs)&&s===rv){$=Bs;var H=v&&G===j&&j.visualViewport?j.visualViewport.height:G[Y];C-=H-i.height,C*=h?1:-1}if(n===Fo||(n===Bo||n===Bs)&&s===rv){z=Fs;var re=v&&G===j&&j.visualViewport?j.visualViewport.width:G[Z];w-=re-i.width,w*=h?1:-1}}var ne=Object.assign({position:a},p&&fue),se=m===!0?pue({x:w,y:C}):{x:w,y:C};if(w=se.x,C=se.y,h){var me;return Object.assign({},ne,(me={},me[$]=R?"0":"",me[z]=k?"0":"",me.transform=(j.devicePixelRatio||1)<=1?"translate("+w+"px, "+C+"px)":"translate3d("+w+"px, "+C+"px, 0)",me))}return Object.assign({},ne,(e={},e[$]=R?C+"px":"",e[z]=k?w+"px":"",e.transform="",e))}function mue(r){var e=r.state,t=r.options,i=t.gpuAcceleration,n=i===void 0?!0:i,s=t.adaptive,u=s===void 0?!0:s,a=t.roundOffsets,h=a===void 0?!0:a,p={placement:Ku(e.placement),variation:ov(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ZF(Object.assign({},p,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:u,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ZF(Object.assign({},p,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var oL={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:mue,data:{}},Db={passive:!0};function gue(r){var e=r.state,t=r.instance,i=r.options,n=i.scroll,s=n===void 0?!0:n,u=i.resize,a=u===void 0?!0:u,h=ou(e.elements.popper),p=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&p.forEach(function(m){m.addEventListener("scroll",t.update,Db)}),a&&h.addEventListener("resize",t.update,Db),function(){s&&p.forEach(function(m){m.removeEventListener("scroll",t.update,Db)}),a&&h.removeEventListener("resize",t.update,Db)}}var sL={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:gue,data:{}},vue={left:"right",right:"left",bottom:"top",top:"bottom"};function Nw(r){return r.replace(/left|right|bottom|top/g,function(e){return vue[e]})}var _ue={start:"end",end:"start"};function XF(r){return r.replace(/start|end/g,function(e){return _ue[e]})}function lL(r){var e=ou(r),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function uL(r){return av(Ud(r)).left+lL(r).scrollLeft}function yue(r){var e=ou(r),t=Ud(r),i=e.visualViewport,n=t.clientWidth,s=t.clientHeight,u=0,a=0;return i&&(n=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(u=i.offsetLeft,a=i.offsetTop)),{width:n,height:s,x:u+uL(r),y:a}}function xue(r){var e,t=Ud(r),i=lL(r),n=(e=r.ownerDocument)==null?void 0:e.body,s=Pp(t.scrollWidth,t.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),u=Pp(t.scrollHeight,t.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-i.scrollLeft+uL(r),h=-i.scrollTop;return nh(n||t).direction==="rtl"&&(a+=Pp(t.clientWidth,n?n.clientWidth:0)-s),{width:s,height:u,x:a,y:h}}function cL(r){var e=nh(r),t=e.overflow,i=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+n+i)}function rj(r){return["html","body","#document"].indexOf(rc(r))>=0?r.ownerDocument.body:vl(r)&&cL(r)?r:rj(ET(r))}function h0(r,e){var t;e===void 0&&(e=[]);var i=rj(r),n=i===((t=r.ownerDocument)==null?void 0:t.body),s=ou(i),u=n?[s].concat(s.visualViewport||[],cL(i)?i:[]):i,a=e.concat(u);return n?a:a.concat(h0(ET(u)))}function FE(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function bue(r){var e=av(r);return e.top=e.top+r.clientTop,e.left=e.left+r.clientLeft,e.bottom=e.top+r.clientHeight,e.right=e.left+r.clientWidth,e.width=r.clientWidth,e.height=r.clientHeight,e.x=e.left,e.y=e.top,e}function YF(r,e){return e===eL?FE(yue(r)):iv(e)?bue(e):FE(xue(Ud(r)))}function wue(r){var e=h0(ET(r)),t=["absolute","fixed"].indexOf(nh(r).position)>=0,i=t&&vl(r)?hx(r):r;return iv(i)?e.filter(function(n){return iv(n)&&K8(n,i)&&rc(n)!=="body"}):[]}function Sue(r,e,t){var i=e==="clippingParents"?wue(r):[].concat(e),n=[].concat(i,[t]),s=n[0],u=n.reduce(function(a,h){var p=YF(r,h);return a.top=Pp(p.top,a.top),a.right=gS(p.right,a.right),a.bottom=gS(p.bottom,a.bottom),a.left=Pp(p.left,a.left),a},YF(r,s));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function ij(r){var e=r.reference,t=r.element,i=r.placement,n=i?Ku(i):null,s=i?ov(i):null,u=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,h;switch(n){case Bo:h={x:u,y:e.y-t.height};break;case Bs:h={x:u,y:e.y+e.height};break;case Fs:h={x:e.x+e.width,y:a};break;case Fo:h={x:e.x-t.width,y:a};break;default:h={x:e.x,y:e.y}}var p=n?aL(n):null;if(p!=null){var m=p==="y"?"height":"width";switch(s){case Up:h[p]=h[p]-(e[m]/2-t[m]/2);break;case rv:h[p]=h[p]+(e[m]/2-t[m]/2);break}}return h}function sv(r,e){e===void 0&&(e={});var t=e,i=t.placement,n=i===void 0?r.placement:i,s=t.boundary,u=s===void 0?N8:s,a=t.rootBoundary,h=a===void 0?eL:a,p=t.elementContext,m=p===void 0?Lg:p,v=t.altBoundary,x=v===void 0?!1:v,w=t.padding,T=w===void 0?0:w,C=Q8(typeof T!="number"?T:ej(T,Tv)),I=m===Lg?V8:Lg,k=r.rects.popper,R=r.elements[x?I:m],z=Sue(iv(R)?R:R.contextElement||Ud(r.elements.popper),u,h),$=av(r.elements.reference),j=ij({reference:$,element:k,strategy:"absolute",placement:n}),G=FE(Object.assign({},k,j)),Y=m===Lg?G:$,Z={top:z.top-Y.top+C.top,bottom:Y.bottom-z.bottom+C.bottom,left:z.left-Y.left+C.left,right:Y.right-z.right+C.right},H=r.modifiersData.offset;if(m===Lg&&H){var re=H[n];Object.keys(Z).forEach(function(ne){var se=[Fs,Bs].indexOf(ne)>=0?1:-1,me=[Bo,Bs].indexOf(ne)>=0?"y":"x";Z[ne]+=re[me]*se})}return Z}function Tue(r,e){e===void 0&&(e={});var t=e,i=t.placement,n=t.boundary,s=t.rootBoundary,u=t.padding,a=t.flipVariations,h=t.allowedAutoPlacements,p=h===void 0?tL:h,m=ov(i),v=m?a?BE:BE.filter(function(T){return ov(T)===m}):Tv,x=v.filter(function(T){return p.indexOf(T)>=0});x.length===0&&(x=v);var w=x.reduce(function(T,C){return T[C]=sv(r,{placement:C,boundary:n,rootBoundary:s,padding:u})[Ku(C)],T},{});return Object.keys(w).sort(function(T,C){return w[T]-w[C]})}function Mue(r){if(Ku(r)===IT)return[];var e=Nw(r);return[XF(r),e,XF(e)]}function Aue(r){var e=r.state,t=r.options,i=r.name;if(!e.modifiersData[i]._skip){for(var n=t.mainAxis,s=n===void 0?!0:n,u=t.altAxis,a=u===void 0?!0:u,h=t.fallbackPlacements,p=t.padding,m=t.boundary,v=t.rootBoundary,x=t.altBoundary,w=t.flipVariations,T=w===void 0?!0:w,C=t.allowedAutoPlacements,I=e.options.placement,k=Ku(I),R=k===I,z=h||(R||!T?[Nw(I)]:Mue(I)),$=[I].concat(z).reduce(function($e,He){return $e.concat(Ku(He)===IT?Tue(e,{placement:He,boundary:m,rootBoundary:v,padding:p,flipVariations:T,allowedAutoPlacements:C}):He)},[]),j=e.rects.reference,G=e.rects.popper,Y=new Map,Z=!0,H=$[0],re=0;re<$.length;re++){var ne=$[re],se=Ku(ne),me=ov(ne)===Up,Se=[Bo,Bs].indexOf(se)>=0,Ie=Se?"width":"height",ke=sv(e,{placement:ne,boundary:m,rootBoundary:v,altBoundary:x,padding:p}),Fe=Se?me?Fs:Fo:me?Bs:Bo;j[Ie]>G[Ie]&&(Fe=Nw(Fe));var Ce=Nw(Fe),We=[];if(s&&We.push(ke[se]<=0),a&&We.push(ke[Fe]<=0,ke[Ce]<=0),We.every(function($e){return $e})){H=ne,Z=!1;break}Y.set(ne,We)}if(Z)for(var gt=T?3:1,St=function(He){var dt=$.find(function(nt){var vt=Y.get(nt);if(vt)return vt.slice(0,He).every(function(Pt){return Pt})});if(dt)return H=dt,"break"},et=gt;et>0;et--){var ht=St(et);if(ht==="break")break}e.placement!==H&&(e.modifiersData[i]._skip=!0,e.placement=H,e.reset=!0)}}var nj={name:"flip",enabled:!0,phase:"main",fn:Aue,requiresIfExists:["offset"],data:{_skip:!1}};function KF(r,e,t){return t===void 0&&(t={x:0,y:0}),{top:r.top-e.height-t.y,right:r.right-e.width+t.x,bottom:r.bottom-e.height+t.y,left:r.left-e.width-t.x}}function JF(r){return[Bo,Fs,Bs,Fo].some(function(e){return r[e]>=0})}function Cue(r){var e=r.state,t=r.name,i=e.rects.reference,n=e.rects.popper,s=e.modifiersData.preventOverflow,u=sv(e,{elementContext:"reference"}),a=sv(e,{altBoundary:!0}),h=KF(u,i),p=KF(a,n,s),m=JF(h),v=JF(p);e.modifiersData[t]={referenceClippingOffsets:h,popperEscapeOffsets:p,isReferenceHidden:m,hasPopperEscaped:v},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":v})}var aj={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Cue};function Iue(r,e,t){var i=Ku(r),n=[Fo,Bo].indexOf(i)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:r})):t,u=s[0],a=s[1];return u=u||0,a=(a||0)*n,[Fo,Fs].indexOf(i)>=0?{x:a,y:u}:{x:u,y:a}}function Eue(r){var e=r.state,t=r.options,i=r.name,n=t.offset,s=n===void 0?[0,0]:n,u=tL.reduce(function(m,v){return m[v]=Iue(v,e.rects,s),m},{}),a=u[e.placement],h=a.x,p=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=p),e.modifiersData[i]=u}var oj={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Eue};function Due(r){var e=r.state,t=r.name;e.modifiersData[t]=ij({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var hL={name:"popperOffsets",enabled:!0,phase:"read",fn:Due,data:{}};function Pue(r){return r==="x"?"y":"x"}function Lue(r){var e=r.state,t=r.options,i=r.name,n=t.mainAxis,s=n===void 0?!0:n,u=t.altAxis,a=u===void 0?!1:u,h=t.boundary,p=t.rootBoundary,m=t.altBoundary,v=t.padding,x=t.tether,w=x===void 0?!0:x,T=t.tetherOffset,C=T===void 0?0:T,I=sv(e,{boundary:h,rootBoundary:p,padding:v,altBoundary:m}),k=Ku(e.placement),R=ov(e.placement),z=!R,$=aL(k),j=Pue($),G=e.modifiersData.popperOffsets,Y=e.rects.reference,Z=e.rects.popper,H=typeof C=="function"?C(Object.assign({},e.rects,{placement:e.placement})):C,re=typeof H=="number"?{mainAxis:H,altAxis:H}:Object.assign({mainAxis:0,altAxis:0},H),ne=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,se={x:0,y:0};if(!!G){if(s){var me,Se=$==="y"?Bo:Fo,Ie=$==="y"?Bs:Fs,ke=$==="y"?"height":"width",Fe=G[$],Ce=Fe+I[Se],We=Fe-I[Ie],gt=w?-Z[ke]/2:0,St=R===Up?Y[ke]:Z[ke],et=R===Up?-Z[ke]:-Y[ke],ht=e.elements.arrow,$e=w&&ht?nL(ht):{width:0,height:0},He=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:J8(),dt=He[Se],nt=He[Ie],vt=c0(0,Y[ke],$e[ke]),Pt=z?Y[ke]/2-gt-vt-dt-re.mainAxis:St-vt-dt-re.mainAxis,jt=z?-Y[ke]/2+gt+vt+nt+re.mainAxis:et+vt+nt+re.mainAxis,Et=e.elements.arrow&&hx(e.elements.arrow),Wt=Et?$==="y"?Et.clientTop||0:Et.clientLeft||0:0,Re=(me=ne==null?void 0:ne[$])!=null?me:0,Ve=Fe+Pt-Re-Wt,Ue=Fe+jt-Re,Be=c0(w?gS(Ce,Ve):Ce,Fe,w?Pp(We,Ue):We);G[$]=Be,se[$]=Be-Fe}if(a){var ce,ye=$==="x"?Bo:Fo,De=$==="x"?Bs:Fs,qe=G[j],Ze=j==="y"?"height":"width",Je=qe+I[ye],xt=qe-I[De],ot=[Bo,Fo].indexOf(k)!==-1,bt=(ce=ne==null?void 0:ne[j])!=null?ce:0,qt=ot?Je:qe-Y[Ze]-Z[Ze]-bt+re.altAxis,Kt=ot?qe+Y[Ze]+Z[Ze]-bt-re.altAxis:xt,Cr=w&&ot?uue(qt,qe,Kt):c0(w?qt:Je,qe,w?Kt:xt);G[j]=Cr,se[j]=Cr-qe}e.modifiersData[i]=se}}var sj={name:"preventOverflow",enabled:!0,phase:"main",fn:Lue,requiresIfExists:["offset"]};function kue(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function Rue(r){return r===ou(r)||!vl(r)?lL(r):kue(r)}function Oue(r){var e=r.getBoundingClientRect(),t=nv(e.width)/r.offsetWidth||1,i=nv(e.height)/r.offsetHeight||1;return t!==1||i!==1}function zue(r,e,t){t===void 0&&(t=!1);var i=vl(e),n=vl(e)&&Oue(e),s=Ud(e),u=av(r,n),a={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(i||!i&&!t)&&((rc(e)!=="body"||cL(s))&&(a=Rue(e)),vl(e)?(h=av(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):s&&(h.x=uL(s))),{x:u.left+a.scrollLeft-h.x,y:u.top+a.scrollTop-h.y,width:u.width,height:u.height}}function Bue(r){var e=new Map,t=new Set,i=[];r.forEach(function(s){e.set(s.name,s)});function n(s){t.add(s.name);var u=[].concat(s.requires||[],s.requiresIfExists||[]);u.forEach(function(a){if(!t.has(a)){var h=e.get(a);h&&n(h)}}),i.push(s)}return r.forEach(function(s){t.has(s.name)||n(s)}),i}function Fue(r){var e=Bue(r);return Y8.reduce(function(t,i){return t.concat(e.filter(function(n){return n.phase===i}))},[])}function Nue(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}function Vue(r){var e=r.reduce(function(t,i){var n=t[i.name];return t[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var QF={placement:"bottom",modifiers:[],strategy:"absolute"};function e5(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function DT(r){r===void 0&&(r={});var e=r,t=e.defaultModifiers,i=t===void 0?[]:t,n=e.defaultOptions,s=n===void 0?QF:n;return function(a,h,p){p===void 0&&(p=s);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},QF,s),modifiersData:{},elements:{reference:a,popper:h},attributes:{},styles:{}},v=[],x=!1,w={state:m,setOptions:function(k){var R=typeof k=="function"?k(m.options):k;C(),m.options=Object.assign({},s,m.options,R),m.scrollParents={reference:iv(a)?h0(a):a.contextElement?h0(a.contextElement):[],popper:h0(h)};var z=Fue(Vue([].concat(i,m.options.modifiers)));return m.orderedModifiers=z.filter(function($){return $.enabled}),T(),w.update()},forceUpdate:function(){if(!x){var k=m.elements,R=k.reference,z=k.popper;if(!!e5(R,z)){m.rects={reference:zue(R,hx(z),m.options.strategy==="fixed"),popper:nL(z)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(re){return m.modifiersData[re.name]=Object.assign({},re.data)});for(var $=0;$<m.orderedModifiers.length;$++){if(m.reset===!0){m.reset=!1,$=-1;continue}var j=m.orderedModifiers[$],G=j.fn,Y=j.options,Z=Y===void 0?{}:Y,H=j.name;typeof G=="function"&&(m=G({state:m,options:Z,name:H,instance:w})||m)}}}},update:Nue(function(){return new Promise(function(I){w.forceUpdate(),I(m)})}),destroy:function(){C(),x=!0}};if(!e5(a,h))return w;w.setOptions(p).then(function(I){!x&&p.onFirstUpdate&&p.onFirstUpdate(I)});function T(){m.orderedModifiers.forEach(function(I){var k=I.name,R=I.options,z=R===void 0?{}:R,$=I.effect;if(typeof $=="function"){var j=$({state:m,name:k,instance:w,options:z}),G=function(){};v.push(j||G)}})}function C(){v.forEach(function(I){return I()}),v=[]}return w}}var $ue=DT(),Gue=[sL,hL,oL,iL],Uue=DT({defaultModifiers:Gue}),jue=[sL,hL,oL,iL,oj,nj,sj,tj,aj],Hue=DT({defaultModifiers:jue}),Wue=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:DT,detectOverflow:sv,createPopperBase:$ue,createPopper:Hue,createPopperLite:Uue,top:Bo,bottom:Bs,right:Fs,left:Fo,auto:IT,basePlacements:Tv,start:Up,end:rv,clippingParents:N8,viewport:eL,popper:Lg,reference:V8,variationPlacements:BE,placements:tL,beforeRead:$8,read:G8,afterRead:U8,beforeMain:j8,main:H8,afterMain:W8,beforeWrite:q8,write:Z8,afterWrite:X8,modifierPhases:Y8,applyStyles:iL,arrow:tj,computeStyles:oL,eventListeners:sL,flip:nj,hide:aj,offset:oj,popperOffsets:hL,preventOverflow:sj},Symbol.toStringTag,{value:"Module"})),que=toe(Wue);/*!
  * Bootstrap v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(r,e){(function(t,i){r.exports=i(que)})(Gp,function(t){function i(it){if(it&&it.__esModule)return it;const ee=Object.create(null);if(it){for(const ve in it)if(ve!=="default"){const Qe=Object.getOwnPropertyDescriptor(it,ve);Object.defineProperty(ee,ve,Qe.get?Qe:{enumerable:!0,get:()=>it[ve]})}}return ee.default=it,Object.freeze(ee)}const n=i(t),s="transitionend",u=it=>{let ee=it.getAttribute("data-bs-target");if(!ee||ee==="#"){let ve=it.getAttribute("href");if(!ve||!ve.includes("#")&&!ve.startsWith("."))return null;ve.includes("#")&&!ve.startsWith("#")&&(ve=`#${ve.split("#")[1]}`),ee=ve&&ve!=="#"?ve.trim():null}return ee},a=it=>{const ee=u(it);return ee&&document.querySelector(ee)?ee:null},h=it=>{const ee=u(it);return ee?document.querySelector(ee):null},p=it=>{it.dispatchEvent(new Event(s))},m=it=>!(!it||typeof it!="object")&&(it.jquery!==void 0&&(it=it[0]),it.nodeType!==void 0),v=it=>m(it)?it.jquery?it[0]:it:typeof it=="string"&&it.length>0?document.querySelector(it):null,x=(it,ee,ve)=>{Object.keys(ve).forEach(Qe=>{const yt=ve[Qe],Zt=ee[Qe],Sr=Zt&&m(Zt)?"element":(Jr=Zt)==null?`${Jr}`:{}.toString.call(Jr).match(/\s([a-z]+)/i)[1].toLowerCase();var Jr;if(!new RegExp(yt).test(Sr))throw new TypeError(`${it.toUpperCase()}: Option "${Qe}" provided type "${Sr}" but expected type "${yt}".`)})},w=it=>!(!m(it)||it.getClientRects().length===0)&&getComputedStyle(it).getPropertyValue("visibility")==="visible",T=it=>!it||it.nodeType!==Node.ELEMENT_NODE||!!it.classList.contains("disabled")||(it.disabled!==void 0?it.disabled:it.hasAttribute("disabled")&&it.getAttribute("disabled")!=="false"),C=it=>{if(!document.documentElement.attachShadow)return null;if(typeof it.getRootNode=="function"){const ee=it.getRootNode();return ee instanceof ShadowRoot?ee:null}return it instanceof ShadowRoot?it:it.parentNode?C(it.parentNode):null},I=()=>{},k=it=>{it.offsetHeight},R=()=>{const{jQuery:it}=window;return it&&!document.body.hasAttribute("data-bs-no-jquery")?it:null},z=[],$=()=>document.documentElement.dir==="rtl",j=it=>{var ee;ee=()=>{const ve=R();if(ve){const Qe=it.NAME,yt=ve.fn[Qe];ve.fn[Qe]=it.jQueryInterface,ve.fn[Qe].Constructor=it,ve.fn[Qe].noConflict=()=>(ve.fn[Qe]=yt,it.jQueryInterface)}},document.readyState==="loading"?(z.length||document.addEventListener("DOMContentLoaded",()=>{z.forEach(ve=>ve())}),z.push(ee)):ee()},G=it=>{typeof it=="function"&&it()},Y=(it,ee,ve=!0)=>{if(!ve)return void G(it);const Qe=(Sr=>{if(!Sr)return 0;let{transitionDuration:Jr,transitionDelay:Mi}=window.getComputedStyle(Sr);const Xn=Number.parseFloat(Jr),_n=Number.parseFloat(Mi);return Xn||_n?(Jr=Jr.split(",")[0],Mi=Mi.split(",")[0],1e3*(Number.parseFloat(Jr)+Number.parseFloat(Mi))):0})(ee)+5;let yt=!1;const Zt=({target:Sr})=>{Sr===ee&&(yt=!0,ee.removeEventListener(s,Zt),G(it))};ee.addEventListener(s,Zt),setTimeout(()=>{yt||p(ee)},Qe)},Z=(it,ee,ve,Qe)=>{let yt=it.indexOf(ee);if(yt===-1)return it[!ve&&Qe?it.length-1:0];const Zt=it.length;return yt+=ve?1:-1,Qe&&(yt=(yt+Zt)%Zt),it[Math.max(0,Math.min(yt,Zt-1))]},H=/[^.]*(?=\..*)\.|.*/,re=/\..*/,ne=/::\d+$/,se={};let me=1;const Se={mouseenter:"mouseover",mouseleave:"mouseout"},Ie=/^(mouseenter|mouseleave)/i,ke=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Fe(it,ee){return ee&&`${ee}::${me++}`||it.uidEvent||me++}function Ce(it){const ee=Fe(it);return it.uidEvent=ee,se[ee]=se[ee]||{},se[ee]}function We(it,ee,ve=null){const Qe=Object.keys(it);for(let yt=0,Zt=Qe.length;yt<Zt;yt++){const Sr=it[Qe[yt]];if(Sr.originalHandler===ee&&Sr.delegationSelector===ve)return Sr}return null}function gt(it,ee,ve){const Qe=typeof ee=="string",yt=Qe?ve:ee;let Zt=ht(it);return ke.has(Zt)||(Zt=it),[Qe,yt,Zt]}function St(it,ee,ve,Qe,yt){if(typeof ee!="string"||!it)return;if(ve||(ve=Qe,Qe=null),Ie.test(ee)){const Or=co=>function(Wa){if(!Wa.relatedTarget||Wa.relatedTarget!==Wa.delegateTarget&&!Wa.delegateTarget.contains(Wa.relatedTarget))return co.call(this,Wa)};Qe?Qe=Or(Qe):ve=Or(ve)}const[Zt,Sr,Jr]=gt(ee,ve,Qe),Mi=Ce(it),Xn=Mi[Jr]||(Mi[Jr]={}),_n=We(Xn,Sr,Zt?ve:null);if(_n)return void(_n.oneOff=_n.oneOff&&yt);const Zi=Fe(Sr,ee.replace(H,"")),Pn=Zt?function(Or,co,Wa){return function js(_s){const vc=Or.querySelectorAll(co);for(let{target:Wo}=_s;Wo&&Wo!==this;Wo=Wo.parentNode)for(let Th=vc.length;Th--;)if(vc[Th]===Wo)return _s.delegateTarget=Wo,js.oneOff&&$e.off(Or,_s.type,co,Wa),Wa.apply(Wo,[_s]);return null}}(it,ve,Qe):function(Or,co){return function Wa(js){return js.delegateTarget=Or,Wa.oneOff&&$e.off(Or,js.type,co),co.apply(Or,[js])}}(it,ve);Pn.delegationSelector=Zt?ve:null,Pn.originalHandler=Sr,Pn.oneOff=yt,Pn.uidEvent=Zi,Xn[Zi]=Pn,it.addEventListener(Jr,Pn,Zt)}function et(it,ee,ve,Qe,yt){const Zt=We(ee[ve],Qe,yt);Zt&&(it.removeEventListener(ve,Zt,Boolean(yt)),delete ee[ve][Zt.uidEvent])}function ht(it){return it=it.replace(re,""),Se[it]||it}const $e={on(it,ee,ve,Qe){St(it,ee,ve,Qe,!1)},one(it,ee,ve,Qe){St(it,ee,ve,Qe,!0)},off(it,ee,ve,Qe){if(typeof ee!="string"||!it)return;const[yt,Zt,Sr]=gt(ee,ve,Qe),Jr=Sr!==ee,Mi=Ce(it),Xn=ee.startsWith(".");if(Zt!==void 0)return!Mi||!Mi[Sr]?void 0:void et(it,Mi,Sr,Zt,yt?ve:null);Xn&&Object.keys(Mi).forEach(Zi=>{(function(Pn,Or,co,Wa){const js=Or[co]||{};Object.keys(js).forEach(_s=>{if(_s.includes(Wa)){const vc=js[_s];et(Pn,Or,co,vc.originalHandler,vc.delegationSelector)}})})(it,Mi,Zi,ee.slice(1))});const _n=Mi[Sr]||{};Object.keys(_n).forEach(Zi=>{const Pn=Zi.replace(ne,"");if(!Jr||ee.includes(Pn)){const Or=_n[Zi];et(it,Mi,Sr,Or.originalHandler,Or.delegationSelector)}})},trigger(it,ee,ve){if(typeof ee!="string"||!it)return null;const Qe=R(),yt=ht(ee),Zt=ee!==yt,Sr=ke.has(yt);let Jr,Mi=!0,Xn=!0,_n=!1,Zi=null;return Zt&&Qe&&(Jr=Qe.Event(ee,ve),Qe(it).trigger(Jr),Mi=!Jr.isPropagationStopped(),Xn=!Jr.isImmediatePropagationStopped(),_n=Jr.isDefaultPrevented()),Sr?(Zi=document.createEvent("HTMLEvents"),Zi.initEvent(yt,Mi,!0)):Zi=new CustomEvent(ee,{bubbles:Mi,cancelable:!0}),ve!==void 0&&Object.keys(ve).forEach(Pn=>{Object.defineProperty(Zi,Pn,{get:()=>ve[Pn]})}),_n&&Zi.preventDefault(),Xn&&it.dispatchEvent(Zi),Zi.defaultPrevented&&Jr!==void 0&&Jr.preventDefault(),Zi}},He=new Map,dt={set(it,ee,ve){He.has(it)||He.set(it,new Map);const Qe=He.get(it);Qe.has(ee)||Qe.size===0?Qe.set(ee,ve):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(Qe.keys())[0]}.`)},get:(it,ee)=>He.has(it)&&He.get(it).get(ee)||null,remove(it,ee){if(!He.has(it))return;const ve=He.get(it);ve.delete(ee),ve.size===0&&He.delete(it)}};class nt{constructor(ee){(ee=v(ee))&&(this._element=ee,dt.set(this._element,this.constructor.DATA_KEY,this))}dispose(){dt.remove(this._element,this.constructor.DATA_KEY),$e.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(ee=>{this[ee]=null})}_queueCallback(ee,ve,Qe=!0){Y(ee,ve,Qe)}static getInstance(ee){return dt.get(v(ee),this.DATA_KEY)}static getOrCreateInstance(ee,ve={}){return this.getInstance(ee)||new this(ee,typeof ve=="object"?ve:null)}static get VERSION(){return"5.1.3"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const vt=(it,ee="hide")=>{const ve=`click.dismiss${it.EVENT_KEY}`,Qe=it.NAME;$e.on(document,ve,`[data-bs-dismiss="${Qe}"]`,function(yt){if(["A","AREA"].includes(this.tagName)&&yt.preventDefault(),T(this))return;const Zt=h(this)||this.closest(`.${Qe}`);it.getOrCreateInstance(Zt)[ee]()})};class Pt extends nt{static get NAME(){return"alert"}close(){if($e.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const ee=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,ee)}_destroyElement(){this._element.remove(),$e.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(ee){return this.each(function(){const ve=Pt.getOrCreateInstance(this);if(typeof ee=="string"){if(ve[ee]===void 0||ee.startsWith("_")||ee==="constructor")throw new TypeError(`No method named "${ee}"`);ve[ee](this)}})}}vt(Pt,"close"),j(Pt);const jt='[data-bs-toggle="button"]';class Et extends nt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(ee){return this.each(function(){const ve=Et.getOrCreateInstance(this);ee==="toggle"&&ve[ee]()})}}function Wt(it){return it==="true"||it!=="false"&&(it===Number(it).toString()?Number(it):it===""||it==="null"?null:it)}function Re(it){return it.replace(/[A-Z]/g,ee=>`-${ee.toLowerCase()}`)}$e.on(document,"click.bs.button.data-api",jt,it=>{it.preventDefault();const ee=it.target.closest(jt);Et.getOrCreateInstance(ee).toggle()}),j(Et);const Ve={setDataAttribute(it,ee,ve){it.setAttribute(`data-bs-${Re(ee)}`,ve)},removeDataAttribute(it,ee){it.removeAttribute(`data-bs-${Re(ee)}`)},getDataAttributes(it){if(!it)return{};const ee={};return Object.keys(it.dataset).filter(ve=>ve.startsWith("bs")).forEach(ve=>{let Qe=ve.replace(/^bs/,"");Qe=Qe.charAt(0).toLowerCase()+Qe.slice(1,Qe.length),ee[Qe]=Wt(it.dataset[ve])}),ee},getDataAttribute:(it,ee)=>Wt(it.getAttribute(`data-bs-${Re(ee)}`)),offset(it){const ee=it.getBoundingClientRect();return{top:ee.top+window.pageYOffset,left:ee.left+window.pageXOffset}},position:it=>({top:it.offsetTop,left:it.offsetLeft})},Ue={find:(it,ee=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(ee,it)),findOne:(it,ee=document.documentElement)=>Element.prototype.querySelector.call(ee,it),children:(it,ee)=>[].concat(...it.children).filter(ve=>ve.matches(ee)),parents(it,ee){const ve=[];let Qe=it.parentNode;for(;Qe&&Qe.nodeType===Node.ELEMENT_NODE&&Qe.nodeType!==3;)Qe.matches(ee)&&ve.push(Qe),Qe=Qe.parentNode;return ve},prev(it,ee){let ve=it.previousElementSibling;for(;ve;){if(ve.matches(ee))return[ve];ve=ve.previousElementSibling}return[]},next(it,ee){let ve=it.nextElementSibling;for(;ve;){if(ve.matches(ee))return[ve];ve=ve.nextElementSibling}return[]},focusableChildren(it){const ee=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(ve=>`${ve}:not([tabindex^="-"])`).join(", ");return this.find(ee,it).filter(ve=>!T(ve)&&w(ve))}},Be="carousel",ce={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},ye={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},De="next",qe="prev",Ze="left",Je="right",xt={ArrowLeft:Je,ArrowRight:Ze},ot="slid.bs.carousel",bt="active",qt=".active.carousel-item";class Kt extends nt{constructor(ee,ve){super(ee),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(ve),this._indicatorsElement=Ue.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return ce}static get NAME(){return Be}next(){this._slide(De)}nextWhenVisible(){!document.hidden&&w(this._element)&&this.next()}prev(){this._slide(qe)}pause(ee){ee||(this._isPaused=!0),Ue.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(p(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(ee){ee||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(ee){this._activeElement=Ue.findOne(qt,this._element);const ve=this._getItemIndex(this._activeElement);if(ee>this._items.length-1||ee<0)return;if(this._isSliding)return void $e.one(this._element,ot,()=>this.to(ee));if(ve===ee)return this.pause(),void this.cycle();const Qe=ee>ve?De:qe;this._slide(Qe,this._items[ee])}_getConfig(ee){return ee={...ce,...Ve.getDataAttributes(this._element),...typeof ee=="object"?ee:{}},x(Be,ee,ye),ee}_handleSwipe(){const ee=Math.abs(this.touchDeltaX);if(ee<=40)return;const ve=ee/this.touchDeltaX;this.touchDeltaX=0,ve&&this._slide(ve>0?Je:Ze)}_addEventListeners(){this._config.keyboard&&$e.on(this._element,"keydown.bs.carousel",ee=>this._keydown(ee)),this._config.pause==="hover"&&($e.on(this._element,"mouseenter.bs.carousel",ee=>this.pause(ee)),$e.on(this._element,"mouseleave.bs.carousel",ee=>this.cycle(ee))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const ee=Zt=>this._pointerEvent&&(Zt.pointerType==="pen"||Zt.pointerType==="touch"),ve=Zt=>{ee(Zt)?this.touchStartX=Zt.clientX:this._pointerEvent||(this.touchStartX=Zt.touches[0].clientX)},Qe=Zt=>{this.touchDeltaX=Zt.touches&&Zt.touches.length>1?0:Zt.touches[0].clientX-this.touchStartX},yt=Zt=>{ee(Zt)&&(this.touchDeltaX=Zt.clientX-this.touchStartX),this._handleSwipe(),this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(Sr=>this.cycle(Sr),500+this._config.interval))};Ue.find(".carousel-item img",this._element).forEach(Zt=>{$e.on(Zt,"dragstart.bs.carousel",Sr=>Sr.preventDefault())}),this._pointerEvent?($e.on(this._element,"pointerdown.bs.carousel",Zt=>ve(Zt)),$e.on(this._element,"pointerup.bs.carousel",Zt=>yt(Zt)),this._element.classList.add("pointer-event")):($e.on(this._element,"touchstart.bs.carousel",Zt=>ve(Zt)),$e.on(this._element,"touchmove.bs.carousel",Zt=>Qe(Zt)),$e.on(this._element,"touchend.bs.carousel",Zt=>yt(Zt)))}_keydown(ee){if(/input|textarea/i.test(ee.target.tagName))return;const ve=xt[ee.key];ve&&(ee.preventDefault(),this._slide(ve))}_getItemIndex(ee){return this._items=ee&&ee.parentNode?Ue.find(".carousel-item",ee.parentNode):[],this._items.indexOf(ee)}_getItemByOrder(ee,ve){const Qe=ee===De;return Z(this._items,ve,Qe,this._config.wrap)}_triggerSlideEvent(ee,ve){const Qe=this._getItemIndex(ee),yt=this._getItemIndex(Ue.findOne(qt,this._element));return $e.trigger(this._element,"slide.bs.carousel",{relatedTarget:ee,direction:ve,from:yt,to:Qe})}_setActiveIndicatorElement(ee){if(this._indicatorsElement){const ve=Ue.findOne(".active",this._indicatorsElement);ve.classList.remove(bt),ve.removeAttribute("aria-current");const Qe=Ue.find("[data-bs-target]",this._indicatorsElement);for(let yt=0;yt<Qe.length;yt++)if(Number.parseInt(Qe[yt].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(ee)){Qe[yt].classList.add(bt),Qe[yt].setAttribute("aria-current","true");break}}}_updateInterval(){const ee=this._activeElement||Ue.findOne(qt,this._element);if(!ee)return;const ve=Number.parseInt(ee.getAttribute("data-bs-interval"),10);ve?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=ve):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(ee,ve){const Qe=this._directionToOrder(ee),yt=Ue.findOne(qt,this._element),Zt=this._getItemIndex(yt),Sr=ve||this._getItemByOrder(Qe,yt),Jr=this._getItemIndex(Sr),Mi=Boolean(this._interval),Xn=Qe===De,_n=Xn?"carousel-item-start":"carousel-item-end",Zi=Xn?"carousel-item-next":"carousel-item-prev",Pn=this._orderToDirection(Qe);if(Sr&&Sr.classList.contains(bt))return void(this._isSliding=!1);if(this._isSliding||this._triggerSlideEvent(Sr,Pn).defaultPrevented||!yt||!Sr)return;this._isSliding=!0,Mi&&this.pause(),this._setActiveIndicatorElement(Sr),this._activeElement=Sr;const Or=()=>{$e.trigger(this._element,ot,{relatedTarget:Sr,direction:Pn,from:Zt,to:Jr})};if(this._element.classList.contains("slide")){Sr.classList.add(Zi),k(Sr),yt.classList.add(_n),Sr.classList.add(_n);const co=()=>{Sr.classList.remove(_n,Zi),Sr.classList.add(bt),yt.classList.remove(bt,Zi,_n),this._isSliding=!1,setTimeout(Or,0)};this._queueCallback(co,yt,!0)}else yt.classList.remove(bt),Sr.classList.add(bt),this._isSliding=!1,Or();Mi&&this.cycle()}_directionToOrder(ee){return[Je,Ze].includes(ee)?$()?ee===Ze?qe:De:ee===Ze?De:qe:ee}_orderToDirection(ee){return[De,qe].includes(ee)?$()?ee===qe?Ze:Je:ee===qe?Je:Ze:ee}static carouselInterface(ee,ve){const Qe=Kt.getOrCreateInstance(ee,ve);let{_config:yt}=Qe;typeof ve=="object"&&(yt={...yt,...ve});const Zt=typeof ve=="string"?ve:yt.slide;if(typeof ve=="number")Qe.to(ve);else if(typeof Zt=="string"){if(Qe[Zt]===void 0)throw new TypeError(`No method named "${Zt}"`);Qe[Zt]()}else yt.interval&&yt.ride&&(Qe.pause(),Qe.cycle())}static jQueryInterface(ee){return this.each(function(){Kt.carouselInterface(this,ee)})}static dataApiClickHandler(ee){const ve=h(this);if(!ve||!ve.classList.contains("carousel"))return;const Qe={...Ve.getDataAttributes(ve),...Ve.getDataAttributes(this)},yt=this.getAttribute("data-bs-slide-to");yt&&(Qe.interval=!1),Kt.carouselInterface(ve,Qe),yt&&Kt.getInstance(ve).to(yt),ee.preventDefault()}}$e.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",Kt.dataApiClickHandler),$e.on(window,"load.bs.carousel.data-api",()=>{const it=Ue.find('[data-bs-ride="carousel"]');for(let ee=0,ve=it.length;ee<ve;ee++)Kt.carouselInterface(it[ee],Kt.getInstance(it[ee]))}),j(Kt);const Cr="collapse",Rr={toggle:!0,parent:null},Ur={toggle:"boolean",parent:"(null|element)"},Kr="show",ei="collapse",fi="collapsing",Ti="collapsed",wn=":scope .collapse .collapse",Ki='[data-bs-toggle="collapse"]';class Ji extends nt{constructor(ee,ve){super(ee),this._isTransitioning=!1,this._config=this._getConfig(ve),this._triggerArray=[];const Qe=Ue.find(Ki);for(let yt=0,Zt=Qe.length;yt<Zt;yt++){const Sr=Qe[yt],Jr=a(Sr),Mi=Ue.find(Jr).filter(Xn=>Xn===this._element);Jr!==null&&Mi.length&&(this._selector=Jr,this._triggerArray.push(Sr))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Rr}static get NAME(){return Cr}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let ee,ve=[];if(this._config.parent){const Sr=Ue.find(wn,this._config.parent);ve=Ue.find(".collapse.show, .collapse.collapsing",this._config.parent).filter(Jr=>!Sr.includes(Jr))}const Qe=Ue.findOne(this._selector);if(ve.length){const Sr=ve.find(Jr=>Qe!==Jr);if(ee=Sr?Ji.getInstance(Sr):null,ee&&ee._isTransitioning)return}if($e.trigger(this._element,"show.bs.collapse").defaultPrevented)return;ve.forEach(Sr=>{Qe!==Sr&&Ji.getOrCreateInstance(Sr,{toggle:!1}).hide(),ee||dt.set(Sr,"bs.collapse",null)});const yt=this._getDimension();this._element.classList.remove(ei),this._element.classList.add(fi),this._element.style[yt]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const Zt=`scroll${yt[0].toUpperCase()+yt.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(fi),this._element.classList.add(ei,Kr),this._element.style[yt]="",$e.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[yt]=`${this._element[Zt]}px`}hide(){if(this._isTransitioning||!this._isShown()||$e.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const ee=this._getDimension();this._element.style[ee]=`${this._element.getBoundingClientRect()[ee]}px`,k(this._element),this._element.classList.add(fi),this._element.classList.remove(ei,Kr);const ve=this._triggerArray.length;for(let Qe=0;Qe<ve;Qe++){const yt=this._triggerArray[Qe],Zt=h(yt);Zt&&!this._isShown(Zt)&&this._addAriaAndCollapsedClass([yt],!1)}this._isTransitioning=!0,this._element.style[ee]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(fi),this._element.classList.add(ei),$e.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(ee=this._element){return ee.classList.contains(Kr)}_getConfig(ee){return(ee={...Rr,...Ve.getDataAttributes(this._element),...ee}).toggle=Boolean(ee.toggle),ee.parent=v(ee.parent),x(Cr,ee,Ur),ee}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const ee=Ue.find(wn,this._config.parent);Ue.find(Ki,this._config.parent).filter(ve=>!ee.includes(ve)).forEach(ve=>{const Qe=h(ve);Qe&&this._addAriaAndCollapsedClass([ve],this._isShown(Qe))})}_addAriaAndCollapsedClass(ee,ve){ee.length&&ee.forEach(Qe=>{ve?Qe.classList.remove(Ti):Qe.classList.add(Ti),Qe.setAttribute("aria-expanded",ve)})}static jQueryInterface(ee){return this.each(function(){const ve={};typeof ee=="string"&&/show|hide/.test(ee)&&(ve.toggle=!1);const Qe=Ji.getOrCreateInstance(this,ve);if(typeof ee=="string"){if(Qe[ee]===void 0)throw new TypeError(`No method named "${ee}"`);Qe[ee]()}})}}$e.on(document,"click.bs.collapse.data-api",Ki,function(it){(it.target.tagName==="A"||it.delegateTarget&&it.delegateTarget.tagName==="A")&&it.preventDefault();const ee=a(this);Ue.find(ee).forEach(ve=>{Ji.getOrCreateInstance(ve,{toggle:!1}).toggle()})}),j(Ji);const za="dropdown",qn="Escape",Go="Space",fs="ArrowUp",Zn="ArrowDown",At=new RegExp("ArrowUp|ArrowDown|Escape"),Lt="click.bs.dropdown.data-api",Vt="keydown.bs.dropdown.data-api",Gt="show",Xt='[data-bs-toggle="dropdown"]',ir=".dropdown-menu",ar=$()?"top-end":"top-start",er=$()?"top-start":"top-end",pr=$()?"bottom-end":"bottom-start",Jt=$()?"bottom-start":"bottom-end",jr=$()?"left-start":"right-start",Ai=$()?"right-start":"left-start",Tr={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},Ri={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class Ci extends nt{constructor(ee,ve){super(ee),this._popper=null,this._config=this._getConfig(ve),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return Tr}static get DefaultType(){return Ri}static get NAME(){return za}toggle(){return this._isShown()?this.hide():this.show()}show(){if(T(this._element)||this._isShown(this._menu))return;const ee={relatedTarget:this._element};if($e.trigger(this._element,"show.bs.dropdown",ee).defaultPrevented)return;const ve=Ci.getParentFromElement(this._element);this._inNavbar?Ve.setDataAttribute(this._menu,"popper","none"):this._createPopper(ve),"ontouchstart"in document.documentElement&&!ve.closest(".navbar-nav")&&[].concat(...document.body.children).forEach(Qe=>$e.on(Qe,"mouseover",I)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Gt),this._element.classList.add(Gt),$e.trigger(this._element,"shown.bs.dropdown",ee)}hide(){if(T(this._element)||!this._isShown(this._menu))return;const ee={relatedTarget:this._element};this._completeHide(ee)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(ee){$e.trigger(this._element,"hide.bs.dropdown",ee).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(ve=>$e.off(ve,"mouseover",I)),this._popper&&this._popper.destroy(),this._menu.classList.remove(Gt),this._element.classList.remove(Gt),this._element.setAttribute("aria-expanded","false"),Ve.removeDataAttribute(this._menu,"popper"),$e.trigger(this._element,"hidden.bs.dropdown",ee))}_getConfig(ee){if(ee={...this.constructor.Default,...Ve.getDataAttributes(this._element),...ee},x(za,ee,this.constructor.DefaultType),typeof ee.reference=="object"&&!m(ee.reference)&&typeof ee.reference.getBoundingClientRect!="function")throw new TypeError(`${za.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return ee}_createPopper(ee){if(n===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let ve=this._element;this._config.reference==="parent"?ve=ee:m(this._config.reference)?ve=v(this._config.reference):typeof this._config.reference=="object"&&(ve=this._config.reference);const Qe=this._getPopperConfig(),yt=Qe.modifiers.find(Zt=>Zt.name==="applyStyles"&&Zt.enabled===!1);this._popper=n.createPopper(ve,this._menu,Qe),yt&&Ve.setDataAttribute(this._menu,"popper","static")}_isShown(ee=this._element){return ee.classList.contains(Gt)}_getMenuElement(){return Ue.next(this._element,ir)[0]}_getPlacement(){const ee=this._element.parentNode;if(ee.classList.contains("dropend"))return jr;if(ee.classList.contains("dropstart"))return Ai;const ve=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return ee.classList.contains("dropup")?ve?er:ar:ve?Jt:pr}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:ee}=this._config;return typeof ee=="string"?ee.split(",").map(ve=>Number.parseInt(ve,10)):typeof ee=="function"?ve=>ee(ve,this._element):ee}_getPopperConfig(){const ee={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return this._config.display==="static"&&(ee.modifiers=[{name:"applyStyles",enabled:!1}]),{...ee,...typeof this._config.popperConfig=="function"?this._config.popperConfig(ee):this._config.popperConfig}}_selectMenuItem({key:ee,target:ve}){const Qe=Ue.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(w);Qe.length&&Z(Qe,ve,ee===Zn,!Qe.includes(ve)).focus()}static jQueryInterface(ee){return this.each(function(){const ve=Ci.getOrCreateInstance(this,ee);if(typeof ee=="string"){if(ve[ee]===void 0)throw new TypeError(`No method named "${ee}"`);ve[ee]()}})}static clearMenus(ee){if(ee&&(ee.button===2||ee.type==="keyup"&&ee.key!=="Tab"))return;const ve=Ue.find(Xt);for(let Qe=0,yt=ve.length;Qe<yt;Qe++){const Zt=Ci.getInstance(ve[Qe]);if(!Zt||Zt._config.autoClose===!1||!Zt._isShown())continue;const Sr={relatedTarget:Zt._element};if(ee){const Jr=ee.composedPath(),Mi=Jr.includes(Zt._menu);if(Jr.includes(Zt._element)||Zt._config.autoClose==="inside"&&!Mi||Zt._config.autoClose==="outside"&&Mi||Zt._menu.contains(ee.target)&&(ee.type==="keyup"&&ee.key==="Tab"||/input|select|option|textarea|form/i.test(ee.target.tagName)))continue;ee.type==="click"&&(Sr.clickEvent=ee)}Zt._completeHide(Sr)}}static getParentFromElement(ee){return h(ee)||ee.parentNode}static dataApiKeydownHandler(ee){if(/input|textarea/i.test(ee.target.tagName)?ee.key===Go||ee.key!==qn&&(ee.key!==Zn&&ee.key!==fs||ee.target.closest(ir)):!At.test(ee.key))return;const ve=this.classList.contains(Gt);if(!ve&&ee.key===qn||(ee.preventDefault(),ee.stopPropagation(),T(this)))return;const Qe=this.matches(Xt)?this:Ue.prev(this,Xt)[0],yt=Ci.getOrCreateInstance(Qe);if(ee.key!==qn)return ee.key===fs||ee.key===Zn?(ve||yt.show(),void yt._selectMenuItem(ee)):void(ve&&ee.key!==Go||Ci.clearMenus());yt.hide()}}$e.on(document,Vt,Xt,Ci.dataApiKeydownHandler),$e.on(document,Vt,ir,Ci.dataApiKeydownHandler),$e.on(document,Lt,Ci.clearMenus),$e.on(document,"keyup.bs.dropdown.data-api",Ci.clearMenus),$e.on(document,Lt,Xt,function(it){it.preventDefault(),Ci.getOrCreateInstance(this).toggle()}),j(Ci);const vn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",In=".sticky-top";class Qn{constructor(){this._element=document.body}getWidth(){const ee=document.documentElement.clientWidth;return Math.abs(window.innerWidth-ee)}hide(){const ee=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",ve=>ve+ee),this._setElementAttributes(vn,"paddingRight",ve=>ve+ee),this._setElementAttributes(In,"marginRight",ve=>ve-ee)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(ee,ve,Qe){const yt=this.getWidth();this._applyManipulationCallback(ee,Zt=>{if(Zt!==this._element&&window.innerWidth>Zt.clientWidth+yt)return;this._saveInitialAttribute(Zt,ve);const Sr=window.getComputedStyle(Zt)[ve];Zt.style[ve]=`${Qe(Number.parseFloat(Sr))}px`})}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(vn,"paddingRight"),this._resetElementAttributes(In,"marginRight")}_saveInitialAttribute(ee,ve){const Qe=ee.style[ve];Qe&&Ve.setDataAttribute(ee,ve,Qe)}_resetElementAttributes(ee,ve){this._applyManipulationCallback(ee,Qe=>{const yt=Ve.getDataAttribute(Qe,ve);yt===void 0?Qe.style.removeProperty(ve):(Ve.removeDataAttribute(Qe,ve),Qe.style[ve]=yt)})}_applyManipulationCallback(ee,ve){m(ee)?ve(ee):Ue.find(ee,this._element).forEach(ve)}isOverflowing(){return this.getWidth()>0}}const ja={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},no={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},Ba="show",ia="mousedown.bs.backdrop";class Sa{constructor(ee){this._config=this._getConfig(ee),this._isAppended=!1,this._element=null}show(ee){this._config.isVisible?(this._append(),this._config.isAnimated&&k(this._getElement()),this._getElement().classList.add(Ba),this._emulateAnimation(()=>{G(ee)})):G(ee)}hide(ee){this._config.isVisible?(this._getElement().classList.remove(Ba),this._emulateAnimation(()=>{this.dispose(),G(ee)})):G(ee)}_getElement(){if(!this._element){const ee=document.createElement("div");ee.className=this._config.className,this._config.isAnimated&&ee.classList.add("fade"),this._element=ee}return this._element}_getConfig(ee){return(ee={...ja,...typeof ee=="object"?ee:{}}).rootElement=v(ee.rootElement),x("backdrop",ee,no),ee}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),$e.on(this._getElement(),ia,()=>{G(this._config.clickCallback)}),this._isAppended=!0)}dispose(){this._isAppended&&($e.off(this._element,ia),this._element.remove(),this._isAppended=!1)}_emulateAnimation(ee){Y(ee,this._getElement(),this._config.isAnimated)}}const ps={trapElement:null,autofocus:!0},uu={trapElement:"element",autofocus:"boolean"},_h=".bs.focustrap",cc="backward";class hc{constructor(ee){this._config=this._getConfig(ee),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:ee,autofocus:ve}=this._config;this._isActive||(ve&&ee.focus(),$e.off(document,_h),$e.on(document,"focusin.bs.focustrap",Qe=>this._handleFocusin(Qe)),$e.on(document,"keydown.tab.bs.focustrap",Qe=>this._handleKeydown(Qe)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,$e.off(document,_h))}_handleFocusin(ee){const{target:ve}=ee,{trapElement:Qe}=this._config;if(ve===document||ve===Qe||Qe.contains(ve))return;const yt=Ue.focusableChildren(Qe);yt.length===0?Qe.focus():this._lastTabNavDirection===cc?yt[yt.length-1].focus():yt[0].focus()}_handleKeydown(ee){ee.key==="Tab"&&(this._lastTabNavDirection=ee.shiftKey?cc:"forward")}_getConfig(ee){return ee={...ps,...typeof ee=="object"?ee:{}},x("focustrap",ee,uu),ee}}const yh="modal",cu="Escape",Ns={backdrop:!0,keyboard:!0,focus:!0},sm={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},ma="hidden.bs.modal",dc="show.bs.modal",Vs="resize.bs.modal",ao="click.dismiss.bs.modal",$s="keydown.dismiss.bs.modal",Mo="mousedown.dismiss.bs.modal",ut="modal-open",mr="show",oo="modal-static";class oa extends nt{constructor(ee,ve){super(ee),this._config=this._getConfig(ve),this._dialog=Ue.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new Qn}static get Default(){return Ns}static get NAME(){return yh}toggle(ee){return this._isShown?this.hide():this.show(ee)}show(ee){this._isShown||this._isTransitioning||$e.trigger(this._element,dc,{relatedTarget:ee}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(ut),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),$e.on(this._dialog,Mo,()=>{$e.one(this._element,"mouseup.dismiss.bs.modal",ve=>{ve.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(ee)))}hide(){if(!this._isShown||this._isTransitioning||$e.trigger(this._element,"hide.bs.modal").defaultPrevented)return;this._isShown=!1;const ee=this._isAnimated();ee&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(mr),$e.off(this._element,ao),$e.off(this._dialog,Mo),this._queueCallback(()=>this._hideModal(),this._element,ee)}dispose(){[window,this._dialog].forEach(ee=>$e.off(ee,".bs.modal")),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Sa({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new hc({trapElement:this._element})}_getConfig(ee){return ee={...Ns,...Ve.getDataAttributes(this._element),...typeof ee=="object"?ee:{}},x(yh,ee,sm),ee}_showElement(ee){const ve=this._isAnimated(),Qe=Ue.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,Qe&&(Qe.scrollTop=0),ve&&k(this._element),this._element.classList.add(mr),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,$e.trigger(this._element,"shown.bs.modal",{relatedTarget:ee})},this._dialog,ve)}_setEscapeEvent(){this._isShown?$e.on(this._element,$s,ee=>{this._config.keyboard&&ee.key===cu?(ee.preventDefault(),this.hide()):this._config.keyboard||ee.key!==cu||this._triggerBackdropTransition()}):$e.off(this._element,$s)}_setResizeEvent(){this._isShown?$e.on(window,Vs,()=>this._adjustDialog()):$e.off(window,Vs)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ut),this._resetAdjustments(),this._scrollBar.reset(),$e.trigger(this._element,ma)})}_showBackdrop(ee){$e.on(this._element,ao,ve=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:ve.target===ve.currentTarget&&(this._config.backdrop===!0?this.hide():this._config.backdrop==="static"&&this._triggerBackdropTransition())}),this._backdrop.show(ee)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if($e.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const{classList:ee,scrollHeight:ve,style:Qe}=this._element,yt=ve>document.documentElement.clientHeight;!yt&&Qe.overflowY==="hidden"||ee.contains(oo)||(yt||(Qe.overflowY="hidden"),ee.add(oo),this._queueCallback(()=>{ee.remove(oo),yt||this._queueCallback(()=>{Qe.overflowY=""},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const ee=this._element.scrollHeight>document.documentElement.clientHeight,ve=this._scrollBar.getWidth(),Qe=ve>0;(!Qe&&ee&&!$()||Qe&&!ee&&$())&&(this._element.style.paddingLeft=`${ve}px`),(Qe&&!ee&&!$()||!Qe&&ee&&$())&&(this._element.style.paddingRight=`${ve}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(ee,ve){return this.each(function(){const Qe=oa.getOrCreateInstance(this,ee);if(typeof ee=="string"){if(Qe[ee]===void 0)throw new TypeError(`No method named "${ee}"`);Qe[ee](ve)}})}}$e.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(it){const ee=h(this);["A","AREA"].includes(this.tagName)&&it.preventDefault(),$e.one(ee,dc,Qe=>{Qe.defaultPrevented||$e.one(ee,ma,()=>{w(this)&&this.focus()})});const ve=Ue.findOne(".modal.show");ve&&oa.getInstance(ve).hide(),oa.getOrCreateInstance(ee).toggle(this)}),vt(oa),j(oa);const En="offcanvas",Uo={backdrop:!0,keyboard:!0,scroll:!1},Gv={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},so="show",xh=".offcanvas.show",lm="hidden.bs.offcanvas";class Fa extends nt{constructor(ee,ve){super(ee),this._config=this._getConfig(ve),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return En}static get Default(){return Uo}toggle(ee){return this._isShown?this.hide():this.show(ee)}show(ee){this._isShown||$e.trigger(this._element,"show.bs.offcanvas",{relatedTarget:ee}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||new Qn().hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(so),this._queueCallback(()=>{this._config.scroll||this._focustrap.activate(),$e.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:ee})},this._element,!0))}hide(){this._isShown&&($e.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove(so),this._backdrop.hide(),this._queueCallback(()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||new Qn().reset(),$e.trigger(this._element,lm)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(ee){return ee={...Uo,...Ve.getDataAttributes(this._element),...typeof ee=="object"?ee:{}},x(En,ee,Gv),ee}_initializeBackDrop(){return new Sa({className:"offcanvas-backdrop",isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new hc({trapElement:this._element})}_addEventListeners(){$e.on(this._element,"keydown.dismiss.bs.offcanvas",ee=>{this._config.keyboard&&ee.key==="Escape"&&this.hide()})}static jQueryInterface(ee){return this.each(function(){const ve=Fa.getOrCreateInstance(this,ee);if(typeof ee=="string"){if(ve[ee]===void 0||ee.startsWith("_")||ee==="constructor")throw new TypeError(`No method named "${ee}"`);ve[ee](this)}})}}$e.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(it){const ee=h(this);if(["A","AREA"].includes(this.tagName)&&it.preventDefault(),T(this))return;$e.one(ee,lm,()=>{w(this)&&this.focus()});const ve=Ue.findOne(xh);ve&&ve!==ee&&Fa.getInstance(ve).hide(),Fa.getOrCreateInstance(ee).toggle(this)}),$e.on(window,"load.bs.offcanvas.data-api",()=>Ue.find(xh).forEach(it=>Fa.getOrCreateInstance(it).show())),vt(Fa),j(Fa);const Ot=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),hi=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,yi=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,lo=(it,ee)=>{const ve=it.nodeName.toLowerCase();if(ee.includes(ve))return!Ot.has(ve)||Boolean(hi.test(it.nodeValue)||yi.test(it.nodeValue));const Qe=ee.filter(yt=>yt instanceof RegExp);for(let yt=0,Zt=Qe.length;yt<Zt;yt++)if(Qe[yt].test(ve))return!0;return!1};function Sl(it,ee,ve){if(!it.length)return it;if(ve&&typeof ve=="function")return ve(it);const Qe=new window.DOMParser().parseFromString(it,"text/html"),yt=[].concat(...Qe.body.querySelectorAll("*"));for(let Zt=0,Sr=yt.length;Zt<Sr;Zt++){const Jr=yt[Zt],Mi=Jr.nodeName.toLowerCase();if(!Object.keys(ee).includes(Mi)){Jr.remove();continue}const Xn=[].concat(...Jr.attributes),_n=[].concat(ee["*"]||[],ee[Mi]||[]);Xn.forEach(Zi=>{lo(Zi,_n)||Jr.removeAttribute(Zi.nodeName)})}return Qe.body.innerHTML}const oi="tooltip",Tl=new Set(["sanitize","allowList","sanitizeFn"]),Gs={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},fc={AUTO:"auto",TOP:"top",RIGHT:$()?"left":"right",BOTTOM:"bottom",LEFT:$()?"right":"left"},Ta={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},qi={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},bh="fade",Ao="show",Ml="show",ms="out",pc=".tooltip-inner",Al=".modal",Cl="hide.bs.modal",hu="hover",mc="focus";class gs extends nt{constructor(ee,ve){if(n===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(ee),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(ve),this.tip=null,this._setListeners()}static get Default(){return Ta}static get NAME(){return oi}static get Event(){return qi}static get DefaultType(){return Gs}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(ee){if(this._isEnabled)if(ee){const ve=this._initializeOnDelegatedTarget(ee);ve._activeTrigger.click=!ve._activeTrigger.click,ve._isWithActiveTrigger()?ve._enter(null,ve):ve._leave(null,ve)}else{if(this.getTipElement().classList.contains(Ao))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),$e.off(this._element.closest(Al),Cl,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this.isWithContent()||!this._isEnabled)return;const ee=$e.trigger(this._element,this.constructor.Event.SHOW),ve=C(this._element),Qe=ve===null?this._element.ownerDocument.documentElement.contains(this._element):ve.contains(this._element);if(ee.defaultPrevented||!Qe)return;this.constructor.NAME==="tooltip"&&this.tip&&this.getTitle()!==this.tip.querySelector(pc).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);const yt=this.getTipElement(),Zt=(Zi=>{do Zi+=Math.floor(1e6*Math.random());while(document.getElementById(Zi));return Zi})(this.constructor.NAME);yt.setAttribute("id",Zt),this._element.setAttribute("aria-describedby",Zt),this._config.animation&&yt.classList.add(bh);const Sr=typeof this._config.placement=="function"?this._config.placement.call(this,yt,this._element):this._config.placement,Jr=this._getAttachment(Sr);this._addAttachmentClass(Jr);const{container:Mi}=this._config;dt.set(yt,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(Mi.append(yt),$e.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=n.createPopper(this._element,yt,this._getPopperConfig(Jr)),yt.classList.add(Ao);const Xn=this._resolvePossibleFunction(this._config.customClass);Xn&&yt.classList.add(...Xn.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(Zi=>{$e.on(Zi,"mouseover",I)});const _n=this.tip.classList.contains(bh);this._queueCallback(()=>{const Zi=this._hoverState;this._hoverState=null,$e.trigger(this._element,this.constructor.Event.SHOWN),Zi===ms&&this._leave(null,this)},this.tip,_n)}hide(){if(!this._popper)return;const ee=this.getTipElement();if($e.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;ee.classList.remove(Ao),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(Qe=>$e.off(Qe,"mouseover",I)),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1;const ve=this.tip.classList.contains(bh);this._queueCallback(()=>{this._isWithActiveTrigger()||(this._hoverState!==Ml&&ee.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),$e.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())},this.tip,ve),this._hoverState=""}update(){this._popper!==null&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const ee=document.createElement("div");ee.innerHTML=this._config.template;const ve=ee.children[0];return this.setContent(ve),ve.classList.remove(bh,Ao),this.tip=ve,this.tip}setContent(ee){this._sanitizeAndSetContent(ee,this.getTitle(),pc)}_sanitizeAndSetContent(ee,ve,Qe){const yt=Ue.findOne(Qe,ee);ve||!yt?this.setElementContent(yt,ve):yt.remove()}setElementContent(ee,ve){if(ee!==null)return m(ve)?(ve=v(ve),void(this._config.html?ve.parentNode!==ee&&(ee.innerHTML="",ee.append(ve)):ee.textContent=ve.textContent)):void(this._config.html?(this._config.sanitize&&(ve=Sl(ve,this._config.allowList,this._config.sanitizeFn)),ee.innerHTML=ve):ee.textContent=ve)}getTitle(){const ee=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(ee)}updateAttachment(ee){return ee==="right"?"end":ee==="left"?"start":ee}_initializeOnDelegatedTarget(ee,ve){return ve||this.constructor.getOrCreateInstance(ee.delegateTarget,this._getDelegateConfig())}_getOffset(){const{offset:ee}=this._config;return typeof ee=="string"?ee.split(",").map(ve=>Number.parseInt(ve,10)):typeof ee=="function"?ve=>ee(ve,this._element):ee}_resolvePossibleFunction(ee){return typeof ee=="function"?ee.call(this._element):ee}_getPopperConfig(ee){const ve={placement:ee,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:Qe=>this._handlePopperPlacementChange(Qe)}],onFirstUpdate:Qe=>{Qe.options.placement!==Qe.placement&&this._handlePopperPlacementChange(Qe)}};return{...ve,...typeof this._config.popperConfig=="function"?this._config.popperConfig(ve):this._config.popperConfig}}_addAttachmentClass(ee){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(ee)}`)}_getAttachment(ee){return fc[ee.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach(ee=>{if(ee==="click")$e.on(this._element,this.constructor.Event.CLICK,this._config.selector,ve=>this.toggle(ve));else if(ee!=="manual"){const ve=ee===hu?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,Qe=ee===hu?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;$e.on(this._element,ve,this._config.selector,yt=>this._enter(yt)),$e.on(this._element,Qe,this._config.selector,yt=>this._leave(yt))}}),this._hideModalHandler=()=>{this._element&&this.hide()},$e.on(this._element.closest(Al),Cl,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const ee=this._element.getAttribute("title"),ve=typeof this._element.getAttribute("data-bs-original-title");(ee||ve!=="string")&&(this._element.setAttribute("data-bs-original-title",ee||""),!ee||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",ee),this._element.setAttribute("title",""))}_enter(ee,ve){ve=this._initializeOnDelegatedTarget(ee,ve),ee&&(ve._activeTrigger[ee.type==="focusin"?mc:hu]=!0),ve.getTipElement().classList.contains(Ao)||ve._hoverState===Ml?ve._hoverState=Ml:(clearTimeout(ve._timeout),ve._hoverState=Ml,ve._config.delay&&ve._config.delay.show?ve._timeout=setTimeout(()=>{ve._hoverState===Ml&&ve.show()},ve._config.delay.show):ve.show())}_leave(ee,ve){ve=this._initializeOnDelegatedTarget(ee,ve),ee&&(ve._activeTrigger[ee.type==="focusout"?mc:hu]=ve._element.contains(ee.relatedTarget)),ve._isWithActiveTrigger()||(clearTimeout(ve._timeout),ve._hoverState=ms,ve._config.delay&&ve._config.delay.hide?ve._timeout=setTimeout(()=>{ve._hoverState===ms&&ve.hide()},ve._config.delay.hide):ve.hide())}_isWithActiveTrigger(){for(const ee in this._activeTrigger)if(this._activeTrigger[ee])return!0;return!1}_getConfig(ee){const ve=Ve.getDataAttributes(this._element);return Object.keys(ve).forEach(Qe=>{Tl.has(Qe)&&delete ve[Qe]}),(ee={...this.constructor.Default,...ve,...typeof ee=="object"&&ee?ee:{}}).container=ee.container===!1?document.body:v(ee.container),typeof ee.delay=="number"&&(ee.delay={show:ee.delay,hide:ee.delay}),typeof ee.title=="number"&&(ee.title=ee.title.toString()),typeof ee.content=="number"&&(ee.content=ee.content.toString()),x(oi,ee,this.constructor.DefaultType),ee.sanitize&&(ee.template=Sl(ee.template,ee.allowList,ee.sanitizeFn)),ee}_getDelegateConfig(){const ee={};for(const ve in this._config)this.constructor.Default[ve]!==this._config[ve]&&(ee[ve]=this._config[ve]);return ee}_cleanTipClass(){const ee=this.getTipElement(),ve=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),Qe=ee.getAttribute("class").match(ve);Qe!==null&&Qe.length>0&&Qe.map(yt=>yt.trim()).forEach(yt=>ee.classList.remove(yt))}_getBasicClassPrefix(){return"bs-tooltip"}_handlePopperPlacementChange(ee){const{state:ve}=ee;ve&&(this.tip=ve.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(ve.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(ee){return this.each(function(){const ve=gs.getOrCreateInstance(this,ee);if(typeof ee=="string"){if(ve[ee]===void 0)throw new TypeError(`No method named "${ee}"`);ve[ee]()}})}}j(gs);const Ma={...gs.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},sn={...gs.DefaultType,content:"(string|element|function)"},qd={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"};class jo extends gs{static get Default(){return Ma}static get NAME(){return"popover"}static get Event(){return qd}static get DefaultType(){return sn}isWithContent(){return this.getTitle()||this._getContent()}setContent(ee){this._sanitizeAndSetContent(ee,this.getTitle(),".popover-header"),this._sanitizeAndSetContent(ee,this._getContent(),".popover-body")}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return"bs-popover"}static jQueryInterface(ee){return this.each(function(){const ve=jo.getOrCreateInstance(this,ee);if(typeof ee=="string"){if(ve[ee]===void 0)throw new TypeError(`No method named "${ee}"`);ve[ee]()}})}}j(jo);const ga="scrollspy",Ha={offset:10,method:"auto",target:""},um={offset:"number",method:"string",target:"(string|element)"},Co="active",kn=".nav-link, .list-group-item, .dropdown-item",du="position";class Il extends nt{constructor(ee,ve){super(ee),this._scrollElement=this._element.tagName==="BODY"?window:this._element,this._config=this._getConfig(ve),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,$e.on(this._scrollElement,"scroll.bs.scrollspy",()=>this._process()),this.refresh(),this._process()}static get Default(){return Ha}static get NAME(){return ga}refresh(){const ee=this._scrollElement===this._scrollElement.window?"offset":du,ve=this._config.method==="auto"?ee:this._config.method,Qe=ve===du?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),Ue.find(kn,this._config.target).map(yt=>{const Zt=a(yt),Sr=Zt?Ue.findOne(Zt):null;if(Sr){const Jr=Sr.getBoundingClientRect();if(Jr.width||Jr.height)return[Ve[ve](Sr).top+Qe,Zt]}return null}).filter(yt=>yt).sort((yt,Zt)=>yt[0]-Zt[0]).forEach(yt=>{this._offsets.push(yt[0]),this._targets.push(yt[1])})}dispose(){$e.off(this._scrollElement,".bs.scrollspy"),super.dispose()}_getConfig(ee){return(ee={...Ha,...Ve.getDataAttributes(this._element),...typeof ee=="object"&&ee?ee:{}}).target=v(ee.target)||document.documentElement,x(ga,ee,um),ee}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const ee=this._getScrollTop()+this._config.offset,ve=this._getScrollHeight(),Qe=this._config.offset+ve-this._getOffsetHeight();if(this._scrollHeight!==ve&&this.refresh(),ee>=Qe){const yt=this._targets[this._targets.length-1];this._activeTarget!==yt&&this._activate(yt)}else{if(this._activeTarget&&ee<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(let yt=this._offsets.length;yt--;)this._activeTarget!==this._targets[yt]&&ee>=this._offsets[yt]&&(this._offsets[yt+1]===void 0||ee<this._offsets[yt+1])&&this._activate(this._targets[yt])}}_activate(ee){this._activeTarget=ee,this._clear();const ve=kn.split(",").map(yt=>`${yt}[data-bs-target="${ee}"],${yt}[href="${ee}"]`),Qe=Ue.findOne(ve.join(","),this._config.target);Qe.classList.add(Co),Qe.classList.contains("dropdown-item")?Ue.findOne(".dropdown-toggle",Qe.closest(".dropdown")).classList.add(Co):Ue.parents(Qe,".nav, .list-group").forEach(yt=>{Ue.prev(yt,".nav-link, .list-group-item").forEach(Zt=>Zt.classList.add(Co)),Ue.prev(yt,".nav-item").forEach(Zt=>{Ue.children(Zt,".nav-link").forEach(Sr=>Sr.classList.add(Co))})}),$e.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:ee})}_clear(){Ue.find(kn,this._config.target).filter(ee=>ee.classList.contains(Co)).forEach(ee=>ee.classList.remove(Co))}static jQueryInterface(ee){return this.each(function(){const ve=Il.getOrCreateInstance(this,ee);if(typeof ee=="string"){if(ve[ee]===void 0)throw new TypeError(`No method named "${ee}"`);ve[ee]()}})}}$e.on(window,"load.bs.scrollspy.data-api",()=>{Ue.find('[data-bs-spy="scroll"]').forEach(it=>new Il(it))}),j(Il);const Ho="active",Dn="fade",wh="show",Sh=".active",uo=":scope > li > .active";class vs extends nt{static get NAME(){return"tab"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(Ho))return;let ee;const ve=h(this._element),Qe=this._element.closest(".nav, .list-group");if(Qe){const Sr=Qe.nodeName==="UL"||Qe.nodeName==="OL"?uo:Sh;ee=Ue.find(Sr,Qe),ee=ee[ee.length-1]}const yt=ee?$e.trigger(ee,"hide.bs.tab",{relatedTarget:this._element}):null;if($e.trigger(this._element,"show.bs.tab",{relatedTarget:ee}).defaultPrevented||yt!==null&&yt.defaultPrevented)return;this._activate(this._element,Qe);const Zt=()=>{$e.trigger(ee,"hidden.bs.tab",{relatedTarget:this._element}),$e.trigger(this._element,"shown.bs.tab",{relatedTarget:ee})};ve?this._activate(ve,ve.parentNode,Zt):Zt()}_activate(ee,ve,Qe){const yt=(!ve||ve.nodeName!=="UL"&&ve.nodeName!=="OL"?Ue.children(ve,Sh):Ue.find(uo,ve))[0],Zt=Qe&&yt&&yt.classList.contains(Dn),Sr=()=>this._transitionComplete(ee,yt,Qe);yt&&Zt?(yt.classList.remove(wh),this._queueCallback(Sr,ee,!0)):Sr()}_transitionComplete(ee,ve,Qe){if(ve){ve.classList.remove(Ho);const Zt=Ue.findOne(":scope > .dropdown-menu .active",ve.parentNode);Zt&&Zt.classList.remove(Ho),ve.getAttribute("role")==="tab"&&ve.setAttribute("aria-selected",!1)}ee.classList.add(Ho),ee.getAttribute("role")==="tab"&&ee.setAttribute("aria-selected",!0),k(ee),ee.classList.contains(Dn)&&ee.classList.add(wh);let yt=ee.parentNode;if(yt&&yt.nodeName==="LI"&&(yt=yt.parentNode),yt&&yt.classList.contains("dropdown-menu")){const Zt=ee.closest(".dropdown");Zt&&Ue.find(".dropdown-toggle",Zt).forEach(Sr=>Sr.classList.add(Ho)),ee.setAttribute("aria-expanded",!0)}Qe&&Qe()}static jQueryInterface(ee){return this.each(function(){const ve=vs.getOrCreateInstance(this);if(typeof ee=="string"){if(ve[ee]===void 0)throw new TypeError(`No method named "${ee}"`);ve[ee]()}})}}$e.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',function(it){["A","AREA"].includes(this.tagName)&&it.preventDefault(),T(this)||vs.getOrCreateInstance(this).show()}),j(vs);const fu="toast",wi="hide",gc="show",El="showing",Us={animation:"boolean",autohide:"boolean",delay:"number"},Zd={animation:!0,autohide:!0,delay:5e3};class Dl extends nt{constructor(ee,ve){super(ee),this._config=this._getConfig(ve),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return Us}static get Default(){return Zd}static get NAME(){return fu}show(){$e.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(wi),k(this._element),this._element.classList.add(gc),this._element.classList.add(El),this._queueCallback(()=>{this._element.classList.remove(El),$e.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this._element.classList.contains(gc)&&($e.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(El),this._queueCallback(()=>{this._element.classList.add(wi),this._element.classList.remove(El),this._element.classList.remove(gc),$e.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this._element.classList.contains(gc)&&this._element.classList.remove(gc),super.dispose()}_getConfig(ee){return ee={...Zd,...Ve.getDataAttributes(this._element),...typeof ee=="object"&&ee?ee:{}},x(fu,ee,this.constructor.DefaultType),ee}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(ee,ve){switch(ee.type){case"mouseover":case"mouseout":this._hasMouseInteraction=ve;break;case"focusin":case"focusout":this._hasKeyboardInteraction=ve}if(ve)return void this._clearTimeout();const Qe=ee.relatedTarget;this._element===Qe||this._element.contains(Qe)||this._maybeScheduleHide()}_setListeners(){$e.on(this._element,"mouseover.bs.toast",ee=>this._onInteraction(ee,!0)),$e.on(this._element,"mouseout.bs.toast",ee=>this._onInteraction(ee,!1)),$e.on(this._element,"focusin.bs.toast",ee=>this._onInteraction(ee,!0)),$e.on(this._element,"focusout.bs.toast",ee=>this._onInteraction(ee,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(ee){return this.each(function(){const ve=Dl.getOrCreateInstance(this,ee);if(typeof ee=="string"){if(ve[ee]===void 0)throw new TypeError(`No method named "${ee}"`);ve[ee](this)}})}}return vt(Dl),j(Dl),{Alert:Pt,Button:Et,Carousel:Kt,Collapse:Ji,Dropdown:Ci,Modal:oa,Offcanvas:Fa,Popover:jo,ScrollSpy:Il,Tab:vs,Toast:Dl,Tooltip:gs}})})(F8);var Zue=CT(F8.exports);const PT=Pte("storeId",{state:()=>({bootstrap:Zue})}),Xue={class:"py-lg-5"},Yue={class:"container"},Kue={class:"row"},Jue={class:"col"},Que={class:"card box-shadow-xl overflow-hidden mb-5"},ece={class:"row"},tce={class:"z-index-2 text-center d-flex h-100 w-100 d-flex m-auto justify-content-center"},rce=ie("div",{class:"mask bg-gradient-dark opacity-8"},null,-1),ice={class:"p-5 ps-sm-8 position-relative text-start my-auto z-index-2"},nce=au('<h3 class="text-white">Contact Information</h3><p class="text-white opacity-8 mb-4"> Fill up the form and our Team will get back to you within 24 hours. </p><div class="d-flex p-2 text-white"><div><i class="fas fa-phone text-sm"></i></div><div class="ps-3"><span class="text-sm opacity-8">(+40) 772 100 200</span></div></div><div class="d-flex p-2 text-white"><div><i class="fas fa-envelope text-sm"></i></div><div class="ps-3"><span class="text-sm opacity-8">hello@creative-tim.com</span></div></div><div class="d-flex p-2 text-white"><div><i class="fas fa-map-marker-alt text-sm"></i></div><div class="ps-3"><span class="text-sm opacity-8">Dyonisie Wolf Bucharest, RO 010458</span></div></div>',5),ace={class:"mt-4"},oce=ie("i",{class:"fab fa-facebook"},null,-1),sce=ie("i",{class:"fab fa-twitter"},null,-1),lce=ie("i",{class:"fab fa-dribbble"},null,-1),uce=ie("i",{class:"fab fa-instagram"},null,-1),cce={class:"col-lg-7"},hce={class:"p-3",id:"contact-form",method:"post"},dce=ie("div",{class:"card-header px-4 py-sm-5 py-3"},[ie("h2",null,"Say Hi!"),ie("p",{class:"lead"},"We'd like to talk with you.")],-1),fce={class:"card-body pt-1"},pce={class:"row"},mce={class:"col-md-12 pe-2 mb-3"},gce={class:"col-md-12 pe-2 mb-3"},vce={class:"col-md-12 pe-2 mb-3"},_ce=mt("Your message"),yce={class:"row"},xce={class:"col-md-6 text-end ms-auto"},bce=mt("Send Message"),wce={name:"AuthorContact",setup(r){const e=PT();return en(()=>{QP(e.bootstrap)}),(t,i)=>(Yt(),lr("section",Xue,[ie("div",Yue,[ie("div",Kue,[ie("div",Jue,[ie("div",Que,[ie("div",ece,[ie("div",{class:"col-lg-5 position-relative bg-cover px-0",style:bo({backgroundImage:`url(${zt(B8)})`}),loading:"lazy"},[ie("div",tce,[rce,ie("div",ice,[nce,ie("div",ace,[Me(Lr,{color:"none",size:"lg",class:"btn-icon-only btn-link text-white mb-0","data-toggle":"tooltip","data-placement":"bottom","data-original-title":"Log in with Facebook"},{default:Xe(()=>[oce]),_:1}),Me(Lr,{color:"none",size:"lg",class:"btn-icon-only btn-link text-white mb-0","data-toggle":"tooltip","data-placement":"bottom","data-original-title":"Log in with Twitter"},{default:Xe(()=>[sce]),_:1}),Me(Lr,{color:"none",size:"lg",class:"btn-icon-only btn-link text-white mb-0","data-toggle":"tooltip","data-placement":"bottom","data-original-title":"Log in with Dribbble"},{default:Xe(()=>[lce]),_:1}),Me(Lr,{color:"none",size:"lg",class:"btn-icon-only btn-link text-white mb-0","data-toggle":"tooltip","data-placement":"bottom","data-original-title":"Log in with Instagram"},{default:Xe(()=>[uce]),_:1})])])])],4),ie("div",cce,[ie("form",hce,[dce,ie("div",fce,[ie("div",pce,[ie("div",mce,[Me(Ja,{class:"input-group-static mb-4",label:"My name is",type:"text",placeholder:"Full Name"})]),ie("div",gce,[Me(Ja,{class:"input-group-static mb-4",label:"I'm looking for",type:"text",placeholder:"What you love"})]),ie("div",vce,[Me(JP,{class:"input-group-static mb-4",placeholder:"I want to say that...",rows:6},{default:Xe(()=>[_ce]),_:1})])]),ie("div",yce,[ie("div",xce,[Me(Lr,{variant:"gradient",color:"success",type:"submit",class:"mb-0"},{default:Xe(()=>[bce]),_:1})])])])])])])])])])])]))}};var Sce="/assets/city-profile.7a169449.jpg";const Tce=ie("span",{class:"mask bg-gradient-dark opacity-8"},null,-1),Mce=[Tce],Ace={class:"card card-body blur shadow-blur mx-3 mx-md-4 mt-n6 mb-4"},Cce={name:"AuthorView",setup(r){return(e,t)=>(Yt(),lr(Hn,null,[Me(cx,{transparent:""}),Me(KP,null,{default:Xe(()=>[ie("div",{class:"page-header min-height-400",style:bo({backgroundImage:`url(${zt(Sce)})`}),loading:"lazy"},Mce,4)]),_:1}),ie("div",Ace,[Me(Ple),Me(nue)]),Me(wce),Me(gle)],64))}},Ice={class:"form-check form-switch"},Ece=["id","name","checked"],Dce=["for"],LT={name:"MaterialSwitch",props:{id:{type:String,required:!0},checked:{type:Boolean,default:!1},labelClass:{type:String,default:""}},setup(r){return(e,t)=>(Yt(),lr("div",Ice,[ie("input",{id:r.id,class:"form-check-input",type:"checkbox",name:r.id,checked:r.checked},null,8,Ece),ie("label",{class:$r(["form-check-label d-block",r.labelClass]),for:r.id},[ru(e.$slots,"default")],10,Dce),e.$slots.description?ru(e.$slots,"description",{key:0}):kd("",!0)]))}},Pce=ie("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),Lce={class:"container my-auto"},kce={class:"row"},Rce={class:"col-lg-4 col-md-8 col-12 mx-auto"},Oce={class:"card z-index-0 fadeIn3 fadeInBottom"},zce=ie("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[ie("div",{class:"bg-gradient-success shadow-success border-radius-lg py-3 pe-1"},[ie("h4",{class:"text-white font-weight-bolder text-center mt-2 mb-0"}," Sign in "),ie("div",{class:"row mt-3"},[ie("div",{class:"col-2 text-center ms-auto"},[ie("a",{class:"btn btn-link px-3",href:"javascript:;"},[ie("i",{class:"fa fa-facebook text-white text-lg"})])]),ie("div",{class:"col-2 text-center px-1"},[ie("a",{class:"btn btn-link px-3",href:"javascript:;"},[ie("i",{class:"fa fa-github text-white text-lg"})])]),ie("div",{class:"col-2 text-center me-auto"},[ie("a",{class:"btn btn-link px-3",href:"javascript:;"},[ie("i",{class:"fa fa-google text-white text-lg"})])])])])],-1),Bce={class:"card-body"},Fce={role:"form",class:"text-start"},Nce=mt("Remember me"),Vce={class:"text-center"},$ce=mt("Sign in"),Gce=ie("p",{class:"mt-4 text-sm text-center"},[mt(" Don't have an account? "),ie("a",{href:"#",class:"text-success text-gradient font-weight-bold"},"Sign up")],-1),Uce={class:"footer position-absolute bottom-2 py-2 w-100"},jce={class:"container"},Hce={class:"row align-items-center justify-content-lg-between"},Wce={class:"col-12 col-md-6 my-auto"},qce={class:"copyright text-center text-sm text-white text-lg-start"},Zce=ie("i",{class:"fa fa-heart","aria-hidden":"true"},null,-1),Xce=mt(" by "),Yce=ie("a",{href:"https://www.creative-tim.com",class:"font-weight-bold text-white",target:"_blank"},"Creative Tim",-1),Kce=mt(" for a better web. "),Jce=ie("div",{class:"col-12 col-md-6"},[ie("ul",{class:"nav nav-footer justify-content-center justify-content-lg-end"},[ie("li",{class:"nav-item"},[ie("a",{href:"https://www.creative-tim.com",class:"nav-link text-white",target:"_blank"},"Creative Tim")]),ie("li",{class:"nav-item"},[ie("a",{href:"https://www.creative-tim.com/presentation",class:"nav-link text-white",target:"_blank"},"About Us")]),ie("li",{class:"nav-item"},[ie("a",{href:"https://www.creative-tim.com/blog",class:"nav-link text-white",target:"_blank"},"Blog")]),ie("li",{class:"nav-item"},[ie("a",{href:"https://www.creative-tim.com/license",class:"nav-link pe-0 text-white",target:"_blank"},"License")])])],-1),Qce={name:"BasicView",setup(r){return en(()=>{Sv()}),(e,t)=>(Yt(),lr(Hn,null,[Me(cx,{transparent:""}),Me(KP,null,{default:Xe(()=>[ie("div",{class:"page-header align-items-start min-vh-100",style:bo({backgroundImage:"url(https://images.unsplash.com/photo-1497294815431-9365093b7331?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1950&q=80)"}),loading:"lazy"},[Pce,ie("div",Lce,[ie("div",kce,[ie("div",Rce,[ie("div",Oce,[zce,ie("div",Bce,[ie("form",Fce,[Me(Ja,{id:"email",class:"input-group-outline my-3",label:{text:"Email",class:"form-label"},type:"email"}),Me(Ja,{id:"password",class:"input-group-outline mb-3",label:{text:"Password",class:"form-label"},type:"password"}),Me(LT,{class:"d-flex align-items-center mb-3",id:"rememberMe",labelClass:"mb-0 ms-3",checked:""},{default:Xe(()=>[Nce]),_:1}),ie("div",Vce,[Me(Lr,{class:"my-4 mb-2",variant:"gradient",color:"success",fullWidth:""},{default:Xe(()=>[$ce]),_:1})]),Gce])])])])])]),ie("footer",Uce,[ie("div",jce,[ie("div",Hce,[ie("div",Wce,[ie("div",qce,[mt(" \xA9 "+Pi(new Date().getFullYear())+", made with ",1),Zce,Xce,Yce,Kce])]),Jce])])])],4)]),_:1})],64))}},ehe={"aria-label":"breadcrumb"},the={class:"breadcrumb"},rhe=["href"],Vw={name:"Breadcrumbs",props:{routes:{type:Array,required:!0,route:String,label:String,default:()=>[{route:"/",label:""}]}},setup(r){return(e,t)=>(Yt(),lr("nav",ehe,[ie("ol",the,[(Yt(!0),lr(Hn,null,a0(r.routes,({route:i,label:n},s)=>(Yt(),lr("li",{key:s,class:"breadcrumb-item"},[s!=r.routes.length-1?(Yt(),lr("a",{key:0,href:i},Pi(n),9,rhe)):(Yt(),lr(Hn,{key:1},[mt(Pi(n),1)],64))]))),128))])]))}},ihe={class:"container mt-5"},nhe={class:"row"},ahe={class:"col-lg-12 mx-auto"},ohe={class:"mb-4 w-100 w-md-50 w-lg-50"},ba={name:"BaseLayout",props:{breadcrumb:{type:Array,required:!0},title:{type:String,required:!0}},setup(r){return(e,t)=>(Yt(),lr(Hn,null,[Me(k8,{light:""}),ie("div",ihe,[ie("div",nhe,[ie("div",ahe,[ie("div",ohe,[Me(Vw,{routes:r.breadcrumb},null,8,["routes"]),ie("h3",null,Pi(r.title),1)]),ru(e.$slots,"default")])])]),Me(AT)],64))}};function d0(){return d0=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},d0.apply(this,arguments)}var she=13,lhe=9,uhe=8,che=89,Pb=90,hhe=77,t5=57,r5=219,i5=222,n5=192,dhe=27,a5=100,fhe=3e3,phe=typeof window!="undefined"&&navigator&&/Win/i.test(navigator.platform),$A=typeof window!="undefined"&&navigator&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),mhe=$P({props:{lineNumbers:{type:Boolean,default:!1},autoStyleLineNumbers:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},modelValue:{type:String,default:""},highlight:{type:Function,required:!0},tabSize:{type:Number,default:2},insertSpaces:{type:Boolean,default:!0},ignoreTabKey:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:function(){return{capture:!0,history:{stack:[],offset:-1},lineNumbersHeight:"20px",codeData:""}},watch:{modelValue:{immediate:!0,handler:function(e){e?this.codeData=e:this.codeData=""}},content:{immediate:!0,handler:function(){var e=this;this.lineNumbers&&this.$nextTick(function(){e.setLineNumbersHeight()})}},lineNumbers:function(){var e=this;this.$nextTick(function(){e.styleLineNumbers(),e.setLineNumbersHeight()})}},computed:{isEmpty:function(){return this.codeData.length===0},content:function(){var e=this.highlight(this.codeData)+"<br />";return e},lineNumbersCount:function(){var e=this.codeData.split(/\r\n|\n/).length;return e}},mounted:function(){this._recordCurrentState(),this.styleLineNumbers()},methods:{setLineNumbersHeight:function(){this.lineNumbersHeight=getComputedStyle(this.$refs.pre).height},styleLineNumbers:function(){if(!(!this.lineNumbers||!this.autoStyleLineNumbers)){var e=this.$refs.pre,t=this.$el.querySelector(".prism-editor__line-numbers"),i=window.getComputedStyle(e);this.$nextTick(function(){var n="border-top-left-radius",s="border-bottom-left-radius";if(!!t){t.style[n]=i[n],t.style[s]=i[s],e.style[n]="0",e.style[s]="0";var u=["background-color","margin-top","padding-top","font-family","font-size","line-height"];u.forEach(function(a){t.style[a]=i[a]}),t.style["margin-bottom"]="-"+i["padding-top"]}})}},_recordCurrentState:function(){var e=this.$refs.textarea;if(!!e){var t=e.value,i=e.selectionStart,n=e.selectionEnd;this._recordChange({value:t,selectionStart:i,selectionEnd:n})}},_getLines:function(e,t){return e.substring(0,t).split(`
`)},_applyEdits:function(e){var t=this.$refs.textarea,i=this.history.stack[this.history.offset];i&&t&&(this.history.stack[this.history.offset]=d0({},i,{selectionStart:t.selectionStart,selectionEnd:t.selectionEnd})),this._recordChange(e),this._updateInput(e)},_recordChange:function(e,t){t===void 0&&(t=!1);var i=this.history,n=i.stack,s=i.offset;if(n.length&&s>-1){this.history.stack=n.slice(0,s+1);var u=this.history.stack.length;if(u>a5){var a=u-a5;this.history.stack=n.slice(a,u),this.history.offset=Math.max(this.history.offset-a,0)}}var h=Date.now();if(t){var p=this.history.stack[this.history.offset];if(p&&h-p.timestamp<fhe){var m,v,x=/[^a-z0-9]([a-z0-9]+)$/i,w=(m=this._getLines(p.value,p.selectionStart).pop())===null||m===void 0?void 0:m.match(x),T=(v=this._getLines(e.value,e.selectionStart).pop())===null||v===void 0?void 0:v.match(x);if(w&&T&&T[1].startsWith(w[1])){this.history.stack[this.history.offset]=d0({},e,{timestamp:h});return}}}this.history.stack.push(d0({},e,{timestamp:h})),this.history.offset++},_updateInput:function(e){var t=this.$refs.textarea;!t||(t.value=e.value,t.selectionStart=e.selectionStart,t.selectionEnd=e.selectionEnd,this.$emit("update:modelValue",e.value))},handleChange:function(e){var t=e.target,i=t.value,n=t.selectionStart,s=t.selectionEnd;this._recordChange({value:i,selectionStart:n,selectionEnd:s},!0),this.$emit("update:modelValue",i)},_undoEdit:function(){var e=this.history,t=e.stack,i=e.offset,n=t[i-1];n&&(this._updateInput(n),this.history.offset=Math.max(i-1,0))},_redoEdit:function(){var e=this.history,t=e.stack,i=e.offset,n=t[i+1];n&&(this._updateInput(n),this.history.offset=Math.min(i+1,t.length-1))},handleKeyDown:function(e){var t=this.tabSize,i=this.insertSpaces,n=this.ignoreTabKey;if(this.$emit("keydown",e),!e.defaultPrevented){e.keyCode===dhe&&(e.target.blur(),this.$emit("blur",e));var s=e.target,u=s.value,a=s.selectionStart,h=s.selectionEnd,p=(i?" ":"	").repeat(t);if(e.keyCode===lhe&&!n&&this.capture)if(e.preventDefault(),e.shiftKey){var m=this._getLines(u,a),v=m.length-1,x=this._getLines(u,h).length-1,w=u.split(`
`).map(function(se,me){return me>=v&&me<=x&&se.startsWith(p)?se.substring(p.length):se}).join(`
`);if(u!==w){var T=m[v];this._applyEdits({value:w,selectionStart:T.startsWith(p)?a-p.length:a,selectionEnd:h-(u.length-w.length)})}}else if(a!==h){var C=this._getLines(u,a),I=C.length-1,k=this._getLines(u,h).length-1,R=C[I];this._applyEdits({value:u.split(`
`).map(function(se,me){return me>=I&&me<=k?p+se:se}).join(`
`),selectionStart:/\S/.test(R)?a+p.length:a,selectionEnd:h+p.length*(k-I+1)})}else{var z=a+p.length;this._applyEdits({value:u.substring(0,a)+p+u.substring(h),selectionStart:z,selectionEnd:z})}else if(e.keyCode===uhe){var $=a!==h,j=u.substring(0,a);if(j.endsWith(p)&&!$){e.preventDefault();var G=a-p.length;this._applyEdits({value:u.substring(0,a-p.length)+u.substring(h),selectionStart:G,selectionEnd:G})}}else if(e.keyCode===she){if(a===h){var Y=this._getLines(u,a).pop(),Z=Y==null?void 0:Y.match(/^\s+/);if(Z&&Z[0]){e.preventDefault();var H=`
`+Z[0],re=a+H.length;this._applyEdits({value:u.substring(0,a)+H+u.substring(h),selectionStart:re,selectionEnd:re})}}}else if(e.keyCode===t5||e.keyCode===r5||e.keyCode===i5||e.keyCode===n5){var ne;e.keyCode===t5&&e.shiftKey?ne=["(",")"]:e.keyCode===r5?e.shiftKey?ne=["{","}"]:ne=["[","]"]:e.keyCode===i5?e.shiftKey?ne=['"','"']:ne=["'","'"]:e.keyCode===n5&&!e.shiftKey&&(ne=["`","`"]),a!==h&&ne&&(e.preventDefault(),this._applyEdits({value:u.substring(0,a)+ne[0]+u.substring(a,h)+ne[1]+u.substring(h),selectionStart:a,selectionEnd:h+2}))}else($A?e.metaKey&&e.keyCode===Pb:e.ctrlKey&&e.keyCode===Pb)&&!e.shiftKey&&!e.altKey?(e.preventDefault(),this._undoEdit()):($A?e.metaKey&&e.keyCode===Pb&&e.shiftKey:phe?e.ctrlKey&&e.keyCode===che:e.ctrlKey&&e.keyCode===Pb&&e.shiftKey)&&!e.altKey?(e.preventDefault(),this._redoEdit()):e.keyCode===hhe&&e.ctrlKey&&($A?e.shiftKey:!0)&&(e.preventDefault(),this.capture=!this.capture)}}},render:function(){var e=this,t=jc("div",{class:"prism-editor__line-width-calc",style:"height: 0px; visibility: hidden; pointer-events: none;"},"999"),i=jc("div",{class:"prism-editor__line-numbers",style:{"min-height":this.lineNumbersHeight},"aria-hidden":"true"},[t,Array.from(Array(this.lineNumbersCount).keys()).map(function(a,h){return jc("div",{class:"prism-editor__line-number token comment"},""+ ++h)})]),n=jc("textarea",{ref:"textarea",onInput:this.handleChange,onKeydown:this.handleKeyDown,onClick:function(h){e.$emit("click",h)},onKeyup:function(h){e.$emit("keyup",h)},onFocus:function(h){e.$emit("focus",h)},onBlur:function(h){e.$emit("blur",h)},class:{"prism-editor__textarea":!0,"prism-editor__textarea--empty":this.isEmpty},spellCheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off","data-gramm":"false",placeholder:this.placeholder,"data-testid":"textarea",readonly:this.readonly,value:this.codeData}),s=jc("pre",{ref:"pre",class:"prism-editor__editor","data-testid":"preview",innerHTML:this.content}),u=jc("div",{class:"prism-editor__container"},[n,s]);return jc("div",{class:"prism-editor-wrapper"},[this.lineNumbers&&i,u])}});var lj={exports:{}};(function(r){var e=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(i){var n=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,u={},a={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function R(z){return z instanceof h?new h(z.type,R(z.content),z.alias):Array.isArray(z)?z.map(R):z.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(R){return Object.prototype.toString.call(R).slice(8,-1)},objId:function(R){return R.__id||Object.defineProperty(R,"__id",{value:++s}),R.__id},clone:function R(z,$){$=$||{};var j,G;switch(a.util.type(z)){case"Object":if(G=a.util.objId(z),$[G])return $[G];j={},$[G]=j;for(var Y in z)z.hasOwnProperty(Y)&&(j[Y]=R(z[Y],$));return j;case"Array":return G=a.util.objId(z),$[G]?$[G]:(j=[],$[G]=j,z.forEach(function(Z,H){j[H]=R(Z,$)}),j);default:return z}},getLanguage:function(R){for(;R;){var z=n.exec(R.className);if(z)return z[1].toLowerCase();R=R.parentElement}return"none"},setLanguage:function(R,z){R.className=R.className.replace(RegExp(n,"gi"),""),R.classList.add("language-"+z)},currentScript:function(){if(typeof document=="undefined")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(j){var R=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(j.stack)||[])[1];if(R){var z=document.getElementsByTagName("script");for(var $ in z)if(z[$].src==R)return z[$]}return null}},isActive:function(R,z,$){for(var j="no-"+z;R;){var G=R.classList;if(G.contains(z))return!0;if(G.contains(j))return!1;R=R.parentElement}return!!$}},languages:{plain:u,plaintext:u,text:u,txt:u,extend:function(R,z){var $=a.util.clone(a.languages[R]);for(var j in z)$[j]=z[j];return $},insertBefore:function(R,z,$,j){j=j||a.languages;var G=j[R],Y={};for(var Z in G)if(G.hasOwnProperty(Z)){if(Z==z)for(var H in $)$.hasOwnProperty(H)&&(Y[H]=$[H]);$.hasOwnProperty(Z)||(Y[Z]=G[Z])}var re=j[R];return j[R]=Y,a.languages.DFS(a.languages,function(ne,se){se===re&&ne!=R&&(this[ne]=Y)}),Y},DFS:function R(z,$,j,G){G=G||{};var Y=a.util.objId;for(var Z in z)if(z.hasOwnProperty(Z)){$.call(z,Z,z[Z],j||Z);var H=z[Z],re=a.util.type(H);re==="Object"&&!G[Y(H)]?(G[Y(H)]=!0,R(H,$,null,G)):re==="Array"&&!G[Y(H)]&&(G[Y(H)]=!0,R(H,$,Z,G))}}},plugins:{},highlightAll:function(R,z){a.highlightAllUnder(document,R,z)},highlightAllUnder:function(R,z,$){var j={callback:$,container:R,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};a.hooks.run("before-highlightall",j),j.elements=Array.prototype.slice.apply(j.container.querySelectorAll(j.selector)),a.hooks.run("before-all-elements-highlight",j);for(var G=0,Y;Y=j.elements[G++];)a.highlightElement(Y,z===!0,j.callback)},highlightElement:function(R,z,$){var j=a.util.getLanguage(R),G=a.languages[j];a.util.setLanguage(R,j);var Y=R.parentElement;Y&&Y.nodeName.toLowerCase()==="pre"&&a.util.setLanguage(Y,j);var Z=R.textContent,H={element:R,language:j,grammar:G,code:Z};function re(se){H.highlightedCode=se,a.hooks.run("before-insert",H),H.element.innerHTML=H.highlightedCode,a.hooks.run("after-highlight",H),a.hooks.run("complete",H),$&&$.call(H.element)}if(a.hooks.run("before-sanity-check",H),Y=H.element.parentElement,Y&&Y.nodeName.toLowerCase()==="pre"&&!Y.hasAttribute("tabindex")&&Y.setAttribute("tabindex","0"),!H.code){a.hooks.run("complete",H),$&&$.call(H.element);return}if(a.hooks.run("before-highlight",H),!H.grammar){re(a.util.encode(H.code));return}if(z&&i.Worker){var ne=new Worker(a.filename);ne.onmessage=function(se){re(se.data)},ne.postMessage(JSON.stringify({language:H.language,code:H.code,immediateClose:!0}))}else re(a.highlight(H.code,H.grammar,H.language))},highlight:function(R,z,$){var j={code:R,grammar:z,language:$};if(a.hooks.run("before-tokenize",j),!j.grammar)throw new Error('The language "'+j.language+'" has no grammar.');return j.tokens=a.tokenize(j.code,j.grammar),a.hooks.run("after-tokenize",j),h.stringify(a.util.encode(j.tokens),j.language)},tokenize:function(R,z){var $=z.rest;if($){for(var j in $)z[j]=$[j];delete z.rest}var G=new v;return x(G,G.head,R),m(R,G,z,G.head,0),T(G)},hooks:{all:{},add:function(R,z){var $=a.hooks.all;$[R]=$[R]||[],$[R].push(z)},run:function(R,z){var $=a.hooks.all[R];if(!(!$||!$.length))for(var j=0,G;G=$[j++];)G(z)}},Token:h};i.Prism=a;function h(R,z,$,j){this.type=R,this.content=z,this.alias=$,this.length=(j||"").length|0}h.stringify=function R(z,$){if(typeof z=="string")return z;if(Array.isArray(z)){var j="";return z.forEach(function(re){j+=R(re,$)}),j}var G={type:z.type,content:R(z.content,$),tag:"span",classes:["token",z.type],attributes:{},language:$},Y=z.alias;Y&&(Array.isArray(Y)?Array.prototype.push.apply(G.classes,Y):G.classes.push(Y)),a.hooks.run("wrap",G);var Z="";for(var H in G.attributes)Z+=" "+H+'="'+(G.attributes[H]||"").replace(/"/g,"&quot;")+'"';return"<"+G.tag+' class="'+G.classes.join(" ")+'"'+Z+">"+G.content+"</"+G.tag+">"};function p(R,z,$,j){R.lastIndex=z;var G=R.exec($);if(G&&j&&G[1]){var Y=G[1].length;G.index+=Y,G[0]=G[0].slice(Y)}return G}function m(R,z,$,j,G,Y){for(var Z in $)if(!(!$.hasOwnProperty(Z)||!$[Z])){var H=$[Z];H=Array.isArray(H)?H:[H];for(var re=0;re<H.length;++re){if(Y&&Y.cause==Z+","+re)return;var ne=H[re],se=ne.inside,me=!!ne.lookbehind,Se=!!ne.greedy,Ie=ne.alias;if(Se&&!ne.pattern.global){var ke=ne.pattern.toString().match(/[imsuy]*$/)[0];ne.pattern=RegExp(ne.pattern.source,ke+"g")}for(var Fe=ne.pattern||ne,Ce=j.next,We=G;Ce!==z.tail&&!(Y&&We>=Y.reach);We+=Ce.value.length,Ce=Ce.next){var gt=Ce.value;if(z.length>R.length)return;if(!(gt instanceof h)){var St=1,et;if(Se){if(et=p(Fe,We,R,me),!et||et.index>=R.length)break;var dt=et.index,ht=et.index+et[0].length,$e=We;for($e+=Ce.value.length;dt>=$e;)Ce=Ce.next,$e+=Ce.value.length;if($e-=Ce.value.length,We=$e,Ce.value instanceof h)continue;for(var He=Ce;He!==z.tail&&($e<ht||typeof He.value=="string");He=He.next)St++,$e+=He.value.length;St--,gt=R.slice(We,$e),et.index-=We}else if(et=p(Fe,0,gt,me),!et)continue;var dt=et.index,nt=et[0],vt=gt.slice(0,dt),Pt=gt.slice(dt+nt.length),jt=We+gt.length;Y&&jt>Y.reach&&(Y.reach=jt);var Et=Ce.prev;vt&&(Et=x(z,Et,vt),We+=vt.length),w(z,Et,St);var Wt=new h(Z,se?a.tokenize(nt,se):nt,Ie,nt);if(Ce=x(z,Et,Wt),Pt&&x(z,Ce,Pt),St>1){var Re={cause:Z+","+re,reach:jt};m(R,z,$,Ce.prev,We,Re),Y&&Re.reach>Y.reach&&(Y.reach=Re.reach)}}}}}}function v(){var R={value:null,prev:null,next:null},z={value:null,prev:R,next:null};R.next=z,this.head=R,this.tail=z,this.length=0}function x(R,z,$){var j=z.next,G={value:$,prev:z,next:j};return z.next=G,j.prev=G,R.length++,G}function w(R,z,$){for(var j=z.next,G=0;G<$&&j!==R.tail;G++)j=j.next;z.next=j,j.prev=z,R.length-=G}function T(R){for(var z=[],$=R.head.next;$!==R.tail;)z.push($.value),$=$.next;return z}if(!i.document)return i.addEventListener&&(a.disableWorkerMessageHandler||i.addEventListener("message",function(R){var z=JSON.parse(R.data),$=z.language,j=z.code,G=z.immediateClose;i.postMessage(a.highlight(j,a.languages[$],$)),G&&i.close()},!1)),a;var C=a.util.currentScript();C&&(a.filename=C.src,C.hasAttribute("data-manual")&&(a.manual=!0));function I(){a.manual||a.highlightAll()}if(!a.manual){var k=document.readyState;k==="loading"||k==="interactive"&&C&&C.defer?document.addEventListener("DOMContentLoaded",I):window.requestAnimationFrame?window.requestAnimationFrame(I):window.setTimeout(I,16)}return a}(e);r.exports&&(r.exports=t),typeof Gp!="undefined"&&(Gp.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(i){i.type==="entity"&&(i.attributes.title=i.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(n,s){var u={};u["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[s]},u.cdata=/^<!\[CDATA\[|\]\]>$/i;var a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:u}};a["language-"+s]={pattern:/[\s\S]+/,inside:t.languages[s]};var h={};h[n]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return n}),"i"),lookbehind:!0,greedy:!0,inside:a},t.languages.insertBefore("markup","cdata",h)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(i,n){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+i+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[n,"language-"+n],inside:t.languages[n]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(i){var n=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;i.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+n.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+n.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+n.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:n,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},i.languages.css.atrule.inside.rest=i.languages.css;var s=i.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t=="undefined"||typeof document=="undefined")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var i="Loading\u2026",n=function(C,I){return"\u2716 Error "+C+" while fetching file: "+I},s="\u2716 Error: File does not exist or is empty",u={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},a="data-src-status",h="loading",p="loaded",m="failed",v="pre[data-src]:not(["+a+'="'+p+'"]):not(['+a+'="'+h+'"])';function x(C,I,k){var R=new XMLHttpRequest;R.open("GET",C,!0),R.onreadystatechange=function(){R.readyState==4&&(R.status<400&&R.responseText?I(R.responseText):R.status>=400?k(n(R.status,R.statusText)):k(s))},R.send(null)}function w(C){var I=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(C||"");if(I){var k=Number(I[1]),R=I[2],z=I[3];return R?z?[k,Number(z)]:[k,void 0]:[k,k]}}t.hooks.add("before-highlightall",function(C){C.selector+=", "+v}),t.hooks.add("before-sanity-check",function(C){var I=C.element;if(I.matches(v)){C.code="",I.setAttribute(a,h);var k=I.appendChild(document.createElement("CODE"));k.textContent=i;var R=I.getAttribute("data-src"),z=C.language;if(z==="none"){var $=(/\.(\w+)$/.exec(R)||[,"none"])[1];z=u[$]||$}t.util.setLanguage(k,z),t.util.setLanguage(I,z);var j=t.plugins.autoloader;j&&j.loadLanguages(z),x(R,function(G){I.setAttribute(a,p);var Y=w(I.getAttribute("data-range"));if(Y){var Z=G.split(/\r\n?|\n/g),H=Y[0],re=Y[1]==null?Z.length:Y[1];H<0&&(H+=Z.length),H=Math.max(0,Math.min(H-1,Z.length)),re<0&&(re+=Z.length),re=Math.max(0,Math.min(re,Z.length)),G=Z.slice(H,re).join(`
`),I.hasAttribute("data-start")||I.setAttribute("data-start",String(H+1))}k.textContent=G,t.highlightElement(k)},function(G){I.setAttribute(a,m),k.textContent=G})}}),t.plugins.fileHighlight={highlight:function(I){for(var k=(I||document).querySelectorAll(v),R=0,z;z=k[R++];)t.highlightElement(z)}};var T=!1;t.fileHighlight=function(){T||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),T=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(lj);var o5=lj.exports,uj={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(r,e){(function(i,n){r.exports=n()})(Gp,function(){return function(){var t={686:function(s,u,a){a.d(u,{default:function(){return St}});var h=a(279),p=a.n(h),m=a(370),v=a.n(m),x=a(817),w=a.n(x);function T(et){try{return document.execCommand(et)}catch{return!1}}var C=function(ht){var $e=w()(ht);return T("cut"),$e},I=C;function k(et){var ht=document.documentElement.getAttribute("dir")==="rtl",$e=document.createElement("textarea");$e.style.fontSize="12pt",$e.style.border="0",$e.style.padding="0",$e.style.margin="0",$e.style.position="absolute",$e.style[ht?"right":"left"]="-9999px";var He=window.pageYOffset||document.documentElement.scrollTop;return $e.style.top="".concat(He,"px"),$e.setAttribute("readonly",""),$e.value=et,$e}var R=function(ht,$e){var He=k(ht);$e.container.appendChild(He);var dt=w()(He);return T("copy"),He.remove(),dt},z=function(ht){var $e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},He="";return typeof ht=="string"?He=R(ht,$e):ht instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(ht==null?void 0:ht.type)?He=R(ht.value,$e):(He=w()(ht),T("copy")),He},$=z;function j(et){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?j=function($e){return typeof $e}:j=function($e){return $e&&typeof Symbol=="function"&&$e.constructor===Symbol&&$e!==Symbol.prototype?"symbol":typeof $e},j(et)}var G=function(){var ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$e=ht.action,He=$e===void 0?"copy":$e,dt=ht.container,nt=ht.target,vt=ht.text;if(He!=="copy"&&He!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(nt!==void 0)if(nt&&j(nt)==="object"&&nt.nodeType===1){if(He==="copy"&&nt.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(He==="cut"&&(nt.hasAttribute("readonly")||nt.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(vt)return $(vt,{container:dt});if(nt)return He==="cut"?I(nt):$(nt,{container:dt})},Y=G;function Z(et){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Z=function($e){return typeof $e}:Z=function($e){return $e&&typeof Symbol=="function"&&$e.constructor===Symbol&&$e!==Symbol.prototype?"symbol":typeof $e},Z(et)}function H(et,ht){if(!(et instanceof ht))throw new TypeError("Cannot call a class as a function")}function re(et,ht){for(var $e=0;$e<ht.length;$e++){var He=ht[$e];He.enumerable=He.enumerable||!1,He.configurable=!0,"value"in He&&(He.writable=!0),Object.defineProperty(et,He.key,He)}}function ne(et,ht,$e){return ht&&re(et.prototype,ht),$e&&re(et,$e),et}function se(et,ht){if(typeof ht!="function"&&ht!==null)throw new TypeError("Super expression must either be null or a function");et.prototype=Object.create(ht&&ht.prototype,{constructor:{value:et,writable:!0,configurable:!0}}),ht&&me(et,ht)}function me(et,ht){return me=Object.setPrototypeOf||function(He,dt){return He.__proto__=dt,He},me(et,ht)}function Se(et){var ht=Fe();return function(){var He=Ce(et),dt;if(ht){var nt=Ce(this).constructor;dt=Reflect.construct(He,arguments,nt)}else dt=He.apply(this,arguments);return Ie(this,dt)}}function Ie(et,ht){return ht&&(Z(ht)==="object"||typeof ht=="function")?ht:ke(et)}function ke(et){if(et===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return et}function Fe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Ce(et){return Ce=Object.setPrototypeOf?Object.getPrototypeOf:function($e){return $e.__proto__||Object.getPrototypeOf($e)},Ce(et)}function We(et,ht){var $e="data-clipboard-".concat(et);if(!!ht.hasAttribute($e))return ht.getAttribute($e)}var gt=function(et){se($e,et);var ht=Se($e);function $e(He,dt){var nt;return H(this,$e),nt=ht.call(this),nt.resolveOptions(dt),nt.listenClick(He),nt}return ne($e,[{key:"resolveOptions",value:function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof dt.action=="function"?dt.action:this.defaultAction,this.target=typeof dt.target=="function"?dt.target:this.defaultTarget,this.text=typeof dt.text=="function"?dt.text:this.defaultText,this.container=Z(dt.container)==="object"?dt.container:document.body}},{key:"listenClick",value:function(dt){var nt=this;this.listener=v()(dt,"click",function(vt){return nt.onClick(vt)})}},{key:"onClick",value:function(dt){var nt=dt.delegateTarget||dt.currentTarget,vt=this.action(nt)||"copy",Pt=Y({action:vt,container:this.container,target:this.target(nt),text:this.text(nt)});this.emit(Pt?"success":"error",{action:vt,text:Pt,trigger:nt,clearSelection:function(){nt&&nt.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(dt){return We("action",dt)}},{key:"defaultTarget",value:function(dt){var nt=We("target",dt);if(nt)return document.querySelector(nt)}},{key:"defaultText",value:function(dt){return We("text",dt)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(dt){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return $(dt,nt)}},{key:"cut",value:function(dt){return I(dt)}},{key:"isSupported",value:function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],nt=typeof dt=="string"?[dt]:dt,vt=!!document.queryCommandSupported;return nt.forEach(function(Pt){vt=vt&&!!document.queryCommandSupported(Pt)}),vt}}]),$e}(p()),St=gt},828:function(s){var u=9;if(typeof Element!="undefined"&&!Element.prototype.matches){var a=Element.prototype;a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}function h(p,m){for(;p&&p.nodeType!==u;){if(typeof p.matches=="function"&&p.matches(m))return p;p=p.parentNode}}s.exports=h},438:function(s,u,a){var h=a(828);function p(x,w,T,C,I){var k=v.apply(this,arguments);return x.addEventListener(T,k,I),{destroy:function(){x.removeEventListener(T,k,I)}}}function m(x,w,T,C,I){return typeof x.addEventListener=="function"?p.apply(null,arguments):typeof T=="function"?p.bind(null,document).apply(null,arguments):(typeof x=="string"&&(x=document.querySelectorAll(x)),Array.prototype.map.call(x,function(k){return p(k,w,T,C,I)}))}function v(x,w,T,C){return function(I){I.delegateTarget=h(I.target,w),I.delegateTarget&&C.call(x,I)}}s.exports=m},879:function(s,u){u.node=function(a){return a!==void 0&&a instanceof HTMLElement&&a.nodeType===1},u.nodeList=function(a){var h=Object.prototype.toString.call(a);return a!==void 0&&(h==="[object NodeList]"||h==="[object HTMLCollection]")&&"length"in a&&(a.length===0||u.node(a[0]))},u.string=function(a){return typeof a=="string"||a instanceof String},u.fn=function(a){var h=Object.prototype.toString.call(a);return h==="[object Function]"}},370:function(s,u,a){var h=a(879),p=a(438);function m(T,C,I){if(!T&&!C&&!I)throw new Error("Missing required arguments");if(!h.string(C))throw new TypeError("Second argument must be a String");if(!h.fn(I))throw new TypeError("Third argument must be a Function");if(h.node(T))return v(T,C,I);if(h.nodeList(T))return x(T,C,I);if(h.string(T))return w(T,C,I);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function v(T,C,I){return T.addEventListener(C,I),{destroy:function(){T.removeEventListener(C,I)}}}function x(T,C,I){return Array.prototype.forEach.call(T,function(k){k.addEventListener(C,I)}),{destroy:function(){Array.prototype.forEach.call(T,function(k){k.removeEventListener(C,I)})}}}function w(T,C,I){return p(document.body,T,C,I)}s.exports=m},817:function(s){function u(a){var h;if(a.nodeName==="SELECT")a.focus(),h=a.value;else if(a.nodeName==="INPUT"||a.nodeName==="TEXTAREA"){var p=a.hasAttribute("readonly");p||a.setAttribute("readonly",""),a.select(),a.setSelectionRange(0,a.value.length),p||a.removeAttribute("readonly"),h=a.value}else{a.hasAttribute("contenteditable")&&a.focus();var m=window.getSelection(),v=document.createRange();v.selectNodeContents(a),m.removeAllRanges(),m.addRange(v),h=m.toString()}return h}s.exports=u},279:function(s){function u(){}u.prototype={on:function(a,h,p){var m=this.e||(this.e={});return(m[a]||(m[a]=[])).push({fn:h,ctx:p}),this},once:function(a,h,p){var m=this;function v(){m.off(a,v),h.apply(p,arguments)}return v._=h,this.on(a,v,p)},emit:function(a){var h=[].slice.call(arguments,1),p=((this.e||(this.e={}))[a]||[]).slice(),m=0,v=p.length;for(m;m<v;m++)p[m].fn.apply(p[m].ctx,h);return this},off:function(a,h){var p=this.e||(this.e={}),m=p[a],v=[];if(m&&h)for(var x=0,w=m.length;x<w;x++)m[x].fn!==h&&m[x].fn._!==h&&v.push(m[x]);return v.length?p[a]=v:delete p[a],this}},s.exports=u,s.exports.TinyEmitter=u}},i={};function n(s){if(i[s])return i[s].exports;var u=i[s]={exports:{}};return t[s](u,u.exports,n),u.exports}return function(){n.n=function(s){var u=s&&s.__esModule?function(){return s.default}:function(){return s};return n.d(u,{a:u}),u}}(),function(){n.d=function(s,u){for(var a in u)n.o(u,a)&&!n.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:u[a]})}}(),function(){n.o=function(s,u){return Object.prototype.hasOwnProperty.call(s,u)}}(),n(686)}().default})})(uj);var ghe=CT(uj.exports),vhe=r=>{const e=(r==null?void 0:r.appendToBody)===void 0?!0:r.appendToBody;return{toClipboard(t,i){return new Promise((n,s)=>{const u=document.createElement("button"),a=new ghe(u,{text:()=>t,action:()=>"copy",container:i!==void 0?i:document.body});a.on("success",h=>{a.destroy(),n(h)}),a.on("error",h=>{a.destroy(),s(h)}),e&&document.body.appendChild(u),u.click(),e&&document.body.removeChild(u)})}}};const _he={class:"position-relative border-radius-xl overflow-hidden shadow-lg mb-7"},yhe={class:"container border-bottom"},xhe={class:"row justify-space-between py-2"},bhe={class:"col-lg-3 me-auto"},whe={class:"lead text-dark pt-1 mb-0"},She={class:"col-lg-3"},The={class:"nav-wrapper position-relative end-0"},Mhe={class:"nav nav-pills nav-fill flex-row p-1",role:"tablist"},Ahe={class:"nav-item"},Che=["href"],Ihe=ie("i",{class:"fas fa-desktop text-sm me-2"},null,-1),Ehe=mt(" Preview "),Dhe=[Ihe,Ehe],Phe={class:"nav-item"},Lhe=["href"],khe=ie("i",{class:"fas fa-code text-sm me-2"},null,-1),Rhe=mt(" Code "),Ohe=[khe,Rhe],zhe={class:"tab-content tab-space"},Bhe=["id"],Fhe=["id"],Nhe={class:"position-relative p-4 pb-2"},Vhe=ie("i",{class:"fas fa-copy text-sm me-1"},null,-1),$he=mt(" Copy"),Ghe=[Vhe,$he],Uhe={class:"highlight"},zi={name:"View",props:{id:{type:String,required:!0},code:{type:String,required:!0},title:{type:String,required:!0},height:{type:String,default:""}},setup(r){const e=r,{toClipboard:t}=vhe(),i=tc(e.code),n=async u=>{try{await t(i.value);const h=u.target.parentElement;var a=document.createElement("div");a.classList.add("alert","alert-success","position-absolute","top-5","border-0","text-white","w-25","end-0","start-0","mt-2","mx-auto","py-2"),a.style.transform="translate3d(0px, 0px, 0px)",a.style.opacity="0",a.style.transition=".35s ease",setTimeout(function(){a.style.transform="translate3d(0px, 20px, 0px)",a.style.setProperty("opacity","1","important")},100),a.innerHTML="Code successfully copied!",h.parentElement.appendChild(a),setTimeout(function(){a.style.transform="translate3d(0px, 0px, 0px)",a.style.setProperty("opacity","0","important")},2e3),setTimeout(function(){h.parentElement.querySelector(".alert").remove()},2500)}catch(h){console.error(h)}},s=u=>o5.highlight(u,o5.languages.html);return(u,a)=>(Yt(),lr("div",_he,[ie("div",yhe,[ie("div",xhe,[ie("div",bhe,[ie("p",whe,Pi(r.title),1)]),ie("div",She,[ie("div",The,[ie("ul",Mhe,[ie("li",Ahe,[ie("a",{class:"nav-link mb-0 px-0 py-1 active","data-bs-toggle":"tab",href:`#preview-${r.id}`,role:"tab","aria-selected":"true"},Dhe,8,Che)]),ie("li",Phe,[ie("a",{class:"nav-link mb-0 px-0 py-1","data-bs-toggle":"tab",href:`#code-${r.id}`,role:"tab","aria-selected":"false"},Ohe,8,Lhe)])])])])])]),ie("div",zhe,[ie("div",{class:"tab-pane active p-2",id:`preview-${r.id}`},[ie("div",{class:$r(["overflow-auto",`${r.height&&`height-${r.height}`}`])},[ru(u.$slots,"default")],2)],8,Bhe),ie("div",{class:"tab-pane",id:`code-${r.id}`},[ie("div",Nhe,[ie("a",{class:"btn btn-sm bg-gradient-dark position-absolute end-4 mt-3 z-index-3",onClick:a[0]||(a[0]=h=>n(h)),href:"javascript:;"},Ghe),ie("figure",Uhe,[Me(zt(mhe),{class:"p-2 bg-gray-100 border-radius-xl height-800 my-editor",modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=h=>i.value=h),highlight:s,"line-numbers":"",readonly:""},null,8,["modelValue"])])])],8,Fhe)])]))}},jhe={class:"navbar navbar-expand-lg navbar-dark navbar-absolute bg-transparent shadow-none"},Hhe={class:"container"},Whe=ie("a",{class:"navbar-brand text-white",href:"javascript:;"},"Material Design",-1),qhe=ie("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbar-header-2","aria-controls":"navbar-header-2","aria-expanded":"false","aria-label":"Toggle navigation"},[ie("span",{class:"navbar-toggler-icon"})],-1),Zhe={class:"collapse navbar-collapse",id:"navbar-header-2"},Xhe={class:"navbar-nav mx-auto"},Yhe={class:"nav-item"},Khe=mt(" Home "),Jhe={class:"nav-item"},Qhe=mt(" About Us "),ede={class:"nav-item"},tde=mt(" Contact Us "),rde=au('<ul class="nav navbar-nav"><li class="nav-item"><a class="nav-link text-white" href="https://twitter.com/CreativeTim"><i class="fab fa-twitter"></i></a></li><li class="nav-item"><a class="nav-link text-white mx-2" href="https://www.facebook.com/CreativeTim"><i class="fab fa-facebook"></i></a></li><li class="nav-item"><a class="nav-link text-white" href="https://www.instagram.com/CreativeTimOfficial"><i class="fab fa-instagram"></i></a></li></ul>',1),ide=ie("span",{class:"mask bg-gradient-dark opacity-5"},null,-1),nde={class:"container"},ade={class:"row"},ode={class:"col-lg-6 col-md-7 d-flex justify-content-center flex-column"},sde=ie("h1",{class:"text-white mb-4"},"Material Kit",-1),lde=ie("p",{class:"text-white opacity-8 lead pe-5 me-5"}," The time is now for it be okay to be great. People in this world shun people for being nice. ",-1),ude={class:"buttons"},cde=mt("Get Started"),hde=mt("Read more"),dde={name:"HeaderOne",setup(r){const e="https://images.unsplash.com/photo-1520769945061-0a448c463865?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80";return(t,i)=>{const n=Tee("RouterLink");return Yt(),lr("header",null,[ie("nav",jhe,[ie("div",Hhe,[Whe,qhe,ie("div",Zhe,[ie("ul",Xhe,[ie("li",Yhe,[Me(n,{class:"nav-link text-white",to:"#"},{default:Xe(()=>[Khe]),_:1})]),ie("li",Jhe,[Me(n,{class:"nav-link text-white",to:"#"},{default:Xe(()=>[Qhe]),_:1})]),ie("li",ede,[Me(n,{class:"nav-link text-white",to:"#"},{default:Xe(()=>[tde]),_:1})])]),rde])])]),ie("div",{class:"page-header min-vh-100",style:bo({backgroundImage:`url(${e})`}),loading:"lazy"},[ide,ie("div",nde,[ie("div",ade,[ie("div",ode,[sde,lde,ie("div",ude,[Me(Lr,{color:"white",class:"mt-4"},{default:Xe(()=>[cde]),_:1}),Me(Lr,{color:"none",class:"text-white shadow-none mt-4"},{default:Xe(()=>[hde]),_:1})])])])])],4)])}}},fde=`<setup>
//Vue Material Kit 2 components
import MaterialButton from "@/components/MaterialButton.vue";
<\/script>
<template>

  <header>
    <nav class="navbar navbar-expand-lg navbar-dark navbar-absolute bg-transparent shadow-none" >
      <div class="container">
        <a class="navbar-brand text-white" href="javascript:;">Material Design</a>
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbar-header-2"
          aria-controls="navbar-header-2"
          aria-expanded="false"
          aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbar-header-2">
          <ul class="navbar-nav mx-auto">
            <li class="nav-item"><RouterLink class="nav-link text-white" to="#"> Home </RouterLink></li>
            <li class="nav-item">
              <RouterLink class="nav-link text-white" to="#">About Us</RouterLink></li>
            <li class="nav-item">
              <RouterLink class="nav-link text-white" to="#">Contact Us</RouterLink></li>
          </ul>
          <ul class="nav navbar-nav">
            <li class="nav-item">
              <a
                class="nav-link text-white"
                href="https://twitter.com/CreativeTim">
                <i class="fab fa-twitter"></i>
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link text-white mx-2"
                href="https://www.facebook.com/CreativeTim">
                <i class="fab fa-facebook"></i>
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link text-white"
                href="https://www.instagram.com/CreativeTimOfficial">
                <i class="fab fa-instagram"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="page-header min-vh-100"
      :style="{
        backgroundImage: 'url(https://images.unsplash.com/photo-1520769945061-0a448c463865?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80)',
      }"
      loading="lazy">
      <span class="mask bg-gradient-dark opacity-5"></span>
      <div class="container">
        <div class="row">
          <div class="col-lg-6 col-md-7 d-flex justify-content-center flex-column">
            <h1 class="text-white mb-4">Material Kit</h1>
            <p class="text-white opacity-8 lead pe-5 me-5">
              The time is now for it be okay to be great. People in this world
              shun people for being nice.
            </p>
            <div class="buttons">
              <MaterialButton color="white" class="mt-4"
                >Get Started</MaterialButton>
              <MaterialButton color="none" class="text-white shadow-none mt-4"
                >Read more</MaterialButton>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>
</template>`;function wa(){var r=document.querySelectorAll(".nav-pills");function e(){r.forEach(function(i,n){var s=document.createElement("div"),u=i.querySelector("li:first-child .nav-link"),a=u.cloneNode();a.innerHTML="-",s.classList.add("moving-tab","position-absolute","nav-link"),s.appendChild(a),i.appendChild(s),i.getElementsByTagName("li").length,s.style.padding="0px",s.style.width=i.querySelector("li:nth-child(1)").offsetWidth+"px",s.style.transform="translate3d(0px, 0px, 0px)",s.style.transition=".5s ease",i.onmouseover=function(h){let m=t(h).closest("li");if(m){let v=Array.from(m.closest("ul").children),x=v.indexOf(m)+1;i.querySelector("li:nth-child("+x+") .nav-link").onclick=function(){s=i.querySelector(".moving-tab");let w=0;if(i.classList.contains("flex-column")){for(var T=1;T<=v.indexOf(m);T++)w+=i.querySelector("li:nth-child("+T+")").offsetHeight;s.style.transform="translate3d(0px,"+w+"px, 0px)",s.style.height=i.querySelector("li:nth-child("+T+")").offsetHeight}else{for(var T=1;T<=v.indexOf(m);T++)w+=i.querySelector("li:nth-child("+T+")").offsetWidth;s.style.transform="translate3d("+w+"px, 0px, 0px)",s.style.width=i.querySelector("li:nth-child("+x+")").offsetWidth+"px"}}}}})}setTimeout(function(){e()},100),window.addEventListener("resize",function(i){r.forEach(function(n,s){n.querySelector(".moving-tab").remove();var u=document.createElement("div"),a=n.querySelector(".nav-link.active").cloneNode();a.innerHTML="-",u.classList.add("moving-tab","position-absolute","nav-link"),u.appendChild(a),n.appendChild(u),u.style.padding="0px",u.style.transition=".5s ease";let h=n.querySelector(".nav-link.active").parentElement;if(h){let m=Array.from(h.closest("ul").children),v=m.indexOf(h)+1,x=0;if(n.classList.contains("flex-column")){for(var p=1;p<=m.indexOf(h);p++)x+=n.querySelector("li:nth-child("+p+")").offsetHeight;u.style.transform="translate3d(0px,"+x+"px, 0px)",u.style.width=n.querySelector("li:nth-child("+v+")").offsetWidth+"px",u.style.height=n.querySelector("li:nth-child("+p+")").offsetHeight}else{for(var p=1;p<=m.indexOf(h);p++)x+=n.querySelector("li:nth-child("+p+")").offsetWidth;u.style.transform="translate3d("+x+"px, 0px, 0px)",u.style.width=n.querySelector("li:nth-child("+v+")").offsetWidth+"px"}}}),window.innerWidth<991?r.forEach(function(n,s){if(!n.classList.contains("flex-column")){n.classList.remove("flex-row"),n.classList.add("flex-column","on-resize");let h=n.querySelector(".nav-link.active").parentElement,p=Array.from(h.closest("ul").children);p.indexOf(h)+1;let m=0;for(var u=1;u<=p.indexOf(h);u++)m+=n.querySelector("li:nth-child("+u+")").offsetHeight;var a=document.querySelector(".moving-tab");a.style.width=n.querySelector("li:nth-child(1)").offsetWidth+"px",a.style.transform="translate3d(0px,"+m+"px, 0px)"}}):r.forEach(function(n,s){if(n.classList.contains("on-resize")){n.classList.remove("flex-column","on-resize"),n.classList.add("flex-row");let h=n.querySelector(".nav-link.active").parentElement,p=Array.from(h.closest("ul").children),m=p.indexOf(h)+1,v=0;for(var u=1;u<=p.indexOf(h);u++)v+=n.querySelector("li:nth-child("+u+")").offsetWidth;var a=document.querySelector(".moving-tab");a.style.transform="translate3d("+v+"px, 0px, 0px)",a.style.width=n.querySelector("li:nth-child("+m+")").offsetWidth+"px"}})}),window.innerWidth<991&&r.forEach(function(i,n){i.classList.contains("flex-row")&&(i.classList.remove("flex-row"),i.classList.add("flex-column","on-resize"))});function t(i){return i=i||window.event,i.target||i.srcElement}}const pde={name:"HeadersView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Page Headers",breadcrumb:[{label:"Page Sections",route:"/sections/page-sections/page-headers"},{label:"Page Headers"}]},{default:Xe(()=>[Me(zi,{title:"Header 1",code:zt(fde),id:"header-1"},{default:Xe(()=>[Me(dde)]),_:1},8,["code"])]),_:1}))}};var cj={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(Gp,function(){var t,i,n;function s(a,h){if(!t)t=h;else if(!i)i=h;else{var p="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+t+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",m={};t(m),n=h(m),typeof window!="undefined"&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([p],{type:"text/javascript"})))}}s(["exports"],function(a){var h="3.2.0";let p;const m={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(p==null){const l=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{p={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):l}catch{p=l}}return p},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!m.API_URL)return null;try{const l=new URL(m.API_URL);return l.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":l.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},v={supported:!1,testSupport:function(l){!T&&w&&(C?k(l):x=l)}};let x,w,T=!1,C=!1;const I=typeof self!="undefined"?self:{};function k(l){const o=l.createTexture();l.bindTexture(l.TEXTURE_2D,o);try{if(l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,w),l.isContextLost())return;v.supported=!0}catch{}l.deleteTexture(o),T=!0}I.document&&(w=I.document.createElement("img"),w.onload=function(){x&&k(x),x=null,C=!0},w.onerror=function(){T=!0,x=null},w.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const R="01";function z(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var $=j;function j(l,o,c,d){this.cx=3*l,this.bx=3*(c-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(d-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=o,this.p2x=c,this.p2y=d}j.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,o){if(o===void 0&&(o=1e-6),l<0)return 0;if(l>1)return 1;for(var c=l,d=0;d<8;d++){var g=this.sampleCurveX(c)-l;if(Math.abs(g)<o)return c;var y=this.sampleCurveDerivativeX(c);if(Math.abs(y)<1e-6)break;c-=g/y}var b=0,M=1;for(c=l,d=0;d<20&&(g=this.sampleCurveX(c),!(Math.abs(g-l)<o));d++)l>g?b=c:M=c,c=.5*(M-b)+b;return c},solve:function(l,o){return this.sampleCurveY(this.solveCurveX(l,o))}};var G=z($),Y=Z;function Z(l,o){this.x=l,this.y=o}Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,o){return this.clone()._rotateAround(l,o)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var o=l.x-this.x,c=l.y-this.y;return o*o+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,o){return Math.atan2(this.x*o-this.y*l,this.x*l+this.y*o)},_matMult:function(l){var o=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=o,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var o=Math.cos(l),c=Math.sin(l),d=c*this.x+o*this.y;return this.x=o*this.x-c*this.y,this.y=d,this},_rotateAround:function(l,o){var c=Math.cos(l),d=Math.sin(l),g=o.y+d*(this.x-o.x)+c*(this.y-o.y);return this.x=o.x+c*(this.x-o.x)-d*(this.y-o.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Z.convert=function(l){return l instanceof Z?l:Array.isArray(l)?new Z(l[0],l[1]):l};var H=z(Y);const re=Math.PI/180,ne=180/Math.PI;function se(l){return l*re}function me(l){return l*ne}const Se=[[0,0],[1,0],[1,1],[0,1]];function Ie(l){if(l<=0)return 0;if(l>=1)return 1;const o=l*l,c=o*l;return 4*(l<.5?c:3*(l-o)+c-.75)}function ke(l,o,c,d){const g=new G(l,o,c,d);return function(y){return g.solve(y)}}const Fe=ke(.25,.1,.25,1);function Ce(l,o,c){return Math.min(c,Math.max(o,l))}function We(l,o,c){return(c=Ce((c-l)/(o-l),0,1))*c*(3-2*c)}function gt(l,o,c){const d=c-o,g=((l-o)%d+d)%d+o;return g===o?c:g}function St(l,o,c){if(!l.length)return c(null,[]);let d=l.length;const g=new Array(l.length);let y=null;l.forEach((b,M)=>{o(b,(E,P)=>{E&&(y=E),g[M]=P,--d==0&&c(y,g)})})}function et(l){const o=[];for(const c in l)o.push(l[c]);return o}function ht(l,...o){for(const c of o)for(const d in c)l[d]=c[d];return l}let $e=1;function He(){return $e++}function dt(){return function l(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,l)}()}function nt(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))}function vt(l){return!!l&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(l)}function Pt(l,o){l.forEach(c=>{o[c]&&(o[c]=o[c].bind(o))})}function jt(l,o){return l.indexOf(o,l.length-o.length)!==-1}function Et(l,o,c){const d={};for(const g in l)d[g]=o.call(c||this,l[g],g,l);return d}function Wt(l,o,c){const d={};for(const g in l)o.call(c||this,l[g],g,l)&&(d[g]=l[g]);return d}function Re(l){return Array.isArray(l)?l.map(Re):typeof l=="object"&&l?Et(l,Re):l}const Ve={};function Ue(l){Ve[l]||(typeof console!="undefined"&&console.warn(l),Ve[l]=!0)}function Be(l,o,c){return(c.y-l.y)*(o.x-l.x)>(o.y-l.y)*(c.x-l.x)}function ce(l){let o=0;for(let c,d,g=0,y=l.length,b=y-1;g<y;b=g++)c=l[g],d=l[b],o+=(d.x-c.x)*(c.y+d.y);return o}function ye([l,o,c]){const d=se(o+90),g=se(c);return{x:l*Math.cos(d)*Math.sin(g),y:l*Math.sin(d)*Math.sin(g),z:l*Math.cos(g),azimuthal:o,polar:c}}function De(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function qe(l){const o={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,d,g,y)=>{const b=g||y;return o[d]=!b||b.toLowerCase(),""}),o["max-age"]){const c=parseInt(o["max-age"],10);isNaN(c)?delete o["max-age"]:o["max-age"]=c}return o}let Ze=null;function Je(l){try{const o=self[l];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}}function xt(l,o){return[l[4*o],l[4*o+1],l[4*o+2],l[4*o+3]]}function ot(l,o,c,d){for(;o<c;){const g=o+c>>1;l[g]<d?o=g+1:c=g}return o}function bt(l,o,c,d){for(;o<c;){const g=o+c>>1;l[g]<=d?o=g+1:c=g}return o}const qt="mapbox-tiles";let Kt=500,Cr=50,Rr,Ur;function Kr(){try{return caches}catch{}}function ei(){const l=Kr();l&&!Rr&&(Rr=l.open(qt))}function fi(l){const o=l.indexOf("?");if(o<0)return l;const c=function(g){const y=g.indexOf("?");return y>0?g.slice(y+1).split("&"):[]}(l),d=c.filter(g=>{const y=g.split("=");return y[0]==="language"||y[0]==="worldview"});return d.length?`${l.slice(0,o)}?${d.join("&")}`:l.slice(0,o)}let Ti=1/0;const wn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(wn);class Ki extends Error{constructor(o,c,d){c===401&&Xt(d)&&(o+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(o),this.status=c,this.url=d}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Ji=De()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,za=function(l,o){if(!(/^file:/.test(c=l.url)||/^file:/.test(Ji())&&!/^\w+:/.test(c))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(d,g){const y=new AbortController,b=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,referrer:Ji(),referrerPolicy:d.referrerPolicy,signal:y.signal});let M=!1,E=!1;const P=(O=b.url).indexOf("sku=")>0&&Xt(O);var O;d.type==="json"&&b.headers.set("Accept","application/json");const F=(U,q,K)=>{if(E)return;if(U&&U.message!=="SecurityError"&&Ue(U.toString()),q&&K)return V(q);const Q=Date.now();fetch(b).then(ae=>{if(ae.ok){const ge=P?ae.clone():null;return V(ae,ge,Q)}return g(new Ki(ae.statusText,ae.status,d.url))}).catch(ae=>{ae.name!=="AbortError"&&g(new Error(`${ae.message} ${d.url}`))})},V=(U,q,K)=>{(d.type==="arrayBuffer"?U.arrayBuffer():d.type==="json"?U.json():U.text()).then(Q=>{E||(q&&K&&function(ae,ge,_e){if(ei(),!Rr)return;const be={status:ge.status,statusText:ge.statusText,headers:new Headers};ge.headers.forEach((Ge,Ke)=>be.headers.set(Ke,Ge));const Ae=qe(ge.headers.get("Cache-Control")||"");if(Ae["no-store"])return;Ae["max-age"]&&be.headers.set("Expires",new Date(_e+1e3*Ae["max-age"]).toUTCString());const Pe=be.headers.get("Expires");Pe&&(new Date(Pe).getTime()-_e<42e4||function(Ge,Ke){if(Ur===void 0)try{new Response(new ReadableStream),Ur=!0}catch{Ur=!1}Ur?Ke(Ge.body):Ge.blob().then(Ke)}(ge,Ge=>{const Ke=new Response(Ge,be);ei(),Rr&&Rr.then(rt=>rt.put(fi(ae.url),Ke)).catch(rt=>Ue(rt.message))}))}(b,q,K),M=!0,g(null,Q,U.headers.get("Cache-Control"),U.headers.get("Expires")))}).catch(Q=>{E||g(new Error(Q.message))})};return P?function(U,q){if(ei(),!Rr)return q(null);const K=fi(U.url);Rr.then(Q=>{Q.match(K).then(ae=>{const ge=function(_e){if(!_e)return!1;const be=new Date(_e.headers.get("Expires")||0),Ae=qe(_e.headers.get("Cache-Control")||"");return be>Date.now()&&!Ae["no-cache"]}(ae);Q.delete(K),ge&&Q.put(K,ae.clone()),q(null,ae,ge)}).catch(q)}).catch(q)}(b,F):F(null,null),{cancel:()=>{E=!0,M||y.abort()}}}(l,o);if(De()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,o,void 0,!0)}var c;return function(d,g){const y=new XMLHttpRequest;y.open(d.method||"GET",d.url,!0),d.type==="arrayBuffer"&&(y.responseType="arraybuffer");for(const b in d.headers)y.setRequestHeader(b,d.headers[b]);return d.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=d.credentials==="include",y.onerror=()=>{g(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){let b=y.response;if(d.type==="json")try{b=JSON.parse(y.response)}catch(M){return g(M)}g(null,b,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else g(new Ki(y.statusText,y.status,d.url))},y.send(d.body),{cancel:()=>y.abort()}}(l,o)},qn=function(l,o){return za(ht(l,{type:"arrayBuffer"}),o)};function Go(l){const o=document.createElement("a");return o.href=l,o.protocol===location.protocol&&o.host===location.host}const fs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Zn,At;Zn=[],At=0;const Lt=function(l,o){if(v.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*"),At>=m.MAX_PARALLEL_IMAGE_REQUESTS){const y={requestParameters:l,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return Zn.push(y),y}At++;let c=!1;const d=()=>{if(!c)for(c=!0,At--;Zn.length&&At<m.MAX_PARALLEL_IMAGE_REQUESTS;){const y=Zn.shift(),{requestParameters:b,callback:M,cancelled:E}=y;E||(y.cancel=Lt(b,M).cancel)}},g=qn(l,(y,b,M,E)=>{d(),y?o(y):b&&(self.createImageBitmap?function(P,O){const F=new Blob([new Uint8Array(P)],{type:"image/png"});createImageBitmap(F).then(V=>{O(null,V)}).catch(V=>{O(new Error(`Could not load image because of ${V.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(b,(P,O)=>o(P,O,M,E)):function(P,O){const F=new Image;F.onload=()=>{O(null,F),URL.revokeObjectURL(F.src),F.onload=null,requestAnimationFrame(()=>{F.src=fs})},F.onerror=()=>O(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const V=new Blob([new Uint8Array(P)],{type:"image/png"});F.src=P.byteLength?URL.createObjectURL(V):fs}(b,(P,O)=>o(P,O,M,E)))});return{cancel:()=>{g.cancel(),d()}}},Vt="NO_ACCESS_TOKEN";function Gt(l){return l.indexOf("mapbox:")===0}function Xt(l){return m.API_URL_REGEX.test(l)}function ir(l){return m.API_CDN_URL_REGEX.test(l)}function ar(l){return m.API_STYLE_REGEX.test(l)&&!er(l)}function er(l){return m.API_SPRITE_REGEX.test(l)}const pr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Jt(l){const o=l.match(pr);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function jr(l){const o=l.params.length?`?${l.params.join("&")}`:"";return`${l.protocol}://${l.authority}${l.path}${o}`}const Ai="mapbox.eventData";function Tr(l){if(!l)return null;const o=l.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(decodeURIComponent(atob(o[1]).split("").map(c=>"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Ri{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const c=Tr(m.ACCESS_TOKEN);let d="";return d=c&&c.u?btoa(encodeURIComponent(c.u).replace(/%([0-9A-F]{2})/g,(g,y)=>String.fromCharCode(Number("0x"+y)))):m.ACCESS_TOKEN||"",o?`${Ai}.${o}:${d}`:`${Ai}:${d}`}fetchEventData(){const o=Je("localStorage"),c=this.getStorageKey(),d=this.getStorageKey("uuid");if(o)try{const g=localStorage.getItem(c);g&&(this.eventData=JSON.parse(g));const y=localStorage.getItem(d);y&&(this.anonId=y)}catch{Ue("Unable to read from LocalStorage")}}saveEventData(){const o=Je("localStorage"),c=this.getStorageKey(),d=this.getStorageKey("uuid"),g=this.anonId;if(o&&g)try{localStorage.setItem(d,g),Object.keys(this.eventData).length>=1&&localStorage.setItem(c,JSON.stringify(this.eventData))}catch{Ue("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,c,d,g){if(!m.EVENTS_URL)return;const y=Jt(m.EVENTS_URL);y.params.push(`access_token=${g||m.ACCESS_TOKEN||""}`);const b={event:this.type,created:new Date(o).toISOString()},M=c?ht(b,c):b,E={url:jr(y),headers:{"Content-Type":"text/plain"},body:JSON.stringify([M])};this.pendingRequest=function(P,O){return za(ht(P,{method:"POST"}),O)}(E,P=>{this.pendingRequest=null,d(P),this.saveEventData(),this.processRequests(g)})}queueRequest(o,c){this.queue.push(o),this.processRequests(c)}}const Ci=new class extends Ri{constructor(l){super("appUserTurnstile"),this._customAccessToken=l}postTurnstileEvent(l,o){m.EVENTS_URL&&m.ACCESS_TOKEN&&Array.isArray(l)&&l.some(c=>Gt(c)||Xt(c))&&this.queueRequest(Date.now(),o)}processRequests(l){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=Tr(m.ACCESS_TOKEN),c=o?o.u:m.ACCESS_TOKEN;let d=c!==this.eventData.tokenU;vt(this.anonId)||(this.anonId=dt(),d=!0);const g=this.queue.shift();if(this.eventData.lastSuccess){const y=new Date(this.eventData.lastSuccess),b=new Date(g),M=(g-this.eventData.lastSuccess)/864e5;d=d||M>=1||M<-1||y.getDate()!==b.getDate()}else d=!0;d?this.postEvent(g,{sdkIdentifier:"mapbox-gl-js",sdkVersion:h,skuId:R,"enabled.telemetry":!1,userId:this.anonId},y=>{y||(this.eventData.lastSuccess=g,this.eventData.tokenU=c)},l):this.processRequests()}},vn=Ci.postTurnstileEvent.bind(Ci),In=new class extends Ri{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(l,o,c,d){this.skuToken=o,this.errorCb=d,m.EVENTS_URL&&(c||m.ACCESS_TOKEN?this.queueRequest({id:l,timestamp:Date.now()},c):this.errorCb(new Error(Vt)))}processRequests(l){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:c}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),vt(this.anonId)||(this.anonId=dt()),this.postEvent(c,{sdkIdentifier:"mapbox-gl-js",sdkVersion:h,skuId:R,skuToken:this.skuToken,userId:this.anonId},d=>{d?this.errorCb(d):o&&(this.success[o]=!0)},l))}},Qn=In.postMapLoadEvent.bind(In),ja=new class extends Ri{constructor(){super("gljs.performance")}postPerformanceEvent(l,o){m.EVENTS_URL&&(l||m.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},l)}processRequests(l){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,performanceData:c}=this.queue.shift(),d=function(g){const y=performance.getEntriesByType("resource"),b=performance.getEntriesByType("mark"),M=function(U){const q={};if(U){for(const K in U)if(K!=="other")for(const Q of U[K]){const ae=`${K}ResolveRangeMin`,ge=`${K}ResolveRangeMax`,_e=`${K}RequestCount`,be=`${K}RequestCachedCount`;q[ae]=Math.min(q[ae]||1/0,Q.startTime),q[ge]=Math.max(q[ge]||-1/0,Q.responseEnd);const Ae=Pe=>{q[Pe]===void 0&&(q[Pe]=0),++q[Pe]};Q.transferSize!==void 0&&Q.transferSize===0&&Ae(be),Ae(_e)}}return q}(function(U,q){const K={};if(U)for(const Q of U){const ae=q(Q);K[ae]===void 0&&(K[ae]=[]),K[ae].push(Q)}return K}(y,uu)),E=window.devicePixelRatio,P=navigator.connection||navigator.mozConnection||navigator.webkitConnection,O=P?P.effectiveType:void 0,F={counters:[],metadata:[],attributes:[]},V=(U,q,K)=>{K!=null&&U.push({name:q,value:K.toString()})};for(const U in M)V(F.counters,U,M[U]);if(g.interactionRange[0]!==1/0&&g.interactionRange[1]!==-1/0&&(V(F.counters,"interactionRangeMin",g.interactionRange[0]),V(F.counters,"interactionRangeMax",g.interactionRange[1])),b)for(const U of Object.keys(ps)){const q=ps[U],K=b.find(Q=>Q.name===q);K&&V(F.counters,q,K.startTime)}return V(F.counters,"visibilityHidden",g.visibilityHidden),V(F.attributes,"style",function(U){if(U)for(const q of U){const K=q.name.split("?")[0];if(ar(K)){const Q=K.split("/").slice(-2);if(Q.length===2)return`mapbox://styles/${Q[0]}/${Q[1]}`}}}(y)),V(F.attributes,"terrainEnabled",g.terrainEnabled?"true":"false"),V(F.attributes,"fogEnabled",g.fogEnabled?"true":"false"),V(F.attributes,"projection",g.projection),V(F.attributes,"zoom",g.zoom),V(F.metadata,"devicePixelRatio",E),V(F.metadata,"connectionEffectiveType",O),V(F.metadata,"navigatorUserAgent",navigator.userAgent),V(F.metadata,"screenWidth",window.screen.width),V(F.metadata,"screenHeight",window.screen.height),V(F.metadata,"windowWidth",window.innerWidth),V(F.metadata,"windowHeight",window.innerHeight),V(F.metadata,"mapWidth",g.width/E),V(F.metadata,"mapHeight",g.height/E),V(F.metadata,"webglRenderer",g.renderer),V(F.metadata,"webglVendor",g.vendor),V(F.metadata,"sdkVersion",h),V(F.metadata,"sdkIdentifier","mapbox-gl-js"),F}(c);for(const g of d.metadata);for(const g of d.counters);for(const g of d.attributes);this.postEvent(o,d,()=>{},l)}},no=ja.postPerformanceEvent.bind(ja),Ba=new class extends Ri{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(l,o,c,d){if(!m.API_URL||!m.SESSION_PATH)return;const g=Jt(m.API_URL+m.SESSION_PATH);g.params.push(`sku=${o||""}`),g.params.push(`access_token=${d||m.ACCESS_TOKEN||""}`);const y={url:jr(g),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(b,M){return za(ht(b,{method:"GET"}),M)}(y,b=>{this.pendingRequest=null,c(b),this.saveEventData(),this.processRequests(d)})}getSessionAPI(l,o,c,d){this.skuToken=o,this.errorCb=d,m.SESSION_PATH&&m.API_URL&&(c||m.ACCESS_TOKEN?this.queueRequest({id:l,timestamp:Date.now()},c):this.errorCb(new Error(Vt)))}processRequests(l){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:c}=this.queue.shift();o&&this.success[o]||this.getSession(c,this.skuToken,d=>{d?this.errorCb(d):o&&(this.success[o]=!0)},l)}},ia=Ba.getSessionAPI.bind(Ba),Sa=new Set,ps={create:"create",load:"load",fullLoad:"fullLoad"};function uu(l){const o=l.name.split("?")[0];return ir(o)&&o.includes("mapbox-gl.js")?"javascript":ir(o)&&o.includes("mapbox-gl.css")?"css":function(c){return m.API_FONTS_REGEX.test(c)}(o)?"fontRange":er(o)?"sprite":ar(o)?"style":function(c){return m.API_TILEJSON_REGEX.test(c)}(o)?"tilejson":"other"}function _h(l){const o=l?l.url.toString():void 0;return o?performance.getEntriesByName(o):[]}let cc,hc,yh,cu,Ns;function sm(){return cc==null&&(cc=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),cc}const ma={now:()=>cu!==void 0?cu:performance.now(),setNow(l){cu=l},restoreNow(){cu=void 0},frame(l){const o=requestAnimationFrame(l);return{cancel:()=>cancelAnimationFrame(o)}},getImageData(l,o=0){const{width:c,height:d}=l;Ns||(Ns=document.createElement("canvas"));const g=Ns.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(c>Ns.width||d>Ns.height)&&(Ns.width=c,Ns.height=d),g.clearRect(-o,-o,c+2*o,d+2*o),g.drawImage(l,0,0,c,d),g.getImageData(-o,-o,c+2*o,d+2*o)},resolveURL:l=>(hc||(hc=document.createElement("a")),hc.href=l,hc.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(yh==null&&(yh=window.matchMedia("(prefers-reduced-motion: reduce)")),yh.matches)},hasCanvasFingerprintNoise(){if(!sm())return!1;const l=new OffscreenCanvas(85,1),o=l.getContext("2d",{willReadFrequently:!0});let c=0;for(let g=0;g<l.width;++g)o.fillStyle=`rgba(${c++},${c++},${c++}, 255)`,o.fillRect(g,0,1,1);const d=o.getImageData(0,0,l.width,l.height);c=0;for(let g=0;g<d.data.length;++g)if(g%4!=3&&c++!==d.data[g])return!0;return!1}};function dc(l,o,c){c[l]&&c[l].indexOf(o)!==-1||(c[l]=c[l]||[],c[l].push(o))}function Vs(l,o,c){if(c&&c[l]){const d=c[l].indexOf(o);d!==-1&&c[l].splice(d,1)}}class ao{constructor(o,c={}){ht(this,c),this.type=o}}class $s extends ao{constructor(o,c={}){super("error",ht({error:o},c))}}class Mo{on(o,c){return this._listeners=this._listeners||{},dc(o,c,this._listeners),this}off(o,c){return Vs(o,c,this._listeners),Vs(o,c,this._oneTimeListeners),this}once(o,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},dc(o,c,this._oneTimeListeners),this):new Promise(d=>this.once(o,d))}fire(o,c){typeof o=="string"&&(o=new ao(o,c||{}));const d=o.type;if(this.listens(d)){o.target=this;const g=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const M of g)M.call(this,o);const y=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const M of y)Vs(d,M,this._oneTimeListeners),M.call(this,o);const b=this._eventedParent;b&&(ht(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(o))}else o instanceof $s&&console.error(o.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,c){return this._eventedParent=o,this._eventedParentData=c,this}}var ut=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"expression":{},"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","default":[0,1],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');class mr{constructor(o,c,d,g){this.message=(o?`${o}: `:"")+d,g&&(this.identifier=g),c!=null&&c.__line__&&(this.line=c.__line__)}}class oo extends mr{}function oa(l,...o){for(const c of o)for(const d in c)l[d]=c[d];return l}function En(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function Uo(l){if(Array.isArray(l))return l.map(Uo);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const o={};for(const c in l)o[c]=Uo(l[c]);return o}return En(l)}class Gv extends Error{constructor(o,c){super(c),this.message=c,this.key=o}}var so=Gv;class xh{constructor(o,c=[]){this.parent=o,this.bindings={};for(const[d,g]of c)this.bindings[d]=g}concat(o){return new xh(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}var lm=xh;const Fa={kind:"null"},Ot={kind:"number"},hi={kind:"string"},yi={kind:"boolean"},lo={kind:"color"},Sl={kind:"object"},oi={kind:"value"},Tl={kind:"collator"},Gs={kind:"formatted"},fc={kind:"resolvedImage"};function Ta(l,o){return{kind:"array",itemType:l,N:o}}function qi(l){if(l.kind==="array"){const o=qi(l.itemType);return typeof l.N=="number"?`array<${o}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${o}>`}return l.kind}const bh=[Fa,Ot,hi,yi,lo,Gs,Sl,Ta(oi),fc];function Ao(l,o){if(o.kind==="error")return null;if(l.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!Ao(l.itemType,o.itemType))&&(typeof l.N!="number"||l.N===o.N))return null}else{if(l.kind===o.kind)return null;if(l.kind==="value"){for(const c of bh)if(!Ao(c,o))return null}}return`Expected ${qi(l)} but found ${qi(o)} instead.`}function Ml(l,o){return o.some(c=>c.kind===l.kind)}function ms(l,o){return o.some(c=>c==="null"?l===null:c==="array"?Array.isArray(l):c==="object"?l&&!Array.isArray(l)&&typeof l=="object":c===typeof l)}var pc,Al={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Cl(l){return(l=Math.round(l))<0?0:l>255?255:l}function hu(l){return Cl(l[l.length-1]==="%"?parseFloat(l)/100*255:parseInt(l))}function mc(l){return(o=l[l.length-1]==="%"?parseFloat(l)/100:parseFloat(l))<0?0:o>1?1:o;var o}function gs(l,o,c){return c<0?c+=1:c>1&&(c-=1),6*c<1?l+(o-l)*c*6:2*c<1?o:3*c<2?l+(o-l)*(2/3-c)*6:l}try{pc={}.parseCSSColor=function(l){var o,c=l.replace(/ /g,"").toLowerCase();if(c in Al)return Al[c].slice();if(c[0]==="#")return c.length===4?(o=parseInt(c.substr(1),16))>=0&&o<=4095?[(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1]:null:c.length===7&&(o=parseInt(c.substr(1),16))>=0&&o<=16777215?[(16711680&o)>>16,(65280&o)>>8,255&o,1]:null;var d=c.indexOf("("),g=c.indexOf(")");if(d!==-1&&g+1===c.length){var y=c.substr(0,d),b=c.substr(d+1,g-(d+1)).split(","),M=1;switch(y){case"rgba":if(b.length!==4)return null;M=mc(b.pop());case"rgb":return b.length!==3?null:[hu(b[0]),hu(b[1]),hu(b[2]),M];case"hsla":if(b.length!==4)return null;M=mc(b.pop());case"hsl":if(b.length!==3)return null;var E=(parseFloat(b[0])%360+360)%360/360,P=mc(b[1]),O=mc(b[2]),F=O<=.5?O*(P+1):O+P-O*P,V=2*O-F;return[Cl(255*gs(V,F,E+1/3)),Cl(255*gs(V,F,E)),Cl(255*gs(V,F,E-1/3)),M];default:return null}}return null}}catch{}class Ma{constructor(o,c,d,g=1){this.r=o,this.g=c,this.b=d,this.a=g}static parse(o){if(!o)return;if(o instanceof Ma)return o;if(typeof o!="string")return;const c=pc(o);return c?new Ma(c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3]):void 0}toString(){const[o,c,d,g]=this.toArray();return`rgba(${Math.round(o)},${Math.round(c)},${Math.round(d)},${g})`}toArray(){const{r:o,g:c,b:d,a:g}=this;return g===0?[0,0,0,0]:[255*o/g,255*c/g,255*d/g,g]}toArray01(){const{r:o,g:c,b:d,a:g}=this;return g===0?[0,0,0,0]:[o/g,c/g,d/g,g]}toArray01Scaled(o){const{r:c,g:d,b:g,a:y}=this;return y===0?[0,0,0]:[c/y*o,d/y*o,g/y*o]}toArray01PremultipliedAlpha(){const{r:o,g:c,b:d,a:g}=this;return[o,c,d,g]}toArray01Linear(){const{r:o,g:c,b:d,a:g}=this;return g===0?[0,0,0,0]:[Math.pow(o/g,2.2),Math.pow(c/g,2.2),Math.pow(d/g,2.2),g]}}Ma.black=new Ma(0,0,0,1),Ma.white=new Ma(1,1,1,1),Ma.transparent=new Ma(0,0,0,0),Ma.red=new Ma(1,0,0,1),Ma.blue=new Ma(0,0,1,1);var sn=Ma;class qd{constructor(o,c,d){this.sensitivity=o?c?"variant":"case":c?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,c){return this.collator.compare(o,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class jo{constructor(o,c,d,g,y){this.text=o.normalize?o.normalize():o,this.image=c,this.scale=d,this.fontStack=g,this.textColor=y}}class ga{constructor(o){this.sections=o}static fromString(o){return new ga([new jo(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.namePrimary.length!==0)}static factory(o){return o instanceof ga?o:ga.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}serialize(){const o=["format"];for(const c of this.sections){if(c.image){o.push(["image",c.image.namePrimary]);continue}o.push(c.text);const d={};c.fontStack&&(d["text-font"]=["literal",c.fontStack.split(",")]),c.scale&&(d["font-scale"]=c.scale),c.textColor&&(d["text-color"]=["rgba"].concat(c.textColor.toArray())),o.push(d)}return o}}class Ha{constructor(o){this.namePrimary=o.namePrimary,o.nameSecondary&&(this.nameSecondary=o.nameSecondary),this.available=o.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(o,c){return o?new Ha({namePrimary:o,nameSecondary:c,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function um(l,o,c,d){return typeof l=="number"&&l>=0&&l<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof c=="number"&&c>=0&&c<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[l,o,c,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[l,o,c,d]:[l,o,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Co(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof sn||l instanceof qd||l instanceof ga||l instanceof Ha)return!0;if(Array.isArray(l)){for(const o of l)if(!Co(o))return!1;return!0}if(typeof l=="object"){for(const o in l)if(!Co(l[o]))return!1;return!0}return!1}function kn(l){if(l===null)return Fa;if(typeof l=="string")return hi;if(typeof l=="boolean")return yi;if(typeof l=="number")return Ot;if(l instanceof sn)return lo;if(l instanceof qd)return Tl;if(l instanceof ga)return Gs;if(l instanceof Ha)return fc;if(Array.isArray(l)){const o=l.length;let c;for(const d of l){const g=kn(d);if(c){if(c===g)continue;c=oi;break}c=g}return Ta(c||oi,o)}return Sl}function du(l){const o=typeof l;return l===null?"":o==="string"||o==="number"||o==="boolean"?String(l):l instanceof sn||l instanceof ga||l instanceof Ha?l.toString():JSON.stringify(l)}class Il{constructor(o,c){this.type=o,this.value=c}static parse(o,c){if(o.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Co(o[1]))return c.error("invalid value");const d=o[1];let g=kn(d);const y=c.expectedType;return g.kind!=="array"||g.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(g=y),new Il(g,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof sn?["rgba"].concat(this.value.toArray()):this.value instanceof ga?this.value.serialize():this.value}}var Ho=Il,Dn=class{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}};const wh={string:hi,number:Ot,boolean:yi,object:Sl};class Sh{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");let d,g=1;const y=o[0];if(y==="array"){let M,E;if(o.length>2){const P=o[1];if(typeof P!="string"||!(P in wh)||P==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);M=wh[P],g++}else M=oi;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return c.error('The length argument to "array" must be a positive integer literal',2);E=o[2],g++}d=Ta(M,E)}else d=wh[y];const b=[];for(;g<o.length;g++){const M=c.parse(o[g],g,oi);if(!M)return null;b.push(M)}return new Sh(d,b)}evaluate(o){for(let c=0;c<this.args.length;c++){const d=this.args[c].evaluate(o);if(!Ao(this.type,kn(d)))return d;if(c===this.args.length-1)throw new Dn(`Expected value to be of type ${qi(this.type)}, but found ${qi(kn(d))} instead.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=this.type,c=[o.kind];if(o.kind==="array"){const d=o.itemType;if(d.kind==="string"||d.kind==="number"||d.kind==="boolean"){c.push(d.kind);const g=o.N;(typeof g=="number"||this.args.length>1)&&c.push(g)}}return c.concat(this.args.map(d=>d.serialize()))}}var uo=Sh;class vs{constructor(o){this.type=Gs,this.sections=o}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");const d=o[1];if(!Array.isArray(d)&&typeof d=="object")return c.error("First argument must be an image or text section.");const g=[];let y=!1;for(let b=1;b<=o.length-1;++b){const M=o[b];if(y&&typeof M=="object"&&!Array.isArray(M)){y=!1;let E=null;if(M["font-scale"]&&(E=c.parse(M["font-scale"],1,Ot),!E))return null;let P=null;if(M["text-font"]&&(P=c.parse(M["text-font"],1,Ta(hi)),!P))return null;let O=null;if(M["text-color"]&&(O=c.parse(M["text-color"],1,lo),!O))return null;const F=g[g.length-1];F.scale=E,F.font=P,F.textColor=O}else{const E=c.parse(o[b],1,oi);if(!E)return null;const P=E.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,g.push({content:E,scale:null,font:null,textColor:null})}}return new vs(g)}evaluate(o){return new ga(this.sections.map(c=>{const d=c.content.evaluate(o);return kn(d)===fc?new jo("",d,null,null,null):new jo(du(d),null,c.scale?c.scale.evaluate(o):null,c.font?c.font.evaluate(o).join(","):null,c.textColor?c.textColor.evaluate(o):null)}))}eachChild(o){for(const c of this.sections)o(c.content),c.scale&&o(c.scale),c.font&&o(c.font),c.textColor&&o(c.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const c of this.sections){o.push(c.content.serialize());const d={};c.scale&&(d["font-scale"]=c.scale.serialize()),c.font&&(d["text-font"]=c.font.serialize()),c.textColor&&(d["text-color"]=c.textColor.serialize()),o.push(d)}return o}}class fu{constructor(o,c){this.type=fc,this.inputPrimary=o,this.inputSecondary=c}static parse(o,c){if(o.length<2)return c.error("Expected two or more arguments.");const d=c.parse(o[1],1,hi);if(!d)return c.error("No image name provided.");if(o.length===2)return new fu(d);const g=c.parse(o[2],1,hi);return g?new fu(d,g):c.error("Secondary image variant is not a string.")}evaluate(o){const c=Ha.fromString(this.inputPrimary.evaluate(o),this.inputSecondary?this.inputSecondary.evaluate(o):void 0);return c&&o.availableImages&&(c.available=o.availableImages.indexOf(c.namePrimary)>-1,c.nameSecondary&&c.available&&o.availableImages&&(c.available=o.availableImages.indexOf(c.nameSecondary)>-1)),c}eachChild(o){o(this.inputPrimary),this.inputSecondary&&o(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function wi(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}const gc={"to-boolean":yi,"to-color":lo,"to-number":Ot,"to-string":hi};class El{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");const d=o[0],g=[];let y=Fa;if(d==="to-array"){if(!Array.isArray(o[1]))return null;const b=o[1].length;if(c.expectedType){if(c.expectedType.kind!=="array")return c.error(`Expected ${c.expectedType.kind} but found array.`);y=Ta(c.expectedType.itemType,b)}else{if(!(b>0&&Co(o[1][0])))return null;y=Ta(kn(o[1][0]),b)}for(let M=0;M<b;M++){const E=o[1][M];let P;if(wi(E)==="array")P=c.parse(E,void 0,y.itemType);else{const O=wi(E);if(O!==y.itemType.kind)return c.error(`Expected ${y.itemType.kind} but found ${O}.`);P=c.registry.literal.parse(["literal",E===void 0?null:E],c)}if(!P)return null;g.push(P)}}else{if((d==="to-boolean"||d==="to-string")&&o.length!==2)return c.error("Expected one argument.");y=gc[d];for(let b=1;b<o.length;b++){const M=c.parse(o[b],b,oi);if(!M)return null;g.push(M)}}return new El(y,g)}evaluate(o){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(o));if(this.type.kind==="color"){let c,d;for(const g of this.args){if(c=g.evaluate(o),d=null,c instanceof sn)return c;if(typeof c=="string"){const y=o.parseColor(c);if(y)return y}else if(Array.isArray(c)&&(d=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:um(c[0],c[1],c[2],c[3]),!d))return new sn(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new Dn(d||`Could not parse color from value '${typeof c=="string"?c:String(JSON.stringify(c))}'`)}if(this.type.kind==="number"){let c=null;for(const d of this.args){if(c=d.evaluate(o),c===null)return 0;const g=Number(c);if(!isNaN(g))return g}throw new Dn(`Could not convert ${JSON.stringify(c)} to number.`)}return this.type.kind==="formatted"?ga.fromString(du(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?Ha.fromString(du(this.args[0].evaluate(o))):this.type.kind==="array"?this.args.map(c=>c.evaluate(o)):du(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){if(this.type.kind==="formatted")return new vs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new fu(this.args[0]).serialize();const o=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(c=>{o.push(c.serialize())}),o}}var Us=El;const Zd=["Unknown","Point","LineString","Polygon"];var Dl=class{constructor(l,o){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=l,this.options=o}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Zd[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(l){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const l=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:c,y:d}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(c*o-l[0])+this.featureDistanceData.bearing[1]*(d*o-l[1])}return 0}parseColor(l){let o=this._parseColorCache[l];return o||(o=this._parseColorCache[l]=sn.parse(l)),o}getConfig(l){return this.options?this.options.get(l):null}};class it{constructor(o,c,d,g,y){this.name=o,this.type=c,this._evaluate=d,this.args=g,this._overloadIndex=y}evaluate(o){if(!this._evaluate){const c=it.definitions[this.name];this._evaluate=Array.isArray(c)?c[2]:c.overloads[this._overloadIndex][1]}return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(o=>o.serialize()))}static parse(o,c){const d=o[0],g=it.definitions[d];if(!g)return c.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(g)?g[0]:g.type,b=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,M=[];let E=null,P=-1;for(const[O,F]of b){if(Array.isArray(O)&&O.length!==o.length-1)continue;M.push(O),P++,E=new Qv(c.registry,c.path,null,c.scope,void 0,c._scope,c.options);const V=[];let U=!1;for(let q=1;q<o.length;q++){const K=o[q],Q=Array.isArray(O)?O[q-1]:O.type,ae=E.parse(K,1+V.length,Q);if(!ae){U=!0;break}V.push(ae)}if(!U)if(Array.isArray(O)&&O.length!==V.length)E.error(`Expected ${O.length} arguments, but found ${V.length} instead.`);else{for(let q=0;q<V.length;q++){const K=Array.isArray(O)?O[q]:O.type,Q=V[q];E.concat(q+1).checkSubtype(K,Q.type)}if(E.errors.length===0)return new it(d,y,F,V,P)}}if(M.length===1)c.errors.push(...E.errors);else{const O=(M.length?M:b.map(([V])=>V)).map(ee).join(" | "),F=[];for(let V=1;V<o.length;V++){const U=c.parse(o[V],1+F.length);if(!U)return null;F.push(qi(U.type))}c.error(`Expected arguments of type ${O}, but found (${F.join(", ")}) instead.`)}return null}static register(o,c){it.definitions=c;for(const d in c)o[d]=it}}function ee(l){return Array.isArray(l)?`(${l.map(qi).join(", ")})`:`(${qi(l.type)}...)`}var ve=it;class Qe{constructor(o,c,d){this.type=Tl,this.locale=d,this.caseSensitive=o,this.diacriticSensitive=c}static parse(o,c){if(o.length!==2)return c.error("Expected one argument.");const d=o[1];if(typeof d!="object"||Array.isArray(d))return c.error("Collator options argument must be an object.");const g=c.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,yi);if(!g)return null;const y=c.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,yi);if(!y)return null;let b=null;return d.locale&&(b=c.parse(d.locale,1,hi),!b)?null:new Qe(g,y,b)}evaluate(o){return new qd(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}var yt={exports:{}};yt.exports=function(){function l(d,g,y,b,M){for(;b>y;){if(b-y>600){var E=b-y+1,P=g-y+1,O=Math.log(E),F=.5*Math.exp(2*O/3),V=.5*Math.sqrt(O*F*(E-F)/E)*(P-E/2<0?-1:1);l(d,g,Math.max(y,Math.floor(g-P*F/E+V)),Math.min(b,Math.floor(g+(E-P)*F/E+V)),M)}var U=d[g],q=y,K=b;for(o(d,y,g),M(d[b],U)>0&&o(d,y,b);q<K;){for(o(d,q,K),q++,K--;M(d[q],U)<0;)q++;for(;M(d[K],U)>0;)K--}M(d[y],U)===0?o(d,y,K):o(d,++K,b),K<=g&&(y=K+1),g<=K&&(b=K-1)}}function o(d,g,y){var b=d[g];d[g]=d[y],d[y]=b}function c(d,g){return d<g?-1:d>g?1:0}return function(d,g,y,b,M){l(d,g,y||0,b||d.length-1,M||c)}}();var Zt=z(yt.exports);function Sr(l){let o=0;for(let c,d,g=0,y=l.length,b=y-1;g<y;b=g++)c=l[g],d=l[b],o+=(d.x-c.x)*(c.y+d.y);return o}function Jr(l,o){l[0]=Math.min(l[0],o[0]),l[1]=Math.min(l[1],o[1]),l[2]=Math.max(l[2],o[0]),l[3]=Math.max(l[3],o[1])}function Mi(l,o){return!(l[0]<=o[0]||l[2]>=o[2]||l[1]<=o[1]||l[3]>=o[3])}function Xn(l,o,c){const d=l[0]-o[0],g=l[1]-o[1],y=l[0]-c[0],b=l[1]-c[1];return d*b-y*g==0&&d*y<=0&&g*b<=0}function _n(l,o,c=!1){let d=!1;for(let M=0,E=o.length;M<E;M++){const P=o[M];for(let O=0,F=P.length,V=F-1;O<F;V=O++){const U=P[V],q=P[O];if(Xn(l,U,q))return c;(y=U)[1]>(g=l)[1]!=(b=q)[1]>g[1]&&g[0]<(b[0]-y[0])*(g[1]-y[1])/(b[1]-y[1])+y[0]&&(d=!d)}}var g,y,b;return d}function Zi(l,o,c,d){const g=d[0]-c[0],y=d[1]-c[1],b=(l[0]-c[0])*y-g*(l[1]-c[1]),M=(o[0]-c[0])*y-g*(o[1]-c[1]);return b>0&&M<0||b<0&&M>0}function Pn(l,o,c,d){return(g=[d[0]-c[0],d[1]-c[1]])[0]*(y=[o[0]-l[0],o[1]-l[1]])[1]-g[1]*y[0]!=0&&!(!Zi(l,o,c,d)||!Zi(c,d,l,o));var g,y}const Or=8192;function co(l,o){const c=(180+l[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,g=Math.pow(2,o.z);return[Math.round(c*g*Or),Math.round(d*g*Or)]}function Wa(l,o){for(let c=0;c<o.length;c++)if(_n(l,o[c]))return!0;return!1}function js(l,o,c){for(const d of c)for(let g=0,y=d.length,b=y-1;g<y;b=g++)if(Pn(l,o,d[b],d[g]))return!0;return!1}function _s(l,o){for(let c=0;c<l.length;++c)if(!_n(l[c],o))return!1;for(let c=0;c<l.length-1;++c)if(js(l[c],l[c+1],o))return!1;return!0}function vc(l,o){for(let c=0;c<o.length;c++)if(_s(l,o[c]))return!0;return!1}function Wo(l,o,c){const d=[];for(let g=0;g<l.length;g++){const y=[];for(let b=0;b<l[g].length;b++){const M=co(l[g][b],c);Jr(o,M),y.push(M)}d.push(y)}return d}function Th(l,o,c){const d=[];for(let g=0;g<l.length;g++){const y=Wo(l[g],o,c);d.push(y)}return d}function Uv(l,o,c,d){if(l[0]<c[0]||l[0]>c[2]){const g=.5*d;let y=l[0]-c[0]>g?-d:c[0]-l[0]>g?d:0;y===0&&(y=l[0]-c[2]>g?-d:c[2]-l[0]>g?d:0),l[0]+=y}Jr(o,l)}function _c(l,o,c,d){const g=Math.pow(2,d.z)*Or,y=[d.x*Or,d.y*Or],b=[];if(!l)return b;for(const M of l)for(const E of M){const P=[E.x+y[0],E.y+y[1]];Uv(P,o,c,g),b.push(P)}return b}function jv(l,o,c,d){const g=Math.pow(2,d.z)*Or,y=[d.x*Or,d.y*Or],b=[];if(!l)return b;for(const E of l){const P=[];for(const O of E){const F=[O.x+y[0],O.y+y[1]];Jr(o,F),P.push(F)}b.push(P)}if(o[2]-o[0]<=g/2){(M=o)[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(const E of b)for(const P of E)Uv(P,o,c,g)}var M;return b}class Hs{constructor(o,c){this.type=yi,this.geojson=o,this.geometries=c}static parse(o,c){if(o.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Co(o[1])){const d=o[1];if(d.type==="FeatureCollection")for(let g=0;g<d.features.length;++g){const y=d.features[g].geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new Hs(d,d.features[g].geometry)}else if(d.type==="Feature"){const g=d.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Hs(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Hs(d,d)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(c,d){const g=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],b=c.canonicalID();if(!b)return!1;if(d.type==="Polygon"){const M=Wo(d.coordinates,y,b),E=_c(c.geometry(),g,y,b);if(!Mi(g,y))return!1;for(const P of E)if(!_n(P,M))return!1}if(d.type==="MultiPolygon"){const M=Th(d.coordinates,y,b),E=_c(c.geometry(),g,y,b);if(!Mi(g,y))return!1;for(const P of E)if(!Wa(P,M))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(c,d){const g=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],b=c.canonicalID();if(!b)return!1;if(d.type==="Polygon"){const M=Wo(d.coordinates,y,b),E=jv(c.geometry(),g,y,b);if(!Mi(g,y))return!1;for(const P of E)if(!_s(P,M))return!1}if(d.type==="MultiPolygon"){const M=Th(d.coordinates,y,b),E=jv(c.geometry(),g,y,b);if(!Mi(g,y))return!1;for(const P of E)if(!vc(P,M))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var cm=Hs,Hv={exports:{}};Hv.exports=function(){var l={kilometers:1,miles:.621371192237334,nauticalmiles:.5399568034557235,meters:1e3,metres:1e3,yards:1093.6132983377079,feet:3280.839895013123,inches:39370.078740157485},o=1/298.257223563,c=o*(2-o),d=Math.PI/180,g=function(P,O){if(P===void 0)throw new Error("No latitude given.");if(O&&!l[O])throw new Error("Unknown unit "+O+". Use one of: "+Object.keys(l).join(", "));var F=6378.137*d*(O?l[O]:1),V=Math.cos(P*d),U=1/(1-c*(1-V*V)),q=Math.sqrt(U);this.kx=F*q*V,this.ky=F*q*U*(1-c)},y={units:{configurable:!0}};function b(P,O){return P[0]===O[0]&&P[1]===O[1]}function M(P,O,F){var V=E(O[0]-P[0]);return[P[0]+V*F,P[1]+(O[1]-P[1])*F]}function E(P){for(;P<-180;)P+=360;for(;P>180;)P-=360;return P}return g.fromTile=function(P,O,F){var V=Math.PI*(1-2*(P+.5)/Math.pow(2,O)),U=Math.atan(.5*(Math.exp(V)-Math.exp(-V)))/d;return new g(U,F)},y.units.get=function(){return l},g.prototype.distance=function(P,O){var F=E(P[0]-O[0])*this.kx,V=(P[1]-O[1])*this.ky;return Math.sqrt(F*F+V*V)},g.prototype.bearing=function(P,O){var F=E(O[0]-P[0])*this.kx;return Math.atan2(F,(O[1]-P[1])*this.ky)/d},g.prototype.destination=function(P,O,F){var V=F*d;return this.offset(P,Math.sin(V)*O,Math.cos(V)*O)},g.prototype.offset=function(P,O,F){return[P[0]+O/this.kx,P[1]+F/this.ky]},g.prototype.lineDistance=function(P){for(var O=0,F=0;F<P.length-1;F++)O+=this.distance(P[F],P[F+1]);return O},g.prototype.area=function(P){for(var O=0,F=0;F<P.length;F++)for(var V=P[F],U=0,q=V.length,K=q-1;U<q;K=U++)O+=E(V[U][0]-V[K][0])*(V[U][1]+V[K][1])*(F?-1:1);return Math.abs(O)/2*this.kx*this.ky},g.prototype.along=function(P,O){var F=0;if(O<=0)return P[0];for(var V=0;V<P.length-1;V++){var U=P[V],q=P[V+1],K=this.distance(U,q);if((F+=K)>O)return M(U,q,(O-(F-K))/K)}return P[P.length-1]},g.prototype.pointToSegmentDistance=function(P,O,F){var V=O[0],U=O[1],q=E(F[0]-V)*this.kx,K=(F[1]-U)*this.ky,Q=0;return q===0&&K===0||((Q=(E(P[0]-V)*this.kx*q+(P[1]-U)*this.ky*K)/(q*q+K*K))>1?(V=F[0],U=F[1]):Q>0&&(V+=q/this.kx*Q,U+=K/this.ky*Q)),q=E(P[0]-V)*this.kx,K=(P[1]-U)*this.ky,Math.sqrt(q*q+K*K)},g.prototype.pointOnLine=function(P,O){for(var F,V,U,q,K=1/0,Q=0;Q<P.length-1;Q++){var ae=P[Q][0],ge=P[Q][1],_e=E(P[Q+1][0]-ae)*this.kx,be=(P[Q+1][1]-ge)*this.ky,Ae=0;_e===0&&be===0||((Ae=(E(O[0]-ae)*this.kx*_e+(O[1]-ge)*this.ky*be)/(_e*_e+be*be))>1?(ae=P[Q+1][0],ge=P[Q+1][1]):Ae>0&&(ae+=_e/this.kx*Ae,ge+=be/this.ky*Ae));var Pe=(_e=E(O[0]-ae)*this.kx)*_e+(be=(O[1]-ge)*this.ky)*be;Pe<K&&(K=Pe,F=ae,V=ge,U=Q,q=Ae)}return{point:[F,V],index:U,t:Math.max(0,Math.min(1,q))}},g.prototype.lineSlice=function(P,O,F){var V=this.pointOnLine(F,P),U=this.pointOnLine(F,O);if(V.index>U.index||V.index===U.index&&V.t>U.t){var q=V;V=U,U=q}var K=[V.point],Q=V.index+1,ae=U.index;!b(F[Q],K[0])&&Q<=ae&&K.push(F[Q]);for(var ge=Q+1;ge<=ae;ge++)K.push(F[ge]);return b(F[ae],U.point)||K.push(U.point),K},g.prototype.lineSliceAlong=function(P,O,F){for(var V=0,U=[],q=0;q<F.length-1;q++){var K=F[q],Q=F[q+1],ae=this.distance(K,Q);if((V+=ae)>P&&U.length===0&&U.push(M(K,Q,(P-(V-ae))/ae)),V>=O)return U.push(M(K,Q,(O-(V-ae))/ae)),U;V>P&&U.push(Q)}return U},g.prototype.bufferPoint=function(P,O){var F=O/this.ky,V=O/this.kx;return[P[0]-V,P[1]-F,P[0]+V,P[1]+F]},g.prototype.bufferBBox=function(P,O){var F=O/this.ky,V=O/this.kx;return[P[0]-V,P[1]-F,P[2]+V,P[3]+F]},g.prototype.insideBBox=function(P,O){return E(P[0]-O[0])>=0&&E(P[0]-O[2])<=0&&P[1]>=O[1]&&P[1]<=O[3]},Object.defineProperties(g,y),g}();var Wv=z(Hv.exports),hm={exports:{}};hm.exports=function(){var l=function(c,d){if(c===void 0&&(c=[]),d===void 0&&(d=o),this.data=c,this.length=this.data.length,this.compare=d,this.length>0)for(var g=(this.length>>1)-1;g>=0;g--)this._down(g)};function o(c,d){return c<d?-1:c>d?1:0}return l.prototype.push=function(c){this.data.push(c),this.length++,this._up(this.length-1)},l.prototype.pop=function(){if(this.length!==0){var c=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),c}},l.prototype.peek=function(){return this.data[0]},l.prototype._up=function(c){for(var d=this.data,g=this.compare,y=d[c];c>0;){var b=c-1>>1,M=d[b];if(g(y,M)>=0)break;d[c]=M,c=b}d[c]=y},l.prototype._down=function(c){for(var d=this.data,g=this.compare,y=this.length>>1,b=d[c];c<y;){var M=1+(c<<1),E=d[M],P=M+1;if(P<this.length&&g(d[P],E)<0&&(M=P,E=d[P]),g(E,b)>=0)break;d[c]=E,c=M}d[c]=b},l}();var dm=z(hm.exports),tr=8192;function Rx(l,o){return o.dist-l.dist}const fm=100,qv=50;function Ox(l){const o=[1/0,1/0,-1/0,-1/0];if(o.length!==l.length)return!1;for(let c=0;c<o.length;c++)if(o[c]!==l[c])return!1;return!0}function pm(l){return l[1]-l[0]+1}function Pl(l,o){const c=l[1]>=l[0]&&l[1]<o;return c||console.warn("Distance Expression: Index is out of range"),c}function mm(l,o){if(l[0]>l[1])return[null,null];const c=pm(l);if(o){if(c===2)return[l,null];const d=Math.floor(c/2);return[[l[0],l[0]+d],[l[0]+d,l[1]]]}{if(c===1)return[l,null];const d=Math.floor(c/2)-1;return[[l[0],l[0]+d],[l[0]+d+1,l[1]]]}}function pu(l,o){const c=[1/0,1/0,-1/0,-1/0];if(!Pl(o,l.length))return c;for(let d=o[0];d<=o[1];++d)Jr(c,l[d]);return c}function gm(l){const o=[1/0,1/0,-1/0,-1/0];for(let c=0;c<l.length;++c)for(let d=0;d<l[c].length;++d)Jr(o,l[c][d]);return o}function yc(l,o,c){if(Ox(l)||Ox(o))return NaN;let d=0,g=0;return l[2]<o[0]&&(d=o[0]-l[2]),l[0]>o[2]&&(d=l[0]-o[2]),l[1]>o[3]&&(g=l[1]-o[3]),l[3]<o[1]&&(g=o[1]-l[3]),c.distance([0,0],[d,g])}function Zv(l,o){const c=Math.pow(2,o.z);return[(g=(l.x/tr+o.x)/c,360*g-180),(d=(l.y/tr+o.y)/c,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,g}function y2(l,o){const c=[];for(let d=0;d<l.length;++d)c.push(Zv(l[d],o));return c}function Xv(l,o,c){const d=c.pointOnLine(o,l).point;return c.distance(l,d)}function Yv(l,o,c,d,g){const y=c.slice(d[0],d[1]+1);let b=1/0;for(let M=o[0];M<=o[1];++M)if((b=Math.min(b,Xv(l[M],y,g)))===0)return 0;return b}function Kv(l,o,c,d,g){const y=Math.min(g.pointToSegmentDistance(l,c,d),g.pointToSegmentDistance(o,c,d)),b=Math.min(g.pointToSegmentDistance(c,l,o),g.pointToSegmentDistance(d,l,o));return Math.min(y,b)}function x2(l,o,c,d,g){if(!Pl(o,l.length)||!Pl(d,c.length))return NaN;let y=1/0;for(let b=o[0];b<o[1];++b)for(let M=d[0];M<d[1];++M){if(Pn(l[b],l[b+1],c[M],c[M+1]))return 0;y=Math.min(y,Kv(l[b],l[b+1],c[M],c[M+1],g))}return y}function b2(l,o,c,d,g){if(!Pl(o,l.length)||!Pl(d,c.length))return NaN;let y=1/0;for(let b=o[0];b<=o[1];++b)for(let M=d[0];M<=d[1];++M)if((y=Math.min(y,g.distance(l[b],c[M])))===0)return y;return y}function zx(l,o,c){if(_n(l,o,!0))return 0;let d=1/0;for(const g of o){const y=g.length;if(y<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(g[0]!==g[y-1]&&(d=Math.min(d,c.pointToSegmentDistance(l,g[y-1],g[0])))===0||(d=Math.min(d,Xv(l,g,c)))===0)return d}return d}function w2(l,o,c,d){if(!Pl(o,l.length))return NaN;for(let y=o[0];y<=o[1];++y)if(_n(l[y],c,!0))return 0;let g=1/0;for(let y=o[0];y<o[1];++y)for(const b of c)for(let M=0,E=b.length,P=E-1;M<E;P=M++){if(Pn(l[y],l[y+1],b[P],b[M]))return 0;g=Math.min(g,Kv(l[y],l[y+1],b[P],b[M],d))}return g}function Bx(l,o){for(const c of l)for(let d=0;d<=c.length-1;++d)if(_n(c[d],o,!0))return!0;return!1}function Fx(l,o,c,d=1/0){const g=gm(l),y=gm(o);if(d!==1/0&&yc(g,y,c)>=d)return d;if(Mi(g,y)){if(Bx(l,o))return 0}else if(Bx(o,l))return 0;let b=d;for(const M of l)for(let E=0,P=M.length,O=P-1;E<P;O=E++)for(const F of o)for(let V=0,U=F.length,q=U-1;V<U;q=V++){if(Pn(M[O],M[E],F[q],F[V]))return 0;b=Math.min(b,Kv(M[O],M[E],F[q],F[V],c))}return b}function vm(l,o,c,d,g,y,b){if(y===null||b===null)return;const M=yc(pu(d,y),pu(g,b),c);M<o&&l.push({dist:M,range1:y,range2:b})}function S2(l,o,c,d,g=1/0){let y=Math.min(d.distance(l[0],c[0][0]),g);if(y===0)return y;const b=new dm([{dist:0,range1:[0,l.length-1],range2:[0,0]}],Rx),M=o?qv:fm,E=gm(c);for(;b.length;){const P=b.pop();if(P.dist>=y)continue;const O=P.range1;if(pm(O)<=M){if(!Pl(O,l.length))return NaN;if(o){const F=w2(l,O,c,d);if((y=Math.min(y,F))===0)return y}else for(let F=O[0];F<=O[1];++F){const V=zx(l[F],c,d);if((y=Math.min(y,V))===0)return y}}else{const F=mm(O,o);if(F[0]!==null){const V=yc(pu(l,F[0]),E,d);V<y&&b.push({dist:V,range1:F[0],range2:[0,0]})}if(F[1]!==null){const V=yc(pu(l,F[1]),E,d);V<y&&b.push({dist:V,range1:F[1],range2:[0,0]})}}}return y}function Nx(l,o,c,d,g,y=1/0){let b=Math.min(y,g.distance(l[0],c[0]));if(b===0)return b;const M=new dm([{dist:0,range1:[0,l.length-1],range2:[0,c.length-1]}],Rx),E=o?qv:fm,P=d?qv:fm;for(;M.length;){const O=M.pop();if(O.dist>=b)continue;const F=O.range1,V=O.range2;if(pm(F)<=E&&pm(V)<=P){if(!Pl(F,l.length)||!Pl(V,c.length))return NaN;if(o&&d?b=Math.min(b,x2(l,F,c,V,g)):o||d?o&&!d?b=Math.min(b,Yv(c,V,l,F,g)):!o&&d&&(b=Math.min(b,Yv(l,F,c,V,g))):b=Math.min(b,b2(l,F,c,V,g)),b===0)return b}else{const U=mm(F,o),q=mm(V,d);vm(M,b,g,l,c,U[0],q[0]),vm(M,b,g,l,c,U[0],q[1]),vm(M,b,g,l,c,U[1],q[0]),vm(M,b,g,l,c,U[1],q[1])}}return b}function _m(l,o,c,d,g=1/0){let y=g;const b=pu(l,[0,l.length-1]);for(const M of c)if(!(y!==1/0&&yc(b,pu(M,[0,M.length-1]),d)>=y)&&(y=Math.min(y,Nx(l,o,M,!0,d,y)),y===0))return y;return y}function Xd(l,o,c,d,g=1/0){let y=g;const b=pu(l,[0,l.length-1]);for(const M of c){if(y!==1/0&&yc(b,gm(M),d)>=y)continue;const E=S2(l,o,M,d,y);if(isNaN(E))return E;if((y=Math.min(y,E))===0)return y}return y}function ym(l){return l==="Point"||l==="MultiPoint"||l==="LineString"||l==="MultiLineString"||l==="Polygon"||l==="MultiPolygon"}class Yd{constructor(o,c){this.type=Ot,this.geojson=o,this.geometries=c}static parse(o,c){if(o.length!==2)return c.error(`'distance' expression requires either one argument, but found ' ${o.length-1} instead.`);if(Co(o[1])){const d=o[1];if(d.type==="FeatureCollection"){for(let g=0;g<d.features.length;++g)if(ym(d.features[g].geometry.type))return new Yd(d,d.features[g].geometry)}else if(d.type==="Feature"){if(ym(d.geometry.type))return new Yd(d,d.geometry)}else if(ym(d.type))return new Yd(d,d)}return c.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(o){const c=o.geometry(),d=o.canonicalID();if(c!=null&&d!=null){if(o.geometryType()==="Point")return function(g,y,b){const M=[];for(const P of g)for(const O of P)M.push(Zv(O,y));const E=new Wv(M[0][1],"meters");return b.type==="Point"||b.type==="MultiPoint"||b.type==="LineString"?Nx(M,!1,b.type==="Point"?[b.coordinates]:b.coordinates,b.type==="LineString",E):b.type==="MultiLineString"?_m(M,!1,b.coordinates,E):b.type==="Polygon"||b.type==="MultiPolygon"?Xd(M,!1,b.type==="Polygon"?[b.coordinates]:b.coordinates,E):null}(c,d,this.geometries);if(o.geometryType()==="LineString")return function(g,y,b){const M=[];for(const P of g){const O=[];for(const F of P)O.push(Zv(F,y));M.push(O)}const E=new Wv(M[0][0][1],"meters");if(b.type==="Point"||b.type==="MultiPoint"||b.type==="LineString")return _m(b.type==="Point"?[b.coordinates]:b.coordinates,b.type==="LineString",M,E);if(b.type==="MultiLineString"){let P=1/0;for(let O=0;O<b.coordinates.length;O++){const F=_m(b.coordinates[O],!0,M,E,P);if(isNaN(F))return F;if((P=Math.min(P,F))===0)return P}return P}if(b.type==="Polygon"||b.type==="MultiPolygon"){let P=1/0;for(let O=0;O<M.length;O++){const F=Xd(M[O],!0,b.type==="Polygon"?[b.coordinates]:b.coordinates,E,P);if(isNaN(F))return F;if((P=Math.min(P,F))===0)return P}return P}return null}(c,d,this.geometries);if(o.geometryType()==="Polygon")return function(g,y,b){const M=[];for(const P of function(O,F){const V=O.length;if(V<=1)return[O];const U=[];let q,K;for(let Q=0;Q<V;Q++){const ae=Sr(O[Q]);ae!==0&&(O[Q].area=Math.abs(ae),K===void 0&&(K=ae<0),K===ae<0?(q&&U.push(q),q=[O[Q]]):q.push(O[Q]))}return q&&U.push(q),U}(g)){const O=[];for(let F=0;F<P.length;++F)O.push(y2(P[F],y));M.push(O)}const E=new Wv(M[0][0][0][1],"meters");if(b.type==="Point"||b.type==="MultiPoint"||b.type==="LineString")return Xd(b.type==="Point"?[b.coordinates]:b.coordinates,b.type==="LineString",M,E);if(b.type==="MultiLineString"){let P=1/0;for(let O=0;O<b.coordinates.length;O++){const F=Xd(b.coordinates[O],!0,M,E,P);if(isNaN(F))return F;if((P=Math.min(P,F))===0)return P}return P}return b.type==="Polygon"||b.type==="MultiPolygon"?function(P,O,F){let V=1/0;for(const U of P)for(const q of O){const K=Fx(U,q,F,V);if(isNaN(K))return K;if((V=Math.min(V,K))===0)return V}return V}(b.type==="Polygon"?[b.coordinates]:b.coordinates,M,E):null}(c,d,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}var Jv=Yd;function Mh(l){if(l instanceof ve&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof cm||l instanceof Jv)return!1;let o=!0;return l.eachChild(c=>{o&&!Mh(c)&&(o=!1)}),o}function va(l){if(l instanceof ve&&l.name==="feature-state")return!1;let o=!0;return l.eachChild(c=>{o&&!va(c)&&(o=!1)}),o}function Kd(l){if(l instanceof ve&&l.name==="config")return!1;let o=!0;return l.eachChild(c=>{o&&!Kd(c)&&(o=!1)}),o}function xc(l,o){if(l instanceof ve&&o.indexOf(l.name)>=0)return!1;let c=!0;return l.eachChild(d=>{c&&!xc(d,o)&&(c=!1)}),c}class xm{constructor(o,c){this.type=c.type,this.name=o,this.boundExpression=c}static parse(o,c){if(o.length!==2||typeof o[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");const d=o[1];return c.scope.has(d)?new xm(d,c.scope.get(d)):c.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Vx=xm;class Ah{constructor(o,c=[],d,g=new lm,y=[],b,M){this.registry=o,this.path=c,this.key=c.map(E=>`[${E}]`).join(""),this.scope=g,this.errors=y,this.expectedType=d,this._scope=b,this.options=M}parse(o,c,d,g,y={}){return c||d?this.concat(c,d,g)._parse(o,y):this._parse(o,y)}_parse(o,c){function d(g,y,b){return b==="assert"?new uo(y,[g]):b==="coerce"?new Us(y,[g]):g}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=typeof o[0]=="string"?this.registry[o[0]]:void 0;if(g){let y=g.parse(o,this);if(!y)return null;if(this.expectedType){const b=this.expectedType,M=y.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||M.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||M.kind!=="value"&&M.kind!=="string"){if(this.checkSubtype(b,M))return null}else y=d(y,b,c.typeAnnotation||"coerce");else y=d(y,b,c.typeAnnotation||"assert")}if(!(y instanceof Ho)&&y.type.kind!=="resolvedImage"&&bm(y)){const b=new Dl(this._scope,this.options);try{y=new Ho(y.type,y.evaluate(b))}catch(M){return this.error(M.message),null}}return y}return Us.parse(["to-array",o],this)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,c,d){const g=typeof o=="number"?this.path.concat(o):this.path,y=d?this.scope.concat(d):this.scope;return new Ah(this.registry,g,c||null,y,this.errors,this._scope,this.options)}error(o,...c){const d=`${this.key}${c.map(g=>`[${g}]`).join("")}`;this.errors.push(new so(d,o))}checkSubtype(o,c){const d=Ao(o,c);return d&&this.error(d),d}}var Qv=Ah;function bm(l){if(l instanceof Vx)return bm(l.boundExpression);if(l instanceof ve&&l.name==="error"||l instanceof ve&&l.name==="config"||l instanceof Qe||l instanceof cm||l instanceof Jv)return!1;const o=l instanceof Us||l instanceof uo;let c=!0;return l.eachChild(d=>{c=o?c&&bm(d):c&&d instanceof Ho}),!!c&&Mh(l)&&xc(l,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light"])}function wm(l,o){const c=l.length-1;let d,g,y=0,b=c,M=0;for(;y<=b;)if(M=Math.floor((y+b)/2),d=l[M],g=l[M+1],d<=o){if(M===c||o<g)return M;y=M+1}else{if(!(d>o))throw new Dn("Input is not a number.");b=M-1}return 0}class e_{constructor(o,c,d){this.type=o,this.input=c,this.labels=[],this.outputs=[];for(const[g,y]of d)this.labels.push(g),this.outputs.push(y)}static parse(o,c){if(o.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");const d=c.parse(o[1],1,Ot);if(!d)return null;const g=[];let y=null;c.expectedType&&c.expectedType.kind!=="value"&&(y=c.expectedType);for(let b=1;b<o.length;b+=2){const M=b===1?-1/0:o[b],E=o[b+1],P=b,O=b+1;if(typeof M!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(g.length&&g[g.length-1][0]>=M)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const F=c.parse(E,O,y);if(!F)return null;y=y||F.type,g.push([M,F])}return new e_(y,d,g)}evaluate(o){const c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(o);const g=this.input.evaluate(o);if(g<=c[0])return d[0].evaluate(o);const y=c.length;return g>=c[y-1]?d[y-1].evaluate(o):d[wm(c,g)].evaluate(o)}eachChild(o){o(this.input);for(const c of this.outputs)o(c)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){const o=["step",this.input.serialize()];for(let c=0;c<this.labels.length;c++)c>0&&o.push(this.labels[c]),o.push(this.outputs[c].serialize());return o}}var t_=e_;function si(l,o,c){return l*(1-c)+o*c}function Sm(l,o,c){return l.map((d,g)=>si(d,o[g],c))}var Jd=Object.freeze({__proto__:null,array:Sm,color:function(l,o,c){return new sn(si(l.r,o.r,c),si(l.g,o.g,c),si(l.b,o.b,c),si(l.a,o.a,c))},number:si});const Qd=.95047,bc=1.08883,$x=4/29,Ch=6/29,Gx=3*Ch*Ch,T2=Ch*Ch*Ch,M2=Math.PI/180,A2=180/Math.PI;function r_(l){return l>T2?Math.pow(l,1/3):l/Gx+$x}function i_(l){return l>Ch?l*l*l:Gx*(l-$x)}function n_(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function a_(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function Ux(l){const o=a_(l.r),c=a_(l.g),d=a_(l.b),g=r_((.4124564*o+.3575761*c+.1804375*d)/Qd),y=r_((.2126729*o+.7151522*c+.072175*d)/1);return{l:116*y-16,a:500*(g-y),b:200*(y-r_((.0193339*o+.119192*c+.9503041*d)/bc)),alpha:l.a}}function wc(l){let o=(l.l+16)/116,c=isNaN(l.a)?o:o+l.a/500,d=isNaN(l.b)?o:o-l.b/200;return o=1*i_(o),c=Qd*i_(c),d=bc*i_(d),new sn(n_(3.2404542*c-1.5371385*o-.4985314*d),n_(-.969266*c+1.8760108*o+.041556*d),n_(.0556434*c-.2040259*o+1.0572252*d),l.alpha)}function jx(l,o,c){const d=o-l;return l+c*(d>180||d<-180?d-360*Math.round(d/360):d)}const Ih={forward:Ux,reverse:wc,interpolate:function(l,o,c){return{l:si(l.l,o.l,c),a:si(l.a,o.a,c),b:si(l.b,o.b,c),alpha:si(l.alpha,o.alpha,c)}}},mu={forward:function(l){const{l:o,a:c,b:d}=Ux(l),g=Math.atan2(d,c)*A2;return{h:g<0?g+360:g,c:Math.sqrt(c*c+d*d),l:o,alpha:l.a}},reverse:function(l){const o=l.h*M2,c=l.c;return wc({l:l.l,a:Math.cos(o)*c,b:Math.sin(o)*c,alpha:l.alpha})},interpolate:function(l,o,c){return{h:jx(l.h,o.h,c),c:si(l.c,o.c,c),l:si(l.l,o.l,c),alpha:si(l.alpha,o.alpha,c)}}};var Hx=Object.freeze({__proto__:null,hcl:mu,lab:Ih});class Tm{constructor(o,c,d,g,y){this.type=o,this.operator=c,this.interpolation=d,this.input=g,this.labels=[],this.outputs=[];for(const[b,M]of y)this.labels.push(b),this.outputs.push(M)}static interpolationFactor(o,c,d,g){let y=0;if(o.name==="exponential")y=Ws(c,o.base,d,g);else if(o.name==="linear")y=Ws(c,1,d,g);else if(o.name==="cubic-bezier"){const b=o.controlPoints;y=new G(b[0],b[1],b[2],b[3]).solve(Ws(c,1,d,g))}return y}static parse(o,c){let[d,g,y,...b]=o;if(!Array.isArray(g)||g.length===0)return c.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const P=g[1];if(typeof P!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:P}}else{if(g[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const P=g.slice(1);if(P.length!==4||P.some(O=>typeof O!="number"||O<0||O>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:P}}}if(o.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(y=c.parse(y,2,Ot),!y)return null;const M=[];let E=null;d==="interpolate-hcl"||d==="interpolate-lab"?E=lo:c.expectedType&&c.expectedType.kind!=="value"&&(E=c.expectedType);for(let P=0;P<b.length;P+=2){const O=b[P],F=b[P+1],V=P+3,U=P+4;if(typeof O!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(M.length&&M[M.length-1][0]>=O)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',V);const q=c.parse(F,U,E);if(!q)return null;E=E||q.type,M.push([O,q])}return E.kind==="number"||E.kind==="color"||E.kind==="array"&&E.itemType.kind==="number"&&typeof E.N=="number"?new Tm(E,d,g,y,M):c.error(`Type ${qi(E)} is not interpolatable.`)}evaluate(o){const c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(o);const g=this.input.evaluate(o);if(g<=c[0])return d[0].evaluate(o);const y=c.length;if(g>=c[y-1])return d[y-1].evaluate(o);const b=wm(c,g),M=Tm.interpolationFactor(this.interpolation,g,c[b],c[b+1]),E=d[b].evaluate(o),P=d[b+1].evaluate(o);return this.operator==="interpolate"?Jd[this.type.kind.toLowerCase()](E,P,M):this.operator==="interpolate-hcl"?mu.reverse(mu.interpolate(mu.forward(E),mu.forward(P),M)):Ih.reverse(Ih.interpolate(Ih.forward(E),Ih.forward(P),M))}eachChild(o){o(this.input);for(const c of this.outputs)o(c)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){let o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const c=[this.operator,o,this.input.serialize()];for(let d=0;d<this.labels.length;d++)c.push(this.labels[d],this.outputs[d].serialize());return c}}function Ws(l,o,c,d){const g=d-c,y=l-c;return g===0?0:o===1?y/g:(Math.pow(o,y)-1)/(Math.pow(o,g)-1)}var ys=Tm;class gu{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expectected at least one argument.");let d=null;const g=c.expectedType;g&&g.kind!=="value"&&(d=g);const y=[];for(const M of o.slice(1)){const E=c.parse(M,1+y.length,d,void 0,{typeAnnotation:"omit"});if(!E)return null;d=d||E.type,y.push(E)}const b=g&&y.some(M=>Ao(g,M.type));return new gu(b?oi:d,y)}evaluate(o){let c,d=null,g=0;for(const y of this.args){if(g++,d=y.evaluate(o),d&&d instanceof Ha&&!d.available&&(c||(c=d),d=null,g===this.args.length))return c;if(d!==null)break}return d}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=["coalesce"];return this.eachChild(c=>{o.push(c.serialize())}),o}}var Wx=gu;class o_{constructor(o,c){this.type=c.type,this.bindings=[].concat(o),this.result=c}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const c of this.bindings)o(c[1]);o(this.result)}static parse(o,c){if(o.length<4)return c.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const d=[];for(let y=1;y<o.length-1;y+=2){const b=o[y];if(typeof b!="string")return c.error(`Expected string, but found ${typeof b} instead.`,y);if(/[^a-zA-Z0-9_]/.test(b))return c.error("Variable names must contain only alphanumeric characters or '_'.",y);const M=c.parse(o[y+1],y+1);if(!M)return null;d.push([b,M])}const g=c.parse(o[o.length-1],o.length-1,c.expectedType,d);return g?new o_(d,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[c,d]of this.bindings)o.push(c,d.serialize());return o.push(this.result.serialize()),o}}var qx=o_;class s_{constructor(o,c,d){this.type=o,this.index=c,this.input=d}static parse(o,c){if(o.length!==3)return c.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const d=c.parse(o[1],1,Ot),g=c.parse(o[2],2,Ta(c.expectedType||oi));return d&&g?new s_(g.type.itemType,d,g):null}evaluate(o){const c=this.index.evaluate(o),d=this.input.evaluate(o);if(c<0)throw new Dn(`Array index out of bounds: ${c} < 0.`);if(c>=d.length)throw new Dn(`Array index out of bounds: ${c} > ${d.length-1}.`);if(c!==Math.floor(c))throw new Dn(`Array index must be an integer, but found ${c} instead.`);return d[c]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var C2=s_;class Mm{constructor(o,c){this.type=yi,this.needle=o,this.haystack=c}static parse(o,c){if(o.length!==3)return c.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const d=c.parse(o[1],1,oi),g=c.parse(o[2],2,oi);return d&&g?Ml(d.type,[yi,hi,Ot,Fa,oi])?new Mm(d,g):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${qi(d.type)} instead`):null}evaluate(o){const c=this.needle.evaluate(o),d=this.haystack.evaluate(o);if(d==null)return!1;if(!ms(c,["boolean","string","number","null"]))throw new Dn(`Expected first argument to be of type boolean, string, number or null, but found ${qi(kn(c))} instead.`);if(!ms(d,["string","array"]))throw new Dn(`Expected second argument to be of type array or string, but found ${qi(kn(d))} instead.`);return d.indexOf(c)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var l_=Mm;class Sc{constructor(o,c,d){this.type=Ot,this.needle=o,this.haystack=c,this.fromIndex=d}static parse(o,c){if(o.length<=2||o.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const d=c.parse(o[1],1,oi),g=c.parse(o[2],2,oi);if(!d||!g)return null;if(!Ml(d.type,[yi,hi,Ot,Fa,oi]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${qi(d.type)} instead`);if(o.length===4){const y=c.parse(o[3],3,Ot);return y?new Sc(d,g,y):null}return new Sc(d,g)}evaluate(o){const c=this.needle.evaluate(o),d=this.haystack.evaluate(o);if(!ms(c,["boolean","string","number","null"]))throw new Dn(`Expected first argument to be of type boolean, string, number or null, but found ${qi(kn(c))} instead.`);if(!ms(d,["string","array"]))throw new Dn(`Expected second argument to be of type array or string, but found ${qi(kn(d))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(o);return d.indexOf(c,g)}return d.indexOf(c)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Zx=Sc;class ef{constructor(o,c,d,g,y,b){this.inputType=o,this.type=c,this.input=d,this.cases=g,this.outputs=y,this.otherwise=b}static parse(o,c){if(o.length<5)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return c.error("Expected an even number of arguments.");let d,g;c.expectedType&&c.expectedType.kind!=="value"&&(g=c.expectedType);const y={},b=[];for(let P=2;P<o.length-1;P+=2){let O=o[P];const F=o[P+1];Array.isArray(O)||(O=[O]);const V=c.concat(P);if(O.length===0)return V.error("Expected at least one branch label.");for(const q of O){if(typeof q!="number"&&typeof q!="string")return V.error("Branch labels must be numbers or strings.");if(typeof q=="number"&&Math.abs(q)>Number.MAX_SAFE_INTEGER)return V.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof q=="number"&&Math.floor(q)!==q)return V.error("Numeric branch labels must be integer values.");if(d){if(V.checkSubtype(d,kn(q)))return null}else d=kn(q);if(y[String(q)]!==void 0)return V.error("Branch labels must be unique.");y[String(q)]=b.length}const U=c.parse(F,P,g);if(!U)return null;g=g||U.type,b.push(U)}const M=c.parse(o[1],1,oi);if(!M)return null;const E=c.parse(o[o.length-1],o.length-1,g);return E?M.type.kind!=="value"&&c.concat(1).checkSubtype(d,M.type)?null:new ef(d,g,M,y,b,E):null}evaluate(o){const c=this.input.evaluate(o);return(kn(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],c=Object.keys(this.cases).sort(),d=[],g={};for(const b of c){const M=g[this.cases[b]];M===void 0?(g[this.cases[b]]=d.length,d.push([this.cases[b],[b]])):d[M][1].push(b)}const y=b=>this.inputType.kind==="number"?Number(b):b;for(const[b,M]of d)o.push(M.length===1?y(M[0]):M.map(y)),o.push(this.outputs[b].serialize());return o.push(this.otherwise.serialize()),o}}var I2=ef;class qo{constructor(o,c,d){this.type=o,this.branches=c,this.otherwise=d}static parse(o,c){if(o.length<4)return c.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return c.error("Expected an odd number of arguments.");let d;c.expectedType&&c.expectedType.kind!=="value"&&(d=c.expectedType);const g=[];for(let b=1;b<o.length-1;b+=2){const M=c.parse(o[b],b,yi);if(!M)return null;const E=c.parse(o[b+1],b+1,d);if(!E)return null;g.push([M,E]),d=d||E.type}const y=c.parse(o[o.length-1],o.length-1,d);return y?new qo(d,g,y):null}evaluate(o){for(const[c,d]of this.branches)if(c.evaluate(o))return d.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[c,d]of this.branches)o(c),o(d);o(this.otherwise)}outputDefined(){return this.branches.every(([o,c])=>c.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild(c=>{o.push(c.serialize())}),o}}var E2=qo;class tf{constructor(o,c,d,g){this.type=o,this.input=c,this.beginIndex=d,this.endIndex=g}static parse(o,c){if(o.length<=2||o.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const d=c.parse(o[1],1,oi),g=c.parse(o[2],2,Ot);if(!d||!g)return null;if(!Ml(d.type,[Ta(oi),hi,oi]))return c.error(`Expected first argument to be of type array or string, but found ${qi(d.type)} instead`);if(o.length===4){const y=c.parse(o[3],3,Ot);return y?new tf(d.type,d,g,y):null}return new tf(d.type,d,g)}evaluate(o){const c=this.input.evaluate(o),d=this.beginIndex.evaluate(o);if(!ms(c,["string","array"]))throw new Dn(`Expected first argument to be of type array or string, but found ${qi(kn(c))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(o);return c.slice(d,g)}return c.slice(d)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var D2=tf;function Xx(l,o){return l==="=="||l==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function Yx(l,o,c,d){return d.compare(o,c)===0}function Eh(l,o,c){const d=l!=="=="&&l!=="!=";return class hj{constructor(y,b,M){this.type=yi,this.lhs=y,this.rhs=b,this.collator=M,this.hasUntypedArgument=y.type.kind==="value"||b.type.kind==="value"}static parse(y,b){if(y.length!==3&&y.length!==4)return b.error("Expected two or three arguments.");const M=y[0];let E=b.parse(y[1],1,oi);if(!E)return null;if(!Xx(M,E.type))return b.concat(1).error(`"${M}" comparisons are not supported for type '${qi(E.type)}'.`);let P=b.parse(y[2],2,oi);if(!P)return null;if(!Xx(M,P.type))return b.concat(2).error(`"${M}" comparisons are not supported for type '${qi(P.type)}'.`);if(E.type.kind!==P.type.kind&&E.type.kind!=="value"&&P.type.kind!=="value")return b.error(`Cannot compare types '${qi(E.type)}' and '${qi(P.type)}'.`);d&&(E.type.kind==="value"&&P.type.kind!=="value"?E=new uo(P.type,[E]):E.type.kind!=="value"&&P.type.kind==="value"&&(P=new uo(E.type,[P])));let O=null;if(y.length===4){if(E.type.kind!=="string"&&P.type.kind!=="string"&&E.type.kind!=="value"&&P.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(O=b.parse(y[3],3,Tl),!O)return null}return new hj(E,P,O)}evaluate(y){const b=this.lhs.evaluate(y),M=this.rhs.evaluate(y);if(d&&this.hasUntypedArgument){const E=kn(b),P=kn(M);if(E.kind!==P.kind||E.kind!=="string"&&E.kind!=="number")throw new Dn(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${E.kind}, ${P.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const E=kn(b),P=kn(M);if(E.kind!=="string"||P.kind!=="string")return o(y,b,M)}return this.collator?c(y,b,M,this.collator.evaluate(y)):o(y,b,M)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}serialize(){const y=[l];return this.eachChild(b=>{y.push(b.serialize())}),y}}}const Kx=Eh("==",function(l,o,c){return o===c},Yx),u_=Eh("!=",function(l,o,c){return o!==c},function(l,o,c,d){return!Yx(0,o,c,d)}),Jx=Eh("<",function(l,o,c){return o<c},function(l,o,c,d){return d.compare(o,c)<0}),P2=Eh(">",function(l,o,c){return o>c},function(l,o,c,d){return d.compare(o,c)>0}),ho=Eh("<=",function(l,o,c){return o<=c},function(l,o,c,d){return d.compare(o,c)<=0}),L2=Eh(">=",function(l,o,c){return o>=c},function(l,o,c,d){return d.compare(o,c)>=0});class c_{constructor(o,c,d,g,y,b){this.type=hi,this.number=o,this.locale=c,this.currency=d,this.unit=g,this.minFractionDigits=y,this.maxFractionDigits=b}static parse(o,c){if(o.length!==3)return c.error("Expected two arguments.");const d=c.parse(o[1],1,Ot);if(!d)return null;const g=o[2];if(typeof g!="object"||Array.isArray(g))return c.error("NumberFormat options argument must be an object.");let y=null;if(g.locale&&(y=c.parse(g.locale,1,hi),!y))return null;let b=null;if(g.currency&&(b=c.parse(g.currency,1,hi),!b))return null;let M=null;if(g.unit&&(M=c.parse(g.unit,1,hi),!M))return null;let E=null;if(g["min-fraction-digits"]&&(E=c.parse(g["min-fraction-digits"],1,Ot),!E))return null;let P=null;return g["max-fraction-digits"]&&(P=c.parse(g["max-fraction-digits"],1,Ot),!P)?null:new c_(d,y,b,M,E,P)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class h_{constructor(o){this.type=Ot,this.input=o}static parse(o,c){if(o.length!==2)return c.error(`Expected 1 argument, but found ${o.length-1} instead.`);const d=c.parse(o[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${qi(d.type)} instead.`):new h_(d):null}evaluate(o){const c=this.input.evaluate(o);if(typeof c=="string"||Array.isArray(c))return c.length;throw new Dn(`Expected value to be of type string or array, but found ${qi(kn(c))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild(c=>{o.push(c.serialize())}),o}}function rf(l){return function(){l=1831565813+(l|=0)|0;let o=Math.imul(l^l>>>15,1|l);return o=o+Math.imul(o^o>>>7,61|o)^o,((o^o>>>14)>>>0)/4294967296}}const d_={"==":Kx,"!=":u_,">":P2,"<":Jx,">=":L2,"<=":ho,array:uo,at:C2,boolean:uo,case:E2,coalesce:Wx,collator:Qe,format:vs,image:fu,in:l_,"index-of":Zx,interpolate:ys,"interpolate-hcl":ys,"interpolate-lab":ys,length:h_,let:qx,literal:Ho,match:I2,number:uo,"number-format":c_,object:uo,slice:D2,step:t_,string:uo,"to-boolean":Us,"to-color":Us,"to-number":Us,"to-string":Us,var:Vx,within:cm,distance:Jv};function Am(l,[o,c,d,g]){o=o.evaluate(l),c=c.evaluate(l),d=d.evaluate(l);const y=g?g.evaluate(l):1,b=um(o,c,d,y);if(b)throw new Dn(b);return new sn(o/255*y,c/255*y,d/255*y,y)}function Qx(l,[o,c,d,g]){o=o.evaluate(l),c=c.evaluate(l),d=d.evaluate(l);const y=g?g.evaluate(l):1,b=function(P,O,F,V){return typeof P=="number"&&P>=0&&P<=360?typeof O=="number"&&O>=0&&O<=100&&typeof F=="number"&&F>=0&&F<=100?V===void 0||typeof V=="number"&&V>=0&&V<=1?null:`Invalid hsla value [${[P,O,F,V].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof V=="number"?[P,O,F,V]:[P,O,F]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof V=="number"?[P,O,F,V]:[P,O,F]).join(", ")}]: 'h' must be between 0 and 360.`}(o,c,d,y);if(b)throw new Dn(b);const M=`hsla(${o}, ${c}%, ${d}%, ${y})`,E=sn.parse(M);if(!E)throw new Dn(`Failed to parse HSLA color: ${M}`);return E}function e1(l,o){return l in o}function Tc(l,o){const c=o[l];return c===void 0?null:c}function t1(l,o){switch(l){case"string":return String(o);case"number":return+o;case"boolean":return!!o;case"color":return sn.parse(o)}return o}function r1(l,o,c,d){return d!==void 0&&(l=d*Math.round(l/d)),o!==void 0&&l<o&&(l=o),c!==void 0&&l>c&&(l=c),l}function f_(l,o,c){o=[o,c,l.scope].filter(Boolean).join("");const d=l.getConfig(o);if(!d)return null;const{type:g,value:y,values:b,minValue:M,maxValue:E,stepValue:P}=d,O=d.default.evaluate(l);let F=O;if(y){const V=l.scope;l.scope=(V||"").split("").slice(1).join(""),F=y.evaluate(l),l.scope=V}return g&&(F=t1(g,F)),y!==void 0&&F!==void 0&&b&&!b.includes(F)&&(F=O,g&&(F=t1(g,F))),F===void 0||M===void 0&&E===void 0&&P===void 0||(typeof F=="number"?F=r1(F,M,E,P):Array.isArray(F)&&(F=F.map(V=>typeof V=="number"?r1(V,M,E,P):V))),F}function vu(l){return{type:l}}ve.register(d_,{error:[{kind:"error"},[hi],(l,[o])=>{throw new Dn(o.evaluate(l))}],typeof:[hi,[oi],(l,[o])=>qi(kn(o.evaluate(l)))],"to-rgba":[Ta(Ot,4),[lo],(l,[o])=>o.evaluate(l).toArray()],rgb:[lo,[Ot,Ot,Ot],Am],rgba:[lo,[Ot,Ot,Ot,Ot],Am],hsl:[lo,[Ot,Ot,Ot],Qx],hsla:[lo,[Ot,Ot,Ot,Ot],Qx],has:{type:yi,overloads:[[[hi],(l,[o])=>e1(o.evaluate(l),l.properties())],[[hi,Sl],(l,[o,c])=>e1(o.evaluate(l),c.evaluate(l))]]},get:{type:oi,overloads:[[[hi],(l,[o])=>Tc(o.evaluate(l),l.properties())],[[hi,Sl],(l,[o,c])=>Tc(o.evaluate(l),c.evaluate(l))]]},config:{type:oi,overloads:[[[hi],(l,[o])=>f_(l,o.evaluate(l))],[[hi,hi],(l,[o,c])=>f_(l,o.evaluate(l),c.evaluate(l))]]},"feature-state":[oi,[hi],(l,[o])=>Tc(o.evaluate(l),l.featureState||{})],properties:[Sl,[],l=>l.properties()],"geometry-type":[hi,[],l=>l.geometryType()],id:[oi,[],l=>l.id()],zoom:[Ot,[],l=>l.globals.zoom],pitch:[Ot,[],l=>l.globals.pitch||0],"distance-from-center":[Ot,[],l=>l.distanceFromCenter()],"measure-light":[Ot,[hi],(l,[o])=>l.measureLight(o.evaluate(l))],"heatmap-density":[Ot,[],l=>l.globals.heatmapDensity||0],"line-progress":[Ot,[],l=>l.globals.lineProgress||0],"raster-value":[Ot,[],l=>l.globals.rasterValue||0],"sky-radial-progress":[Ot,[],l=>l.globals.skyRadialProgress||0],accumulated:[oi,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[Ot,vu(Ot),(l,o)=>{let c=0;for(const d of o)c+=d.evaluate(l);return c}],"*":[Ot,vu(Ot),(l,o)=>{let c=1;for(const d of o)c*=d.evaluate(l);return c}],"-":{type:Ot,overloads:[[[Ot,Ot],(l,[o,c])=>o.evaluate(l)-c.evaluate(l)],[[Ot],(l,[o])=>-o.evaluate(l)]]},"/":[Ot,[Ot,Ot],(l,[o,c])=>o.evaluate(l)/c.evaluate(l)],"%":[Ot,[Ot,Ot],(l,[o,c])=>o.evaluate(l)%c.evaluate(l)],ln2:[Ot,[],()=>Math.LN2],pi:[Ot,[],()=>Math.PI],e:[Ot,[],()=>Math.E],"^":[Ot,[Ot,Ot],(l,[o,c])=>Math.pow(o.evaluate(l),c.evaluate(l))],sqrt:[Ot,[Ot],(l,[o])=>Math.sqrt(o.evaluate(l))],log10:[Ot,[Ot],(l,[o])=>Math.log(o.evaluate(l))/Math.LN10],ln:[Ot,[Ot],(l,[o])=>Math.log(o.evaluate(l))],log2:[Ot,[Ot],(l,[o])=>Math.log(o.evaluate(l))/Math.LN2],sin:[Ot,[Ot],(l,[o])=>Math.sin(o.evaluate(l))],cos:[Ot,[Ot],(l,[o])=>Math.cos(o.evaluate(l))],tan:[Ot,[Ot],(l,[o])=>Math.tan(o.evaluate(l))],asin:[Ot,[Ot],(l,[o])=>Math.asin(o.evaluate(l))],acos:[Ot,[Ot],(l,[o])=>Math.acos(o.evaluate(l))],atan:[Ot,[Ot],(l,[o])=>Math.atan(o.evaluate(l))],min:[Ot,vu(Ot),(l,o)=>Math.min(...o.map(c=>c.evaluate(l)))],max:[Ot,vu(Ot),(l,o)=>Math.max(...o.map(c=>c.evaluate(l)))],abs:[Ot,[Ot],(l,[o])=>Math.abs(o.evaluate(l))],round:[Ot,[Ot],(l,[o])=>{const c=o.evaluate(l);return c<0?-Math.round(-c):Math.round(c)}],floor:[Ot,[Ot],(l,[o])=>Math.floor(o.evaluate(l))],ceil:[Ot,[Ot],(l,[o])=>Math.ceil(o.evaluate(l))],"filter-==":[yi,[hi,oi],(l,[o,c])=>l.properties()[o.value]===c.value],"filter-id-==":[yi,[oi],(l,[o])=>l.id()===o.value],"filter-type-==":[yi,[hi],(l,[o])=>l.geometryType()===o.value],"filter-<":[yi,[hi,oi],(l,[o,c])=>{const d=l.properties()[o.value],g=c.value;return typeof d==typeof g&&d<g}],"filter-id-<":[yi,[oi],(l,[o])=>{const c=l.id(),d=o.value;return typeof c==typeof d&&c<d}],"filter->":[yi,[hi,oi],(l,[o,c])=>{const d=l.properties()[o.value],g=c.value;return typeof d==typeof g&&d>g}],"filter-id->":[yi,[oi],(l,[o])=>{const c=l.id(),d=o.value;return typeof c==typeof d&&c>d}],"filter-<=":[yi,[hi,oi],(l,[o,c])=>{const d=l.properties()[o.value],g=c.value;return typeof d==typeof g&&d<=g}],"filter-id-<=":[yi,[oi],(l,[o])=>{const c=l.id(),d=o.value;return typeof c==typeof d&&c<=d}],"filter->=":[yi,[hi,oi],(l,[o,c])=>{const d=l.properties()[o.value],g=c.value;return typeof d==typeof g&&d>=g}],"filter-id->=":[yi,[oi],(l,[o])=>{const c=l.id(),d=o.value;return typeof c==typeof d&&c>=d}],"filter-has":[yi,[oi],(l,[o])=>o.value in l.properties()],"filter-has-id":[yi,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[yi,[Ta(hi)],(l,[o])=>o.value.indexOf(l.geometryType())>=0],"filter-id-in":[yi,[Ta(oi)],(l,[o])=>o.value.indexOf(l.id())>=0],"filter-in-small":[yi,[hi,Ta(oi)],(l,[o,c])=>c.value.indexOf(l.properties()[o.value])>=0],"filter-in-large":[yi,[hi,Ta(oi)],(l,[o,c])=>function(d,g,y,b){for(;y<=b;){const M=y+b>>1;if(g[M]===d)return!0;g[M]>d?b=M-1:y=M+1}return!1}(l.properties()[o.value],c.value,0,c.value.length-1)],all:{type:yi,overloads:[[[yi,yi],(l,[o,c])=>o.evaluate(l)&&c.evaluate(l)],[vu(yi),(l,o)=>{for(const c of o)if(!c.evaluate(l))return!1;return!0}]]},any:{type:yi,overloads:[[[yi,yi],(l,[o,c])=>o.evaluate(l)||c.evaluate(l)],[vu(yi),(l,o)=>{for(const c of o)if(c.evaluate(l))return!0;return!1}]]},"!":[yi,[yi],(l,[o])=>!o.evaluate(l)],"is-supported-script":[yi,[hi],(l,[o])=>{const c=l.globals&&l.globals.isSupportedScript;return!c||c(o.evaluate(l))}],upcase:[hi,[hi],(l,[o])=>o.evaluate(l).toUpperCase()],downcase:[hi,[hi],(l,[o])=>o.evaluate(l).toLowerCase()],concat:[hi,vu(oi),(l,o)=>o.map(c=>du(c.evaluate(l))).join("")],"resolved-locale":[hi,[Tl],(l,[o])=>o.evaluate(l).resolvedLocale()],random:[Ot,[Ot,Ot,oi],(l,o)=>{const[c,d,g]=o.map(b=>b.evaluate(l));if(c>d||c===d)return c;let y;if(typeof g=="string")y=function(b){let M=0;if(b.length===0)return M;for(let E=0;E<b.length;E++)M=(M<<5)-M+b.charCodeAt(E),M&=M;return M}(g);else{if(typeof g!="number")throw new Dn(`Invalid seed input: ${g}`);y=g}return c+rf(y)()*(d-c)}]});var nf=d_;function Zo(l){return{result:"success",value:l}}function _u(l){return{result:"error",value:l}}function i1(l,o){return!!l&&!!l.parameters&&l.parameters.indexOf(o)>-1}function yu(l){return l["property-type"]==="data-driven"}function af(l){return i1(l.expression,"measure-light")}function p_(l){return i1(l.expression,"zoom")}function m_(l){return!!l.expression&&l.expression.interpolated}function Cm(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)}function k2(l){return l}function n1(l,o){const c=o.type==="color",d=l.stops&&typeof l.stops[0][0]=="object",g=d||!(d||l.property!==void 0),y=l.type||(m_(o)?"exponential":"interval");if(c&&((l=oa({},l)).stops&&(l.stops=l.stops.map(P=>[P[0],sn.parse(P[1])])),l.default=sn.parse(l.default?l.default:o.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!Hx[l.colorSpace])throw new Error(`Unknown color space: ${l.colorSpace}`);let b,M,E;if(y==="exponential")b=of;else if(y==="interval")b=Io;else if(y==="categorical"){b=Im,M=Object.create(null);for(const P of l.stops)M[P[0]]=P[1];E=typeof l.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);b=R2}if(d){const P={},O=[];for(let U=0;U<l.stops.length;U++){const q=l.stops[U],K=q[0].zoom;P[K]===void 0&&(P[K]={zoom:K,type:l.type,property:l.property,default:l.default,stops:[]},O.push(K)),P[K].stops.push([q[0].value,q[1]])}const F=[];for(const U of O)F.push([P[U].zoom,n1(P[U],o)]);const V={name:"linear"};return{kind:"composite",interpolationType:V,interpolationFactor:ys.interpolationFactor.bind(void 0,V),zoomStops:F.map(U=>U[0]),evaluate:({zoom:U},q)=>of({stops:F,base:l.base},o,U).evaluate(U,q)}}if(g){const P=y==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:ys.interpolationFactor.bind(void 0,P),zoomStops:l.stops.map(O=>O[0]),evaluate:({zoom:O})=>b(l,o,O,M,E)}}return{kind:"source",evaluate(P,O){const F=O&&O.properties?O.properties[l.property]:void 0;return F===void 0?xu(l.default,o.default):b(l,o,F,M,E)}}}function xu(l,o,c){return l!==void 0?l:o!==void 0?o:c!==void 0?c:void 0}function Im(l,o,c,d,g){return xu(typeof c===g?d[c]:void 0,l.default,o.default)}function Io(l,o,c){if(wi(c)!=="number")return xu(l.default,o.default);const d=l.stops.length;if(d===1||c<=l.stops[0][0])return l.stops[0][1];if(c>=l.stops[d-1][0])return l.stops[d-1][1];const g=wm(l.stops.map(y=>y[0]),c);return l.stops[g][1]}function of(l,o,c){const d=l.base!==void 0?l.base:1;if(wi(c)!=="number")return xu(l.default,o.default);const g=l.stops.length;if(g===1||c<=l.stops[0][0])return l.stops[0][1];if(c>=l.stops[g-1][0])return l.stops[g-1][1];const y=wm(l.stops.map(O=>O[0]),c),b=function(O,F,V,U){const q=U-V,K=O-V;return q===0?0:F===1?K/q:(Math.pow(F,K)-1)/(Math.pow(F,q)-1)}(c,d,l.stops[y][0],l.stops[y+1][0]),M=l.stops[y][1],E=l.stops[y+1][1];let P=Jd[o.type]||k2;if(l.colorSpace&&l.colorSpace!=="rgb"){const O=Hx[l.colorSpace];P=(F,V)=>O.reverse(O.interpolate(O.forward(F),O.forward(V),b))}return typeof M.evaluate=="function"?{evaluate(...O){const F=M.evaluate.apply(void 0,O),V=E.evaluate.apply(void 0,O);if(F!==void 0&&V!==void 0)return P(F,V,b)}}:P(M,E,b)}function R2(l,o,c){return o.type==="color"?c=sn.parse(c):o.type==="formatted"?c=ga.fromString(c.toString()):o.type==="resolvedImage"?c=Ha.fromString(c.toString()):wi(c)===o.type||o.type==="enum"&&o.values[c]||(c=void 0),xu(c,l.default,o.default)}class g_{constructor(o,c,d,g){this.expression=o,this._warningHistory={},this._evaluator=new Dl(d,g),this._defaultValue=c?function(y){return y.type==="color"&&(Cm(y.default)||Array.isArray(y.default))?new sn(0,0,0,0):y.type==="color"?sn.parse(y.default)||null:y.default===void 0?null:y.default}(c):null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(o,c,d,g,y,b,M,E){return this._evaluator.globals=o,this._evaluator.feature=c,this._evaluator.featureState=d,this._evaluator.canonical=g||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=b,this._evaluator.featureTileCoord=M||null,this._evaluator.featureDistanceData=E||null,this.expression.evaluate(this._evaluator)}evaluate(o,c,d,g,y,b,M,E){this._evaluator.globals=o,this._evaluator.feature=c||null,this._evaluator.featureState=d||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=b||null,this._evaluator.featureTileCoord=M||null,this._evaluator.featureDistanceData=E||null;try{const P=this.expression.evaluate(this._evaluator);if(P==null||typeof P=="number"&&P!=P)return this._defaultValue;if(this._enumValues&&!(P in this._enumValues))throw new Dn(`Expected value to be one of ${Object.keys(this._enumValues).map(O=>JSON.stringify(O)).join(", ")}, but found ${JSON.stringify(P)} instead.`);return P}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof console!="undefined"&&console.warn(P.message)),this._defaultValue}}}function Em(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in nf}function sf(l,o,c,d){const g=new Qv(nf,[],o?function(b){const M={color:lo,string:hi,number:Ot,enum:hi,boolean:yi,formatted:Gs,resolvedImage:fc};return b.type==="array"?Ta(M[b.value]||oi,b.length):M[b.type]}(o):void 0,void 0,void 0,c,d),y=g.parse(l,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return y?Zo(new g_(y,o,c,d)):_u(g.errors)}class lf{constructor(o,c,d){this.kind=o,this._styleExpression=c,this.isLightConstant=d,this.isStateDependent=o!=="constant"&&!va(c.expression),this.isConfigDependent=!Kd(c.expression)}evaluateWithoutErrorHandling(o,c,d,g,y,b){return this._styleExpression.evaluateWithoutErrorHandling(o,c,d,g,y,b)}evaluate(o,c,d,g,y,b){return this._styleExpression.evaluate(o,c,d,g,y,b)}}class uf{constructor(o,c,d,g,y){this.kind=o,this.zoomStops=d,this._styleExpression=c,this.isStateDependent=o!=="camera"&&!va(c.expression),this.isLightConstant=y,this.isConfigDependent=!Kd(c.expression),this.interpolationType=g}evaluateWithoutErrorHandling(o,c,d,g,y,b){return this._styleExpression.evaluateWithoutErrorHandling(o,c,d,g,y,b)}evaluate(o,c,d,g,y,b){return this._styleExpression.evaluate(o,c,d,g,y,b)}interpolationFactor(o,c,d){return this.interpolationType?ys.interpolationFactor(this.interpolationType,o,c,d):0}}function cf(l,o,c,d){if((l=sf(l,o,c,d)).result==="error")return l;const g=l.value.expression,y=Mh(g);if(!y&&!yu(o))return _u([new so("","data expressions not supported")]);const b=xc(g,["zoom","pitch","distance-from-center"]);if(!b&&!p_(o))return _u([new so("","zoom expressions not supported")]);const M=xc(g,["measure-light"]);if(!M&&!af(o))return _u([new so("","measure-light expression not supported")]);const E=o.expression&&o.expression.relaxZoomRestriction,P=Pm(g);return P||b||E?P instanceof so?_u([P]):P instanceof ys&&!m_(o)?_u([new so("",'"interpolate" expressions cannot be used with this property')]):Zo(P?new uf(y?"camera":"composite",l.value,P.labels,P instanceof ys?P.interpolation:void 0,M):new lf(y?"constant":"source",l.value,M)):_u([new so("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class Dm{constructor(o,c){this._parameters=o,this._specification=c,oa(this,n1(this._parameters,this._specification))}static deserialize(o){return new Dm(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Pm(l){let o=null;if(l instanceof qx)o=Pm(l.result);else if(l instanceof Wx){for(const c of l.args)if(o=Pm(c),o)break}else(l instanceof t_||l instanceof ys)&&l.input instanceof ve&&l.input.name==="zoom"&&(o=l);return o instanceof so||l.eachChild(c=>{const d=Pm(c);d instanceof so?o=d:o&&d&&o!==d&&(o=new so("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function fo(l){const o=l.key,c=l.value,d=l.valueSpec||{},g=l.objectElementValidators||{},y=l.style,b=l.styleSpec;let M=[];const E=wi(c);if(E!=="object")return[new mr(o,c,`object expected, ${E} found`)];for(const P in c){const O=P.split(".")[0];let F;g[O]?F=g[O]:d[O]?F=ea:g["*"]?F=g["*"]:d["*"]&&(F=ea),F?M=M.concat(F({key:(o&&`${o}.`)+P,value:c[P],valueSpec:d[O]||d["*"],style:y,styleSpec:b,object:c,objectKey:P},c)):M.push(new oo(o,c[P],`unknown property "${P}"`))}for(const P in d)g[P]||d[P].required&&d[P].default===void 0&&c[P]===void 0&&M.push(new mr(o,c,`missing required property "${P}"`));return M}function a1(l){const o=l.value,c=l.valueSpec,d=l.style,g=l.styleSpec,y=l.key,b=l.arrayElementValidator||ea;if(wi(o)!=="array")return[new mr(y,o,`array expected, ${wi(o)} found`)];if(c.length&&o.length!==c.length)return[new mr(y,o,`array length ${c.length} expected, length ${o.length} found`)];if(c["min-length"]&&o.length<c["min-length"])return[new mr(y,o,`array length at least ${c["min-length"]} expected, length ${o.length} found`)];let M={type:c.value,values:c.values,minimum:c.minimum,maximum:c.maximum,function:void 0};g.$version<7&&(M.function=c.function),wi(c.value)==="object"&&(M=c.value);let E=[];for(let P=0;P<o.length;P++)E=E.concat(b({array:o,arrayIndex:P,value:o[P],valueSpec:M,style:d,styleSpec:g,key:`${y}[${P}]`},!0));return E}function v_(l){const o=l.key,c=l.value,d=l.valueSpec;let g=wi(c);if(g==="number"&&c!=c&&(g="NaN"),g!=="number")return[new mr(o,c,`number expected, ${g} found`)];if("minimum"in d){let y=d.minimum;if(wi(d.minimum)==="array"&&(y=d.minimum[l.arrayIndex]),c<y)return[new mr(o,c,`${c} is less than the minimum value ${y}`)]}if("maximum"in d){let y=d.maximum;if(wi(d.maximum)==="array"&&(y=d.maximum[l.arrayIndex]),c>y)return[new mr(o,c,`${c} is greater than the maximum value ${y}`)]}return[]}function __(l){const o=l.valueSpec,c=En(l.value.type);let d,g,y,b={};const M=c!=="categorical"&&l.value.property===void 0,E=!M,P=wi(l.value.stops)==="array"&&wi(l.value.stops[0])==="array"&&wi(l.value.stops[0][0])==="object",O=fo({key:l.key,value:l.value,valueSpec:l.styleSpec.function,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(U){if(c==="identity")return[new mr(U.key,U.value,'identity function may not have a "stops" property')];let q=[];const K=U.value;return q=q.concat(a1({key:U.key,value:K,valueSpec:U.valueSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:F})),wi(K)==="array"&&K.length===0&&q.push(new mr(U.key,K,"array must have at least one stop")),q},default:function(U){return ea({key:U.key,value:U.value,valueSpec:o,style:U.style,styleSpec:U.styleSpec})}}});return c==="identity"&&M&&O.push(new mr(l.key,l.value,'missing required property "property"')),c==="identity"||l.value.stops||O.push(new mr(l.key,l.value,'missing required property "stops"')),c==="exponential"&&l.valueSpec.expression&&!m_(l.valueSpec)&&O.push(new mr(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(E&&!yu(l.valueSpec)?O.push(new mr(l.key,l.value,"property functions not supported")):M&&!p_(l.valueSpec)&&O.push(new mr(l.key,l.value,"zoom functions not supported"))),c!=="categorical"&&!P||l.value.property!==void 0||O.push(new mr(l.key,l.value,'"property" property is required')),O;function F(U){let q=[];const K=U.value,Q=U.key;if(wi(K)!=="array")return[new mr(Q,K,`array expected, ${wi(K)} found`)];if(K.length!==2)return[new mr(Q,K,`array length 2 expected, length ${K.length} found`)];if(P){if(wi(K[0])!=="object")return[new mr(Q,K,`object expected, ${wi(K[0])} found`)];if(K[0].zoom===void 0)return[new mr(Q,K,"object stop key must have zoom")];if(K[0].value===void 0)return[new mr(Q,K,"object stop key must have value")];const ae=En(K[0].zoom);if(typeof ae!="number")return[new mr(Q,K[0].zoom,"stop zoom values must be numbers")];if(y&&y>ae)return[new mr(Q,K[0].zoom,"stop zoom values must appear in ascending order")];ae!==y&&(y=ae,g=void 0,b={}),q=q.concat(fo({key:`${Q}[0]`,value:K[0],valueSpec:{zoom:{}},style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:v_,value:V}}))}else q=q.concat(V({key:`${Q}[0]`,value:K[0],valueSpec:{},style:U.style,styleSpec:U.styleSpec},K));return Em(Uo(K[1]))?q.concat([new mr(`${Q}[1]`,K[1],"expressions are not allowed in function stops.")]):q.concat(ea({key:`${Q}[1]`,value:K[1],valueSpec:o,style:U.style,styleSpec:U.styleSpec}))}function V(U,q){const K=wi(U.value),Q=En(U.value),ae=U.value!==null?U.value:q;if(d){if(K!==d)return[new mr(U.key,ae,`${K} stop domain type must match previous stop domain type ${d}`)]}else d=K;if(K!=="number"&&K!=="string"&&K!=="boolean"&&typeof Q!="number"&&typeof Q!="string"&&typeof Q!="boolean")return[new mr(U.key,ae,"stop domain value must be a number, string, or boolean")];if(K!=="number"&&c!=="categorical"){let ge=`number expected, ${K} found`;return yu(o)&&c===void 0&&(ge+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new mr(U.key,ae,ge)]}return c!=="categorical"||K!=="number"||typeof Q=="number"&&isFinite(Q)&&Math.floor(Q)===Q?c!=="categorical"&&K==="number"&&typeof Q=="number"&&typeof g=="number"&&g!==void 0&&Q<g?[new mr(U.key,ae,"stop domain values must appear in ascending order")]:(g=Q,c==="categorical"&&Q in b?[new mr(U.key,ae,"stop domain values must be unique")]:(b[Q]=!0,[])):[new mr(U.key,ae,`integer expected, found ${String(Q)}`)]}}function Mc(l){const o=(l.expressionContext==="property"?cf:sf)(Uo(l.value),l.valueSpec);if(o.result==="error")return o.value.map(d=>new mr(`${l.key}${d.key}`,l.value,d.message));const c=o.value.expression||o.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!c.outputDefined())return[new mr(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!va(c))return[new mr(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter")return Lm(c,l);if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!xc(c,["zoom","feature-state"]))return[new mr(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!Mh(c))return[new mr(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Lm(l,o){const c=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const g of o.valueSpec.expression.parameters)c.delete(g);if(c.size===0)return[];const d=[];return l instanceof ve&&c.has(l.name)?[new mr(o.key,o.value,`["${l.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(l.eachChild(g=>{d.push(...Lm(g,o))}),d)}function Ac(l){const o=l.key,c=l.value,d=l.valueSpec,g=[];return Array.isArray(d.values)?d.values.indexOf(En(c))===-1&&g.push(new mr(o,c,`expected one of [${d.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(d.values).indexOf(En(c))===-1&&g.push(new mr(o,c,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(c)} found`)),g}function km(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const o of l.slice(1))if(!km(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}function Rm(l,o="fill"){if(l==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};km(l)||(l=Om(l));const c=l;let d=!0;try{d=function(P){if(!bu(P))return P;let O=Uo(P);return o1(O),O=y_(O),O}(c)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(c,null,2)}
        `)}const g=ut[`filter_${o}`],y=sf(d,g);let b=null;if(y.result==="error")throw new Error(y.value.map(P=>`${P.key}: ${P.message}`).join(", "));b=(P,O,F)=>y.value.evaluate(P,O,{},F);let M=null,E=null;if(d!==c){const P=sf(c,g);if(P.result==="error")throw new Error(P.value.map(O=>`${O.key}: ${O.message}`).join(", "));M=(O,F,V,U,q)=>P.value.evaluate(O,F,{},V,void 0,void 0,U,q),E=!Mh(P.value.expression)}return{filter:b,dynamicFilter:M||void 0,needGeometry:s1(d),needFeature:!!E}}function y_(l){if(!Array.isArray(l))return l;const o=function(c){if(O2.has(c[0])){for(let d=1;d<c.length;d++)if(bu(c[d]))return!0}return c}(l);return o===!0?o:o.map(c=>y_(c))}function o1(l){let o=!1;const c=[];if(l[0]==="case"){for(let d=1;d<l.length-1;d+=2)o=o||bu(l[d]),c.push(l[d+1]);c.push(l[l.length-1])}else if(l[0]==="match"){o=o||bu(l[1]);for(let d=2;d<l.length-1;d+=2)c.push(l[d+1]);c.push(l[l.length-1])}else if(l[0]==="step"){o=o||bu(l[1]);for(let d=1;d<l.length-1;d+=2)c.push(l[d+1])}o&&(l.length=0,l.push("any",...c));for(let d=1;d<l.length;d++)o1(l[d])}function bu(l){if(!Array.isArray(l))return!1;if((o=l[0])==="pitch"||o==="distance-from-center")return!0;var o;for(let c=1;c<l.length;c++)if(bu(l[c]))return!0;return!1}const O2=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function z2(l,o){return l<o?-1:l>o?1:0}function s1(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let o=1;o<l.length;o++)if(s1(l[o]))return!0;return!1}function Om(l){if(!l)return!0;const o=l[0];return l.length<=1?o!=="any":o==="=="?zm(l[1],l[2],"=="):o==="!="?Bm(zm(l[1],l[2],"==")):o==="<"||o===">"||o==="<="||o===">="?zm(l[1],l[2],o):o==="any"?(c=l.slice(1),["any"].concat(c.map(Om))):o==="all"?["all"].concat(l.slice(1).map(Om)):o==="none"?["all"].concat(l.slice(1).map(Om).map(Bm)):o==="in"?l1(l[1],l.slice(2)):o==="!in"?Bm(l1(l[1],l.slice(2))):o==="has"?u1(l[1]):o!=="!has"||Bm(u1(l[1]));var c}function zm(l,o,c){switch(l){case"$type":return[`filter-type-${c}`,o];case"$id":return[`filter-id-${c}`,o];default:return[`filter-${c}`,l,o]}}function l1(l,o){if(o.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(c=>typeof c!=typeof o[0])?["filter-in-large",l,["literal",o.sort(z2)]]:["filter-in-small",l,["literal",o]]}}function u1(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function Bm(l){return["!",l]}function x_(l){return km(Uo(l.value))?Mc(oa({},l,{expressionContext:"filter",valueSpec:l.styleSpec[`filter_${l.layerType||"fill"}`]})):c1(l)}function c1(l){const o=l.value,c=l.key;if(wi(o)!=="array")return[new mr(c,o,`array expected, ${wi(o)} found`)];const d=l.styleSpec;let g,y=[];if(o.length<1)return[new mr(c,o,"filter array must have at least 1 element")];switch(y=y.concat(Ac({key:`${c}[0]`,value:o[0],valueSpec:d.filter_operator,style:l.style,styleSpec:l.styleSpec})),En(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&En(o[1])==="$type"&&y.push(new mr(c,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&y.push(new mr(c,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(g=wi(o[1]),g!=="string"&&y.push(new mr(`${c}[1]`,o[1],`string expected, ${g} found`)));for(let b=2;b<o.length;b++)g=wi(o[b]),En(o[1])==="$type"?y=y.concat(Ac({key:`${c}[${b}]`,value:o[b],valueSpec:d.geometry_type,style:l.style,styleSpec:l.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&y.push(new mr(`${c}[${b}]`,o[b],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let b=1;b<o.length;b++)y=y.concat(c1({key:`${c}[${b}]`,value:o[b],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":g=wi(o[1]),o.length!==2?y.push(new mr(c,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="string"&&y.push(new mr(`${c}[1]`,o[1],`string expected, ${g} found`))}return y}function h1(l,o){const c=l.key,d=l.style,g=l.layer,y=l.styleSpec,b=l.value,M=l.objectKey,E=y[`${o}_${l.layerType}`];if(!E)return[];const P=M.match(/^(.*)-transition$/);if(o==="paint"&&P&&E[P[1]]&&E[P[1]].transition)return ea({key:c,value:b,valueSpec:y.transition,style:d,styleSpec:y});const O=l.valueSpec||E[M];if(!O)return[new oo(c,b,`unknown property "${M}"`)];let F;if(wi(b)==="string"&&yu(O)&&!O.tokens&&(F=/^{([^}]+)}$/.exec(b))){const U=`\`{ "type": "identity", "property": ${F?JSON.stringify(F[1]):'"_"'} }\``;return[new mr(c,b,`"${M}" does not support interpolation syntax
Use an identity property function instead: ${U}.`)]}const V=[];if(l.layerType==="symbol")M!=="text-field"||!d||d.glyphs||d.imports||V.push(new mr(c,b,'use of "text-field" requires a style "glyphs" property')),M==="text-font"&&Cm(Uo(b))&&En(b.type)==="identity"&&V.push(new mr(c,b,'"text-font" does not support identity functions'));else if(l.layerType==="model"&&o==="paint"&&g&&g.layout&&g.layout.hasOwnProperty("model-id")&&yu(O)&&(af(O)||p_(O))){const U=cf(Uo(b),O),q=U.value.expression||U.value._styleExpression.expression;q&&!xc(q,["measure-light"])&&(M==="model-emissive-strength"&&Mh(q)&&va(q)||V.push(new mr(c,b,`${M} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return V.concat(ea({key:l.key,value:b,valueSpec:O,style:d,styleSpec:y,expressionContext:"property",propertyType:o,propertyKey:M}))}function d1(l){return h1(l,"paint")}function hf(l){return h1(l,"layout")}function f1(l){let o=[];const c=l.value,d=l.key,g=l.style,y=l.styleSpec;c.type||c.ref||o.push(new mr(d,c,'either "type" or "ref" is required'));let b=En(c.type);const M=En(c.ref);if(c.id){const E=En(c.id);for(let P=0;P<l.arrayIndex;P++){const O=g.layers[P];En(O.id)===E&&o.push(new mr(d,c.id,`duplicate layer id "${c.id}", previously used at line ${O.id.__line__}`))}}if("ref"in c){let E;["type","source","source-layer","filter","layout"].forEach(P=>{P in c&&o.push(new mr(d,c[P],`"${P}" is prohibited for ref layers`))}),g.layers.forEach(P=>{En(P.id)===M&&(E=P)}),E?E.ref?o.push(new mr(d,c.ref,"ref cannot reference another ref layer")):b=En(E.type):typeof M=="string"&&o.push(new mr(d,c.ref,`ref layer "${M}" not found`))}else if(b!=="background"&&b!=="sky"&&b!=="slot")if(c.source){const E=g.sources&&g.sources[c.source],P=E&&En(E.type);E?P==="vector"&&b==="raster"?o.push(new mr(d,c.source,`layer "${c.id}" requires a raster source`)):P==="raster"&&b!=="raster"?o.push(new mr(d,c.source,`layer "${c.id}" requires a vector source`)):P!=="vector"||c["source-layer"]?P==="raster-dem"&&b!=="hillshade"?o.push(new mr(d,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):b!=="line"||!c.paint||!c.paint["line-gradient"]&&!c.paint["line-trim-offset"]||P==="geojson"&&E.lineMetrics||o.push(new mr(d,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new mr(d,c,`layer "${c.id}" must specify a "source-layer"`)):o.push(new mr(d,c.source,`source "${c.source}" not found`))}else o.push(new mr(d,c,'missing required property "source"'));return o=o.concat(fo({key:d,value:c,valueSpec:y.layer,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ea({key:`${d}.type`,value:c.type,valueSpec:y.layer.type,style:l.style,styleSpec:l.styleSpec,object:c,objectKey:"type"}),filter:E=>x_(oa({layerType:b},E)),layout:E=>fo({layer:c,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":P=>hf(oa({layerType:b},P))}}),paint:E=>fo({layer:c,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":P=>d1(oa({layerType:b,layer:c},P))}})}})),o}function Dh(l){const o=l.value,c=l.key,d=wi(o);return d!=="string"?[new mr(c,o,`string expected, ${d} found`)]:[]}const df={promoteId:function({key:l,value:o}){if(wi(o)==="string")return Dh({key:l,value:o});{const c=[];for(const d in o)c.push(...Dh({key:`${l}.${d}`,value:o[d]}));return c}}};function p1(l){const o=l.value,c=l.key,d=l.styleSpec,g=l.style;if(!o.type)return[new mr(c,o,'"type" is required')];const y=En(o.type);let b=[];switch(["vector","raster","raster-dem"].includes(y)&&(o.url||o.tiles||b.push(new oo(c,o,'Either "url" or "tiles" is required.'))),y){case"vector":case"raster":case"raster-dem":return b=b.concat(fo({key:c,value:o,valueSpec:d[`source_${y.replace("-","_")}`],style:l.style,styleSpec:d,objectElementValidators:df})),b;case"geojson":if(b=fo({key:c,value:o,valueSpec:d.source_geojson,style:g,styleSpec:d,objectElementValidators:df}),o.cluster)for(const M in o.clusterProperties){const[E,P]=o.clusterProperties[M],O=typeof E=="string"?[E,["accumulated"],["get",M]]:E;b.push(...Mc({key:`${c}.${M}.map`,value:P,expressionContext:"cluster-map"})),b.push(...Mc({key:`${c}.${M}.reduce`,value:O,expressionContext:"cluster-reduce"}))}return b;case"video":return fo({key:c,value:o,valueSpec:d.source_video,style:g,styleSpec:d});case"image":return fo({key:c,value:o,valueSpec:d.source_image,style:g,styleSpec:d});case"canvas":return[new mr(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ac({key:`${c}.type`,value:o.type,valueSpec:{values:m1(d)},style:g,styleSpec:d})}}function m1(l){return l.source.reduce((o,c)=>{const d=l[c];return d.type.type==="enum"&&(o=o.concat(Object.keys(d.type.values))),o},[])}function g1(l){const o=l.value;let c=[];if(!o)return c;const d=wi(o);return d!=="string"?(c=c.concat([new mr(l.key,o,`string expected, "${d}" found`)]),c):(function(g){const y=g.indexOf("://")===-1;try{return new URL(g,y?"http://example.com":void 0),!0}catch{return!1}}(o)||(c=c.concat([new mr(l.key,o,`invalid url "${o}"`)])),c)}function b_(l){const o=l.value,c=l.styleSpec,d=c.light,g=l.style;let y=[];const b=wi(o);if(o===void 0)return y;if(b!=="object")return y=y.concat([new mr("light",o,`object expected, ${b} found`)]),y;for(const M in o){const E=M.match(/^(.*)-transition$/);y=y.concat(E&&d[E[1]]&&d[E[1]].transition?ea({key:M,value:o[M],valueSpec:c.transition,style:g,styleSpec:c}):d[M]?ea({key:M,value:o[M],valueSpec:d[M],style:g,styleSpec:c}):[new mr(M,o[M],`unknown property "${M}"`)])}return y}function w_(l){const o=l.value;let c=[];if(!o)return c;const d=wi(o);if(d!=="object")return c=c.concat([new mr("light-3d",o,`object expected, ${d} found`)]),c;const g=l.styleSpec,y=g["light-3d"],b=l.key,M=l.style,E=l.style.lights;for(const F of["type","id"])if(!(F in o))return c=c.concat([new mr("light-3d",o,`missing property ${F} on light`)]),c;if(o.type&&E)for(let F=0;F<l.arrayIndex;F++){const V=En(o.type),U=E[F];En(U.type)===V&&c.push(new mr(b,o.id,`duplicate light type "${o.type}", previously defined at line ${U.id.__line__}`))}const P=`properties_light_${o.type}`;if(!(P in g))return c=c.concat([new mr("light-3d",o,`Invalid light type ${o.type}`)]),c;const O=g[P];for(const F in o)if(F==="properties"){const V=o[F],U=wi(V);if(U!=="object")return c=c.concat([new mr("properties",V,`object expected, ${U} found`)]),c;for(const q in V)c=c.concat(O[q]?ea({key:q,value:V[q],valueSpec:O[q],style:M,styleSpec:g}):[new oo(l.key,V[q],`unknown property "${q}"`)])}else{const V=F.match(/^(.*)-transition$/);c=c.concat(V&&y[V[1]]&&y[V[1]].transition?ea({key:F,value:o[F],valueSpec:g.transition,style:M,styleSpec:g}):y[F]?ea({key:F,value:o[F],valueSpec:y[F],style:M,styleSpec:g}):[new oo(F,o[F],`unknown property "${F}"`)])}return c}function S_(l){const o=l.value,c=l.key,d=l.style,g=l.styleSpec,y=g.terrain;let b=[];const M=wi(o);if(o===void 0||M==="null")return b;if(M!=="object")return b=b.concat([new mr("terrain",o,`object expected, ${M} found`)]),b;for(const E in o){const P=E.match(/^(.*)-transition$/);b=b.concat(P&&y[P[1]]&&y[P[1]].transition?ea({key:E,value:o[E],valueSpec:g.transition,style:d,styleSpec:g}):y[E]?ea({key:E,value:o[E],valueSpec:y[E],style:d,styleSpec:g}):[new oo(E,o[E],`unknown property "${E}"`)])}if(o.source){const E=d.sources&&d.sources[o.source],P=E&&En(E.type);E?P!=="raster-dem"&&b.push(new mr(c,o.source,`terrain cannot be used with a source of type ${String(P)}, it only be used with a "raster-dem" source type`)):b.push(new mr(c,o.source,`source "${o.source}" not found`))}else b.push(new mr(c,o,'terrain is missing required property "source"'));return b}function T_(l){const o=l.value,c=l.style,d=l.styleSpec,g=d.fog;let y=[];const b=wi(o);if(o===void 0)return y;if(b!=="object")return y=y.concat([new mr("fog",o,`object expected, ${b} found`)]),y;for(const M in o){const E=M.match(/^(.*)-transition$/);y=y.concat(E&&g[E[1]]&&g[E[1]].transition?ea({key:M,value:o[M],valueSpec:d.transition,style:c,styleSpec:d}):g[M]?ea({key:M,value:o[M],valueSpec:g[M],style:c,styleSpec:d}):[new oo(M,o[M],`unknown property "${M}"`)])}return y}const Fm={"*":()=>[],array:a1,boolean:function(l){const o=l.value,c=l.key,d=wi(o);return d!=="boolean"?[new mr(c,o,`boolean expected, ${d} found`)]:[]},number:v_,color:function(l){const o=l.key,c=l.value,d=wi(c);return d!=="string"?[new mr(o,c,`color expected, ${d} found`)]:pc(c)===null?[new mr(o,c,`color expected, "${c}" found`)]:[]},enum:Ac,filter:x_,function:__,layer:f1,object:fo,source:p1,model:g1,light:b_,"light-3d":w_,terrain:S_,fog:T_,string:Dh,formatted:function(l){return Dh(l).length===0?[]:Mc(l)},resolvedImage:function(l){return Dh(l).length===0?[]:Mc(l)},projection:function(l){const o=l.value,c=l.styleSpec,d=c.projection,g=l.style;let y=[];const b=wi(o);if(b==="object")for(const M in o)y=y.concat(ea({key:M,value:o[M],valueSpec:d[M],style:g,styleSpec:c}));else b!=="string"&&(y=y.concat([new mr("projection",o,`object or string expected, ${b} found`)]));return y},import:function(l){const{value:o,styleSpec:c}=l,{data:d,...g}=o;Object.defineProperty(g,"__line__",{value:o.__line__,enumerable:!1});let y=fo(oa({},l,{value:g,valueSpec:c.import}));return En(g.id)===""&&y.push(new mr(`${l.key}.id`,g,"import id can't be an empty string")),d&&(y=y.concat(v1(d,c,{key:`${l.key}.data`}))),y}};function ea(l,o=!1){const c=l.value,d=l.valueSpec,g=l.styleSpec;if(d.expression&&Cm(En(c)))return __(l);if(d.expression&&Em(Uo(c)))return Mc(l);if(d.type&&Fm[d.type]){const y=Fm[d.type](l);return o===!0&&y.length>0&&wi(l.value)==="array"?Mc(l):y}return fo(oa({},l,{valueSpec:d.type?g[d.type]:d}))}function B2(l){const o=l.value,c=l.key,d=Dh(l);return d.length||(o.indexOf("{fontstack}")===-1&&d.push(new mr(c,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&d.push(new mr(c,o,'"glyphs" url must include a "{range}" token'))),d}function v1(l,o=ut,c={}){return ea({key:c.key||"",value:l,valueSpec:o.$root,styleSpec:o,style:l,objectElementValidators:{glyphs:B2,"*":()=>[]}})}function M_(l,o=ut){return xs(v1(l,o))}const F2=l=>xs(d1(l)),N2=l=>xs(hf(l));function xs(l){return l.slice().sort((o,c)=>o.line&&c.line?o.line-c.line:0)}function _1(l,o){let c=!1;if(o&&o.length)for(const d of o)d instanceof oo?Ue(d.message):(l.fire(new $s(new Error(d.message))),c=!0);return c}var V2=qs,wu=3;function qs(l,o,c){var d=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;var g=new Int32Array(this.arrayBuffer);l=g[0],this.d=(o=g[1])+2*(c=g[2]);for(var y=0;y<this.d*this.d;y++){var b=g[wu+y],M=g[wu+y+1];d.push(b===M?null:g.subarray(b,M))}var E=g[wu+d.length+1];this.keys=g.subarray(g[wu+d.length],E),this.bboxes=g.subarray(E),this.insert=this._insertReadonly}else{this.d=o+2*c;for(var P=0;P<this.d*this.d;P++)d.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=l,this.padding=c,this.scale=o/l,this.uid=0;var O=c/o*l;this.min=-O,this.max=l+O}qs.prototype.insert=function(l,o,c,d,g){this._forEachCell(o,c,d,g,this._insertCell,this.uid++),this.keys.push(l),this.bboxes.push(o),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(g)},qs.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},qs.prototype._insertCell=function(l,o,c,d,g,y){this.cells[g].push(y)},qs.prototype.query=function(l,o,c,d,g){var y=this.min,b=this.max;if(l<=y&&o<=y&&b<=c&&b<=d&&!g)return Array.prototype.slice.call(this.keys);var M=[];return this._forEachCell(l,o,c,d,this._queryCell,M,{},g),M},qs.prototype._queryCell=function(l,o,c,d,g,y,b,M){var E=this.cells[g];if(E!==null)for(var P=this.keys,O=this.bboxes,F=0;F<E.length;F++){var V=E[F];if(b[V]===void 0){var U=4*V;(M?M(O[U+0],O[U+1],O[U+2],O[U+3]):l<=O[U+2]&&o<=O[U+3]&&c>=O[U+0]&&d>=O[U+1])?(b[V]=!0,y.push(P[V])):b[V]=!1}}},qs.prototype._forEachCell=function(l,o,c,d,g,y,b,M){for(var E=this._convertToCellCoord(l),P=this._convertToCellCoord(o),O=this._convertToCellCoord(c),F=this._convertToCellCoord(d),V=E;V<=O;V++)for(var U=P;U<=F;U++){var q=this.d*U+V;if((!M||M(this._convertFromCellCoord(V),this._convertFromCellCoord(U),this._convertFromCellCoord(V+1),this._convertFromCellCoord(U+1)))&&g.call(this,l,o,c,d,q,y,b,M))return}},qs.prototype._convertFromCellCoord=function(l){return(l-this.padding)/this.scale},qs.prototype._convertToCellCoord=function(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))},qs.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var l=this.cells,o=wu+this.cells.length+1+1,c=0,d=0;d<this.cells.length;d++)c+=this.cells[d].length;var g=new Int32Array(o+c+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;for(var y=o,b=0;b<l.length;b++){var M=l[b];g[wu+b]=y,g.set(M,y),y+=M.length}return g[wu+l.length]=y,g.set(this.keys,y),g[wu+l.length+1]=y+=this.keys.length,g.set(this.bboxes,y),y+=this.bboxes.length,g.buffer};var Ph=z(V2);const Nm={};function hr(l,o,c={}){Object.defineProperty(l,"_classRegistryKey",{value:o,writeable:!1}),Nm[o]={klass:l,omit:c.omit||[]}}hr(Object,"Object"),Ph.serialize=function(l,o){const c=l.toArrayBuffer();return o&&o.add(c),{buffer:c}},Ph.deserialize=function(l){return new Ph(l.buffer)},Object.defineProperty(Ph,"name",{value:"Grid"}),hr(Ph,"Grid"),hr(sn,"Color"),hr(Error,"Error"),hr(ga,"Formatted"),hr(jo,"FormattedSection"),hr(Ki,"AJAXError"),hr(Ha,"ResolvedImage"),hr(Dm,"StylePropertyFunction"),hr(g_,"StyleExpression",{omit:["_evaluator"]}),hr(uf,"ZoomDependentExpression"),hr(lf,"ZoomConstantExpression"),hr(ve,"CompoundExpression",{omit:["_evaluate"]});for(const l in nf)Nm[nf[l]._classRegistryKey]||hr(nf[l],`Expression${l}`);function S(l){return l&&typeof ArrayBuffer!="undefined"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function f(l){return self.ImageBitmap&&l instanceof ImageBitmap}function _(l,o){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp)return l;if(S(l)||f(l))return o&&o.add(l),l;if(ArrayBuffer.isView(l)){const c=l;return o&&o.add(c.buffer),c}if(l instanceof ImageData)return o&&o.add(l.data.buffer),l;if(Array.isArray(l)){const c=[];for(const d of l)c.push(_(d,o));return c}if(l instanceof Map){const c={$name:"Map"};for(const[d,g]of l.entries())c[d]=_(g);return c}if(typeof l=="object"){const c=l.constructor,d=c._classRegistryKey;if(!d)throw new Error(`can't serialize object of unregistered class ${d}`);const g=c.serialize?c.serialize(l,o):{};if(!c.serialize){for(const y in l)l.hasOwnProperty(y)&&(Nm[d].omit.indexOf(y)>=0||(g[y]=_(l[y],o)));l instanceof Error&&(g.message=l.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(g.$name=d),g}throw new Error("can't serialize object of type "+typeof l)}function A(l){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||S(l)||f(l)||ArrayBuffer.isView(l)||l instanceof ImageData)return l;if(Array.isArray(l))return l.map(A);if(typeof l=="object"){const o=l.$name||"Object";if(o==="Map"){const g=new Map;for(const y of Object.keys(l))y!=="$name"&&g.set(y,A(l[y]));return g}const{klass:c}=Nm[o];if(!c)throw new Error(`can't deserialize unregistered class ${o}`);if(c.deserialize)return c.deserialize(l);const d=Object.create(c.prototype);for(const g of Object.keys(l))g!=="$name"&&(d[g]=A(l[g]));return d}throw new Error("can't deserialize object of type "+typeof l)}const D={"Latin-1 Supplement":l=>l>=128&&l<=255,Arabic:l=>l>=1536&&l<=1791,"Arabic Supplement":l=>l>=1872&&l<=1919,"Arabic Extended-A":l=>l>=2208&&l<=2303,"Hangul Jamo":l=>l>=4352&&l<=4607,"Unified Canadian Aboriginal Syllabics":l=>l>=5120&&l<=5759,Khmer:l=>l>=6016&&l<=6143,"Unified Canadian Aboriginal Syllabics Extended":l=>l>=6320&&l<=6399,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"CJK Radicals Supplement":l=>l>=11904&&l<=12031,"Kangxi Radicals":l=>l>=12032&&l<=12255,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Bopomofo:l=>l>=12544&&l<=12591,"Hangul Compatibility Jamo":l=>l>=12592&&l<=12687,Kanbun:l=>l>=12688&&l<=12703,"Bopomofo Extended":l=>l>=12704&&l<=12735,"CJK Strokes":l=>l>=12736&&l<=12783,"Katakana Phonetic Extensions":l=>l>=12784&&l<=12799,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"CJK Unified Ideographs Extension A":l=>l>=13312&&l<=19903,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Yi Syllables":l=>l>=40960&&l<=42127,"Yi Radicals":l=>l>=42128&&l<=42191,"Hangul Jamo Extended-A":l=>l>=43360&&l<=43391,"Hangul Syllables":l=>l>=44032&&l<=55215,"Hangul Jamo Extended-B":l=>l>=55216&&l<=55295,"Private Use Area":l=>l>=57344&&l<=63743,"CJK Compatibility Ideographs":l=>l>=63744&&l<=64255,"Arabic Presentation Forms-A":l=>l>=64336&&l<=65023,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Arabic Presentation Forms-B":l=>l>=65136&&l<=65279,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519,"CJK Unified Ideographs Extension B":l=>l>=131072&&l<=173791};function L(l){for(const o of l)if(W(o.charCodeAt(0)))return!0;return!1}function B(l){for(const o of l)if(!N(o.charCodeAt(0)))return!1;return!0}function N(l){return!(D.Arabic(l)||D["Arabic Supplement"](l)||D["Arabic Extended-A"](l)||D["Arabic Presentation Forms-A"](l)||D["Arabic Presentation Forms-B"](l))}function W(l){return!(l!==746&&l!==747&&(l<4352||!(D["Bopomofo Extended"](l)||D.Bopomofo(l)||D["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||D["CJK Compatibility Ideographs"](l)||D["CJK Compatibility"](l)||D["CJK Radicals Supplement"](l)||D["CJK Strokes"](l)||!(!D["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||D["CJK Unified Ideographs Extension A"](l)||D["CJK Unified Ideographs"](l)||D["Enclosed CJK Letters and Months"](l)||D["Hangul Compatibility Jamo"](l)||D["Hangul Jamo Extended-A"](l)||D["Hangul Jamo Extended-B"](l)||D["Hangul Jamo"](l)||D["Hangul Syllables"](l)||D.Hiragana(l)||D["Ideographic Description Characters"](l)||D.Kanbun(l)||D["Kangxi Radicals"](l)||D["Katakana Phonetic Extensions"](l)||D.Katakana(l)&&l!==12540||!(!D["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!D["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||D["Unified Canadian Aboriginal Syllabics"](l)||D["Unified Canadian Aboriginal Syllabics Extended"](l)||D["Vertical Forms"](l)||D["Yijing Hexagram Symbols"](l)||D["Yi Syllables"](l)||D["Yi Radicals"](l))))}function X(l){return!(W(l)||function(o){return!!(D["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||D["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||D["Letterlike Symbols"](o)||D["Number Forms"](o)||D["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||D["Control Pictures"](o)&&o!==9251||D["Optical Character Recognition"](o)||D["Enclosed Alphanumerics"](o)||D["Geometric Shapes"](o)||D["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||D["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||D["CJK Symbols and Punctuation"](o)||D.Katakana(o)||D["Private Use Area"](o)||D["CJK Compatibility Forms"](o)||D["Small Form Variants"](o)||D["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(l))}function J(l){return l>=1424&&l<=2303||D["Arabic Presentation Forms-A"](l)||D["Arabic Presentation Forms-B"](l)}function te(l,o){return!(!o&&J(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||D.Khmer(l))}function oe(l){for(const o of l)if(J(o.charCodeAt(0)))return!0;return!1}const le="deferred",de="loading",pe="loaded";let fe=null,he="unavailable",we=null;const Le=function(l){l&&typeof l=="string"&&l.indexOf("NetworkError")>-1&&(he="error"),fe&&fe(l)};function Oe(){xe.fire(new ao("pluginStateChange",{pluginStatus:he,pluginURL:we}))}const xe=new Mo,Te=function(){return he},ze=function(){if(he!==le||!we)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");he=de,Oe(),we&&qn({url:we},l=>{l?Le(l):(he=pe,Oe())})},je={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>he===pe||je.applyArabicShaping!=null,isLoading:()=>he===de,setState(l){he=l.pluginStatus,we=l.pluginURL},isParsed:()=>je.applyArabicShaping!=null&&je.processBidirectionalText!=null&&je.processStyledBidirectionalText!=null,getPluginURL:()=>we};class Ne{constructor(o,c){this.zoom=o,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.transition=c.transition,this.pitch=c.pitch,this.brightness=c.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(o){return function(c,d){for(const g of c)if(!te(g.charCodeAt(0),d))return!1;return!0}(o,je.isLoaded())}}class Ye{constructor(o,c,d,g){this.property=o,this.value=c,this.expression=function(y,b,M,E){if(Cm(y))return new Dm(y,b);if(Em(y)||Array.isArray(y)&&y.length>0){const P=cf(y,b,M,E);if(P.result==="error")throw new Error(P.value.map(O=>`${O.key}: ${O.message}`).join(", "));return P.value}{let P=y;return typeof y=="string"&&b.type==="color"&&(P=sn.parse(y)),{kind:"constant",isConfigDependent:!1,evaluate:()=>P}}}(c===void 0?o.specification.default:c,o.specification,d,g)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,c,d){return this.property.possiblyEvaluate(this,o,c,d)}}class Ct{constructor(o,c,d){this.property=o,this.value=new Ye(o,void 0,c,d)}transitioned(o,c){return new _t(this.property,this.value,c,ht({},o.transition,this.transition),o.now)}untransitioned(){return new _t(this.property,this.value,null,{},0)}}class ct{constructor(o,c,d){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues),this._scope=c,this._options=d,this.isConfigDependent=!1}getValue(o){return Re(this._values[o].value.value)}setValue(o,c){this._values.hasOwnProperty(o)||(this._values[o]=new Ct(this._values[o].property,this._scope,this._options)),this._values[o].value=new Ye(this._values[o].property,c===null?void 0:Re(c),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[o].value.expression.isConfigDependent}setTransitionOrValue(o,c){c&&(this._options=c);const d=this._properties.properties;if(o)for(const g in o){const y=o[g];if(jt(g,"-transition")){const b=g.slice(0,-11);d[b]&&this.setTransition(b,y)}else d[g]&&this.setValue(g,y)}}getTransition(o){return Re(this._values[o].transition)}setTransition(o,c){this._values.hasOwnProperty(o)||(this._values[o]=new Ct(this._values[o].property)),this._values[o].transition=Re(c)||void 0}serialize(){const o={};for(const c of Object.keys(this._values)){const d=this.getValue(c);d!==void 0&&(o[c]=d);const g=this.getTransition(c);g!==void 0&&(o[`${c}-transition`]=g)}return o}transitioned(o,c){const d=new tt(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].transitioned(o,c._values[g]);return d}untransitioned(){const o=new tt(this._properties);for(const c of Object.keys(this._values))o._values[c]=this._values[c].untransitioned();return o}}class _t{constructor(o,c,d,g,y){const b=g.delay||0,M=g.duration||0;y=y||0,this.property=o,this.value=c,this.begin=y+b,this.end=this.begin+M,o.specification.transition&&(g.delay||g.duration)&&(this.prior=d)}possiblyEvaluate(o,c,d){const g=o.now||0,y=this.value.possiblyEvaluate(o,c,d),b=this.prior;if(b){if(g>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(g<this.begin)return b.possiblyEvaluate(o,c,d);{const M=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(o,c,d),y,Ie(M))}}return y}}class tt{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,c,d){const g=new Dt(this._properties);for(const y of Object.keys(this._values))g._values[y]=this._values[y].possiblyEvaluate(o,c,d);return g}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class Mt{constructor(o,c,d){this._properties=o,this._values=Object.create(o.defaultPropertyValues),this._scope=c,this._options=d,this.isConfigDependent=!1}getValue(o){return Re(this._values[o].value)}setValue(o,c){this._values[o]=new Ye(this._values[o].property,c===null?void 0:Re(c),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[o].expression.isConfigDependent}serialize(){const o={};for(const c of Object.keys(this._values)){const d=this.getValue(c);d!==void 0&&(o[c]=d)}return o}possiblyEvaluate(o,c,d){const g=new Dt(this._properties);for(const y of Object.keys(this._values))g._values[y]=this._values[y].possiblyEvaluate(o,c,d);return g}}class pt{constructor(o,c,d){this.property=o,this.value=c,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,c,d,g){return this.property.evaluate(this.value,this.parameters,o,c,d,g)}}class Dt{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class Ee{constructor(o){this.specification=o}possiblyEvaluate(o,c){return o.expression.evaluate(c)}interpolate(o,c,d){const g=Jd[this.specification.type];return g?g(o,c,d):o}}class at{constructor(o,c){this.specification=o,this.overrides=c}possiblyEvaluate(o,c,d,g){return new pt(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(c,null,{},d,g)}:o.expression,c)}interpolate(o,c,d){if(o.value.kind!=="constant"||c.value.kind!=="constant")return o;if(o.value.value===void 0||c.value.value===void 0)return new pt(this,{kind:"constant",value:void 0},o.parameters);const g=Jd[this.specification.type];return g?new pt(this,{kind:"constant",value:g(o.value.value,c.value.value,d)},o.parameters):o}evaluate(o,c,d,g,y,b){return o.kind==="constant"?o.value:o.evaluate(c,d,g,y,b)}}class Ft{constructor(o){this.specification=o}possiblyEvaluate(o,c,d,g){return!!o.expression.evaluate(c,null,{},d,g)}interpolate(){return!1}}class Rt{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const c=new Ne(0,{});for(const d in o){const g=o[d];g.specification.overridable&&this.overridableProperties.push(d);const y=this.defaultPropertyValues[d]=new Ye(g,void 0),b=this.defaultTransitionablePropertyValues[d]=new Ct(g);this.defaultTransitioningPropertyValues[d]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=y.possiblyEvaluate(c)}}}hr(at,"DataDrivenProperty"),hr(Ee,"DataConstantProperty"),hr(Ft,"ColorRampProperty");const dr="";function or(l,o){return o?`${l}${dr}${o}`:l}const br="-transition";class ur extends Mo{constructor(o,c,d,g){if(super(),this.id=o.id,this.fqid=or(this.id,d),this.type=o.type,this.scope=d,this.options=g,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.isConfigDependent=!1,o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&o.type!=="sky"&&o.type!=="slot"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),o.slot&&(this.slot=o.slot),c.layout&&(this._unevaluatedLayout=new Mt(c.layout,this.scope,g),this.isConfigDependent=this.isConfigDependent||this._unevaluatedLayout.isConfigDependent),c.paint)){this._transitionablePaint=new ct(c.paint,this.scope,g);for(const y in o.paint)this.setPaintProperty(y,o.paint[y],{validate:!1});for(const y in o.layout)this.setLayoutProperty(y,o.layout[y],{validate:!1});this.isConfigDependent=this.isConfigDependent||this._transitionablePaint.isConfigDependent,this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Dt(c.paint)}}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,c,d={}){if(c!=null&&this._validate(N2,`layers.${this.id}.layout.${o}`,o,c,d))return;if(this.type==="custom"&&o==="visibility")return void(this.visibility=c);const g=this._unevaluatedLayout;g._properties.properties[o]&&(g.setValue(o,c),this.isConfigDependent=this.isConfigDependent||g.isConfigDependent,o==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(o){return jt(o,br)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,c,d={}){if(c!=null&&this._validate(F2,`layers.${this.id}.paint.${o}`,o,c,d))return!1;const g=this._transitionablePaint,y=g._properties.properties;if(jt(o,br)){const V=o.slice(0,-11);return y[V]&&g.setTransition(V,c||void 0),!1}if(!y[o])return!1;const b=g._values[o],M=b.value.isDataDriven(),E=b.value;g.setValue(o,c),this.isConfigDependent=this.isConfigDependent||g.isConfigDependent,this._handleSpecialPaintPropertyUpdate(o);const P=g._values[o].value,O=P.isDataDriven(),F=jt(o,"pattern")||o==="line-dasharray";return O||M||F||this._handleOverridablePaintPropertyUpdate(o,E,P)}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getDefaultProgramParams(o,c){return null}_handleOverridablePaintPropertyUpdate(o,c,d){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,c){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,c)}serialize(){return Wt({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(o,c)=>!(o===void 0||c==="layout"&&!Object.keys(o).length||c==="paint"&&!Object.keys(o).length))}_validate(o,c,d,g,y={}){return(!y||y.validate!==!1)&&_1(this,o.call(M_,{key:c,layerType:this.type,objectKey:d,value:g,styleSpec:ut,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}resize(){}isStateDependent(){for(const o in this.paint._values){const c=this.paint.get(o);if(c instanceof pt&&yu(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Rm(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(){this._stats&&(this._stats.numRenderedVerticesInShadowPass=0,this._stats.numRenderedVerticesInTransparentPass=0)}}const Ir={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Er{constructor(o,c){this._structArray=o,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class vr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,c){return o._trim(),c&&(o.isTransferred=!0,c.add(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const c=Object.create(this.prototype);return c.arrayBuffer=o.arrayBuffer,c.length=o.length,c.capacity=o.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function _r(l,o=1){let c=0,d=0;return{members:l.map(g=>{const y=Ir[g.type].BYTES_PER_ELEMENT,b=c=vi(c,Math.max(o,y)),M=g.components||1;return d=Math.max(d,y),c+=y*M,{name:g.name,type:g.type,components:M,offset:b}}),size:vi(c,Math.max(d,o)),alignment:o}}function vi(l,o){return Math.ceil(l/o)*o}class Wr extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c){const d=this.length;return this.resize(d+1),this.emplace(d,o,c)}emplace(o,c,d){const g=2*o;return this.int16[g+0]=c,this.int16[g+1]=d,o}}Wr.prototype.bytesPerElement=4,hr(Wr,"StructArrayLayout2i4");class tn extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,o,c,d)}emplace(o,c,d,g){const y=3*o;return this.int16[y+0]=c,this.int16[y+1]=d,this.int16[y+2]=g,o}}tn.prototype.bytesPerElement=6,hr(tn,"StructArrayLayout3i6");class Hi extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,g){const y=this.length;return this.resize(y+1),this.emplace(y,o,c,d,g)}emplace(o,c,d,g,y){const b=4*o;return this.int16[b+0]=c,this.int16[b+1]=d,this.int16[b+2]=g,this.int16[b+3]=y,o}}Hi.prototype.bytesPerElement=8,hr(Hi,"StructArrayLayout4i8");class qa extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,g,y){const b=this.length;return this.resize(b+1),this.emplace(b,o,c,d,g,y)}emplace(o,c,d,g,y,b){const M=5*o;return this.int16[M+0]=c,this.int16[M+1]=d,this.int16[M+2]=g,this.int16[M+3]=y,this.int16[M+4]=b,o}}qa.prototype.bytesPerElement=10,hr(qa,"StructArrayLayout5i10");class Xo extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,g,y,b,M){const E=this.length;return this.resize(E+1),this.emplace(E,o,c,d,g,y,b,M)}emplace(o,c,d,g,y,b,M,E){const P=6*o,O=12*o,F=3*o;return this.int16[P+0]=c,this.int16[P+1]=d,this.uint8[O+4]=g,this.uint8[O+5]=y,this.uint8[O+6]=b,this.uint8[O+7]=M,this.float32[F+2]=E,o}}Xo.prototype.bytesPerElement=12,hr(Xo,"StructArrayLayout2i4ub1f12");class $i extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,g){const y=this.length;return this.resize(y+1),this.emplace(y,o,c,d,g)}emplace(o,c,d,g,y){const b=4*o;return this.float32[b+0]=c,this.float32[b+1]=d,this.float32[b+2]=g,this.float32[b+3]=y,o}}$i.prototype.bytesPerElement=16,hr($i,"StructArrayLayout4f16");class xi extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,g,y){const b=this.length;return this.resize(b+1),this.emplace(b,o,c,d,g,y)}emplace(o,c,d,g,y,b){const M=6*o,E=3*o;return this.uint16[M+0]=c,this.uint16[M+1]=d,this.uint16[M+2]=g,this.uint16[M+3]=y,this.float32[E+2]=b,o}}xi.prototype.bytesPerElement=12,hr(xi,"StructArrayLayout4ui1f12");class Ii extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d,g){const y=this.length;return this.resize(y+1),this.emplace(y,o,c,d,g)}emplace(o,c,d,g,y){const b=4*o;return this.uint16[b+0]=c,this.uint16[b+1]=d,this.uint16[b+2]=g,this.uint16[b+3]=y,o}}Ii.prototype.bytesPerElement=8,hr(Ii,"StructArrayLayout4ui8");class dn extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,g,y,b){const M=this.length;return this.resize(M+1),this.emplace(M,o,c,d,g,y,b)}emplace(o,c,d,g,y,b,M){const E=6*o;return this.int16[E+0]=c,this.int16[E+1]=d,this.int16[E+2]=g,this.int16[E+3]=y,this.int16[E+4]=b,this.int16[E+5]=M,o}}dn.prototype.bytesPerElement=12,hr(dn,"StructArrayLayout6i12");class sa extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d,g,y,b,M,E,P,O,F,V){const U=this.length;return this.resize(U+1),this.emplace(U,o,c,d,g,y,b,M,E,P,O,F,V)}emplace(o,c,d,g,y,b,M,E,P,O,F,V,U){const q=12*o;return this.int16[q+0]=c,this.int16[q+1]=d,this.int16[q+2]=g,this.int16[q+3]=y,this.uint16[q+4]=b,this.uint16[q+5]=M,this.uint16[q+6]=E,this.uint16[q+7]=P,this.int16[q+8]=O,this.int16[q+9]=F,this.int16[q+10]=V,this.int16[q+11]=U,o}}sa.prototype.bytesPerElement=24,hr(sa,"StructArrayLayout4i4ui4i24");class ln extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,g,y,b){const M=this.length;return this.resize(M+1),this.emplace(M,o,c,d,g,y,b)}emplace(o,c,d,g,y,b,M){const E=10*o,P=5*o;return this.int16[E+0]=c,this.int16[E+1]=d,this.int16[E+2]=g,this.float32[P+2]=y,this.float32[P+3]=b,this.float32[P+4]=M,o}}ln.prototype.bytesPerElement=20,hr(ln,"StructArrayLayout3i3f20");class Aa extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.uint32[1*o+0]=c,o}}Aa.prototype.bytesPerElement=4,hr(Aa,"StructArrayLayout1ul4");class Za extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c){const d=this.length;return this.resize(d+1),this.emplace(d,o,c)}emplace(o,c,d){const g=2*o;return this.uint16[g+0]=c,this.uint16[g+1]=d,o}}Za.prototype.bytesPerElement=4,hr(Za,"StructArrayLayout2ui4");class Ca extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d,g,y,b,M,E,P,O,F,V,U){const q=this.length;return this.resize(q+1),this.emplace(q,o,c,d,g,y,b,M,E,P,O,F,V,U)}emplace(o,c,d,g,y,b,M,E,P,O,F,V,U,q){const K=20*o,Q=10*o;return this.int16[K+0]=c,this.int16[K+1]=d,this.int16[K+2]=g,this.int16[K+3]=y,this.int16[K+4]=b,this.float32[Q+3]=M,this.float32[Q+4]=E,this.float32[Q+5]=P,this.float32[Q+6]=O,this.int16[K+14]=F,this.uint32[Q+8]=V,this.uint16[K+18]=U,this.uint16[K+19]=q,o}}Ca.prototype.bytesPerElement=40,hr(Ca,"StructArrayLayout5i4f1i1ul2ui40");class Yo extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,g,y,b,M){const E=this.length;return this.resize(E+1),this.emplace(E,o,c,d,g,y,b,M)}emplace(o,c,d,g,y,b,M,E){const P=8*o;return this.int16[P+0]=c,this.int16[P+1]=d,this.int16[P+2]=g,this.int16[P+4]=y,this.int16[P+5]=b,this.int16[P+6]=M,this.int16[P+7]=E,o}}Yo.prototype.bytesPerElement=16,hr(Yo,"StructArrayLayout3i2i2i16");class Ll extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,g,y){const b=this.length;return this.resize(b+1),this.emplace(b,o,c,d,g,y)}emplace(o,c,d,g,y,b){const M=4*o,E=8*o;return this.float32[M+0]=c,this.float32[M+1]=d,this.float32[M+2]=g,this.int16[E+6]=y,this.int16[E+7]=b,o}}Ll.prototype.bytesPerElement=16,hr(Ll,"StructArrayLayout2f1f2i16");class bs extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,g){const y=this.length;return this.resize(y+1),this.emplace(y,o,c,d,g)}emplace(o,c,d,g,y){const b=12*o,M=3*o;return this.uint8[b+0]=c,this.uint8[b+1]=d,this.float32[M+1]=g,this.float32[M+2]=y,o}}bs.prototype.bytesPerElement=12,hr(bs,"StructArrayLayout2ub2f12");class Xi extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,o,c,d)}emplace(o,c,d,g){const y=3*o;return this.uint16[y+0]=c,this.uint16[y+1]=d,this.uint16[y+2]=g,o}}Xi.prototype.bytesPerElement=6,hr(Xi,"StructArrayLayout3ui6");class ws extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,c,d,g,y,b,M,E,P,O,F,V,U,q,K,Q,ae,ge,_e,be,Ae){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,o,c,d,g,y,b,M,E,P,O,F,V,U,q,K,Q,ae,ge,_e,be,Ae)}emplace(o,c,d,g,y,b,M,E,P,O,F,V,U,q,K,Q,ae,ge,_e,be,Ae,Pe){const Ge=30*o,Ke=15*o,rt=60*o;return this.int16[Ge+0]=c,this.int16[Ge+1]=d,this.int16[Ge+2]=g,this.float32[Ke+2]=y,this.float32[Ke+3]=b,this.uint16[Ge+8]=M,this.uint16[Ge+9]=E,this.uint32[Ke+5]=P,this.uint32[Ke+6]=O,this.uint32[Ke+7]=F,this.uint16[Ge+16]=V,this.uint16[Ge+17]=U,this.uint16[Ge+18]=q,this.float32[Ke+10]=K,this.float32[Ke+11]=Q,this.uint8[rt+48]=ae,this.uint8[rt+49]=ge,this.uint8[rt+50]=_e,this.uint32[Ke+13]=be,this.int16[Ge+28]=Ae,this.uint8[rt+58]=Pe,o}}ws.prototype.bytesPerElement=60,hr(ws,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Zs extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,c,d,g,y,b,M,E,P,O,F,V,U,q,K,Q,ae,ge,_e,be,Ae,Pe,Ge,Ke,rt,ft,st,It,Ut,Tt,Bt,wt){const nr=this.length;return this.resize(nr+1),this.emplace(nr,o,c,d,g,y,b,M,E,P,O,F,V,U,q,K,Q,ae,ge,_e,be,Ae,Pe,Ge,Ke,rt,ft,st,It,Ut,Tt,Bt,wt)}emplace(o,c,d,g,y,b,M,E,P,O,F,V,U,q,K,Q,ae,ge,_e,be,Ae,Pe,Ge,Ke,rt,ft,st,It,Ut,Tt,Bt,wt,nr){const cr=20*o,$t=40*o,Dr=80*o;return this.float32[cr+0]=c,this.float32[cr+1]=d,this.int16[$t+4]=g,this.int16[$t+5]=y,this.int16[$t+6]=b,this.int16[$t+7]=M,this.int16[$t+8]=E,this.int16[$t+9]=P,this.int16[$t+10]=O,this.int16[$t+11]=F,this.int16[$t+12]=V,this.uint16[$t+13]=U,this.uint16[$t+14]=q,this.uint16[$t+15]=K,this.uint16[$t+16]=Q,this.uint16[$t+17]=ae,this.uint16[$t+18]=ge,this.uint16[$t+19]=_e,this.uint16[$t+20]=be,this.uint16[$t+21]=Ae,this.uint16[$t+22]=Pe,this.uint16[$t+23]=Ge,this.uint16[$t+24]=Ke,this.uint16[$t+25]=rt,this.uint16[$t+26]=ft,this.uint16[$t+27]=st,this.uint32[cr+14]=It,this.float32[cr+15]=Ut,this.float32[cr+16]=Tt,this.float32[cr+17]=Bt,this.float32[cr+18]=wt,this.uint8[Dr+76]=nr,o}}Zs.prototype.bytesPerElement=80,hr(Zs,"StructArrayLayout2f9i15ui1ul4f1ub80");class kl extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.float32[1*o+0]=c,o}}kl.prototype.bytesPerElement=4,hr(kl,"StructArrayLayout1f4");class ff extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,g,y){const b=this.length;return this.resize(b+1),this.emplace(b,o,c,d,g,y)}emplace(o,c,d,g,y,b){const M=5*o;return this.float32[M+0]=c,this.float32[M+1]=d,this.float32[M+2]=g,this.float32[M+3]=y,this.float32[M+4]=b,o}}ff.prototype.bytesPerElement=20,hr(ff,"StructArrayLayout5f20");class $2 extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,g,y,b,M){const E=this.length;return this.resize(E+1),this.emplace(E,o,c,d,g,y,b,M)}emplace(o,c,d,g,y,b,M,E){const P=7*o;return this.float32[P+0]=c,this.float32[P+1]=d,this.float32[P+2]=g,this.float32[P+3]=y,this.float32[P+4]=b,this.float32[P+5]=M,this.float32[P+6]=E,o}}$2.prototype.bytesPerElement=28,hr($2,"StructArrayLayout7f28");class G2 extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d,g){const y=this.length;return this.resize(y+1),this.emplace(y,o,c,d,g)}emplace(o,c,d,g,y){const b=6*o;return this.uint32[3*o+0]=c,this.uint16[b+2]=d,this.uint16[b+3]=g,this.uint16[b+4]=y,o}}G2.prototype.bytesPerElement=12,hr(G2,"StructArrayLayout1ul3ui12");class A_ extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.uint16[1*o+0]=c,o}}A_.prototype.bytesPerElement=2,hr(A_,"StructArrayLayout1ui2");class pf extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,o,c,d)}emplace(o,c,d,g){const y=3*o;return this.float32[y+0]=c,this.float32[y+1]=d,this.float32[y+2]=g,o}}pf.prototype.bytesPerElement=12,hr(pf,"StructArrayLayout3f12");class C_ extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c){const d=this.length;return this.resize(d+1),this.emplace(d,o,c)}emplace(o,c,d){const g=2*o;return this.float32[g+0]=c,this.float32[g+1]=d,o}}C_.prototype.bytesPerElement=8,hr(C_,"StructArrayLayout2f8");class U2 extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,g,y,b,M,E,P,O,F,V,U,q,K,Q){const ae=this.length;return this.resize(ae+1),this.emplace(ae,o,c,d,g,y,b,M,E,P,O,F,V,U,q,K,Q)}emplace(o,c,d,g,y,b,M,E,P,O,F,V,U,q,K,Q,ae){const ge=16*o;return this.float32[ge+0]=c,this.float32[ge+1]=d,this.float32[ge+2]=g,this.float32[ge+3]=y,this.float32[ge+4]=b,this.float32[ge+5]=M,this.float32[ge+6]=E,this.float32[ge+7]=P,this.float32[ge+8]=O,this.float32[ge+9]=F,this.float32[ge+10]=V,this.float32[ge+11]=U,this.float32[ge+12]=q,this.float32[ge+13]=K,this.float32[ge+14]=Q,this.float32[ge+15]=ae,o}}U2.prototype.bytesPerElement=64,hr(U2,"StructArrayLayout16f64");class y1 extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,g,y,b,M){const E=this.length;return this.resize(E+1),this.emplace(E,o,c,d,g,y,b,M)}emplace(o,c,d,g,y,b,M,E){const P=10*o,O=5*o;return this.uint16[P+0]=c,this.uint16[P+1]=d,this.uint16[P+2]=g,this.uint16[P+3]=y,this.float32[O+2]=b,this.float32[O+3]=M,this.float32[O+4]=E,o}}y1.prototype.bytesPerElement=20,hr(y1,"StructArrayLayout4ui3f20");class j2 extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.uint8[1*o+0]=c,o}}j2.prototype.bytesPerElement=1,hr(j2,"StructArrayLayout1ub1");class MR extends Er{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}MR.prototype.size=40;class H2 extends Ca{get(o){return new MR(this,o)}}hr(H2,"CollisionBoxArray");class AR extends Er{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}AR.prototype.size=60;class CR extends ws{get(o){return new AR(this,o)}}hr(CR,"PlacedSymbolArray");class IR extends Er{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(o){this._structArray.uint32[this._pos4+14]=o}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(o){this._structArray.float32[this._pos4+18]=o}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}IR.prototype.size=80;class ER extends Zs{get(o){return new IR(this,o)}}hr(ER,"SymbolInstanceArray");class DR extends kl{getoffsetX(o){return this.float32[1*o+0]}}hr(DR,"GlyphOffsetArray");class PR extends Wr{getx(o){return this.int16[2*o+0]}gety(o){return this.int16[2*o+1]}}hr(PR,"SymbolLineVertexArray");class LR extends Er{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}LR.prototype.size=12;class kR extends G2{get(o){return new LR(this,o)}}hr(kR,"FeatureIndexArray");class RR extends Za{geta_centroid_pos0(o){return this.uint16[2*o+0]}geta_centroid_pos1(o){return this.uint16[2*o+1]}}hr(RR,"FillExtrusionCentroidArray");const bX=_r([{name:"a_pos",components:2,type:"Int16"}],4),wX=_r([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class yn{constructor(o=[]){this.segments=o}_prepareSegment(o,c,d,g){let y=this.segments[this.segments.length-1];return o>yn.MAX_VERTEX_ARRAY_LENGTH&&Ue(`Max vertices per segment is ${yn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!y||y.vertexLength+o>yn.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==g)&&(y={vertexOffset:c,primitiveOffset:d,vertexLength:0,primitiveLength:0},g!==void 0&&(y.sortKey=g),this.segments.push(y)),y}prepareSegment(o,c,d,g){return this._prepareSegment(o,c.length,d.length,g)}get(){return this.segments}destroy(){for(const o of this.segments)for(const c in o.vaos)o.vaos[c].destroy()}static simpleSegment(o,c,d,g){return new yn([{vertexOffset:o,primitiveOffset:c,vertexLength:d,primitiveLength:g,vaos:{},sortKey:0}])}}function OR(l,o){return 256*(l=Ce(Math.floor(l),0,255))+Ce(Math.floor(o),0,255)}yn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,hr(yn,"SegmentVector");const SX=_r([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),TX=_r([{name:"a_dash",components:4,type:"Uint16"}]);var x1={exports:{}},zR={exports:{}};(function(l){l.exports=function(o,c){var d,g,y,b,M,E,P,O;for(g=o.length-(d=3&o.length),y=c,M=3432918353,E=461845907,O=0;O<g;)P=255&o.charCodeAt(O)|(255&o.charCodeAt(++O))<<8|(255&o.charCodeAt(++O))<<16|(255&o.charCodeAt(++O))<<24,++O,y=27492+(65535&(b=5*(65535&(y=(y^=P=(65535&(P=(P=(65535&P)*M+(((P>>>16)*M&65535)<<16)&4294967295)<<15|P>>>17))*E+(((P>>>16)*E&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(P=0,d){case 3:P^=(255&o.charCodeAt(O+2))<<16;case 2:P^=(255&o.charCodeAt(O+1))<<8;case 1:y^=P=(65535&(P=(P=(65535&(P^=255&o.charCodeAt(O)))*M+(((P>>>16)*M&65535)<<16)&4294967295)<<15|P>>>17))*E+(((P>>>16)*E&65535)<<16)&4294967295}return y^=o.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0}})(zR);var MX=zR.exports,BR={exports:{}};(function(l){l.exports=function(o,c){for(var d,g=o.length,y=c^g,b=0;g>=4;)d=1540483477*(65535&(d=255&o.charCodeAt(b)|(255&o.charCodeAt(++b))<<8|(255&o.charCodeAt(++b))<<16|(255&o.charCodeAt(++b))<<24))+((1540483477*(d>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),g-=4,++b;switch(g){case 3:y^=(255&o.charCodeAt(b+2))<<16;case 2:y^=(255&o.charCodeAt(b+1))<<8;case 1:y=1540483477*(65535&(y^=255&o.charCodeAt(b)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0}})(BR);var FR=MX,AX=BR.exports;x1.exports=FR,x1.exports.murmur3=FR,x1.exports.murmur2=AX;var W2=z(x1.exports);class I_{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(o,c,d,g){this.ids.push(NR(o)),this.positions.push(c,d,g)}eachPosition(o,c){const d=NR(o);let g=0,y=this.ids.length-1;for(;g<y;){const b=g+y>>1;this.ids[b]>=d?y=b:g=b+1}for(;this.ids[g]===d;)c(this.positions[3*g],this.positions[3*g+1],this.positions[3*g+2]),g++}static serialize(o,c){const d=new Float64Array(o.ids),g=new Uint32Array(o.positions);return q2(d,g,0,d.length-1),c&&(c.add(d.buffer),c.add(g.buffer)),{ids:d,positions:g}}static deserialize(o){const c=new I_;let d;c.ids=o.ids,c.positions=o.positions;for(const g of c.ids)g!==d&&c.uniqueIds.push(g),d=g;return c.indexed=!0,c}}function NR(l){const o=+l;return!isNaN(o)&&Number.MIN_SAFE_INTEGER<=o&&o<=Number.MAX_SAFE_INTEGER?o:W2(String(l))}function q2(l,o,c,d){for(;c<d;){const g=l[c+d>>1];let y=c-1,b=d+1;for(;;){do y++;while(l[y]<g);do b--;while(l[b]>g);if(y>=b)break;b1(l,y,b),b1(o,3*y,3*b),b1(o,3*y+1,3*b+1),b1(o,3*y+2,3*b+2)}b-c<d-b?(q2(l,o,c,b),c=b+1):(q2(l,o,b+1,d),d=b)}}function b1(l,o,c){const d=l[o];l[o]=l[c],l[c]=d}hr(I_,"FeaturePositionMap");class Cc{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,c){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,c),this.initialized=!0),!!this.location}}class w1 extends Cc{constructor(o){super(o),this.current=0}set(o,c,d){this.fetchUniformLocation(o,c)&&this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}}class po extends Cc{constructor(o){super(o),this.current=0}set(o,c,d){this.fetchUniformLocation(o,c)&&this.current!==d&&(this.current=d,this.gl.uniform1f(this.location,d))}}class mf extends Cc{constructor(o){super(o),this.current=[0,0]}set(o,c,d){this.fetchUniformLocation(o,c)&&(d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1])))}}class Z2 extends Cc{constructor(o){super(o),this.current=[0,0,0]}set(o,c,d){this.fetchUniformLocation(o,c)&&(d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2])))}}class VR extends Cc{constructor(o){super(o),this.current=[0,0,0,0]}set(o,c,d){this.fetchUniformLocation(o,c)&&(d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]&&d[3]===this.current[3]||(this.current=d,this.gl.uniform4f(this.location,d[0],d[1],d[2],d[3])))}}class $R extends Cc{constructor(o){super(o),this.current=sn.transparent}set(o,c,d){this.fetchUniformLocation(o,c)&&(d.r===this.current.r&&d.g===this.current.g&&d.b===this.current.b&&d.a===this.current.a||(this.current=d,this.gl.uniform4f(this.location,d.r,d.g,d.b,d.a)))}}const CX=new Float32Array(16);class E_ extends Cc{constructor(o){super(o),this.current=CX}set(o,c,d){if(this.fetchUniformLocation(o,c)){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let g=1;g<16;g++)if(d[g]!==this.current[g]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}}}const IX=new Float32Array(9),EX=new Float32Array(4);class X2 extends Cc{constructor(o){super(o),this.current=EX}set(o,c,d){if(this.fetchUniformLocation(o,c)){for(let g=0;g<4;g++)if(d[g]!==this.current[g]){this.current=d,this.gl.uniformMatrix2fv(this.location,!1,d);break}}}}function Y2(l){return[OR(255*l.r,255*l.g),OR(255*l.b,255*l.a)]}class D_{constructor(o,c,d){this.value=o,this.uniformNames=c.map(g=>`u_${g}`),this.type=d}setUniform(o,c,d,g,y){c.set(o,y,g.constantOr(this.value))}getBinding(o,c){return this.type==="color"?new $R(o):new po(o)}}class Vm{constructor(o,c){this.uniformNames=c.map(d=>`u_${d}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(o){this.pixelRatio=o.pixelRatio||1,this.pattern=o.tl.concat(o.br)}setUniform(o,c,d,g,y){const b=y==="u_pattern"||y==="u_dash"?this.pattern:y==="u_pixel_ratio"?this.pixelRatio:null;b&&c.set(o,y,b)}getBinding(o,c){return c==="u_pattern"||c==="u_dash"?new VR(o):new po(o)}}class Ic{constructor(o,c,d,g){this.expression=o,this.type=d,this.maxValue=0,this.paintVertexAttributes=c.map(y=>({name:`a_${y}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(o,c,d,g,y,b,M){const E=this.paintVertexArray.length,P=this.expression.evaluate(new Ne(0,{brightness:b}),c,{},y,g,M);this.paintVertexArray.resize(o),this._setPaintValue(E,o,P)}updatePaintArray(o,c,d,g,y,b,M){const E=this.expression.evaluate({zoom:0,brightness:M},d,g,void 0,y);this._setPaintValue(o,c,E)}_setPaintValue(o,c,d){if(this.type==="color"){const g=Y2(d);for(let y=o;y<c;y++)this.paintVertexArray.emplace(y,g[0],g[1])}else{for(let g=o;g<c;g++)this.paintVertexArray.emplace(g,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Rl{constructor(o,c,d,g,y,b){this.expression=o,this.uniformNames=c.map(M=>`u_${M}_t`),this.type=d,this.useIntegerZoom=g,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=c.map(M=>({name:`a_${M}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(o,c,d,g,y,b,M){const E=this.expression.evaluate(new Ne(this.zoom,{brightness:b}),c,{},y,g,M),P=this.expression.evaluate(new Ne(this.zoom+1,{brightness:b}),c,{},y,g,M),O=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(O,o,E,P)}updatePaintArray(o,c,d,g,y,b,M){const E=this.expression.evaluate({zoom:this.zoom,brightness:M},d,g,void 0,y),P=this.expression.evaluate({zoom:this.zoom+1,brightness:M},d,g,void 0,y);this._setPaintValue(o,c,E,P)}_setPaintValue(o,c,d,g){if(this.type==="color"){const y=Y2(d),b=Y2(g);for(let M=o;M<c;M++)this.paintVertexArray.emplace(M,y[0],y[1],b[0],b[1])}else{for(let y=o;y<c;y++)this.paintVertexArray.emplace(y,d,g);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,c,d,g,y){const b=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,M=Ce(this.expression.interpolationFactor(b,this.zoom,this.zoom+1),0,1);c.set(o,y,M)}getBinding(o,c){return new po(o)}}class Lh{constructor(o,c,d,g,y){this.expression=o,this.layerId=y,this.paintVertexAttributes=(d==="array"?TX:SX).members;for(let b=0;b<c.length;++b);this.paintVertexArray=new g}populatePaintArray(o,c,d){const g=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValues(g,o,c.patterns&&c.patterns[this.layerId],d)}updatePaintArray(o,c,d,g,y,b,M){this._setPaintValues(o,c,d.patterns&&d.patterns[this.layerId],b)}_setPaintValues(o,c,d,g){if(!g||!d)return;const y=g[d];if(!y)return;const{tl:b,br:M,pixelRatio:E}=y;for(let P=o;P<c;P++)this.paintVertexArray.emplace(P,b[0],b[1],M[0],M[1],E)}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class gf{constructor(o,c,d=()=>!0){this.binders={},this._buffers=[];const g=[];for(const y in o.paint._values){const b=o.paint.get(y);if(!d(y)||!(b instanceof pt&&yu(b.property.specification)))continue;const M=PX(y,o.type),E=b.value,P=b.property.specification.type,O=!!b.property.useIntegerZoom,F=y==="line-dasharray"||y.endsWith("pattern"),V=y==="line-dasharray"&&o.layout.get("line-cap").value.kind!=="constant";if(E.kind!=="constant"||V)if(E.kind==="source"||V||F){const U=GR(y,P,"source");this.binders[y]=F?new Lh(E,M,P,U,o.id):new Ic(E,M,P,U),g.push(`/a_${y}`)}else{const U=GR(y,P,"composite");this.binders[y]=new Rl(E,M,P,O,c,U),g.push(`/z_${y}`)}else this.binders[y]=F?new Vm(E.value,M):new D_(E.value,M,P),g.push(`/u_${y}`)}this.cacheKey=g.sort().join("")}getMaxValue(o){const c=this.binders[o];return c instanceof Ic||c instanceof Rl?c.maxValue:0}populatePaintArrays(o,c,d,g,y,b,M){for(const E in this.binders){const P=this.binders[E];(P instanceof Ic||P instanceof Rl||P instanceof Lh)&&P.populatePaintArray(o,c,d,g,y,b,M)}}setConstantPatternPositions(o){for(const c in this.binders){const d=this.binders[c];d instanceof Vm&&d.setConstantPatternPositions(o)}}updatePaintArrays(o,c,d,g,y,b,M,E){let P=!1;const O=Object.keys(o),F=O.length!==0,V=F?O:c.uniqueIds;for(const U in this.binders){const q=this.binders[U];if((q instanceof Ic||q instanceof Rl||q instanceof Lh)&&(q.expression.isStateDependent===!0||q.expression.isLightConstant===!1)){const K=y.paint.get(U);q.expression=K.value;for(const Q of V){const ae=o[Q.toString()];c.eachPosition(Q,(ge,_e,be)=>{const Ae=g.feature(ge);q.updatePaintArray(_e,be,Ae,ae,b,M,E)})}if(!F)for(const Q of d.uniqueIds){const ae=o[Q.toString()];d.eachPosition(Q,(ge,_e,be)=>{const Ae=g.feature(ge);q.updatePaintArray(_e,be,Ae,ae,b,M,E)})}P=!0}}return P}defines(){const o=[];for(const c in this.binders){const d=this.binders[c];(d instanceof D_||d instanceof Vm)&&o.push(...d.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return o}getBinderAttributes(){const o=[];for(const c in this.binders){const d=this.binders[c];if(d instanceof Ic||d instanceof Rl||d instanceof Lh)for(let g=0;g<d.paintVertexAttributes.length;g++)o.push(d.paintVertexAttributes[g].name)}return o}getBinderUniforms(){const o=[];for(const c in this.binders){const d=this.binders[c];if(d instanceof D_||d instanceof Vm||d instanceof Rl)for(const g of d.uniformNames)o.push(g)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const c=[];for(const d in this.binders){const g=this.binders[d];if(g instanceof D_||g instanceof Vm||g instanceof Rl)for(const y of g.uniformNames)c.push({name:y,property:d,binding:g.getBinding(o,y)})}return c}setUniforms(o,c,d,g,y){for(const{name:b,property:M,binding:E}of d)this.binders[M].setUniform(o,E,y,g.get(M),b)}updatePaintBuffers(){this._buffers=[];for(const o in this.binders){const c=this.binders[o];(c instanceof Ic||c instanceof Rl||c instanceof Lh)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(o){for(const c in this.binders){const d=this.binders[c];(d instanceof Ic||d instanceof Rl||d instanceof Lh)&&d.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const c=this.binders[o];(c instanceof Ic||c instanceof Rl||c instanceof Lh)&&c.destroy()}}}class kh{constructor(o,c,d=()=>!0){this.programConfigurations={};for(const g of o)this.programConfigurations[g.id]=new gf(g,c,d);this.needsUpload=!1,this._featureMap=new I_,this._featureMapWithoutIds=new I_,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(o,c,d,g,y,b,M,E){for(const P in this.programConfigurations)this.programConfigurations[P].populatePaintArrays(o,c,g,y,b,M,E);c.id!==void 0?this._featureMap.add(c.id,d,this._bufferOffset,o):(this._featureMapWithoutIds.add(this._idlessCounter,d,this._bufferOffset,o),this._idlessCounter+=1),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,c,d,g,y,b){for(const M of d)this.needsUpload=this.programConfigurations[M.id].updatePaintArrays(o,this._featureMap,this._featureMapWithoutIds,c,M,g,y,b||0)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const DX={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function PX(l,o){return DX[l]||[l.replace(`${o}-`,"").replace(/-/g,"_")]}const LX={"line-pattern":{source:xi,composite:xi},"fill-pattern":{source:xi,composite:xi},"fill-extrusion-pattern":{source:xi,composite:xi},"line-dasharray":{source:Ii,composite:Ii}},kX={color:{source:C_,composite:$i},number:{source:kl,composite:C_}};function GR(l,o,c){const d=LX[l];return d&&d[c]||kX[o][c]}hr(D_,"ConstantBinder"),hr(Vm,"PatternConstantBinder"),hr(Ic,"SourceExpressionBinder"),hr(Lh,"PatternCompositeBinder"),hr(Rl,"CompositeExpressionBinder"),hr(gf,"ProgramConfiguration",{omit:["_buffers"]}),hr(kh,"ProgramConfigurationSet");class Rh{constructor(o,c){o&&(c?this.setSouthWest(o).setNorthEast(c):o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))}setNorthEast(o){return this._ne=o instanceof Gi?new Gi(o.lng,o.lat):Gi.convert(o),this}setSouthWest(o){return this._sw=o instanceof Gi?new Gi(o.lng,o.lat):Gi.convert(o),this}extend(o){const c=this._sw,d=this._ne;let g,y;if(o instanceof Gi)g=o,y=o;else{if(!(o instanceof Rh))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Rh.convert(o)):this.extend(Gi.convert(o)):typeof o=="object"&&o!==null&&o.hasOwnProperty("lat")&&(o.hasOwnProperty("lon")||o.hasOwnProperty("lng"))?this.extend(Gi.convert(o)):this;if(g=o._sw,y=o._ne,!g||!y)return this}return c||d?(c.lng=Math.min(g.lng,c.lng),c.lat=Math.min(g.lat,c.lat),d.lng=Math.max(y.lng,d.lng),d.lat=Math.max(y.lat,d.lat)):(this._sw=new Gi(g.lng,g.lat),this._ne=new Gi(y.lng,y.lat)),this}getCenter(){return new Gi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Gi(this.getWest(),this.getNorth())}getSouthEast(){return new Gi(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:c,lat:d}=Gi.convert(o);let g=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&g}static convert(o){return!o||o instanceof Rh?o:new Rh(o)}}var la={},ua={};Object.defineProperty(ua,"__esModule",{value:!0}),ua.setMatrixArrayType=function(l){ua.ARRAY_TYPE=jR=l},ua.toRadian=function(l){return l*OX},ua.equals=function(l,o){return Math.abs(l-o)<=UR*Math.max(1,Math.abs(l),Math.abs(o))},ua.RANDOM=ua.ARRAY_TYPE=ua.EPSILON=void 0;var UR=1e-6;ua.EPSILON=UR;var jR=typeof Float32Array!="undefined"?Float32Array:Array;ua.ARRAY_TYPE=jR;var RX=Math.random;ua.RANDOM=RX;var OX=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var l=0,o=arguments.length;o--;)l+=arguments[o]*arguments[o];return Math.sqrt(l)});var xn={};function K2(l){return K2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},K2(l)}Object.defineProperty(xn,"__esModule",{value:!0}),xn.create=function(){var l=new Oh.ARRAY_TYPE(4);return Oh.ARRAY_TYPE!=Float32Array&&(l[1]=0,l[2]=0),l[0]=1,l[3]=1,l},xn.clone=function(l){var o=new Oh.ARRAY_TYPE(4);return o[0]=l[0],o[1]=l[1],o[2]=l[2],o[3]=l[3],o},xn.copy=function(l,o){return l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l},xn.identity=function(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=1,l},xn.fromValues=function(l,o,c,d){var g=new Oh.ARRAY_TYPE(4);return g[0]=l,g[1]=o,g[2]=c,g[3]=d,g},xn.set=function(l,o,c,d,g){return l[0]=o,l[1]=c,l[2]=d,l[3]=g,l},xn.transpose=function(l,o){if(l===o){var c=o[1];l[1]=o[2],l[2]=c}else l[0]=o[0],l[1]=o[2],l[2]=o[1],l[3]=o[3];return l},xn.invert=function(l,o){var c=o[0],d=o[1],g=o[2],y=o[3],b=c*y-g*d;return b?(l[0]=y*(b=1/b),l[1]=-d*b,l[2]=-g*b,l[3]=c*b,l):null},xn.adjoint=function(l,o){var c=o[0];return l[0]=o[3],l[1]=-o[1],l[2]=-o[2],l[3]=c,l},xn.determinant=function(l){return l[0]*l[3]-l[2]*l[1]},xn.multiply=WR,xn.rotate=function(l,o,c){var d=o[0],g=o[1],y=o[2],b=o[3],M=Math.sin(c),E=Math.cos(c);return l[0]=d*E+y*M,l[1]=g*E+b*M,l[2]=d*-M+y*E,l[3]=g*-M+b*E,l},xn.scale=function(l,o,c){var d=o[1],g=o[2],y=o[3],b=c[0],M=c[1];return l[0]=o[0]*b,l[1]=d*b,l[2]=g*M,l[3]=y*M,l},xn.fromRotation=function(l,o){var c=Math.sin(o),d=Math.cos(o);return l[0]=d,l[1]=c,l[2]=-c,l[3]=d,l},xn.fromScaling=function(l,o){return l[0]=o[0],l[1]=0,l[2]=0,l[3]=o[1],l},xn.str=function(l){return"mat2("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+")"},xn.frob=function(l){return Math.hypot(l[0],l[1],l[2],l[3])},xn.LDU=function(l,o,c,d){return l[2]=d[2]/d[0],c[0]=d[0],c[1]=d[1],c[3]=d[3]-l[2]*c[1],[l,o,c]},xn.add=function(l,o,c){return l[0]=o[0]+c[0],l[1]=o[1]+c[1],l[2]=o[2]+c[2],l[3]=o[3]+c[3],l},xn.subtract=qR,xn.exactEquals=function(l,o){return l[0]===o[0]&&l[1]===o[1]&&l[2]===o[2]&&l[3]===o[3]},xn.equals=function(l,o){var c=l[0],d=l[1],g=l[2],y=l[3],b=o[0],M=o[1],E=o[2],P=o[3];return Math.abs(c-b)<=Oh.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(d-M)<=Oh.EPSILON*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(g-E)<=Oh.EPSILON*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(y-P)<=Oh.EPSILON*Math.max(1,Math.abs(y),Math.abs(P))},xn.multiplyScalar=function(l,o,c){return l[0]=o[0]*c,l[1]=o[1]*c,l[2]=o[2]*c,l[3]=o[3]*c,l},xn.multiplyScalarAndAdd=function(l,o,c,d){return l[0]=o[0]+c[0]*d,l[1]=o[1]+c[1]*d,l[2]=o[2]+c[2]*d,l[3]=o[3]+c[3]*d,l},xn.sub=xn.mul=void 0;var Oh=function(l,o){if(l&&l.__esModule)return l;if(l===null||K2(l)!=="object"&&typeof l!="function")return{default:l};var c=HR(void 0);if(c&&c.has(l))return c.get(l);var d={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(y!=="default"&&Object.prototype.hasOwnProperty.call(l,y)){var b=g?Object.getOwnPropertyDescriptor(l,y):null;b&&(b.get||b.set)?Object.defineProperty(d,y,b):d[y]=l[y]}return d.default=l,c&&c.set(l,d),d}(ua);function HR(l){if(typeof WeakMap!="function")return null;var o=new WeakMap,c=new WeakMap;return(HR=function(d){return d?c:o})(l)}function WR(l,o,c){var d=o[0],g=o[1],y=o[2],b=o[3],M=c[0],E=c[1],P=c[2],O=c[3];return l[0]=d*M+y*E,l[1]=g*M+b*E,l[2]=d*P+y*O,l[3]=g*P+b*O,l}function qR(l,o,c){return l[0]=o[0]-c[0],l[1]=o[1]-c[1],l[2]=o[2]-c[2],l[3]=o[3]-c[3],l}xn.mul=WR,xn.sub=qR;var Sn={};function J2(l){return J2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},J2(l)}Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.create=function(){var l=new Su.ARRAY_TYPE(6);return Su.ARRAY_TYPE!=Float32Array&&(l[1]=0,l[2]=0,l[4]=0,l[5]=0),l[0]=1,l[3]=1,l},Sn.clone=function(l){var o=new Su.ARRAY_TYPE(6);return o[0]=l[0],o[1]=l[1],o[2]=l[2],o[3]=l[3],o[4]=l[4],o[5]=l[5],o},Sn.copy=function(l,o){return l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l[4]=o[4],l[5]=o[5],l},Sn.identity=function(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=1,l[4]=0,l[5]=0,l},Sn.fromValues=function(l,o,c,d,g,y){var b=new Su.ARRAY_TYPE(6);return b[0]=l,b[1]=o,b[2]=c,b[3]=d,b[4]=g,b[5]=y,b},Sn.set=function(l,o,c,d,g,y,b){return l[0]=o,l[1]=c,l[2]=d,l[3]=g,l[4]=y,l[5]=b,l},Sn.invert=function(l,o){var c=o[0],d=o[1],g=o[2],y=o[3],b=o[4],M=o[5],E=c*y-d*g;return E?(l[0]=y*(E=1/E),l[1]=-d*E,l[2]=-g*E,l[3]=c*E,l[4]=(g*M-y*b)*E,l[5]=(d*b-c*M)*E,l):null},Sn.determinant=function(l){return l[0]*l[3]-l[1]*l[2]},Sn.multiply=XR,Sn.rotate=function(l,o,c){var d=o[0],g=o[1],y=o[2],b=o[3],M=o[4],E=o[5],P=Math.sin(c),O=Math.cos(c);return l[0]=d*O+y*P,l[1]=g*O+b*P,l[2]=d*-P+y*O,l[3]=g*-P+b*O,l[4]=M,l[5]=E,l},Sn.scale=function(l,o,c){var d=o[1],g=o[2],y=o[3],b=o[4],M=o[5],E=c[0],P=c[1];return l[0]=o[0]*E,l[1]=d*E,l[2]=g*P,l[3]=y*P,l[4]=b,l[5]=M,l},Sn.translate=function(l,o,c){var d=o[0],g=o[1],y=o[2],b=o[3],M=o[4],E=o[5],P=c[0],O=c[1];return l[0]=d,l[1]=g,l[2]=y,l[3]=b,l[4]=d*P+y*O+M,l[5]=g*P+b*O+E,l},Sn.fromRotation=function(l,o){var c=Math.sin(o),d=Math.cos(o);return l[0]=d,l[1]=c,l[2]=-c,l[3]=d,l[4]=0,l[5]=0,l},Sn.fromScaling=function(l,o){return l[0]=o[0],l[1]=0,l[2]=0,l[3]=o[1],l[4]=0,l[5]=0,l},Sn.fromTranslation=function(l,o){return l[0]=1,l[1]=0,l[2]=0,l[3]=1,l[4]=o[0],l[5]=o[1],l},Sn.str=function(l){return"mat2d("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+", "+l[4]+", "+l[5]+")"},Sn.frob=function(l){return Math.hypot(l[0],l[1],l[2],l[3],l[4],l[5],1)},Sn.add=function(l,o,c){return l[0]=o[0]+c[0],l[1]=o[1]+c[1],l[2]=o[2]+c[2],l[3]=o[3]+c[3],l[4]=o[4]+c[4],l[5]=o[5]+c[5],l},Sn.subtract=YR,Sn.multiplyScalar=function(l,o,c){return l[0]=o[0]*c,l[1]=o[1]*c,l[2]=o[2]*c,l[3]=o[3]*c,l[4]=o[4]*c,l[5]=o[5]*c,l},Sn.multiplyScalarAndAdd=function(l,o,c,d){return l[0]=o[0]+c[0]*d,l[1]=o[1]+c[1]*d,l[2]=o[2]+c[2]*d,l[3]=o[3]+c[3]*d,l[4]=o[4]+c[4]*d,l[5]=o[5]+c[5]*d,l},Sn.exactEquals=function(l,o){return l[0]===o[0]&&l[1]===o[1]&&l[2]===o[2]&&l[3]===o[3]&&l[4]===o[4]&&l[5]===o[5]},Sn.equals=function(l,o){var c=l[0],d=l[1],g=l[2],y=l[3],b=l[4],M=l[5],E=o[0],P=o[1],O=o[2],F=o[3],V=o[4],U=o[5];return Math.abs(c-E)<=Su.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(d-P)<=Su.EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(g-O)<=Su.EPSILON*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(y-F)<=Su.EPSILON*Math.max(1,Math.abs(y),Math.abs(F))&&Math.abs(b-V)<=Su.EPSILON*Math.max(1,Math.abs(b),Math.abs(V))&&Math.abs(M-U)<=Su.EPSILON*Math.max(1,Math.abs(M),Math.abs(U))},Sn.sub=Sn.mul=void 0;var Su=function(l,o){if(l&&l.__esModule)return l;if(l===null||J2(l)!=="object"&&typeof l!="function")return{default:l};var c=ZR(void 0);if(c&&c.has(l))return c.get(l);var d={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(y!=="default"&&Object.prototype.hasOwnProperty.call(l,y)){var b=g?Object.getOwnPropertyDescriptor(l,y):null;b&&(b.get||b.set)?Object.defineProperty(d,y,b):d[y]=l[y]}return d.default=l,c&&c.set(l,d),d}(ua);function ZR(l){if(typeof WeakMap!="function")return null;var o=new WeakMap,c=new WeakMap;return(ZR=function(d){return d?c:o})(l)}function XR(l,o,c){var d=o[0],g=o[1],y=o[2],b=o[3],M=o[4],E=o[5],P=c[0],O=c[1],F=c[2],V=c[3],U=c[4],q=c[5];return l[0]=d*P+y*O,l[1]=g*P+b*O,l[2]=d*F+y*V,l[3]=g*F+b*V,l[4]=d*U+y*q+M,l[5]=g*U+b*q+E,l}function YR(l,o,c){return l[0]=o[0]-c[0],l[1]=o[1]-c[1],l[2]=o[2]-c[2],l[3]=o[3]-c[3],l[4]=o[4]-c[4],l[5]=o[5]-c[5],l}Sn.mul=XR,Sn.sub=YR;var Yi={};function Q2(l){return Q2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Q2(l)}Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.create=function(){var l=new Ss.ARRAY_TYPE(9);return Ss.ARRAY_TYPE!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l},Yi.fromMat4=function(l,o){return l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[4],l[4]=o[5],l[5]=o[6],l[6]=o[8],l[7]=o[9],l[8]=o[10],l},Yi.clone=function(l){var o=new Ss.ARRAY_TYPE(9);return o[0]=l[0],o[1]=l[1],o[2]=l[2],o[3]=l[3],o[4]=l[4],o[5]=l[5],o[6]=l[6],o[7]=l[7],o[8]=l[8],o},Yi.copy=function(l,o){return l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l[4]=o[4],l[5]=o[5],l[6]=o[6],l[7]=o[7],l[8]=o[8],l},Yi.fromValues=function(l,o,c,d,g,y,b,M,E){var P=new Ss.ARRAY_TYPE(9);return P[0]=l,P[1]=o,P[2]=c,P[3]=d,P[4]=g,P[5]=y,P[6]=b,P[7]=M,P[8]=E,P},Yi.set=function(l,o,c,d,g,y,b,M,E,P){return l[0]=o,l[1]=c,l[2]=d,l[3]=g,l[4]=y,l[5]=b,l[6]=M,l[7]=E,l[8]=P,l},Yi.identity=function(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=1,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},Yi.transpose=function(l,o){if(l===o){var c=o[1],d=o[2],g=o[5];l[1]=o[3],l[2]=o[6],l[3]=c,l[5]=o[7],l[6]=d,l[7]=g}else l[0]=o[0],l[1]=o[3],l[2]=o[6],l[3]=o[1],l[4]=o[4],l[5]=o[7],l[6]=o[2],l[7]=o[5],l[8]=o[8];return l},Yi.invert=function(l,o){var c=o[0],d=o[1],g=o[2],y=o[3],b=o[4],M=o[5],E=o[6],P=o[7],O=o[8],F=O*b-M*P,V=-O*y+M*E,U=P*y-b*E,q=c*F+d*V+g*U;return q?(l[0]=F*(q=1/q),l[1]=(-O*d+g*P)*q,l[2]=(M*d-g*b)*q,l[3]=V*q,l[4]=(O*c-g*E)*q,l[5]=(-M*c+g*y)*q,l[6]=U*q,l[7]=(-P*c+d*E)*q,l[8]=(b*c-d*y)*q,l):null},Yi.adjoint=function(l,o){var c=o[0],d=o[1],g=o[2],y=o[3],b=o[4],M=o[5],E=o[6],P=o[7],O=o[8];return l[0]=b*O-M*P,l[1]=g*P-d*O,l[2]=d*M-g*b,l[3]=M*E-y*O,l[4]=c*O-g*E,l[5]=g*y-c*M,l[6]=y*P-b*E,l[7]=d*E-c*P,l[8]=c*b-d*y,l},Yi.determinant=function(l){var o=l[3],c=l[4],d=l[5],g=l[6],y=l[7],b=l[8];return l[0]*(b*c-d*y)+l[1]*(-b*o+d*g)+l[2]*(y*o-c*g)},Yi.multiply=JR,Yi.translate=function(l,o,c){var d=o[0],g=o[1],y=o[2],b=o[3],M=o[4],E=o[5],P=o[6],O=o[7],F=o[8],V=c[0],U=c[1];return l[0]=d,l[1]=g,l[2]=y,l[3]=b,l[4]=M,l[5]=E,l[6]=V*d+U*b+P,l[7]=V*g+U*M+O,l[8]=V*y+U*E+F,l},Yi.rotate=function(l,o,c){var d=o[0],g=o[1],y=o[2],b=o[3],M=o[4],E=o[5],P=o[6],O=o[7],F=o[8],V=Math.sin(c),U=Math.cos(c);return l[0]=U*d+V*b,l[1]=U*g+V*M,l[2]=U*y+V*E,l[3]=U*b-V*d,l[4]=U*M-V*g,l[5]=U*E-V*y,l[6]=P,l[7]=O,l[8]=F,l},Yi.scale=function(l,o,c){var d=c[0],g=c[1];return l[0]=d*o[0],l[1]=d*o[1],l[2]=d*o[2],l[3]=g*o[3],l[4]=g*o[4],l[5]=g*o[5],l[6]=o[6],l[7]=o[7],l[8]=o[8],l},Yi.fromTranslation=function(l,o){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=1,l[5]=0,l[6]=o[0],l[7]=o[1],l[8]=1,l},Yi.fromRotation=function(l,o){var c=Math.sin(o),d=Math.cos(o);return l[0]=d,l[1]=c,l[2]=0,l[3]=-c,l[4]=d,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},Yi.fromScaling=function(l,o){return l[0]=o[0],l[1]=0,l[2]=0,l[3]=0,l[4]=o[1],l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},Yi.fromMat2d=function(l,o){return l[0]=o[0],l[1]=o[1],l[2]=0,l[3]=o[2],l[4]=o[3],l[5]=0,l[6]=o[4],l[7]=o[5],l[8]=1,l},Yi.fromQuat=function(l,o){var c=o[0],d=o[1],g=o[2],y=o[3],b=c+c,M=d+d,E=g+g,P=c*b,O=d*b,F=d*M,V=g*b,U=g*M,q=g*E,K=y*b,Q=y*M,ae=y*E;return l[0]=1-F-q,l[3]=O-ae,l[6]=V+Q,l[1]=O+ae,l[4]=1-P-q,l[7]=U-K,l[2]=V-Q,l[5]=U+K,l[8]=1-P-F,l},Yi.normalFromMat4=function(l,o){var c=o[0],d=o[1],g=o[2],y=o[3],b=o[4],M=o[5],E=o[6],P=o[7],O=o[8],F=o[9],V=o[10],U=o[11],q=o[12],K=o[13],Q=o[14],ae=o[15],ge=c*M-d*b,_e=c*E-g*b,be=c*P-y*b,Ae=d*E-g*M,Pe=d*P-y*M,Ge=g*P-y*E,Ke=O*K-F*q,rt=O*Q-V*q,ft=O*ae-U*q,st=F*Q-V*K,It=F*ae-U*K,Ut=V*ae-U*Q,Tt=ge*Ut-_e*It+be*st+Ae*ft-Pe*rt+Ge*Ke;return Tt?(l[0]=(M*Ut-E*It+P*st)*(Tt=1/Tt),l[1]=(E*ft-b*Ut-P*rt)*Tt,l[2]=(b*It-M*ft+P*Ke)*Tt,l[3]=(g*It-d*Ut-y*st)*Tt,l[4]=(c*Ut-g*ft+y*rt)*Tt,l[5]=(d*ft-c*It-y*Ke)*Tt,l[6]=(K*Ge-Q*Pe+ae*Ae)*Tt,l[7]=(Q*be-q*Ge-ae*_e)*Tt,l[8]=(q*Pe-K*be+ae*ge)*Tt,l):null},Yi.projection=function(l,o,c){return l[0]=2/o,l[1]=0,l[2]=0,l[3]=0,l[4]=-2/c,l[5]=0,l[6]=-1,l[7]=1,l[8]=1,l},Yi.str=function(l){return"mat3("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+", "+l[4]+", "+l[5]+", "+l[6]+", "+l[7]+", "+l[8]+")"},Yi.frob=function(l){return Math.hypot(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8])},Yi.add=function(l,o,c){return l[0]=o[0]+c[0],l[1]=o[1]+c[1],l[2]=o[2]+c[2],l[3]=o[3]+c[3],l[4]=o[4]+c[4],l[5]=o[5]+c[5],l[6]=o[6]+c[6],l[7]=o[7]+c[7],l[8]=o[8]+c[8],l},Yi.subtract=QR,Yi.multiplyScalar=function(l,o,c){return l[0]=o[0]*c,l[1]=o[1]*c,l[2]=o[2]*c,l[3]=o[3]*c,l[4]=o[4]*c,l[5]=o[5]*c,l[6]=o[6]*c,l[7]=o[7]*c,l[8]=o[8]*c,l},Yi.multiplyScalarAndAdd=function(l,o,c,d){return l[0]=o[0]+c[0]*d,l[1]=o[1]+c[1]*d,l[2]=o[2]+c[2]*d,l[3]=o[3]+c[3]*d,l[4]=o[4]+c[4]*d,l[5]=o[5]+c[5]*d,l[6]=o[6]+c[6]*d,l[7]=o[7]+c[7]*d,l[8]=o[8]+c[8]*d,l},Yi.exactEquals=function(l,o){return l[0]===o[0]&&l[1]===o[1]&&l[2]===o[2]&&l[3]===o[3]&&l[4]===o[4]&&l[5]===o[5]&&l[6]===o[6]&&l[7]===o[7]&&l[8]===o[8]},Yi.equals=function(l,o){var c=l[0],d=l[1],g=l[2],y=l[3],b=l[4],M=l[5],E=l[6],P=l[7],O=l[8],F=o[0],V=o[1],U=o[2],q=o[3],K=o[4],Q=o[5],ae=o[6],ge=o[7],_e=o[8];return Math.abs(c-F)<=Ss.EPSILON*Math.max(1,Math.abs(c),Math.abs(F))&&Math.abs(d-V)<=Ss.EPSILON*Math.max(1,Math.abs(d),Math.abs(V))&&Math.abs(g-U)<=Ss.EPSILON*Math.max(1,Math.abs(g),Math.abs(U))&&Math.abs(y-q)<=Ss.EPSILON*Math.max(1,Math.abs(y),Math.abs(q))&&Math.abs(b-K)<=Ss.EPSILON*Math.max(1,Math.abs(b),Math.abs(K))&&Math.abs(M-Q)<=Ss.EPSILON*Math.max(1,Math.abs(M),Math.abs(Q))&&Math.abs(E-ae)<=Ss.EPSILON*Math.max(1,Math.abs(E),Math.abs(ae))&&Math.abs(P-ge)<=Ss.EPSILON*Math.max(1,Math.abs(P),Math.abs(ge))&&Math.abs(O-_e)<=Ss.EPSILON*Math.max(1,Math.abs(O),Math.abs(_e))},Yi.sub=Yi.mul=void 0;var Ss=function(l,o){if(l&&l.__esModule)return l;if(l===null||Q2(l)!=="object"&&typeof l!="function")return{default:l};var c=KR(void 0);if(c&&c.has(l))return c.get(l);var d={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(y!=="default"&&Object.prototype.hasOwnProperty.call(l,y)){var b=g?Object.getOwnPropertyDescriptor(l,y):null;b&&(b.get||b.set)?Object.defineProperty(d,y,b):d[y]=l[y]}return d.default=l,c&&c.set(l,d),d}(ua);function KR(l){if(typeof WeakMap!="function")return null;var o=new WeakMap,c=new WeakMap;return(KR=function(d){return d?c:o})(l)}function JR(l,o,c){var d=o[0],g=o[1],y=o[2],b=o[3],M=o[4],E=o[5],P=o[6],O=o[7],F=o[8],V=c[0],U=c[1],q=c[2],K=c[3],Q=c[4],ae=c[5],ge=c[6],_e=c[7],be=c[8];return l[0]=V*d+U*b+q*P,l[1]=V*g+U*M+q*O,l[2]=V*y+U*E+q*F,l[3]=K*d+Q*b+ae*P,l[4]=K*g+Q*M+ae*O,l[5]=K*y+Q*E+ae*F,l[6]=ge*d+_e*b+be*P,l[7]=ge*g+_e*M+be*O,l[8]=ge*y+_e*E+be*F,l}function QR(l,o,c){return l[0]=o[0]-c[0],l[1]=o[1]-c[1],l[2]=o[2]-c[2],l[3]=o[3]-c[3],l[4]=o[4]-c[4],l[5]=o[5]-c[5],l[6]=o[6]-c[6],l[7]=o[7]-c[7],l[8]=o[8]-c[8],l}Yi.mul=JR,Yi.sub=QR;var Xr={};function eM(l){return eM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},eM(l)}Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.create=function(){var l=new Rn.ARRAY_TYPE(16);return Rn.ARRAY_TYPE!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},Xr.clone=function(l){var o=new Rn.ARRAY_TYPE(16);return o[0]=l[0],o[1]=l[1],o[2]=l[2],o[3]=l[3],o[4]=l[4],o[5]=l[5],o[6]=l[6],o[7]=l[7],o[8]=l[8],o[9]=l[9],o[10]=l[10],o[11]=l[11],o[12]=l[12],o[13]=l[13],o[14]=l[14],o[15]=l[15],o},Xr.copy=function(l,o){return l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l[4]=o[4],l[5]=o[5],l[6]=o[6],l[7]=o[7],l[8]=o[8],l[9]=o[9],l[10]=o[10],l[11]=o[11],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15],l},Xr.fromValues=function(l,o,c,d,g,y,b,M,E,P,O,F,V,U,q,K){var Q=new Rn.ARRAY_TYPE(16);return Q[0]=l,Q[1]=o,Q[2]=c,Q[3]=d,Q[4]=g,Q[5]=y,Q[6]=b,Q[7]=M,Q[8]=E,Q[9]=P,Q[10]=O,Q[11]=F,Q[12]=V,Q[13]=U,Q[14]=q,Q[15]=K,Q},Xr.set=function(l,o,c,d,g,y,b,M,E,P,O,F,V,U,q,K,Q){return l[0]=o,l[1]=c,l[2]=d,l[3]=g,l[4]=y,l[5]=b,l[6]=M,l[7]=E,l[8]=P,l[9]=O,l[10]=F,l[11]=V,l[12]=U,l[13]=q,l[14]=K,l[15]=Q,l},Xr.identity=t3,Xr.transpose=function(l,o){if(l===o){var c=o[1],d=o[2],g=o[3],y=o[6],b=o[7],M=o[11];l[1]=o[4],l[2]=o[8],l[3]=o[12],l[4]=c,l[6]=o[9],l[7]=o[13],l[8]=d,l[9]=y,l[11]=o[14],l[12]=g,l[13]=b,l[14]=M}else l[0]=o[0],l[1]=o[4],l[2]=o[8],l[3]=o[12],l[4]=o[1],l[5]=o[5],l[6]=o[9],l[7]=o[13],l[8]=o[2],l[9]=o[6],l[10]=o[10],l[11]=o[14],l[12]=o[3],l[13]=o[7],l[14]=o[11],l[15]=o[15];return l},Xr.invert=function(l,o){var c=o[0],d=o[1],g=o[2],y=o[3],b=o[4],M=o[5],E=o[6],P=o[7],O=o[8],F=o[9],V=o[10],U=o[11],q=o[12],K=o[13],Q=o[14],ae=o[15],ge=c*M-d*b,_e=c*E-g*b,be=c*P-y*b,Ae=d*E-g*M,Pe=d*P-y*M,Ge=g*P-y*E,Ke=O*K-F*q,rt=O*Q-V*q,ft=O*ae-U*q,st=F*Q-V*K,It=F*ae-U*K,Ut=V*ae-U*Q,Tt=ge*Ut-_e*It+be*st+Ae*ft-Pe*rt+Ge*Ke;return Tt?(l[0]=(M*Ut-E*It+P*st)*(Tt=1/Tt),l[1]=(g*It-d*Ut-y*st)*Tt,l[2]=(K*Ge-Q*Pe+ae*Ae)*Tt,l[3]=(V*Pe-F*Ge-U*Ae)*Tt,l[4]=(E*ft-b*Ut-P*rt)*Tt,l[5]=(c*Ut-g*ft+y*rt)*Tt,l[6]=(Q*be-q*Ge-ae*_e)*Tt,l[7]=(O*Ge-V*be+U*_e)*Tt,l[8]=(b*It-M*ft+P*Ke)*Tt,l[9]=(d*ft-c*It-y*Ke)*Tt,l[10]=(q*Pe-K*be+ae*ge)*Tt,l[11]=(F*be-O*Pe-U*ge)*Tt,l[12]=(M*rt-b*st-E*Ke)*Tt,l[13]=(c*st-d*rt+g*Ke)*Tt,l[14]=(K*_e-q*Ae-Q*ge)*Tt,l[15]=(O*Ae-F*_e+V*ge)*Tt,l):null},Xr.adjoint=function(l,o){var c=o[0],d=o[1],g=o[2],y=o[3],b=o[4],M=o[5],E=o[6],P=o[7],O=o[8],F=o[9],V=o[10],U=o[11],q=o[12],K=o[13],Q=o[14],ae=o[15];return l[0]=M*(V*ae-U*Q)-F*(E*ae-P*Q)+K*(E*U-P*V),l[1]=-(d*(V*ae-U*Q)-F*(g*ae-y*Q)+K*(g*U-y*V)),l[2]=d*(E*ae-P*Q)-M*(g*ae-y*Q)+K*(g*P-y*E),l[3]=-(d*(E*U-P*V)-M*(g*U-y*V)+F*(g*P-y*E)),l[4]=-(b*(V*ae-U*Q)-O*(E*ae-P*Q)+q*(E*U-P*V)),l[5]=c*(V*ae-U*Q)-O*(g*ae-y*Q)+q*(g*U-y*V),l[6]=-(c*(E*ae-P*Q)-b*(g*ae-y*Q)+q*(g*P-y*E)),l[7]=c*(E*U-P*V)-b*(g*U-y*V)+O*(g*P-y*E),l[8]=b*(F*ae-U*K)-O*(M*ae-P*K)+q*(M*U-P*F),l[9]=-(c*(F*ae-U*K)-O*(d*ae-y*K)+q*(d*U-y*F)),l[10]=c*(M*ae-P*K)-b*(d*ae-y*K)+q*(d*P-y*M),l[11]=-(c*(M*U-P*F)-b*(d*U-y*F)+O*(d*P-y*M)),l[12]=-(b*(F*Q-V*K)-O*(M*Q-E*K)+q*(M*V-E*F)),l[13]=c*(F*Q-V*K)-O*(d*Q-g*K)+q*(d*V-g*F),l[14]=-(c*(M*Q-E*K)-b*(d*Q-g*K)+q*(d*E-g*M)),l[15]=c*(M*V-E*F)-b*(d*V-g*F)+O*(d*E-g*M),l},Xr.determinant=function(l){var o=l[0],c=l[1],d=l[2],g=l[3],y=l[4],b=l[5],M=l[6],E=l[7],P=l[8],O=l[9],F=l[10],V=l[11],U=l[12],q=l[13],K=l[14],Q=l[15];return(o*b-c*y)*(F*Q-V*K)-(o*M-d*y)*(O*Q-V*q)+(o*E-g*y)*(O*K-F*q)+(c*M-d*b)*(P*Q-V*U)-(c*E-g*b)*(P*K-F*U)+(d*E-g*M)*(P*q-O*U)},Xr.multiply=r3,Xr.translate=function(l,o,c){var d,g,y,b,M,E,P,O,F,V,U,q,K=c[0],Q=c[1],ae=c[2];return o===l?(l[12]=o[0]*K+o[4]*Q+o[8]*ae+o[12],l[13]=o[1]*K+o[5]*Q+o[9]*ae+o[13],l[14]=o[2]*K+o[6]*Q+o[10]*ae+o[14],l[15]=o[3]*K+o[7]*Q+o[11]*ae+o[15]):(g=o[1],y=o[2],b=o[3],M=o[4],E=o[5],P=o[6],O=o[7],F=o[8],V=o[9],U=o[10],q=o[11],l[0]=d=o[0],l[1]=g,l[2]=y,l[3]=b,l[4]=M,l[5]=E,l[6]=P,l[7]=O,l[8]=F,l[9]=V,l[10]=U,l[11]=q,l[12]=d*K+M*Q+F*ae+o[12],l[13]=g*K+E*Q+V*ae+o[13],l[14]=y*K+P*Q+U*ae+o[14],l[15]=b*K+O*Q+q*ae+o[15]),l},Xr.scale=function(l,o,c){var d=c[0],g=c[1],y=c[2];return l[0]=o[0]*d,l[1]=o[1]*d,l[2]=o[2]*d,l[3]=o[3]*d,l[4]=o[4]*g,l[5]=o[5]*g,l[6]=o[6]*g,l[7]=o[7]*g,l[8]=o[8]*y,l[9]=o[9]*y,l[10]=o[10]*y,l[11]=o[11]*y,l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15],l},Xr.rotate=function(l,o,c,d){var g,y,b,M,E,P,O,F,V,U,q,K,Q,ae,ge,_e,be,Ae,Pe,Ge,Ke,rt,ft,st,It=d[0],Ut=d[1],Tt=d[2],Bt=Math.hypot(It,Ut,Tt);return Bt<Rn.EPSILON?null:(It*=Bt=1/Bt,Ut*=Bt,Tt*=Bt,g=Math.sin(c),y=Math.cos(c),E=o[1],P=o[2],O=o[3],V=o[5],U=o[6],q=o[7],Q=o[9],ae=o[10],ge=o[11],Pe=It*Ut*(b=1-y)-Tt*g,Ge=Ut*Ut*b+y,Ke=Tt*Ut*b+It*g,rt=It*Tt*b+Ut*g,ft=Ut*Tt*b-It*g,st=Tt*Tt*b+y,l[0]=(M=o[0])*(_e=It*It*b+y)+(F=o[4])*(be=Ut*It*b+Tt*g)+(K=o[8])*(Ae=Tt*It*b-Ut*g),l[1]=E*_e+V*be+Q*Ae,l[2]=P*_e+U*be+ae*Ae,l[3]=O*_e+q*be+ge*Ae,l[4]=M*Pe+F*Ge+K*Ke,l[5]=E*Pe+V*Ge+Q*Ke,l[6]=P*Pe+U*Ge+ae*Ke,l[7]=O*Pe+q*Ge+ge*Ke,l[8]=M*rt+F*ft+K*st,l[9]=E*rt+V*ft+Q*st,l[10]=P*rt+U*ft+ae*st,l[11]=O*rt+q*ft+ge*st,o!==l&&(l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15]),l)},Xr.rotateX=function(l,o,c){var d=Math.sin(c),g=Math.cos(c),y=o[4],b=o[5],M=o[6],E=o[7],P=o[8],O=o[9],F=o[10],V=o[11];return o!==l&&(l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15]),l[4]=y*g+P*d,l[5]=b*g+O*d,l[6]=M*g+F*d,l[7]=E*g+V*d,l[8]=P*g-y*d,l[9]=O*g-b*d,l[10]=F*g-M*d,l[11]=V*g-E*d,l},Xr.rotateY=function(l,o,c){var d=Math.sin(c),g=Math.cos(c),y=o[0],b=o[1],M=o[2],E=o[3],P=o[8],O=o[9],F=o[10],V=o[11];return o!==l&&(l[4]=o[4],l[5]=o[5],l[6]=o[6],l[7]=o[7],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15]),l[0]=y*g-P*d,l[1]=b*g-O*d,l[2]=M*g-F*d,l[3]=E*g-V*d,l[8]=y*d+P*g,l[9]=b*d+O*g,l[10]=M*d+F*g,l[11]=E*d+V*g,l},Xr.rotateZ=function(l,o,c){var d=Math.sin(c),g=Math.cos(c),y=o[0],b=o[1],M=o[2],E=o[3],P=o[4],O=o[5],F=o[6],V=o[7];return o!==l&&(l[8]=o[8],l[9]=o[9],l[10]=o[10],l[11]=o[11],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15]),l[0]=y*g+P*d,l[1]=b*g+O*d,l[2]=M*g+F*d,l[3]=E*g+V*d,l[4]=P*g-y*d,l[5]=O*g-b*d,l[6]=F*g-M*d,l[7]=V*g-E*d,l},Xr.fromTranslation=function(l,o){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=o[0],l[13]=o[1],l[14]=o[2],l[15]=1,l},Xr.fromScaling=function(l,o){return l[0]=o[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=o[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=o[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},Xr.fromRotation=function(l,o,c){var d,g,y,b=c[0],M=c[1],E=c[2],P=Math.hypot(b,M,E);return P<Rn.EPSILON?null:(b*=P=1/P,M*=P,E*=P,d=Math.sin(o),g=Math.cos(o),l[0]=b*b*(y=1-g)+g,l[1]=M*b*y+E*d,l[2]=E*b*y-M*d,l[3]=0,l[4]=b*M*y-E*d,l[5]=M*M*y+g,l[6]=E*M*y+b*d,l[7]=0,l[8]=b*E*y+M*d,l[9]=M*E*y-b*d,l[10]=E*E*y+g,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l)},Xr.fromXRotation=function(l,o){var c=Math.sin(o),d=Math.cos(o);return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=d,l[6]=c,l[7]=0,l[8]=0,l[9]=-c,l[10]=d,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},Xr.fromYRotation=function(l,o){var c=Math.sin(o),d=Math.cos(o);return l[0]=d,l[1]=0,l[2]=-c,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=c,l[9]=0,l[10]=d,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},Xr.fromZRotation=function(l,o){var c=Math.sin(o),d=Math.cos(o);return l[0]=d,l[1]=c,l[2]=0,l[3]=0,l[4]=-c,l[5]=d,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},Xr.fromRotationTranslation=i3,Xr.fromQuat2=function(l,o){var c=new Rn.ARRAY_TYPE(3),d=-o[0],g=-o[1],y=-o[2],b=o[3],M=o[4],E=o[5],P=o[6],O=o[7],F=d*d+g*g+y*y+b*b;return F>0?(c[0]=2*(M*b+O*d+E*y-P*g)/F,c[1]=2*(E*b+O*g+P*d-M*y)/F,c[2]=2*(P*b+O*y+M*g-E*d)/F):(c[0]=2*(M*b+O*d+E*y-P*g),c[1]=2*(E*b+O*g+P*d-M*y),c[2]=2*(P*b+O*y+M*g-E*d)),i3(l,o,c),l},Xr.getTranslation=function(l,o){return l[0]=o[12],l[1]=o[13],l[2]=o[14],l},Xr.getScaling=n3,Xr.getRotation=function(l,o){var c=new Rn.ARRAY_TYPE(3);n3(c,o);var d=1/c[0],g=1/c[1],y=1/c[2],b=o[0]*d,M=o[1]*g,E=o[2]*y,P=o[4]*d,O=o[5]*g,F=o[6]*y,V=o[8]*d,U=o[9]*g,q=o[10]*y,K=b+O+q,Q=0;return K>0?(Q=2*Math.sqrt(K+1),l[3]=.25*Q,l[0]=(F-U)/Q,l[1]=(V-E)/Q,l[2]=(M-P)/Q):b>O&&b>q?(Q=2*Math.sqrt(1+b-O-q),l[3]=(F-U)/Q,l[0]=.25*Q,l[1]=(M+P)/Q,l[2]=(V+E)/Q):O>q?(Q=2*Math.sqrt(1+O-b-q),l[3]=(V-E)/Q,l[0]=(M+P)/Q,l[1]=.25*Q,l[2]=(F+U)/Q):(Q=2*Math.sqrt(1+q-b-O),l[3]=(M-P)/Q,l[0]=(V+E)/Q,l[1]=(F+U)/Q,l[2]=.25*Q),l},Xr.fromRotationTranslationScale=function(l,o,c,d){var g=o[0],y=o[1],b=o[2],M=o[3],E=g+g,P=y+y,O=b+b,F=g*E,V=g*P,U=g*O,q=y*P,K=y*O,Q=b*O,ae=M*E,ge=M*P,_e=M*O,be=d[0],Ae=d[1],Pe=d[2];return l[0]=(1-(q+Q))*be,l[1]=(V+_e)*be,l[2]=(U-ge)*be,l[3]=0,l[4]=(V-_e)*Ae,l[5]=(1-(F+Q))*Ae,l[6]=(K+ae)*Ae,l[7]=0,l[8]=(U+ge)*Pe,l[9]=(K-ae)*Pe,l[10]=(1-(F+q))*Pe,l[11]=0,l[12]=c[0],l[13]=c[1],l[14]=c[2],l[15]=1,l},Xr.fromRotationTranslationScaleOrigin=function(l,o,c,d,g){var y=o[0],b=o[1],M=o[2],E=o[3],P=y+y,O=b+b,F=M+M,V=y*P,U=y*O,q=y*F,K=b*O,Q=b*F,ae=M*F,ge=E*P,_e=E*O,be=E*F,Ae=d[0],Pe=d[1],Ge=d[2],Ke=g[0],rt=g[1],ft=g[2],st=(1-(K+ae))*Ae,It=(U+be)*Ae,Ut=(q-_e)*Ae,Tt=(U-be)*Pe,Bt=(1-(V+ae))*Pe,wt=(Q+ge)*Pe,nr=(q+_e)*Ge,cr=(Q-ge)*Ge,$t=(1-(V+K))*Ge;return l[0]=st,l[1]=It,l[2]=Ut,l[3]=0,l[4]=Tt,l[5]=Bt,l[6]=wt,l[7]=0,l[8]=nr,l[9]=cr,l[10]=$t,l[11]=0,l[12]=c[0]+Ke-(st*Ke+Tt*rt+nr*ft),l[13]=c[1]+rt-(It*Ke+Bt*rt+cr*ft),l[14]=c[2]+ft-(Ut*Ke+wt*rt+$t*ft),l[15]=1,l},Xr.fromQuat=function(l,o){var c=o[0],d=o[1],g=o[2],y=o[3],b=c+c,M=d+d,E=g+g,P=c*b,O=d*b,F=d*M,V=g*b,U=g*M,q=g*E,K=y*b,Q=y*M,ae=y*E;return l[0]=1-F-q,l[1]=O+ae,l[2]=V-Q,l[3]=0,l[4]=O-ae,l[5]=1-P-q,l[6]=U+K,l[7]=0,l[8]=V+Q,l[9]=U-K,l[10]=1-P-F,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},Xr.frustum=function(l,o,c,d,g,y,b){var M=1/(c-o),E=1/(g-d),P=1/(y-b);return l[0]=2*y*M,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=2*y*E,l[6]=0,l[7]=0,l[8]=(c+o)*M,l[9]=(g+d)*E,l[10]=(b+y)*P,l[11]=-1,l[12]=0,l[13]=0,l[14]=b*y*2*P,l[15]=0,l},Xr.perspectiveNO=a3,Xr.perspectiveZO=function(l,o,c,d,g){var y,b=1/Math.tan(o/2);return l[0]=b/c,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=b,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,g!=null&&g!==1/0?(l[10]=g*(y=1/(d-g)),l[14]=g*d*y):(l[10]=-1,l[14]=-d),l},Xr.perspectiveFromFieldOfView=function(l,o,c,d){var g=Math.tan(o.upDegrees*Math.PI/180),y=Math.tan(o.downDegrees*Math.PI/180),b=Math.tan(o.leftDegrees*Math.PI/180),M=Math.tan(o.rightDegrees*Math.PI/180),E=2/(b+M),P=2/(g+y);return l[0]=E,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=P,l[6]=0,l[7]=0,l[8]=-(b-M)*E*.5,l[9]=(g-y)*P*.5,l[10]=d/(c-d),l[11]=-1,l[12]=0,l[13]=0,l[14]=d*c/(c-d),l[15]=0,l},Xr.orthoNO=o3,Xr.orthoZO=function(l,o,c,d,g,y,b){var M=1/(o-c),E=1/(d-g),P=1/(y-b);return l[0]=-2*M,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*E,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=P,l[11]=0,l[12]=(o+c)*M,l[13]=(g+d)*E,l[14]=y*P,l[15]=1,l},Xr.lookAt=function(l,o,c,d){var g,y,b,M,E,P,O,F,V,U,q=o[0],K=o[1],Q=o[2],ae=d[0],ge=d[1],_e=d[2],be=c[0],Ae=c[1],Pe=c[2];return Math.abs(q-be)<Rn.EPSILON&&Math.abs(K-Ae)<Rn.EPSILON&&Math.abs(Q-Pe)<Rn.EPSILON?t3(l):(O=q-be,F=K-Ae,V=Q-Pe,g=ge*(V*=U=1/Math.hypot(O,F,V))-_e*(F*=U),y=_e*(O*=U)-ae*V,b=ae*F-ge*O,(U=Math.hypot(g,y,b))?(g*=U=1/U,y*=U,b*=U):(g=0,y=0,b=0),M=F*b-V*y,E=V*g-O*b,P=O*y-F*g,(U=Math.hypot(M,E,P))?(M*=U=1/U,E*=U,P*=U):(M=0,E=0,P=0),l[0]=g,l[1]=M,l[2]=O,l[3]=0,l[4]=y,l[5]=E,l[6]=F,l[7]=0,l[8]=b,l[9]=P,l[10]=V,l[11]=0,l[12]=-(g*q+y*K+b*Q),l[13]=-(M*q+E*K+P*Q),l[14]=-(O*q+F*K+V*Q),l[15]=1,l)},Xr.targetTo=function(l,o,c,d){var g=o[0],y=o[1],b=o[2],M=d[0],E=d[1],P=d[2],O=g-c[0],F=y-c[1],V=b-c[2],U=O*O+F*F+V*V;U>0&&(O*=U=1/Math.sqrt(U),F*=U,V*=U);var q=E*V-P*F,K=P*O-M*V,Q=M*F-E*O;return(U=q*q+K*K+Q*Q)>0&&(q*=U=1/Math.sqrt(U),K*=U,Q*=U),l[0]=q,l[1]=K,l[2]=Q,l[3]=0,l[4]=F*Q-V*K,l[5]=V*q-O*Q,l[6]=O*K-F*q,l[7]=0,l[8]=O,l[9]=F,l[10]=V,l[11]=0,l[12]=g,l[13]=y,l[14]=b,l[15]=1,l},Xr.str=function(l){return"mat4("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+", "+l[4]+", "+l[5]+", "+l[6]+", "+l[7]+", "+l[8]+", "+l[9]+", "+l[10]+", "+l[11]+", "+l[12]+", "+l[13]+", "+l[14]+", "+l[15]+")"},Xr.frob=function(l){return Math.hypot(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15])},Xr.add=function(l,o,c){return l[0]=o[0]+c[0],l[1]=o[1]+c[1],l[2]=o[2]+c[2],l[3]=o[3]+c[3],l[4]=o[4]+c[4],l[5]=o[5]+c[5],l[6]=o[6]+c[6],l[7]=o[7]+c[7],l[8]=o[8]+c[8],l[9]=o[9]+c[9],l[10]=o[10]+c[10],l[11]=o[11]+c[11],l[12]=o[12]+c[12],l[13]=o[13]+c[13],l[14]=o[14]+c[14],l[15]=o[15]+c[15],l},Xr.subtract=s3,Xr.multiplyScalar=function(l,o,c){return l[0]=o[0]*c,l[1]=o[1]*c,l[2]=o[2]*c,l[3]=o[3]*c,l[4]=o[4]*c,l[5]=o[5]*c,l[6]=o[6]*c,l[7]=o[7]*c,l[8]=o[8]*c,l[9]=o[9]*c,l[10]=o[10]*c,l[11]=o[11]*c,l[12]=o[12]*c,l[13]=o[13]*c,l[14]=o[14]*c,l[15]=o[15]*c,l},Xr.multiplyScalarAndAdd=function(l,o,c,d){return l[0]=o[0]+c[0]*d,l[1]=o[1]+c[1]*d,l[2]=o[2]+c[2]*d,l[3]=o[3]+c[3]*d,l[4]=o[4]+c[4]*d,l[5]=o[5]+c[5]*d,l[6]=o[6]+c[6]*d,l[7]=o[7]+c[7]*d,l[8]=o[8]+c[8]*d,l[9]=o[9]+c[9]*d,l[10]=o[10]+c[10]*d,l[11]=o[11]+c[11]*d,l[12]=o[12]+c[12]*d,l[13]=o[13]+c[13]*d,l[14]=o[14]+c[14]*d,l[15]=o[15]+c[15]*d,l},Xr.exactEquals=function(l,o){return l[0]===o[0]&&l[1]===o[1]&&l[2]===o[2]&&l[3]===o[3]&&l[4]===o[4]&&l[5]===o[5]&&l[6]===o[6]&&l[7]===o[7]&&l[8]===o[8]&&l[9]===o[9]&&l[10]===o[10]&&l[11]===o[11]&&l[12]===o[12]&&l[13]===o[13]&&l[14]===o[14]&&l[15]===o[15]},Xr.equals=function(l,o){var c=l[0],d=l[1],g=l[2],y=l[3],b=l[4],M=l[5],E=l[6],P=l[7],O=l[8],F=l[9],V=l[10],U=l[11],q=l[12],K=l[13],Q=l[14],ae=l[15],ge=o[0],_e=o[1],be=o[2],Ae=o[3],Pe=o[4],Ge=o[5],Ke=o[6],rt=o[7],ft=o[8],st=o[9],It=o[10],Ut=o[11],Tt=o[12],Bt=o[13],wt=o[14],nr=o[15];return Math.abs(c-ge)<=Rn.EPSILON*Math.max(1,Math.abs(c),Math.abs(ge))&&Math.abs(d-_e)<=Rn.EPSILON*Math.max(1,Math.abs(d),Math.abs(_e))&&Math.abs(g-be)<=Rn.EPSILON*Math.max(1,Math.abs(g),Math.abs(be))&&Math.abs(y-Ae)<=Rn.EPSILON*Math.max(1,Math.abs(y),Math.abs(Ae))&&Math.abs(b-Pe)<=Rn.EPSILON*Math.max(1,Math.abs(b),Math.abs(Pe))&&Math.abs(M-Ge)<=Rn.EPSILON*Math.max(1,Math.abs(M),Math.abs(Ge))&&Math.abs(E-Ke)<=Rn.EPSILON*Math.max(1,Math.abs(E),Math.abs(Ke))&&Math.abs(P-rt)<=Rn.EPSILON*Math.max(1,Math.abs(P),Math.abs(rt))&&Math.abs(O-ft)<=Rn.EPSILON*Math.max(1,Math.abs(O),Math.abs(ft))&&Math.abs(F-st)<=Rn.EPSILON*Math.max(1,Math.abs(F),Math.abs(st))&&Math.abs(V-It)<=Rn.EPSILON*Math.max(1,Math.abs(V),Math.abs(It))&&Math.abs(U-Ut)<=Rn.EPSILON*Math.max(1,Math.abs(U),Math.abs(Ut))&&Math.abs(q-Tt)<=Rn.EPSILON*Math.max(1,Math.abs(q),Math.abs(Tt))&&Math.abs(K-Bt)<=Rn.EPSILON*Math.max(1,Math.abs(K),Math.abs(Bt))&&Math.abs(Q-wt)<=Rn.EPSILON*Math.max(1,Math.abs(Q),Math.abs(wt))&&Math.abs(ae-nr)<=Rn.EPSILON*Math.max(1,Math.abs(ae),Math.abs(nr))},Xr.sub=Xr.mul=Xr.ortho=Xr.perspective=void 0;var Rn=function(l,o){if(l&&l.__esModule)return l;if(l===null||eM(l)!=="object"&&typeof l!="function")return{default:l};var c=e3(void 0);if(c&&c.has(l))return c.get(l);var d={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(y!=="default"&&Object.prototype.hasOwnProperty.call(l,y)){var b=g?Object.getOwnPropertyDescriptor(l,y):null;b&&(b.get||b.set)?Object.defineProperty(d,y,b):d[y]=l[y]}return d.default=l,c&&c.set(l,d),d}(ua);function e3(l){if(typeof WeakMap!="function")return null;var o=new WeakMap,c=new WeakMap;return(e3=function(d){return d?c:o})(l)}function t3(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function r3(l,o,c){var d=o[0],g=o[1],y=o[2],b=o[3],M=o[4],E=o[5],P=o[6],O=o[7],F=o[8],V=o[9],U=o[10],q=o[11],K=o[12],Q=o[13],ae=o[14],ge=o[15],_e=c[0],be=c[1],Ae=c[2],Pe=c[3];return l[0]=_e*d+be*M+Ae*F+Pe*K,l[1]=_e*g+be*E+Ae*V+Pe*Q,l[2]=_e*y+be*P+Ae*U+Pe*ae,l[3]=_e*b+be*O+Ae*q+Pe*ge,l[4]=(_e=c[4])*d+(be=c[5])*M+(Ae=c[6])*F+(Pe=c[7])*K,l[5]=_e*g+be*E+Ae*V+Pe*Q,l[6]=_e*y+be*P+Ae*U+Pe*ae,l[7]=_e*b+be*O+Ae*q+Pe*ge,l[8]=(_e=c[8])*d+(be=c[9])*M+(Ae=c[10])*F+(Pe=c[11])*K,l[9]=_e*g+be*E+Ae*V+Pe*Q,l[10]=_e*y+be*P+Ae*U+Pe*ae,l[11]=_e*b+be*O+Ae*q+Pe*ge,l[12]=(_e=c[12])*d+(be=c[13])*M+(Ae=c[14])*F+(Pe=c[15])*K,l[13]=_e*g+be*E+Ae*V+Pe*Q,l[14]=_e*y+be*P+Ae*U+Pe*ae,l[15]=_e*b+be*O+Ae*q+Pe*ge,l}function i3(l,o,c){var d=o[0],g=o[1],y=o[2],b=o[3],M=d+d,E=g+g,P=y+y,O=d*M,F=d*E,V=d*P,U=g*E,q=g*P,K=y*P,Q=b*M,ae=b*E,ge=b*P;return l[0]=1-(U+K),l[1]=F+ge,l[2]=V-ae,l[3]=0,l[4]=F-ge,l[5]=1-(O+K),l[6]=q+Q,l[7]=0,l[8]=V+ae,l[9]=q-Q,l[10]=1-(O+U),l[11]=0,l[12]=c[0],l[13]=c[1],l[14]=c[2],l[15]=1,l}function n3(l,o){var c=o[4],d=o[5],g=o[6],y=o[8],b=o[9],M=o[10];return l[0]=Math.hypot(o[0],o[1],o[2]),l[1]=Math.hypot(c,d,g),l[2]=Math.hypot(y,b,M),l}function a3(l,o,c,d,g){var y,b=1/Math.tan(o/2);return l[0]=b/c,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=b,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,g!=null&&g!==1/0?(l[10]=(g+d)*(y=1/(d-g)),l[14]=2*g*d*y):(l[10]=-1,l[14]=-2*d),l}function o3(l,o,c,d,g,y,b){var M=1/(o-c),E=1/(d-g),P=1/(y-b);return l[0]=-2*M,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*E,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*P,l[11]=0,l[12]=(o+c)*M,l[13]=(g+d)*E,l[14]=(b+y)*P,l[15]=1,l}function s3(l,o,c){return l[0]=o[0]-c[0],l[1]=o[1]-c[1],l[2]=o[2]-c[2],l[3]=o[3]-c[3],l[4]=o[4]-c[4],l[5]=o[5]-c[5],l[6]=o[6]-c[6],l[7]=o[7]-c[7],l[8]=o[8]-c[8],l[9]=o[9]-c[9],l[10]=o[10]-c[10],l[11]=o[11]-c[11],l[12]=o[12]-c[12],l[13]=o[13]-c[13],l[14]=o[14]-c[14],l[15]=o[15]-c[15],l}Xr.perspective=a3,Xr.ortho=o3,Xr.mul=r3,Xr.sub=s3;var Hr={},Zr={};function tM(l){return tM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},tM(l)}Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.create=u3,Zr.clone=function(l){var o=new Ec.ARRAY_TYPE(3);return o[0]=l[0],o[1]=l[1],o[2]=l[2],o},Zr.length=c3,Zr.fromValues=function(l,o,c){var d=new Ec.ARRAY_TYPE(3);return d[0]=l,d[1]=o,d[2]=c,d},Zr.copy=function(l,o){return l[0]=o[0],l[1]=o[1],l[2]=o[2],l},Zr.set=function(l,o,c,d){return l[0]=o,l[1]=c,l[2]=d,l},Zr.add=function(l,o,c){return l[0]=o[0]+c[0],l[1]=o[1]+c[1],l[2]=o[2]+c[2],l},Zr.subtract=h3,Zr.multiply=d3,Zr.divide=f3,Zr.ceil=function(l,o){return l[0]=Math.ceil(o[0]),l[1]=Math.ceil(o[1]),l[2]=Math.ceil(o[2]),l},Zr.floor=function(l,o){return l[0]=Math.floor(o[0]),l[1]=Math.floor(o[1]),l[2]=Math.floor(o[2]),l},Zr.min=function(l,o,c){return l[0]=Math.min(o[0],c[0]),l[1]=Math.min(o[1],c[1]),l[2]=Math.min(o[2],c[2]),l},Zr.max=function(l,o,c){return l[0]=Math.max(o[0],c[0]),l[1]=Math.max(o[1],c[1]),l[2]=Math.max(o[2],c[2]),l},Zr.round=function(l,o){return l[0]=Math.round(o[0]),l[1]=Math.round(o[1]),l[2]=Math.round(o[2]),l},Zr.scale=function(l,o,c){return l[0]=o[0]*c,l[1]=o[1]*c,l[2]=o[2]*c,l},Zr.scaleAndAdd=function(l,o,c,d){return l[0]=o[0]+c[0]*d,l[1]=o[1]+c[1]*d,l[2]=o[2]+c[2]*d,l},Zr.distance=p3,Zr.squaredDistance=m3,Zr.squaredLength=g3,Zr.negate=function(l,o){return l[0]=-o[0],l[1]=-o[1],l[2]=-o[2],l},Zr.inverse=function(l,o){return l[0]=1/o[0],l[1]=1/o[1],l[2]=1/o[2],l},Zr.normalize=function(l,o){var c=o[0],d=o[1],g=o[2],y=c*c+d*d+g*g;return y>0&&(y=1/Math.sqrt(y)),l[0]=o[0]*y,l[1]=o[1]*y,l[2]=o[2]*y,l},Zr.dot=v3,Zr.cross=function(l,o,c){var d=o[0],g=o[1],y=o[2],b=c[0],M=c[1],E=c[2];return l[0]=g*E-y*M,l[1]=y*b-d*E,l[2]=d*M-g*b,l},Zr.lerp=function(l,o,c,d){var g=o[0],y=o[1],b=o[2];return l[0]=g+d*(c[0]-g),l[1]=y+d*(c[1]-y),l[2]=b+d*(c[2]-b),l},Zr.hermite=function(l,o,c,d,g,y){var b=y*y,M=b*(2*y-3)+1,E=b*(y-2)+y,P=b*(y-1),O=b*(3-2*y);return l[0]=o[0]*M+c[0]*E+d[0]*P+g[0]*O,l[1]=o[1]*M+c[1]*E+d[1]*P+g[1]*O,l[2]=o[2]*M+c[2]*E+d[2]*P+g[2]*O,l},Zr.bezier=function(l,o,c,d,g,y){var b=1-y,M=b*b,E=y*y,P=M*b,O=3*y*M,F=3*E*b,V=E*y;return l[0]=o[0]*P+c[0]*O+d[0]*F+g[0]*V,l[1]=o[1]*P+c[1]*O+d[1]*F+g[1]*V,l[2]=o[2]*P+c[2]*O+d[2]*F+g[2]*V,l},Zr.random=function(l,o){o=o||1;var c=2*Ec.RANDOM()*Math.PI,d=2*Ec.RANDOM()-1,g=Math.sqrt(1-d*d)*o;return l[0]=Math.cos(c)*g,l[1]=Math.sin(c)*g,l[2]=d*o,l},Zr.transformMat4=function(l,o,c){var d=o[0],g=o[1],y=o[2],b=c[3]*d+c[7]*g+c[11]*y+c[15];return l[0]=(c[0]*d+c[4]*g+c[8]*y+c[12])/(b=b||1),l[1]=(c[1]*d+c[5]*g+c[9]*y+c[13])/b,l[2]=(c[2]*d+c[6]*g+c[10]*y+c[14])/b,l},Zr.transformMat3=function(l,o,c){var d=o[0],g=o[1],y=o[2];return l[0]=d*c[0]+g*c[3]+y*c[6],l[1]=d*c[1]+g*c[4]+y*c[7],l[2]=d*c[2]+g*c[5]+y*c[8],l},Zr.transformQuat=function(l,o,c){var d=c[0],g=c[1],y=c[2],b=o[0],M=o[1],E=o[2],P=g*E-y*M,O=y*b-d*E,F=d*M-g*b,V=g*F-y*O,U=y*P-d*F,q=d*O-g*P,K=2*c[3];return O*=K,F*=K,U*=2,q*=2,l[0]=b+(P*=K)+(V*=2),l[1]=M+O+U,l[2]=E+F+q,l},Zr.rotateX=function(l,o,c,d){var g=[],y=[];return g[0]=o[0]-c[0],g[1]=o[1]-c[1],g[2]=o[2]-c[2],y[0]=g[0],y[1]=g[1]*Math.cos(d)-g[2]*Math.sin(d),y[2]=g[1]*Math.sin(d)+g[2]*Math.cos(d),l[0]=y[0]+c[0],l[1]=y[1]+c[1],l[2]=y[2]+c[2],l},Zr.rotateY=function(l,o,c,d){var g=[],y=[];return g[0]=o[0]-c[0],g[1]=o[1]-c[1],g[2]=o[2]-c[2],y[0]=g[2]*Math.sin(d)+g[0]*Math.cos(d),y[1]=g[1],y[2]=g[2]*Math.cos(d)-g[0]*Math.sin(d),l[0]=y[0]+c[0],l[1]=y[1]+c[1],l[2]=y[2]+c[2],l},Zr.rotateZ=function(l,o,c,d){var g=[],y=[];return g[0]=o[0]-c[0],g[1]=o[1]-c[1],g[2]=o[2]-c[2],y[0]=g[0]*Math.cos(d)-g[1]*Math.sin(d),y[1]=g[0]*Math.sin(d)+g[1]*Math.cos(d),y[2]=g[2],l[0]=y[0]+c[0],l[1]=y[1]+c[1],l[2]=y[2]+c[2],l},Zr.angle=function(l,o){var c=l[0],d=l[1],g=l[2],y=o[0],b=o[1],M=o[2],E=Math.sqrt(c*c+d*d+g*g)*Math.sqrt(y*y+b*b+M*M),P=E&&v3(l,o)/E;return Math.acos(Math.min(Math.max(P,-1),1))},Zr.zero=function(l){return l[0]=0,l[1]=0,l[2]=0,l},Zr.str=function(l){return"vec3("+l[0]+", "+l[1]+", "+l[2]+")"},Zr.exactEquals=function(l,o){return l[0]===o[0]&&l[1]===o[1]&&l[2]===o[2]},Zr.equals=function(l,o){var c=l[0],d=l[1],g=l[2],y=o[0],b=o[1],M=o[2];return Math.abs(c-y)<=Ec.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(d-b)<=Ec.EPSILON*Math.max(1,Math.abs(d),Math.abs(b))&&Math.abs(g-M)<=Ec.EPSILON*Math.max(1,Math.abs(g),Math.abs(M))},Zr.forEach=Zr.sqrLen=Zr.len=Zr.sqrDist=Zr.dist=Zr.div=Zr.mul=Zr.sub=void 0;var Ec=function(l,o){if(l&&l.__esModule)return l;if(l===null||tM(l)!=="object"&&typeof l!="function")return{default:l};var c=l3(void 0);if(c&&c.has(l))return c.get(l);var d={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(y!=="default"&&Object.prototype.hasOwnProperty.call(l,y)){var b=g?Object.getOwnPropertyDescriptor(l,y):null;b&&(b.get||b.set)?Object.defineProperty(d,y,b):d[y]=l[y]}return d.default=l,c&&c.set(l,d),d}(ua);function l3(l){if(typeof WeakMap!="function")return null;var o=new WeakMap,c=new WeakMap;return(l3=function(d){return d?c:o})(l)}function u3(){var l=new Ec.ARRAY_TYPE(3);return Ec.ARRAY_TYPE!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function c3(l){return Math.hypot(l[0],l[1],l[2])}function h3(l,o,c){return l[0]=o[0]-c[0],l[1]=o[1]-c[1],l[2]=o[2]-c[2],l}function d3(l,o,c){return l[0]=o[0]*c[0],l[1]=o[1]*c[1],l[2]=o[2]*c[2],l}function f3(l,o,c){return l[0]=o[0]/c[0],l[1]=o[1]/c[1],l[2]=o[2]/c[2],l}function p3(l,o){return Math.hypot(o[0]-l[0],o[1]-l[1],o[2]-l[2])}function m3(l,o){var c=o[0]-l[0],d=o[1]-l[1],g=o[2]-l[2];return c*c+d*d+g*g}function g3(l){var o=l[0],c=l[1],d=l[2];return o*o+c*c+d*d}function v3(l,o){return l[0]*o[0]+l[1]*o[1]+l[2]*o[2]}Zr.sub=h3,Zr.mul=d3,Zr.div=f3,Zr.dist=p3,Zr.sqrDist=m3,Zr.len=c3,Zr.sqrLen=g3;var Dc,zX=(Dc=u3(),function(l,o,c,d,g,y){var b,M;for(o||(o=3),c||(c=0),M=d?Math.min(d*o+c,l.length):l.length,b=c;b<M;b+=o)Dc[0]=l[b],Dc[1]=l[b+1],Dc[2]=l[b+2],g(Dc,Dc,y),l[b]=Dc[0],l[b+1]=Dc[1],l[b+2]=Dc[2];return l});Zr.forEach=zX;var li={};function rM(l){return rM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},rM(l)}Object.defineProperty(li,"__esModule",{value:!0}),li.create=y3,li.clone=function(l){var o=new Xs.ARRAY_TYPE(4);return o[0]=l[0],o[1]=l[1],o[2]=l[2],o[3]=l[3],o},li.fromValues=function(l,o,c,d){var g=new Xs.ARRAY_TYPE(4);return g[0]=l,g[1]=o,g[2]=c,g[3]=d,g},li.copy=function(l,o){return l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l},li.set=function(l,o,c,d,g){return l[0]=o,l[1]=c,l[2]=d,l[3]=g,l},li.add=function(l,o,c){return l[0]=o[0]+c[0],l[1]=o[1]+c[1],l[2]=o[2]+c[2],l[3]=o[3]+c[3],l},li.subtract=x3,li.multiply=b3,li.divide=w3,li.ceil=function(l,o){return l[0]=Math.ceil(o[0]),l[1]=Math.ceil(o[1]),l[2]=Math.ceil(o[2]),l[3]=Math.ceil(o[3]),l},li.floor=function(l,o){return l[0]=Math.floor(o[0]),l[1]=Math.floor(o[1]),l[2]=Math.floor(o[2]),l[3]=Math.floor(o[3]),l},li.min=function(l,o,c){return l[0]=Math.min(o[0],c[0]),l[1]=Math.min(o[1],c[1]),l[2]=Math.min(o[2],c[2]),l[3]=Math.min(o[3],c[3]),l},li.max=function(l,o,c){return l[0]=Math.max(o[0],c[0]),l[1]=Math.max(o[1],c[1]),l[2]=Math.max(o[2],c[2]),l[3]=Math.max(o[3],c[3]),l},li.round=function(l,o){return l[0]=Math.round(o[0]),l[1]=Math.round(o[1]),l[2]=Math.round(o[2]),l[3]=Math.round(o[3]),l},li.scale=function(l,o,c){return l[0]=o[0]*c,l[1]=o[1]*c,l[2]=o[2]*c,l[3]=o[3]*c,l},li.scaleAndAdd=function(l,o,c,d){return l[0]=o[0]+c[0]*d,l[1]=o[1]+c[1]*d,l[2]=o[2]+c[2]*d,l[3]=o[3]+c[3]*d,l},li.distance=S3,li.squaredDistance=T3,li.length=M3,li.squaredLength=A3,li.negate=function(l,o){return l[0]=-o[0],l[1]=-o[1],l[2]=-o[2],l[3]=-o[3],l},li.inverse=function(l,o){return l[0]=1/o[0],l[1]=1/o[1],l[2]=1/o[2],l[3]=1/o[3],l},li.normalize=function(l,o){var c=o[0],d=o[1],g=o[2],y=o[3],b=c*c+d*d+g*g+y*y;return b>0&&(b=1/Math.sqrt(b)),l[0]=c*b,l[1]=d*b,l[2]=g*b,l[3]=y*b,l},li.dot=function(l,o){return l[0]*o[0]+l[1]*o[1]+l[2]*o[2]+l[3]*o[3]},li.cross=function(l,o,c,d){var g=c[0]*d[1]-c[1]*d[0],y=c[0]*d[2]-c[2]*d[0],b=c[0]*d[3]-c[3]*d[0],M=c[1]*d[2]-c[2]*d[1],E=c[1]*d[3]-c[3]*d[1],P=c[2]*d[3]-c[3]*d[2],O=o[0],F=o[1],V=o[2],U=o[3];return l[0]=F*P-V*E+U*M,l[1]=-O*P+V*b-U*y,l[2]=O*E-F*b+U*g,l[3]=-O*M+F*y-V*g,l},li.lerp=function(l,o,c,d){var g=o[0],y=o[1],b=o[2],M=o[3];return l[0]=g+d*(c[0]-g),l[1]=y+d*(c[1]-y),l[2]=b+d*(c[2]-b),l[3]=M+d*(c[3]-M),l},li.random=function(l,o){var c,d,g,y,b,M;o=o||1;do b=(c=2*Xs.RANDOM()-1)*c+(d=2*Xs.RANDOM()-1)*d;while(b>=1);do M=(g=2*Xs.RANDOM()-1)*g+(y=2*Xs.RANDOM()-1)*y;while(M>=1);var E=Math.sqrt((1-b)/M);return l[0]=o*c,l[1]=o*d,l[2]=o*g*E,l[3]=o*y*E,l},li.transformMat4=function(l,o,c){var d=o[0],g=o[1],y=o[2],b=o[3];return l[0]=c[0]*d+c[4]*g+c[8]*y+c[12]*b,l[1]=c[1]*d+c[5]*g+c[9]*y+c[13]*b,l[2]=c[2]*d+c[6]*g+c[10]*y+c[14]*b,l[3]=c[3]*d+c[7]*g+c[11]*y+c[15]*b,l},li.transformQuat=function(l,o,c){var d=o[0],g=o[1],y=o[2],b=c[0],M=c[1],E=c[2],P=c[3],O=P*d+M*y-E*g,F=P*g+E*d-b*y,V=P*y+b*g-M*d,U=-b*d-M*g-E*y;return l[0]=O*P+U*-b+F*-E-V*-M,l[1]=F*P+U*-M+V*-b-O*-E,l[2]=V*P+U*-E+O*-M-F*-b,l[3]=o[3],l},li.zero=function(l){return l[0]=0,l[1]=0,l[2]=0,l[3]=0,l},li.str=function(l){return"vec4("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+")"},li.exactEquals=function(l,o){return l[0]===o[0]&&l[1]===o[1]&&l[2]===o[2]&&l[3]===o[3]},li.equals=function(l,o){var c=l[0],d=l[1],g=l[2],y=l[3],b=o[0],M=o[1],E=o[2],P=o[3];return Math.abs(c-b)<=Xs.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(d-M)<=Xs.EPSILON*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(g-E)<=Xs.EPSILON*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(y-P)<=Xs.EPSILON*Math.max(1,Math.abs(y),Math.abs(P))},li.forEach=li.sqrLen=li.len=li.sqrDist=li.dist=li.div=li.mul=li.sub=void 0;var Xs=function(l,o){if(l&&l.__esModule)return l;if(l===null||rM(l)!=="object"&&typeof l!="function")return{default:l};var c=_3(void 0);if(c&&c.has(l))return c.get(l);var d={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(y!=="default"&&Object.prototype.hasOwnProperty.call(l,y)){var b=g?Object.getOwnPropertyDescriptor(l,y):null;b&&(b.get||b.set)?Object.defineProperty(d,y,b):d[y]=l[y]}return d.default=l,c&&c.set(l,d),d}(ua);function _3(l){if(typeof WeakMap!="function")return null;var o=new WeakMap,c=new WeakMap;return(_3=function(d){return d?c:o})(l)}function y3(){var l=new Xs.ARRAY_TYPE(4);return Xs.ARRAY_TYPE!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0,l[3]=0),l}function x3(l,o,c){return l[0]=o[0]-c[0],l[1]=o[1]-c[1],l[2]=o[2]-c[2],l[3]=o[3]-c[3],l}function b3(l,o,c){return l[0]=o[0]*c[0],l[1]=o[1]*c[1],l[2]=o[2]*c[2],l[3]=o[3]*c[3],l}function w3(l,o,c){return l[0]=o[0]/c[0],l[1]=o[1]/c[1],l[2]=o[2]/c[2],l[3]=o[3]/c[3],l}function S3(l,o){return Math.hypot(o[0]-l[0],o[1]-l[1],o[2]-l[2],o[3]-l[3])}function T3(l,o){var c=o[0]-l[0],d=o[1]-l[1],g=o[2]-l[2],y=o[3]-l[3];return c*c+d*d+g*g+y*y}function M3(l){return Math.hypot(l[0],l[1],l[2],l[3])}function A3(l){var o=l[0],c=l[1],d=l[2],g=l[3];return o*o+c*c+d*d+g*g}li.sub=x3,li.mul=b3,li.div=w3,li.dist=S3,li.sqrDist=T3,li.len=M3,li.sqrLen=A3;var BX=function(){var l=y3();return function(o,c,d,g,y,b){var M,E;for(c||(c=4),d||(d=0),E=g?Math.min(g*c+d,o.length):o.length,M=d;M<E;M+=c)l[0]=o[M],l[1]=o[M+1],l[2]=o[M+2],l[3]=o[M+3],y(l,l,b),o[M]=l[0],o[M+1]=l[1],o[M+2]=l[2],o[M+3]=l[3];return o}}();function iM(l){return iM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},iM(l)}li.forEach=BX,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.create=nM,Hr.identity=function(l){return l[0]=0,l[1]=0,l[2]=0,l[3]=1,l},Hr.setAxisAngle=I3,Hr.getAxisAngle=function(l,o){var c=2*Math.acos(o[3]),d=Math.sin(c/2);return d>vf.EPSILON?(l[0]=o[0]/d,l[1]=o[1]/d,l[2]=o[2]/d):(l[0]=1,l[1]=0,l[2]=0),c},Hr.getAngle=function(l,o){var c=R3(l,o);return Math.acos(2*c*c-1)},Hr.multiply=E3,Hr.rotateX=function(l,o,c){c*=.5;var d=o[0],g=o[1],y=o[2],b=o[3],M=Math.sin(c),E=Math.cos(c);return l[0]=d*E+b*M,l[1]=g*E+y*M,l[2]=y*E-g*M,l[3]=b*E-d*M,l},Hr.rotateY=function(l,o,c){c*=.5;var d=o[0],g=o[1],y=o[2],b=o[3],M=Math.sin(c),E=Math.cos(c);return l[0]=d*E-y*M,l[1]=g*E+b*M,l[2]=y*E+d*M,l[3]=b*E-g*M,l},Hr.rotateZ=function(l,o,c){c*=.5;var d=o[0],g=o[1],y=o[2],b=o[3],M=Math.sin(c),E=Math.cos(c);return l[0]=d*E+g*M,l[1]=g*E-d*M,l[2]=y*E+b*M,l[3]=b*E-y*M,l},Hr.calculateW=function(l,o){var c=o[0],d=o[1],g=o[2];return l[0]=c,l[1]=d,l[2]=g,l[3]=Math.sqrt(Math.abs(1-c*c-d*d-g*g)),l},Hr.exp=D3,Hr.ln=P3,Hr.pow=function(l,o,c){return P3(l,o),k3(l,l,c),D3(l,l),l},Hr.slerp=T1,Hr.random=function(l){var o=vf.RANDOM(),c=vf.RANDOM(),d=vf.RANDOM(),g=Math.sqrt(1-o),y=Math.sqrt(o);return l[0]=g*Math.sin(2*Math.PI*c),l[1]=g*Math.cos(2*Math.PI*c),l[2]=y*Math.sin(2*Math.PI*d),l[3]=y*Math.cos(2*Math.PI*d),l},Hr.invert=function(l,o){var c=o[0],d=o[1],g=o[2],y=o[3],b=c*c+d*d+g*g+y*y,M=b?1/b:0;return l[0]=-c*M,l[1]=-d*M,l[2]=-g*M,l[3]=y*M,l},Hr.conjugate=function(l,o){return l[0]=-o[0],l[1]=-o[1],l[2]=-o[2],l[3]=o[3],l},Hr.fromMat3=L3,Hr.fromEuler=function(l,o,c,d){var g=.5*Math.PI/180;o*=g,c*=g,d*=g;var y=Math.sin(o),b=Math.cos(o),M=Math.sin(c),E=Math.cos(c),P=Math.sin(d),O=Math.cos(d);return l[0]=y*E*O-b*M*P,l[1]=b*M*O+y*E*P,l[2]=b*E*P-y*M*O,l[3]=b*E*O+y*M*P,l},Hr.str=function(l){return"quat("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+")"},Hr.setAxes=Hr.sqlerp=Hr.rotationTo=Hr.equals=Hr.exactEquals=Hr.normalize=Hr.sqrLen=Hr.squaredLength=Hr.len=Hr.length=Hr.lerp=Hr.dot=Hr.scale=Hr.mul=Hr.add=Hr.set=Hr.copy=Hr.fromValues=Hr.clone=void 0;var vf=S1(ua),FX=S1(Yi),Pc=S1(Zr),Ts=S1(li);function C3(l){if(typeof WeakMap!="function")return null;var o=new WeakMap,c=new WeakMap;return(C3=function(d){return d?c:o})(l)}function S1(l,o){if(!o&&l&&l.__esModule)return l;if(l===null||iM(l)!=="object"&&typeof l!="function")return{default:l};var c=C3(o);if(c&&c.has(l))return c.get(l);var d={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(y!=="default"&&Object.prototype.hasOwnProperty.call(l,y)){var b=g?Object.getOwnPropertyDescriptor(l,y):null;b&&(b.get||b.set)?Object.defineProperty(d,y,b):d[y]=l[y]}return d.default=l,c&&c.set(l,d),d}function nM(){var l=new vf.ARRAY_TYPE(4);return vf.ARRAY_TYPE!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function I3(l,o,c){c*=.5;var d=Math.sin(c);return l[0]=d*o[0],l[1]=d*o[1],l[2]=d*o[2],l[3]=Math.cos(c),l}function E3(l,o,c){var d=o[0],g=o[1],y=o[2],b=o[3],M=c[0],E=c[1],P=c[2],O=c[3];return l[0]=d*O+b*M+g*P-y*E,l[1]=g*O+b*E+y*M-d*P,l[2]=y*O+b*P+d*E-g*M,l[3]=b*O-d*M-g*E-y*P,l}function D3(l,o){var c=o[0],d=o[1],g=o[2],y=o[3],b=Math.sqrt(c*c+d*d+g*g),M=Math.exp(y),E=b>0?M*Math.sin(b)/b:0;return l[0]=c*E,l[1]=d*E,l[2]=g*E,l[3]=M*Math.cos(b),l}function P3(l,o){var c=o[0],d=o[1],g=o[2],y=o[3],b=Math.sqrt(c*c+d*d+g*g),M=b>0?Math.atan2(b,y)/b:0;return l[0]=c*M,l[1]=d*M,l[2]=g*M,l[3]=.5*Math.log(c*c+d*d+g*g+y*y),l}function T1(l,o,c,d){var g,y,b,M,E,P=o[0],O=o[1],F=o[2],V=o[3],U=c[0],q=c[1],K=c[2],Q=c[3];return(y=P*U+O*q+F*K+V*Q)<0&&(y=-y,U=-U,q=-q,K=-K,Q=-Q),1-y>vf.EPSILON?(g=Math.acos(y),b=Math.sin(g),M=Math.sin((1-d)*g)/b,E=Math.sin(d*g)/b):(M=1-d,E=d),l[0]=M*P+E*U,l[1]=M*O+E*q,l[2]=M*F+E*K,l[3]=M*V+E*Q,l}function L3(l,o){var c,d=o[0]+o[4]+o[8];if(d>0)c=Math.sqrt(d+1),l[3]=.5*c,l[0]=(o[5]-o[7])*(c=.5/c),l[1]=(o[6]-o[2])*c,l[2]=(o[1]-o[3])*c;else{var g=0;o[4]>o[0]&&(g=1),o[8]>o[3*g+g]&&(g=2);var y=(g+1)%3,b=(g+2)%3;c=Math.sqrt(o[3*g+g]-o[3*y+y]-o[3*b+b]+1),l[g]=.5*c,l[3]=(o[3*y+b]-o[3*b+y])*(c=.5/c),l[y]=(o[3*y+g]+o[3*g+y])*c,l[b]=(o[3*b+g]+o[3*g+b])*c}return l}Hr.clone=Ts.clone,Hr.fromValues=Ts.fromValues,Hr.copy=Ts.copy,Hr.set=Ts.set,Hr.add=Ts.add,Hr.mul=E3;var k3=Ts.scale;Hr.scale=k3;var R3=Ts.dot;Hr.dot=R3,Hr.lerp=Ts.lerp;var O3=Ts.length;Hr.length=O3,Hr.len=O3;var z3=Ts.squaredLength;Hr.squaredLength=z3,Hr.sqrLen=z3;var aM=Ts.normalize;Hr.normalize=aM,Hr.exactEquals=Ts.exactEquals,Hr.equals=Ts.equals;var Ol,B3,F3,NX=(Ol=Pc.create(),B3=Pc.fromValues(1,0,0),F3=Pc.fromValues(0,1,0),function(l,o,c){var d=Pc.dot(o,c);return d<-.999999?(Pc.cross(Ol,B3,o),Pc.len(Ol)<1e-6&&Pc.cross(Ol,F3,o),Pc.normalize(Ol,Ol),I3(l,Ol,Math.PI),l):d>.999999?(l[0]=0,l[1]=0,l[2]=0,l[3]=1,l):(Pc.cross(Ol,o,c),l[0]=Ol[0],l[1]=Ol[1],l[2]=Ol[2],l[3]=1+d,aM(l,l))});Hr.rotationTo=NX;var oM,sM,VX=(oM=nM(),sM=nM(),function(l,o,c,d,g,y){return T1(oM,o,g,y),T1(sM,c,d,y),T1(l,oM,sM,2*y*(1-y)),l});Hr.sqlerp=VX;var zl,$X=(zl=FX.create(),function(l,o,c,d){return zl[0]=c[0],zl[3]=c[1],zl[6]=c[2],zl[1]=d[0],zl[4]=d[1],zl[7]=d[2],zl[2]=-o[0],zl[5]=-o[1],zl[8]=-o[2],aM(l,L3(l,zl))});Hr.setAxes=$X;var pi={};function lM(l){return lM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},lM(l)}Object.defineProperty(pi,"__esModule",{value:!0}),pi.create=function(){var l=new Eo.ARRAY_TYPE(8);return Eo.ARRAY_TYPE!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0,l[4]=0,l[5]=0,l[6]=0,l[7]=0),l[3]=1,l},pi.clone=function(l){var o=new Eo.ARRAY_TYPE(8);return o[0]=l[0],o[1]=l[1],o[2]=l[2],o[3]=l[3],o[4]=l[4],o[5]=l[5],o[6]=l[6],o[7]=l[7],o},pi.fromValues=function(l,o,c,d,g,y,b,M){var E=new Eo.ARRAY_TYPE(8);return E[0]=l,E[1]=o,E[2]=c,E[3]=d,E[4]=g,E[5]=y,E[6]=b,E[7]=M,E},pi.fromRotationTranslationValues=function(l,o,c,d,g,y,b){var M=new Eo.ARRAY_TYPE(8);M[0]=l,M[1]=o,M[2]=c,M[3]=d;var E=.5*g,P=.5*y,O=.5*b;return M[4]=E*d+P*c-O*o,M[5]=P*d+O*l-E*c,M[6]=O*d+E*o-P*l,M[7]=-E*l-P*o-O*c,M},pi.fromRotationTranslation=$3,pi.fromTranslation=function(l,o){return l[0]=0,l[1]=0,l[2]=0,l[3]=1,l[4]=.5*o[0],l[5]=.5*o[1],l[6]=.5*o[2],l[7]=0,l},pi.fromRotation=function(l,o){return l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l[4]=0,l[5]=0,l[6]=0,l[7]=0,l},pi.fromMat4=function(l,o){var c=Lc.create();N3.getRotation(c,o);var d=new Eo.ARRAY_TYPE(3);return N3.getTranslation(d,o),$3(l,c,d),l},pi.copy=G3,pi.identity=function(l){return l[0]=0,l[1]=0,l[2]=0,l[3]=1,l[4]=0,l[5]=0,l[6]=0,l[7]=0,l},pi.set=function(l,o,c,d,g,y,b,M,E){return l[0]=o,l[1]=c,l[2]=d,l[3]=g,l[4]=y,l[5]=b,l[6]=M,l[7]=E,l},pi.getDual=function(l,o){return l[0]=o[4],l[1]=o[5],l[2]=o[6],l[3]=o[7],l},pi.setDual=function(l,o){return l[4]=o[0],l[5]=o[1],l[6]=o[2],l[7]=o[3],l},pi.getTranslation=function(l,o){var c=o[4],d=o[5],g=o[6],y=o[7],b=-o[0],M=-o[1],E=-o[2],P=o[3];return l[0]=2*(c*P+y*b+d*E-g*M),l[1]=2*(d*P+y*M+g*b-c*E),l[2]=2*(g*P+y*E+c*M-d*b),l},pi.translate=function(l,o,c){var d=o[0],g=o[1],y=o[2],b=o[3],M=.5*c[0],E=.5*c[1],P=.5*c[2],O=o[4],F=o[5],V=o[6],U=o[7];return l[0]=d,l[1]=g,l[2]=y,l[3]=b,l[4]=b*M+g*P-y*E+O,l[5]=b*E+y*M-d*P+F,l[6]=b*P+d*E-g*M+V,l[7]=-d*M-g*E-y*P+U,l},pi.rotateX=function(l,o,c){var d=-o[0],g=-o[1],y=-o[2],b=o[3],M=o[4],E=o[5],P=o[6],O=o[7],F=M*b+O*d+E*y-P*g,V=E*b+O*g+P*d-M*y,U=P*b+O*y+M*g-E*d,q=O*b-M*d-E*g-P*y;return Lc.rotateX(l,o,c),l[4]=F*(b=l[3])+q*(d=l[0])+V*(y=l[2])-U*(g=l[1]),l[5]=V*b+q*g+U*d-F*y,l[6]=U*b+q*y+F*g-V*d,l[7]=q*b-F*d-V*g-U*y,l},pi.rotateY=function(l,o,c){var d=-o[0],g=-o[1],y=-o[2],b=o[3],M=o[4],E=o[5],P=o[6],O=o[7],F=M*b+O*d+E*y-P*g,V=E*b+O*g+P*d-M*y,U=P*b+O*y+M*g-E*d,q=O*b-M*d-E*g-P*y;return Lc.rotateY(l,o,c),l[4]=F*(b=l[3])+q*(d=l[0])+V*(y=l[2])-U*(g=l[1]),l[5]=V*b+q*g+U*d-F*y,l[6]=U*b+q*y+F*g-V*d,l[7]=q*b-F*d-V*g-U*y,l},pi.rotateZ=function(l,o,c){var d=-o[0],g=-o[1],y=-o[2],b=o[3],M=o[4],E=o[5],P=o[6],O=o[7],F=M*b+O*d+E*y-P*g,V=E*b+O*g+P*d-M*y,U=P*b+O*y+M*g-E*d,q=O*b-M*d-E*g-P*y;return Lc.rotateZ(l,o,c),l[4]=F*(b=l[3])+q*(d=l[0])+V*(y=l[2])-U*(g=l[1]),l[5]=V*b+q*g+U*d-F*y,l[6]=U*b+q*y+F*g-V*d,l[7]=q*b-F*d-V*g-U*y,l},pi.rotateByQuatAppend=function(l,o,c){var d=c[0],g=c[1],y=c[2],b=c[3],M=o[0],E=o[1],P=o[2],O=o[3];return l[0]=M*b+O*d+E*y-P*g,l[1]=E*b+O*g+P*d-M*y,l[2]=P*b+O*y+M*g-E*d,l[3]=O*b-M*d-E*g-P*y,l[4]=(M=o[4])*b+(O=o[7])*d+(E=o[5])*y-(P=o[6])*g,l[5]=E*b+O*g+P*d-M*y,l[6]=P*b+O*y+M*g-E*d,l[7]=O*b-M*d-E*g-P*y,l},pi.rotateByQuatPrepend=function(l,o,c){var d=o[0],g=o[1],y=o[2],b=o[3],M=c[0],E=c[1],P=c[2],O=c[3];return l[0]=d*O+b*M+g*P-y*E,l[1]=g*O+b*E+y*M-d*P,l[2]=y*O+b*P+d*E-g*M,l[3]=b*O-d*M-g*E-y*P,l[4]=d*(O=c[7])+b*(M=c[4])+g*(P=c[6])-y*(E=c[5]),l[5]=g*O+b*E+y*M-d*P,l[6]=y*O+b*P+d*E-g*M,l[7]=b*O-d*M-g*E-y*P,l},pi.rotateAroundAxis=function(l,o,c,d){if(Math.abs(d)<Eo.EPSILON)return G3(l,o);var g=Math.hypot(c[0],c[1],c[2]);d*=.5;var y=Math.sin(d),b=y*c[0]/g,M=y*c[1]/g,E=y*c[2]/g,P=Math.cos(d),O=o[0],F=o[1],V=o[2],U=o[3];l[0]=O*P+U*b+F*E-V*M,l[1]=F*P+U*M+V*b-O*E,l[2]=V*P+U*E+O*M-F*b,l[3]=U*P-O*b-F*M-V*E;var q=o[4],K=o[5],Q=o[6],ae=o[7];return l[4]=q*P+ae*b+K*E-Q*M,l[5]=K*P+ae*M+Q*b-q*E,l[6]=Q*P+ae*E+q*M-K*b,l[7]=ae*P-q*b-K*M-Q*E,l},pi.add=function(l,o,c){return l[0]=o[0]+c[0],l[1]=o[1]+c[1],l[2]=o[2]+c[2],l[3]=o[3]+c[3],l[4]=o[4]+c[4],l[5]=o[5]+c[5],l[6]=o[6]+c[6],l[7]=o[7]+c[7],l},pi.multiply=U3,pi.scale=function(l,o,c){return l[0]=o[0]*c,l[1]=o[1]*c,l[2]=o[2]*c,l[3]=o[3]*c,l[4]=o[4]*c,l[5]=o[5]*c,l[6]=o[6]*c,l[7]=o[7]*c,l},pi.lerp=function(l,o,c,d){var g=1-d;return j3(o,c)<0&&(d=-d),l[0]=o[0]*g+c[0]*d,l[1]=o[1]*g+c[1]*d,l[2]=o[2]*g+c[2]*d,l[3]=o[3]*g+c[3]*d,l[4]=o[4]*g+c[4]*d,l[5]=o[5]*g+c[5]*d,l[6]=o[6]*g+c[6]*d,l[7]=o[7]*g+c[7]*d,l},pi.invert=function(l,o){var c=M1(o);return l[0]=-o[0]/c,l[1]=-o[1]/c,l[2]=-o[2]/c,l[3]=o[3]/c,l[4]=-o[4]/c,l[5]=-o[5]/c,l[6]=-o[6]/c,l[7]=o[7]/c,l},pi.conjugate=function(l,o){return l[0]=-o[0],l[1]=-o[1],l[2]=-o[2],l[3]=o[3],l[4]=-o[4],l[5]=-o[5],l[6]=-o[6],l[7]=o[7],l},pi.normalize=function(l,o){var c=M1(o);if(c>0){c=Math.sqrt(c);var d=o[0]/c,g=o[1]/c,y=o[2]/c,b=o[3]/c,M=o[4],E=o[5],P=o[6],O=o[7],F=d*M+g*E+y*P+b*O;l[0]=d,l[1]=g,l[2]=y,l[3]=b,l[4]=(M-d*F)/c,l[5]=(E-g*F)/c,l[6]=(P-y*F)/c,l[7]=(O-b*F)/c}return l},pi.str=function(l){return"quat2("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+", "+l[4]+", "+l[5]+", "+l[6]+", "+l[7]+")"},pi.exactEquals=function(l,o){return l[0]===o[0]&&l[1]===o[1]&&l[2]===o[2]&&l[3]===o[3]&&l[4]===o[4]&&l[5]===o[5]&&l[6]===o[6]&&l[7]===o[7]},pi.equals=function(l,o){var c=l[0],d=l[1],g=l[2],y=l[3],b=l[4],M=l[5],E=l[6],P=l[7],O=o[0],F=o[1],V=o[2],U=o[3],q=o[4],K=o[5],Q=o[6],ae=o[7];return Math.abs(c-O)<=Eo.EPSILON*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(d-F)<=Eo.EPSILON*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(g-V)<=Eo.EPSILON*Math.max(1,Math.abs(g),Math.abs(V))&&Math.abs(y-U)<=Eo.EPSILON*Math.max(1,Math.abs(y),Math.abs(U))&&Math.abs(b-q)<=Eo.EPSILON*Math.max(1,Math.abs(b),Math.abs(q))&&Math.abs(M-K)<=Eo.EPSILON*Math.max(1,Math.abs(M),Math.abs(K))&&Math.abs(E-Q)<=Eo.EPSILON*Math.max(1,Math.abs(E),Math.abs(Q))&&Math.abs(P-ae)<=Eo.EPSILON*Math.max(1,Math.abs(P),Math.abs(ae))},pi.sqrLen=pi.squaredLength=pi.len=pi.length=pi.dot=pi.mul=pi.setReal=pi.getReal=void 0;var Eo=uM(ua),Lc=uM(Hr),N3=uM(Xr);function V3(l){if(typeof WeakMap!="function")return null;var o=new WeakMap,c=new WeakMap;return(V3=function(d){return d?c:o})(l)}function uM(l,o){if(!o&&l&&l.__esModule)return l;if(l===null||lM(l)!=="object"&&typeof l!="function")return{default:l};var c=V3(o);if(c&&c.has(l))return c.get(l);var d={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(y!=="default"&&Object.prototype.hasOwnProperty.call(l,y)){var b=g?Object.getOwnPropertyDescriptor(l,y):null;b&&(b.get||b.set)?Object.defineProperty(d,y,b):d[y]=l[y]}return d.default=l,c&&c.set(l,d),d}function $3(l,o,c){var d=.5*c[0],g=.5*c[1],y=.5*c[2],b=o[0],M=o[1],E=o[2],P=o[3];return l[0]=b,l[1]=M,l[2]=E,l[3]=P,l[4]=d*P+g*E-y*M,l[5]=g*P+y*b-d*E,l[6]=y*P+d*M-g*b,l[7]=-d*b-g*M-y*E,l}function G3(l,o){return l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l[4]=o[4],l[5]=o[5],l[6]=o[6],l[7]=o[7],l}function U3(l,o,c){var d=o[0],g=o[1],y=o[2],b=o[3],M=c[4],E=c[5],P=c[6],O=c[7],F=o[4],V=o[5],U=o[6],q=o[7],K=c[0],Q=c[1],ae=c[2],ge=c[3];return l[0]=d*ge+b*K+g*ae-y*Q,l[1]=g*ge+b*Q+y*K-d*ae,l[2]=y*ge+b*ae+d*Q-g*K,l[3]=b*ge-d*K-g*Q-y*ae,l[4]=d*O+b*M+g*P-y*E+F*ge+q*K+V*ae-U*Q,l[5]=g*O+b*E+y*M-d*P+V*ge+q*Q+U*K-F*ae,l[6]=y*O+b*P+d*E-g*M+U*ge+q*ae+F*Q-V*K,l[7]=b*O-d*M-g*E-y*P+q*ge-F*K-V*Q-U*ae,l}pi.getReal=Lc.copy,pi.setReal=Lc.copy,pi.mul=U3;var j3=Lc.dot;pi.dot=j3;var H3=Lc.length;pi.length=H3,pi.len=H3;var M1=Lc.squaredLength;pi.squaredLength=M1,pi.sqrLen=M1;var ri={};function cM(l){return cM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},cM(l)}Object.defineProperty(ri,"__esModule",{value:!0}),ri.create=q3,ri.clone=function(l){var o=new _f.ARRAY_TYPE(2);return o[0]=l[0],o[1]=l[1],o},ri.fromValues=function(l,o){var c=new _f.ARRAY_TYPE(2);return c[0]=l,c[1]=o,c},ri.copy=function(l,o){return l[0]=o[0],l[1]=o[1],l},ri.set=function(l,o,c){return l[0]=o,l[1]=c,l},ri.add=function(l,o,c){return l[0]=o[0]+c[0],l[1]=o[1]+c[1],l},ri.subtract=Z3,ri.multiply=X3,ri.divide=Y3,ri.ceil=function(l,o){return l[0]=Math.ceil(o[0]),l[1]=Math.ceil(o[1]),l},ri.floor=function(l,o){return l[0]=Math.floor(o[0]),l[1]=Math.floor(o[1]),l},ri.min=function(l,o,c){return l[0]=Math.min(o[0],c[0]),l[1]=Math.min(o[1],c[1]),l},ri.max=function(l,o,c){return l[0]=Math.max(o[0],c[0]),l[1]=Math.max(o[1],c[1]),l},ri.round=function(l,o){return l[0]=Math.round(o[0]),l[1]=Math.round(o[1]),l},ri.scale=function(l,o,c){return l[0]=o[0]*c,l[1]=o[1]*c,l},ri.scaleAndAdd=function(l,o,c,d){return l[0]=o[0]+c[0]*d,l[1]=o[1]+c[1]*d,l},ri.distance=K3,ri.squaredDistance=J3,ri.length=Q3,ri.squaredLength=eO,ri.negate=function(l,o){return l[0]=-o[0],l[1]=-o[1],l},ri.inverse=function(l,o){return l[0]=1/o[0],l[1]=1/o[1],l},ri.normalize=function(l,o){var c=o[0],d=o[1],g=c*c+d*d;return g>0&&(g=1/Math.sqrt(g)),l[0]=o[0]*g,l[1]=o[1]*g,l},ri.dot=function(l,o){return l[0]*o[0]+l[1]*o[1]},ri.cross=function(l,o,c){var d=o[0]*c[1]-o[1]*c[0];return l[0]=l[1]=0,l[2]=d,l},ri.lerp=function(l,o,c,d){var g=o[0],y=o[1];return l[0]=g+d*(c[0]-g),l[1]=y+d*(c[1]-y),l},ri.random=function(l,o){o=o||1;var c=2*_f.RANDOM()*Math.PI;return l[0]=Math.cos(c)*o,l[1]=Math.sin(c)*o,l},ri.transformMat2=function(l,o,c){var d=o[0],g=o[1];return l[0]=c[0]*d+c[2]*g,l[1]=c[1]*d+c[3]*g,l},ri.transformMat2d=function(l,o,c){var d=o[0],g=o[1];return l[0]=c[0]*d+c[2]*g+c[4],l[1]=c[1]*d+c[3]*g+c[5],l},ri.transformMat3=function(l,o,c){var d=o[0],g=o[1];return l[0]=c[0]*d+c[3]*g+c[6],l[1]=c[1]*d+c[4]*g+c[7],l},ri.transformMat4=function(l,o,c){var d=o[0],g=o[1];return l[0]=c[0]*d+c[4]*g+c[12],l[1]=c[1]*d+c[5]*g+c[13],l},ri.rotate=function(l,o,c,d){var g=o[0]-c[0],y=o[1]-c[1],b=Math.sin(d),M=Math.cos(d);return l[0]=g*M-y*b+c[0],l[1]=g*b+y*M+c[1],l},ri.angle=function(l,o){var c=l[0],d=l[1],g=o[0],y=o[1],b=Math.sqrt(c*c+d*d)*Math.sqrt(g*g+y*y);return Math.acos(Math.min(Math.max(b&&(c*g+d*y)/b,-1),1))},ri.zero=function(l){return l[0]=0,l[1]=0,l},ri.str=function(l){return"vec2("+l[0]+", "+l[1]+")"},ri.exactEquals=function(l,o){return l[0]===o[0]&&l[1]===o[1]},ri.equals=function(l,o){var c=l[0],d=l[1],g=o[0],y=o[1];return Math.abs(c-g)<=_f.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(d-y)<=_f.EPSILON*Math.max(1,Math.abs(d),Math.abs(y))},ri.forEach=ri.sqrLen=ri.sqrDist=ri.dist=ri.div=ri.mul=ri.sub=ri.len=void 0;var _f=function(l,o){if(l&&l.__esModule)return l;if(l===null||cM(l)!=="object"&&typeof l!="function")return{default:l};var c=W3(void 0);if(c&&c.has(l))return c.get(l);var d={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(y!=="default"&&Object.prototype.hasOwnProperty.call(l,y)){var b=g?Object.getOwnPropertyDescriptor(l,y):null;b&&(b.get||b.set)?Object.defineProperty(d,y,b):d[y]=l[y]}return d.default=l,c&&c.set(l,d),d}(ua);function W3(l){if(typeof WeakMap!="function")return null;var o=new WeakMap,c=new WeakMap;return(W3=function(d){return d?c:o})(l)}function q3(){var l=new _f.ARRAY_TYPE(2);return _f.ARRAY_TYPE!=Float32Array&&(l[0]=0,l[1]=0),l}function Z3(l,o,c){return l[0]=o[0]-c[0],l[1]=o[1]-c[1],l}function X3(l,o,c){return l[0]=o[0]*c[0],l[1]=o[1]*c[1],l}function Y3(l,o,c){return l[0]=o[0]/c[0],l[1]=o[1]/c[1],l}function K3(l,o){return Math.hypot(o[0]-l[0],o[1]-l[1])}function J3(l,o){var c=o[0]-l[0],d=o[1]-l[1];return c*c+d*d}function Q3(l){return Math.hypot(l[0],l[1])}function eO(l){var o=l[0],c=l[1];return o*o+c*c}ri.len=Q3,ri.sub=Z3,ri.mul=X3,ri.div=Y3,ri.dist=K3,ri.sqrDist=J3,ri.sqrLen=eO;var GX=function(){var l=q3();return function(o,c,d,g,y,b){var M,E;for(c||(c=2),d||(d=0),E=g?Math.min(g*c+d,o.length):o.length,M=d;M<E;M+=c)l[0]=o[M],l[1]=o[M+1],y(l,l,b),o[M]=l[0],o[M+1]=l[1];return o}}();function hM(l){return hM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},hM(l)}ri.forEach=GX,Object.defineProperty(la,"__esModule",{value:!0}),a.e=la.vec4=a.v=la.vec3=la.vec2=la.quat2=a.q=la.quat=a.m=la.mat4=a.bx=la.mat3=la.mat2d=a.h=la.mat2=la.glMatrix=void 0;var UX=Tu(ua);la.glMatrix=UX;var jX=Tu(xn);a.h=la.mat2=jX;var HX=Tu(Sn);la.mat2d=HX;var WX=Tu(Yi);a.bx=la.mat3=WX;var qX=Tu(Xr);a.m=la.mat4=qX;var ZX=Tu(Hr);a.q=la.quat=ZX;var XX=Tu(pi);la.quat2=XX;var YX=Tu(ri);la.vec2=YX;var KX=Tu(Zr);a.v=la.vec3=KX;var JX=Tu(li);function tO(l){if(typeof WeakMap!="function")return null;var o=new WeakMap,c=new WeakMap;return(tO=function(d){return d?c:o})(l)}function Tu(l,o){if(!o&&l&&l.__esModule)return l;if(l===null||hM(l)!=="object"&&typeof l!="function")return{default:l};var c=tO(o);if(c&&c.has(l))return c.get(l);var d={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(y!=="default"&&Object.prototype.hasOwnProperty.call(l,y)){var b=g?Object.getOwnPropertyDescriptor(l,y):null;b&&(b.get||b.set)?Object.defineProperty(d,y,b):d[y]=l[y]}return d.default=l,c&&c.set(l,d),d}a.e=la.vec4=JX;const QX=_r([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:A1}=QX,rO=_r([{name:"a_pos_3",components:3,type:"Int16"}]);var P_=_r([{name:"a_pos",type:"Int16",components:2}]),iO={};(function(l,o){(function(c){function d(y,b,M){var E=g(256*y,256*(b=Math.pow(2,M)-b-1),M),P=g(256*(y+1),256*(b+1),M);return E[0]+","+E[1]+","+P[0]+","+P[1]}function g(y,b,M){var E=2*Math.PI*6378137/256/Math.pow(2,M);return[y*E-2*Math.PI*6378137/2,b*E-2*Math.PI*6378137/2]}c.getURL=function(y,b,M,E,P,O){return O=O||{},y+"?"+["bbox="+d(M,E,P),"format="+(O.format||"image/png"),"service="+(O.service||"WMS"),"version="+(O.version||"1.1.1"),"request="+(O.request||"GetMap"),"srs="+(O.srs||"EPSG:3857"),"width="+(O.width||256),"height="+(O.height||256),"layers="+b].join("&")},c.getTileBBox=d,c.getMercCoords=g,Object.defineProperty(c,"__esModule",{value:!0})})(o)})(0,iO);var eY=iO;class yf{constructor(o,c,d){this.z=o,this.x=c,this.y=d,this.key=L_(0,o,o,c,d)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,c){const d=eY.getTileBBox(this.x,this.y,this.z),g=function(y,b,M){let E,P="";for(let O=y;O>0;O--)E=1<<O-1,P+=(b&E?1:0)+(M&E?2:0);return P}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(c==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",d)}toString(){return`${this.z}/${this.x}/${this.y}`}}class nO{constructor(o,c){this.wrap=o,this.canonical=c,this.key=L_(o,c.z,c.z,c.x,c.y)}}class _a{constructor(o,c,d,g,y){this.overscaledZ=o,this.wrap=c,this.canonical=new yf(d,+g,+y),this.key=c===0&&o===d?this.canonical.key:L_(c,o,d,g,y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const c=this.canonical.z-o;return o>this.canonical.z?new _a(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new _a(o,this.wrap,o,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(o,c=!0){if(this.overscaledZ===o&&c)return this.key;if(o>this.canonical.z)return L_(this.wrap*+c,o,this.canonical.z,this.canonical.x,this.canonical.y);{const d=this.canonical.z-o;return L_(this.wrap*+c,o,o,this.canonical.x>>d,this.canonical.y>>d)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const c=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.z<this.canonical.z&&o.canonical.x===this.canonical.x>>c&&o.canonical.y===this.canonical.y>>c}children(o){if(this.overscaledZ>=o)return[new _a(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,d=2*this.canonical.x,g=2*this.canonical.y;return[new _a(c,this.wrap,c,d,g),new _a(c,this.wrap,c,d+1,g),new _a(c,this.wrap,c,d,g+1),new _a(c,this.wrap,c,d+1,g+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new _a(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new _a(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new nO(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function L_(l,o,c,d,g){const y=1<<Math.min(c,22);let b=y*(g%y)+d%y;return l&&c<22&&(b+=y*y*((l<0?-2*l-1:2*l)%(1<<2*(22-c)))),16*(32*b+c)+(o-c)}const tY=[l=>{let o=l.canonical.x-1,c=l.wrap;return o<0&&(o=(1<<l.canonical.z)-1,c--),new _a(l.overscaledZ,c,l.canonical.z,o,l.canonical.y)},l=>{let o=l.canonical.x+1,c=l.wrap;return o===1<<l.canonical.z&&(o=0,c++),new _a(l.overscaledZ,c,l.canonical.z,o,l.canonical.y)},l=>new _a(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,(l.canonical.y===0?1<<l.canonical.z:l.canonical.y)-1),l=>new _a(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y===(1<<l.canonical.z)-1?0:l.canonical.y+1)];hr(yf,"CanonicalTileID"),hr(_a,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});class dM{constructor(o,c){this.pos=o,this.dir=c}intersectsPlane(o,c,d){const g=a.v.dot(c,this.dir);if(Math.abs(g)<1e-6)return!1;const y=((o[0]-this.pos[0])*c[0]+(o[1]-this.pos[1])*c[1]+(o[2]-this.pos[2])*c[2])/g;return d[0]=this.pos[0]+this.dir[0]*y,d[1]=this.pos[1]+this.dir[1]*y,d[2]=this.pos[2]+this.dir[2]*y,!0}closestPointOnSphere(o,c,d){if(a.v.equals(this.pos,o)||c===0)return d[0]=d[1]=d[2]=0,!1;const[g,y,b]=this.dir,M=this.pos[0]-o[0],E=this.pos[1]-o[1],P=this.pos[2]-o[2],O=g*g+y*y+b*b,F=2*(M*g+E*y+P*b),V=F*F-4*O*(M*M+E*E+P*P-c*c);if(V<0){const U=Math.max(-F/2,0),q=M+g*U,K=E+y*U,Q=P+b*U,ae=Math.hypot(q,K,Q);return d[0]=q*c/ae,d[1]=K*c/ae,d[2]=Q*c/ae,!1}{const U=(-F-Math.sqrt(V))/(2*O);if(U<0){const q=Math.hypot(M,E,P);return d[0]=M*c/q,d[1]=E*c/q,d[2]=P*c/q,!1}return d[0]=M+g*U,d[1]=E+y*U,d[2]=P+b*U,!0}}}class fM{constructor(o,c,d,g,y){this.TL=o,this.TR=c,this.BR=d,this.BL=g,this.horizon=y}static fromInvProjectionMatrix(o,c,d){const g=[-1,1,1],y=[1,1,1],b=[1,-1,1],M=[-1,-1,1],E=a.v.transformMat4(g,g,o),P=a.v.transformMat4(y,y,o),O=a.v.transformMat4(b,b,o),F=a.v.transformMat4(M,M,o);return new fM(E,P,O,F,c/d)}}function k_(l,o,c){let d=1/0,g=-1/0;const y=[];for(const b of l){a.v.sub(y,b,o);const M=a.v.dot(y,c);d=Math.min(d,M),g=Math.max(g,M)}return[d,g]}function aO(l,o){let c=!0;for(let d=0;d<l.planes.length;d++){const g=l.planes[d];let y=0;for(let b=0;b<o.length;b++)y+=a.v.dot(g,o[b])+g[3]>=0;if(y===0)return 0;y!==o.length&&(c=!1)}return c?2:1}function oO(l,o){for(const c of l.projections){const d=k_(o,l.points[0],c.axis);if(c.projection[1]<d[0]||c.projection[0]>d[1])return 0}return 1}function sO(l,o){let c=0;const d=[0,0,0,0];for(let g=0;g<l.length;g++)d[0]=l[g][0],d[1]=l[g][1],d[2]=l[g][2],d[3]=1,a.e.dot(d,o)>=0&&c++;return c}class pM{constructor(o,c){this.points=o||new Array(8).fill([0,0,0]),this.planes=c||new Array(6).fill([0,0,0,0]),this.bounds=Un.fromPoints(this.points),this.projections=[],this.frustumEdges=[a.v.sub([],this.points[2],this.points[3]),a.v.sub([],this.points[0],this.points[3]),a.v.sub([],this.points[4],this.points[0]),a.v.sub([],this.points[5],this.points[1]),a.v.sub([],this.points[6],this.points[2]),a.v.sub([],this.points[7],this.points[3])];for(const d of this.frustumEdges){const g=[0,-d[2],d[1]],y=[d[2],0,-d[0]];this.projections.push({axis:g,projection:k_(this.points,this.points[0],g)}),this.projections.push({axis:y,projection:k_(this.points,this.points[0],y)})}}static fromInvProjectionMatrix(o,c,d,g){const y=Math.pow(2,d),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(P=>{const O=a.e.transformMat4([],P,o),F=1/O[3]/c*y;return a.e.mul(O,O,[F,F,g?1/O[3]:F,F])}),M=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(P=>{const O=a.v.sub([],b[P[0]],b[P[1]]),F=a.v.sub([],b[P[2]],b[P[1]]),V=a.v.normalize([],a.v.cross([],O,F)),U=-a.v.dot(V,b[P[1]]);return V.concat(U)}),E=[];for(let P=0;P<b.length;P++)E.push([b[P][0],b[P][1],b[P][2]]);return new pM(E,M)}intersectsPrecise(o,c,d){for(let g=0;g<c.length;g++)if(!sO(o,c[g]))return 0;for(let g=0;g<this.planes.length;g++)if(!sO(o,this.planes[g]))return 0;for(const g of d)for(const y of this.frustumEdges){const b=a.v.cross([],g,y),M=a.v.length(b);if(M===0)continue;a.v.scale(b,b,1/M);const E=k_(this.points,this.points[0],b),P=k_(o,this.points[0],b);if(E[0]>P[1]||P[0]>E[1])return 0}return 1}}class Un{static fromPoints(o){const c=[1/0,1/0,1/0],d=[-1/0,-1/0,-1/0];for(const g of o)a.v.min(c,c,g),a.v.max(d,d,g);return new Un(c,d)}static fromTileIdAndHeight(o,c,d){const g=1<<o.canonical.z,y=o.canonical.x,b=o.canonical.y;return new Un([y/g,b/g,c],[(y+1)/g,(b+1)/g,d])}static applyTransform(o,c){const d=o.getCorners();for(let g=0;g<d.length;++g)a.v.transformMat4(d[g],d[g],c);return Un.fromPoints(d)}static projectAabbCorners(o,c){const d=o.getCorners();for(let g=0;g<d.length;++g)a.v.transformMat4(d[g],d[g],c);return d}constructor(o,c){this.min=o,this.max=c,this.center=a.v.scale([],a.v.add([],this.min,this.max),.5)}quadrant(o){const c=[o%2==0,o<2],d=a.v.clone(this.min),g=a.v.clone(this.max);for(let y=0;y<c.length;y++)d[y]=c[y]?this.min[y]:this.center[y],g[y]=c[y]?this.center[y]:this.max[y];return g[2]=this.max[2],new Un(d,g)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,c=this.max;return[[o[0],o[1],o[2]],[c[0],o[1],o[2]],[c[0],c[1],o[2]],[o[0],c[1],o[2]],[o[0],o[1],c[2]],[c[0],o[1],c[2]],[c[0],c[1],c[2]],[o[0],c[1],c[2]]]}intersects(o){return this.intersectsAabb(o.bounds)?aO(o,this.getCorners()):0}intersectsFlat(o){return this.intersectsAabb(o.bounds)?aO(o,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(o,c){return c||this.intersects(o)?oO(o,this.getCorners()):0}intersectsPreciseFlat(o,c){return c||this.intersectsFlat(o)?oO(o,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(o){for(let c=0;c<3;++c)if(this.min[c]>o.max[c]||o.min[c]>this.max[c])return!1;return!0}intersectsAabbXY(o){return!(this.min[0]>o.max[0]||o.min[0]>this.max[0]||this.min[1]>o.max[1]||o.min[1]>this.max[1])}encapsulate(o){for(let c=0;c<3;c++)this.min[c]=Math.min(this.min[c],o.min[c]),this.max[c]=Math.max(this.max[c],o.max[c])}encapsulatePoint(o){for(let c=0;c<3;c++)this.min[c]=Math.min(this.min[c],o[c]),this.max[c]=Math.max(this.max[c],o[c])}closestPoint(o){return[Math.max(Math.min(this.max[0],o[0]),this.min[0]),Math.max(Math.min(this.max[1],o[1]),this.min[1]),Math.max(Math.min(this.max[2],o[2]),this.min[2])]}}hr(Un,"Aabb");const mM=5,lO=6,Ms=tr/Math.PI/2,rY=16383,$m=64,gM=[$m,32,16],Ys=-Ms,Ks=Ms,iY=[new Un([Ys,Ys,Ys],[Ks,Ks,Ks]),new Un([Ys,Ys,Ys],[0,0,Ks]),new Un([0,Ys,Ys],[Ks,0,Ks]),new Un([Ys,0,Ys],[0,Ks,Ks]),new Un([0,0,Ys],[Ks,Ks,Ks])];function C1(l){return l*Ms/z_}function uO(l,o,c,d=!0){const g=a.v.scale([],l._camera.position,l.worldSize),y=[o,c,1,1];a.e.transformMat4(y,y,l.pixelMatrixInverse),a.e.scale(y,y,1/y[3]);const b=a.v.sub([],y,g),M=a.v.normalize([],b),E=l.globeMatrix,P=[E[12],E[13],E[14]],O=a.v.sub([],P,g),F=a.v.length(O),V=a.v.normalize([],O),U=l.worldSize/(2*Math.PI),q=a.v.dot(V,M),K=Math.asin(U/F);if(K<Math.acos(q)){if(!d)return null;const st=[],It=[];a.v.scale(st,M,F/q),a.v.normalize(It,a.v.sub(It,st,O)),a.v.normalize(M,a.v.add(M,O,a.v.scale(M,It,Math.tan(K)*F)))}const Q=[];new dM(g,M).closestPointOnSphere(P,U,Q);const ae=a.v.normalize([],xt(E,0)),ge=a.v.normalize([],xt(E,1)),_e=a.v.normalize([],xt(E,2)),be=a.v.dot(ae,Q),Ae=a.v.dot(ge,Q),Pe=a.v.dot(_e,Q),Ge=me(Math.asin(-Ae/U));let Ke=me(Math.atan2(be,Pe));Ke=l.center.lng+function(st,It){const Ut=(It-st+180)%360-180;return Ut<-180?Ut+360:Ut}(l.center.lng,Ke);const rt=Au(Ke),ft=Ce(Cu(Ge),0,1);return new Na(rt,ft)}class nY{constructor(o,c,d){this.a=a.v.sub([],o,d),this.b=a.v.sub([],c,d),this.center=d;const g=a.v.normalize([],this.a),y=a.v.normalize([],this.b);this.angle=Math.acos(a.v.dot(g,y))}}function vM(l,o){if(l.angle===0)return null;let c;return c=l.a[o]===0?1/l.angle*.5*Math.PI:1/l.angle*Math.atan(l.b[o]/l.a[o]/Math.sin(l.angle)-1/Math.tan(l.angle)),c<0||c>1?null:function(d,g,y,b){const M=Math.sin(y);return d*(Math.sin((1-b)*y)/M)+g*(Math.sin(b*y)/M)}(l.a[o],l.b[o],l.angle,Ce(c,0,1))+l.center[o]}function Mu(l){if(l.z<=1)return iY[l.z+2*l.y+l.x];const o=_M(I1(l));return Un.fromPoints(o)}function kc(l,o,c){return a.v.scale(l,l,1-c),a.v.scaleAndAdd(l,l,o,c)}function cO(l,o){const c=Rc(o.zoom);if(c===0)return Mu(l);const d=I1(l),g=_M(d),y=Au(d.getWest())*o.worldSize,b=Au(d.getEast())*o.worldSize,M=Cu(d.getNorth())*o.worldSize,E=Cu(d.getSouth())*o.worldSize,P=[y,M,0],O=[b,M,0],F=[y,E,0],V=[b,E,0],U=a.m.invert([],o.globeMatrix);return a.v.transformMat4(P,P,U),a.v.transformMat4(O,O,U),a.v.transformMat4(F,F,U),a.v.transformMat4(V,V,U),g[0]=kc(g[0],F,c),g[1]=kc(g[1],V,c),g[2]=kc(g[2],O,c),g[3]=kc(g[3],P,c),Un.fromPoints(g)}function hO(l,o,c){for(const d of l)a.v.transformMat4(d,d,o),a.v.scale(d,d,c)}function dO(l,o,c,d){const g=o/l.worldSize,y=l.globeMatrix;if(c.z<=1){const rt=Mu(c).getCorners();return hO(rt,y,g),Un.fromPoints(rt)}const b=I1(c,d),M=_M(b);hO(M,y,g);const E=Number.MAX_VALUE,P=[-E,-E,-E],O=[E,E,E];if(b.contains(l.center)){for(const st of M)a.v.min(O,O,st),a.v.max(P,P,st);P[2]=0;const rt=l.point,ft=[rt.x*g,rt.y*g,0];return a.v.min(O,O,ft),a.v.max(P,P,ft),new Un(O,P)}const F=[y[12]*g,y[13]*g,y[14]*g],V=b.getCenter(),U=Ce(l.center.lat,-Fn,Fn),q=Ce(V.lat,-Fn,Fn),K=Au(l.center.lng),Q=Cu(U);let ae=K-Au(V.lng);const ge=Q-Cu(q);ae>.5?ae-=1:ae<-.5&&(ae+=1);let _e=0;if(Math.abs(ae)>Math.abs(ge))_e=ae>=0?1:3;else{_e=ge>=0?0:2;const rt=[y[4]*g,y[5]*g,y[6]*g],ft=-Math.sin(se(ge>=0?b.getSouth():b.getNorth()))*Ms;a.v.scaleAndAdd(F,F,rt,ft)}const be=M[_e],Ae=M[(_e+1)%4],Pe=new nY(be,Ae,F),Ge=[vM(Pe,0)||be[0],vM(Pe,1)||be[1],vM(Pe,2)||be[2]],Ke=Rc(l.zoom);if(Ke>0){const rt=function({x:st,y:It,z:Ut},Tt,Bt,wt,nr){const cr=1/(1<<Ut);let $t=st*cr,Dr=$t+cr,fr=It*cr,rr=fr+cr,Pr=0;const yr=($t+Dr)/2-wt;return yr>.5?Pr=-1:yr<-.5&&(Pr=1),$t=(($t+Pr)*Tt-(wt*=Tt))*Bt+wt,Dr=((Dr+Pr)*Tt-wt)*Bt+wt,fr=(fr*Tt-(nr*=Tt))*Bt+nr,rr=(rr*Tt-nr)*Bt+nr,[[$t,rr,0],[Dr,rr,0],[Dr,fr,0],[$t,fr,0]]}(c,o,l._pixelsPerMercatorPixel,K,Q);for(let st=0;st<M.length;st++)kc(M[st],rt[st],Ke);const ft=a.v.add([],rt[_e],rt[(_e+1)%4]);a.v.scale(ft,ft,.5),kc(Ge,ft,Ke)}for(const rt of M)a.v.min(O,O,rt),a.v.max(P,P,rt);return O[2]=Math.min(be[2],Ae[2]),a.v.min(O,O,Ge),a.v.max(P,P,Ge),new Un(O,P)}function I1({x:l,y:o,z:c},d=!1){const g=1/(1<<c),y=new Gi(Ko(l*g),o===(1<<c)-1&&d?-90:Ia((o+1)*g)),b=new Gi(Ko((l+1)*g),o===0&&d?90:Ia(o*g));return new Rh(y,b)}function _M(l){const o=se(l.getNorth()),c=se(l.getSouth()),d=Math.cos(o),g=Math.cos(c),y=Math.sin(o),b=Math.sin(c),M=l.getWest(),E=l.getEast();return[Gm(g,b,M),Gm(g,b,E),Gm(d,y,E),Gm(d,y,M)]}function Gm(l,o,c,d=Ms){return c=se(c),[l*Math.sin(c)*d,-o*d,l*Math.cos(c)*d]}function xf(l,o,c){return Gm(Math.cos(se(l)),Math.sin(se(l)),o,c)}function R_(l,o,c,d){const g=1<<c.z,y=(l/tr+c.x)/g;return xf(Ia((o/tr+c.y)/g),Ko(y),d)}function E1({min:l,max:o}){return rY/Math.max(o[0]-l[0],o[1]-l[1],o[2]-l[2])}const fO=new Float64Array(16);function O_(l){const o=E1(l),c=a.m.fromScaling(fO,[o,o,o]);return a.m.translate(c,c,a.v.negate([],l.min))}function yM(l){const o=a.m.fromTranslation(fO,l.min),c=1/E1(l);return a.m.scale(o,o,[c,c,c])}function xM(l){const o=tr/(2*Math.PI);return l/(2*Math.PI)/o}function pO(l,o){return tr/(512*Math.pow(2,l))*E1(Mu(o))}function mO(l,o,c,d,g){const y=xM(c),b=[l,o,-c/(2*Math.PI)],M=a.m.identity(new Float64Array(16));return a.m.translate(M,M,b),a.m.scale(M,M,[y,y,y]),a.m.rotateX(M,M,se(-g)),a.m.rotateY(M,M,se(-d)),M}function Rc(l){return We(mM,lO,l)}function gO(l,o){const c=xf(o.lat,o.lng),d=function(y){const b=xf(y._center.lat,y._center.lng),M=a.v.fromValues(0,1,0);let E=a.v.cross([],M,b);const P=a.m.fromRotation([],-y.angle,b);E=a.v.transformMat4(E,E,P),a.m.fromRotation(P,-y._pitch,E);const O=a.v.normalize([],b);return a.v.scale(O,O,C1(y.cameraToCenterDistance/y.pixelsPerMeter)),a.v.transformMat4(O,O,P),a.v.add([],b,O)}(l),g=a.v.subtract([],d,c);return a.v.angle(g,c)}function bM(l,o){return gO(l,o)>Math.PI/2*1.01}const vO=se(85),aY=Math.cos(vO),oY=Math.sin(vO),z_=63710088e-1,wM=2*Math.PI*z_;class zh{constructor(o,c){if(isNaN(o)||isNaN(c))throw new Error(`Invalid LngLat object: (${o}, ${c})`);if(this.lng=+o,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new zh(gt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const c=Math.PI/180,d=this.lat*c,g=o.lat*c,y=Math.sin(d)*Math.sin(g)+Math.cos(d)*Math.cos(g)*Math.cos((o.lng-this.lng)*c);return z_*Math.acos(Math.min(y,1))}toBounds(o=0){const c=360*o/40075017,d=c/Math.cos(Math.PI/180*this.lat);return new Rh(new zh(this.lng-d,this.lat-c),new zh(this.lng+d,this.lat+c))}toEcef(o){const c=C1(o);return xf(this.lat,this.lng,Ms+c)}static convert(o){if(o instanceof zh)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new zh(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new zh(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Gi=zh;const sY=0,lY=25.5;function SM(l){return wM*Math.cos(l*Math.PI/180)}function Au(l){return(180+l)/360}function Cu(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function mo(l,o){return l/SM(o)}function Ko(l){return 360*l-180}function Ia(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function _O(l,o){return l*SM(Ia(o))}const Fn=85.051129;function yO(l){return Math.cos(se(Ce(l,-Fn,Fn)))}function bf(l,o){const c=Ce(o,sY,lY),d=Math.pow(2,c);return yO(l)*wM/(512*d)}function xO(l){return 1/Math.cos(l*Math.PI/180)}function D1(l,o=0){const c=Math.exp(Math.PI*(1-(l.y+o/tr)/(1<<l.z)*2));return 80150034*c/(c*c+1)/tr/(1<<l.z)}class Na{constructor(o,c,d=0){this.x=+o,this.y=+c,this.z=+d}static fromLngLat(o,c=0){const d=Gi.convert(o);return new Na(Au(d.lng),Cu(d.lat),mo(c,d.lat))}toLngLat(){return new Gi(Ko(this.x),Ia(this.y))}toAltitude(){return _O(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/wM*xO(Ia(this.y))}}function TM(l,o,c,d,g,y,b,M,E){const P=(o+d)/2,O=(c+g)/2,F=new H(P,O);M(F),function(V,U,q,K,Q,ae){const ge=q-Q,_e=K-ae;return Math.abs((K-U)*ge-(q-V)*_e)/Math.hypot(ge,_e)}(F.x,F.y,y.x,y.y,b.x,b.y)>=E?(TM(l,o,c,P,O,y,F,M,E),TM(l,P,O,d,g,F,b,M,E)):l.push(b)}function bO(l,o,c){let d=l[0],g=d.x,y=d.y;o(d);const b=[d];for(let M=1;M<l.length;M++){const E=l[M],{x:P,y:O}=E;o(E),TM(b,g,y,P,O,d,E,o,c),g=P,y=O,d=E}return b}function MM(l,o,c,d){if(d(o,c)){const g=o.add(c)._mult(.5);MM(l,o,g,d),MM(l,g,c,d)}else l.push(c)}function uY(l,o){let c=l[0];const d=[c];for(let g=1;g<l.length;g++){const y=l[g];MM(d,c,y,o),c=y}return d}const AM=Math.pow(2,14)-1,wO=-AM-1;function cY(l,o){const c=Math.round(l.x*o),d=Math.round(l.y*o);return l.x=Ce(c,wO,AM),l.y=Ce(d,wO,AM),(c<l.x||c>l.x+1||d<l.y||d>l.y+1)&&Ue("Geometry exceeds allowed extent, reduce your vector tile buffer size"),l}function Iu(l,o,c){const d=l.loadGeometry(),g=l.extent,y=tr/g;if(o&&c&&c.projection.isReprojectedInTileSpace){const b=1<<o.z,{scale:M,x:E,y:P,projection:O}=c,F=V=>{const U=Ko((o.x+V.x/g)/b),q=Ia((o.y+V.y/g)/b),K=O.project(U,q);V.x=(K.x*M-E)*g,V.y=(K.y*M-P)*g};for(let V=0;V<d.length;V++)if(l.type!==1)d[V]=bO(d[V],F,1);else{const U=[];for(const q of d[V])q.x<0||q.x>=g||q.y<0||q.y>=g||(F(q),U.push(q));d[V]=U}}for(const b of d)for(const M of b)cY(M,y);return d}function Bh(l,o){return{type:l.type,id:l.id,properties:l.properties,geometry:o?Iu(l):[]}}function P1(l,o,c,d,g){l.emplaceBack(2*o+(d+1)/2,2*c+(g+1)/2)}function L1(l,o,c){l.emplaceBack(o.x,o.y,o.z,c[0]*16384,c[1]*16384,c[2]*16384)}class CM{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.fqid),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new Wr,this.indexArray=new Xi,this.segments=new yn,this.programConfigurations=new kh(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,d,g){const y=this.layers[0],b=[];let M=null;y.type==="circle"&&(M=y.layout.get("circle-sort-key"));for(const{feature:P,id:O,index:F,sourceLayerIndex:V}of o){const U=this.layers[0]._featureFilter.needGeometry,q=Bh(P,U);if(!this.layers[0]._featureFilter.filter(new Ne(this.zoom),q,d))continue;const K=M?M.evaluate(q,{},d):void 0,Q={id:O,properties:P.properties,type:P.type,sourceLayerIndex:V,index:F,geometry:U?q.geometry:Iu(P,d,g),patterns:{},sortKey:K};b.push(Q)}M&&b.sort((P,O)=>P.sortKey-O.sortKey);let E=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new dn,E=g.projection);for(const P of b){const{geometry:O,index:F,sourceLayerIndex:V}=P,U=o[F].feature;this.addFeature(P,O,F,c.availableImages,d,E,c.brightness),c.featureIndex.insert(U,O,F,V,this.index)}}update(o,c,d,g,y){const b=Object.keys(o).length!==0;b&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(o,c,b?this.stateDependentLayers:this.layers,d,g,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,bX.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,wX.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(o,c,d,g,y,b,M){for(const E of c)for(const P of E){const O=P.x,F=P.y;if(O<0||O>=tr||F<0||F>=tr)continue;if(b){const q=b.projectTilePoint(O,F,y),K=b.upVector(y,O,F),Q=this.globeExtVertexArray;L1(Q,q,K),L1(Q,q,K),L1(Q,q,K),L1(Q,q,K)}const V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),U=V.vertexLength;P1(this.layoutVertexArray,O,F,-1,-1),P1(this.layoutVertexArray,O,F,1,-1),P1(this.layoutVertexArray,O,F,1,1),P1(this.layoutVertexArray,O,F,-1,1),this.indexArray.emplaceBack(U,U+1,U+2),this.indexArray.emplaceBack(U,U+2,U+3),V.vertexLength+=4,V.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,{},g,y,M)}}function SO(l,o){for(let c=0;c<l.length;c++)if(wf(o,l[c]))return!0;for(let c=0;c<o.length;c++)if(wf(l,o[c]))return!0;return!!IM(l,o)}function hY(l,o,c){return!!wf(l,o)||!!EM(o,l,c)}function TO(l,o){if(l.length===1)return AO(o,l[0]);for(let c=0;c<o.length;c++){const d=o[c];for(let g=0;g<d.length;g++)if(wf(l,d[g]))return!0}for(let c=0;c<l.length;c++)if(AO(o,l[c]))return!0;for(let c=0;c<o.length;c++)if(IM(l,o[c]))return!0;return!1}function dY(l,o,c){if(l.length>1){if(IM(l,o))return!0;for(let d=0;d<o.length;d++)if(EM(o[d],l,c))return!0}for(let d=0;d<l.length;d++)if(EM(l[d],o,c))return!0;return!1}function IM(l,o){if(l.length===0||o.length===0)return!1;for(let c=0;c<l.length-1;c++){const d=l[c],g=l[c+1];for(let y=0;y<o.length-1;y++)if(fY(d,g,o[y],o[y+1]))return!0}return!1}function fY(l,o,c,d){return Be(l,c,d)!==Be(o,c,d)&&Be(l,o,c)!==Be(l,o,d)}function EM(l,o,c){const d=c*c;if(o.length===1)return l.distSqr(o[0])<d;for(let g=1;g<o.length;g++)if(MO(l,o[g-1],o[g])<d)return!0;return!1}function MO(l,o,c){const d=o.distSqr(c);if(d===0)return l.distSqr(o);const g=((l.x-o.x)*(c.x-o.x)+(l.y-o.y)*(c.y-o.y))/d;return l.distSqr(g<0?o:g>1?c:c.sub(o)._mult(g)._add(o))}function AO(l,o){let c,d,g,y=!1;for(let b=0;b<l.length;b++){c=l[b];for(let M=0,E=c.length-1;M<c.length;E=M++)d=c[M],g=c[E],d.y>o.y!=g.y>o.y&&o.x<(g.x-d.x)*(o.y-d.y)/(g.y-d.y)+d.x&&(y=!y)}return y}function wf(l,o){let c=!1;for(let d=0,g=l.length-1;d<l.length;g=d++){const y=l[d],b=l[g];y.y>o.y!=b.y>o.y&&o.x<(b.x-y.x)*(o.y-y.y)/(b.y-y.y)+y.x&&(c=!c)}return c}function CO(l,o,c,d,g){for(const b of l)if(o<=b.x&&c<=b.y&&d>=b.x&&g>=b.y)return!0;const y=[new H(o,c),new H(o,g),new H(d,g),new H(d,c)];if(l.length>2){for(const b of y)if(wf(l,b))return!0}for(let b=0;b<l.length-1;b++)if(pY(l[b],l[b+1],y))return!0;return!1}function pY(l,o,c){const d=c[0],g=c[2];if(l.x<d.x&&o.x<d.x||l.x>g.x&&o.x>g.x||l.y<d.y&&o.y<d.y||l.y>g.y&&o.y>g.y)return!1;const y=Be(l,o,c[0]);return y!==Be(l,o,c[1])||y!==Be(l,o,c[2])||y!==Be(l,o,c[3])}function Um(l,o,c,d,g,y){let b=o.y-l.y,M=l.x-o.x;if(y=y||0){const E=b*b+M*M;if(E===0)return!0;const P=Math.sqrt(E);b/=P,M/=P}return!((c.x-l.x)*b+(c.y-l.y)*M-y<0||(d.x-l.x)*b+(d.y-l.y)*M-y<0||(g.x-l.x)*b+(g.y-l.y)*M-y<0)}function DM(l,o,c,d,g,y,b){return!(Um(l,o,d,g,y,b)||Um(o,c,d,g,y,b)||Um(c,l,d,g,y,b)||Um(d,g,l,o,c,b)||Um(g,y,l,o,c,b)||Um(y,d,l,o,c,b))}function jm(l,o,c){const d=o.paint.get(l).value;return d.kind==="constant"?d.value:c.programConfigurations.get(o.id).getMaxValue(l)}function k1(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function IO(l,o,c,d,g){if(!o[0]&&!o[1])return l;const y=H.convert(o)._mult(g);c==="viewport"&&y._rotate(-d);const b=[];for(let M=0;M<l.length;M++)b.push(l[M].sub(y));return b}function EO(l,o,c,d){const g=H.convert(l)._mult(d);return o==="viewport"&&g._rotate(-c),g}hr(CM,"CircleBucket",{omit:["layers"]});const mY=new Rt({"circle-sort-key":new at(ut.layout_circle["circle-sort-key"]),visibility:new Ee(ut.layout_circle.visibility)});var gY={paint:new Rt({"circle-radius":new at(ut.paint_circle["circle-radius"]),"circle-color":new at(ut.paint_circle["circle-color"]),"circle-blur":new at(ut.paint_circle["circle-blur"]),"circle-opacity":new at(ut.paint_circle["circle-opacity"]),"circle-translate":new Ee(ut.paint_circle["circle-translate"]),"circle-translate-anchor":new Ee(ut.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ee(ut.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ee(ut.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new at(ut.paint_circle["circle-stroke-width"]),"circle-stroke-color":new at(ut.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new at(ut.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Ee(ut.paint_circle["circle-emissive-strength"])}),layout:mY};const vY=a.m.create(),DO=l=>{const o=[];return l.paint.get("circle-pitch-alignment")==="map"&&o.push("PITCH_WITH_MAP"),l.paint.get("circle-pitch-scale")==="map"&&o.push("SCALE_WITH_MAP"),o};function PO(l,o,c,d,g,y,b,M,E){if(y&&l.queryGeometry.isAboveHorizon)return!1;y&&(E*=l.pixelToTileUnitsFactor);const P=l.tileID.canonical,O=c.projection.upVectorScale(P,c.center.lat,c.worldSize).metersToTile;for(const F of o)for(const V of F){const U=V.add(M),q=g&&c.elevation?c.elevation.exaggeration()*g.getElevationAt(U.x,U.y,!0):0,K=c.projection.projectTilePoint(U.x,U.y,P);if(q>0){const _e=c.projection.upVector(P,U.x,U.y);K.x+=_e[0]*O*q,K.y+=_e[1]*O*q,K.z+=_e[2]*O*q}const Q=y?U:_Y(K.x,K.y,K.z,d),ae=y?l.tilespaceRays.map(_e=>xY(_e,q)):l.queryGeometry.screenGeometry,ge=a.e.transformMat4([],[K.x,K.y,K.z,1],d);if(!b&&y?E*=ge[3]/c.cameraToCenterDistance:b&&!y&&(E*=c.cameraToCenterDistance/ge[3]),y){const _e=Ia((V.y/tr+P.y)/(1<<P.z));E/=c.projection.pixelsPerMeter(_e,1)/mo(1,_e)}if(hY(ae,Q,E))return!0}return!1}function _Y(l,o,c,d){const g=a.e.transformMat4([],[l,o,c,1],d);return new H(g[0]/g[3],g[1]/g[3])}const LO=a.v.fromValues(0,0,0),yY=a.v.fromValues(0,0,1);function xY(l,o){const c=a.v.create();return LO[2]=o,l.intersectsPlane(LO,yY,c),new H(c[0],c[1])}class kO extends CM{}function RO(l,{width:o,height:c},d,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==o*c*d)throw new RangeError("mismatched image size")}else g=new Uint8Array(o*c*d);return l.width=o,l.height=c,l.data=g,l}function OO(l,o,c){const{width:d,height:g}=o;d===l.width&&g===l.height||(PM(l,o,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,d),height:Math.min(l.height,g)},c),l.width=d,l.height=g,l.data=o.data)}function PM(l,o,c,d,g,y,b){if(g.width===0||g.height===0)return o;if(g.width>l.width||g.height>l.height||c.x>l.width-g.width||c.y>l.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>o.width||g.height>o.height||d.x>o.width-g.width||d.y>o.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const M=l.data,E=o.data,P=y===4&&b;for(let O=0;O<g.height;O++){const F=((c.y+O)*l.width+c.x)*y,V=((d.y+O)*o.width+d.x)*y;if(P)for(let U=0;U<g.width;U++){const q=F+U*y+3,K=V+U*y;E[K+0]=255,E[K+1]=255,E[K+2]=255,E[K+3]=M[q]}else for(let U=0;U<g.width*y;U++)E[V+U]=M[F+U]}return o}hr(kO,"HeatmapBucket",{omit:["layers"]});class Oc{constructor(o,c){RO(this,o,1,c)}resize(o){OO(this,new Oc(o),1)}clone(){return new Oc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,c,d,g,y){PM(o,c,d,g,y,1)}}class As{constructor(o,c){RO(this,o,4,c)}resize(o){OO(this,new As(o),4)}replace(o,c){c?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new As({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,c,d,g,y,b){PM(o,c,d,g,y,4,b)}}class zO{constructor(o,c){this.width=o.width,this.height=o.height,this.data=c instanceof Uint8Array?new Float32Array(c.buffer):c}}hr(Oc,"AlphaImage"),hr(As,"RGBAImage");const bY=new Rt({visibility:new Ee(ut.layout_heatmap.visibility)});var wY={paint:new Rt({"heatmap-radius":new at(ut.paint_heatmap["heatmap-radius"]),"heatmap-weight":new at(ut.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ee(ut.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ft(ut.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ee(ut.paint_heatmap["heatmap-opacity"])}),layout:bY};function R1(l){const o={},c=l.resolution||256,d=l.clips?l.clips.length:1,g=l.image||new As({width:c,height:d}),y=(b,M,E)=>{o[l.evaluationKey]=E;const P=l.expression.evaluate(o);P&&(g.data[b+M+0]=Math.floor(255*P.r/P.a),g.data[b+M+1]=Math.floor(255*P.g/P.a),g.data[b+M+2]=Math.floor(255*P.b/P.a),g.data[b+M+3]=Math.floor(255*P.a))};if(l.clips)for(let b=0,M=0;b<d;++b,M+=4*c)for(let E=0,P=0;E<c;E++,P+=4){const O=E/(c-1),{start:F,end:V}=l.clips[b];y(M,P,F*(1-O)+V*O)}else for(let b=0,M=0;b<c;b++,M+=4)y(0,M,b/(c-1));return g}const SY=new Rt({visibility:new Ee(ut.layout_hillshade.visibility)});var TY={paint:new Rt({"hillshade-illumination-direction":new Ee(ut.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ee(ut.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ee(ut.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ee(ut.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ee(ut.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ee(ut.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Ee(ut.paint_hillshade["hillshade-emissive-strength"])}),layout:SY};const MY=_r([{name:"a_pos",components:2,type:"Int16"}],4),{members:AY}=MY;var LM={exports:{}};function O1(l,o,c){c=c||2;var d,g,y,b,M,E,P,O=o&&o.length,F=O?o[0]*c:l.length,V=BO(l,0,F,c,!0),U=[];if(!V||V.next===V.prev)return U;if(O&&(V=function(K,Q,ae,ge){var _e,be,Ae,Pe=[];for(_e=0,be=Q.length;_e<be;_e++)(Ae=BO(K,Q[_e]*ge,_e<be-1?Q[_e+1]*ge:K.length,ge,!1))===Ae.next&&(Ae.steiner=!0),Pe.push(RY(Ae));for(Pe.sort(PY),_e=0;_e<Pe.length;_e++)ae=LY(Pe[_e],ae);return ae}(l,o,V,c)),l.length>80*c){d=y=l[0],g=b=l[1];for(var q=c;q<F;q+=c)(M=l[q])<d&&(d=M),(E=l[q+1])<g&&(g=E),M>y&&(y=M),E>b&&(b=E);P=(P=Math.max(y-d,b-g))!==0?32767/P:0}return B_(V,U,c,d,g,P,0),U}function BO(l,o,c,d,g){var y,b;if(g===OM(l,o,c,d)>0)for(y=o;y<c;y+=d)b=VO(y,l[y],l[y+1],b);else for(y=c-d;y>=o;y-=d)b=VO(y,l[y],l[y+1],b);return b&&z1(b,b.next)&&(N_(b),b=b.next),b}function Sf(l,o){if(!l)return l;o||(o=l);var c,d=l;do if(c=!1,d.steiner||!z1(d,d.next)&&ta(d.prev,d,d.next)!==0)d=d.next;else{if(N_(d),(d=o=d.prev)===d.next)break;c=!0}while(c||d!==o);return o}function B_(l,o,c,d,g,y,b){if(l){!b&&y&&function(O,F,V,U){var q=O;do q.z===0&&(q.z=kM(q.x,q.y,F,V,U)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==O);q.prevZ.nextZ=null,q.prevZ=null,function(K){var Q,ae,ge,_e,be,Ae,Pe,Ge,Ke=1;do{for(ae=K,K=null,be=null,Ae=0;ae;){for(Ae++,ge=ae,Pe=0,Q=0;Q<Ke&&(Pe++,ge=ge.nextZ);Q++);for(Ge=Ke;Pe>0||Ge>0&&ge;)Pe!==0&&(Ge===0||!ge||ae.z<=ge.z)?(_e=ae,ae=ae.nextZ,Pe--):(_e=ge,ge=ge.nextZ,Ge--),be?be.nextZ=_e:K=_e,_e.prevZ=be,be=_e;ae=ge}be.nextZ=null,Ke*=2}while(Ae>1)}(q)}(l,d,g,y);for(var M,E,P=l;l.prev!==l.next;)if(M=l.prev,E=l.next,y?IY(l,d,g,y):CY(l))o.push(M.i/c|0),o.push(l.i/c|0),o.push(E.i/c|0),N_(l),l=E.next,P=E.next;else if((l=E)===P){b?b===1?B_(l=EY(Sf(l),o,c),o,c,d,g,y,2):b===2&&DY(l,o,c,d,g,y):B_(Sf(l),o,c,d,g,y,1);break}}}function CY(l){var o=l.prev,c=l,d=l.next;if(ta(o,c,d)>=0)return!1;for(var g=o.x,y=c.x,b=d.x,M=o.y,E=c.y,P=d.y,O=g<y?g<b?g:b:y<b?y:b,F=M<E?M<P?M:P:E<P?E:P,V=g>y?g>b?g:b:y>b?y:b,U=M>E?M>P?M:P:E>P?E:P,q=d.next;q!==o;){if(q.x>=O&&q.x<=V&&q.y>=F&&q.y<=U&&Hm(g,M,y,E,b,P,q.x,q.y)&&ta(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function IY(l,o,c,d){var g=l.prev,y=l,b=l.next;if(ta(g,y,b)>=0)return!1;for(var M=g.x,E=y.x,P=b.x,O=g.y,F=y.y,V=b.y,U=M<E?M<P?M:P:E<P?E:P,q=O<F?O<V?O:V:F<V?F:V,K=M>E?M>P?M:P:E>P?E:P,Q=O>F?O>V?O:V:F>V?F:V,ae=kM(U,q,o,c,d),ge=kM(K,Q,o,c,d),_e=l.prevZ,be=l.nextZ;_e&&_e.z>=ae&&be&&be.z<=ge;){if(_e.x>=U&&_e.x<=K&&_e.y>=q&&_e.y<=Q&&_e!==g&&_e!==b&&Hm(M,O,E,F,P,V,_e.x,_e.y)&&ta(_e.prev,_e,_e.next)>=0||(_e=_e.prevZ,be.x>=U&&be.x<=K&&be.y>=q&&be.y<=Q&&be!==g&&be!==b&&Hm(M,O,E,F,P,V,be.x,be.y)&&ta(be.prev,be,be.next)>=0))return!1;be=be.nextZ}for(;_e&&_e.z>=ae;){if(_e.x>=U&&_e.x<=K&&_e.y>=q&&_e.y<=Q&&_e!==g&&_e!==b&&Hm(M,O,E,F,P,V,_e.x,_e.y)&&ta(_e.prev,_e,_e.next)>=0)return!1;_e=_e.prevZ}for(;be&&be.z<=ge;){if(be.x>=U&&be.x<=K&&be.y>=q&&be.y<=Q&&be!==g&&be!==b&&Hm(M,O,E,F,P,V,be.x,be.y)&&ta(be.prev,be,be.next)>=0)return!1;be=be.nextZ}return!0}function EY(l,o,c){var d=l;do{var g=d.prev,y=d.next.next;!z1(g,y)&&FO(g,d,d.next,y)&&F_(g,y)&&F_(y,g)&&(o.push(g.i/c|0),o.push(d.i/c|0),o.push(y.i/c|0),N_(d),N_(d.next),d=l=y),d=d.next}while(d!==l);return Sf(d)}function DY(l,o,c,d,g,y){var b=l;do{for(var M=b.next.next;M!==b.prev;){if(b.i!==M.i&&OY(b,M)){var E=NO(b,M);return b=Sf(b,b.next),E=Sf(E,E.next),B_(b,o,c,d,g,y,0),void B_(E,o,c,d,g,y,0)}M=M.next}b=b.next}while(b!==l)}function PY(l,o){return l.x-o.x}function LY(l,o){var c=function(g,y){var b,M=y,E=g.x,P=g.y,O=-1/0;do{if(P<=M.y&&P>=M.next.y&&M.next.y!==M.y){var F=M.x+(P-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(F<=E&&F>O&&(O=F,b=M.x<M.next.x?M:M.next,F===E))return b}M=M.next}while(M!==y);if(!b)return null;var V,U=b,q=b.x,K=b.y,Q=1/0;M=b;do E>=M.x&&M.x>=q&&E!==M.x&&Hm(P<K?E:O,P,q,K,P<K?O:E,P,M.x,M.y)&&(V=Math.abs(P-M.y)/(E-M.x),F_(M,g)&&(V<Q||V===Q&&(M.x>b.x||M.x===b.x&&kY(b,M)))&&(b=M,Q=V)),M=M.next;while(M!==U);return b}(l,o);if(!c)return o;var d=NO(c,l);return Sf(d,d.next),Sf(c,c.next)}function kY(l,o){return ta(l.prev,l,o.prev)<0&&ta(o.next,l,l.next)<0}function kM(l,o,c,d,g){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-c)*g|0)|l<<8))|l<<4))|l<<2))|l<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-d)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function RY(l){var o=l,c=l;do(o.x<c.x||o.x===c.x&&o.y<c.y)&&(c=o),o=o.next;while(o!==l);return c}function Hm(l,o,c,d,g,y,b,M){return(g-b)*(o-M)>=(l-b)*(y-M)&&(l-b)*(d-M)>=(c-b)*(o-M)&&(c-b)*(y-M)>=(g-b)*(d-M)}function OY(l,o){return l.next.i!==o.i&&l.prev.i!==o.i&&!function(c,d){var g=c;do{if(g.i!==c.i&&g.next.i!==c.i&&g.i!==d.i&&g.next.i!==d.i&&FO(g,g.next,c,d))return!0;g=g.next}while(g!==c);return!1}(l,o)&&(F_(l,o)&&F_(o,l)&&function(c,d){var g=c,y=!1,b=(c.x+d.x)/2,M=(c.y+d.y)/2;do g.y>M!=g.next.y>M&&g.next.y!==g.y&&b<(g.next.x-g.x)*(M-g.y)/(g.next.y-g.y)+g.x&&(y=!y),g=g.next;while(g!==c);return y}(l,o)&&(ta(l.prev,l,o.prev)||ta(l,o.prev,o))||z1(l,o)&&ta(l.prev,l,l.next)>0&&ta(o.prev,o,o.next)>0)}function ta(l,o,c){return(o.y-l.y)*(c.x-o.x)-(o.x-l.x)*(c.y-o.y)}function z1(l,o){return l.x===o.x&&l.y===o.y}function FO(l,o,c,d){var g=F1(ta(l,o,c)),y=F1(ta(l,o,d)),b=F1(ta(c,d,l)),M=F1(ta(c,d,o));return g!==y&&b!==M||!(g!==0||!B1(l,c,o))||!(y!==0||!B1(l,d,o))||!(b!==0||!B1(c,l,d))||!(M!==0||!B1(c,o,d))}function B1(l,o,c){return o.x<=Math.max(l.x,c.x)&&o.x>=Math.min(l.x,c.x)&&o.y<=Math.max(l.y,c.y)&&o.y>=Math.min(l.y,c.y)}function F1(l){return l>0?1:l<0?-1:0}function F_(l,o){return ta(l.prev,l,l.next)<0?ta(l,o,l.next)>=0&&ta(l,l.prev,o)>=0:ta(l,o,l.prev)<0||ta(l,l.next,o)<0}function NO(l,o){var c=new RM(l.i,l.x,l.y),d=new RM(o.i,o.x,o.y),g=l.next,y=o.prev;return l.next=o,o.prev=l,c.next=g,g.prev=c,d.next=c,c.prev=d,y.next=d,d.prev=y,d}function VO(l,o,c,d){var g=new RM(l,o,c);return d?(g.next=d.next,g.prev=d,d.next.prev=g,d.next=g):(g.prev=g,g.next=g),g}function N_(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function RM(l,o,c){this.i=l,this.x=o,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function OM(l,o,c,d){for(var g=0,y=o,b=c-d;y<c;y+=d)g+=(l[b]-l[y])*(l[y+1]+l[b+1]),b=y;return g}LM.exports=O1,LM.exports.default=O1,O1.deviation=function(l,o,c,d){var g=o&&o.length,y=Math.abs(OM(l,0,g?o[0]*c:l.length,c));if(g)for(var b=0,M=o.length;b<M;b++)y-=Math.abs(OM(l,o[b]*c,b<M-1?o[b+1]*c:l.length,c));var E=0;for(b=0;b<d.length;b+=3){var P=d[b]*c,O=d[b+1]*c,F=d[b+2]*c;E+=Math.abs((l[P]-l[F])*(l[O+1]-l[P+1])-(l[P]-l[O])*(l[F+1]-l[P+1]))}return y===0&&E===0?0:Math.abs((E-y)/y)},O1.flatten=function(l){for(var o=l[0][0].length,c={vertices:[],holes:[],dimensions:o},d=0,g=0;g<l.length;g++){for(var y=0;y<l[g].length;y++)for(var b=0;b<o;b++)c.vertices.push(l[g][y][b]);g>0&&c.holes.push(d+=l[g-1].length)}return c};var N1=z(LM.exports);function zM(l,o){const c=l.length;if(c<=1)return[l];const d=[];let g,y;for(let b=0;b<c;b++){const M=ce(l[b]);M!==0&&(l[b].area=Math.abs(M),y===void 0&&(y=M<0),y===M<0?(g&&d.push(g),g=[l[b]]):g.push(l[b]))}if(g&&d.push(g),o>1)for(let b=0;b<d.length;b++)d[b].length<=o||(Zt(d[b],o,1,d[b].length-1,zY),d[b]=d[b].slice(0,o));return d}function zY(l,o){return o.area-l.area}function BM(l,o,c){const d=c.patternDependencies;let g=!1;for(const y of o){const b=y.paint.get(`${l}-pattern`);b.isConstant()||(g=!0);const M=b.constantOr(null);M&&(g=!0,d[M]=!0)}return g}function FM(l,o,c,d,g){const y=g.patternDependencies;for(const b of o){const M=b.paint.get(`${l}-pattern`).value;if(M.kind!=="constant"){let E=M.evaluate({zoom:d},c,{},g.availableImages);E=E&&E.name?E.name:E,y[E]=!0,c.patterns[b.id]=E}}return c}class V1{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.fqid),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Wr,this.indexArray=new Xi,this.indexArray2=new Za,this.programConfigurations=new kh(o.layers,o.zoom),this.segments=new yn,this.segments2=new yn,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.projection=o.projection}populate(o,c,d,g){this.hasPattern=BM("fill",this.layers,c);const y=this.layers[0].layout.get("fill-sort-key"),b=[];for(const{feature:M,id:E,index:P,sourceLayerIndex:O}of o){const F=this.layers[0]._featureFilter.needGeometry,V=Bh(M,F);if(!this.layers[0]._featureFilter.filter(new Ne(this.zoom),V,d))continue;const U=y?y.evaluate(V,{},d,c.availableImages):void 0,q={id:E,properties:M.properties,type:M.type,sourceLayerIndex:O,index:P,geometry:F?V.geometry:Iu(M,d,g),patterns:{},sortKey:U};b.push(q)}y&&b.sort((M,E)=>M.sortKey-E.sortKey);for(const M of b){const{geometry:E,index:P,sourceLayerIndex:O}=M;if(this.hasPattern){const F=FM("fill",this.layers,M,this.zoom,c);this.patternFeatures.push(F)}else this.addFeature(M,E,P,d,{},c.availableImages,c.brightness);c.featureIndex.insert(o[P].feature,E,P,O,this.index)}}update(o,c,d,g,y){const b=Object.keys(o).length!==0;b&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(o,c,b?this.stateDependentLayers:this.layers,d,g,y)}addFeatures(o,c,d,g,y,b){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,c,d,g,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,AY),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,c,d,g,y,b=[],M){for(const E of zM(c,500)){let P=0;for(const K of E)P+=K.length;const O=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray),F=O.vertexLength,V=[],U=[];for(const K of E){if(K.length===0)continue;K!==E[0]&&U.push(V.length/2);const Q=this.segments2.prepareSegment(K.length,this.layoutVertexArray,this.indexArray2),ae=Q.vertexLength;this.layoutVertexArray.emplaceBack(K[0].x,K[0].y),this.indexArray2.emplaceBack(ae+K.length-1,ae),V.push(K[0].x),V.push(K[0].y);for(let ge=1;ge<K.length;ge++)this.layoutVertexArray.emplaceBack(K[ge].x,K[ge].y),this.indexArray2.emplaceBack(ae+ge-1,ae+ge),V.push(K[ge].x),V.push(K[ge].y);Q.vertexLength+=K.length,Q.primitiveLength+=K.length}const q=N1(V,U);for(let K=0;K<q.length;K+=3)this.indexArray.emplaceBack(F+q[K],F+q[K+1],F+q[K+2]);O.vertexLength+=P,O.primitiveLength+=q.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,y,b,g,M)}}hr(V1,"FillBucket",{omit:["layers","patternFeatures"]});const BY=new Rt({"fill-sort-key":new at(ut.layout_fill["fill-sort-key"]),visibility:new Ee(ut.layout_fill.visibility)});var FY={paint:new Rt({"fill-antialias":new Ee(ut.paint_fill["fill-antialias"]),"fill-opacity":new at(ut.paint_fill["fill-opacity"]),"fill-color":new at(ut.paint_fill["fill-color"]),"fill-outline-color":new at(ut.paint_fill["fill-outline-color"]),"fill-translate":new Ee(ut.paint_fill["fill-translate"]),"fill-translate-anchor":new Ee(ut.paint_fill["fill-translate-anchor"]),"fill-pattern":new at(ut.paint_fill["fill-pattern"]),"fill-emissive-strength":new Ee(ut.paint_fill["fill-emissive-strength"])}),layout:BY};const NY=_r([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),VY=_r([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),$Y=_r([{name:"a_centroid_pos",components:2,type:"Uint16"}]),GY=_r([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),UY=_r([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:jY}=NY;var $1={},HY=Y,$O=Wm;function Wm(l,o,c,d,g){this.properties={},this.extent=c,this.type=0,this._pbf=l,this._geometry=-1,this._keys=d,this._values=g,l.readFields(WY,this,o)}function WY(l,o,c){l==1?o.id=c.readVarint():l==2?function(d,g){for(var y=d.readVarint()+d.pos;d.pos<y;){var b=g._keys[d.readVarint()],M=g._values[d.readVarint()];g.properties[b]=M}}(c,o):l==3?o.type=c.readVarint():l==4&&(o._geometry=c.pos)}function qY(l){for(var o,c,d=0,g=0,y=l.length,b=y-1;g<y;b=g++)d+=((c=l[b]).x-(o=l[g]).x)*(o.y+c.y);return d}Wm.types=["Unknown","Point","LineString","Polygon"],Wm.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var o,c=l.readVarint()+l.pos,d=1,g=0,y=0,b=0,M=[];l.pos<c;){if(g<=0){var E=l.readVarint();d=7&E,g=E>>3}if(g--,d===1||d===2)y+=l.readSVarint(),b+=l.readSVarint(),d===1&&(o&&M.push(o),o=[]),o.push(new HY(y,b));else{if(d!==7)throw new Error("unknown command "+d);o&&o.push(o[0].clone())}}return o&&M.push(o),M},Wm.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var o=l.readVarint()+l.pos,c=1,d=0,g=0,y=0,b=1/0,M=-1/0,E=1/0,P=-1/0;l.pos<o;){if(d<=0){var O=l.readVarint();c=7&O,d=O>>3}if(d--,c===1||c===2)(g+=l.readSVarint())<b&&(b=g),g>M&&(M=g),(y+=l.readSVarint())<E&&(E=y),y>P&&(P=y);else if(c!==7)throw new Error("unknown command "+c)}return[b,E,M,P]},Wm.prototype.toGeoJSON=function(l,o,c){var d,g,y=this.extent*Math.pow(2,c),b=this.extent*l,M=this.extent*o,E=this.loadGeometry(),P=Wm.types[this.type];function O(U){for(var q=0;q<U.length;q++){var K=U[q];U[q]=[360*(K.x+b)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(K.y+M)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var F=[];for(d=0;d<E.length;d++)F[d]=E[d][0];O(E=F);break;case 2:for(d=0;d<E.length;d++)O(E[d]);break;case 3:for(E=function(U){var q=U.length;if(q<=1)return[U];for(var K,Q,ae=[],ge=0;ge<q;ge++){var _e=qY(U[ge]);_e!==0&&(Q===void 0&&(Q=_e<0),Q===_e<0?(K&&ae.push(K),K=[U[ge]]):K.push(U[ge]))}return K&&ae.push(K),ae}(E),d=0;d<E.length;d++)for(g=0;g<E[d].length;g++)O(E[d][g])}E.length===1?E=E[0]:P="Multi"+P;var V={type:"Feature",geometry:{type:P,coordinates:E},properties:this.properties};return"id"in this&&(V.id=this.id),V};var ZY=$O,GO=UO;function UO(l,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(XY,this,o),this.length=this._features.length}function XY(l,o,c){l===15?o.version=c.readVarint():l===1?o.name=c.readString():l===5?o.extent=c.readVarint():l===2?o._features.push(c.pos):l===3?o._keys.push(c.readString()):l===4&&o._values.push(function(d){for(var g=null,y=d.readVarint()+d.pos;d.pos<y;){var b=d.readVarint()>>3;g=b===1?d.readString():b===2?d.readFloat():b===3?d.readDouble():b===4?d.readVarint64():b===5?d.readVarint():b===6?d.readSVarint():b===7?d.readBoolean():null}return g}(c))}UO.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var o=this._pbf.readVarint()+this._pbf.pos;return new ZY(this._pbf,o,this.extent,this._keys,this._values)};var YY=GO;function KY(l,o,c){if(l===3){var d=new YY(c,c.readVarint()+c.pos);d.length&&(o[d.name]=d)}}var NM=$1.VectorTile=function(l,o){this.layers=l.readFields(KY,{},o)},G1=$1.VectorTileFeature=$O;function U1(l,o,c,d){const g=[],y=d===0?(b,M,E,P,O,F)=>{b.push(new H(F,E+(F-M)/(P-M)*(O-E)))}:(b,M,E,P,O,F)=>{b.push(new H(M+(F-E)/(O-E)*(P-M),F))};for(const b of l){const M=[];for(const E of b){if(E.length<=2)continue;const P=[];for(let V=0;V<E.length-1;V++){const U=E[V].x,q=E[V].y,K=E[V+1].x,Q=E[V+1].y,ae=d===0?U:q,ge=d===0?K:Q;ae<o?ge>o&&y(P,U,q,K,Q,o):ae>c?ge<c&&y(P,U,q,K,Q,c):P.push(E[V]),ge<o&&ae>=o&&y(P,U,q,K,Q,o),ge>c&&ae<=c&&y(P,U,q,K,Q,c)}let O=E[E.length-1];const F=d===0?O.x:O.y;F>=o&&F<=c&&P.push(O),P.length&&(O=P[P.length-1],P[0].x===O.x&&P[0].y===O.y||P.push(P[0]),M.push(P))}M.length&&g.push(M)}return g}$1.VectorTileLayer=GO;class jO{constructor(o){this._stringToNumber={},this._numberToString=[];for(let c=0;c<o.length;c++){const d=o[c];this._stringToNumber[d]=c,this._numberToString[c]=d}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}var JY={read:function(l,o,c,d,g){var y,b,M=8*g-d-1,E=(1<<M)-1,P=E>>1,O=-7,F=c?g-1:0,V=c?-1:1,U=l[o+F];for(F+=V,y=U&(1<<-O)-1,U>>=-O,O+=M;O>0;y=256*y+l[o+F],F+=V,O-=8);for(b=y&(1<<-O)-1,y>>=-O,O+=d;O>0;b=256*b+l[o+F],F+=V,O-=8);if(y===0)y=1-P;else{if(y===E)return b?NaN:1/0*(U?-1:1);b+=Math.pow(2,d),y-=P}return(U?-1:1)*b*Math.pow(2,y-d)},write:function(l,o,c,d,g,y){var b,M,E,P=8*y-g-1,O=(1<<P)-1,F=O>>1,V=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=d?0:y-1,q=d?1:-1,K=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(M=isNaN(o)?1:0,b=O):(b=Math.floor(Math.log(o)/Math.LN2),o*(E=Math.pow(2,-b))<1&&(b--,E*=2),(o+=b+F>=1?V/E:V*Math.pow(2,1-F))*E>=2&&(b++,E/=2),b+F>=O?(M=0,b=O):b+F>=1?(M=(o*E-1)*Math.pow(2,g),b+=F):(M=o*Math.pow(2,F-1)*Math.pow(2,g),b=0));g>=8;l[c+U]=255&M,U+=q,M/=256,g-=8);for(b=b<<g|M,P+=g;P>0;l[c+U]=255&b,U+=q,b/=256,P-=8);l[c+U-q]|=128*K}},HO=fn,j1=JY;function fn(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}fn.Varint=0,fn.Fixed64=1,fn.Bytes=2,fn.Fixed32=5;var VM=4294967296,WO=1/VM,qO=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function zc(l){return l.type===fn.Bytes?l.readVarint()+l.pos:l.pos+1}function qm(l,o,c){return c?4294967296*o+(l>>>0):4294967296*(o>>>0)+(l>>>0)}function ZO(l,o,c){var d=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));c.realloc(d);for(var g=c.pos-1;g>=l;g--)c.buf[g+d]=c.buf[g]}function QY(l,o){for(var c=0;c<l.length;c++)o.writeVarint(l[c])}function eK(l,o){for(var c=0;c<l.length;c++)o.writeSVarint(l[c])}function tK(l,o){for(var c=0;c<l.length;c++)o.writeFloat(l[c])}function rK(l,o){for(var c=0;c<l.length;c++)o.writeDouble(l[c])}function iK(l,o){for(var c=0;c<l.length;c++)o.writeBoolean(l[c])}function nK(l,o){for(var c=0;c<l.length;c++)o.writeFixed32(l[c])}function aK(l,o){for(var c=0;c<l.length;c++)o.writeSFixed32(l[c])}function oK(l,o){for(var c=0;c<l.length;c++)o.writeFixed64(l[c])}function sK(l,o){for(var c=0;c<l.length;c++)o.writeSFixed64(l[c])}function H1(l,o){return(l[o]|l[o+1]<<8|l[o+2]<<16)+16777216*l[o+3]}function Zm(l,o,c){l[c]=o,l[c+1]=o>>>8,l[c+2]=o>>>16,l[c+3]=o>>>24}function XO(l,o){return(l[o]|l[o+1]<<8|l[o+2]<<16)+(l[o+3]<<24)}fn.prototype={destroy:function(){this.buf=null},readFields:function(l,o,c){for(c=c||this.length;this.pos<c;){var d=this.readVarint(),g=d>>3,y=this.pos;this.type=7&d,l(g,o,this),this.pos===y&&this.skip(d)}return o},readMessage:function(l,o){return this.readFields(l,o,this.readVarint()+this.pos)},readFixed32:function(){var l=H1(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=XO(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=H1(this.buf,this.pos)+H1(this.buf,this.pos+4)*VM;return this.pos+=8,l},readSFixed64:function(){var l=H1(this.buf,this.pos)+XO(this.buf,this.pos+4)*VM;return this.pos+=8,l},readFloat:function(){var l=j1.read(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=j1.read(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var o,c,d=this.buf;return o=127&(c=d[this.pos++]),c<128?o:(o|=(127&(c=d[this.pos++]))<<7,c<128?o:(o|=(127&(c=d[this.pos++]))<<14,c<128?o:(o|=(127&(c=d[this.pos++]))<<21,c<128?o:function(g,y,b){var M,E,P=b.buf;if(M=(112&(E=P[b.pos++]))>>4,E<128||(M|=(127&(E=P[b.pos++]))<<3,E<128)||(M|=(127&(E=P[b.pos++]))<<10,E<128)||(M|=(127&(E=P[b.pos++]))<<17,E<128)||(M|=(127&(E=P[b.pos++]))<<24,E<128)||(M|=(1&(E=P[b.pos++]))<<31,E<128))return qm(g,M,y);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(c=d[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var l=this.readVarint()+this.pos,o=this.pos;return this.pos=l,l-o>=12&&qO?function(c,d,g){return qO.decode(c.subarray(d,g))}(this.buf,o,l):function(c,d,g){for(var y="",b=d;b<g;){var M,E,P,O=c[b],F=null,V=O>239?4:O>223?3:O>191?2:1;if(b+V>g)break;V===1?O<128&&(F=O):V===2?(192&(M=c[b+1]))==128&&(F=(31&O)<<6|63&M)<=127&&(F=null):V===3?(E=c[b+2],(192&(M=c[b+1]))==128&&(192&E)==128&&((F=(15&O)<<12|(63&M)<<6|63&E)<=2047||F>=55296&&F<=57343)&&(F=null)):V===4&&(E=c[b+2],P=c[b+3],(192&(M=c[b+1]))==128&&(192&E)==128&&(192&P)==128&&((F=(15&O)<<18|(63&M)<<12|(63&E)<<6|63&P)<=65535||F>=1114112)&&(F=null)),F===null?(F=65533,V=1):F>65535&&(F-=65536,y+=String.fromCharCode(F>>>10&1023|55296),F=56320|1023&F),y+=String.fromCharCode(F),b+=V}return y}(this.buf,o,l)},readBytes:function(){var l=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,l);return this.pos=l,o},readPackedVarint:function(l,o){if(this.type!==fn.Bytes)return l.push(this.readVarint(o));var c=zc(this);for(l=l||[];this.pos<c;)l.push(this.readVarint(o));return l},readPackedSVarint:function(l){if(this.type!==fn.Bytes)return l.push(this.readSVarint());var o=zc(this);for(l=l||[];this.pos<o;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==fn.Bytes)return l.push(this.readBoolean());var o=zc(this);for(l=l||[];this.pos<o;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==fn.Bytes)return l.push(this.readFloat());var o=zc(this);for(l=l||[];this.pos<o;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==fn.Bytes)return l.push(this.readDouble());var o=zc(this);for(l=l||[];this.pos<o;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==fn.Bytes)return l.push(this.readFixed32());var o=zc(this);for(l=l||[];this.pos<o;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==fn.Bytes)return l.push(this.readSFixed32());var o=zc(this);for(l=l||[];this.pos<o;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==fn.Bytes)return l.push(this.readFixed64());var o=zc(this);for(l=l||[];this.pos<o;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==fn.Bytes)return l.push(this.readSFixed64());var o=zc(this);for(l=l||[];this.pos<o;)l.push(this.readSFixed64());return l},skip:function(l){var o=7&l;if(o===fn.Varint)for(;this.buf[this.pos++]>127;);else if(o===fn.Bytes)this.pos=this.readVarint()+this.pos;else if(o===fn.Fixed32)this.pos+=4;else{if(o!==fn.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(l,o){this.writeVarint(l<<3|o)},realloc:function(l){for(var o=this.length||16;o<this.pos+l;)o*=2;if(o!==this.length){var c=new Uint8Array(o);c.set(this.buf),this.buf=c,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),Zm(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),Zm(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),Zm(this.buf,-1&l,this.pos),Zm(this.buf,Math.floor(l*WO),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),Zm(this.buf,-1&l,this.pos),Zm(this.buf,Math.floor(l*WO),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(o,c){var d,g;if(o>=0?(d=o%4294967296|0,g=o/4294967296|0):(g=~(-o/4294967296),4294967295^(d=~(-o%4294967296))?d=d+1|0:(d=0,g=g+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),function(y,b,M){M.buf[M.pos++]=127&y|128,y>>>=7,M.buf[M.pos++]=127&y|128,y>>>=7,M.buf[M.pos++]=127&y|128,y>>>=7,M.buf[M.pos++]=127&y|128,M.buf[M.pos]=127&(y>>>=7)}(d,0,c),function(y,b){var M=(7&y)<<4;b.buf[b.pos++]|=M|((y>>>=3)?128:0),y&&(b.buf[b.pos++]=127&y|((y>>>=7)?128:0),y&&(b.buf[b.pos++]=127&y|((y>>>=7)?128:0),y&&(b.buf[b.pos++]=127&y|((y>>>=7)?128:0),y&&(b.buf[b.pos++]=127&y|((y>>>=7)?128:0),y&&(b.buf[b.pos++]=127&y)))))}(g,c)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(Boolean(l))},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var o=this.pos;this.pos=function(d,g,y){for(var b,M,E=0;E<g.length;E++){if((b=g.charCodeAt(E))>55295&&b<57344){if(!M){b>56319||E+1===g.length?(d[y++]=239,d[y++]=191,d[y++]=189):M=b;continue}if(b<56320){d[y++]=239,d[y++]=191,d[y++]=189,M=b;continue}b=M-55296<<10|b-56320|65536,M=null}else M&&(d[y++]=239,d[y++]=191,d[y++]=189,M=null);b<128?d[y++]=b:(b<2048?d[y++]=b>>6|192:(b<65536?d[y++]=b>>12|224:(d[y++]=b>>18|240,d[y++]=b>>12&63|128),d[y++]=b>>6&63|128),d[y++]=63&b|128)}return y}(this.buf,l,this.pos);var c=this.pos-o;c>=128&&ZO(o,c,this),this.pos=o-1,this.writeVarint(c),this.pos+=c},writeFloat:function(l){this.realloc(4),j1.write(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),j1.write(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var o=l.length;this.writeVarint(o),this.realloc(o);for(var c=0;c<o;c++)this.buf[this.pos++]=l[c]},writeRawMessage:function(l,o){this.pos++;var c=this.pos;l(o,this);var d=this.pos-c;d>=128&&ZO(c,d,this),this.pos=c-1,this.writeVarint(d),this.pos+=d},writeMessage:function(l,o,c){this.writeTag(l,fn.Bytes),this.writeRawMessage(o,c)},writePackedVarint:function(l,o){o.length&&this.writeMessage(l,QY,o)},writePackedSVarint:function(l,o){o.length&&this.writeMessage(l,eK,o)},writePackedBoolean:function(l,o){o.length&&this.writeMessage(l,iK,o)},writePackedFloat:function(l,o){o.length&&this.writeMessage(l,tK,o)},writePackedDouble:function(l,o){o.length&&this.writeMessage(l,rK,o)},writePackedFixed32:function(l,o){o.length&&this.writeMessage(l,nK,o)},writePackedSFixed32:function(l,o){o.length&&this.writeMessage(l,aK,o)},writePackedFixed64:function(l,o){o.length&&this.writeMessage(l,oK,o)},writePackedSFixed64:function(l,o){o.length&&this.writeMessage(l,sK,o)},writeBytesField:function(l,o){this.writeTag(l,fn.Bytes),this.writeBytes(o)},writeFixed32Field:function(l,o){this.writeTag(l,fn.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(l,o){this.writeTag(l,fn.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(l,o){this.writeTag(l,fn.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(l,o){this.writeTag(l,fn.Fixed64),this.writeSFixed64(o)},writeVarintField:function(l,o){this.writeTag(l,fn.Varint),this.writeVarint(o)},writeSVarintField:function(l,o){this.writeTag(l,fn.Varint),this.writeSVarint(o)},writeStringField:function(l,o){this.writeTag(l,fn.Bytes),this.writeString(o)},writeFloatField:function(l,o){this.writeTag(l,fn.Fixed32),this.writeFloat(o)},writeDoubleField:function(l,o){this.writeTag(l,fn.Fixed64),this.writeDouble(o)},writeBooleanField:function(l,o){this.writeVarintField(l,Boolean(o))}};var W1=z(HO);const lK=["tile","layer","source","sourceLayer","state"];class YO{constructor(o,c,d,g,y){this.type="Feature",this._vectorTileFeature=o,this._z=c,this._x=d,this._y=g,this.properties=o.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(o.id=this.id);for(const c of lK)this[c]!==void 0&&(o[c]=this[c]);return o}}class uK{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,c,d){const g=String(c);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][g]=this.stateChanges[o][g]||{},ht(this.stateChanges[o][g],d),this.deletedStates[o]===null){this.deletedStates[o]={};for(const y in this.state[o])y!==g&&(this.deletedStates[o][y]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][g]===null){this.deletedStates[o][g]={};for(const y in this.state[o][g])d[y]||(this.deletedStates[o][g][y]=null)}else for(const y in d)this.deletedStates[o]&&this.deletedStates[o][g]&&this.deletedStates[o][g][y]===null&&delete this.deletedStates[o][g][y]}removeFeatureState(o,c,d){if(this.deletedStates[o]===null)return;const g=String(c);if(this.deletedStates[o]=this.deletedStates[o]||{},d&&c!==void 0)this.deletedStates[o][g]!==null&&(this.deletedStates[o][g]=this.deletedStates[o][g]||{},this.deletedStates[o][g][d]=null);else if(c!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][g])for(d in this.deletedStates[o][g]={},this.stateChanges[o][g])this.deletedStates[o][g][d]=null;else this.deletedStates[o][g]=null;else this.deletedStates[o]=null}getState(o,c){const d=String(c),g=ht({},(this.state[o]||{})[d],(this.stateChanges[o]||{})[d]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const y=this.deletedStates[o][c];if(y===null)return{};for(const b in y)delete g[b]}return g}initializeTileState(o,c){o.setFeatureState(this.state,c)}coalesceChanges(o,c){const d={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const y={};for(const b in this.stateChanges[g])this.state[g][b]||(this.state[g][b]={}),ht(this.state[g][b],this.stateChanges[g][b]),y[b]=this.state[g][b];d[g]=y}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const y={};if(this.deletedStates[g]===null)for(const b in this.state[g])y[b]={},this.state[g][b]={};else for(const b in this.deletedStates[g]){if(this.deletedStates[g][b]===null)this.state[g][b]={};else if(this.state[g][b])for(const M of Object.keys(this.deletedStates[g][b]))delete this.state[g][b][M];y[b]=this.state[g][b]}d[g]=d[g]||{},ht(d[g],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const g in o)o[g].setFeatureState(d,c)}}class KO{constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,c){const d=this.toIdx(o,c);return{min:this.minimums[d],max:this.maximums[d]}}isLeaf(o,c){return this.leaves[this.toIdx(o,c)]}toIdx(o,c){return c*this.size+o}}function JO(l,o,c,d){let g=0,y=Number.MAX_VALUE;for(let b=0;b<3;b++)if(Math.abs(d[b])<1e-15){if(c[b]<l[b]||c[b]>o[b])return null}else{const M=1/d[b];let E=(l[b]-c[b])*M,P=(o[b]-c[b])*M;if(E>P){const O=E;E=P,P=O}if(E>g&&(g=E),P<y&&(y=P),g>y)return null}return g}function QO(l,o,c,d,g,y,b,M,E,P,O){const F=d-l,V=g-o,U=y-c,q=b-l,K=M-o,Q=E-c,ae=O[1]*Q-O[2]*K,ge=O[2]*q-O[0]*Q,_e=O[0]*K-O[1]*q,be=F*ae+V*ge+U*_e;if(Math.abs(be)<1e-15)return null;const Ae=1/be,Pe=P[0]-l,Ge=P[1]-o,Ke=P[2]-c,rt=(Pe*ae+Ge*ge+Ke*_e)*Ae;if(rt<0||rt>1)return null;const ft=Ge*U-Ke*V,st=Ke*F-Pe*U,It=Pe*V-Ge*F,Ut=(O[0]*ft+O[1]*st+O[2]*It)*Ae;return Ut<0||rt+Ut>1?null:(q*ft+K*st+Q*It)*Ae}function ez(l,o,c){return(l-o)/(c-o)}function tz(l,o,c,d,g,y,b,M,E){const P=1<<c,O=y-d,F=b-g,V=(l+1)/P*O+d,U=(o+0)/P*F+g,q=(o+1)/P*F+g;M[0]=(l+0)/P*O+d,M[1]=U,E[0]=V,E[1]=q}class rz{constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const c=function(y){const b=Math.ceil(Math.log2(y.dim/8)),M=[];let E=Math.ceil(Math.pow(2,b));const P=1/E,O=(U,q,K,Q,ae)=>{const ge=Q?1:0,_e=(U+1)*K-ge,be=q*K,Ae=(q+1)*K-ge;ae[0]=U*K,ae[1]=be,ae[2]=_e,ae[3]=Ae};let F=new KO(E);const V=[];for(let U=0;U<E*E;U++){O(U%E,Math.floor(U/E),P,!1,V);const q=Fh(V[0],V[1],y),K=Fh(V[2],V[1],y),Q=Fh(V[2],V[3],y),ae=Fh(V[0],V[3],y);F.minimums.push(Math.min(q,K,Q,ae)),F.maximums.push(Math.max(q,K,Q,ae)),F.leaves.push(1)}for(M.push(F),E/=2;E>=1;E/=2){const U=M[M.length-1];F=new KO(E);for(let q=0;q<E*E;q++){O(q%E,Math.floor(q/E),2,!0,V);const K=U.getElevation(V[0],V[1]),Q=U.getElevation(V[2],V[1]),ae=U.getElevation(V[2],V[3]),ge=U.getElevation(V[0],V[3]),_e=U.isLeaf(V[0],V[1]),be=U.isLeaf(V[2],V[1]),Ae=U.isLeaf(V[2],V[3]),Pe=U.isLeaf(V[0],V[3]),Ge=Math.min(K.min,Q.min,ae.min,ge.min),Ke=Math.max(K.max,Q.max,ae.max,ge.max),rt=_e&&be&&Ae&&Pe;F.maximums.push(Ke),F.minimums.push(Ge),F.leaves.push(Ke-Ge<=5&&rt?1:0)}M.push(F)}return M}(this.dem),d=c.length-1,g=c[d];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(c,0,0,d,0)}raycastRoot(o,c,d,g,y,b,M=1){return JO([o,c,-100],[d,g,this.maximums[0]*M],y,b)}raycast(o,c,d,g,y,b,M=1){if(!this.nodeCount)return null;const E=this.raycastRoot(o,c,d,g,y,b,M);if(E==null)return null;const P=[],O=[],F=[],V=[],U=[{idx:0,t:E,nodex:0,nodey:0,depth:0}];for(;U.length>0;){const{idx:q,t:K,nodex:Q,nodey:ae,depth:ge}=U.pop();if(this.leaves[q]){tz(Q,ae,ge,o,c,d,g,F,V);const be=1<<ge,Ae=(Q+0)/be,Pe=(Q+1)/be,Ge=(ae+0)/be,Ke=(ae+1)/be,rt=Fh(Ae,Ge,this.dem)*M,ft=Fh(Pe,Ge,this.dem)*M,st=Fh(Pe,Ke,this.dem)*M,It=Fh(Ae,Ke,this.dem)*M,Ut=QO(F[0],F[1],rt,V[0],F[1],ft,V[0],V[1],st,y,b),Tt=QO(V[0],V[1],st,F[0],V[1],It,F[0],F[1],rt,y,b),Bt=Math.min(Ut!==null?Ut:Number.MAX_VALUE,Tt!==null?Tt:Number.MAX_VALUE);if(Bt!==Number.MAX_VALUE)return Bt;{const wt=a.v.scaleAndAdd([],y,b,K);if(iz(rt,ft,It,st,ez(wt[0],F[0],V[0]),ez(wt[1],F[1],V[1]))>=wt[2])return K}continue}let _e=0;for(let be=0;be<this._siblingOffset.length;be++){tz((Q<<1)+this._siblingOffset[be][0],(ae<<1)+this._siblingOffset[be][1],ge+1,o,c,d,g,F,V),F[2]=-100,V[2]=this.maximums[this.childOffsets[q]+be]*M;const Ae=JO(F,V,y,b);if(Ae!=null){const Pe=Ae;P[be]=Pe;let Ge=!1;for(let Ke=0;Ke<_e&&!Ge;Ke++)Pe>=P[O[Ke]]&&(O.splice(Ke,0,be),Ge=!0);Ge||(O[_e]=be),_e++}}for(let be=0;be<_e;be++){const Ae=O[be];U.push({idx:this.childOffsets[q]+Ae,t:P[Ae],nodex:(Q<<1)+this._siblingOffset[Ae][0],nodey:(ae<<1)+this._siblingOffset[Ae][1],depth:ge+1})}}return null}_addNode(o,c,d){return this.minimums.push(o),this.maximums.push(c),this.leaves.push(d),this.childOffsets.push(0),this.nodeCount++}_construct(o,c,d,g,y){if(o[g].isLeaf(c,d)===1)return;this.childOffsets[y]||(this.childOffsets[y]=this.nodeCount);const b=g-1,M=o[b];let E=0,P=0;for(let O=0;O<this._siblingOffset.length;O++){const F=2*c+this._siblingOffset[O][0],V=2*d+this._siblingOffset[O][1],U=M.getElevation(F,V),q=M.isLeaf(F,V),K=this._addNode(U.min,U.max,q);q&&(E|=1<<O),P||(P=K)}for(let O=0;O<this._siblingOffset.length;O++)E&1<<O||this._construct(o,2*c+this._siblingOffset[O][0],2*d+this._siblingOffset[O][1],b,P+O)}}function iz(l,o,c,d,g,y){return si(si(l,c,y),si(o,d,y),g)}function Fh(l,o,c){const d=c.dim,g=Ce(l*d-.5,0,d-1),y=Ce(o*d-.5,0,d-1),b=Math.floor(g),M=Math.floor(y),E=Math.min(b+1,d-1),P=Math.min(M+1,d-1);return iz(c.get(b,M),c.get(E,M),c.get(b,P),c.get(E,P),g-b,y-M)}const cK={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function hK(l,o,c){return(256*l*256+256*o+c)/10-1e4}function dK(l,o,c){return 256*l+o+c/256-32768}class q1{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,c,d,g=!1){if(this.uid=o,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return Ue(`"${d}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=c.height;const y=this.dim=c.height-2,b=new Uint32Array(c.data.buffer);if(this.pixels=new Uint8Array(c.data.buffer),this.floatView=new Float32Array(c.data.buffer),this.borderReady=g,this._modifiedForSources={},!g){for(let E=0;E<y;E++)b[this._idx(-1,E)]=b[this._idx(0,E)],b[this._idx(y,E)]=b[this._idx(y-1,E)],b[this._idx(E,-1)]=b[this._idx(E,0)],b[this._idx(E,y)]=b[this._idx(E,y-1)];b[this._idx(-1,-1)]=b[this._idx(0,0)],b[this._idx(y,-1)]=b[this._idx(y-1,0)],b[this._idx(-1,y)]=b[this._idx(0,y-1)],b[this._idx(y,y)]=b[this._idx(y-1,y-1)]}const M=d==="terrarium"?dK:hK;for(let E=0;E<b.length;++E){const P=4*E;this.floatView[E]=M(this.pixels[P],this.pixels[P+1],this.pixels[P+2])}this._timestamp=ma.now()}_buildQuadTree(){this._tree=new rz(this)}get(o,c,d=!1){d&&(o=Ce(o,-1,this.dim),c=Ce(c,-1,this.dim));const g=this._idx(o,c);return this.floatView[g]}set(o,c,d){const g=this._idx(o,c),y=this.floatView[g];return this.floatView[g]=d,d-y}static getUnpackVector(o){return cK[o]}_idx(o,c){if(o<-1||o>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(o+1)}static pack(o,c){const d=[0,0,0,0],g=q1.getUnpackVector(c);let y=Math.floor((o+g[3])/g[2]);return d[2]=y%256,y=Math.floor(y/256),d[1]=y%256,y=Math.floor(y/256),d[0]=y,d}getPixels(){return new zO({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,c,d){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let g=c*this.dim,y=c*this.dim+this.dim,b=d*this.dim,M=d*this.dim+this.dim;switch(c){case-1:g=y-1;break;case 1:y=g+1}switch(d){case-1:b=M-1;break;case 1:M=b+1}const E=-c*this.dim,P=-d*this.dim;for(let O=b;O<M;O++)for(let F=g;F<y;F++){const V=4*this._idx(F,O),U=4*this._idx(F+E,O+P);this.pixels[V+0]=o.pixels[U+0],this.pixels[V+1]=o.pixels[U+1],this.pixels[V+2]=o.pixels[U+2],this.pixels[V+3]=o.pixels[U+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}hr(q1,"DEMData"),hr(rz,"DemMinMaxQuadTree",{omit:["dem"]});class Xm{constructor(o,c,d){this._demTile=o,this._dem=this._demTile.dem,this._scale=c,this._offset=d}static create(o,c,d){const g=d||o.findDEMTileFor(c);if(!g||!g.dem)return;const y=g.dem,b=g.tileID,M=1<<c.canonical.z-b.canonical.z;return new Xm(g,y.dim/tr/M,[(c.canonical.x/M-b.canonical.x)*y.dim,(c.canonical.y/M-b.canonical.y)*y.dim])}tileCoordToPixel(o,c){const d=c*this._scale+this._offset[1],g=Math.floor(o*this._scale+this._offset[0]),y=Math.floor(d);return new H(g,y)}getElevationAt(o,c,d,g){const y=o*this._scale+this._offset[0],b=c*this._scale+this._offset[1],M=Math.floor(y),E=Math.floor(b),P=this._dem;return g=!!g,d?si(si(P.get(M,E,g),P.get(M,E+1,g),b-E),si(P.get(M+1,E,g),P.get(M+1,E+1,g),b-E),y-M):P.get(M,E,g)}getElevationAtPixel(o,c,d){return this._dem.get(o,c,!!d)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*mo(1,o)*this._dem.stride}}class $M{constructor(o,c){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Ph(tr,16,0),this.featureIndexArray=new kR,this.promoteId=c}insert(o,c,d,g,y,b=0){const M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,g,y,b);const E=this.grid;for(let P=0;P<c.length;P++){const O=c[P],F=[1/0,1/0,-1/0,-1/0];for(let V=0;V<O.length;V++){const U=O[V];F[0]=Math.min(F[0],U.x),F[1]=Math.min(F[1],U.y),F[2]=Math.max(F[2],U.x),F[3]=Math.max(F[3],U.y)}F[0]<tr&&F[1]<tr&&F[2]>=0&&F[3]>=0&&E.insert(M,F[0],F[1],F[2],F[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new NM(new W1(this.rawTileData)).layers,this.sourceLayerCoder=new jO(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,c,d,g){this.loadVTLayers();const y=o.params||{},b=Rm(y.filter),M=o.tileResult,E=o.transform,P=M.bufferedTilespaceBounds,O=this.grid.query(P.min.x,P.min.y,P.max.x,P.max.y,(q,K,Q,ae)=>CO(M.bufferedTilespaceGeometry,q,K,Q,ae));O.sort(fK);let F=null;E.elevation&&O.length>0&&(F=Xm.create(E.elevation,this.tileID));const V={};let U;for(let q=0;q<O.length;q++){const K=O[q];if(K===U)continue;U=K;const Q=this.featureIndexArray.get(K);let ae=null;this.loadMatchingFeature(V,Q,b,y.layers,y.availableImages,c,d,g,(ge,_e,be,Ae=0)=>(ae||(ae=Iu(ge,this.tileID.canonical,o.tileTransform)),_e.queryIntersectsFeature(M,ge,be,ae,this.z,o.transform,o.pixelPosMatrix,F,Ae)))}return V}loadMatchingFeature(o,c,d,g,y,b,M,E,P){const{featureIndex:O,bucketIndex:F,sourceLayerIndex:V,layoutVertexArrayOffset:U}=c,q=this.bucketLayerIDs[F];if(g&&!function(ge,_e){for(let be=0;be<ge.length;be++)if(_e.indexOf(ge[be])>=0)return!0;return!1}(g,q))return;const K=this.sourceLayerCoder.decode(V),Q=this.vtLayers[K].feature(O);if(d.needGeometry){const ge=Bh(Q,!0);if(!d.filter(new Ne(this.tileID.overscaledZ),ge,this.tileID.canonical))return}else if(!d.filter(new Ne(this.tileID.overscaledZ),Q))return;const ae=this.getId(Q,K);for(let ge=0;ge<q.length;ge++){const _e=q[ge];if(g&&g.indexOf(_e)<0)continue;const be=b[_e];if(!be)continue;let Ae={};ae!==void 0&&E&&(Ae=E.getState(be.sourceLayer||"_geojsonTileLayer",ae));const Pe=ht({},M[_e]);Pe.paint=nz(Pe.paint,be.paint,Q,Ae,y),Pe.layout=nz(Pe.layout,be.layout,Q,Ae,y);const Ge=!P||P(Q,be,Ae,U);if(!Ge)continue;const Ke=new YO(Q,this.z,this.x,this.y,ae);Ke.layer=Pe;let rt=o[_e];rt===void 0&&(rt=o[_e]=[]),rt.push({featureIndex:O,feature:Ke,intersectionZ:Ge})}}lookupSymbolFeatures(o,c,d,g,y,b,M,E){const P={};this.loadVTLayers();const O=Rm(y);for(const F of o)this.loadMatchingFeature(P,{bucketIndex:d,sourceLayerIndex:g,featureIndex:F,layoutVertexArrayOffset:0},O,b,M,E,c);return P}loadFeature(o){const{featureIndex:c,sourceLayerIndex:d}=o;this.loadVTLayers();const g=this.sourceLayerCoder.decode(d),y=this.vtFeatures[g];if(y[c])return y[c];const b=this.vtLayers[g].feature(c);return y[c]=b,b}hasLayer(o){for(const c of this.bucketLayerIDs)for(const d of c)if(o===d)return!0;return!1}getId(o,c){let d=o.id;if(this.promoteId){const g=typeof this.promoteId=="string"?this.promoteId:this.promoteId[c];g!=null&&(d=o.properties[g]),typeof d=="boolean"&&(d=Number(d))}return d}}function nz(l,o,c,d,g){return Et(l,(y,b)=>{const M=o instanceof Dt?o.get(b):null;return M&&M.evaluate?M.evaluate(c,d,g):M})}function fK(l,o){return o-l}hr($M,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const pK=_r([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mK=_r([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),gK=_r([{name:"a_projected_pos",components:4,type:"Float32"}],4);_r([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const vK=_r([{name:"a_z_offset",components:1,type:"Float32"}],4),_K=_r([{name:"a_texb",components:2,type:"Uint16"}]),yK=_r([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),xK=_r([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_z_offset",components:1,type:"Float32"}]);_r([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const az=_r([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),bK=_r([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);_r([{name:"triangle",components:3,type:"Uint16"}]),_r([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),_r([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),_r([{type:"Float32",name:"offsetX"}]),_r([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Ea=24;const Bl=128;function GM(l,o){const{expression:c}=o;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new Ne(l+1))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:g}=c;let y=0;for(;y<d.length&&d[y]<=l;)y++;y=Math.max(0,y-1);let b=y;for(;b<d.length&&d[b]<l+1;)b++;b=Math.min(d.length-1,b);const M=d[y],E=d[b];return c.kind==="composite"?{kind:"composite",minZoom:M,maxZoom:E,interpolationType:g}:{kind:"camera",minZoom:M,maxZoom:E,minSize:c.evaluate(new Ne(M)),maxSize:c.evaluate(new Ne(E)),interpolationType:g}}}function Z1(l,{uSize:o,uSizeT:c},{lowerSize:d,upperSize:g}){return l.kind==="source"?d/Bl:l.kind==="composite"?si(d/Bl,g/Bl,c):o}function Ym(l,o){let c=0,d=0;if(l.kind==="constant")d=l.layoutSize;else if(l.kind!=="source"){const{interpolationType:g,minZoom:y,maxZoom:b}=l,M=g?Ce(ys.interpolationFactor(g,o,y,b),0,1):0;l.kind==="camera"?d=si(l.minSize,l.maxSize,M):c=M}return{uSizeT:c,uSize:d}}var wK=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Bl,evaluateSizeForFeature:Z1,evaluateSizeForZoom:Ym,getSizeData:GM});function SK(l,o,c){return l.sections.forEach(d=>{d.text=function(g,y,b){const M=y.layout.get("text-transform").evaluate(b,{});return M==="uppercase"?g=g.toLocaleUpperCase():M==="lowercase"&&(g=g.toLocaleLowerCase()),je.applyArabicShaping&&(g=je.applyArabicShaping(g)),g}(d.text,o,c)}),l}const V_={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42","\u2190":"\u2191","\u2192":"\u2193"};function TK(l){return l==="\uFE36"||l==="\uFE48"||l==="\uFE38"||l==="\uFE44"||l==="\uFE42"||l==="\uFE3E"||l==="\uFE3C"||l==="\uFE3A"||l==="\uFE18"||l==="\uFE40"||l==="\uFE10"||l==="\uFE13"||l==="\uFE14"||l==="\uFF40"||l==="\uFFE3"||l==="\uFE11"||l==="\uFE12"}function MK(l){return l==="\uFE35"||l==="\uFE47"||l==="\uFE37"||l==="\uFE43"||l==="\uFE41"||l==="\uFE3D"||l==="\uFE3B"||l==="\uFE39"||l==="\uFE17"||l==="\uFE3F"}const UM=3;function AK(l,o,c){o.glyphs=[],l===1&&c.readMessage(CK,o)}function CK(l,o,c){if(l===3){const{id:d,bitmap:g,width:y,height:b,left:M,top:E,advance:P}=c.readMessage(IK,{});o.glyphs.push({id:d,bitmap:new Oc({width:y+2*UM,height:b+2*UM},g),metrics:{width:y,height:b,left:M,top:E,advance:P}})}else l===4?o.ascender=c.readSVarint():l===5&&(o.descender=c.readSVarint())}function IK(l,o,c){l===1?o.id=c.readVarint():l===2?o.bitmap=c.readBytes():l===3?o.width=c.readVarint():l===4?o.height=c.readVarint():l===5?o.left=c.readSVarint():l===6?o.top=c.readSVarint():l===7&&(o.advance=c.readVarint())}const oz=UM,Cs={horizontal:1,vertical:2,horizontalOnly:3},sz=-17;class $_{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,c){const d=new $_;return d.scale=o||1,d.fontStack=c,d}static forImage(o){const c=new $_;return c.imageName=o,c}}class Km{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,c){const d=new Km;for(let g=0;g<o.sections.length;g++){const y=o.sections[g];y.image?d.addImageSection(y):d.addTextSection(y,c)}return d}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCodePoint(o){return this.text.codePointAt(o)}verticalizePunctuation(o){this.text=function(c,d){let g="";for(let y=0;y<c.length;y++){const b=c.charCodeAt(y+1)||null,M=c.charCodeAt(y-1)||null;g+=!d&&(b&&X(b)&&!V_[c[y+1]]||M&&X(M)&&!V_[c[y-1]])||!V_[c[y]]?c[y]:V_[c[y]]}return g}(this.text,o)}trim(){let o=0;for(let d=0;d<this.text.length&&X1[this.text.charCodeAt(d)];d++)o++;let c=this.text.length;for(let d=this.text.length-1;d>=0&&d>=o&&X1[this.text.charCodeAt(d)];d--)c--;this.text=this.text.substring(o,c),this.sectionIndex=this.sectionIndex.slice(o,c)}substring(o,c){const d=new Km;return d.text=this.text.substring(o,c),d.sectionIndex=this.sectionIndex.slice(o,c),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,c)=>Math.max(o,this.sections[c].scale),0)}addTextSection(o,c){this.text+=o.text,this.sections.push($_.forText(o.scale,o.fontStack||c));const d=this.sections.length-1;for(let g=0;g<o.text.length;++g)this.sectionIndex.push(d)}addImageSection(o){const c=o.image?o.image.namePrimary:"";if(c.length===0)return void Ue("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCodePoint(d),this.sections.push($_.forImage(c)),this.sectionIndex.push(this.sections.length-1)):Ue("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function jM(l,o,c,d,g,y,b,M,E,P,O,F,V,U,q){const K=Km.fromFeature(l,g);F===Cs.vertical&&K.verticalizePunctuation(V);let Q=[];const ae=function(Pe,Ge,Ke,rt,ft,st){if(!Pe)return[];const It=[],Ut=function(nr,cr,$t,Dr,fr,rr){let Pr=0;for(let yr=0;yr<nr.length();yr++){const Ar=nr.getSection(yr);Pr+=lz(nr.getCodePoint(yr),Ar,Dr,fr,cr,rr)}return Pr/Math.max(1,Math.ceil(Pr/$t))}(Pe,Ge,Ke,rt,ft,st),Tt=Pe.text.indexOf("\u200B")>=0;let Bt=0;for(let nr=0;nr<Pe.length();nr++){const cr=Pe.getSection(nr),$t=Pe.getCodePoint(nr);if(X1[$t]||(Bt+=lz($t,cr,rt,ft,Ge,st)),nr<Pe.length()-1){const Dr=!((wt=$t)<11904||!(D["Bopomofo Extended"](wt)||D.Bopomofo(wt)||D["CJK Compatibility Forms"](wt)||D["CJK Compatibility Ideographs"](wt)||D["CJK Compatibility"](wt)||D["CJK Radicals Supplement"](wt)||D["CJK Strokes"](wt)||D["CJK Symbols and Punctuation"](wt)||D["CJK Unified Ideographs Extension A"](wt)||D["CJK Unified Ideographs"](wt)||D["Enclosed CJK Letters and Months"](wt)||D["Halfwidth and Fullwidth Forms"](wt)||D.Hiragana(wt)||D["Ideographic Description Characters"](wt)||D["Kangxi Radicals"](wt)||D["Katakana Phonetic Extensions"](wt)||D.Katakana(wt)||D["Vertical Forms"](wt)||D["Yi Radicals"](wt)||D["Yi Syllables"](wt)));(EK[$t]||Dr||cr.imageName)&&It.push(cz(nr+1,Bt,Ut,It,DK($t,Pe.getCodePoint(nr+1),Dr&&Tt),!1))}}var wt;return hz(cz(Pe.length(),Bt,Ut,It,0,!0))}(K,P,y,o,d,U),{processBidirectionalText:ge,processStyledBidirectionalText:_e}=je;if(ge&&K.sections.length===1){const Pe=ge(K.toString(),ae);for(const Ge of Pe){const Ke=new Km;Ke.text=Ge,Ke.sections=K.sections;for(let rt=0;rt<Ge.length;rt++)Ke.sectionIndex.push(0);Q.push(Ke)}}else if(_e){const Pe=_e(K.text,K.sectionIndex,ae);for(const Ge of Pe){const Ke=new Km;Ke.text=Ge[0],Ke.sectionIndex=Ge[1],Ke.sections=K.sections,Q.push(Ke)}}else Q=function(Pe,Ge){const Ke=[],rt=Pe.text;let ft=0;for(const st of Ge)Ke.push(Pe.substring(ft,st)),ft=st;return ft<rt.length&&Ke.push(Pe.substring(ft,rt.length)),Ke}(K,ae);const be=[],Ae={positionedLines:be,text:K.toString(),top:O[1],bottom:O[1],left:O[0],right:O[0],writingMode:F,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Pe,Ge,Ke,rt,ft,st,It,Ut,Tt,Bt,wt,nr){let cr=0,$t=0,Dr=0;const fr=Ut==="right"?1:Ut==="left"?0:.5;let rr=!1;for(const mi of ft){const qr=mi.getSections();for(const ui of qr){if(ui.imageName)continue;const Ei=Ge[ui.fontStack];if(Ei&&(rr=Ei.ascender!==void 0&&Ei.descender!==void 0,!rr))break}if(!rr)break}let Pr=0;for(const mi of ft){mi.trim();const qr=mi.getMaxScale(),ui=(qr-1)*Ea,Ei={positionedGlyphs:[],lineOffset:0};Pe.positionedLines[Pr]=Ei;const rn=Ei.positionedGlyphs;let ti=0;if(!mi.length()){$t+=st,++Pr;continue}let pn=0,nn=0;for(let Wi=0;Wi<mi.length();Wi++){const Di=mi.getSection(Wi),Ln=mi.getSectionIndex(Wi),mn=mi.getCodePoint(Wi);let Nn=Di.scale,ca=null,go=null,jn=null,On=Ea,Xa=0;const Ya=!(Tt===Cs.horizontal||!wt&&!W(mn)||wt&&(X1[mn]||(yr=mn,D.Arabic(yr)||D["Arabic Supplement"](yr)||D["Arabic Extended-A"](yr)||D["Arabic Presentation Forms-A"](yr)||D["Arabic Presentation Forms-B"](yr))));if(Di.imageName){const vo=rt[Di.imageName];if(!vo)continue;jn=Di.imageName,Pe.iconsInText=Pe.iconsInText||!0,go=vo.paddedRect;const gn=vo.displaySize;Nn=Nn*Ea/nr,ca={width:gn[0],height:gn[1],left:0,top:-oz,advance:Ya?gn[1]:gn[0],localGlyph:!1},Xa=rr?-ca.height*Nn:sz+qr*Ea-gn[1]*Nn,On=ca.advance;const $l=(Ya?gn[0]:gn[1])*Nn-Ea*qr;$l>0&&$l>ti&&(ti=$l)}else{const vo=Ke[Di.fontStack];if(!vo)continue;vo[mn]&&(go=vo[mn]);const gn=Ge[Di.fontStack];if(!gn)continue;const $l=gn.glyphs[mn];if(!$l)continue;if(ca=$l.metrics,On=mn!==8203?Ea:0,rr){const ng=gn.ascender!==void 0?Math.abs(gn.ascender):0,Nc=gn.descender!==void 0?Math.abs(gn.descender):0,Vc=(ng+Nc)*Nn;pn<Vc&&(pn=Vc,nn=(ng-Nc)/2*Nn),Xa=-ng*Nn}else Xa=sz+(qr-Nn)*Ea}Ya?(Pe.verticalizable=!0,rn.push({glyph:mn,imageName:jn,x:cr,y:$t+Xa,vertical:Ya,scale:Nn,localGlyph:ca.localGlyph,fontStack:Di.fontStack,sectionIndex:Ln,metrics:ca,rect:go}),cr+=On*Nn+Bt):(rn.push({glyph:mn,imageName:jn,x:cr,y:$t+Xa,vertical:Ya,scale:Nn,localGlyph:ca.localGlyph,fontStack:Di.fontStack,sectionIndex:Ln,metrics:ca,rect:go}),cr+=ca.advance*Nn+Bt)}rn.length!==0&&(Dr=Math.max(cr-Bt,Dr),rr?dz(rn,fr,ti,nn,st*qr/2):dz(rn,fr,ti,0,st/2)),cr=0;const Ui=st*qr+ti;Ei.lineOffset=Math.max(ti,ui),$t+=Ui,++Pr}var yr;const Ar=$t,{horizontalAlign:Qt,verticalAlign:Fr}=HM(It);(function(mi,qr,ui,Ei,rn,ti){const pn=(qr-ui)*rn,nn=-ti*Ei;for(const Ui of mi)for(const Wi of Ui.positionedGlyphs)Wi.x+=pn,Wi.y+=nn})(Pe.positionedLines,fr,Qt,Fr,Dr,Ar),Pe.top+=-Fr*Ar,Pe.bottom=Pe.top+Ar,Pe.left+=-Qt*Dr,Pe.right=Pe.left+Dr,Pe.hasBaseline=rr}(Ae,o,c,d,Q,b,M,E,F,P,V,q),!function(Pe){for(const Ge of Pe)if(Ge.positionedGlyphs.length!==0)return!1;return!0}(be)&&Ae}const X1={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},EK={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function lz(l,o,c,d,g,y){if(o.imageName){const b=d[o.imageName];return b?b.displaySize[0]*o.scale*Ea/y+g:0}{const b=c[o.fontStack],M=b&&b.glyphs[l];return M?M.metrics.advance*o.scale+g:0}}function uz(l,o,c,d){const g=Math.pow(l-o,2);return d?l<o?g/2:2*g:g+Math.abs(c)*c}function DK(l,o,c){let d=0;return l===10&&(d-=1e4),c&&(d+=150),l!==40&&l!==65288||(d+=50),o!==41&&o!==65289||(d+=50),d}function cz(l,o,c,d,g,y){let b=null,M=uz(o,c,g,y);for(const E of d){const P=uz(o-E.x,c,g,y)+E.badness;P<=M&&(b=E,M=P)}return{index:l,x:o,priorBreak:b,badness:M}}function hz(l){return l?hz(l.priorBreak).concat(l.index):[]}function HM(l){let o=.5,c=.5;switch(l){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:o,verticalAlign:c}}function dz(l,o,c,d,g){if(!(o||c||d||g))return;const y=l.length-1,b=l[y],M=(b.x+b.metrics.advance*b.scale)*o;for(let E=0;E<=y;E++)l[E].x-=M,l[E].y+=c+d+g}function PK(l,o,c,d){const{horizontalAlign:g,verticalAlign:y}=HM(d),b=c[0]-l.displaySize[0]*g,M=c[1]-l.displaySize[1]*y;return{imagePrimary:l,imageSecondary:o,top:M,bottom:M+l.displaySize[1],left:b,right:b+l.displaySize[0]}}function fz(l,o,c,d,g,y){const b=l.imagePrimary;let M;if(b.content){const Q=b.content,ae=b.pixelRatio||1;M=[Q[0]/ae,Q[1]/ae,b.displaySize[0]-Q[2]/ae,b.displaySize[1]-Q[3]/ae]}const E=o.left*y,P=o.right*y;let O,F,V,U;c==="width"||c==="both"?(U=g[0]+E-d[3],F=g[0]+P+d[1]):(U=g[0]+(E+P-b.displaySize[0])/2,F=U+b.displaySize[0]);const q=o.top*y,K=o.bottom*y;return c==="height"||c==="both"?(O=g[1]+q-d[0],V=g[1]+K+d[2]):(O=g[1]+(q+K-b.displaySize[1])/2,V=O+b.displaySize[1]),{imagePrimary:b,imageSecondary:void 0,top:O,right:F,bottom:V,left:U,collisionPadding:M}}class Bc extends H{constructor(o,c,d,g,y){super(o,c),this.angle=g,this.z=d,y!==void 0&&(this.segment=y)}clone(){return new Bc(this.x,this.y,this.z,this.angle,this.segment)}}function pz(l,o,c,d,g){if(o.segment===void 0)return!0;let y=o,b=o.segment+1,M=0;for(;M>-c/2;){if(b--,b<0)return!1;M-=l[b].dist(y),y=l[b]}M+=l[b].dist(l[b+1]),b++;const E=[];let P=0;for(;M<c/2;){const O=l[b],F=l[b+1];if(!F)return!1;let V=l[b-1].angleTo(O)-O.angleTo(F);for(V=Math.abs((V+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:M,angleDelta:V}),P+=V;M-E[0].distance>d;)P-=E.shift().angleDelta;if(P>g)return!1;b++,M+=O.dist(F)}return!0}function mz(l){let o=0;for(let c=0;c<l.length-1;c++)o+=l[c].dist(l[c+1]);return o}function gz(l,o,c){return l?.6*o*c:0}function vz(l,o){return Math.max(l?l.right-l.left:0,o?o.right-o.left:0)}function LK(l,o,c,d,g,y){const b=gz(c,g,y),M=vz(c,d)*y;let E=0;const P=mz(l)/2;for(let O=0;O<l.length-1;O++){const F=l[O],V=l[O+1],U=F.dist(V);if(E+U>P){const q=(P-E)/U,K=si(F.x,V.x,q),Q=si(F.y,V.y,q),ae=new Bc(K,Q,0,V.angleTo(F),O);return!b||pz(l,ae,M,b,o)?ae:void 0}E+=U}}function kK(l,o,c,d,g,y,b,M,E){const P=gz(d,y,b),O=vz(d,g),F=O*b,V=l[0].x===0||l[0].x===E||l[0].y===0||l[0].y===E;return o-F<o/4&&(o=F+o/4),_z(l,V?o/2*M%o:(O/2+2*y)*b*M%o,o,P,c,F,V,!1,E)}function _z(l,o,c,d,g,y,b,M,E){const P=y/2,O=mz(l);let F=0,V=o-c,U=[];for(let q=0;q<l.length-1;q++){const K=l[q],Q=l[q+1],ae=K.dist(Q),ge=Q.angleTo(K);for(;V+c<F+ae;){V+=c;const _e=(V-F)/ae,be=si(K.x,Q.x,_e),Ae=si(K.y,Q.y,_e);if(be>=0&&be<E&&Ae>=0&&Ae<E&&V-P>=0&&V+P<=O){const Pe=new Bc(be,Ae,0,ge,q);d&&!pz(l,Pe,y,d,g)||U.push(Pe)}}F+=ae}return M||U.length||b||(U=_z(l,F/2,c,d,g,y,b,!0,E)),U}function yz(l,o,c,d,g){const y=[];for(let b=0;b<l.length;b++){const M=l[b];let E;for(let P=0;P<M.length-1;P++){let O=M[P],F=M[P+1];O.x<o&&F.x<o||(O.x<o?O=new H(o,O.y+(o-O.x)/(F.x-O.x)*(F.y-O.y))._round():F.x<o&&(F=new H(o,O.y+(o-O.x)/(F.x-O.x)*(F.y-O.y))._round()),O.y<c&&F.y<c||(O.y<c?O=new H(O.x+(c-O.y)/(F.y-O.y)*(F.x-O.x),c)._round():F.y<c&&(F=new H(O.x+(c-O.y)/(F.y-O.y)*(F.x-O.x),c)._round()),O.x>=d&&F.x>=d||(O.x>=d?O=new H(d,O.y+(d-O.x)/(F.x-O.x)*(F.y-O.y))._round():F.x>=d&&(F=new H(d,O.y+(d-O.x)/(F.x-O.x)*(F.y-O.y))._round()),O.y>=g&&F.y>=g||(O.y>=g?O=new H(O.x+(g-O.y)/(F.y-O.y)*(F.x-O.x),g)._round():F.y>=g&&(F=new H(O.x+(g-O.y)/(F.y-O.y)*(F.x-O.x),g)._round()),E&&O.equals(E[E.length-1])||(E=[O],y.push(E)),E.push(F)))))}}return y}function WM(l){let o=0,c=0;for(const b of l)o+=b.w*b.h,c=Math.max(c,b.w);l.sort((b,M)=>M.h-b.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),c),h:1/0}];let g=0,y=0;for(const b of l)for(let M=d.length-1;M>=0;M--){const E=d[M];if(!(b.w>E.w||b.h>E.h)){if(b.x=E.x,b.y=E.y,y=Math.max(y,b.y+b.h),g=Math.max(g,b.x+b.w),b.w===E.w&&b.h===E.h){const P=d.pop();M<d.length&&(d[M]=P)}else b.h===E.h?(E.x+=b.w,E.w-=b.w):b.w===E.w?(E.y+=b.h,E.h-=b.h):(d.push({x:E.x+b.w,y:E.y,w:E.w-b.w,h:b.h}),E.y+=b.h,E.h-=b.h);break}}return{w:g,h:y,fill:o/(g*y)||0}}hr(Bc,"Anchor");const Jo=1;class qM{constructor(o,{pixelRatio:c,version:d,stretchX:g,stretchY:y,content:b}){this.paddedRect=o,this.pixelRatio=c,this.stretchX=g,this.stretchY=y,this.content=b,this.version=d}get tl(){return[this.paddedRect.x+Jo,this.paddedRect.y+Jo]}get br(){return[this.paddedRect.x+this.paddedRect.w-Jo,this.paddedRect.y+this.paddedRect.h-Jo]}get displaySize(){return[(this.paddedRect.w-2*Jo)/this.pixelRatio,(this.paddedRect.h-2*Jo)/this.pixelRatio]}}class xz{constructor(o,c){const d={},g={};this.haveRenderCallbacks=[];const y=[];this.addImages(o,d,y),this.addImages(c,g,y);const{w:b,h:M}=WM(y),E=new As({width:b||1,height:M||1});for(const P in o){const O=o[P],F=d[P].paddedRect;As.copy(O.data,E,{x:0,y:0},{x:F.x+Jo,y:F.y+Jo},O.data,O.sdf)}for(const P in c){const O=c[P],F=g[P].paddedRect,V=F.x+Jo,U=F.y+Jo,q=O.data.width,K=O.data.height;As.copy(O.data,E,{x:0,y:0},{x:V,y:U},O.data),As.copy(O.data,E,{x:0,y:K-1},{x:V,y:U-1},{width:q,height:1}),As.copy(O.data,E,{x:0,y:0},{x:V,y:U+K},{width:q,height:1}),As.copy(O.data,E,{x:q-1,y:0},{x:V-1,y:U},{width:1,height:K}),As.copy(O.data,E,{x:0,y:0},{x:V+q,y:U},{width:1,height:K})}this.image=E,this.iconPositions=d,this.patternPositions=g}addImages(o,c,d){for(const g in o){const y=o[g],b={x:0,y:0,w:y.data.width+2*Jo,h:y.data.height+2*Jo};d.push(b),c[g]=new qM(b,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(o,c,d){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(g=>o.hasImage(g,d)),o.dispatchRenderCallbacks(this.haveRenderCallbacks,d);for(const g in o.getUpdatedImages(d))this.patchUpdatedImage(this.iconPositions[g],o.getImage(g,d),c),this.patchUpdatedImage(this.patternPositions[g],o.getImage(g,d),c)}patchUpdatedImage(o,c,d){if(!o||!c||o.version===c.version)return;o.version=c.version;const[g,y]=o.tl,b=!!Object.keys(this.patternPositions).length;d.update(c.data,{useMipmap:b},{x:g,y})}}hr(qM,"ImagePosition"),hr(xz,"ImageAtlas");const G_=1e20;function bz(l,o,c,d,g,y,b,M,E){for(let P=o;P<o+d;P++)wz(l,c*y+P,y,g,b,M,E);for(let P=c;P<c+g;P++)wz(l,P*y+o,1,d,b,M,E)}function wz(l,o,c,d,g,y,b){y[0]=0,b[0]=-G_,b[1]=G_,g[0]=l[o];for(let M=1,E=0,P=0;M<d;M++){g[M]=l[o+M*c];const O=M*M;do{const F=y[E];P=(g[M]-g[F]+O-F*F)/(M-F)/2}while(P<=b[E]&&--E>-1);E++,y[E]=M,b[E]=P,b[E+1]=G_}for(let M=0,E=0;M<d;M++){for(;b[E+1]<M;)E++;const P=y[E],O=M-P;l[o+M*c]=g[P]+O*O}}const Fl=2,ZM={none:0,ideographs:1,all:2};class Jm{constructor(o,c,d){this.requestManager=o,this.localGlyphMode=c,this.localFontFamily=d,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o,c){this.urls[c]=o}getGlyphs(o,c,d){const g=[],y=this.urls[c]||m.GLYPHS_URL;for(const b in o)for(const M of o[b])g.push({stack:b,id:M});St(g,({stack:b,id:M},E)=>{let P=this.entries[b];P||(P=this.entries[b]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let O=P.glyphs[M];if(O!==void 0)return void E(null,{stack:b,id:M,glyph:O});if(O=this._tinySDF(P,b,M),O)return P.glyphs[M]=O,void E(null,{stack:b,id:M,glyph:O});const F=Math.floor(M/256);if(256*F>65535)return void E(new Error("glyphs > 65535 not supported"));if(P.ranges[F])return void E(null,{stack:b,id:M,glyph:O});let V=P.requests[F];V||(V=P.requests[F]=[],Jm.loadGlyphRange(b,F,y,this.requestManager,(U,q)=>{if(q){P.ascender=q.ascender,P.descender=q.descender;for(const K in q.glyphs)this._doesCharSupportLocalGlyph(+K)||(P.glyphs[+K]=q.glyphs[+K]);P.ranges[F]=!0}for(const K of V)K(U,q);delete P.requests[F]})),V.push((U,q)=>{U?E(U):q&&E(null,{stack:b,id:M,glyph:q.glyphs[M]||null})})},(b,M)=>{if(b)d(b);else if(M){const E={};for(const{stack:P,id:O,glyph:F}of M)E[P]===void 0&&(E[P]={}),E[P].glyphs===void 0&&(E[P].glyphs={}),E[P].glyphs[O]=F&&{id:F.id,bitmap:F.bitmap.clone(),metrics:F.metrics},E[P].ascender=this.entries[P].ascender,E[P].descender=this.entries[P].descender;d(null,E)}})}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==ZM.none&&(this.localGlyphMode===ZM.all?!!this.localFontFamily:!!this.localFontFamily&&(D["CJK Unified Ideographs"](o)||D["Hangul Syllables"](o)||D.Hiragana(o)||D.Katakana(o)||D["CJK Symbols and Punctuation"](o)||D["CJK Unified Ideographs Extension A"](o)||D["CJK Unified Ideographs Extension B"](o)))}_tinySDF(o,c,d){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(d))return;let y=o.tinySDF;if(!y){let K="400";/bold/i.test(c)?K="900":/medium/i.test(c)?K="500":/light/i.test(c)&&(K="200"),y=o.tinySDF=new Jm.TinySDF({fontFamily:g,fontWeight:K,fontSize:24*Fl,buffer:3*Fl,radius:8*Fl}),y.fontWeight=K}if(this.localGlyphs[y.fontWeight][d])return this.localGlyphs[y.fontWeight][d];const b=String.fromCodePoint(d),{data:M,width:E,height:P,glyphWidth:O,glyphHeight:F,glyphLeft:V,glyphTop:U,glyphAdvance:q}=y.draw(b);return this.localGlyphs[y.fontWeight][d]={id:d,bitmap:new Oc({width:E,height:P},M),metrics:{width:O/Fl,height:F/Fl,left:V/Fl,top:U/Fl-27,advance:q/Fl,localGlyph:!0}}}}Jm.loadGlyphRange=function(l,o,c,d,g){const y=256*o,b=y+255,M=d.transformRequest(d.normalizeGlyphsURL(c).replace("{fontstack}",l).replace("{range}",`${y}-${b}`),wn.Glyphs);qn(M,(E,P)=>{if(E)g(E);else if(P){const O={},F=function(V){return new W1(V).readFields(AK,{})}(P);for(const V of F.glyphs)O[V.id]=V;g(null,{glyphs:O,ascender:F.ascender,descender:F.descender})}})},Jm.TinySDF=class{constructor({fontSize:l=24,buffer:o=3,radius:c=8,cutoff:d=.25,fontFamily:g="sans-serif",fontWeight:y="normal",fontStyle:b="normal"}={}){this.buffer=o,this.cutoff=d,this.radius=c;const M=this.size=l+4*o,E=this._createCanvas(M),P=this.ctx=E.getContext("2d",{willReadFrequently:!0});P.font=`${b} ${y} ${l}px ${g}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(M*M),this.gridInner=new Float64Array(M*M),this.f=new Float64Array(M),this.z=new Float64Array(M+1),this.v=new Uint16Array(M)}_createCanvas(l){const o=document.createElement("canvas");return o.width=o.height=l,o}draw(l){const{width:o,actualBoundingBoxAscent:c,actualBoundingBoxDescent:d,actualBoundingBoxLeft:g,actualBoundingBoxRight:y}=this.ctx.measureText(l),b=Math.ceil(c),M=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-g))),E=Math.min(this.size-this.buffer,b+Math.ceil(d)),P=M+2*this.buffer,O=E+2*this.buffer,F=Math.max(P*O,0),V=new Uint8ClampedArray(F),U={data:V,width:P,height:O,glyphWidth:M,glyphHeight:E,glyphTop:b,glyphLeft:0,glyphAdvance:o};if(M===0||E===0)return U;const{ctx:q,buffer:K,gridInner:Q,gridOuter:ae}=this;q.clearRect(K,K,M,E),q.fillText(l,K,K+b);const ge=q.getImageData(K,K,M,E);ae.fill(G_,0,F),Q.fill(0,0,F);for(let _e=0;_e<E;_e++)for(let be=0;be<M;be++){const Ae=ge.data[4*(_e*M+be)+3]/255;if(Ae===0)continue;const Pe=(_e+K)*P+be+K;if(Ae===1)ae[Pe]=0,Q[Pe]=G_;else{const Ge=.5-Ae;ae[Pe]=Ge>0?Ge*Ge:0,Q[Pe]=Ge<0?Ge*Ge:0}}bz(ae,0,0,P,O,P,this.f,this.v,this.z),bz(Q,K,K,M,E,P,this.f,this.v,this.z);for(let _e=0;_e<F;_e++){const be=Math.sqrt(ae[_e])-Math.sqrt(Q[_e]);V[_e]=Math.round(255-255*(be/this.radius+this.cutoff))}return U}};const Nh=Jo;function Sz(l,o,c,d){const g=[],y=l.imagePrimary,b=y.pixelRatio,M=y.paddedRect.w-2*Nh,E=y.paddedRect.h-2*Nh,P=l.right-l.left,O=l.bottom-l.top,F=y.stretchX||[[0,M]],V=y.stretchY||[[0,E]],U=(st,It)=>st+It[1]-It[0],q=F.reduce(U,0),K=V.reduce(U,0),Q=M-q,ae=E-K;let ge=0,_e=q,be=0,Ae=K,Pe=0,Ge=Q,Ke=0,rt=ae;if(y.content&&d){const st=y.content;ge=Y1(F,0,st[0]),be=Y1(V,0,st[1]),_e=Y1(F,st[0],st[2]),Ae=Y1(V,st[1],st[3]),Pe=st[0]-ge,Ke=st[1]-be,Ge=st[2]-st[0]-_e,rt=st[3]-st[1]-Ae}const ft=(st,It,Ut,Tt)=>{const Bt=K1(st.stretch-ge,_e,P,l.left),wt=J1(st.fixed-Pe,Ge,st.stretch,q),nr=K1(It.stretch-be,Ae,O,l.top),cr=J1(It.fixed-Ke,rt,It.stretch,K),$t=K1(Ut.stretch-ge,_e,P,l.left),Dr=J1(Ut.fixed-Pe,Ge,Ut.stretch,q),fr=K1(Tt.stretch-be,Ae,O,l.top),rr=J1(Tt.fixed-Ke,rt,Tt.stretch,K),Pr=new H(Bt,nr),yr=new H($t,nr),Ar=new H($t,fr),Qt=new H(Bt,fr),Fr=new H(wt/b,cr/b),mi=new H(Dr/b,rr/b),qr=o*Math.PI/180;if(qr){const nn=Math.sin(qr),Ui=Math.cos(qr),Wi=[Ui,-nn,nn,Ui];Pr._matMult(Wi),yr._matMult(Wi),Qt._matMult(Wi),Ar._matMult(Wi)}const ui=st.stretch+st.fixed,Ei=Ut.stretch+Ut.fixed,rn=It.stretch+It.fixed,ti=Tt.stretch+Tt.fixed,pn=l.imageSecondary;return{tl:Pr,tr:yr,bl:Qt,br:Ar,texPrimary:{x:y.paddedRect.x+Nh+ui,y:y.paddedRect.y+Nh+rn,w:Ei-ui,h:ti-rn},texSecondary:pn?{x:pn.paddedRect.x+Nh+ui,y:pn.paddedRect.y+Nh+rn,w:Ei-ui,h:ti-rn}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Fr,pixelOffsetBR:mi,minFontScaleX:Ge/b/P,minFontScaleY:rt/b/O,isSDF:c}};if(d&&(y.stretchX||y.stretchY)){const st=Tz(F,Q,q),It=Tz(V,ae,K);for(let Ut=0;Ut<st.length-1;Ut++){const Tt=st[Ut],Bt=st[Ut+1];for(let wt=0;wt<It.length-1;wt++)g.push(ft(Tt,It[wt],Bt,It[wt+1]))}}else g.push(ft({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:E+1}));return g}function Y1(l,o,c){let d=0;for(const g of l)d+=Math.max(o,Math.min(c,g[1]))-Math.max(o,Math.min(c,g[0]));return d}function Tz(l,o,c){const d=[{fixed:-Nh,stretch:0}];for(const[g,y]of l){const b=d[d.length-1];d.push({fixed:g-b.stretch,stretch:b.stretch}),d.push({fixed:g-b.stretch,stretch:b.stretch+(y-g)})}return d.push({fixed:o+Nh,stretch:c}),d}function K1(l,o,c,d){return l/o*c+d}function J1(l,o,c,d){return l-o*c/d}function RK(l,o,c,d){const g=o+l.positionedLines[d].lineOffset;return d===0?c+g/2:c+(g+(o+l.positionedLines[d-1].lineOffset))/2}function OK(l,o=1,c=!1){let d=1/0,g=1/0,y=-1/0,b=-1/0;const M=l[0];for(let U=0;U<M.length;U++){const q=M[U];(!U||q.x<d)&&(d=q.x),(!U||q.y<g)&&(g=q.y),(!U||q.x>y)&&(y=q.x),(!U||q.y>b)&&(b=q.y)}const E=Math.min(y-d,b-g);let P=E/2;const O=new dm([],zK);if(E===0)return new H(d,g);for(let U=d;U<y;U+=E)for(let q=g;q<b;q+=E)O.push(new Qm(U+P,q+P,P,l));let F=function(U){let q=0,K=0,Q=0;const ae=U[0];for(let ge=0,_e=ae.length,be=_e-1;ge<_e;be=ge++){const Ae=ae[ge],Pe=ae[be],Ge=Ae.x*Pe.y-Pe.x*Ae.y;K+=(Ae.x+Pe.x)*Ge,Q+=(Ae.y+Pe.y)*Ge,q+=3*Ge}return new Qm(K/q,Q/q,0,U)}(l),V=O.length;for(;O.length;){const U=O.pop();(U.d>F.d||!F.d)&&(F=U,c&&console.log("found best %d after %d probes",Math.round(1e4*U.d)/1e4,V)),U.max-F.d<=o||(P=U.h/2,O.push(new Qm(U.p.x-P,U.p.y-P,P,l)),O.push(new Qm(U.p.x+P,U.p.y-P,P,l)),O.push(new Qm(U.p.x-P,U.p.y+P,P,l)),O.push(new Qm(U.p.x+P,U.p.y+P,P,l)),V+=4)}return c&&(console.log(`num probes: ${V}`),console.log(`best distance: ${F.d}`)),F.p}function zK(l,o){return o.max-l.max}class Qm{constructor(o,c,d,g){this.p=new H(o,c),this.h=d,this.d=function(y,b){let M=!1,E=1/0;for(let P=0;P<b.length;P++){const O=b[P];for(let F=0,V=O.length,U=V-1;F<V;U=F++){const q=O[F],K=O[U];q.y>y.y!=K.y>y.y&&y.x<(K.x-q.x)*(y.y-q.y)/(K.y-q.y)+q.x&&(M=!M),E=Math.min(E,MO(y,q,K))}}return(M?1:-1)*Math.sqrt(E)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const eg=7,XM=Number.POSITIVE_INFINITY,BK=Math.sqrt(2);function Mz(l,[o,c]){let d=0,g=0;if(c===XM){o<0&&(o=0);const y=o/BK;switch(l){case"top-right":case"top-left":g=y-eg;break;case"bottom-right":case"bottom-left":g=-y+eg;break;case"bottom":g=-o+eg;break;case"top":g=o-eg}switch(l){case"top-right":case"bottom-right":d=-y;break;case"top-left":case"bottom-left":d=y;break;case"left":d=o;break;case"right":d=-o}}else{switch(o=Math.abs(o),c=Math.abs(c),l){case"top-right":case"top-left":case"top":g=c-eg;break;case"bottom-right":case"bottom-left":case"bottom":g=-c+eg}switch(l){case"top-right":case"bottom-right":case"right":d=-o;break;case"top-left":case"bottom-left":case"left":d=o}}return[d,g]}function FK(l,o,c,d,g,y,b,M,E,P,O){l.createArrays(),l.tilePixelRatio=tr/(512*l.overscaling),l.compareText={},l.iconsNeedLinear=!1;const F=l.layers[0].layout,V=l.layers[0]._unevaluatedLayout._values,U={};if(l.textSizeData.kind==="composite"){const{minZoom:ae,maxZoom:ge}=l.textSizeData;U.compositeTextSizes=[V["text-size"].possiblyEvaluate(new Ne(ae),M),V["text-size"].possiblyEvaluate(new Ne(ge),M)]}if(l.iconSizeData.kind==="composite"){const{minZoom:ae,maxZoom:ge}=l.iconSizeData;U.compositeIconSizes=[V["icon-size"].possiblyEvaluate(new Ne(ae),M),V["icon-size"].possiblyEvaluate(new Ne(ge),M)]}U.layoutTextSize=V["text-size"].possiblyEvaluate(new Ne(E+1),M),U.layoutIconSize=V["icon-size"].possiblyEvaluate(new Ne(E+1),M),U.textMaxSize=V["text-size"].possiblyEvaluate(new Ne(18),M);const q=F.get("text-rotation-alignment")==="map"&&F.get("symbol-placement")!=="point",K=F.get("text-size");let Q=!1;for(const ae of l.features)if(ae.icon&&ae.icon.nameSecondary){Q=!0;break}for(const ae of l.features){const ge=F.get("text-font").evaluate(ae,{},M).join(","),_e=K.evaluate(ae,{},M),be=U.layoutTextSize.evaluate(ae,{},M),Ae=(U.layoutIconSize.evaluate(ae,{},M),{horizontal:{},vertical:void 0}),Pe=ae.text;let Ge,Ke=[0,0];if(Pe){const st=Pe.toString(),It=F.get("text-letter-spacing").evaluate(ae,{},M)*Ea,Ut=F.get("text-line-height").evaluate(ae,{},M)*Ea,Tt=B(st)?It:0,Bt=F.get("text-anchor").evaluate(ae,{},M),wt=F.get("text-variable-anchor");if(!wt){const fr=F.get("text-radial-offset").evaluate(ae,{},M);Ke=fr?Mz(Bt,[fr*Ea,XM]):F.get("text-offset").evaluate(ae,{},M).map(rr=>rr*Ea)}let nr=q?"center":F.get("text-justify").evaluate(ae,{},M);const cr=F.get("symbol-placement")==="point",$t=cr?F.get("text-max-width").evaluate(ae,{},M)*Ea:1/0,Dr=fr=>{l.allowVerticalPlacement&&L(st)&&(Ae.vertical=jM(Pe,o,c,g,ge,$t,Ut,Bt,fr,Tt,Ke,Cs.vertical,!0,be,_e))};if(!q&&wt){const fr=nr==="auto"?wt.map(Pr=>YM(Pr)):[nr];let rr=!1;for(let Pr=0;Pr<fr.length;Pr++){const yr=fr[Pr];if(!Ae.horizontal[yr])if(rr)Ae.horizontal[yr]=Ae.horizontal[0];else{const Ar=jM(Pe,o,c,g,ge,$t,Ut,"center",yr,Tt,Ke,Cs.horizontal,!1,be,_e);Ar&&(Ae.horizontal[yr]=Ar,rr=Ar.positionedLines.length===1)}}Dr("left")}else{if(nr==="auto"&&(nr=YM(Bt)),cr||F.get("text-writing-mode").indexOf("horizontal")>=0||!L(st)){const fr=jM(Pe,o,c,g,ge,$t,Ut,Bt,nr,Tt,Ke,Cs.horizontal,!1,be,_e);fr&&(Ae.horizontal[nr]=fr)}Dr(cr?"left":nr)}}let rt=!1;if(ae.icon&&ae.icon.namePrimary){const st=d[ae.icon.namePrimary];st&&(Ge=PK(g[ae.icon.namePrimary],ae.icon.nameSecondary?g[ae.icon.nameSecondary]:void 0,F.get("icon-offset").evaluate(ae,{},M),F.get("icon-anchor").evaluate(ae,{},M)),rt=st.sdf,l.sdfIcons===void 0?l.sdfIcons=st.sdf:l.sdfIcons!==st.sdf&&Ue("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(st.pixelRatio!==l.pixelRatio||F.get("icon-rotate").constantOr(1)!==0)&&(l.iconsNeedLinear=!0))}const ft=Cz(Ae.horizontal)||Ae.vertical;l.iconsInText||(l.iconsInText=!!ft&&ft.iconsInText),(ft||Ge)&&NK(l,ae,Ae,Ge,d,U,be,0,Ke,rt,b,M,P,O,Q)}y&&l.generateCollisionDebugBuffers(E,l.collisionBoxArray)}function YM(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function NK(l,o,c,d,g,y,b,M,E,P,O,F,V,U,q){let K=y.textMaxSize.evaluate(o,{},F);K===void 0&&(K=b);const Q=l.layers[0].layout,ae=Q.get("icon-offset").evaluate(o,{},F),ge=Cz(c.horizontal)||c.vertical,_e=V.name==="globe",be=Ea,Ae=b/be,Pe=l.tilePixelRatio*K/be,Ge=(Bt=l.overscaling,l.zoom>18&&Bt>2&&(Bt>>=1),Math.max(tr/(512*Bt),1)*Q.get("symbol-spacing")),Ke=Q.get("text-padding")*l.tilePixelRatio,rt=Q.get("icon-padding")*l.tilePixelRatio,ft=se(Q.get("text-max-angle")),st=Q.get("text-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",It=Q.get("icon-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",Ut=Q.get("symbol-placement"),Tt=Ge/2;var Bt;const wt=Q.get("icon-text-fit").evaluate(o,{},F),nr=Q.get("icon-text-fit-padding").evaluate(o,{},F),cr=wt!=="none";let $t;l.hasAnyIconTextFit===!1&&cr&&(l.hasAnyIconTextFit=!0),d&&cr&&(l.allowVerticalPlacement&&c.vertical&&($t=fz(d,c.vertical,wt,nr,ae,Ae)),ge&&(d=fz(d,ge,wt,nr,ae,Ae)));const Dr=(fr,rr,Pr)=>{if(rr.x<0||rr.x>=tr||rr.y<0||rr.y>=tr)return;let yr=null;if(_e){const{x:Ar,y:Qt,z:Fr}=V.projectTilePoint(rr.x,rr.y,Pr);yr={anchor:new Bc(Ar,Qt,Fr,0,void 0),up:V.upVector(Pr,rr.x,rr.y)}}(function(Ar,Qt,Fr,mi,qr,ui,Ei,rn,ti,pn,nn,Ui,Wi,Di,Ln,mn,Nn,ca,go,jn,On,Xa,Ya,vo,gn,$l,ng){const Nc=Ar.addToLineVertexArray(Qt,mi);let Vc,sy,ly,wb,qB,ZB,XB,YB=0,KB=0,JB=0,QB=0,TA=-1,MA=-1;const Pu={};let eF=W2("");const Ef=Fr?Fr.anchor:Qt,AA=ti.layout.get("icon-text-fit").evaluate(On,{},gn)!=="none";let CA=0,IA=0;if(ti._unevaluatedLayout.getValue("text-radial-offset")===void 0?[CA,IA]=ti.layout.get("text-offset").evaluate(On,{},gn).map(Qo=>Qo*Ea):(CA=ti.layout.get("text-radial-offset").evaluate(On,{},gn)*Ea,IA=XM),Ar.allowVerticalPlacement&&qr.vertical){const Qo=qr.vertical;if(Ln)ZB=KM(Qo),rn&&(XB=KM(rn));else{const es=ti.layout.get("text-rotate").evaluate(On,{},gn)+90;ly=Q1(pn,Ef,Qt,nn,Ui,Wi,Qo,Di,es,mn),rn&&(wb=Q1(pn,Ef,Qt,nn,Ui,Wi,rn,ca,es))}}if(ui){const Qo=ti.layout.get("icon-rotate").evaluate(On,{},gn),es=Sz(ui,Qo,Ya,AA),ag=rn?Sz(rn,Qo,Ya,AA):void 0;sy=Q1(pn,Ef,Qt,nn,Ui,Wi,ui,ca,Qo),YB=4*es.length;const tF=Ar.iconSizeData;let Df=null;tF.kind==="source"?(Df=[Bl*ti.layout.get("icon-size").evaluate(On,{},gn)],Df[0]>Vh&&Ue(`${Ar.layerIds[0]}: Value for "icon-size" is >= ${U_}. Reduce your "icon-size".`)):tF.kind==="composite"&&(Df=[Bl*Xa.compositeIconSizes[0].evaluate(On,{},gn),Bl*Xa.compositeIconSizes[1].evaluate(On,{},gn)],(Df[0]>Vh||Df[1]>Vh)&&Ue(`${Ar.layerIds[0]}: Value for "icon-size" is >= ${U_}. Reduce your "icon-size".`)),Ar.addSymbols(Ar.icon,es,Df,jn,go,On,!1,Fr,Qt,Nc.lineStartIndex,Nc.lineLength,-1,vo,gn,$l,ng),TA=Ar.icon.placedSymbolArray.length-1,ag&&(KB=4*ag.length,Ar.addSymbols(Ar.icon,ag,Df,jn,go,On,Cs.vertical,Fr,Qt,Nc.lineStartIndex,Nc.lineLength,-1,vo,gn,$l,ng),MA=Ar.icon.placedSymbolArray.length-1)}for(const Qo in qr.horizontal){const es=qr.horizontal[Qo];Vc||(eF=W2(es.text),Ln?qB=KM(es):Vc=Q1(pn,Ef,Qt,nn,Ui,Wi,es,Di,ti.layout.get("text-rotate").evaluate(On,{},gn),mn));const ag=es.positionedLines.length===1;if(JB+=Az(Ar,Fr,Qt,es,Ei,ti,Ln,On,mn,Nc,qr.vertical?Cs.horizontal:Cs.horizontalOnly,ag?Object.keys(qr.horizontal):[Qo],Pu,TA,Xa,vo,gn,$l),ag)break}qr.vertical&&(QB+=Az(Ar,Fr,Qt,qr.vertical,Ei,ti,Ln,On,mn,Nc,Cs.vertical,["vertical"],Pu,MA,Xa,vo,gn,$l));let Zh=-1;const EA=(Qo,es)=>Qo?Math.max(Qo,es):es;Zh=EA(qB,Zh),Zh=EA(ZB,Zh),Zh=EA(XB,Zh);const eQ=Zh>-1?1:0;Ar.glyphOffsetArray.length>=Z_.MAX_GLYPHS&&Ue("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),On.sortKey!==void 0&&Ar.addToSortKeyRanges(Ar.symbolInstances.length,On.sortKey),Ar.symbolInstances.emplaceBack(Qt.x,Qt.y,Ef.x,Ef.y,Ef.z,Pu.right>=0?Pu.right:-1,Pu.center>=0?Pu.center:-1,Pu.left>=0?Pu.left:-1,Pu.vertical>=0?Pu.vertical:-1,TA,MA,eF,Vc!==void 0?Vc:Ar.collisionBoxArray.length,Vc!==void 0?Vc+1:Ar.collisionBoxArray.length,ly!==void 0?ly:Ar.collisionBoxArray.length,ly!==void 0?ly+1:Ar.collisionBoxArray.length,sy!==void 0?sy:Ar.collisionBoxArray.length,sy!==void 0?sy+1:Ar.collisionBoxArray.length,wb||Ar.collisionBoxArray.length,wb?wb+1:Ar.collisionBoxArray.length,nn,JB,QB,YB,KB,eQ,0,CA,IA,Zh,0,AA?1:0)})(l,rr,yr,fr,c,d,g,$t,l.layers[0],l.collisionBoxArray,o.index,o.sourceLayerIndex,l.index,Ke,st,E,0,rt,It,ae,o,y,P,O,F,U,q)};if(Ut==="line")for(const fr of yz(o.geometry,0,0,tr,tr)){const rr=kK(fr,Ge,ft,c.vertical||ge,d,be,Pe,l.overscaling,tr);for(const Pr of rr)ge&&VK(l,ge.text,Tt,Pr)||Dr(fr,Pr,F)}else if(Ut==="line-center"){for(const fr of o.geometry)if(fr.length>1){const rr=LK(fr,ft,c.vertical||ge,d,be,Pe);rr&&Dr(fr,rr,F)}}else if(o.type==="Polygon")for(const fr of zM(o.geometry,0)){const rr=OK(fr,16);Dr(fr[0],new Bc(rr.x,rr.y,0,0,void 0),F)}else if(o.type==="LineString")for(const fr of o.geometry)Dr(fr,new Bc(fr[0].x,fr[0].y,0,0,void 0),F);else if(o.type==="Point")for(const fr of o.geometry)for(const rr of fr)Dr([rr],new Bc(rr.x,rr.y,0,0,void 0),F)}const U_=255,Vh=U_*Bl;function Az(l,o,c,d,g,y,b,M,E,P,O,F,V,U,q,K,Q,ae){const ge=function(Ae,Pe,Ge,Ke,rt,ft,st,It){const Ut=[];if(Pe.positionedLines.length===0)return Ut;const Tt=Ke.layout.get("text-rotate").evaluate(ft,{})*Math.PI/180,Bt=function(Dr){const fr=Dr[0],rr=Dr[1],Pr=fr*rr;return Pr>0?[fr,-rr]:Pr<0?[-fr,rr]:fr===0?[rr,fr]:[rr,-fr]}(Ge);let wt=Math.abs(Pe.top-Pe.bottom);for(const Dr of Pe.positionedLines)wt-=Dr.lineOffset;const nr=Pe.positionedLines.length,cr=wt/nr;let $t=Pe.top-Ge[1];for(let Dr=0;Dr<nr;++Dr){const fr=Pe.positionedLines[Dr];$t=RK(Pe,cr,$t,Dr);for(const rr of fr.positionedGlyphs){if(!rr.rect)continue;const Pr=rr.rect||{};let yr=oz+1,Ar=!0,Qt=1,Fr=0;if(rr.imageName){const jn=st[rr.imageName];if(!jn)continue;if(jn.sdf){Ue("SDF images are not supported in formatted text and will be ignored.");continue}Ar=!1,Qt=jn.pixelRatio,yr=Jo/Qt}const mi=(rt||It)&&rr.vertical,qr=rr.metrics.advance*rr.scale/2,ui=rr.metrics,Ei=rr.rect;if(Ei===null)continue;It&&Pe.verticalizable&&(Fr=rr.imageName?qr-rr.metrics.width*rr.scale/2:0);const rn=rt?[rr.x+qr,rr.y]:[0,0];let ti=[0,0],pn=[0,0],nn=!1;rt||(mi?(pn=[rr.x+qr+Bt[0],rr.y+Bt[1]-Fr],nn=!0):ti=[rr.x+qr+Ge[0],rr.y+Ge[1]-Fr]);const Ui=Ei.w*rr.scale/(Qt*(rr.localGlyph?Fl:1)),Wi=Ei.h*rr.scale/(Qt*(rr.localGlyph?Fl:1));let Di,Ln,mn,Nn;if(mi){const jn=rr.y-$t,On=new H(-qr,qr-jn),Xa=-Math.PI/2,Ya=new H(...pn);Di=new H(-qr+ti[0],ti[1]),Di._rotateAround(Xa,On)._add(Ya),Di.x+=-jn+qr,Di.y-=(ui.left-yr)*rr.scale;const vo=rr.imageName?ui.advance*rr.scale:Ea*rr.scale,gn=String.fromCodePoint(rr.glyph);TK(gn)?Di.x+=(1-yr)*rr.scale:MK(gn)?Di.x+=vo-ui.height*rr.scale+(-yr-1)*rr.scale:Di.x+=rr.imageName||ui.width+2*yr===Ei.w&&ui.height+2*yr===Ei.h?(vo-Wi)/2:(vo-(ui.height+2*yr)*rr.scale)/2,Ln=new H(Di.x,Di.y-Ui),mn=new H(Di.x+Wi,Di.y),Nn=new H(Di.x+Wi,Di.y-Ui)}else{const jn=(ui.left-yr)*rr.scale-qr+ti[0],On=(-ui.top-yr)*rr.scale+ti[1],Xa=jn+Ui,Ya=On+Wi;Di=new H(jn,On),Ln=new H(Xa,On),mn=new H(jn,Ya),Nn=new H(Xa,Ya)}if(Tt){let jn;jn=rt?new H(0,0):nn?new H(Bt[0],Bt[1]):new H(Ge[0],Ge[1]),Di._rotateAround(Tt,jn),Ln._rotateAround(Tt,jn),mn._rotateAround(Tt,jn),Nn._rotateAround(Tt,jn)}const ca=new H(0,0),go=new H(0,0);Ut.push({tl:Di,tr:Ln,bl:mn,br:Nn,texPrimary:Pr,texSecondary:void 0,writingMode:Pe.writingMode,glyphOffset:rn,sectionIndex:rr.sectionIndex,isSDF:Ar,pixelOffsetTL:ca,pixelOffsetBR:go,minFontScaleX:0,minFontScaleY:0})}}return Ut}(0,d,E,y,b,M,g,l.allowVerticalPlacement),_e=l.textSizeData;let be=null;_e.kind==="source"?(be=[Bl*y.layout.get("text-size").evaluate(M,{},Q)],be[0]>Vh&&Ue(`${l.layerIds[0]}: Value for "text-size" is >= ${U_}. Reduce your "text-size".`)):_e.kind==="composite"&&(be=[Bl*q.compositeTextSizes[0].evaluate(M,{},Q),Bl*q.compositeTextSizes[1].evaluate(M,{},Q)],(be[0]>Vh||be[1]>Vh)&&Ue(`${l.layerIds[0]}: Value for "text-size" is >= ${U_}. Reduce your "text-size".`)),l.addSymbols(l.text,ge,be,E,b,M,O,o,c,P.lineStartIndex,P.lineLength,U,K,Q,ae,!1);for(const Ae of F)V[Ae]=l.text.placedSymbolArray.length-1;return 4*ge.length}function Cz(l){for(const o in l)return l[o];return null}function Q1(l,o,c,d,g,y,b,M,E,P){let O=b.top,F=b.bottom,V=b.left,U=b.right;const q=b.collisionPadding;if(q&&(V-=q[0],O-=q[1],U+=q[2],F+=q[3]),E){const K=new H(V,O),Q=new H(U,O),ae=new H(V,F),ge=new H(U,F),_e=se(E);let be=new H(0,0);P&&(be=new H(P[0],P[1])),K._rotateAround(_e,be),Q._rotateAround(_e,be),ae._rotateAround(_e,be),ge._rotateAround(_e,be),V=Math.min(K.x,Q.x,ae.x,ge.x),U=Math.max(K.x,Q.x,ae.x,ge.x),O=Math.min(K.y,Q.y,ae.y,ge.y),F=Math.max(K.y,Q.y,ae.y,ge.y)}return l.emplaceBack(o.x,o.y,o.z,c.x,c.y,V,O,U,F,M,d,g,y),l.length-1}function KM(l){l.collisionPadding&&(l.top-=l.collisionPadding[1],l.bottom+=l.collisionPadding[3]);const o=l.bottom-l.top;return o>0?Math.max(10,o):null}function VK(l,o,c,d){const g=l.compareText;if(o in g){const y=g[o];for(let b=y.length-1;b>=0;b--)if(d.dist(y[b])<c)return!0}else g[o]=[];return g[o].push(d),!1}function Iz(l,o){const c=l.fovAboveCenter,d=l.elevation?l.elevation.getMinElevationBelowMSL()*o:0,g=(l._camera.position[2]*l.worldSize-d)/Math.cos(l._pitch),y=Math.sin(c)*g/Math.sin(Math.max(Math.PI/2-l._pitch-c,.01)),b=Math.sin(l._pitch)*y+g;return Math.min(1.01*b,g*(1/l._horizonShift))}function $h(l,o){if(!o.isReprojectedInTileSpace)return{scale:1<<l.z,x:l.x,y:l.y,x2:l.x+1,y2:l.y+1,projection:o};const c=Math.pow(2,-l.z),d=l.x*c,g=(l.x+1)*c,y=l.y*c,b=(l.y+1)*c,M=Ko(d),E=Ko(g),P=Ia(y),O=Ia(b),F=o.project(M,P),V=o.project(E,P),U=o.project(E,O),q=o.project(M,O);let K=Math.min(F.x,V.x,U.x,q.x),Q=Math.min(F.y,V.y,U.y,q.y),ae=Math.max(F.x,V.x,U.x,q.x),ge=Math.max(F.y,V.y,U.y,q.y);const _e=c/16;function be(Pe,Ge,Ke,rt,ft,st){const It=(Ke+ft)/2,Ut=(rt+st)/2,Tt=o.project(Ko(It),Ia(Ut)),Bt=Math.max(0,K-Tt.x,Q-Tt.y,Tt.x-ae,Tt.y-ge);K=Math.min(K,Tt.x),ae=Math.max(ae,Tt.x),Q=Math.min(Q,Tt.y),ge=Math.max(ge,Tt.y),Bt>_e&&(be(Pe,Tt,Ke,rt,It,Ut),be(Tt,Ge,It,Ut,ft,st))}be(F,V,d,y,g,y),be(V,U,g,y,g,b),be(U,q,g,b,d,b),be(q,F,d,b,d,y),K-=_e,Q-=_e,ae+=_e,ge+=_e;const Ae=1/Math.max(ae-K,ge-Q);return{scale:Ae,x:K*Ae,y:Q*Ae,x2:ae*Ae,y2:ge*Ae,projection:o}}function Ez(l,{x:o,y:c},d=0){return new H(((o-d)*l.scale-l.x)*tr,(c*l.scale-l.y)*tr)}const $K=a.m.identity(new Float32Array(16));class Gh{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,c){return{x:0,y:0,z:0}}unproject(o,c){return new Gi(0,0)}projectTilePoint(o,c,d){return{x:o,y:c,z:0}}locationPoint(o,c,d=!0){return o._coordinatePoint(o.locationCoordinate(c),d)}pixelsPerMeter(o,c){return mo(1,o)*c}pixelSpaceConversion(o,c,d){return 1}farthestPixelDistance(o){return Iz(o,o.pixelsPerMeter)}pointCoordinate(o,c,d,g){const y=o.horizonLineFromTop(!1),b=new H(c,Math.max(y,d));return o.rayIntersectionCoordinate(o.pointRayIntersection(b,g))}pointCoordinate3D(o,c,d){const g=new H(c,d);if(o.elevation)return o.elevation.pointCoordinate(g);{const y=this.pointCoordinate(o,g.x,g.y,0);return[y.x,y.y,y.z]}}isPointAboveHorizon(o,c){if(o.elevation)return!this.pointCoordinate3D(o,c.x,c.y);const d=o.horizonLineFromTop();return c.y<d}createInversionMatrix(o,c){return $K}createTileMatrix(o,c,d){let g,y,b;const M=d.canonical,E=a.m.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const P=$h(M,this);g=1,y=P.x+d.wrap*P.scale,b=P.y,a.m.scale(E,E,[g/P.scale,g/P.scale,o.pixelsPerMeter/c])}else g=c/o.zoomScale(M.z),y=(M.x+Math.pow(2,M.z)*d.wrap)*g,b=M.y*g;return a.m.translate(E,E,[y,b,0]),a.m.scale(E,E,[g/tr,g/tr,1]),E}upVector(o,c,d){return[0,0,1]}upVectorScale(o,c,d){return{metersToTile:1}}}class GK extends Gh{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[c,d]=this.parallels=o.parallels||[29.5,45.5],g=Math.sin(se(c));this.n=(g+Math.sin(se(d)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(o,c){const{n:d,c:g,r0:y}=this,b=se(o-this.center[0]),M=se(c),E=Math.sqrt(g-2*d*Math.sin(M))/d;return{x:E*Math.sin(b*d),y:E*Math.cos(b*d)-y,z:0}}unproject(o,c){const{n:d,c:g,r0:y}=this,b=y+c;let M=Math.atan2(o,Math.abs(b))*Math.sign(b);b*d<0&&(M-=Math.PI*Math.sign(o)*Math.sign(b));const E=se(this.center[0])*d;M=gt(M,-Math.PI-E,Math.PI-E);const P=Ce(me(M/d)+this.center[0],-180,180),O=Math.asin(Ce((g-(o*o+b*b)*d*d)/(2*d),-1,1)),F=Ce(me(O),-Fn,Fn);return new Gi(P,F)}}const j_=1.340264,H_=-.081106,W_=893e-6,q_=.003796,eb=Math.sqrt(3)/2;class UK extends Gh{project(o,c){c=c/180*Math.PI,o=o/180*Math.PI;const d=Math.asin(eb*Math.sin(c)),g=d*d,y=g*g*g;return{x:.5*(o*Math.cos(d)/(eb*(j_+3*H_*g+y*(7*W_+9*q_*g)))/Math.PI+.5),y:1-.5*(d*(j_+H_*g+y*(W_+q_*g))/Math.PI+1),z:0}}unproject(o,c){o=(2*o-.5)*Math.PI;let d=c=(2*(1-c)-1)*Math.PI,g=d*d,y=g*g*g;for(let O,F,V,U=0;U<12&&(F=d*(j_+H_*g+y*(W_+q_*g))-c,V=j_+3*H_*g+y*(7*W_+9*q_*g),O=F/V,d=Ce(d-O,-Math.PI/3,Math.PI/3),g=d*d,y=g*g*g,!(Math.abs(O)<1e-12));++U);const b=eb*o*(j_+3*H_*g+y*(7*W_+9*q_*g))/Math.cos(d),M=Math.asin(Math.sin(d)/eb),E=Ce(180*b/Math.PI,-180,180),P=Ce(180*M/Math.PI,-Fn,Fn);return new Gi(E,P)}}class jK extends Gh{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,c){return{x:.5+o/360,y:.5-c/360,z:0}}unproject(o,c){const d=360*(o-.5),g=Ce(360*(.5-c),-Fn,Fn);return new Gi(d,g)}}const tg=Math.PI/2;function tb(l){return Math.tan((tg+l)/2)}class HK extends Gh{constructor(o){super(o),this.center=o.center||[0,30];const[c,d]=this.parallels=o.parallels||[30,30];let g=se(c),y=se(d);this.southernCenter=g+y<0,this.southernCenter&&(g=-g,y=-y);const b=Math.cos(g),M=tb(g);this.n=g===y?Math.sin(g):Math.log(b/Math.cos(y))/Math.log(tb(y)/M),this.f=b*Math.pow(tb(g),this.n)/this.n}project(o,c){c=se(c),this.southernCenter&&(c=-c),o=se(o-this.center[0]);const d=1e-6,{n:g,f:y}=this;y>0?c<-tg+d&&(c=-tg+d):c>tg-d&&(c=tg-d);const b=y/Math.pow(tb(c),g);let M=b*Math.sin(g*o),E=y-b*Math.cos(g*o);return M=.5*(M/Math.PI+.5),E=.5*(E/Math.PI+.5),{x:M,y:this.southernCenter?E:1-E,z:0}}unproject(o,c){o=(2*o-.5)*Math.PI,this.southernCenter&&(c=1-c),c=(2*(1-c)-.5)*Math.PI;const{n:d,f:g}=this,y=g-c,b=Math.sign(y),M=Math.sign(d)*Math.sqrt(o*o+y*y);let E=Math.atan2(o,Math.abs(y))*b;y*d<0&&(E-=Math.PI*Math.sign(o)*b);const P=Ce(me(E/d)+this.center[0],-180,180),O=Ce(me(2*Math.atan(Math.pow(g/M,1/d))-tg),-Fn,Fn);return new Gi(P,this.southernCenter?-O:O)}}class Dz extends Gh{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,c){return{x:Au(o),y:Cu(c),z:0}}unproject(o,c){const d=Ko(o),g=Ia(c);return new Gi(d,g)}}const Pz=se(Fn);class WK extends Gh{project(o,c){const d=(c=se(c))*c,g=d*d;return{x:.5*((o=se(o))*(.8707-.131979*d+g*(g*(.003971*d-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(c*(1.007226+d*(.015085+g*(.028874*d-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(o,c){o=(2*o-.5)*Math.PI;let d=c=(2*(1-c)-1)*Math.PI,g=25,y=0,b=d*d;do{b=d*d;const P=b*b;y=(d*(1.007226+b*(.015085+P*(.028874*b-.044475-.005916*P)))-c)/(1.007226+b*(.045255+P*(.259866*b-.311325-.005916*11*P))),d=Ce(d-y,-Pz,Pz)}while(Math.abs(y)>1e-6&&--g>0);b=d*d;const M=Ce(me(o/(.8707+b*(b*(b*b*b*(.003971-.001529*b)-.013791)-.131979))),-180,180),E=me(d);return new Gi(M,E)}}const Lz=se(Fn);class qK extends Gh{project(o,c){c=se(c),o=se(o);const d=Math.cos(c),g=2/Math.PI,y=Math.acos(d*Math.cos(o/2)),b=Math.sin(y)/y,M=.5*(o*g+2*d*Math.sin(o/2)/b)||0,E=.5*(c+Math.sin(c)/b)||0;return{x:.5*(M/Math.PI+.5),y:1-.5*(E/Math.PI+1),z:0}}unproject(o,c){let d=o=(2*o-.5)*Math.PI,g=c=(2*(1-c)-1)*Math.PI,y=25;const b=1e-6;let M=0,E=0;do{const P=Math.cos(g),O=Math.sin(g),F=2*O*P,V=O*O,U=P*P,q=Math.cos(d/2),K=Math.sin(d/2),Q=2*q*K,ae=K*K,ge=1-U*q*q,_e=ge?1/ge:0,be=ge?Math.acos(P*q)*Math.sqrt(1/ge):0,Ae=.5*(2*be*P*K+2*d/Math.PI)-o,Pe=.5*(be*O+g)-c,Ge=.5*_e*(U*ae+be*P*q*V)+1/Math.PI,Ke=_e*(Q*F/4-be*O*K),rt=.125*_e*(F*K-be*O*U*Q),ft=.5*_e*(V*q+be*ae*P)+.5,st=Ke*rt-ft*Ge;M=(Pe*Ke-Ae*ft)/st,E=(Ae*rt-Pe*Ge)/st,d=Ce(d-M,-Math.PI,Math.PI),g=Ce(g-E,-Lz,Lz)}while((Math.abs(M)>b||Math.abs(E)>b)&&--y>0);return new Gi(me(d),me(g))}}class kz extends Gh{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(se(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,c){const{scale:d,cosPhi:g}=this;return{x:se(o)*g*d+.5,y:-Math.sin(se(c))/g*d+.5,z:0}}unproject(o,c){const{scale:d,cosPhi:g}=this,y=-(c-.5)/d,b=Ce(me((o-.5)/d)/g,-180,180),M=Math.asin(Ce(y*g,-1,1)),E=Ce(me(M),-Fn,Fn);return new Gi(b,E)}}class ZK extends Dz{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(o,c,d){const g=R_(o,c,d),y=O_(Mu(d));return a.v.transformMat4(g,g,y),{x:g[0],y:g[1],z:g[2]}}locationPoint(o,c){const d=xf(c.lat,c.lng),g=a.v.normalize([],d),y=o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(c),o._centerAltitude):o._centerAltitude,b=mo(1,0)*tr*y;a.v.scaleAndAdd(d,d,g,b);const M=a.m.identity(new Float64Array(16));return a.m.multiply(M,o.pixelMatrix,o.globeMatrix),a.v.transformMat4(d,d,M),new H(d[0],d[1])}pixelsPerMeter(o,c){return mo(1,0)*c}pixelSpaceConversion(o,c,d){const g=mo(1,o)*c,y=si(mo(1,45)*c,g,d);return this.pixelsPerMeter(o,c)/y}createTileMatrix(o,c,d){const g=yM(Mu(d.canonical));return a.m.multiply(new Float64Array(16),o.globeMatrix,g)}createInversionMatrix(o,c){const{center:d}=o,g=O_(Mu(c));return a.m.rotateY(g,g,se(d.lng)),a.m.rotateX(g,g,se(d.lat)),a.m.scale(g,g,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(o,c,d,g){return uO(o,c,d,!0)||new Na(0,0)}pointCoordinate3D(o,c,d){const g=this.pointCoordinate(o,c,d,0);return[g.x,g.y,g.z]}isPointAboveHorizon(o,c){return!uO(o,c.x,c.y,!1)}farthestPixelDistance(o){const c=function(g,y){const b=g.cameraToCenterDistance,M=g._centerAltitude*y,E=g._camera,P=g._camera.forward(),O=a.v.add([],a.v.scale([],P,-b),[0,0,M]),F=g.worldSize/(2*Math.PI),V=[0,0,-F],U=g.width/g.height,q=Math.tan(g.fovAboveCenter),K=a.v.scale([],E.up(),q),Q=a.v.scale([],E.right(),q*U),ae=a.v.normalize([],a.v.add([],a.v.add([],P,K),Q)),ge=[];let _e;if(new dM(O,ae).closestPointOnSphere(V,F,ge)){const be=a.v.add([],ge,V),Ae=a.v.sub([],be,O);_e=Math.cos(g.fovAboveCenter)*a.v.length(Ae)}else{const be=a.v.sub([],O,V),Ae=a.v.sub([],V,O);a.v.normalize(Ae,Ae);const Pe=a.v.length(be)-F;_e=Math.sqrt(Pe*(Pe+2*F));const Ge=Math.acos(_e/(F+Pe))-Math.acos(a.v.dot(P,Ae));_e*=Math.cos(Ge)}return 1.01*_e}(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),d=Rc(o.zoom);if(d>0){const g=Iz(o,mo(1,o.center.lat)*o.worldSize),y=o.worldSize/(2*Math.PI),b=Math.max(o.width,o.height)/o.worldSize*Math.PI;return si(c,g+y*(1-Math.cos(b)),Math.pow(d,10))}return c}upVector(o,c,d){return R_(c,d,o,1)}upVectorScale(o){return{metersToTile:C1(E1(Mu(o)))}}}function Rz(l){const o=l.parallels,c=!!o&&Math.abs(o[0]+o[1])<.01;switch(l.name){case"mercator":return new Dz(l);case"equirectangular":return new jK(l);case"naturalEarth":return new WK(l);case"equalEarth":return new UK(l);case"winkelTripel":return new qK(l);case"albers":return c?new kz(l):new GK(l);case"lambertConformalConic":return c?new kz(l):new HK(l);case"globe":return new ZK(l)}throw new Error(`Invalid projection name: ${l.name}`)}const XK=new Rt({"symbol-placement":new Ee(ut.layout_symbol["symbol-placement"]),"symbol-spacing":new Ee(ut.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ee(ut.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new at(ut.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ee(ut.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Ee(ut.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new Ee(ut.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ee(ut.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ee(ut.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ee(ut.layout_symbol["icon-rotation-alignment"]),"icon-size":new at(ut.layout_symbol["icon-size"]),"icon-text-fit":new at(ut.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new at(ut.layout_symbol["icon-text-fit-padding"]),"icon-image":new at(ut.layout_symbol["icon-image"]),"icon-rotate":new at(ut.layout_symbol["icon-rotate"]),"icon-padding":new Ee(ut.layout_symbol["icon-padding"]),"icon-keep-upright":new Ee(ut.layout_symbol["icon-keep-upright"]),"icon-offset":new at(ut.layout_symbol["icon-offset"]),"icon-anchor":new at(ut.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ee(ut.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ee(ut.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ee(ut.layout_symbol["text-rotation-alignment"]),"text-field":new at(ut.layout_symbol["text-field"]),"text-font":new at(ut.layout_symbol["text-font"]),"text-size":new at(ut.layout_symbol["text-size"]),"text-max-width":new at(ut.layout_symbol["text-max-width"]),"text-line-height":new at(ut.layout_symbol["text-line-height"]),"text-letter-spacing":new at(ut.layout_symbol["text-letter-spacing"]),"text-justify":new at(ut.layout_symbol["text-justify"]),"text-radial-offset":new at(ut.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ee(ut.layout_symbol["text-variable-anchor"]),"text-anchor":new at(ut.layout_symbol["text-anchor"]),"text-max-angle":new Ee(ut.layout_symbol["text-max-angle"]),"text-writing-mode":new Ee(ut.layout_symbol["text-writing-mode"]),"text-rotate":new at(ut.layout_symbol["text-rotate"]),"text-padding":new Ee(ut.layout_symbol["text-padding"]),"text-keep-upright":new Ee(ut.layout_symbol["text-keep-upright"]),"text-transform":new at(ut.layout_symbol["text-transform"]),"text-offset":new at(ut.layout_symbol["text-offset"]),"text-allow-overlap":new Ee(ut.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ee(ut.layout_symbol["text-ignore-placement"]),"text-optional":new Ee(ut.layout_symbol["text-optional"]),visibility:new Ee(ut.layout_symbol.visibility)});var JM={paint:new Rt({"icon-opacity":new at(ut.paint_symbol["icon-opacity"]),"icon-emissive-strength":new at(ut.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new at(ut.paint_symbol["text-emissive-strength"]),"icon-color":new at(ut.paint_symbol["icon-color"]),"icon-halo-color":new at(ut.paint_symbol["icon-halo-color"]),"icon-halo-width":new at(ut.paint_symbol["icon-halo-width"]),"icon-halo-blur":new at(ut.paint_symbol["icon-halo-blur"]),"icon-translate":new Ee(ut.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ee(ut.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new at(ut.paint_symbol["icon-image-cross-fade"]),"text-opacity":new at(ut.paint_symbol["text-opacity"]),"text-color":new at(ut.paint_symbol["text-color"],{runtimeType:lo,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new at(ut.paint_symbol["text-halo-color"]),"text-halo-width":new at(ut.paint_symbol["text-halo-width"]),"text-halo-blur":new at(ut.paint_symbol["text-halo-blur"]),"text-translate":new Ee(ut.paint_symbol["text-translate"]),"text-translate-anchor":new Ee(ut.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Ee(ut.paint_symbol["icon-color-saturation"])}),layout:XK};class Oz{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:Fa,this.defaultValue=o}evaluate(o){if(o.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(o.formattedSection))return c.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}hr(Oz,"FormatSectionOverride",{omit:["defaultValue"]});class rb extends ur{constructor(o,c,d){super(o,JM,c,d)}recalculate(o,c){super.recalculate(o,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const d=this.layout.get("text-writing-mode");if(d){const g=[];for(const y of d)g.indexOf(y)<0&&g.push(y);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(o,c,d,g){const y=this.layout.get(o).evaluate(c,{},d,g),b=this._unevaluatedLayout._values[o];return b.isDataDriven()||Em(b.value)||!y?y:function(M,E){return E.replace(/{([^{}]+)}/g,(P,O)=>O in M?String(M[O]):"")}(c.properties,y)}createBucket(o){return new Z_(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of JM.paint.overridableProperties){if(!rb.hasPaintOverride(this.layout,o))continue;const c=this.paint.get(o),d=new Oz(c),g=new g_(d,c.property.specification,this.scope,this.options);let y=null;y=c.value.kind==="constant"||c.value.kind==="source"?new lf("source",g):new uf("composite",g,c.value.zoomStops,c.value._interpolationType),this.paint._values[o]=new pt(c.property,y,c.parameters)}}_handleOverridablePaintPropertyUpdate(o,c,d){return!(!this.layout||c.isDataDriven()||d.isDataDriven())&&rb.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,c){const d=o.get("text-field"),g=JM.paint.properties[c];let y=!1;const b=M=>{for(const E of M)if(g.overrides&&g.overrides.hasOverride(E))return void(y=!0)};if(d.value.kind==="constant"&&d.value.value instanceof ga)b(d.value.value.sections);else if(d.value.kind==="source"){const M=P=>{y||(P instanceof Ho&&kn(P.value)===Gs?b(P.value.sections):P instanceof vs?b(P.sections):P.eachChild(M))},E=d.value;E._styleExpression&&M(E._styleExpression.expression)}return y}getProgramIds(){const o=this.paint.get("icon-opacity").constantOr(1)!==0,c=this.paint.get("text-opacity").constantOr(1)!==0,d=[];return o&&d.push("symbolIcon"),c&&d.push("symbolSDF"),d}getDefaultProgramParams(o,c){return{config:new gf(this,c),overrideFog:!1}}}const YK=G1.types,KK=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ib(l,o,c,d,g,y,b,M,E,P,O,F,V){const U=M?Math.min(Vh,Math.round(M[0])):0,q=M?Math.min(Vh,Math.round(M[1])):0;l.emplaceBack(o,c,Math.round(32*d),Math.round(32*g),y,b,(U<<1)+(E?1:0),q,16*P,16*O,256*F,256*V)}function nb(l,o,c){l.emplaceBack(o,c)}function ab(l,o,c,d,g,y,b){l.emplaceBack(o,c,d,g,y,b)}function ob(l,o,c,d,g){l.emplaceBack(o,c,d,g),l.emplaceBack(o,c,d,g),l.emplaceBack(o,c,d,g),l.emplaceBack(o,c,d,g)}function JK(l){for(const o of l.sections)if(oe(o.text))return!0;return!1}class QM{constructor(o){this.layoutVertexArray=new sa,this.indexArray=new Xi,this.programConfigurations=o,this.segments=new yn,this.dynamicLayoutVertexArray=new $i,this.opacityVertexArray=new Aa,this.placedSymbolArray=new CR,this.iconTransitioningVertexArray=new Za,this.globeExtVertexArray=new ln,this.zOffsetVertexArray=new kl}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(o,c,d,g,y){this.isEmpty()||(d&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,pK.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,gK.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,KK,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=o.createVertexBuffer(this.iconTransitioningVertexArray,_K.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,mK.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||y)&&(this.zOffsetVertexBuffer=o.createVertexBuffer(this.zOffsetVertexArray,vK.members,!0)),this.opacityVertexBuffer.itemSize=1),(d||g)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}hr(QM,"SymbolBuffers");class eA{constructor(o,c,d){this.layoutVertexArray=new o,this.layoutAttributes=c,this.indexArray=new d,this.segments=new yn,this.collisionVertexArray=new bs,this.collisionVertexArrayExt=new $i}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,yK.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,xK.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}hr(eA,"CollisionBuffers");class sb{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(b=>b.fqid),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=a.m.identity([]),this.placementViewportMatrix=a.m.identity([]);const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=GM(this.zoom,c["text-size"]),this.iconSizeData=GM(this.zoom,c["icon-size"]);const d=this.layers[0].layout,g=d.get("symbol-sort-key"),y=d.get("symbol-z-order");this.canOverlap=d.get("text-allow-overlap")||d.get("icon-allow-overlap")||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=d.get("text-writing-mode").map(b=>Cs[b]),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=o.sourceID,this.projection=o.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=d.get("symbol-z-elevate")}createArrays(){this.text=new QM(new kh(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new QM(new kh(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new DR,this.lineVertexArray=new PR,this.symbolInstances=new ER}calculateGlyphDependencies(o,c,d,g,y){for(let b=0;b<o.length;b++){const M=o.codePointAt(b);if(M===void 0)break;if(c[M]=!0,g&&y&&M<=65535){const E=V_[o.charAt(b)];E&&(c[E.charCodeAt(0)]=!0)}}}populate(o,c,d,g){const y=this.layers[0],b=y.layout,M=this.projection.name==="globe",E=b.get("text-font"),P=b.get("text-field"),O=b.get("icon-image"),F=(P.value.kind!=="constant"||P.value.value instanceof ga&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&(E.value.kind!=="constant"||E.value.value.length>0),V=O.value.kind!=="constant"||!!O.value.value||Object.keys(O.parameters).length>0,U=b.get("symbol-sort-key");if(this.features=[],!F&&!V)return;const q=c.iconDependencies,K=c.glyphDependencies,Q=c.availableImages,ae=new Ne(this.zoom);for(const{feature:ge,id:_e,index:be,sourceLayerIndex:Ae}of o){const Pe=y._featureFilter.needGeometry,Ge=Bh(ge,Pe);if(!y._featureFilter.filter(ae,Ge,d))continue;if(Pe||(Ge.geometry=Iu(ge,d,g)),M&&ge.type!==1&&d.z<=5){const st=Ge.geometry,It=.98078528056,Ut=(Tt,Bt)=>{const wt=R_(Tt.x,Tt.y,d,1),nr=R_(Bt.x,Bt.y,d,1);return a.v.dot(wt,nr)<It};for(let Tt=0;Tt<st.length;Tt++)st[Tt]=uY(st[Tt],Ut)}let Ke,rt;if(F){const st=y.getValueAndResolveTokens("text-field",Ge,d,Q),It=ga.factory(st);JK(It)&&(this.hasRTLText=!0),(!this.hasRTLText||Te()==="unavailable"||this.hasRTLText&&je.isParsed())&&(Ke=SK(It,y,Ge))}if(V){const st=y.getValueAndResolveTokens("icon-image",Ge,d,Q);rt=st instanceof Ha?st:Ha.fromString(st)}if(!Ke&&!rt)continue;const ft=this.sortFeaturesByKey?U.evaluate(Ge,{},d):void 0;if(this.features.push({id:_e,text:Ke,icon:rt,index:be,sourceLayerIndex:Ae,geometry:Ge.geometry,properties:ge.properties,type:YK[ge.type],sortKey:ft}),rt&&(q[rt.namePrimary]=!0,rt.nameSecondary&&(q[rt.nameSecondary]=!0)),Ke){const st=E.evaluate(Ge,{},d).join(","),It=b.get("text-rotation-alignment")==="map"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Cs.vertical)>=0;for(const Ut of Ke.sections)if(Ut.image)q[Ut.image.namePrimary]=!0;else{const Tt=L(Ke.toString()),Bt=Ut.fontStack||st,wt=K[Bt]=K[Bt]||{};this.calculateGlyphDependencies(Ut.text,wt,It,this.allowVerticalPlacement,Tt)}}}b.get("symbol-placement")==="line"&&(this.features=function(ge){const _e={},be={},Ae=[];let Pe=0;function Ge(st){Ae.push(ge[st]),Pe++}function Ke(st,It,Ut){const Tt=be[st];return delete be[st],be[It]=Tt,Ae[Tt].geometry[0].pop(),Ae[Tt].geometry[0]=Ae[Tt].geometry[0].concat(Ut[0]),Tt}function rt(st,It,Ut){const Tt=_e[It];return delete _e[It],_e[st]=Tt,Ae[Tt].geometry[0].shift(),Ae[Tt].geometry[0]=Ut[0].concat(Ae[Tt].geometry[0]),Tt}function ft(st,It,Ut){const Tt=Ut?It[0][It[0].length-1]:It[0][0];return`${st}:${Tt.x}:${Tt.y}`}for(let st=0;st<ge.length;st++){const It=ge[st],Ut=It.geometry,Tt=It.text?It.text.toString():null;if(!Tt){Ge(st);continue}const Bt=ft(Tt,Ut),wt=ft(Tt,Ut,!0);if(Bt in be&&wt in _e&&be[Bt]!==_e[wt]){const nr=rt(Bt,wt,Ut),cr=Ke(Bt,wt,Ae[nr].geometry);delete _e[Bt],delete be[wt],be[ft(Tt,Ae[cr].geometry,!0)]=cr,Ae[nr].geometry=null}else Bt in be?Ke(Bt,wt,Ut):wt in _e?rt(Bt,wt,Ut):(Ge(st),_e[Bt]=Pe-1,be[wt]=Pe-1)}return Ae.filter(st=>st.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ge,_e)=>ge.sortKey-_e.sortKey)}update(o,c,d,g,y){const b=Object.keys(o).length!==0;if(b&&!this.stateDependentLayers.length)return;const M=b?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(o,c,M,d,g,y),this.icon.programConfigurations.updatePaintArrays(o,c,M,d,g,y)}updateZOffset(){const o=(y,b,M)=>{d+=b,d>y.length&&y.resize(d);for(let E=-b;E<0;E++)y.emplace(E+d,M)},c=(y,b,M)=>{g+=b,g>y.length&&y.resize(g);for(let E=-b;E<0;E++)y.emplace(E+g,M)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let d=0,g=0;for(let y=0;y<this.symbolInstances.length;y++){const b=this.symbolInstances.get(y),{numHorizontalGlyphVertices:M,numVerticalGlyphVertices:E,numIconVertices:P}=b,O=b.zOffset,F=P>0;if((M>0||E>0)&&(o(this.text.zOffsetVertexArray,M,O),o(this.text.zOffsetVertexArray,E,O)),F){const{placedIconSymbolIndex:V,verticalPlacedIconSymbolIndex:U}=b;V>=0&&c(this.icon.zOffsetVertexArray,P,O),U>=0&&c(this.icon.zOffsetVertexArray,b.numVerticalIconVertices,O)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Rz(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,c){const d=this.lineVertexArray.length;if(o.segment!==void 0)for(const{x:g,y}of c)this.lineVertexArray.emplaceBack(g,y);return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(o,c,d,g,y,b,M,E,P,O,F,V,U,q,K,Q){const ae=o.indexArray,ge=o.layoutVertexArray,_e=o.globeExtVertexArray,be=o.segments.prepareSegment(4*c.length,ge,ae,this.canOverlap?b.sortKey:void 0),Ae=this.glyphOffsetArray.length,Pe=be.vertexLength,Ge=this.allowVerticalPlacement&&M===Cs.vertical?Math.PI/2:0,Ke=b.text&&b.text.sections;for(let ft=0;ft<c.length;ft++){const{tl:st,tr:It,bl:Ut,br:Tt,texPrimary:Bt,texSecondary:wt,pixelOffsetTL:nr,pixelOffsetBR:cr,minFontScaleX:$t,minFontScaleY:Dr,glyphOffset:fr,isSDF:rr,sectionIndex:Pr}=c[ft],yr=be.vertexLength,Ar=fr[1];if(ib(ge,P.x,P.y,st.x,Ar+st.y,Bt.x,Bt.y,d,rr,nr.x,nr.y,$t,Dr),ib(ge,P.x,P.y,It.x,Ar+It.y,Bt.x+Bt.w,Bt.y,d,rr,cr.x,nr.y,$t,Dr),ib(ge,P.x,P.y,Ut.x,Ar+Ut.y,Bt.x,Bt.y+Bt.h,d,rr,nr.x,cr.y,$t,Dr),ib(ge,P.x,P.y,Tt.x,Ar+Tt.y,Bt.x+Bt.w,Bt.y+Bt.h,d,rr,cr.x,cr.y,$t,Dr),E){const{x:Qt,y:Fr,z:mi}=E.anchor,[qr,ui,Ei]=E.up;ab(_e,Qt,Fr,mi,qr,ui,Ei),ab(_e,Qt,Fr,mi,qr,ui,Ei),ab(_e,Qt,Fr,mi,qr,ui,Ei),ab(_e,Qt,Fr,mi,qr,ui,Ei),ob(o.dynamicLayoutVertexArray,Qt,Fr,mi,Ge)}else ob(o.dynamicLayoutVertexArray,P.x,P.y,P.z,Ge);if(Q){const Qt=wt||Bt;nb(o.iconTransitioningVertexArray,Qt.x,Qt.y),nb(o.iconTransitioningVertexArray,Qt.x+Qt.w,Qt.y),nb(o.iconTransitioningVertexArray,Qt.x,Qt.y+Qt.h),nb(o.iconTransitioningVertexArray,Qt.x+Qt.w,Qt.y+Qt.h)}ae.emplaceBack(yr,yr+1,yr+2),ae.emplaceBack(yr+1,yr+2,yr+3),be.vertexLength+=4,be.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(fr[0]),ft!==c.length-1&&Pr===c[ft+1].sectionIndex||o.programConfigurations.populatePaintArrays(ge.length,b,b.index,{},U,q,K,Ke&&Ke[Pr])}const rt=E?E.anchor:P;o.placedSymbolArray.emplaceBack(rt.x,rt.y,rt.z,P.x,P.y,Ae,this.glyphOffsetArray.length-Ae,Pe,O,F,P.segment,d?d[0]:0,d?d[1]:0,g[0],g[1],M,0,!1,0,V,0)}_commitLayoutVertex(o,c,d,g,y,b,M){o.emplaceBack(c,d,g,y,b,Math.round(M.x),Math.round(M.y))}_addCollisionDebugVertices(o,c,d,g,y,b,M){const E=d.segments.prepareSegment(4,d.layoutVertexArray,d.indexArray),P=E.vertexLength,O=M.tileAnchorX,F=M.tileAnchorY;for(let U=0;U<4;U++)d.collisionVertexArray.emplaceBack(0,0,0,0);this._commitDebugCollisionVertexUpdate(d.collisionVertexArrayExt,c,o.padding,M.zOffset),this._commitLayoutVertex(d.layoutVertexArray,g,y,b,O,F,new H(o.x1,o.y1)),this._commitLayoutVertex(d.layoutVertexArray,g,y,b,O,F,new H(o.x2,o.y1)),this._commitLayoutVertex(d.layoutVertexArray,g,y,b,O,F,new H(o.x2,o.y2)),this._commitLayoutVertex(d.layoutVertexArray,g,y,b,O,F,new H(o.x1,o.y2)),E.vertexLength+=4;const V=d.indexArray;V.emplaceBack(P,P+1),V.emplaceBack(P+1,P+2),V.emplaceBack(P+2,P+3),V.emplaceBack(P+3,P),E.primitiveLength+=4}_addTextDebugCollisionBoxes(o,c,d,g,y,b){for(let M=g;M<y;M++){const E=d.get(M),P=this.getSymbolInstanceTextSize(o,b,c,M);this._addCollisionDebugVertices(E,P,this.textCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,b)}}_addIconDebugCollisionBoxes(o,c,d,g,y,b){for(let M=g;M<y;M++){const E=d.get(M),P=this.getSymbolInstanceIconSize(o,c,b.placedIconSymbolIndex);this._addCollisionDebugVertices(E,P,this.iconCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,b)}}generateCollisionDebugBuffers(o,c){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new eA(Yo,az.members,Za),this.iconCollisionBox=new eA(Yo,az.members,Za);const d=Ym(this.iconSizeData,o),g=Ym(this.textSizeData,o);for(let y=0;y<this.symbolInstances.length;y++){const b=this.symbolInstances.get(y);this._addTextDebugCollisionBoxes(g,o,c,b.textBoxStartIndex,b.textBoxEndIndex,b),this._addTextDebugCollisionBoxes(g,o,c,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b),this._addIconDebugCollisionBoxes(d,o,c,b.iconBoxStartIndex,b.iconBoxEndIndex,b),this._addIconDebugCollisionBoxes(d,o,c,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex,b)}}getSymbolInstanceTextSize(o,c,d,g){const y=this.text.placedSymbolArray.get(c.rightJustifiedTextSymbolIndex>=0?c.rightJustifiedTextSymbolIndex:c.centerJustifiedTextSymbolIndex>=0?c.centerJustifiedTextSymbolIndex:c.leftJustifiedTextSymbolIndex>=0?c.leftJustifiedTextSymbolIndex:c.verticalPlacedTextSymbolIndex>=0?c.verticalPlacedTextSymbolIndex:g),b=Z1(this.textSizeData,o,y)/Ea;return this.tilePixelRatio*b}getSymbolInstanceIconSize(o,c,d){const g=this.icon.placedSymbolArray.get(d),y=Z1(this.iconSizeData,o,g);return this.tilePixelRatio*y}_commitDebugCollisionVertexUpdate(o,c,d,g){o.emplaceBack(c,-d,-d,g),o.emplaceBack(c,d,-d,g),o.emplaceBack(c,d,d,g),o.emplaceBack(c,-d,d,g)}_updateTextDebugCollisionBoxes(o,c,d,g,y,b){for(let M=g;M<y;M++){const E=d.get(M),P=this.getSymbolInstanceTextSize(o,b,c,M);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,P,E.padding,b.zOffset)}}_updateIconDebugCollisionBoxes(o,c,d,g,y,b){for(let M=g;M<y;M++){const E=d.get(M),P=this.getSymbolInstanceIconSize(o,c,b.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,P,E.padding,b.zOffset)}}updateCollisionDebugBuffers(o,c){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const d=Ym(this.iconSizeData,o),g=Ym(this.textSizeData,o);for(let y=0;y<this.symbolInstances.length;y++){const b=this.symbolInstances.get(y);this._updateTextDebugCollisionBoxes(g,o,c,b.textBoxStartIndex,b.textBoxEndIndex,b),this._updateTextDebugCollisionBoxes(g,o,c,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b),this._updateIconDebugCollisionBoxes(d,o,c,b.iconBoxStartIndex,b.iconBoxEndIndex,b),this._updateIconDebugCollisionBoxes(d,o,c,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex,b)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,c,d,g,y,b,M,E,P){const O={};if(c<d){const{x1:F,y1:V,x2:U,y2:q,padding:K,projectedAnchorX:Q,projectedAnchorY:ae,projectedAnchorZ:ge,tileAnchorX:_e,tileAnchorY:be,featureIndex:Ae}=o.get(c);O.textBox={x1:F,y1:V,x2:U,y2:q,padding:K,projectedAnchorX:Q,projectedAnchorY:ae,projectedAnchorZ:ge,tileAnchorX:_e,tileAnchorY:be},O.textFeatureIndex=Ae}if(g<y){const{x1:F,y1:V,x2:U,y2:q,padding:K,projectedAnchorX:Q,projectedAnchorY:ae,projectedAnchorZ:ge,tileAnchorX:_e,tileAnchorY:be,featureIndex:Ae}=o.get(g);O.verticalTextBox={x1:F,y1:V,x2:U,y2:q,padding:K,projectedAnchorX:Q,projectedAnchorY:ae,projectedAnchorZ:ge,tileAnchorX:_e,tileAnchorY:be},O.verticalTextFeatureIndex=Ae}if(b<M){const{x1:F,y1:V,x2:U,y2:q,padding:K,projectedAnchorX:Q,projectedAnchorY:ae,projectedAnchorZ:ge,tileAnchorX:_e,tileAnchorY:be,featureIndex:Ae}=o.get(b);O.iconBox={x1:F,y1:V,x2:U,y2:q,padding:K,projectedAnchorX:Q,projectedAnchorY:ae,projectedAnchorZ:ge,tileAnchorX:_e,tileAnchorY:be},O.iconFeatureIndex=Ae}if(E<P){const{x1:F,y1:V,x2:U,y2:q,padding:K,projectedAnchorX:Q,projectedAnchorY:ae,projectedAnchorZ:ge,tileAnchorX:_e,tileAnchorY:be,featureIndex:Ae}=o.get(E);O.verticalIconBox={x1:F,y1:V,x2:U,y2:q,padding:K,projectedAnchorX:Q,projectedAnchorY:ae,projectedAnchorZ:ge,tileAnchorX:_e,tileAnchorY:be},O.verticalIconFeatureIndex=Ae}return O}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const d=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(o,c){const d=o.placedSymbolArray.get(c),g=d.vertexStartIndex+4*d.numGlyphs;for(let y=d.vertexStartIndex;y<g;y+=4)o.indexArray.emplaceBack(y,y+1,y+2),o.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const c=Math.sin(o),d=Math.cos(o),g=[],y=[],b=[];for(let M=0;M<this.symbolInstances.length;++M){b.push(M);const E=this.symbolInstances.get(M);g.push(0|Math.round(c*E.tileAnchorX+d*E.tileAnchorY)),y.push(E.featureIndex)}return b.sort((M,E)=>g[M]-g[E]||y[E]-y[M]),b}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let o=0;o<this.symbolInstances.length;++o)this.symbolInstanceIndexesSortedZOffset.push(o)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((o,c)=>this.symbolInstances.get(c).zOffset-this.symbolInstances.get(o).zOffset)}addToSortKeyRanges(o,c){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===c?d.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const d=this.symbolInstances.get(c);this.featureSortOrder.push(d.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:y,leftJustifiedTextSymbolIndex:b,verticalPlacedTextSymbolIndex:M,placedIconSymbolIndex:E,verticalPlacedIconSymbolIndex:P}=d;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),y>=0&&y!==g&&this.addIndicesForPlacedSymbol(this.text,y),b>=0&&b!==y&&b!==g&&this.addIndicesForPlacedSymbol(this.text,b),M>=0&&this.addIndicesForPlacedSymbol(this.text,M),E>=0&&this.addIndicesForPlacedSymbol(this.icon,E),P>=0&&this.addIndicesForPlacedSymbol(this.icon,P)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}hr(sb,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),sb.MAX_GLYPHS=65535,sb.addDynamicAttributes=ob;var Z_=sb;const QK=_r([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:eJ}=QK,tJ=_r([{name:"a_packed",components:4,type:"Float32"}]),{members:rJ}=tJ,iJ=G1.types,nJ=Math.cos(Math.PI/180*37.5);class lb{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.fqid),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new Xo,this.layoutVertexArray2=new $i,this.indexArray=new Xi,this.programConfigurations=new kh(o.layers,o.zoom),this.segments=new yn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,d,g){this.hasPattern=BM("line",this.layers,c);const y=this.layers[0].layout.get("line-sort-key"),b=[];for(const{feature:O,id:F,index:V,sourceLayerIndex:U}of o){const q=this.layers[0]._featureFilter.needGeometry,K=Bh(O,q);if(!this.layers[0]._featureFilter.filter(new Ne(this.zoom),K,d))continue;const Q=y?y.evaluate(K,{},d):void 0,ae={id:F,properties:O.properties,type:O.type,sourceLayerIndex:U,index:V,geometry:q?K.geometry:Iu(O,d,g),patterns:{},sortKey:Q};b.push(ae)}y&&b.sort((O,F)=>O.sortKey-F.sortKey);const{lineAtlas:M,featureIndex:E}=c,P=this.addConstantDashes(M);for(const O of b){const{geometry:F,index:V,sourceLayerIndex:U}=O;if(P&&this.addFeatureDashes(O,M),this.hasPattern){const q=FM("line",this.layers,O,this.zoom,c);this.patternFeatures.push(q)}else this.addFeature(O,F,V,d,M.positions,c.availableImages,c.brightness);E.insert(o[V].feature,F,V,U,this.index)}}addConstantDashes(o){let c=!1;for(const d of this.layers){const g=d.paint.get("line-dasharray").value,y=d.layout.get("line-cap").value;if(g.kind!=="constant"||y.kind!=="constant")c=!0;else{const b=y.value,M=g.value;if(!M)continue;o.addDash(M,b)}}return c}addFeatureDashes(o,c){const d=this.zoom;for(const g of this.layers){const y=g.paint.get("line-dasharray").value,b=g.layout.get("line-cap").value;if(y.kind==="constant"&&b.kind==="constant")continue;let M,E;if(y.kind==="constant"){if(M=y.value,!M)continue}else M=y.evaluate({zoom:d},o);E=b.kind==="constant"?b.value:b.evaluate({zoom:d},o),c.addDash(M,E),o.patterns[g.id]=c.getKey(M,E)}}update(o,c,d,g,y){const b=Object.keys(o).length!==0;b&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(o,c,b?this.stateDependentLayers:this.layers,d,g,y)}addFeatures(o,c,d,g,y,b){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,c,d,g,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,rJ)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,eJ),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,c,d,g,y,b,M){const E=this.layers[0].layout,P=E.get("line-join").evaluate(o,{}),O=E.get("line-cap").evaluate(o,{}),F=E.get("line-miter-limit"),V=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const U of c)this.addLine(U,o,P,O,F,V);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,y,b,g,M)}addLine(o,c,d,g,y,b){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ae=0;ae<o.length-1;ae++)this.totalDistance+=o[ae].dist(o[ae+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const M=iJ[c.type]==="Polygon";let E=o.length;for(;E>=2&&o[E-1].equals(o[E-2]);)E--;let P=0;for(;P<E-1&&o[P].equals(o[P+1]);)P++;if(E<(M?3:2))return;d==="bevel"&&(y=1.05);const O=this.overscaling<=16?15*tr/(512*this.overscaling):0,F=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let V,U,q,K,Q;this.e1=this.e2=-1,M&&(V=o[E-2],Q=o[P].sub(V)._unit()._perp());for(let ae=P;ae<E;ae++){if(q=ae===E-1?M?o[P+1]:void 0:o[ae+1],q&&o[ae].equals(q))continue;Q&&(K=Q),V&&(U=V),V=o[ae],Q=q?q.sub(V)._unit()._perp():K,K=K||Q;let ge=K.add(Q);ge.x===0&&ge.y===0||ge._unit();const _e=K.x*Q.x+K.y*Q.y,be=ge.x*Q.x+ge.y*Q.y,Ae=be!==0?1/be:1/0,Pe=2*Math.sqrt(2-2*be),Ge=be<nJ&&U&&q,Ke=K.x*Q.y-K.y*Q.x>0;if(Ge&&ae>P){const st=V.dist(U);if(st>2*O){const It=V.sub(V.sub(U)._mult(O/st)._round());this.updateDistance(U,It),this.addCurrentVertex(It,K,0,0,F),U=It}}const rt=U&&q;let ft=rt?d:M?"butt":g;if(rt&&ft==="round"&&(Ae<b?ft="miter":Ae<=2&&(ft="fakeround")),ft==="miter"&&Ae>y&&(ft="bevel"),ft==="bevel"&&(Ae>2&&(ft="flipbevel"),Ae<y&&(ft="miter")),U&&this.updateDistance(U,V),ft==="miter")ge._mult(Ae),this.addCurrentVertex(V,ge,0,0,F);else if(ft==="flipbevel"){if(Ae>100)ge=Q.mult(-1);else{const st=Ae*K.add(Q).mag()/K.sub(Q).mag();ge._perp()._mult(st*(Ke?-1:1))}this.addCurrentVertex(V,ge,0,0,F),this.addCurrentVertex(V,ge.mult(-1),0,0,F)}else if(ft==="bevel"||ft==="fakeround"){const st=-Math.sqrt(Ae*Ae-1),It=Ke?st:0,Ut=Ke?0:st;if(U&&this.addCurrentVertex(V,K,It,Ut,F),ft==="fakeround"){const Tt=Math.round(180*Pe/Math.PI/20);for(let Bt=1;Bt<Tt;Bt++){let wt=Bt/Tt;if(wt!==.5){const cr=wt-.5;wt+=wt*cr*(wt-1)*((1.0904+_e*(_e*(3.55645-1.43519*_e)-3.2452))*cr*cr+(.848013+_e*(.215638*_e-1.06021)))}const nr=Q.sub(K)._mult(wt)._add(K)._unit()._mult(Ke?-1:1);this.addHalfVertex(V,nr.x,nr.y,!1,Ke,0,F)}}q&&this.addCurrentVertex(V,Q,-It,-Ut,F)}else if(ft==="butt")this.addCurrentVertex(V,ge,0,0,F);else if(ft==="square"){const st=U?1:-1;U||this.addCurrentVertex(V,ge,st,st,F),this.addCurrentVertex(V,ge,0,0,F),U&&this.addCurrentVertex(V,ge,st,st,F)}else ft==="round"&&(U&&(this.addCurrentVertex(V,K,0,0,F),this.addCurrentVertex(V,K,1,1,F,!0)),q&&(this.addCurrentVertex(V,Q,-1,-1,F,!0),this.addCurrentVertex(V,Q,0,0,F)));if(Ge&&ae<E-1){const st=V.dist(q);if(st>2*O){const It=V.add(q.sub(V)._mult(O/st)._round());this.updateDistance(V,It),this.addCurrentVertex(It,Q,0,0,F),V=It}}}}addCurrentVertex(o,c,d,g,y,b=!1){const M=c.y*g-c.x,E=-c.y-c.x*g;this.addHalfVertex(o,c.x+c.y*d,c.y-c.x*d,b,!1,d,y),this.addHalfVertex(o,M,E,b,!0,-g,y)}addHalfVertex({x:o,y:c},d,g,y,b,M,E){this.layoutVertexArray.emplaceBack((o<<1)+(y?1:0),(c<<1)+(b?1:0),Math.round(63*d)+128,Math.round(63*g)+128,1+(M===0?0:M<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const P=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,P),E.primitiveLength++),b?this.e2=P:this.e1=P}updateScaledDistance(){if(this.lineClips){const o=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=o*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(o,c){this.distance+=o.dist(c),this.updateScaledDistance()}}hr(lb,"LineBucket",{omit:["layers","patternFeatures"]});class Fc{constructor(o,c,d,g){this.context=o,this.format=d,this.texture=o.gl.createTexture(),this.update(c,g)}update(o,c,d){const{width:g,height:y}=o,{context:b}=this,{gl:M}=b;if(M.bindTexture(M.TEXTURE_2D,this.texture),b.pixelStoreUnpackFlipY.set(!1),b.pixelStoreUnpack.set(1),b.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!c||c.premultiply!==!1)),d||this.size&&this.size[0]===g&&this.size[1]===y){const{x:E,y:P}=d||{x:0,y:0};if(o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||ImageBitmap&&o instanceof ImageBitmap)M.texSubImage2D(M.TEXTURE_2D,0,E,P,M.RGBA,M.UNSIGNED_BYTE,o);else{let O=this.format,F=M.UNSIGNED_BYTE;this.format===M.R32F&&(O=M.RED,F=M.FLOAT),M.texSubImage2D(M.TEXTURE_2D,0,E,P,g,y,O,F,o.data)}}else if(this.size=[g,y],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||ImageBitmap&&o instanceof ImageBitmap){let E=this.format;this.format===M.R8&&(E=M.RED),M.texImage2D(M.TEXTURE_2D,0,this.format,E,M.UNSIGNED_BYTE,o)}else{let E=this.format,P=this.format,O=M.UNSIGNED_BYTE;this.format===M.DEPTH_COMPONENT&&(E=M.DEPTH_COMPONENT16,O=M.UNSIGNED_SHORT),this.format===M.R8&&(P=M.RED),this.format===M.R32F&&(O=M.FLOAT,P=M.RED),M.texImage2D(M.TEXTURE_2D,0,E,g,y,0,P,O,o.data)}this.useMipmap=Boolean(c&&c.useMipmap),this.useMipmap&&M.generateMipmap(M.TEXTURE_2D)}bind(o,c,d=!1){const{context:g}=this,{gl:y}=g;y.bindTexture(y.TEXTURE_2D,this.texture),o!==this.minFilter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,o),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,this.useMipmap&&!d?o===y.NEAREST?y.NEAREST_MIPMAP_NEAREST:y.LINEAR_MIPMAP_LINEAR:o),this.minFilter=o),c!==this.wrapS&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,c),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,c),this.wrapS=c)}bindExtraParam(o,c,d,g){const{context:y}=this,{gl:b}=y;b.bindTexture(b.TEXTURE_2D,this.texture),c!==this.magFilter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,c),this.magFilter=c),o!==this.minFilter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,this.useMipmap?o===b.NEAREST?b.NEAREST_MIPMAP_NEAREST:b.LINEAR_MIPMAP_LINEAR:o),this.minFilter=o),d!==this.wrapS&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,d),this.wrapS=d),g!==this.wrapT&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,g),this.wrapT=g)}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class ub{constructor(o,c){this.context=o,this.texture=c}bind(o,c){const{context:d}=this,{gl:g}=d;g.bindTexture(g.TEXTURE_2D,this.texture),o!==this.minFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,o),this.minFilter=o),c!==this.wrapS&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,c),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,c),this.wrapS=c)}}const Js=32,Eu=33,Uh=new Uint16Array(8184);for(let l=0;l<2046;l++){let o=l+2,c=0,d=0,g=0,y=0,b=0,M=0;for(1&o?g=y=b=Js:c=d=M=Js;(o>>=1)>1;){const P=c+g>>1,O=d+y>>1;1&o?(g=c,y=d,c=b,d=M):(c=g,d=y,g=b,y=M),b=P,M=O}const E=4*l;Uh[E+0]=c,Uh[E+1]=d,Uh[E+2]=g,Uh[E+3]=y}const Du=new Uint16Array(2178),jh=new Uint8Array(1089),cb=new Uint16Array(1089);function zz(l){return l===0?-.03125:l===32?.03125:0}var hb=_r([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Bz={type:2,extent:tr,loadGeometry:()=>[[new H(0,0),new H(tr+1,0),new H(tr+1,tr+1),new H(0,tr+1),new H(0,0)]]};class tA{constructor(o,c,d,g,y){this.tileID=o,this.uid=He(),this.uses=0,this.tileSize=c,this.tileZoom=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=y,g&&g.style&&(this._lastUpdatedBrightness=g.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",g&&g.transform&&(this.projection=g.transform.projection)}registerFadeDuration(o){const c=o+this.timeAdded;c<ma.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=$h(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,c,d){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(g,y){const b={};if(!y)return b;for(const M of g){const E=M.layerIds.map(P=>y.getLayer(P)).filter(Boolean);if(E.length!==0){M.layers=E,M.stateDependentLayerIds&&(M.stateDependentLayers=M.stateDependentLayerIds.map(P=>E.filter(O=>O.id===P)[0]));for(const P of E)b[P.fqid]=M}}return b}(o.buckets,c.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const y=this.buckets[g];if(y instanceof Z_){if(this.hasSymbolBuckets=!0,!d)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const y=this.buckets[g];if(y instanceof Z_&&y.hasRTLText){this.hasRTLText=!0,je.isLoading()||je.isLoaded()||Te()!=="deferred"||ze();break}}this.queryPadding=0;for(const g in this.buckets){const y=this.buckets[g],b=c.style.getOwnLayer(g);if(!b)continue;const M=b.queryRadius(y);this.queryPadding=Math.max(this.queryPadding,M)}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas),this._lastUpdatedBrightness=o.brightness}else this.collisionBoxArray=new H2}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(o){return this.buckets[o.fqid]}upload(o){for(const g in this.buckets){const y=this.buckets[g];y.uploadPending()&&y.upload(o)}const c=o.gl,d=this.imageAtlas;if(d&&!d.uploaded){const g=!!Object.keys(d.patternPositions).length;this.imageAtlasTexture=new Fc(o,d.image,c.RGBA,{useMipmap:g}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new Fc(o,this.glyphAtlasImage,c.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Fc(o,this.lineAtlas.image,c.R8),this.lineAtlas.uploaded=!0)}prepare(o,c,d){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture,d),!c||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const g=c.style.getBrightness();(this._lastUpdatedBrightness||g)&&(this._lastUpdatedBrightness&&g&&Math.abs(this._lastUpdatedBrightness-g)<.001||(this._lastUpdatedBrightness=g,this.updateBuckets(void 0,c)))}queryRenderedFeatures(o,c,d,g,y,b,M,E){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:g,pixelPosMatrix:M,transform:b,params:y,tileTransform:this.tileTransform},o,c,d):{}}querySourceFeatures(o,c){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const g=d.loadVTLayers(),y=c?c.sourceLayer:"",b=g._geojsonTileLayer||g[y];if(!b)return;const M=Rm(c&&c.filter),{z:E,x:P,y:O}=this.tileID.canonical,F={z:E,x:P,y:O};for(let V=0;V<b.length;V++){const U=b.feature(V);if(M.needGeometry){const Q=Bh(U,!0);if(!M.filter(new Ne(this.tileID.overscaledZ),Q,this.tileID.canonical))continue}else if(!M.filter(new Ne(this.tileID.overscaledZ),U))continue;const q=d.getId(U,y),K=new YO(U,E,P,O,q);K.tile=F,o.push(K)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}bucketsLoaded(){for(const o in this.buckets)if(this.buckets[o].uploadPending())return!1;return!0}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const c=this.expirationTime;if(o.cacheControl){const d=qe(o.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const d=Date.now();let g=!1;if(this.expirationTime>d)g=!1;else if(c)if(this.expirationTime<c)g=!0;else{const y=this.expirationTime-c;y?this.expirationTime=d+Math.max(y,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,c){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(o).length!==0&&c&&this.updateBuckets(o,c)}updateBuckets(o,c){if(!this.latestFeatureIndex)return;const d=this.latestFeatureIndex.loadVTLayers(),g=c.style.listImages(),y=c.style.getBrightness();for(const b in this.buckets){if(!c.style.hasLayer(b))continue;const M=this.buckets[b],E=M.layers[0].sourceLayer||"_geojsonTileLayer",P=d[E];let O={};if(o&&(O=o[E],!P||!O||Object.keys(O).length===0))continue;if(M.update(O,P,g,this.imageAtlas&&this.imageAtlas.patternPositions||{},y),M instanceof lb||M instanceof V1){const V=c.style.getOwnSourceCache(M.layers[0].source);c._terrain&&c._terrain.enabled&&V&&M.programConfigurations.needsUpload&&c._terrain._clearRenderCacheForTile(V.id,this.tileID)}const F=c&&c.style&&c.style.getOwnLayer(b);F&&(this.queryPadding=Math.max(this.queryPadding,F.queryRadius(M)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ma.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=ma.now()+o}setTexture(o,c){const d=c.context,g=d.gl;this.texture=this.texture||c.getTileTexture(o.width),this.texture&&this.texture instanceof Fc?this.texture.update(o,{useMipmap:!0}):(this.texture=new Fc(d,o,g.RGBA,{useMipmap:!0}),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE))}setDependencies(o,c){const d={};for(const g of c)d[g]=!0;this.dependencies[o]=d}hasDependency(o,c){for(const d of o){const g=this.dependencies[d];if(g){for(const y of c)if(g[y])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,c){if(!c||c.name==="mercator"||this._tileDebugBuffer)return;const d=Iu(Bz,this.tileID.canonical,this.tileTransform)[0],g=new Wr,y=new A_;for(let b=0;b<d.length;b++){const{x:M,y:E}=d[b];g.emplaceBack(M,E),y.emplaceBack(b)}y.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(y),this._tileDebugBuffer=o.createVertexBuffer(g,P_.members),this._tileDebugSegments=yn.simpleSegment(0,0,g.length,y.length)}_makeTileBoundsBuffers(o,c){if(this._tileBoundsBuffer||!c||c.name==="mercator")return;const d=Iu(Bz,this.tileID.canonical,this.tileTransform)[0];let g,y;if(this.isRaster){const b=function(M,E){const P=$h(M,E),O=Math.pow(2,M.z);for(let Q=0;Q<Eu;Q++)for(let ae=0;ae<Eu;ae++){const ge=Ko((M.x+(ae+zz(ae))/Js)/O),_e=Ia((M.y+(Q+zz(Q))/Js)/O),be=E.project(ge,_e),Ae=Q*Eu+ae;Du[2*Ae+0]=Math.round((be.x*P.scale-P.x)*tr),Du[2*Ae+1]=Math.round((be.y*P.scale-P.y)*tr)}jh.fill(0),cb.fill(0);for(let Q=2045;Q>=0;Q--){const ae=4*Q,ge=Uh[ae+0],_e=Uh[ae+1],be=Uh[ae+2],Ae=Uh[ae+3],Pe=ge+be>>1,Ge=_e+Ae>>1,Ke=Pe+Ge-_e,rt=Ge+ge-Pe,ft=_e*Eu+ge,st=Ae*Eu+be,It=Ge*Eu+Pe,Ut=Math.hypot((Du[2*ft+0]+Du[2*st+0])/2-Du[2*It+0],(Du[2*ft+1]+Du[2*st+1])/2-Du[2*It+1])>=16;jh[It]=jh[It]||(Ut?1:0),Q<1022&&(jh[It]=jh[It]||jh[(_e+rt>>1)*Eu+(ge+Ke>>1)]||jh[(Ae+rt>>1)*Eu+(be+Ke>>1)])}const F=new Hi,V=new Xi;let U=0;function q(Q,ae){const ge=ae*Eu+Q;return cb[ge]===0&&(F.emplaceBack(Du[2*ge+0],Du[2*ge+1],Q*tr/Js,ae*tr/Js),cb[ge]=++U),cb[ge]-1}function K(Q,ae,ge,_e,be,Ae){const Pe=Q+ge>>1,Ge=ae+_e>>1;if(Math.abs(Q-be)+Math.abs(ae-Ae)>1&&jh[Ge*Eu+Pe])K(be,Ae,Q,ae,Pe,Ge),K(ge,_e,be,Ae,Pe,Ge);else{const Ke=q(Q,ae),rt=q(ge,_e),ft=q(be,Ae);V.emplaceBack(Ke,rt,ft)}}return K(0,0,Js,Js,Js,0),K(Js,Js,0,0,0,Js),{vertices:F,indices:V}}(this.tileID.canonical,c);g=b.vertices,y=b.indices}else{g=new Hi,y=new Xi;for(const{x:M,y:E}of d)g.emplaceBack(M,E,0,0);const b=N1(g.int16,void 0,4);for(let M=0;M<b.length;M+=3)y.emplaceBack(b[M],b[M+1],b[M+2])}this._tileBoundsBuffer=o.createVertexBuffer(g,hb.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(y),this._tileBoundsSegments=yn.simpleSegment(0,0,g.length,y.length)}_makeGlobeTileDebugBuffers(o,c){const d=c.projection;if(!d||d.name!=="globe"||c.freezeTileCoverage)return;const g=this.tileID.canonical,y=O_(cO(g,c)),b=Rc(c.zoom);let M;b>0&&(M=a.m.invert(new Float64Array(16),c.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,g,c,y,M,b),this._makeGlobeTileDebugTextBuffer(o,g,c,y,M,b)}_globePoint(o,c,d,g,y,b,M){let E=R_(o,c,d);if(b){const P=1<<d.z,O=Au(g.center.lng),F=Cu(g.center.lat),V=(d.x+.5)/P-O;let U=0;V>.5?U=-1:V<-.5&&(U=1);let q=(o/tr+d.x)/P+U,K=(c/tr+d.y)/P;q=(q-O)*g._pixelsPerMercatorPixel+O,K=(K-F)*g._pixelsPerMercatorPixel+F;const Q=[q*g.worldSize,K*g.worldSize,0];a.v.transformMat4(Q,Q,b),E=kc(E,Q,M)}return a.v.transformMat4(E,E,y)}_makeGlobeTileDebugBorderBuffer(o,c,d,g,y,b){const M=new Wr,E=new A_,P=new tn,O=(V,U,q,K,Q)=>{const ae=(q-V)/(Q-1),ge=(K-U)/(Q-1),_e=M.length;for(let be=0;be<Q;be++){const Ae=V+be*ae,Pe=U+be*ge;M.emplaceBack(Ae,Pe);const Ge=this._globePoint(Ae,Pe,c,d,g,y,b);P.emplaceBack(Ge[0],Ge[1],Ge[2]),E.emplaceBack(_e+be)}},F=tr;O(0,0,F,0,16),O(F,0,F,F,16),O(F,F,0,F,16),O(0,F,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(E),this._tileDebugBuffer=o.createVertexBuffer(M,P_.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer(P,rO.members),this._tileDebugSegments=yn.simpleSegment(0,0,M.length,E.length)}_makeGlobeTileDebugTextBuffer(o,c,d,g,y,b){const M=tr/4,E=new Wr,P=new Xi,O=new tn,F=25;P.reserve(32),E.reserve(F),O.reserve(F);const V=(U,q)=>F*U+q;for(let U=0;U<F;U++){const q=U*M;for(let K=0;K<F;K++){const Q=K*M;E.emplaceBack(Q,q);const ae=this._globePoint(Q,q,c,d,g,y,b);O.emplaceBack(ae[0],ae[1],ae[2])}}for(let U=0;U<4;U++)for(let q=0;q<4;q++){const K=V(U,q),Q=V(U,q+1),ae=V(U+1,q),ge=V(U+1,q+1);P.emplaceBack(K,Q,ae),P.emplaceBack(ae,Q,ge)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(P),this._tileDebugTextBuffer=o.createVertexBuffer(E,P_.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(O,rO.members),this._tileDebugTextSegments=yn.simpleSegment(0,0,F,32)}destroy(o=!1){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!o&&this.texture&&this.texture instanceof Fc&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.latestFeatureIndex=null,this.state="unloaded"}}class aJ{constructor(o,c){this.max=o,this.onRemove=c,this.reset()}reset(){for(const o in this.data)for(const c of this.data[o])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(o,c,d){const g=o.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const y={value:c,timeout:void 0};if(d!==void 0&&(y.timeout=setTimeout(()=>{this.remove(o,y)},d)),this.data[g].push(y),this.order.push(g),this.order.length>this.max){const b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const c=this.data[o].shift();return c.timeout&&clearTimeout(c.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),c.value}getByKey(o){const c=this.data[o];return c?c[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,c){if(!this.has(o))return this;const d=o.wrapped().key,g=c===void 0?0:this.data[d].indexOf(c),y=this.data[d][g];return this.data[d].splice(g,1),y.timeout&&clearTimeout(y.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(y.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(o){const c=[];for(const d in this.data)for(const g of this.data[d])o(g.value)||c.push(g);for(const d of c)this.remove(d.value.tileID,d)}}class Tf{constructor(o,c,d,g){this.id=Tf.uniqueIdxCounter,Tf.uniqueIdxCounter++,this.context=o;const y=o.gl;this.buffer=y.createBuffer(),this.dynamicDraw=Boolean(d),this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||g||c.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){this.id=Tf.uniqueIdxCounter,Tf.uniqueIdxCounter++;const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Tf.uniqueIdxCounter=0;class rg{constructor(o,c,d){this.func=o,this.mask=c,this.range=d}}rg.ReadOnly=!1,rg.ReadWrite=!0,rg.disabled=new rg(519,rg.ReadOnly,[0,1]);const rA=7680;class iA{constructor(o,c,d,g,y,b){this.test=o,this.ref=c,this.mask=d,this.fail=g,this.depthFail=y,this.pass=b}}iA.disabled=new iA({func:519,mask:0},0,0,rA,rA,rA);class Qs{constructor(o,c,d,g){this.blendFunction=o,this.blendColor=c,this.mask=d,this.blendEquation=g}}Qs.Replace=[1,0,1,0],Qs.disabled=new Qs(Qs.Replace,sn.transparent,[!1,!1,!1,!1]),Qs.unblended=new Qs(Qs.Replace,sn.transparent,[!0,!0,!0,!0]),Qs.alphaBlended=new Qs([1,771,1,771],sn.transparent,[!0,!0,!0,!0]),Qs.multiply=new Qs([774,0,774,0],sn.transparent,[!0,!0,!0,!0]);const nA=1029,aA=2305;class Nl{constructor(o,c,d){this.enable=o,this.mode=c,this.frontFace=d}}Nl.disabled=new Nl(!1,nA,aA),Nl.backCCW=new Nl(!0,nA,aA),Nl.backCW=new Nl(!0,nA,2304),Nl.frontCW=new Nl(!0,1028,2304),Nl.frontCCW=new Nl(!0,1028,aA);class Mf extends Mo{constructor(o,c,d){super(),this.id=o,this._onlySymbols=d,c.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),c.on("error",()=>{this._sourceErrored=!0}),this._source=c,this._tiles={},this._cache=new aJ(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=c.minTileCacheSize,this._maxTileCacheSize=c.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this._coveredTiles={},this._shadowCasterTiles={},this._state=new uK,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(o){this.map=o,this._minTileCacheSize=this._minTileCacheSize===void 0&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles){const c=this._tiles[o];if(c.state!=="errored"&&(c.state!=="loaded"||!c.bucketsLoaded()))return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,c){return o.isSymbolTile=this._onlySymbols,o.isExtraShadowCaster=this._shadowCasterTiles[o.tileID.key],this._source.loadTile(o,c)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,()=>{})}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o,()=>{})}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const d=this._tiles[c];d.upload(o),d.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return et(this._tiles).map(o=>o.tileID).sort(Fz).map(o=>o.key)}getRenderableIds(o,c){const d=[];for(const g in this._tiles)this._isIdRenderable(+g,o,c)&&d.push(this._tiles[g]);return o?d.sort((g,y)=>{const b=g.tileID,M=y.tileID,E=new H(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),P=new H(M.canonical.x,M.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-M.overscaledZ||P.y-E.y||P.x-E.x}).map(g=>g.tileID.key):d.map(g=>g.tileID).sort(Fz).map(g=>g.key)}hasRenderableParent(o){const c=this.findLoadedParent(o,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(o,c,d){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(c||!this._tiles[o].holdingForFade())&&(d||!this._shadowCasterTiles[o])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(+o,"reloading")}}_reloadTile(o,c){const d=this._tiles[o];d&&(d.state!=="loading"&&(d.state=c),this._loadTile(d,this._tileLoaded.bind(this,d,o,c)))}_tileLoaded(o,c,d,g){if(g)if(o.state="errored",g.status!==404)this._source.fire(new $s(g,{tile:o}));else{if(!(o.tileID.key in this._loadedParentTiles))return void this._source.fire(new ao("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id}));if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const y=this.map.painter.terrain;this.update(this.transform,y.getScaledDemTileSize(),!0),y.resetTileLookupCache(this.id)}else this.update(this.transform)}else o.timeAdded=ma.now(),d==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(c,o),this._source.type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new ao("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const c=this.getRenderableIds();for(let g=0;g<c.length;g++){const y=c[g];if(o.neighboringTiles&&o.neighboringTiles[y]){const b=this.getTileByID(y);d(o,b),d(b,o)}}function d(g,y){if(!g.dem||g.dem.borderReady)return;g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0;let b=y.tileID.canonical.x-g.tileID.canonical.x;const M=y.tileID.canonical.y-g.tileID.canonical.y,E=Math.pow(2,g.tileID.canonical.z),P=y.tileID.key;b===0&&M===0||Math.abs(M)>1||(Math.abs(b)>1&&(Math.abs(b+E)===1?b+=E:Math.abs(b-E)===1&&(b-=E)),y.dem&&g.dem&&(g.dem.backfillBorder(y.dem,b,M),g.neighboringTiles&&g.neighboringTiles[P]&&(g.neighboringTiles[P].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,c,d,g){for(const y in this._tiles){let b=this._tiles[y];if(g[y]||!b.hasData()||b.tileID.overscaledZ<=c||b.tileID.overscaledZ>d)continue;let M=b.tileID;for(;b&&b.tileID.overscaledZ>c+1;){const P=b.tileID.scaledTo(b.tileID.overscaledZ-1);b=this._tiles[P.key],b&&b.hasData()&&(M=P)}let E=M;for(;E.overscaledZ>c;)if(E=E.scaledTo(E.overscaledZ-1),o[E.key]){g[M.key]=M;break}}}findLoadedParent(o,c){if(o.key in this._loadedParentTiles){const d=this._loadedParentTiles[o.key];return d&&d.tileID.overscaledZ>=c?d:null}for(let d=o.overscaledZ-1;d>=c;d--){const g=o.scaledTo(d),y=this._getLoadedTile(g);if(y)return y}}_getLoadedTile(o){const c=this._tiles[o.key];return c&&c.hasData()?c:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,c){c=c||this._source.tileSize;const d=Math.ceil(o.width/c)+1,g=Math.ceil(o.height/c)+1,y=Math.floor(d*g*5),b=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,y):y,M=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(M)}handleWrapJump(o){const c=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,c){const d={};for(const g in this._tiles){const y=this._tiles[g];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+c),d[y.tileID.key]=y}this._tiles=d;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(+g,this._tiles[g])}}update(o,c,d,g){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!d)return;let y;if(this.updateCacheSize(o,c),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?y=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(E=>new _a(E.canonical.z,E.wrap,E.canonical.z,E.canonical.x,E.canonical.y)):(y=o.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!d,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(y=y.filter(E=>this._source.hasTile(E)))):y=[],y.length>0&&this.castsShadows&&g&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!oA(this._source.type)){const E=o.coveringZoomLevel({tileSize:c||this._source.tileSize,roundZoom:this._source.roundZoom&&!d}),P=Math.min(E,this._source.maxzoom),O=o.extendTileCoverForShadows(y,g,P);for(const F of O)this._shadowCasterTiles[F.key]=!0,y.push(F)}const b=this._updateRetainedTiles(y);if(oA(this._source.type)&&y.length!==0){const E={},P={},O=Object.keys(b);for(const V of O){const U=b[V],q=this._tiles[V];if(!q||q.fadeEndTime&&q.fadeEndTime<=ma.now())continue;const K=this.findLoadedParent(U,Math.max(U.overscaledZ-Mf.maxOverzooming,this._source.minzoom));K&&(this._addTile(K.tileID),E[K.tileID.key]=K.tileID),P[V]=U}const F=y[y.length-1].overscaledZ;for(const V in this._tiles){const U=this._tiles[V];if(b[V]||!U.hasData())continue;let q=U.tileID;for(;q.overscaledZ>F;){q=q.scaledTo(q.overscaledZ-1);const K=this._tiles[q.key];if(K&&K.hasData()&&P[q.key]){b[V]=U.tileID;break}}}for(const V in E)b[V]||(this._coveredTiles[V]=!0,b[V]=E[V])}for(const E in b)this._tiles[E].clearFadeHold();const M=function(E,P){const O=[];for(const F in E)F in P||O.push(F);return O}(this._tiles,b);for(const E of M){const P=this._tiles[E];P.hasSymbolBuckets&&!P.holdingForFade()?P.setHoldDuration(this.map._fadeDuration):P.hasSymbolBuckets&&!P.symbolFadeFinished()||this._removeTile(+E)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const c={};if(o.length===0)return c;const d={},g=o.reduce((P,O)=>Math.min(P,O.overscaledZ),1/0),y=o[0].overscaledZ,b=Math.max(y-Mf.maxOverzooming,this._source.minzoom),M=Math.max(y+Mf.maxUnderzooming,this._source.minzoom),E={};for(const P of o){const O=this._addTile(P);c[P.key]=P,O.hasData()||g<this._source.maxzoom&&(E[P.key]=P)}this._retainLoadedChildren(E,g,M,c);for(const P of o){let O=this._tiles[P.key];if(O.hasData())continue;if(P.canonical.z>=this._source.maxzoom){const V=P.children(this._source.maxzoom)[0],U=this.getTile(V);if(U&&U.hasData()){c[V.key]=V;continue}}else{const V=P.children(this._source.maxzoom);if(c[V[0].key]&&c[V[1].key]&&c[V[2].key]&&c[V[3].key])continue}let F=O.wasRequested();for(let V=P.overscaledZ-1;V>=b;--V){const U=P.scaledTo(V);if(d[U.key]||(d[U.key]=!0,O=this.getTile(U),!O&&F&&(O=this._addTile(U)),O&&(c[U.key]=U,F=O.wasRequested(),O.hasData())))break}}return c}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const c=[];let d,g=this._tiles[o].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){d=this._loadedParentTiles[g.key];break}c.push(g.key);const y=g.scaledTo(g.overscaledZ-1);if(d=this._getLoadedTile(y),d)break;g=y}for(const y of c)this._loadedParentTiles[y]=d}}_addTile(o){let c=this._tiles[o.key];if(c)return c.isExtraShadowCaster!==!0||!!this._shadowCasterTiles[o.key]||this._reloadTile(o.key,"reloading"),c;c=this._cache.getAndRemove(o),c&&(this._setTileReloadTimer(o.key,c),c.tileID=o,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,c)));const d=Boolean(c);if(!d){const g=this.map?this.map.painter:null;c=new tA(o,this._source.tileSize*o.overscaleFactor(),this.transform.tileZoom,g,this._isRaster),this._loadTile(c,this._tileLoaded.bind(this,c,o.key,c.state))}return c?(c.uses++,this._tiles[o.key]=c,d||this._source.fire(new ao("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null}_setTileReloadTimer(o,c){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const d=c.getExpiryTimeout();d&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},d))}_removeTile(o){const c=this._tiles[o];c&&(c.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,c,d){const g=[],y=this.transform;if(!y)return g;const b=y.projection.name==="globe",M=Au(y.center.lng);for(const E in this._tiles){const P=this._tiles[E];if(d&&P.clearQueryDebugViz(),P.holdingForFade())continue;let O;if(b){const F=P.tileID.canonical;if(F.z===0){const V=[Math.abs(Ce(M,...X_(F,-1))-M),Math.abs(Ce(M,...X_(F,1))-M)];O=[0,2*V.indexOf(Math.min(...V))-1]}else{const V=[Math.abs(Ce(M,...X_(F,-1))-M),Math.abs(Ce(M,...X_(F,0))-M),Math.abs(Ce(M,...X_(F,1))-M)];O=[V.indexOf(Math.min(...V))-1]}}else O=[0];for(const F of O){const V=o.containsTile(P,y,c,F);V&&g.push(V)}}return g}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(o){return this._getRenderableCoordinates(o)}_getRenderableCoordinates(o,c){const d=this.getRenderableIds(o,c).map(y=>this._tiles[y].tileID),g=this.transform.projection.name==="globe";for(const y of d)y.projMatrix=this.transform.calculateProjMatrix(y.toUnwrapped()),y.expandedProjMatrix=g?this.transform.calculateProjMatrix(y.toUnwrapped(),!1,!0):y.projMatrix;return d}sortCoordinatesByDistance(o){const c=o.slice(),d=this.transform._camera.position,g=this.transform._camera.forward(),y={};for(const b of c){const M=1/(1<<b.canonical.z);y[b.key]=((b.canonical.x+.5)*M+b.wrap-d[0])*g[0]+((b.canonical.y+.5)*M-d[1])*g[1]-d[2]*g[2]}return c.sort((b,M)=>y[b.key]-y[M.key]),c}hasTransition(){if(this._source.hasTransition())return!0;if(oA(this._source.type))for(const o in this._tiles){const c=this._tiles[o];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=ma.now())return!0}return!1}setFeatureState(o,c,d){this._state.updateState(o=o||"_geojsonTileLayer",c,d)}removeFeatureState(o,c,d){this._state.removeFeatureState(o=o||"_geojsonTileLayer",c,d)}getFeatureState(o,c){return this._state.getState(o=o||"_geojsonTileLayer",c)}setDependencies(o,c,d){const g=this._tiles[o];g&&g.setDependencies(c,d)}reloadTilesForDependencies(o,c){for(const d in this._tiles)this._tiles[d].hasDependency(o,c)&&this._reloadTile(+d,"reloading");this._cache.filter(d=>!d.hasDependency(o,c))}_preloadTiles(o,c){if(!this._sourceLoaded){const M=()=>{this._sourceLoaded&&(this._source.off("data",M),this._preloadTiles(o,c))};return void this._source.on("data",M)}const d=new Map,g=Array.isArray(o)?o:[o],y=this.map.painter.terrain,b=this.usedForTerrain&&y?y.getScaledDemTileSize():this._source.tileSize;for(const M of g){const E=M.coveringTiles({tileSize:b,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const P of E)d.set(P.key,P);this.usedForTerrain&&M.updateElevation(!1)}St(Array.from(d.values()),(M,E)=>{const P=new tA(M,this._source.tileSize*M.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(P,O=>{this._source.type==="raster-dem"&&P.dem&&this._backfillDEM(P),E(O,P)})},c)}}function Fz(l,o){const c=Math.abs(2*l.wrap)-+(l.wrap<0),d=Math.abs(2*o.wrap)-+(o.wrap<0);return l.overscaledZ-o.overscaledZ||d-c||o.canonical.y-l.canonical.y||o.canonical.x-l.canonical.x}function oA(l){return l==="raster"||l==="image"||l==="video"||l==="custom"}function X_(l,o){const c=1<<l.z;return[l.x/c+o,(l.x+1)/c+o]}Mf.maxOverzooming=10,Mf.maxUnderzooming=3;const oJ=_r([{name:"a_pos_3f",components:3,type:"Float32"}]),sJ=_r([{name:"a_color_3f",components:3,type:"Float32"}]),lJ=_r([{name:"a_color_4f",components:4,type:"Float32"}]),uJ=_r([{name:"a_uv_2f",components:2,type:"Float32"}]),cJ=_r([{name:"a_normal_3f",components:3,type:"Float32"}]),hJ=_r([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),dJ=_r([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]);function Nz(l,o){const c=db(l.projection,l.zoom,l.width,l.height),d=function(y,b,M,E,P){const O=new Gi(M.lng-180*Hh,M.lat),F=new Gi(M.lng+180*Hh,M.lat),V=y.project(O.lng,O.lat),U=y.project(F.lng,F.lat),q=-Math.atan2(U.y-V.y,U.x-V.x),K=Na.fromLngLat(M);K.y=Ce(K.y,-1+Hh,1-Hh);const Q=K.toLngLat(),ae=y.project(Q.lng,Q.lat),ge=Na.fromLngLat(Q);ge.x+=Hh;const _e=ge.toLngLat(),be=y.project(_e.lng,_e.lat),Ae=Gz(be.x-ae.x,be.y-ae.y,q),Pe=Na.fromLngLat(Q);Pe.y+=Hh;const Ge=Pe.toLngLat(),Ke=y.project(Ge.lng,Ge.lat),rt=Gz(Ke.x-ae.x,Ke.y-ae.y,q),ft=Math.abs(Ae.x)/Math.abs(rt.y),st=a.m.identity([]);a.m.rotateZ(st,st,-q*(1-(P?0:E)));const It=a.m.identity([]);return a.m.scale(It,It,[1,1-(1-ft)*E,1]),It[4]=-rt.x/rt.y*E,a.m.rotateZ(It,It,q),a.m.multiply(It,st,It),It}(l.projection,0,l.center,c,o),g=Vz(l);return a.m.scale(d,d,[g,g,1]),d}function Vz(l){const o=l.projection,c=db(l.projection,l.zoom,l.width,l.height),d=$z(o,l.center),g=$z(o,Gi.convert(o.center));return Math.pow(2,d*c+(1-c)*g)}function db(l,o,c,d,g=1/0){const y=l.range;if(!y)return 0;const b=Math.min(g,Math.max(c,d)),M=Math.log(b/1024)/Math.LN2;return We(y[0]+M,y[1]+M,o)}const Hh=1/4e4;function $z(l,o){const c=Ce(o.lat,-Fn,Fn),d=new Gi(o.lng-180*Hh,c),g=new Gi(o.lng+180*Hh,c),y=l.project(d.lng,c),b=l.project(g.lng,c),M=Na.fromLngLat(d),E=Na.fromLngLat(g),P=b.x-y.x,O=b.y-y.y,F=E.x-M.x,V=E.y-M.y,U=Math.sqrt((F*F+V*V)/(P*P+O*O));return Math.log(U)/Math.LN2}function Gz(l,o,c){const d=Math.cos(c),g=Math.sin(c);return{x:l*d-o*g,y:l*g+o*d}}function Uz(l,o,c){return o*(tr/(l.tileSize*Math.pow(2,c-l.tileID.overscaledZ)))}function jz(l,o,c){a.m.identity(l),a.m.rotateZ(l,l,se(o[2])),a.m.rotateX(l,l,se(o[0])),a.m.rotateY(l,l,se(o[1])),a.m.scale(l,l,c),a.m.multiply(l,l,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function fb(l,o,c,d,g,y,b,M){const E=[c[0]-o[0],c[1]-o[1],0],P=[d[0]-o[0],d[1]-o[1],0];if(a.v.length(E)<1e-12||a.v.length(P)<1e-12)return a.q.identity(l);const O=a.v.cross([],E,P);a.v.normalize(O,O),a.v.subtract(P,d,o),E[2]=(y-g)*M,P[2]=(b-g)*M;const F=E;return a.v.cross(F,E,P),a.v.normalize(F,F),a.q.rotationTo(l,O,F)}function Hz(l,o,c=!1){const d=Rc(o.zoom),g=function(y,b,M){const E=b.worldSize,P=[y[12],y[13],y[14]],O=Ia(P[1]/E),F=Ko(P[0]/E),V=a.m.identity([]),U=mo(1,O)*E,q=mo(1,0)*E*bf(O,b.zoom),K=1/xM(E);let Q=q*K;if(M){const be=db(b.projection,b.zoom,b.width,b.height,1024);Q=K*b.projection.pixelSpaceConversion(b.center.lat,E,be)}const ae=xf(O,F);a.v.add(ae,ae,a.v.scale([],a.v.normalize([],ae),U*Q*P[2]));const ge=function(be){const Ae=[be[0],be[1],be[2]];let Pe=[0,1,0];const Ge=a.v.cross([],Pe,Ae);return a.v.cross(Pe,Ae,Ge),a.v.squaredLength(Pe)===0&&(Pe=[0,1,0],a.v.cross(Ge,Ae,Pe)),a.v.normalize(Ge,Ge),a.v.normalize(Pe,Pe),a.v.normalize(Ae,Ae),[Ge[0],Ge[1],Ge[2],0,Pe[0],Pe[1],Pe[2],0,Ae[0],Ae[1],Ae[2],0,be[0],be[1],be[2],1]}(ae);a.m.scale(V,V,[Q,Q,Q*U]),a.m.translate(V,V,[-P[0],-P[1],-P[2]]);const _e=a.m.multiply([],b.globeMatrix,ge);return a.m.multiply(_e,_e,V),a.m.multiply(_e,_e,y),_e}(l,o,c);if(d>0){const y=function(b,M){const E=M.worldSize,P=mo(1,0)*E*bf(M.center.lat,M.zoom)/xM(E),O=mo(1,M.center.lat)*E,F=a.m.identity([]);return a.m.rotateY(F,F,se(M.center.lng)),a.m.rotateX(F,F,se(M.center.lat)),a.m.translate(F,F,[0,0,Ms]),a.m.scale(F,F,[P,P,P*O]),a.m.translate(F,F,[M.point.x-.5*E,M.point.y-.5*E,0]),a.m.multiply(F,F,b),a.m.multiply(F,M.globeMatrix,F)}(l,o);return function(b,M,E){const P=(q,K,Q)=>{const ae=a.v.length(q),ge=a.v.length(K),_e=kc(q,K,Q);return a.v.scale(_e,_e,1/a.v.length(_e)*si(ae,ge,Q))},O=P([b[0],b[1],b[2]],[M[0],M[1],M[2]],E),F=P([b[4],b[5],b[6]],[M[4],M[5],M[6]],E),V=P([b[8],b[9],b[10]],[M[8],M[9],M[10]],E),U=kc([b[12],b[13],b[14]],[M[12],M[13],M[14]],E);return[O[0],O[1],O[2],0,F[0],F[1],F[2],0,V[0],V[1],V[2],0,U[0],U[1],U[2],1]}(g,y,d)}return g}const Af=64,pb={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4};function Y_(l,o,c=!1){l.uploaded||(l.gfxTexture=new Fc(o,l.image,c?o.gl.R8:o.gl.RGBA,{useMipmap:l.sampler.minFilter>=o.gl.NEAREST_MIPMAP_NEAREST}),l.uploaded=!0,l.image=null)}function fJ(l,o,c){l.indexBuffer=o.createIndexBuffer(l.indexArray,!1,!0),l.vertexBuffer=o.createVertexBuffer(l.vertexArray,oJ.members,!1,!0),l.normalArray&&(l.normalBuffer=o.createVertexBuffer(l.normalArray,cJ.members,!1,!0)),l.texcoordArray&&(l.texcoordBuffer=o.createVertexBuffer(l.texcoordArray,uJ.members,!1,!0)),l.colorArray&&(l.colorBuffer=o.createVertexBuffer(l.colorArray,(l.colorArray.bytesPerElement===12?sJ:lJ).members,!1,!0)),l.featureArray&&(l.pbrBuffer=o.createVertexBuffer(l.featureArray,dJ.members,!0)),l.segments=yn.simpleSegment(0,0,l.vertexArray.length,l.indexArray.length);const d=l.material;d.pbrMetallicRoughness.baseColorTexture&&Y_(d.pbrMetallicRoughness.baseColorTexture,o),d.pbrMetallicRoughness.metallicRoughnessTexture&&Y_(d.pbrMetallicRoughness.metallicRoughnessTexture,o),d.normalTexture&&Y_(d.normalTexture,o),d.occlusionTexture&&Y_(d.occlusionTexture,o,c),d.emissionTexture&&Y_(d.emissionTexture,o)}function sA(l,o,c){if(l.meshes)for(const d of l.meshes)fJ(d,o,c);if(l.children)for(const d of l.children)sA(d,o,c)}function mb(l){if(l.meshes)for(const o of l.meshes)o.indexArray.destroy(),o.vertexArray.destroy(),o.colorArray&&o.colorArray.destroy(),o.normalArray&&o.normalArray.destroy(),o.texcoordArray&&o.texcoordArray.destroy(),o.featureArray&&o.featureArray.destroy();if(l.children)for(const o of l.children)mb(o)}function gb(l){if(l.meshes)for(const c of l.meshes)c.vertexBuffer&&(c.vertexBuffer.destroy(),c.indexBuffer.destroy(),c.normalBuffer&&c.normalBuffer.destroy(),c.texcoordBuffer&&c.texcoordBuffer.destroy(),c.colorBuffer&&c.colorBuffer.destroy(),c.pbrBuffer&&c.pbrBuffer.destroy(),c.segments.destroy(),c.material&&((o=c.material).pbrMetallicRoughness.baseColorTexture&&o.pbrMetallicRoughness.baseColorTexture.gfxTexture&&o.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),o.pbrMetallicRoughness.metallicRoughnessTexture&&o.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&o.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),o.normalTexture&&o.normalTexture.gfxTexture&&o.normalTexture.gfxTexture.destroy(),o.emissionTexture&&o.emissionTexture.gfxTexture&&o.emissionTexture.gfxTexture.destroy(),o.occlusionTexture&&o.occlusionTexture.gfxTexture&&o.occlusionTexture.gfxTexture.destroy()));var o;if(l.children)for(const c of l.children)gb(c)}class Wz{constructor(o,c){this.feature=o,this.instancedDataOffset=c,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class qz{constructor(){this.instancedDataArray=new U2,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class Zz{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.fqid),this.projection=o.projection,this.index=o.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0}}populate(o,c,d,g){this.tileToMeter=D1(d);const y=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:b,id:M,index:E,sourceLayerIndex:P}of o){const O=Bh(b,y);if(!this.layers[0]._featureFilter.filter(new Ne(this.zoom),O,d))continue;const F={id:M,sourceLayerIndex:P,index:E,geometry:y?O.geometry:Iu(b,d,g),properties:b.properties,type:b.type,patterns:{}},V=this.addFeature(F,F.geometry,O);V&&c.featureIndex.insert(b,F.geometry,E,P,this.index,this.instancesPerModel[V].instancedDataArray.length)}this.lookup=null}update(o,c,d,g){for(const y in this.instancesPerModel){const b=this.instancesPerModel[y];for(const M in o)b.idToFeaturesIndex.hasOwnProperty(M)&&this.evaluate(b.features[b.idToFeaturesIndex[M]],o[M],b,!0)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let o=!1;for(const c in this.instancesPerModel){const d=this.instancesPerModel[c];for(const g of d.features){const y=this.layers[0],b=g.feature,M=this.canonical,E=y.paint.get("model-rotation").evaluate(b,{},M),P=y.paint.get("model-scale").evaluate(b,{},M),O=y.paint.get("model-translation").evaluate(b,{},M);a.v.exactEquals(g.rotation,E)&&a.v.exactEquals(g.scale,P)&&a.v.exactEquals(g.translation,O)||(this.evaluate(g,g.featureStates,d,!0),o=!0)}}return o}isEmpty(){for(const o in this.instancesPerModel)if(this.instancesPerModel[o].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(o){if(!this.uploaded)for(const c in this.instancesPerModel){const d=this.instancesPerModel[c];d.instancedDataArray.length<0||d.instancedDataArray.length===0||(d.instancedDataBuffer?d.instancedDataBuffer.updateData(d.instancedDataArray):d.instancedDataBuffer=o.createVertexBuffer(d.instancedDataArray,hJ.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const o in this.instancesPerModel){const c=this.instancesPerModel[o];c.instancedDataArray.length!==0&&c.instancedDataBuffer&&c.instancedDataBuffer.destroy()}}addFeature(o,c,d){const g=this.layers[0],y=g.layout.get("model-id").evaluate(d,{},this.canonical);if(!y)return Ue(`modelId is not evaluated for layer ${g.id} and it is not going to get rendered.`),y;this.instancesPerModel[y]||(this.instancesPerModel[y]=new qz);const b=this.instancesPerModel[y],M=b.instancedDataArray,E=new Wz(d,M.length);for(const P of c)for(const O of P){if(O.x<0||O.x>=tr||O.y<0||O.y>=tr)continue;const F=(this.lookupDim-1)/tr,V=this.lookupDim*(O.y*F|0)+O.x*F|0;if(this.lookup){if(this.lookup[V]!==0)continue;this.lookup[V]=1}this.instanceCount++;const U=M.length;M.resize(U+1),b.instancesEvaluatedElevation.push(0),M.float32[16*U]=O.x,M.float32[16*U+1]=O.y}return E.instancedDataCount=b.instancedDataArray.length-E.instancedDataOffset,E.instancedDataCount>0&&(o.id&&(b.idToFeaturesIndex[o.id]=b.features.length),b.features.push(E),this.evaluate(E,{},b,!1)),y}evaluate(o,c,d,g){const y=this.layers[0],b=o.feature,M=this.canonical,E=o.rotation=y.paint.get("model-rotation").evaluate(b,c,M),P=o.scale=y.paint.get("model-scale").evaluate(b,c,M),O=o.translation=y.paint.get("model-translation").evaluate(b,c,M),F=y.paint.get("model-color").evaluate(b,c,M);F.a=y.paint.get("model-color-mix-intensity").evaluate(b,c,M);const V=[];this.maxVerticalOffset<O[2]&&(this.maxVerticalOffset=O[2]),this.maxScale=Math.max(Math.max(this.maxScale,P[0]),Math.max(P[1],P[2])),jz(V,E,P);const U=Math.round(100*F.a)+F.b/1.05;for(let q=0;q<o.instancedDataCount;++q){const K=o.instancedDataOffset+q,Q=16*K,ae=d.instancedDataArray.float32;let ge=0;g&&(ge=ae[Q+6]-d.instancesEvaluatedElevation[K]);const _e=0|ae[Q+1];ae[Q]=(0|ae[Q])+F.r/1.05,ae[Q+1]=_e+F.g/1.05,ae[Q+2]=U,ae[Q+3]=1/(M.z>10?this.tileToMeter:D1(M,_e)),ae[Q+4]=O[0],ae[Q+5]=O[1],ae[Q+6]=O[2]+ge,ae[Q+7]=V[0],ae[Q+8]=V[1],ae[Q+9]=V[2],ae[Q+10]=V[4],ae[Q+11]=V[5],ae[Q+12]=V[6],ae[Q+13]=V[8],ae[Q+14]=V[9],ae[Q+15]=V[10],d.instancesEvaluatedElevation[K]=O[2]}}}hr(Zz,"ModelBucket",{omit:["layers"]}),hr(qz,"PerModelAttributes"),hr(Wz,"ModelFeature");const pJ=new Rt({visibility:new Ee(ut.layout_model.visibility),"model-id":new at(ut.layout_model["model-id"])});var mJ={paint:new Rt({"model-opacity":new Ee(ut.paint_model["model-opacity"]),"model-rotation":new at(ut.paint_model["model-rotation"]),"model-scale":new at(ut.paint_model["model-scale"]),"model-translation":new at(ut.paint_model["model-translation"]),"model-color":new at(ut.paint_model["model-color"]),"model-color-mix-intensity":new at(ut.paint_model["model-color-mix-intensity"]),"model-type":new Ee(ut.paint_model["model-type"]),"model-cast-shadows":new Ee(ut.paint_model["model-cast-shadows"]),"model-receive-shadows":new Ee(ut.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Ee(ut.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new at(ut.paint_model["model-emissive-strength"]),"model-roughness":new at(ut.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new at(ut.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Ee(ut.paint_model["model-cutoff-fade-range"])}),layout:pJ};const lA=new Float32Array(262144),Cf=new Uint8Array(262144);function Xz(l){let o=0;if(l.meshes)for(const c of l.meshes)o=Math.max(o,c.aabb.max[2]);if(l.children)for(const c of l.children)o=Math.max(o,Xz(c));return o}const Yz=["","wall","door","roof","window","lamp","logo"];class Kz{constructor(o){this.node=o,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.feature={type:"Point",id:o.id,geometry:[],properties:{height:Xz(o)}}}}class Jz{constructor(o,c,d,g){this.nodes=o,this.id=c,this.modelTraits|=pb.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,d&&(this.modelTraits|=pb.HasMapboxMeshFeatures),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=g,this.dirty=!0,this.needsUpload=!1}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(o){if(!this.needsUpload)return;const c=this.getNodesInfo();for(const d of c){const g=d.node;this.uploaded?this.updatePbrBuffer(g):sA(g,o,!0)}for(const d of c)mb(d.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(o){let c=!1;if(!o.meshes)return c;for(const d of o.meshes)d.pbrBuffer&&(d.pbrBuffer.updateData(d.featureArray),c=!0);return c}needsReEvaluation(o,c,d){const g=o.transform.projectionOptions,y=o.style.getBrightness(),b=this.brightness!==y;return!!(!this.uploaded||this.dirty||g.name!==this.projection.name||K_(d.paint.get("model-color").value,b)||K_(d.paint.get("model-color-mix-intensity").value,b)||K_(d.paint.get("model-roughness").value,b)||K_(d.paint.get("model-emissive-strength").value,b)||K_(d.paint.get("model-height-based-emissive-strength-multiplier").value,b))&&(this.projection=g,this.brightness=y,!0)}evaluateScale(o,c){if(o.transform.zoom===this.zoom)return;this.zoom=o.transform.zoom;const d=this.getNodesInfo(),g=this.id.canonical;for(const y of d){const b=y.feature;y.evaluatedScale=c.paint.get("model-scale").evaluate(b,{},g)}}evaluate(o){const c=this.getNodesInfo();for(const d of c){if(!d.node.meshes)continue;const g=d.feature,y=d.node.meshes&&d.node.meshes[0].featureData,b=d.evaluatedColor[2],M=d.evaluatedRMEA[2],E=this.id.canonical;if(d.hasTranslucentParts=!1,y){for(let P=0;P<Yz.length;P++){const O=Yz[P];O.length&&(g.properties.part=O);const F=o.paint.get("model-color").evaluate(g,{},E),V=o.paint.get("model-color-mix-intensity").evaluate(g,{},E);d.evaluatedColor[P]=[F.r,F.g,F.b,V],d.evaluatedRMEA[P][0]=o.paint.get("model-roughness").evaluate(g,{},E),d.evaluatedRMEA[P][2]=o.paint.get("model-emissive-strength").evaluate(g,{},E),d.evaluatedRMEA[P][3]=F.a,d.emissionHeightBasedParams[P]=o.paint.get("model-height-based-emissive-strength-multiplier").evaluate(g,{},E),!d.hasTranslucentParts&&F.a<1&&(d.hasTranslucentParts=!0)}delete g.properties.part,vJ(d,b!==d.evaluatedColor[2]||M!==d.evaluatedRMEA[2])}else d.evaluatedRMEA[0][2]=o.paint.get("model-emissive-strength").evaluate(g,{},E);d.evaluatedScale=o.paint.get("model-scale").evaluate(g,{},E),this.updatePbrBuffer(d.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(o,c,d,g){const y=o.findDEMTileFor(d);if(y&&(y.tileID.canonical!==this.terrainTile||c!==this.terrainExaggeration)){if(y.dem&&y.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=y.tileID.overscaledZ;const b=Xm.create(o,d,y);if(!b)return;this.modelTraits&pb.HasMapboxMeshFeatures&&this.updateDEM(o,b,d,g);for(const M of this.getNodesInfo()){const E=M.node;if(!E.footprint||!E.footprint.vertices||!E.footprint.vertices.length)continue;const P=E.footprint.vertices;let O=b.getElevationAt(P[0].x,P[0].y,!0,!0);for(let F=1;F<P.length;F++)O=Math.min(O,b.getElevationAt(P[F].x,P[F].y,!0,!0));E.elevation=O}}this.terrainTile=y.tileID.canonical,this.terrainExaggeration=c}}updateDEM(o,c,d,g){let y=c._dem._modifiedForSources[g];if(y===void 0&&(c._dem._modifiedForSources[g]=[],y=c._dem._modifiedForSources[g]),y.includes(d.canonical))return;const b=c._dem.dim;y.push(d.canonical);let M=!1;for(const E of this.getNodesInfo()){const P=E.node;if(!P.footprint||!P.footprint.grid)continue;const O=P.footprint.grid,F=c.tileCoordToPixel(O.min.x,O.min.y),V=c.tileCoordToPixel(O.max.x,O.max.y),U=Math.min(Math.min(b-V.y,F.x),Math.min(F.y,b-V.x));if(U<0)continue;const q=Ce(U,2,5);let K=Math.max(0,F.x-q),Q=Math.max(0,F.y-q),ae=Math.min(V.x+q,b-1),ge=Math.min(V.y+q,b-1);for(let Pe=Q;Pe<=ge;++Pe)for(let Ge=K;Ge<=ae;++Ge)Cf[Pe*b+Ge]=255;let _e=0,be=0;for(let Pe=0;Pe<O.cellsY;++Pe)for(let Ge=0;Ge<O.cellsX;++Ge){if(!O.cells[Pe*O.cellsX+Ge])continue;const Ke=c.tileCoordToPixel(O.min.x+Ge/O.xScale,O.min.y+Pe/O.yScale),rt=c.tileCoordToPixel(O.min.x+(Ge+1)/O.xScale,O.min.y+(Pe+1)/O.yScale);for(let ft=Ke.y;ft<=Math.min(rt.y+1,b-1);++ft)for(let st=Ke.x;st<=Math.min(rt.x+1,b-1);++st)Cf[ft*b+st]===255&&(Cf[ft*b+st]=0,_e+=c.getElevationAtPixel(st,ft),be++)}const Ae=_e/be;K=Math.max(1,F.x-q),Q=Math.max(1,F.y-q),ae=Math.min(V.x+q,b-2),ge=Math.min(V.y+q,b-2),M=!0;for(let Pe=Q;Pe<=ge;++Pe)for(let Ge=K;Ge<=ae;++Ge)Cf[Pe*b+Ge]===0&&(lA[Pe*b+Ge]=c._dem.set(Ge,Pe,Ae));for(let Pe=1;Pe<q;++Pe){K=Math.max(1,F.x-Pe),Q=Math.max(1,F.y-Pe),ae=Math.min(V.x+Pe,b-2),ge=Math.min(V.y+Pe,b-2);for(let Ge=Q;Ge<=ge;++Ge)for(let Ke=K;Ke<=ae;++Ke){const rt=Ge*b+Ke;if(Cf[rt]===255){let ft=0,st=0,It=-1,Ut=-1;for(let Tt=-1;Tt<=1;++Tt)for(let Bt=-1;Bt<=1;++Bt){const wt=(Ge+Tt)*b+Ke+Bt;if(Cf[wt]>=Pe)continue;const nr=lA[wt],cr=Math.abs(nr);cr>st&&(ft=nr,st=cr,It=Bt,Ut=Tt)}if(st>.1){const Tt=1-(Pe+.5*Math.abs(It*Ut))/q;let Bt=c._dem.get(Ke,Ge)+ft*Tt;const wt=c._dem.get(Ke+It,Ge+Ut),nr=c._dem.get(Ke-It,Ge-Ut,!0);(Bt-wt)*(Bt-nr)>0&&(Bt=(wt+nr)/2),lA[rt]=c._dem.set(Ke,Ge,Bt),Cf[rt]=Pe}}}}}M&&(c._demTile.needsDEMTextureUpload=!0,c._dem._timestamp=ma.now())}getNodesInfo(){if(!this.nodesInfo){this.nodesInfo=[];for(const o of this.nodes)this.nodesInfo.push(new Kz(o));this.freeNodes()}return this.nodesInfo}freeNodes(){if(this.nodes){for(const o of this.nodes)gb(o);this.nodes.splice(0,this.nodes.length)}}destroy(){this.freeNodes();const o=this.getNodesInfo();for(const c of o)mb(c.node),gb(c.node)}isEmpty(){return!this.nodes.length}updateReplacement(o,c){if(c.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=c.updateTime;const d=c.getReplacementRegionsForTile(o.toUnwrapped()),g=this.getNodesInfo();for(let y=0;y<this.nodesInfo.length;y++){const b=g[y].node;g[y].hiddenByReplacement=!!b.footprint&&!d.find(M=>M.footprint===b.footprint)}}getHeightAtTileCoord(o,c){const d=this.getNodesInfo(),g=[];for(let y=0;y<this.nodesInfo.length;y++){const b=d[y],M=b.node.meshes[0];if(o<M.aabb.min[0]||c<M.aabb.min[1]||o>M.aabb.max[0]||c>M.aabb.max[1])continue;const E=(o-M.aabb.min[0])/(M.aabb.max[0]-M.aabb.min[0])*Af|0,P=Math.min(63,(c-M.aabb.min[1])/(M.aabb.max[1]-M.aabb.min[1])*Af|0)*Af+Math.min(63,E);if(!(M.heightmap[P]<0&&b.node.footprint))return b.hiddenByReplacement?void 0:{height:M.heightmap[P],maxHeight:b.feature.properties.height,hidden:!1,verticalScale:b.evaluatedScale[2]};if(b.node.footprint.grid.query(new H(o,c),new H(o,c),g),g.length>0)return{height:void 0,maxHeight:b.feature.properties.height,hidden:b.hiddenByReplacement,verticalScale:b.evaluatedScale[2]}}}}function K_(l,o){return!l.isLightConstant&&o}function gJ(l,o,c,d,g,y,b,M){let E=(61440&o|(61440&o)>>4)>>8,P=(3840&o|(3840&o)>>4)>>4,O=240&o|(240&o)>>4;c[3]>0&&(E=si(E,255*c[0],c[3]),P=si(P,255*c[1],c[3]),O=si(O,255*c[2],c[3]));const F=E<<8|P,V=O<<8|Math.floor(255*d[3]),U=function(Pe){const Ge=Ce(Pe,0,2);return Math.min(Math.round(.5*Ge*255),255)}(d[2])<<8|15*d[0]<<4|15*d[1],q=Ce(g[0],0,1),K=Ce(g[1],0,1),Q=Ce(g[2],0,1),ae=Ce(g[3],0,1);let ge,_e,be,Ae;if(q!==K&&b!==y&&K!==q){const Pe=b-y;_e=1/(Pe*(K-q)),be=-(y+Pe*q)/(Pe*(K-q));const Ge=Ce(g[4],-1,1);Ae=Math.pow(10,Ge),ge=255*Q<<8|255*ae}else ge=65535,_e=0,be=1,Ae=1;if(l.emplaceBack(F,V,U,ge,_e,be,Ae),M){const Pe=M.length;M.clear();for(let Ge=0;Ge<Pe;Ge++)M.emplaceBack(F,V,U,ge,_e,be,Ae)}}function vJ(l,o){const c=l.node;let d=0;for(const g of c.meshes){if(c.lights&&c.lightMeshIndex===d||!g.featureData)continue;g.featureArray=new y1,g.featureArray.reserve(g.featureData.length);let y=o;for(const b of g.featureData){let M;const E=65535&b,P=(15&E)<8?15&E:0,O=b>>16&65535,F=l.evaluatedRMEA[P],V=l.evaluatedColor[P],U=l.emissionHeightBasedParams[P];if(y&&P===2&&c.lights&&(M=new y1,M.resize(10*c.lights.length)),gJ(g.featureArray,O,V,F,U,g.aabb.min[2],g.aabb.max[2],M),M&&y){y=!1;const q=c.meshes[c.lightMeshIndex];q.featureArray=M,q.featureArray._trim()}}g.featureArray._trim(),d++}}function vb(l,o){return l.x-o.x||l.y-o.y}function Qz(l,o){return vb(l.min,o.min)===0&&vb(l.max,o.max)===0}function eB(l,o){return!(l.min.x>o.max.x||l.max.x<o.min.x||l.min.y>o.max.y||l.max.y<o.min.y)}function tB(l,o,c){const d=1/tr,g=1/(1<<c.canonical.z),y=(o.x*d+c.canonical.x)*g+c.wrap,b=(o.y*d+c.canonical.y)*g;return{min:new H((l.x*d+c.canonical.x)*g+c.wrap,(l.y*d+c.canonical.y)*g),max:new H(y,b)}}function _J(l,o,c){const d=1<<c.canonical.z,g=((o.x-c.wrap)*d-c.canonical.x)*tr,y=(o.y*d-c.canonical.y)*tr;return{min:new H(((l.x-c.wrap)*d-c.canonical.x)*tr,(l.y*d-c.canonical.y)*tr),max:new H(g,y)}}function rB(l,o,c,d,g,y,b){const M=l.indices,E=l.vertices,P=[];for(let O=d;O<d+g;O+=3){const F=o[c[O+0]+y],V=o[c[O+1]+y],U=o[c[O+2]+y],q=Math.min(F.x,V.x,U.x),K=Math.max(F.x,V.x,U.x),Q=Math.min(F.y,V.y,U.y),ae=Math.max(F.y,V.y,U.y);P.length=0,l.grid.query(new H(q,Q),new H(K,ae),P);for(let ge=0;ge<P.length;ge++){const _e=P[ge];if(DM(E[M[3*_e+0]],E[M[3*_e+1]],E[M[3*_e+2]],F,V,U,b))return!0}}return!1}function iB(l,o,c,d){if(!l||!c)return!1;let g=l.vertices;if(!o.canonical.equals(d.canonical)||o.wrap!==d.wrap){if(c.vertices.length<l.vertices.length)return iB(c,d,l,o);const y=o.canonical,b=d.canonical,M=Math.pow(2,b.z-y.z);g=l.vertices.map(E=>new H(E.x*y.x*tr*M-b.x*tr,E.y*y.y*tr*M-b.y*tr))}return rB(c,g,l.indices,0,l.indices.length,0,0)}hr(Jz,"Tiled3dModelBucket",{omit:["layers"]}),hr(Kz,"Tiled3dModelFeature");const yJ=G1.types,xJ=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius"],bJ=["fill-extrusion-flood-light-ground-radius"],wJ=Math.pow(2,13),SJ=Math.pow(2,15)-1,nB=new H(0,1),Wh=2147483648;function J_(l,o,c,d,g,y,b,M){l.emplaceBack((o<<1)+b,(c<<1)+y,(Math.floor(d*wJ)<<1)+g,Math.round(M))}function _b(l,o,c,d,g,y){l.emplaceBack(o.x,o.y,(c.x<<1)+d,(c.y<<1)+g,y)}function Q_(l,o,c){l.emplaceBack(o.x,o.y,o.z,c[0]*16384,c[1]*16384,c[2]*16384)}class aB{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class oB{constructor(){this.centroidXY=new H(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new H(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new H(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new H(this.max.x-this.min.x,this.max.y-this.min.y)}}class sB{constructor(){this.acc=new H(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(o,c){o.min.x===Number.MAX_VALUE&&(o.min.x=o.max.x=c.x,o.min.y=o.max.y=c.y)}appendEdge(o,c,d){this.accCount++,this.acc._add(c);let g=!!this.borders;c.x<o.min.x?(o.min.x=c.x,g=!0):c.x>o.max.x&&(o.max.x=c.x,g=!0),c.y<o.min.y?(o.min.y=c.y,g=!0):c.y>o.max.y&&(o.max.y=c.y,g=!0),((c.x===0||c.x===tr)&&c.x===d.x)!=((c.y===0||c.y===tr)&&c.y===d.y)&&this.processBorderOverlap(c,d),g&&this.checkBorderIntersection(c,d)}checkBorderIntersection(o,c){c.x<0!=o.x<0&&this.addBorderIntersection(0,si(c.y,o.y,(0-c.x)/(o.x-c.x))),c.x>tr!=o.x>tr&&this.addBorderIntersection(1,si(c.y,o.y,(tr-c.x)/(o.x-c.x))),c.y<0!=o.y<0&&this.addBorderIntersection(2,si(c.x,o.x,(0-c.y)/(o.y-c.y))),c.y>tr!=o.y>tr&&this.addBorderIntersection(3,si(c.x,o.x,(tr-c.y)/(o.y-c.y)))}addBorderIntersection(o,c){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const d=this.borders[o];c<d[0]&&(d[0]=c),c>d[1]&&(d[1]=c)}processBorderOverlap(o,c){if(o.x===c.x){if(o.y===c.y)return;const d=o.x===0?0:1;this.addBorderIntersection(d,c.y),this.addBorderIntersection(d,o.y)}else{const d=o.y===0?2:3;this.addBorderIntersection(d,c.x),this.addBorderIntersection(d,o.x)}}centroid(){return this.accCount===0?new H(0,0):new H(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((o,c)=>o+ +(c[0]!==Number.MAX_VALUE),0):0}}function lB(l,o){const c=l.add(o)._unit(),d=Ce(l.x*c.x+l.y*c.y,-1,1);var g,y,b;return g=Math.acos(d),Math.min(4,Math.max(-4,Math.tan(g)))/4*SJ*((y=l).x*(b=o).y-y.y*b.x<0?-1:1)}const TJ=[l=>l.x<0,l=>l.x>tr,l=>l.y<0,l=>l.y>tr];function MJ(l,o,c,d){const g=[4];if(d===0)return g;c._mult(d);const y=l.sub(c),b=o.sub(c),M=[l,o,y,b];for(let E=0;E<4;E++)for(const P of M)if(TJ[E](P)){g.push(E);break}return g}class uB{constructor(o){this.vertexArray=new qa,this.indexArray=new Xi,this.programConfigurations=new kh(o.layers,o.zoom,c=>bJ.includes(c)),this._segments=new yn,this.hiddenByLandmarkVertexArray=new j2,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new yn}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(o,c,d,g=!1){const y=o.length;if(y>2){let b=Math.max(0,this._segments.get().length-1);const M=this._segments._prepareSegment(4*y,this.vertexArray.length,2*this._segmentToGroundQuads[b].length);let E;b!==this._segments.get().length-1&&(b++,this._segmentToGroundQuads[b]=[],this._segmentToRegionTriCounts[b]=[0,0,0,0,0]);{const P=o[0],O=o[1];E=lB(P.sub(o[y-1])._perp()._unit(),O.sub(P)._perp()._unit())}for(let P=0;P<y;P++){const O=P===y-1?0:P+1,F=o[P],V=o[O],U=o[O===y-1?0:O+1],q=V.sub(F)._perp()._unit(),K=lB(q,U.sub(V)._perp()._unit()),Q=E,ae=K;if(uA(F,V,c)||g&&dB(F,c)&&dB(V,c)){E=K;continue}const ge=M.vertexLength;_b(this.vertexArray,F,V,1,1,Q),_b(this.vertexArray,F,V,1,0,Q),_b(this.vertexArray,F,V,0,1,ae),_b(this.vertexArray,F,V,0,0,ae),M.vertexLength+=4;const _e=MJ(F,V,q,d);for(const be of _e)this._segmentToGroundQuads[b].push({id:ge,region:be}),this._segmentToRegionTriCounts[b][be]+=2,M.primitiveLength+=2;E=K}}}prepareBorderSegments(){if(!this.hasData())return;const o=this._segments.get(),c=o.length;for(let d=0;d<c;d++)this._segmentToGroundQuads[d].sort((g,y)=>g.region-y.region);for(let d=0;d<c;d++){const g=this._segmentToGroundQuads[d],y=o[d],b=this._segmentToRegionTriCounts[d];b.reduce((E,P)=>E+P,0);let M=0;for(let E=0;E<=4;E++){const P=b[E];if(P!==0){let O=this.regionSegments[E];O||(O=this.regionSegments[E]=new yn);const F={vertexOffset:y.vertexOffset,primitiveOffset:y.primitiveOffset+M,vertexLength:y.vertexLength,primitiveLength:P};O.get().push(F)}M+=P}for(let E=0;E<g.length;E++){const P=g[E].id;this.indexArray.emplaceBack(P,P+1,P+3),this.indexArray.emplaceBack(P,P+3,P+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(o,c,d,g,y,b){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,o,c,d,g,y,b)}upload(o){this.hasData()&&(this.vertexBuffer=o.createVertexBuffer(this.vertexArray,VY.members),this.indexBuffer=o.createIndexBuffer(this.indexArray))}uploadPaintProperties(o){this.hasData()&&this.programConfigurations.upload(o)}update(o,c,d,g,y,b){this.hasData()&&this.programConfigurations.updatePaintArrays(o,c,d,g,y,b)}updateHiddenByLandmark(o){if(!this.hasData())return;const c=o.groundVertexCount+o.groundVertexArrayOffset;if(o.groundVertexCount===0)return;const d=o.flags&Wh?1:0;for(let g=o.groundVertexArrayOffset;g<c;++g)this.hiddenByLandmarkVertexArray.emplace(g,d);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(o){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=o.createVertexBuffer(this.hiddenByLandmarkVertexArray,GY.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let o=0;o<=4;o++){const c=this.regionSegments[o];c&&c.destroy()}}}}class ey{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.fqid),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Xi,this.footprintVertices=new Wr,this.footprintSegments=[],this.layoutVertexArray=new Hi,this.centroidVertexArray=new RR,this.indexArray=new Xi,this.programConfigurations=new kh(o.layers,o.zoom,c=>xJ.includes(c)),this.segments=new yn,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.groundEffect=new uB(o),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}populate(o,c,d,g){this.features=[],this.hasPattern=BM("fill-extrusion",this.layers,c),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=D1(d),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:y,id:b,index:M,sourceLayerIndex:E}of o){const P=this.layers[0]._featureFilter.needGeometry,O=Bh(y,P);if(!this.layers[0]._featureFilter.filter(new Ne(this.zoom),O,d))continue;const F={id:b,sourceLayerIndex:E,index:M,geometry:P?O.geometry:Iu(y,d,g),properties:y.properties,type:y.type,patterns:{}},V=this.layoutVertexArray.length;this.hasPattern?this.features.push(FM("fill-extrusion",this.layers,F,this.zoom,c)):this.addFeature(F,F.geometry,M,d,{},c.availableImages,g,c.brightness),c.featureIndex.insert(y,F.geometry,M,E,this.index,V)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(o,c,d,g,y,b){for(const M of this.features){const{geometry:E}=M;this.addFeature(M,E,M.index,c,d,g,y,b)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(o,c,d,g,y){const b=Object.keys(o).length!==0;if(b&&!this.stateDependentLayers.length)return;const M=b?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(o,c,M,d,g,y),this.groundEffect.update(o,c,M,d,g,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,jY),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,UY.members,!0)),this.groundEffect.upload(o)),this.groundEffect.uploadPaintProperties(o),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){this.groundEffect.uploadHiddenByLandmark(o),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,$Y.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,c,d,g,y,b,M,E){const P=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(o,{})/this.tileToMeter,O=[new H(0,0),new H(tr,tr)],F=M.projection,V=F.name==="globe",U=yJ[o.type]==="Polygon",q=new sB;q.centroidDataIndex=this.centroidData.length;const K=new oB,Q=this.layers[0].paint.get("fill-extrusion-base").evaluate(o,{},g)<=0,ae=this.layers[0].paint.get("fill-extrusion-height").evaluate(o,{},g);K.height=ae,K.vertexArrayOffset=this.layoutVertexArray.length,K.groundVertexArrayOffset=this.groundEffect.vertexArray.length,V&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new dn);const ge=zM(c,500);for(let Ke=ge.length-1;Ke>=0;Ke--){const rt=ge[Ke];(rt.length===0||(_e=rt[0]).every(ft=>ft.x<=0)||_e.every(ft=>ft.x>=tr)||_e.every(ft=>ft.y<=0)||_e.every(ft=>ft.y>=tr))&&ge.splice(Ke,1)}var _e;let be;if(V)be=gB(ge,O,g);else{be=[];for(const Ke of ge)be.push({polygon:Ke,bounds:O})}const Ae=U?this.edgeRadius:0,Pe=Ae>0&&this.zoom<17,Ge=(Ke,rt)=>{if(Ke.length===0)return!1;const ft=Ke[Ke.length-1];return rt.x===ft.x&&rt.y===ft.y};for(const{polygon:Ke,bounds:rt}of be){let ft=0,st=0;for(const Bt of Ke)U&&!Bt[0].equals(Bt[Bt.length-1])&&Bt.push(Bt[0]),st+=U?Bt.length-1:Bt.length;const It=this.segments.prepareSegment((U?5:4)*st,this.layoutVertexArray,this.indexArray);K.footprintSegIdx<0&&(K.footprintSegIdx=this.footprintSegments.length),K.polygonSegIdx<0&&(K.polygonSegIdx=this.polygonSegments.length);const Ut={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Tt=new aB;if(Tt.vertexOffset=this.footprintVertices.length,Tt.indexOffset=3*this.footprintIndices.length,Tt.ringIndices=[],U){const Bt=[],wt=[];ft=It.vertexLength;for(let cr=0;cr<Ke.length;cr++){const $t=Ke[cr];$t.length&&cr!==0&&wt.push(Bt.length/2);const Dr=[];let fr,rr;fr=$t[1].sub($t[0])._perp()._unit(),Tt.ringIndices.push($t.length-1);for(let Pr=1;Pr<$t.length;Pr++){const yr=$t[Pr],Ar=$t[Pr===$t.length-1?1:Pr+1],Qt=yr.clone();if(Ae){rr=Ar.sub(yr)._perp()._unit();const Fr=fr.add(rr)._unit(),mi=Ae*Math.min(4,1/(fr.x*Fr.x+fr.y*Fr.y));Qt.x+=mi*Fr.x,Qt.y+=mi*Fr.y,Qt.x=Math.round(Qt.x),Qt.y=Math.round(Qt.y),fr=rr}!Q||Ae!==0&&!Pe||Ge(Dr,Qt)||Dr.push(Qt),J_(this.layoutVertexArray,Qt.x,Qt.y,0,0,1,1,0),It.vertexLength++,this.footprintVertices.emplaceBack(yr.x,yr.y),Bt.push(yr.x,yr.y),V&&Q_(this.layoutVertexExtArray,F.projectTilePoint(Qt.x,Qt.y,g),F.upVector(g,Qt.x,Qt.y))}Q&&(Ae===0||Pe)&&(Dr.length!==0&&Ge(Dr,Dr[0])&&Dr.pop(),this.groundEffect.addData(Dr,rt,P))}const nr=N1(Bt,wt);for(let cr=0;cr<nr.length;cr+=3)this.footprintIndices.emplaceBack(Tt.vertexOffset+nr[cr+0],Tt.vertexOffset+nr[cr+1],Tt.vertexOffset+nr[cr+2]),this.indexArray.emplaceBack(ft+nr[cr],ft+nr[cr+2],ft+nr[cr+1]),It.primitiveLength++;Tt.indexCount+=nr.length,Tt.vertexCount+=this.footprintVertices.length-Tt.vertexOffset}for(let Bt=0;Bt<Ke.length;Bt++){const wt=Ke[Bt];q.startRing(K,wt[0]);let nr=wt.length>4&&fB(wt[wt.length-2],wt[0],wt[1]),cr=Ae?AJ(wt[wt.length-2],wt[0],wt[1],Ae):0;const $t=[];let Dr,fr,rr;fr=wt[1].sub(wt[0])._perp()._unit();let Pr=!0;for(let yr=1,Ar=0;yr<wt.length;yr++){let Qt=wt[yr-1],Fr=wt[yr];const mi=wt[yr===wt.length-1?1:yr+1];if(q.appendEdge(K,Fr,Qt),uA(Fr,Qt,rt)){Ae&&(fr=mi.sub(Fr)._perp()._unit(),Pr=!Pr);continue}const qr=Fr.sub(Qt)._perp(),ui=qr.x/(Math.abs(qr.x)+Math.abs(qr.y)),Ei=qr.y>0?1:0,rn=Qt.dist(Fr);if(Ar+rn>32768&&(Ar=0),Ae){rr=mi.sub(Fr)._perp()._unit();let Ui=hB(Qt,Fr,mi,cB(fr,rr),Ae);isNaN(Ui)&&(Ui=0);const Wi=Fr.sub(Qt)._unit();Qt=Qt.add(Wi.mult(cr))._round(),Fr=Fr.add(Wi.mult(-Ui))._round(),cr=Ui,fr=rr,Q&&this.zoom>=17&&(Ge($t,Qt)||$t.push(Qt),Ge($t,Fr)||$t.push(Fr))}const ti=It.vertexLength,pn=wt.length>4&&fB(Qt,Fr,mi);let nn=pB(Ar,nr,Pr);if(J_(this.layoutVertexArray,Qt.x,Qt.y,ui,Ei,0,0,nn),J_(this.layoutVertexArray,Qt.x,Qt.y,ui,Ei,0,1,nn),Ar+=rn,nn=pB(Ar,pn,!Pr),nr=pn,J_(this.layoutVertexArray,Fr.x,Fr.y,ui,Ei,0,0,nn),J_(this.layoutVertexArray,Fr.x,Fr.y,ui,Ei,0,1,nn),It.vertexLength+=4,this.indexArray.emplaceBack(ti+0,ti+1,ti+2),this.indexArray.emplaceBack(ti+1,ti+3,ti+2),It.primitiveLength+=2,Ae){const Ui=ft+(yr===1?wt.length-2:yr-2),Wi=yr===1?ft:Ui+1;if(this.indexArray.emplaceBack(ti+1,Ui,ti+3),this.indexArray.emplaceBack(Ui,Wi,ti+3),It.primitiveLength+=2,Dr===void 0&&(Dr=ti),!uA(mi,wt[yr],rt)){const Di=yr===wt.length-1?Dr:It.vertexLength;this.indexArray.emplaceBack(ti+2,ti+3,Di),this.indexArray.emplaceBack(ti+3,Di+1,Di),this.indexArray.emplaceBack(ti+3,Wi,Di+1),It.primitiveLength+=3}Pr=!Pr}if(V){const Ui=this.layoutVertexExtArray,Wi=F.projectTilePoint(Qt.x,Qt.y,g),Di=F.projectTilePoint(Fr.x,Fr.y,g),Ln=F.upVector(g,Qt.x,Qt.y),mn=F.upVector(g,Fr.x,Fr.y);Q_(Ui,Wi,Ln),Q_(Ui,Wi,Ln),Q_(Ui,Di,mn),Q_(Ui,Di,mn)}}U&&(ft+=wt.length-1),Q&&Ae&&this.zoom>=17&&($t.length!==0&&Ge($t,$t[0])&&$t.pop(),this.groundEffect.addData($t,rt,P,Ae>0))}this.footprintSegments.push(Tt),Ut.triangleCount=this.indexArray.length-Ut.triangleArrayOffset,this.polygonSegments.push(Ut),++K.footprintSegLen,++K.polygonSegLen}if(K.vertexCount=this.layoutVertexArray.length-K.vertexArrayOffset,K.groundVertexCount=this.groundEffect.vertexArray.length-K.groundVertexArrayOffset,K.vertexCount!==0){if(K.centroidXY=q.borders?nB:this.encodeCentroid(q,K),this.centroidData.push(K),q.borders){this.featuresOnBorder.push(q);const Ke=this.featuresOnBorder.length-1;for(let rt=0;rt<q.borders.length;rt++)q.borders[rt][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[rt].push(Ke)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,y,b,g,E),this.groundEffect.addPaintPropertiesData(o,d,y,b,g,E),this.maxHeight=Math.max(this.maxHeight,ae)}}sortBorders(){for(let o=0;o<this.borderFeatureIndices.length;o++)this.borderFeatureIndices[o].sort((c,d)=>this.featuresOnBorder[c].borders[o][0]-this.featuresOnBorder[d].borders[o][0])}splitToSubtiles(){const o=[];for(let M=0;M<this.centroidData.length;M++){const E=this.centroidData[M],P=+(E.min.y+E.max.y>tr),O=2*P+(+(E.min.x+E.max.x>tr)^P);for(let F=0;F<E.polygonSegLen;F++){const V=E.polygonSegIdx+F;o.push({centroidIdx:M,subtile:O,polygonSegmentIdx:V,triangleSegmentIdx:this.polygonSegments[V].triangleSegIdx})}}const c=new Xi;o.sort((M,E)=>M.triangleSegmentIdx===E.triangleSegmentIdx?M.subtile-E.subtile:M.triangleSegmentIdx-E.triangleSegmentIdx);let d=0,g=0,y=0;for(const M of o){if(M.triangleSegmentIdx!==d)break;y++}const b=o.length;for(;g!==o.length;){d=o[g].triangleSegmentIdx;let M=0,E=g,P=g;for(let O=E;O<y&&o[O].subtile===M;O++)P++;for(;E!==y;){const O=o[E];M=O.subtile;const F=this.centroidData[O.centroidIdx].min.clone(),V=this.centroidData[O.centroidIdx].max.clone(),U={vertexOffset:this.segments.segments[d].vertexOffset,primitiveOffset:c.length,vertexLength:this.segments.segments[d].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let q=E;q<P;q++){const K=o[q],Q=this.polygonSegments[K.polygonSegmentIdx],ae=this.centroidData[K.centroidIdx].min,ge=this.centroidData[K.centroidIdx].max,_e=this.indexArray.uint16;for(let be=Q.triangleArrayOffset;be<Q.triangleArrayOffset+Q.triangleCount;be++)c.emplaceBack(_e[3*be],_e[3*be+1],_e[3*be+2]);U.primitiveLength+=Q.triangleCount,F.x=Math.min(F.x,ae.x),F.y=Math.min(F.y,ae.y),V.x=Math.max(V.x,ge.x),V.y=Math.max(V.y,ge.y)}U.primitiveLength>0&&this.triangleSubSegments.push({segment:U,min:F,max:V}),E=P;for(let q=E;q<y&&o[q].subtile===o[E].subtile;q++)P++}g=y;for(let O=g;O<b&&o[O].triangleSegmentIdx===o[g].triangleSegmentIdx;O++)y++}c._trim(),this.indexArray=c}getVisibleSegments(o,c,d){let g=0,y=0;const b=1<<o.canonical.z;if(c){const K=c.getMinMaxForTile(o);K&&(g=K.min,y=K.max)}y+=this.maxHeight;const M=o.toUnwrapped();let E;const P=[M.canonical.x/b+M.wrap,M.canonical.y/b],O=[(M.canonical.x+1)/b+M.wrap,(M.canonical.y+1)/b],F=new yn,V=(K,Q,ae)=>[K[0]*(1-ae[0])+Q[0]*ae[0],K[1]*(1-ae[1])+Q[1]*ae[1]],U=[],q=[];for(const K of this.triangleSubSegments){U[0]=K.min.x/tr,U[1]=K.min.y/tr,q[0]=K.max.x/tr,q[1]=K.max.y/tr;const Q=V(P,O,U),ae=V(P,O,q);if(new Un([Q[0],Q[1],g],[ae[0],ae[1],y]).intersectsPrecise(d)===0){E&&(F.segments.push(E),E=void 0);continue}const ge=K.segment;E&&E.vertexOffset!==ge.vertexOffset&&(F.segments.push(E),E=void 0),E?(E.vertexLength+=ge.vertexLength,E.primitiveLength+=ge.primitiveLength):E={vertexOffset:ge.vertexOffset,primitiveLength:ge.primitiveLength,vertexLength:ge.vertexLength,primitiveOffset:ge.primitiveOffset,sortKey:void 0,vaos:{}}}return E&&F.segments.push(E),F}encodeCentroid(o,c){const d=o.centroid(),g=c.span(),y=Math.min(7,Math.round(g.x*this.tileToMeter/10)),b=Math.min(7,Math.round(g.y*this.tileToMeter/10));return new H(Ce(d.x,1,tr-1)<<3|y,Ce(d.y,1,tr-1)<<3|b)}encodeBorderCentroid(o){if(!o.borders)return new H(0,0);const c=o.borders,d=Number.MAX_VALUE;if(c[0][0]!==d||c[1][0]!==d){const g=c[0][0]!==d?0:1;return new H(6|(c[0][0]!==d?0:65528),((c[g][0]+c[g][1])/2|0)<<3|6)}{const g=c[2][0]!==d?2:3;return new H(((c[g][0]+c[g][1])/2|0)<<3|6,6|(c[2][0]!==d?0:65528))}}showCentroid(o){const c=this.centroidData[o.centroidDataIndex];c.flags&=Wh,c.centroidXY.x=0,c.centroidXY.y=0,this.writeCentroidToBuffer(c)}writeCentroidToBuffer(o){this.groundEffect.updateHiddenByLandmark(o);const c=o.vertexArrayOffset,d=o.vertexCount+o.vertexArrayOffset,g=o.flags&Wh?nB:o.centroidXY,y=this.centroidVertexArray.geta_centroid_pos0(c);if(this.centroidVertexArray.geta_centroid_pos1(c)!==g.y||y!==g.x){for(let b=c;b<d;++b)this.centroidVertexArray.emplace(b,g.x,g.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const o of this.centroidData)this.writeCentroidToBuffer(o)}updateReplacement(o,c){if(c.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=c.updateTime;const d=c.getReplacementRegionsForTile(o.toUnwrapped());if(function(y,b){if(y.length!==b.length)return!1;for(let M=0;M<y.length;M++)if(y[M].sourceId!==b[M].sourceId||!Qz(y[M],b[M]))return!1;return!0}(this.activeReplacements,d))return;if(this.activeReplacements=d,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const y of this.centroidData)y.flags&=2147483647;const g=[];for(const y of this.activeReplacements){const b=Math.pow(2,y.footprintTileId.canonical.z-o.canonical.z);for(const M of this.centroidData)if(!(M.flags&Wh||y.min.x>M.max.x||M.min.x>y.max.x||y.min.y>M.max.y||M.min.y>y.max.y))for(let E=0;E<M.footprintSegLen;E++){const P=this.footprintSegments[M.footprintSegIdx+E];if(g.length=0,CJ(this.footprintVertices,P.vertexOffset,P.vertexCount,y.footprintTileId.canonical,o.canonical,g),rB(y.footprint,g,this.footprintIndices.uint16,P.indexOffset,P.indexCount,-P.vertexOffset,-b)){M.flags|=Wh;break}}}for(const y of this.centroidData)this.writeCentroidToBuffer(y);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(o,c,d){let g=!1;for(let y=0;y<d.footprintSegLen;y++){const b=this.footprintSegments[d.footprintSegIdx+y];let M=0;for(const E of b.ringIndices){for(let P=M,O=E+M-1;P<E+M;O=P++){const F=this.footprintVertices.int16[2*(P+b.vertexOffset)+0],V=this.footprintVertices.int16[2*(P+b.vertexOffset)+1],U=this.footprintVertices.int16[2*(O+b.vertexOffset)+1];V>c!=U>c&&o<(this.footprintVertices.int16[2*(O+b.vertexOffset)+0]-F)*(c-V)/(U-V)+F&&(g=!g)}M=E}}return g}getHeightAtTileCoord(o,c){let d=Number.NEGATIVE_INFINITY,g=!0;const y=4*(o+tr)*tr+(c+tr);if(this.partLookup.hasOwnProperty(y)){const b=this.partLookup[y];return b?{height:b.height,hidden:!!(b.flags&Wh)}:void 0}for(const b of this.centroidData)o>b.max.x||b.min.x>o||c>b.max.y||b.min.y>c||this.footprintContainsPoint(o,c,b)&&b&&b.height>d&&(d=b.height,this.partLookup[y]=b,g=!!(b.flags&Wh));if(d!==Number.NEGATIVE_INFINITY)return{height:d,hidden:g};this.partLookup[y]=void 0}}function cB(l,o){const c=l.add(o)._unit();return l.x*c.x+l.y*c.y}function AJ(l,o,c,d){const g=o.sub(l)._perp()._unit(),y=c.sub(o)._perp()._unit();return hB(l,o,c,cB(g,y),d)}function hB(l,o,c,d,g){const y=Math.sqrt(1-d*d);return Math.min(l.dist(o)/3,o.dist(c)/3,g*y/d)}function uA(l,o,c){return l.x<c[0].x&&o.x<c[0].x||l.x>c[1].x&&o.x>c[1].x||l.y<c[0].y&&o.y<c[0].y||l.y>c[1].y&&o.y>c[1].y}function dB(l,o){return l.x<o[0].x||l.x>o[1].x||l.y<o[0].y||l.y>o[1].y}function fB(l,o,c){if(l.x<0||l.x>=tr||o.x<0||o.x>=tr||c.x<0||c.x>=tr)return!1;const d=c.sub(o),g=d.perp(),y=l.sub(o);return(d.x*y.x+d.y*y.y)/Math.sqrt((d.x*d.x+d.y*d.y)*(y.x*y.x+y.y*y.y))>-.866&&g.x*y.x+g.y*y.y<0}function pB(l,o,c){const d=o?2|l:-3&l;return c?1|d:-2&d}function mB(){const l=Math.PI/32,o=Math.tan(l),c=z_;return c*Math.sqrt(1+2*o*o)-c}function gB(l,o,c){const d=1<<c.z,g=Ko(c.x/d),y=Ko((c.x+1)/d),b=Ia(c.y/d),M=Ia((c.y+1)/d);return function(E,P,O,F,V=0,U){const q=[];if(!E.length||!O||!F)return q;const K=(Pe,Ge)=>{for(const Ke of Pe)q.push({polygon:Ke,bounds:Ge})},Q=Math.ceil(Math.log2(O)),ae=Math.ceil(Math.log2(F)),ge=Q-ae,_e=[];for(let Pe=0;Pe<Math.abs(ge);Pe++)_e.push(ge>0?0:1);for(let Pe=0;Pe<Math.min(Q,ae);Pe++)_e.push(0),_e.push(1);let be=E;if(be=U1(be,P[0].y-V,P[1].y+V,1),be=U1(be,P[0].x-V,P[1].x+V,0),!be.length)return q;const Ae=[];for(_e.length?Ae.push({polygons:be,bounds:P,depth:0}):K(be,P);Ae.length;){const Pe=Ae.pop(),Ge=Pe.depth,Ke=_e[Ge],rt=Pe.bounds[0],ft=Pe.bounds[1],st=Ke===0?rt.x:rt.y,It=Ke===0?ft.x:ft.y,Ut=U?U(Ke,st,It):.5*(st+It),Tt=U1(Pe.polygons,st-V,Ut+V,Ke),Bt=U1(Pe.polygons,Ut-V,It+V,Ke);if(Tt.length){const wt=[rt,new H(Ke===0?Ut:ft.x,Ke===1?Ut:ft.y)];_e.length>Ge+1?Ae.push({polygons:Tt,bounds:wt,depth:Ge+1}):K(Tt,wt)}if(Bt.length){const wt=[new H(Ke===0?Ut:rt.x,Ke===1?Ut:rt.y),ft];_e.length>Ge+1?Ae.push({polygons:Bt,bounds:wt,depth:Ge+1}):K(Bt,wt)}}return q}(l,o,Math.ceil((y-g)/11.25),Math.ceil((b-M)/11.25),1,(E,P,O)=>{if(E===0)return .5*(P+O);{const F=Ia((c.y+P/tr)/d);return(Cu(.5*(Ia((c.y+O/tr)/d)+F))*d-c.y)*tr}})}function CJ(l,o,c,d,g,y){const b=Math.pow(2,d.z-g.z);for(let M=0;M<c;M++){let E=l.int16[2*(M+o)+0],P=l.int16[2*(M+o)+1];E=(E+g.x*tr)*b-d.x*tr,P=(P+g.y*tr)*b-d.y*tr,y.push(new H(E,P))}}hr(ey,"FillExtrusionBucket",{omit:["layers","features"]}),hr(oB,"PartData"),hr(aB,"FootprintSegment"),hr(sB,"BorderCentroidData"),hr(uB,"GroundEffect");const IJ=new Rt({visibility:new Ee(ut["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Ee(ut["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var EJ={paint:new Rt({"fill-extrusion-opacity":new Ee(ut["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new at(ut["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ee(ut["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ee(ut["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new at(ut["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new at(ut["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new at(ut["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ee(ut["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ee(ut["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ee(ut["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Ee(ut["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Ee(ut["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Ee(ut["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Ee(ut["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Ee(ut["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new at(ut["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new at(ut["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Ee(ut["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Ee(ut["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Ee(ut["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Ee(ut["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Ee(ut["paint_fill-extrusion"]["fill-extrusion-emissive-strength"])}),layout:IJ};class ig extends H{constructor(o,c,d){super(o,c),this.z=d}}function ty(l,o){return l.x*o.x+l.y*o.y}function vB(l,o){if(l.length===1){let c=0;const d=o[c++];let g;for(;!g||d.equals(g);)if(g=o[c++],!g)return 1/0;for(;c<o.length;c++){const y=o[c],b=l[0],M=g.sub(d),E=y.sub(d),P=b.sub(d),O=ty(M,M),F=ty(M,E),V=ty(E,E),U=ty(P,M),q=ty(P,E),K=O*V-F*F,Q=(V*U-F*q)/K,ae=(O*q-F*U)/K,ge=d.z*(1-Q-ae)+g.z*Q+y.z*ae;if(isFinite(ge))return ge}return 1/0}{let c=1/0;for(const d of o)c=Math.min(c,d.z);return c}}function _B(l,o,c,d,g,y,b,M){const E=b*g.getElevationAt(l,o,!0,!0),P=y[0]!==0,O=P?y[1]===0?b*(y[0]/7-450):b*function(F,V,U){const q=Math.floor(V[0]/8),K=Math.floor(V[1]/8),Q=10*(V[0]-8*q),ae=10*(V[1]-8*K),ge=F.getElevationAt(q,K,!0,!0),_e=F.getMeterToDEM(U),be=Math.floor(.5*(Q*_e-1)),Ae=Math.floor(.5*(ae*_e-1)),Pe=F.tileCoordToPixel(q,K),Ge=2*be+1,Ke=2*Ae+1,rt=function(Bt,wt,nr,cr,$t){return[Bt.getElevationAtPixel(wt,nr,!0),Bt.getElevationAtPixel(wt+$t,nr,!0),Bt.getElevationAtPixel(wt,nr+$t,!0),Bt.getElevationAtPixel(wt+cr,nr+$t,!0)]}(F,Pe.x-be,Pe.y-Ae,Ge,Ke),ft=Math.abs(rt[0]-rt[1]),st=Math.abs(rt[2]-rt[3]),It=Math.abs(rt[0]-rt[2])+Math.abs(rt[1]-rt[3]),Ut=Math.min(.25,.5*_e*(ft+st)/Ge),Tt=Math.min(.25,.5*_e*It/Ke);return ge+Math.max(Ut*Q,Tt*ae)}(g,y,M):E;return{base:E+(c===0)?-1:c,top:P?Math.max(O+d,E+c+2):E+d}}const DJ=new Rt({"line-cap":new at(ut.layout_line["line-cap"]),"line-join":new at(ut.layout_line["line-join"]),"line-miter-limit":new Ee(ut.layout_line["line-miter-limit"]),"line-round-limit":new Ee(ut.layout_line["line-round-limit"]),"line-sort-key":new at(ut.layout_line["line-sort-key"]),visibility:new Ee(ut.layout_line.visibility)});var yB={paint:new Rt({"line-opacity":new at(ut.paint_line["line-opacity"]),"line-color":new at(ut.paint_line["line-color"]),"line-translate":new Ee(ut.paint_line["line-translate"]),"line-translate-anchor":new Ee(ut.paint_line["line-translate-anchor"]),"line-width":new at(ut.paint_line["line-width"]),"line-gap-width":new at(ut.paint_line["line-gap-width"]),"line-offset":new at(ut.paint_line["line-offset"]),"line-blur":new at(ut.paint_line["line-blur"]),"line-dasharray":new at(ut.paint_line["line-dasharray"]),"line-pattern":new at(ut.paint_line["line-pattern"]),"line-gradient":new Ft(ut.paint_line["line-gradient"]),"line-trim-offset":new Ee(ut.paint_line["line-trim-offset"]),"line-emissive-strength":new Ee(ut.paint_line["line-emissive-strength"]),"line-border-width":new at(ut.paint_line["line-border-width"]),"line-border-color":new at(ut.paint_line["line-border-color"])}),layout:DJ};function xB(l,o){return 1/Uz(l,1,o.tileZoom)}function bB(l,o,c,d){return l.translatePosMatrix(d||o.tileID.projMatrix,o,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const wB=l=>{const o=[];SB(l)&&o.push("RENDER_LINE_DASH"),l.paint.get("line-gradient")&&o.push("RENDER_LINE_GRADIENT");const c=l.paint.get("line-trim-offset");return c[0]===0&&c[1]===0||o.push("RENDER_LINE_TRIM_OFFSET"),l.paint.get("line-border-width").constantOr(1)!==0&&o.push("RENDER_LINE_BORDER"),o};function SB(l){const o=l.paint.get("line-dasharray").value;return o.value||o.kind!=="constant"}const TB=new class extends at{possiblyEvaluate(l,o){return o=new Ne(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,transition:o.transition}),super.possiblyEvaluate(l,o)}evaluate(l,o,c,d){return o=ht({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(l,o,c,d)}}(yB.paint.properties["line-width"].specification);function MB(l,o){return o>0?o+2*l:l}TB.useIntegerZoom=!0;const PJ=new Rt({visibility:new Ee(ut.layout_background.visibility)});var LJ={paint:new Rt({"background-color":new Ee(ut.paint_background["background-color"]),"background-pattern":new Ee(ut.paint_background["background-pattern"]),"background-opacity":new Ee(ut.paint_background["background-opacity"]),"background-emissive-strength":new Ee(ut.paint_background["background-emissive-strength"])}),layout:PJ};const kJ=new Rt({visibility:new Ee(ut.layout_raster.visibility)});var RJ={paint:new Rt({"raster-opacity":new Ee(ut.paint_raster["raster-opacity"]),"raster-color":new Ft(ut.paint_raster["raster-color"]),"raster-color-mix":new Ee(ut.paint_raster["raster-color-mix"]),"raster-color-range":new Ee(ut.paint_raster["raster-color-range"]),"raster-hue-rotate":new Ee(ut.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ee(ut.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ee(ut.paint_raster["raster-brightness-max"]),"raster-saturation":new Ee(ut.paint_raster["raster-saturation"]),"raster-contrast":new Ee(ut.paint_raster["raster-contrast"]),"raster-resampling":new Ee(ut.paint_raster["raster-resampling"]),"raster-fade-duration":new Ee(ut.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Ee(ut.paint_raster["raster-emissive-strength"]),"raster-array-band":new Ee(ut.paint_raster["raster-array-band"]),"raster-elevation":new Ee(ut.paint_raster["raster-elevation"])}),layout:kJ};function yb(l,o,c,d,g,y,b,M){const E=[l,o,1,c,d,1,g,y,1],P=[b,M,1],O=a.bx.adjoint([],E),[F,V,U]=a.v.transformMat3(P,P,O);return a.bx.multiply(E,E,[F,0,0,0,V,0,0,0,U])}function AB(l,o,c,d,g,y,b,M){const E=function(P,O,F,V,U,q,K,Q){const ae=yb(0,0,1,0,1,1,0,1),ge=yb(P,O,F,V,U,q,K,Q),_e=a.bx.adjoint([],ae);return a.bx.multiply(ge,ge,_e)}(l,o,c,d,g,y,b,M);return[E[2]/E[8]/tr,E[5]/E[8]/tr]}function xb(l){return[l[0],Math.min(Math.max(l[1],-Fn),Fn)]}class CB extends Mo{constructor(o,c,d,g){super(),this.id=o,this.dispatcher=d,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(g),this.options=c,this._dirty=!1}load(o,c){if(this._loaded=c||!1,this.fire(new ao("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return o&&(this.coordinates=o),this._loaded=!0,void this._finishLoading();this._imageRequest=Lt(this.map._requestManager.transformRequest(this.url,wn.Image),(d,g)=>{this._imageRequest=null,this._loaded=!0,d?this.fire(new $s(d)):g&&(this.image=g instanceof HTMLImageElement?ma.getImageData(g):g,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,o&&(this.coordinates=o),this._finishLoading())})}loaded(){return this._loaded}updateImage(o){return o.url?(this._imageRequest&&o.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=o.url,this.load(o.coordinates,this._loaded),this):this}setTexture(o){if(!(o.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new ub(this.map.painter.context,o.handle),this.width=o.dimensions[0],this.height=o.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new ao("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof ub||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(o){if(this.coordinates=o,this._boundsArray=void 0,this._unsupportedCoords=!1,!o.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let c=o[0][1],d=o[0][1];for(const y of o)y[1]>d&&(d=y[1]),y[1]<c&&(c=y[1]);const g=(d+c)/2;if(g>Fn?this.onNorthPole=!0:g<-Fn&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const y=o.map(Na.fromLngLat);this.tileID=function(b){let M=1/0,E=1/0,P=-1/0,O=-1/0;for(const K of b)M=Math.min(M,K.x),E=Math.min(E,K.y),P=Math.max(P,K.x),O=Math.max(O,K.y);const F=Math.max(P-M,O-E),V=Math.max(0,Math.floor(-Math.log(F)/Math.LN2)),U=Math.pow(2,V);let q=Math.floor((M+P)/2*U);return q>1&&(q-=1),new yf(V,q,Math.floor((E+O)/2*U))}(y),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new ao("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(o){for(const Q in this.tiles){const ae=this.tiles[Q];ae.state!=="loaded"&&(ae.state="loaded",ae.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const c=$h(new yf(0,0,0),this.map.transform.projection),d=[c.projection.project(this.coordinates[0][0],this.coordinates[0][1]),c.projection.project(this.coordinates[1][0],this.coordinates[1][1]),c.projection.project(this.coordinates[2][0],this.coordinates[2][1]),c.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(Q){const ae=Q[1].x-Q[0].x,ge=Q[1].y-Q[0].y,_e=Q[2].x-Q[1].x,be=Q[2].y-Q[1].y,Ae=Q[3].x-Q[2].x,Pe=Q[3].y-Q[2].y,Ge=Q[0].x-Q[3].x,Ke=Q[0].y-Q[3].y,rt=ae*be-_e*ge,ft=_e*Pe-Ae*be,st=Ae*Ke-Ge*Pe,It=Ge*ge-ae*Ke;return rt>0&&ft>0&&st>0&&It>0||rt<0&&ft<0&&st<0&&It<0}(d))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const g=$h(this.tileID,this.map.transform.projection),[y,b,M,E]=this.coordinates.map(Q=>{const ae=g.projection.project(Q[0],Q[1]);return Ez(g,ae)._round()});this.perspectiveTransform=AB(y.x,y.y,b.x,b.y,M.x,M.y,E.x,E.y);const P=this._boundsArray=new Hi;P.emplaceBack(y.x,y.y,0,0),P.emplaceBack(b.x,b.y,tr,0),P.emplaceBack(E.x,E.y,0,tr),P.emplaceBack(M.x,M.y,tr,tr),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=o.createVertexBuffer(P,hb.members),this.boundsSegments=yn.simpleSegment(0,0,4,2);const O=[],F=function(Q){return[xb(Q[0]),xb(Q[1]),xb(Q[2]),xb(Q[3])]}(this.coordinates),[V,U,q,K]=function(Q){let ae=Q[0][0],ge=ae,_e=Q[0][1],be=_e;for(let Ae=1;Ae<Q.length;Ae++)Q[Ae][0]<ae?ae=Q[Ae][0]:Q[Ae][0]>ge&&(ge=Q[Ae][0]),Q[Ae][1]<_e?_e=Q[Ae][1]:Q[Ae][1]>be&&(be=Q[Ae][1]);return[ae,_e,ge-ae,be-_e]}(F);{const Q=new Hi,[ae,ge,_e,be]=function(wt){let nr=wt[0].x,cr=nr,$t=wt[0].y,Dr=$t;for(let fr=1;fr<wt.length;fr++)wt[fr].x<nr?nr=wt[fr].x:wt[fr].x>cr&&(cr=wt[fr].x),wt[fr].y<$t?$t=wt[fr].y:wt[fr].y>Dr&&(Dr=wt[fr].y);return[nr,$t,cr-nr,Dr-$t]}(d),Ae=wt=>[(wt.x-ae)/_e,(wt.y-ge)/be],[Pe,Ge,Ke,rt]=d.map(Ae),ft=function(wt,nr,cr,$t,Dr,fr,rr,Pr){const yr=yb(0,0,1,0,1,1,0,1),Ar=yb(wt,nr,cr,$t,Dr,fr,rr,Pr),Qt=a.bx.adjoint([],Ar);return a.bx.multiply(yr,yr,Qt)}(Pe[0],Pe[1],Ge[0],Ge[1],Ke[0],Ke[1],rt[0],rt[1]);this.elevatedGlobePerspectiveTransform=AB(Pe[0],Pe[1],Ge[0],Ge[1],Ke[0],Ke[1],rt[0],rt[1]);const st=(wt,nr)=>{O.push(wt.lng);const cr=Math.round((wt.lng-V)/q*tr),$t=Math.round((wt.lat-U)/K*tr),Dr=Ae(nr),fr=a.v.transformMat3([],[Dr[0],Dr[1],1],ft),rr=Math.round(fr[0]/fr[2]*tr),Pr=Math.round(fr[1]/fr[2]*tr);Q.emplaceBack(cr,$t,rr,Pr)},It=d[3].x-d[0].x,Ut=d[3].y-d[0].y,Tt=d[2].x-d[1].x,Bt=d[2].y-d[1].y;for(let wt=0;wt<65;wt++){const nr=wt/64,cr=[d[0].x+nr*It,d[0].y+nr*Ut],$t=[d[1].x+nr*Tt,d[1].y+nr*Bt],Dr=$t[0]-cr[0],fr=$t[1]-cr[1];for(let rr=0;rr<65;rr++){const Pr=rr/64,yr={x:cr[0]+Dr*Pr,y:cr[1]+fr*Pr,z:0};st(c.projection.unproject(yr.x,yr.y),yr)}}this.elevatedGlobeVertexBuffer=o.createVertexBuffer(Q,hb.members)}{this.maxLongitudeTriangleSize=0;let Q=[],ae=new Xi;const ge=(_e,be,Ae)=>{ae.emplaceBack(_e,be,Ae);const Pe=O[_e],Ge=O[be],Ke=O[Ae],rt=Math.min(Math.min(Pe,Ge),Ke),ft=Math.max(Math.max(Pe,Ge),Ke)-rt;ft>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=ft),Q.push(rt+ft/2)};for(let _e=0;_e<64;_e++)for(let be=0;be<64;be++){const Ae=65*_e+be,Pe=Ae+1,Ge=Ae+65,Ke=Ge+1;ge(Ae,Ge,Pe),ge(Pe,Ge,Ke)}[Q,ae]=function(_e,be){const Ae=Array.from({length:_e.length},(Ke,rt)=>rt);Ae.sort((Ke,rt)=>_e[Ke]-_e[rt]);const Pe=[],Ge=new Xi;for(let Ke=0;Ke<Ae.length;Ke++){const rt=Ae[Ke];Pe.push(_e[rt]);const ft=3*rt,st=ft+1;Ge.emplaceBack(be.uint16[ft],be.uint16[st],be.uint16[st+1])}return[Pe,Ge]}(Q,ae),this.elevatedGlobeTrianglesCenterLongitudes=Q,this.elevatedGlobeIndexBuffer=o.createIndexBuffer(ae)}this.elevatedGlobeSegments=yn.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,q/tr,0,K/tr,0,0,U,V,0])}prepare(){const o=Object.keys(this.tiles).length!==0;if(this.tileID&&!o)return;const c=this.map.painter.context,d=c.gl;!this._dirty||this.texture instanceof ub||(this.texture?this.texture.update(this.image):(this.texture=new Fc(c,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this._dirty=!1),o&&this._prepareData(c)}loadTile(o,c){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},c(null)):(o.state="errored",c(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(o){const c=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!c)return null;const d=this.elevatedGlobeTrianglesCenterLongitudes;let g=((O,F)=>O+360*Math.round((F-O)/360))(o+180,d[0]);const y=new yn,b=(O,F)=>{y.segments.push({vertexOffset:0,primitiveOffset:O,vertexLength:c.segments[0].vertexLength,primitiveLength:F,sortKey:void 0,vaos:{}})},M=.51*this.maxLongitudeTriangleSize;if(Math.abs(d[0]-g)<=M){const O=bt(d,0,d.length,g+M);return O===d.length||b(O,ot(d,O+1,d.length,g+360-M)-O),y}g<d[0]&&(g+=360);const E=ot(d,0,d.length,g-M);if(E===d.length)return b(0,d.length),y;b(0,E-0);const P=bt(d,E+1,d.length,g+M);return P!==d.length&&b(P,d.length-P),y}}class OJ extends ur{constructor(o,c){super(o,{},c),this.implementation=o,o.slot&&(this.slot=o.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(o){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}const zJ=new Rt({visibility:new Ee(ut.layout_sky.visibility)});var BJ={paint:new Rt({"sky-type":new Ee(ut.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ee(ut.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ee(ut.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ee(ut.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ee(ut.paint_sky["sky-gradient-radius"]),"sky-gradient":new Ft(ut.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ee(ut.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ee(ut.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ee(ut.paint_sky["sky-opacity"])}),layout:zJ};function cA(l,o,c){const d=[0,0,1],g=a.q.identity([]);return a.q.rotateY(g,g,c?-se(l)+Math.PI:se(l)),a.q.rotateX(g,g,-se(o)),a.v.transformQuat(d,d,g),a.v.normalize(d,d)}var FJ={paint:new Rt({})};const NJ={circle:class extends ur{constructor(l,o,c){super(l,gY,o,c)}createBucket(l){return new CM(l)}queryRadius(l){const o=l;return jm("circle-radius",this,o)+jm("circle-stroke-width",this,o)+k1(this.paint.get("circle-translate"))}queryIntersectsFeature(l,o,c,d,g,y,b,M){const E=EO(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,l.pixelToTileUnitsFactor),P=this.paint.get("circle-radius").evaluate(o,c)+this.paint.get("circle-stroke-width").evaluate(o,c);return PO(l,d,y,b,M,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",E,P)}getProgramIds(){return["circle"]}getDefaultProgramParams(l,o){const c=DO(this);return{config:new gf(this,o),defines:c,overrideFog:!1}}},heatmap:class extends ur{createBucket(l){return new kO(l)}constructor(l,o,c){super(l,wY,o,c),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=R1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(l){return jm("heatmap-radius",this,l)}queryIntersectsFeature(l,o,c,d,g,y,b,M){const E=this.paint.get("heatmap-radius").evaluate(o,c);return PO(l,d,y,b,M,!0,!0,new H(0,0),E)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(l,o){return l==="heatmap"?{config:new gf(this,o),overrideFog:!1}:{}}},hillshade:class extends ur{constructor(l,o,c){super(l,TY,o,c)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(l,o){return{overrideFog:!1}}},fill:class extends ur{constructor(l,o,c){super(l,FY,o,c)}getProgramIds(){const l=this.paint.get("fill-pattern"),o=l&&l.constantOr(1),c=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&c.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),c}getDefaultProgramParams(l,o){return{config:new gf(this,o),overrideFog:!1}}recalculate(l,o){super.recalculate(l,o);const c=this.paint._values["fill-outline-color"];c.value.kind==="constant"&&c.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new V1(l)}queryRadius(){return k1(this.paint.get("fill-translate"))}queryIntersectsFeature(l,o,c,d,g,y){return!l.queryGeometry.isAboveHorizon&&TO(IO(l.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,l.pixelToTileUnitsFactor),d)}isTileClipped(){return!0}},"fill-extrusion":class extends ur{constructor(l,o,c){super(l,EJ,o,c),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(l){return new ey(l)}queryRadius(){return k1(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return!0}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(l,o,c,d,g,y,b,M,E){const P=EO(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,l.pixelToTileUnitsFactor),O=this.paint.get("fill-extrusion-height").evaluate(o,c),F=this.paint.get("fill-extrusion-base").evaluate(o,c),V=[0,0],U=M&&y.elevation,q=y.elevation?y.elevation.exaggeration():1,K=l.tile.getBucket(this);if(U&&K instanceof ey){const be=K.centroidVertexArray,Ae=E+1;Ae<be.length&&(V[0]=be.geta_centroid_pos0(Ae),V[1]=be.geta_centroid_pos1(Ae))}if(V[0]===0&&V[1]===1)return!1;y.projection.name==="globe"&&(d=gB([d],[new H(0,0),new H(tr,tr)],l.tileID.canonical).map(be=>be.polygon).flat());const Q=U?M:null,[ae,ge]=function(be,Ae,Pe,Ge,Ke,rt,ft,st,It,Ut,Tt){return be.projection.name==="globe"?function(Bt,wt,nr,cr,$t,Dr,fr,rr,Pr,yr,Ar){const Qt=[],Fr=[],mi=Bt.projection.upVectorScale(Ar,Bt.center.lat,Bt.worldSize).metersToTile,qr=[0,0,0,1],ui=[0,0,0,1],Ei=(ti,pn,nn,Ui)=>{ti[0]=pn,ti[1]=nn,ti[2]=Ui,ti[3]=1},rn=mB();nr>0&&(nr+=rn),cr+=rn;for(const ti of wt){const pn=[],nn=[];for(const Ui of ti){const Wi=Ui.x+$t.x,Di=Ui.y+$t.y,Ln=Bt.projection.projectTilePoint(Wi,Di,Ar),mn=Bt.projection.upVector(Ar,Ui.x,Ui.y);let Nn=nr,ca=cr;if(fr){const go=_B(Wi,Di,nr,cr,fr,rr,Pr,yr);Nn+=go.base,ca+=go.top}nr!==0?Ei(qr,Ln.x+mn[0]*mi*Nn,Ln.y+mn[1]*mi*Nn,Ln.z+mn[2]*mi*Nn):Ei(qr,Ln.x,Ln.y,Ln.z),Ei(ui,Ln.x+mn[0]*mi*ca,Ln.y+mn[1]*mi*ca,Ln.z+mn[2]*mi*ca),a.v.transformMat4(qr,qr,Dr),a.v.transformMat4(ui,ui,Dr),pn.push(new ig(qr[0],qr[1],qr[2])),nn.push(new ig(ui[0],ui[1],ui[2]))}Qt.push(pn),Fr.push(nn)}return[Qt,Fr]}(be,Ae,Pe,Ge,Ke,rt,ft,st,It,Ut,Tt):ft?function(Bt,wt,nr,cr,$t,Dr,fr,rr,Pr){const yr=[],Ar=[],Qt=[0,0,0,1];for(const Fr of Bt){const mi=[],qr=[];for(const ui of Fr){const Ei=ui.x+cr.x,rn=ui.y+cr.y,ti=_B(Ei,rn,wt,nr,Dr,fr,rr,Pr);Qt[0]=Ei,Qt[1]=rn,Qt[2]=ti.base,Qt[3]=1,a.e.transformMat4(Qt,Qt,$t),Qt[3]=Math.max(Qt[3],1e-5);const pn=new ig(Qt[0]/Qt[3],Qt[1]/Qt[3],Qt[2]/Qt[3]);Qt[0]=Ei,Qt[1]=rn,Qt[2]=ti.top,Qt[3]=1,a.e.transformMat4(Qt,Qt,$t),Qt[3]=Math.max(Qt[3],1e-5);const nn=new ig(Qt[0]/Qt[3],Qt[1]/Qt[3],Qt[2]/Qt[3]);mi.push(pn),qr.push(nn)}yr.push(mi),Ar.push(qr)}return[yr,Ar]}(Ae,Pe,Ge,Ke,rt,ft,st,It,Ut):function(Bt,wt,nr,cr,$t){const Dr=[],fr=[],rr=$t[8]*wt,Pr=$t[9]*wt,yr=$t[10]*wt,Ar=$t[11]*wt,Qt=$t[8]*nr,Fr=$t[9]*nr,mi=$t[10]*nr,qr=$t[11]*nr;for(const ui of Bt){const Ei=[],rn=[];for(const ti of ui){const pn=ti.x+cr.x,nn=ti.y+cr.y,Ui=$t[0]*pn+$t[4]*nn+$t[12],Wi=$t[1]*pn+$t[5]*nn+$t[13],Di=$t[2]*pn+$t[6]*nn+$t[14],Ln=$t[3]*pn+$t[7]*nn+$t[15],mn=Ui+rr,Nn=Wi+Pr,ca=Di+yr,go=Math.max(Ln+Ar,1e-5),jn=Ui+Qt,On=Wi+Fr,Xa=Di+mi,Ya=Math.max(Ln+qr,1e-5);Ei.push(new ig(mn/go,Nn/go,ca/go)),rn.push(new ig(jn/Ya,On/Ya,Xa/Ya))}Dr.push(Ei),fr.push(rn)}return[Dr,fr]}(Ae,Pe,Ge,Ke,rt)}(y,d,F,O,P,b,Q,V,q,y.center.lat,l.tileID.canonical),_e=l.queryGeometry;return function(be,Ae,Pe){let Ge=1/0;TO(Pe,Ae)&&(Ge=vB(Pe,Ae[0]));for(let Ke=0;Ke<Ae.length;Ke++){const rt=Ae[Ke],ft=be[Ke];for(let st=0;st<rt.length-1;st++){const It=rt[st],Ut=[It,rt[st+1],ft[st+1],ft[st],It];SO(Pe,Ut)&&(Ge=Math.min(Ge,vB(Pe,Ut)))}}return Ge!==1/0&&Ge}(ae,ge,_e.isPointQuery()?_e.screenBounds:_e.screenGeometry)}},line:class extends ur{constructor(l,o,c){super(l,yB,o,c),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof t_,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(l,o){super.recalculate(l,o),this.paint._values["line-floorwidth"]=TB.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new lb(l)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(l,o){const c=wB(this);return{config:new gf(this,o),defines:c,overrideFog:!1}}queryRadius(l){const o=l,c=MB(jm("line-width",this,o),jm("line-gap-width",this,o)),d=jm("line-offset",this,o);return c/2+Math.abs(d)+k1(this.paint.get("line-translate"))}queryIntersectsFeature(l,o,c,d,g,y){if(l.queryGeometry.isAboveHorizon)return!1;const b=IO(l.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,l.pixelToTileUnitsFactor),M=l.pixelToTileUnitsFactor/2*MB(this.paint.get("line-width").evaluate(o,c),this.paint.get("line-gap-width").evaluate(o,c)),E=this.paint.get("line-offset").evaluate(o,c);return E&&(d=function(P,O){const F=[],V=new H(0,0);for(let U=0;U<P.length;U++){const q=P[U],K=[];for(let Q=0;Q<q.length;Q++){const ae=q[Q],ge=q[Q+1],_e=Q===0?V:ae.sub(q[Q-1])._unit()._perp(),be=Q===q.length-1?V:ge.sub(ae)._unit()._perp(),Ae=_e._add(be)._unit();Ae._mult(1/(Ae.x*be.x+Ae.y*be.y)),K.push(Ae._mult(O)._add(ae))}F.push(K)}return F}(d,E*l.pixelToTileUnitsFactor)),function(P,O,F){for(let V=0;V<O.length;V++){const U=O[V];if(P.length>=3){for(let q=0;q<U.length;q++)if(wf(P,U[q]))return!0}if(dY(P,U,F))return!0}return!1}(b,d,M)}isTileClipped(){return!0}},symbol:rb,background:class extends ur{constructor(l,o,c){super(l,LJ,o,c)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(l,o){return{overrideFog:!1}}},raster:class extends ur{constructor(l,o,c){super(l,RJ,o,c),this._updateColorRamp()}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}isLayerDraped(l){return!(l&&l._source instanceof CB)||!l._source.onNorthPole&&!l._source.onSouthPole&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(l){l!=="raster-color"&&l!=="raster-color-range"||this._updateColorRamp()}_updateColorRamp(){if(!this.hasColorMap())return;const l=this._transitionablePaint._values["raster-color"].value.expression,[o,c]=this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0});this.colorRamp=R1({expression:l,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:o,end:c}],resolution:256}),this.colorRampTexture=null}},sky:class extends ur{constructor(l,o,c){super(l,BJ,o,c),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="sky-gradient"?this._updateColorRamp():l!=="sky-atmosphere-sun"&&l!=="sky-atmosphere-halo-color"&&l!=="sky-atmosphere-color"&&l!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=R1({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(l){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=l.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(l,o){if(this.paint.get("sky-type")==="atmosphere"){const d=this.paint.get("sky-atmosphere-sun"),g=!d,y=l.style.light,b=y.properties.get("position");return g&&y.properties.get("anchor")==="viewport"&&Ue("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?cA(b.azimuthal,90-b.polar,o):cA(d[0],90-d[1],o)}const c=this.paint.get("sky-gradient-center");return cA(c[0],90-c[1],o)}isSky(){return!0}markSkyboxValid(l){this._skyboxInvalidated=!1,this._lightPosition=l.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const l=this.paint.get("sky-type");return l==="atmosphere"?["skyboxCapture","skybox"]:l==="gradient"?["skyboxGradient"]:null}},slot:class extends ur{constructor(l,o,c){super(l,FJ,o)}},model:class extends ur{constructor(l,o,c){super(l,mJ,o,c)}createBucket(l){return new Zz(l)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(){return 0}queryIntersectsFeature(){return!1}_handleOverridablePaintPropertyUpdate(l,o,c){return!(!this.layout||o.isDataDriven()||c.isDataDriven()||l!=="model-color"&&l!=="model-color-mix-intensity"&&l!=="model-rotation"&&l!=="model-scale"&&l!=="model-translation"&&l!=="model-emissive-strength")}_isPropertyZoomDependent(l){const o=this._transitionablePaint._values[l];return o!=null&&o.value!=null&&o.value.expression!=null&&o.value.expression instanceof uf}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}}};class VJ{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class $J{constructor(){this.tasks={},this.taskQueue=[],Pt(["process"],this),this.invoker=new VJ(this.process),this.nextId=0}add(o,c){const d=this.nextId++,g=function({type:y,isSymbolTile:b,zoom:M}){return M=M||0,y==="message"?0:y!=="maybePrepare"||b?y!=="parseTile"||b?y==="parseTile"&&b?300-M:y==="maybePrepare"&&b?400-M:500:200-M:100-M}(c);if(g===0){De();try{o()}finally{}return null}return this.tasks[d]={fn:o,metadata:c,priority:g,id:d},this.taskQueue.push(d),this.invoker.trigger(),{cancel:()=>{delete this.tasks[d]}}}process(){De();try{if(this.taskQueue=this.taskQueue.filter(d=>!!this.tasks[d]),!this.taskQueue.length)return;const o=this.pick();if(o===null)return;const c=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!c)return;c.fn()}finally{}}pick(){let o=null,c=1/0;for(let g=0;g<this.taskQueue.length;g++){const y=this.tasks[this.taskQueue[g]];y.priority<c&&(c=y.priority,o=g)}if(o===null)return null;const d=this.taskQueue[o];return this.taskQueue.splice(o,1),d}remove(){this.invoker.remove()}}class IB{constructor(o,c,d){this.target=o,this.parent=c,this.mapId=d,this.callbacks={},this.cancelCallbacks={},Pt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new $J}send(o,c,d,g,y=!1,b){const M=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(d.metadata=b,this.callbacks[M]=d);const E=new Set;return this.target.postMessage({id:M,type:o,hasCallback:!!d,targetMapId:g,mustQueue:y,sourceMapId:this.mapId,data:_(c,E)},E),{cancel:()=>{d&&delete this.callbacks[M],this.target.postMessage({id:M,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}receive(o){const c=o.data,d=c.id;if(d&&(!c.targetMapId||this.mapId===c.targetMapId))if(c.type==="<cancel>"){const g=this.cancelCallbacks[d];delete this.cancelCallbacks[d],g&&g.cancel()}else if(c.mustQueue||De()){const g=this.callbacks[d],y=this.scheduler.add(()=>this.processTask(d,c),g&&g.metadata||{type:"message"});y&&(this.cancelCallbacks[d]=y)}else this.processTask(d,c)}processTask(o,c){if(delete this.cancelCallbacks[o],c.type==="<response>"){const d=this.callbacks[o];delete this.callbacks[o],d&&(c.error?d(A(c.error)):d(null,A(c.data)))}else{const d=new Set,g=c.hasCallback?(b,M)=>{this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:b?_(b):null,data:_(M,d)},d)}:b=>{},y=A(c.data);if(this.parent[c.type])this.parent[c.type](c.sourceMapId,y,g);else if(this.parent.getWorkerSource){const b=c.type.split(".");this.parent.getWorkerSource(c.sourceMapId,b[0],y.source,y.scope)[b[1]](y,g)}else g(new Error(`Could not find function ${c.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class ry{constructor(o,c){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=He();const d=this.workerPool.acquire(this.id);for(let g=0;g<d.length;g++){const y=new ry.Actor(d[g],c,this.id);y.name=`Worker ${g}`,this.actors.push(y)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(o,c,d){St(this.actors,(g,y)=>{g.send(o,c,y)},d=d||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}ry.Actor=IB;class EB{constructor(o,c){this.width=o,this.height=c,this.nextRow=0,this.image=new Oc({width:o,height:c}),this.positions={},this.uploaded=!1}getDash(o,c){const d=this.getKey(o,c);return this.positions[d]}trim(){const o=this.width,c=this.height=nt(this.nextRow);this.image.resize({width:o,height:c})}getKey(o,c){return o.join(",")+c}getDashRanges(o,c,d){const g=[];let y=o.length%2==1?-o[o.length-1]*d:0,b=o[0]*d,M=!0;g.push({left:y,right:b,isDash:M,zeroLength:o[0]===0});let E=o[0];for(let P=1;P<o.length;P++){M=!M;const O=o[P];y=E*d,E+=O,b=E*d,g.push({left:y,right:b,isDash:M,zeroLength:O===0})}return g}addRoundDash(o,c,d){const g=c/2;for(let y=-d;y<=d;y++){const b=this.width*(this.nextRow+d+y);let M=0,E=o[M];for(let P=0;P<this.width;P++){P/E.right>1&&(E=o[++M]);const O=Math.abs(P-E.left),F=Math.abs(P-E.right),V=Math.min(O,F);let U;const q=y/d*(g+1);if(E.isDash){const K=g-Math.abs(q);U=Math.sqrt(V*V+K*K)}else U=g-Math.sqrt(V*V+q*q);this.image.data[b+P]=Math.max(0,Math.min(255,U+128))}}}addRegularDash(o,c){for(let E=o.length-1;E>=0;--E){const P=o[E],O=o[E+1];P.zeroLength?o.splice(E,1):O&&O.isDash===P.isDash&&(O.left=P.left,o.splice(E,1))}const d=o[0],g=o[o.length-1];d.isDash===g.isDash&&(d.left=g.left-this.width,g.right=d.right+this.width);const y=this.width*this.nextRow;let b=0,M=o[b];for(let E=0;E<this.width;E++){E/M.right>1&&(M=o[++b]);const P=Math.abs(E-M.left),O=Math.abs(E-M.right),F=Math.min(P,O);this.image.data[y+E]=Math.max(0,Math.min(255,(M.isDash?F:-F)+c+128))}}addDash(o,c){const d=this.getKey(o,c);if(this.positions[d])return this.positions[d];const g=c==="round",y=g?7:0,b=2*y+1;if(this.nextRow+b>this.height)return Ue("LineAtlas out of space"),null;o.length===0&&o.push(1);let M=0;for(let O=0;O<o.length;O++)o[O]<0&&(Ue("Negative value is found in line dasharray, replacing values with 0"),o[O]=0),M+=o[O];if(M!==0){const O=this.width/M,F=this.getDashRanges(o,this.width,O);g?this.addRoundDash(F,O,y):this.addRegularDash(F,c==="square"?.5*O:0)}const E=this.nextRow+y;this.nextRow+=b;const P={tl:[E,y],br:[M,0]};return this.positions[d]=P,P}}hr(EB,"LineAtlas");const DB=1*Fl;class PB{constructor(o){const c={},d=[];for(const M in o){const E=o[M],P=c[M]={};for(const O in E.glyphs){const F=E.glyphs[+O];if(!F||F.bitmap.width===0||F.bitmap.height===0)continue;const V=F.metrics.localGlyph?DB:1,U={x:0,y:0,w:F.bitmap.width+2*V,h:F.bitmap.height+2*V};d.push(U),P[O]=U}}const{w:g,h:y}=WM(d),b=new Oc({width:g||1,height:y||1});for(const M in o){const E=o[M];for(const P in E.glyphs){const O=E.glyphs[+P];if(!O||O.bitmap.width===0||O.bitmap.height===0)continue;const F=c[M][P],V=O.metrics.localGlyph?DB:1;Oc.copy(O.bitmap,b,{x:0,y:0},{x:F.x+V,y:F.y+V},O.bitmap)}}this.image=b,this.positions=c}}hr(PB,"GlyphAtlas");class GJ{constructor(o){this.tileID=new _a(o.tileID.overscaledZ,o.tileID.wrap,o.tileID.canonical.z,o.tileID.canonical.x,o.tileID.canonical.y),this.tileZoom=o.tileZoom,this.uid=o.uid,this.zoom=o.zoom,this.canonical=o.tileID.canonical,this.pixelRatio=o.pixelRatio,this.tileSize=o.tileSize,this.source=o.source,this.scope=o.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=o.showCollisionBoxes,this.collectResourceTiming=!!o.collectResourceTiming,this.promoteId=o.promoteId,this.isSymbolTile=o.isSymbolTile,this.tileTransform=$h(o.tileID.canonical,o.projection),this.projection=o.projection,this.brightness=o.brightness,this.extraShadowCaster=!!o.extraShadowCaster}parse(o,c,d,g,y){this.status="parsing",this.data=o,this.collisionBoxArray=new H2;const b=new jO(Object.keys(o.layers).sort()),M=new $M(this.tileID,this.promoteId);M.bucketLayerIDs=[];const E={},P=new EB(256,256),O={featureIndex:M,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:P,availableImages:d,brightness:this.brightness},F=c.familiesBySource[this.source];for(const ge in F){const _e=o.layers[ge];if(!_e)continue;let be=!1,Ae=!1,Pe=!1;for(const rt of F[ge])rt[0].type==="symbol"?be=!0:Ae=!0,rt[0].is3D()&&rt[0].type!=="model"&&(Pe=!0);if(this.extraShadowCaster&&!Pe||this.isSymbolTile===!0&&!be||this.isSymbolTile===!1&&!Ae)continue;_e.version===1&&Ue(`Vector tile source "${this.source}" layer "${ge}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ge=b.encode(ge),Ke=[];for(let rt=0;rt<_e.length;rt++){const ft=_e.feature(rt),st=M.getId(ft,ge);Ke.push({feature:ft,id:st,index:rt,sourceLayerIndex:Ge})}for(const rt of F[ge]){const ft=rt[0];(!this.extraShadowCaster||ft.is3D()&&ft.type!=="model")&&(this.isSymbolTile!==void 0&&ft.type==="symbol"!==this.isSymbolTile||ft.minzoom&&this.zoom<Math.floor(ft.minzoom)||ft.maxzoom&&this.zoom>=ft.maxzoom||ft.visibility!=="none"&&(hA(rt,this.zoom,O.brightness,d),(E[ft.id]=ft.createBucket({index:M.bucketLayerIDs.length,layers:rt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ge,sourceID:this.source,projection:this.projection.spec})).populate(Ke,O,this.tileID.canonical,this.tileTransform),M.bucketLayerIDs.push(rt.map(st=>st.id))))}}let V,U,q,K;P.trim();const Q={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ae=()=>{if(V)return this.status="done",y(V);if(this.extraShadowCaster)this.status="done",y(null,{buckets:et(E).filter(ge=>!ge.isEmpty()),featureIndex:M,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:O.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(U&&q&&K){const ge=new PB(U),_e=new xz(q,K);for(const be in E){const Ae=E[be];Ae instanceof Z_?(hA(Ae.layers,this.zoom,O.brightness,d),FK(Ae,U,ge.positions,q,_e.iconPositions,this.showCollisionBoxes,d,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):Ae.hasPattern&&(Ae instanceof lb||Ae instanceof V1||Ae instanceof ey)&&(hA(Ae.layers,this.zoom,O.brightness,d),Ae.addFeatures(O,this.tileID.canonical,_e.patternPositions,d,this.tileTransform,this.brightness))}this.status="done",y(null,{buckets:et(E).filter(be=>!be.isEmpty()),featureIndex:M,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ge.image,lineAtlas:P,imageAtlas:_e,brightness:O.brightness})}};if(!this.extraShadowCaster){const ge=Et(O.glyphDependencies,Ae=>Object.keys(Ae).map(Number));Object.keys(ge).length?g.send("getGlyphs",{uid:this.uid,stacks:ge,scope:this.scope},(Ae,Pe)=>{V||(V=Ae,U=Pe,ae())},void 0,!1,Q):U={};const _e=Object.keys(O.iconDependencies);_e.length?g.send("getImages",{icons:_e,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Ae,Pe)=>{V||(V=Ae,q=Pe,ae())},void 0,!1,Q):q={};const be=Object.keys(O.patternDependencies);be.length?g.send("getImages",{icons:be,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Ae,Pe)=>{V||(V=Ae,K=Pe,ae())},void 0,!1,Q):K={}}ae()}}function hA(l,o,c,d){const g=new Ne(o,{brightness:c});for(const y of l)y.recalculate(g,d)}class LB{constructor(o){this.entries={},this.scheduler=o}request(o,c,d,g){const y=this.entries[o]=this.entries[o]||{callbacks:[]};if(y.result){const[b,M]=y.result;return this.scheduler?this.scheduler.add(()=>{g(b,M)},c):g(b,M),()=>{}}return y.callbacks.push(g),y.cancel||(y.cancel=d((b,M)=>{y.result=[b,M];for(const E of y.callbacks)this.scheduler?this.scheduler.add(()=>{E(b,M)},c):E(b,M);setTimeout(()=>delete this.entries[o],3e3)})),()=>{y.result||(y.callbacks=y.callbacks.filter(b=>b!==g),y.callbacks.length||(y.cancel(),delete this.entries[o]))}}}function kB(l,o,c){const d=JSON.stringify(l.request);return l.data&&(this.deduped.entries[d]={result:[null,l.data]}),this.deduped.request(d,{type:"parseTile",isSymbolTile:l.isSymbolTile,zoom:l.tileZoom},g=>{const y=qn(l.request,(b,M,E,P)=>{b?g(b):M&&g(null,{vectorTile:c?void 0:new NM(new W1(M)),rawData:M,cacheControl:E,expires:P})});return()=>{y.cancel(),g()}},o)}var iy={workerUrl:"",workerClass:null,workerParams:void 0};function UJ(){return iy.workerClass!=null?new iy.workerClass:new self.Worker(iy.workerUrl,iy.workerParams)}const dA="mapboxgl_preloaded_worker_pool";class ny{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<ny.workerCount;)this.workers.push(new UJ);return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.workers&&this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[dA]}numActive(){return Object.keys(this.active).length}}let ay;function fA(){return ay||(ay=new ny),ay}ny.workerCount=2;let bb,pA,Vl,mA=null;function RB(){return De()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:pA||m.DRACO_URL}const gA=5123,vA=5126,_A={5120:Int8Array,5121:Uint8Array,5122:Int16Array,[gA]:Uint16Array,5125:Uint32Array,[vA]:Float32Array},jJ={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",[gA]:"DT_UINT16",5125:"DT_UINT32",[vA]:"DT_FLOAT32"},yA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function OB(l,o,c){const d=c.json.bufferViews.length,g=c.buffers.length;o.bufferView=d,c.json.bufferViews[d]={buffer:g,byteLength:l.byteLength},c.buffers[g]=l}const xA="KHR_draco_mesh_compression";function HJ(l,o){const c=l.extensions&&l.extensions[xA];if(!c)return;const d=new Vl.Decoder,g=NB(o,c.bufferView),y=new Vl.Mesh;if(!d.DecodeArrayToMesh(g,g.byteLength,y))throw new Error("Failed to decode Draco mesh");const b=o.json.accessors[l.indices],M=_A[b.componentType],E=b.count*M.BYTES_PER_ELEMENT,P=Vl._malloc(E);M===Uint16Array?d.GetTrianglesUInt16Array(y,E,P):d.GetTrianglesUInt32Array(y,E,P),OB(Vl.memory.buffer.slice(P,P+E),b,o),Vl._free(P);for(const O of Object.keys(c.attributes)){const F=d.GetAttributeByUniqueId(y,c.attributes[O]),V=o.json.accessors[l.attributes[O]],U=jJ[V.componentType],q=V.count*yA[V.type]*_A[V.componentType].BYTES_PER_ELEMENT,K=Vl._malloc(q);d.GetAttributeDataArrayForAllPoints(y,F,Vl[U],q,K),OB(Vl.memory.buffer.slice(K,K+q),V,o),Vl._free(K)}d.destroy(),y.destroy(),delete l.extensions[xA]}const zB=1179937895,BB=new TextDecoder("utf8");function FB(l,o){return new URL(l,o).href}function WJ(l,o,c,d){return fetch(FB(l.uri,d)).then(g=>g.arrayBuffer()).then(g=>{o.buffers[c]=g})}function NB(l,o){const c=l.json.bufferViews[o];return new Uint8Array(l.buffers[c.buffer],c.byteOffset||0,c.byteLength)}function qJ(l,o,c,d){if(l.uri){const g=FB(l.uri,d);return fetch(g).then(y=>y.blob()).then(y=>createImageBitmap(y)).then(y=>{o.images[c]=y})}if(l.bufferView!==void 0){const g=NB(o,l.bufferView),y=new Blob([g],{type:l.mimeType});return createImageBitmap(y).then(b=>{o.images[c]=b})}}function VB(l,o=0,c){const d={json:null,images:[],buffers:[]};if(new Uint32Array(l,o,1)[0]===zB){const P=new Uint32Array(l,o);let O=2;const F=(P[O++]>>2)-3,V=P[O++]>>2;if(O++,d.json=JSON.parse(BB.decode(P.subarray(O,O+V))),O+=V,O<F){const U=P[O++];O++;const q=o+(O<<2);d.buffers[0]=l.slice(q,q+U)}}else d.json=JSON.parse(BB.decode(new Uint8Array(l,o)));const{buffers:g,images:y,meshes:b,extensionsUsed:M}=d.json;let E=Promise.resolve();if(g){const P=[];for(let O=0;O<g.length;O++){const F=g[O];F.uri?P.push(WJ(F,d,O,c)):d.buffers[O]||(d.buffers[O]=null)}E=Promise.all(P)}return E.then(()=>{const P=[],O=M&&M.includes(xA);if(O&&P.push(function(){if(!Vl)return bb||(bb=function(F){let V,U=null;function q(){V=new Uint8Array(U.buffer)}function K(){throw new Error("Unexpected Draco error.")}const Q={a:{a:K,d:function(ae,ge,_e){return V.copyWithin(ae,ge,ge+_e)},c:function(ae){const ge=V.length,_e=Math.max(ae>>>0,Math.ceil(1.2*ge)),be=Math.ceil((_e-ge)/65536);try{return U.grow(be),q(),!0}catch{return!1}},b:K}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(F,Q):F.then(ae=>ae.arrayBuffer()).then(ae=>WebAssembly.instantiate(ae,Q))).then(ae=>{const{Rb:ge,Qb:_e,P:be,T:Ae,X:Pe,Ja:Ge,La:Ke,Qa:rt,Va:ft,Wa:st,eb:It,jb:Ut,f:Tt,e:Bt,yb:wt,zb:nr,Ab:cr,Bb:$t,Db:Dr,Gb:fr}=ae.instance.exports;U=Bt;const rr=(()=>{let Pr=0,yr=0,Ar=0,Qt=0;return Fr=>{Ar&&(ge(Qt),ge(Pr),yr+=Ar,Ar=Pr=0),Pr||(yr+=128,Pr=_e(yr));const mi=Fr.length+7&-8;let qr=Pr;mi>=yr&&(Ar=mi,qr=Qt=_e(mi));for(let ui=0;ui<Fr.length;ui++)V[qr+ui]=Fr[ui];return qr}})();return q(),Tt(),{memory:Bt,_free:ge,_malloc:_e,Mesh:class{constructor(){this.ptr=be()}destroy(){Ae(this.ptr)}},Decoder:class{constructor(){this.ptr=Ge()}destroy(){Ut(this.ptr)}DecodeArrayToMesh(Pr,yr,Ar){const Qt=rr(Pr),Fr=Ke(this.ptr,Qt,yr,Ar.ptr);return!!Pe(Fr)}GetAttributeByUniqueId(Pr,yr){return{ptr:rt(this.ptr,Pr.ptr,yr)}}GetTrianglesUInt16Array(Pr,yr,Ar){ft(this.ptr,Pr.ptr,yr,Ar)}GetTrianglesUInt32Array(Pr,yr,Ar){st(this.ptr,Pr.ptr,yr,Ar)}GetAttributeDataArrayForAllPoints(Pr,yr,Ar,Qt,Fr){It(this.ptr,Pr.ptr,yr.ptr,Ar,Qt,Fr)}},DT_INT8:wt(),DT_UINT8:nr(),DT_INT16:cr(),DT_UINT16:$t(),DT_UINT32:Dr(),DT_FLOAT32:fr()}})}(fetch(RB())),bb.then(F=>{Vl=F,bb=void 0}))}()),y)for(let F=0;F<y.length;F++)P.push(qJ(y[F],d,F,c));return(P.length?Promise.all(P):Promise.resolve()).then(()=>{if(O&&b)for(const{primitives:F}of b)for(const V of F)HJ(V,d);return d})})}class $B{constructor(o,c,d){if(this.triangleCount=c.length/3,this.min=new H(0,0),this.max=new H(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||o.length===0||d===0)return;const g=o.map(O=>O.x),y=o.map(O=>O.y);this.min=new H(Math.min(...g),Math.min(...y)),this.max=new H(Math.max(...g),Math.max(...y));const b=this.max.sub(this.min);b.x=Math.max(b.x,1),b.y=Math.max(b.y,1);const M=Math.max(b.x,b.y)/d;this.cellsX=Math.max(1,Math.ceil(b.x/M)),this.cellsY=Math.max(1,Math.ceil(b.y/M)),this.xScale=1/M,this.yScale=1/M;const E=[];for(let O=0;O<this.triangleCount;O++){const F=o[c[3*O+0]].sub(this.min),V=o[c[3*O+1]].sub(this.min),U=o[c[3*O+2]].sub(this.min),q=qh(Math.floor(Math.min(F.x,V.x,U.x)),this.xScale,this.cellsX),K=qh(Math.floor(Math.max(F.x,V.x,U.x)),this.xScale,this.cellsX),Q=qh(Math.floor(Math.min(F.y,V.y,U.y)),this.yScale,this.cellsY),ae=qh(Math.floor(Math.max(F.y,V.y,U.y)),this.yScale,this.cellsY),ge=new H(0,0),_e=new H(0,0),be=new H(0,0),Ae=new H(0,0);for(let Pe=Q;Pe<=ae;++Pe){ge.y=_e.y=Pe*M,be.y=Ae.y=(Pe+1)*M;for(let Ge=q;Ge<=K;++Ge)ge.x=be.x=Ge*M,_e.x=Ae.x=(Ge+1)*M,(DM(F,V,U,ge,_e,Ae)||DM(F,V,U,ge,Ae,be))&&E.push({cellIdx:Pe*this.cellsX+Ge,triIdx:O})}}if(E.length===0)return;E.sort((O,F)=>O.cellIdx-F.cellIdx||O.triIdx-F.triIdx);let P=0;for(;P<E.length;){const O=E[P].cellIdx,F={start:this.payload.length,len:0};for(;P<E.length&&E[P].cellIdx===O;)++F.len,this.payload.push(E[P++].triIdx);this.cells[O]=F}}query(o,c,d){if(this.triangleCount===0||this.cells.length===0||o.x>this.max.x||this.min.x>c.x||o.y>this.max.y||this.min.y>c.y)return;this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8)));for(let E=0;E<this.lookup.length;E++)this.lookup[E]=0;const g=qh(o.x-this.min.x,this.xScale,this.cellsX),y=qh(c.x-this.min.x,this.xScale,this.cellsX),b=qh(o.y-this.min.y,this.yScale,this.cellsY),M=qh(c.y-this.min.y,this.yScale,this.cellsY);for(let E=b;E<=M;E++)for(let P=g;P<=y;P++){const O=this.cells[E*this.cellsX+P];if(O)for(let F=0;F<O.len;F++){const V=this.payload[O.start+F],U=Math.floor(V/8),q=1<<V%8;if(!(this.lookup[U]&q)&&(this.lookup[U]|=q,d.push(V),d.length===this.triangleCount))return}}}}function qh(l,o,c){return Math.max(0,Math.min(c-1,Math.floor(l*o)))}function If(l,o){const c=l.json.bufferViews[o.bufferView];return new _A[o.componentType](l.buffers[c.buffer],(o.byteOffset||0)+(c.byteOffset||0),o.count*yA[o.type])}function ZJ(l,o,c){const d=l.indices,g=l.attributes,y={};y.indexArray=new Xi;const b=o.json.accessors[d],M=b.count/3;y.indexArray.reserve(M);const E=If(o,b);for(let V=0;V<M;V++)y.indexArray.emplaceBack(E[3*V],E[3*V+1],E[3*V+2]);y.indexArray._trim(),y.vertexArray=new pf;const P=o.json.accessors[g.POSITION];y.vertexArray.reserve(P.count);const O=If(o,P);for(let V=0;V<P.count;V++)y.vertexArray.emplaceBack(O[3*V],O[3*V+1],O[3*V+2]);if(y.vertexArray._trim(),y.aabb=new Un(P.min,P.max),y.centroid=function(V,U){const q=[0,0,0],K=V.length;if(K>0){for(let Q=0;Q<K;Q++){const ae=3*V[Q];q[0]+=U[ae],q[1]+=U[ae+1],q[2]+=U[ae+2]}q[0]/=K,q[1]/=K,q[2]/=K}return q}(E,O),g.COLOR_0!==void 0){const V=o.json.accessors[g.COLOR_0],U=yA[V.type];if(V.componentType===vA){y.colorArray=U===3?new pf:new $i,y.colorArray.reserve(V.count);const q=If(o,V);if(U===3)for(let K=0;K<V.count;K++)y.colorArray.emplaceBack(q[3*K],q[3*K+1],q[3*K+2]);else for(let K=0;K<V.count;K++)y.colorArray.emplaceBack(q[4*K],q[4*K+1],q[4*K+2],q[4*K+3]);y.colorArray._trim()}else if(V.componentType===gA&&U===4){y.colorArray=new $i,y.colorArray.resize(V.count);const q=If(o,V),K=1/65535,Q=y.colorArray.float32;for(let ae=0;ae<4*q.length;++ae)Q[ae]=q[ae]*K}else Ue(`glTF color buffer parsing for accessor ${JSON.stringify(V)} is not supported`)}if(g.NORMAL!==void 0){y.normalArray=new pf;const V=o.json.accessors[g.NORMAL];y.normalArray.reserve(V.count);const U=If(o,V);for(let q=0;q<V.count;q++)y.normalArray.emplaceBack(U[3*q],U[3*q+1],U[3*q+2]);y.normalArray._trim()}if(g.TEXCOORD_0!==void 0&&c.length>0){y.texcoordArray=new C_;const V=o.json.accessors[g.TEXCOORD_0];y.texcoordArray.reserve(V.count);const U=If(o,V);for(let q=0;q<V.count;q++)y.texcoordArray.emplaceBack(U[2*q],U[2*q+1]);y.texcoordArray._trim()}const F=l.material;return y.material=function(V,U){const{emissiveFactor:q=[0,0,0],alphaMode:K="OPAQUE",alphaCutoff:Q=.5,normalTexture:ae,occlusionTexture:ge,emissiveTexture:_e,doubleSided:be}=V,{baseColorFactor:Ae=[1,1,1,1],metallicFactor:Pe=1,roughnessFactor:Ge=1,baseColorTexture:Ke,metallicRoughnessTexture:rt}=V.pbrMetallicRoughness||{};return{pbrMetallicRoughness:{baseColorFactor:new sn(...Ae),metallicFactor:Pe,roughnessFactor:Ge,baseColorTexture:Ke?U[Ke.index]:void 0,metallicRoughnessTexture:rt?U[rt.index]:void 0},doubleSided:be,emissiveFactor:q,alphaMode:K,alphaCutoff:Q,normalTexture:ae?U[ae.index]:void 0,occlusionTexture:ge?U[ge.index]:void 0,emissionTexture:_e?U[_e.index]:void 0,defined:V.defined===void 0}}(F!==void 0?o.json.materials[F]:{defined:!1},c),g._FEATURE_RGBA4444!==void 0&&(y.featureData=new Uint32Array(If(o,o.json.accessors[g._FEATURE_RGBA4444]).buffer)),y}function GB(l,o,c){const{matrix:d,rotation:g,translation:y,scale:b,mesh:M,extras:E,children:P}=l,O={};if(O.matrix=d||a.m.fromRotationTranslationScale([],g||[0,0,0,1],y||[0,0,0],b||[1,1,1]),M!==void 0){O.meshes=c[M];const F=O.anchor=[0,0];for(const V of O.meshes){const{min:U,max:q}=V.aabb;F[0]+=U[0]+q[0],F[1]+=U[1]+q[1]}F[0]=Math.floor(F[0]/O.meshes.length/2),F[1]=Math.floor(F[1]/O.meshes.length/2)}if(E&&(E.id&&(O.id=E.id),E.lights&&(O.lights=function(F){if(!F.length)return[];const V=function(ae){const ge=atob(ae),_e=new Uint8Array(ge.length);for(let be=0;be<ge.length;be++)_e[be]=ge.codePointAt(be);return _e}(F),U=[],q=V.length/24,K=new Uint16Array(V.buffer),Q=new Float32Array(V.buffer);for(let ae=0;ae<q;ae++){const ge=K[2*ae*6]/30,_e=K[2*ae*6+1]/30,be=K[2*ae*6+10]/100,Ae=Q[6*ae+1],Pe=Q[6*ae+2],Ge=Q[6*ae+3],Ke=Q[6*ae+4],rt=Ge-Ae,ft=Ke-Pe,st=Math.hypot(rt,ft);U.push({pos:[Ae+.5*rt,Pe+.5*ft,_e],normal:[ft/st,-rt/st,0],width:st,height:ge,depth:be,points:[Ae,Pe,Ge,Ke]})}return U}(E.lights))),P){const F=[];for(const V of P)F.push(GB(o.json.nodes[V],o,c));O.children=F}return O}function XJ(l){if(l.vertices.length===0||l.indices.length===0)return null;const[o,c]=[l.vertices[0].clone(),l.vertices[0].clone()];for(let b=1;b<l.vertices.length;++b){const M=l.vertices[b];o.x=Math.min(o.x,M.x),o.y=Math.min(o.y,M.y),c.x=Math.max(c.x,M.x),c.y=Math.max(c.y,M.y)}const d=Math.ceil(Math.max(c.x-o.x,c.y-o.y)/256),g=Math.max(8,d),y=new $B(l.vertices,l.indices,g);return{vertices:l.vertices,indices:l.indices,grid:y,min:o,max:c}}function YJ(l){if(!l.extras||!l.extras.ground)return null;const o=l.extras.ground;if(!o||!Array.isArray(o)||o.length===0)return null;const c=o[0];if(!c||!Array.isArray(c)||c.length===0)return null;const d=[];for(const b of c){if(!Array.isArray(b)||b.length!==2)continue;const M=b[0],E=b[1];typeof M=="number"&&typeof E=="number"&&d.push(new H(M,E))}if(d.length<3)return null;d.length>1&&d[d.length-1].equals(d[0])&&d.pop();let g=0;for(let b=0;b<d.length;b++){const M=d[b],E=d[(b+1)%d.length],P=d[(b+2)%d.length];g+=(M.x-E.x)*(P.y-E.y)-(P.x-E.x)*(M.y-E.y)}g>0&&d.reverse();const y=N1(d.flatMap(b=>[b.x,b.y]),[]);return y.length===0?null:{vertices:d,indices:y}}function KJ(l){const o=[],c=[];let d=0;for(const g of l){d=o.length;const y=g.vertexArray.float32,b=g.indexArray.uint16;for(let M=0;M<g.vertexArray.length;M++)o.push(new H(y[3*M+0],y[3*M+1]));for(let M=0;M<3*g.indexArray.length;M++)c.push(b[M]+d)}if(c.length%3!=0)return null;for(let g=0;g<c.length;g+=3){const y=o[c[g+0]],b=o[c[g+1]],M=o[c[g+2]];(y.x-b.x)*(M.y-b.y)-(M.x-b.x)*(y.y-b.y)>0&&([c[g+1],c[g+2]]=[c[g+2],c[g+1]])}return{vertices:o,indices:c}}function UB(l){const o=function(E,P){const O=[],F=WebGL2RenderingContext;if(E.json.textures)for(const V of E.json.textures){const U={magFilter:F.LINEAR,minFilter:F.NEAREST,wrapS:F.REPEAT,wrapT:F.REPEAT};V.sampler!==void 0&&Object.assign(U,E.json.samplers[V.sampler]),O.push({image:P[V.source],sampler:U,uploaded:!1})}return O}(l,l.images),c=function(E,P){const O=[];for(const F of E.json.meshes){const V=[];for(const U of F.primitives)V.push(ZJ(U,E,P));O.push(V)}return O}(l,o),{scenes:d,scene:g,nodes:y}=l.json,b=d?d[g||0].nodes:y,M=[];for(const E of b)M.push(GB(y[E],l,c));return function(E,P,O){const F={},V=new Set;for(let U=0;U<E.length;U++){const q=O[P[U]];if(!q.extras)continue;const K=q.extras["mapbox:footprint:version"],Q=q.extras["mapbox:footprint:id"];(K||Q)&&V.add(U),K==="1.0.0"&&Q&&(F[Q]=U)}for(let U=0;U<E.length;U++){if(V.has(U))continue;const q=E[U],K=O[P[U]];if(!K.extras)continue;let Q=null;q.id in F&&(Q=KJ(E[F[q.id]].meshes)),Q||(Q=YJ(K)),Q&&(q.footprint=XJ(Q))}if(V.size>0){const U=Array.from(V.values()).sort((q,K)=>q-K);for(let q=U.length-1;q>=0;q--)E.splice(U[q],1)}}(M,b,l.json.nodes),M}function JJ(l){l.heightmap=new Float32Array(4096),l.heightmap.fill(-1);const o=l.vertexArray.float32,c=l.aabb.min[0]-1,d=l.aabb.min[1]-1,g=Af/(l.aabb.max[0]-c+2),y=Af/(l.aabb.max[1]-d+2);for(let b=0;b<o.length;b+=3){const M=o[b+2],E=(o[b+0]-c)*g|0,P=(o[b+1]-d)*y|0;M>l.heightmap[P*Af+E]&&(l.heightmap[P*Af+E]=M)}}function QJ(l,o){const c={};c.indexArray=new Xi,c.indexArray.reserve(4*l.length),c.vertexArray=new pf,c.vertexArray.reserve(10*l.length),c.colorArray=new $i,c.vertexArray.reserve(10*l.length);let d=0;for(const b of l){const M=Math.min(10,Math.max(4,1.3*b.height))*o,E=[-b.normal[1],b.normal[0],0],P=Math.min(.29,.1*b.width/b.depth),O=b.width-2*b.depth*o*(P+.01),F=a.v.scaleAndAdd([],b.pos,E,O/2),V=a.v.scaleAndAdd([],b.pos,E,-O/2),U=[F[0],F[1],F[2]+b.height],q=[V[0],V[1],V[2]+b.height],K=a.v.scaleAndAdd([],b.normal,E,P);a.v.scale(K,K,M);const Q=a.v.scaleAndAdd([],b.normal,E,-P);a.v.scale(Q,Q,M),a.v.add(K,F,K),a.v.add(Q,V,Q),F[2]+=.1,V[2]+=.1,c.vertexArray.emplaceBack(K[0],K[1],K[2]),c.vertexArray.emplaceBack(Q[0],Q[1],Q[2]),c.vertexArray.emplaceBack(F[0],F[1],F[2]),c.vertexArray.emplaceBack(V[0],V[1],V[2]),c.vertexArray.emplaceBack(U[0],U[1],U[2]),c.vertexArray.emplaceBack(q[0],q[1],q[2]),c.vertexArray.emplaceBack(F[0],F[1],F[2]),c.vertexArray.emplaceBack(V[0],V[1],V[2]),c.vertexArray.emplaceBack(K[0],K[1],K[2]),c.vertexArray.emplaceBack(Q[0],Q[1],Q[2]);const ae=O/M/2;c.colorArray.emplaceBack(-ae-P,-1,ae,.8),c.colorArray.emplaceBack(ae+P,-1,ae,.8),c.colorArray.emplaceBack(-ae,0,ae,1.3),c.colorArray.emplaceBack(ae,0,ae,1.3),c.colorArray.emplaceBack(ae+P,-.8,ae,.7),c.colorArray.emplaceBack(ae+P,-.8,ae,.7),c.colorArray.emplaceBack(0,0,ae,1.3),c.colorArray.emplaceBack(0,0,ae,1.3),c.colorArray.emplaceBack(ae+P,-1.2,ae,.8),c.colorArray.emplaceBack(ae+P,-1.2,ae,.8),c.indexArray.emplaceBack(6+d,4+d,8+d),c.indexArray.emplaceBack(7+d,9+d,5+d),c.indexArray.emplaceBack(0+d,1+d,2+d),c.indexArray.emplaceBack(1+d,3+d,2+d),d+=10}const g={defined:!0,emissiveFactor:[0,0,0]},y={};return y.baseColorFactor=sn.white,g.pbrMetallicRoughness=y,c.material=g,c.aabb=new Un([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),c}hr($B,"TriangleGridIndex");const jB=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class bA{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,d]=new Uint8Array(o,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=d>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const y=jB[15&d];if(!y)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(o,2,1),[M]=new Uint32Array(o,4,1);return new bA(M,b,y,o)}constructor(o,c=64,d=Float64Array,g){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=d,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const y=jB.indexOf(this.ArrayType),b=2*o*this.ArrayType.BYTES_PER_ELEMENT,M=o*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-M%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${d}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+M+E,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+b+M+E),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+M+E,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=o)}add(o,c){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=o,this.coords[this._pos++]=c,d}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return wA(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,c,d,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:b,nodeSize:M}=this,E=[0,y.length-1,0],P=[];for(;E.length;){const O=E.pop()||0,F=E.pop()||0,V=E.pop()||0;if(F-V<=M){for(let Q=V;Q<=F;Q++){const ae=b[2*Q],ge=b[2*Q+1];ae>=o&&ae<=d&&ge>=c&&ge<=g&&P.push(y[Q])}continue}const U=V+F>>1,q=b[2*U],K=b[2*U+1];q>=o&&q<=d&&K>=c&&K<=g&&P.push(y[U]),(O===0?o<=q:c<=K)&&(E.push(V),E.push(U-1),E.push(1-O)),(O===0?d>=q:g>=K)&&(E.push(U+1),E.push(F),E.push(1-O))}return P}within(o,c,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:y,nodeSize:b}=this,M=[0,g.length-1,0],E=[],P=d*d;for(;M.length;){const O=M.pop()||0,F=M.pop()||0,V=M.pop()||0;if(F-V<=b){for(let Q=V;Q<=F;Q++)WB(y[2*Q],y[2*Q+1],o,c)<=P&&E.push(g[Q]);continue}const U=V+F>>1,q=y[2*U],K=y[2*U+1];WB(q,K,o,c)<=P&&E.push(g[U]),(O===0?o-d<=q:c-d<=K)&&(M.push(V),M.push(U-1),M.push(1-O)),(O===0?o+d>=q:c+d>=K)&&(M.push(U+1),M.push(F),M.push(1-O))}return E}}function wA(l,o,c,d,g,y){if(g-d<=c)return;const b=d+g>>1;HB(l,o,b,d,g,y),wA(l,o,c,d,b-1,1-y),wA(l,o,c,b+1,g,1-y)}function HB(l,o,c,d,g,y){for(;g>d;){if(g-d>600){const P=g-d+1,O=c-d+1,F=Math.log(P),V=.5*Math.exp(2*F/3),U=.5*Math.sqrt(F*V*(P-V)/P)*(O-P/2<0?-1:1);HB(l,o,c,Math.max(d,Math.floor(c-O*V/P+U)),Math.min(g,Math.floor(c+(P-O)*V/P+U)),y)}const b=o[2*c+y];let M=d,E=g;for(oy(l,o,d,c),o[2*g+y]>b&&oy(l,o,d,g);M<E;){for(oy(l,o,M,E),M++,E--;o[2*M+y]<b;)M++;for(;o[2*E+y]>b;)E--}o[2*d+y]===b?oy(l,o,d,E):(E++,oy(l,o,E,g)),E<=c&&(d=E+1),c<=E&&(g=E-1)}}function oy(l,o,c,d){SA(l,c,d),SA(o,2*c,2*d),SA(o,2*c+1,2*d+1)}function SA(l,o,c){const d=l[o];l[o]=l[c],l[c]=d}function WB(l,o,c,d){const g=l-c,y=o-d;return g*g+y*y}a.$=45,a.A=Fn,a.B=function(l){const o=a.m.identity(new Float64Array(16));a.m.multiply(o,l.pixelMatrix,l.globeMatrix);const c=[0,Ys,0],d=[0,Ks,0];return a.v.transformMat4(c,c,o),a.v.transformMat4(d,d,o),[c[0]>0&&c[0]<=l.width&&c[1]>0&&c[1]<=l.height&&!bM(l,new Gi(l.center.lat,90)),d[0]>0&&d[0]<=l.width&&d[1]>0&&d[1]<=l.height&&!bM(l,new Gi(l.center.lat,-90))]},a.C=sn,a.D=Rh,a.E=Au,a.F=pM,a.G=lO,a.H=Cu,a.I=Tf,a.J=tr,a.K=function(l,o){const{scale:c}=l.tileTransform,d=c*tr/(l.tileSize*Math.pow(2,o.zoom-l.tileID.overscaledZ+l.tileID.canonical.z));return a.h.scale(new Float32Array(4),o.inverseAdjustmentMatrix,[d,d])},a.L=Gi,a.M=Na,a.N=db,a.O=_a,a.P=H,a.Q=Nz,a.R=dM,a.S=function(l){const o=Nz(l,!0);return a.h.invert([],[o[0],o[1],o[4],o[5]])},a.T=fM,a.U=nO,a.V=function(l){const{x:o,y:c}=l.point,{lng:d,lat:g}=l._center;return mO(o,c,l.worldSize,d,g)},a.W=Cs,a.X=Ue,a.Y=me,a.Z=mM,a._=function(l){const o=Math.round((l+45+360)%360/90)%4;return Se[o]},a.a=Qs,a.a$=w1,a.a0=SM,a.a1=function(l,o){return za(ht(l,{type:"json"}),o)},a.a2=wn,a.a3=Lt,a.a4=ma,a.a5=As,a.a6=Mo,a.a7=$s,a.a8=ao,a.a9=Fc,a.aA=wf,a.aB=bO,a.aC=Ms,a.aD=LB,a.aE=or,a.aF=kB,a.aG=function(l){Ti++,Ti>Cr&&(l.getActor().send("enforceCacheSizeLimit",Kt),Ti=0)},a.aH=vn,a.aI=sm,a.aJ=function(l){return l<=1?1:Math.pow(2,Math.floor(Math.log(l)/Math.LN2))},a.aK=CB,a.aL=function(l,o){const c=document.createElement("video");c.muted=!0,c.onloadstart=function(){o(null,c)};for(let d=0;d<l.length;d++){const g=document.createElement("source");Go(l[d])||(c.crossOrigin="Anonymous"),g.src=l[d],c.appendChild(g)}return{cancel:()=>{}}},a.aM=mr,a.aN=ub,a.aO=function(l){return fetch(l).then(o=>o.arrayBuffer()).then(o=>VB(o,0,l))},a.aP=UB,a.aQ=class{constructor(l,o,c,d){this.id=l,this.position=o!=null?new Gi(o[0],o[1]):new Gi(0,0),this.orientation=c!=null?c:[0,0,0],this.nodes=d,this.uploaded=!1,this.aabb=new Un([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(l,o){if(a.m.multiply(l.matrix,o,l.matrix),l.meshes)for(const c of l.meshes){const d=Un.applyTransform(c.aabb,l.matrix);this.aabb.encapsulate(d)}if(l.children)for(const c of l.children)this._applyTransformations(c,l.matrix)}computeBoundsAndApplyParent(){const l=a.m.identity([]);for(const o of this.nodes)this._applyTransformations(o,l)}_positionModelOnTerrain(l,o){const c=l.elevation;if(!c)return 0;const d=Un.projectAabbCorners(this.aabb,this.matrix),g=mo(1,this.position.lat)*l.worldSize,y=function(Q,ae){const ge=[0,0,1],_e=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const be of _e){const Ae=Q[be.corners[0]],Pe=Q[be.corners[1]],Ge=Q[be.corners[2]],Ke=[Pe[0]-Ae[0],Pe[1]-Ae[1],ae*(Pe[2]-Ae[2])],rt=a.v.cross(Ke,Ke,[Ge[0]-Ae[0],Ge[1]-Ae[1],ae*(Ge[2]-Ae[2])]);a.v.normalize(rt,rt),be.dotProductWithUp=a.v.dot(rt,ge)}return _e.sort((be,Ae)=>be.dotProductWithUp-Ae.dotProductWithUp),_e[0].corners}(d,g),b=d[y[0]],M=d[y[1]],E=d[y[2]],P=d[y[3]],O=c.getAtPointOrZero(new Na(b[0]/l.worldSize,b[1]/l.worldSize),0),F=c.getAtPointOrZero(new Na(M[0]/l.worldSize,M[1]/l.worldSize),0),V=c.getAtPointOrZero(new Na(E[0]/l.worldSize,E[1]/l.worldSize),0),U=c.getAtPointOrZero(new Na(P[0]/l.worldSize,P[1]/l.worldSize),0),q=(O+U)/2,K=(F+V)/2;return q>K?F<V?fb(o,M,P,b,F,U,O,g):fb(o,E,b,P,V,O,U,g):O<U?fb(o,b,M,E,O,F,V,g):fb(o,P,E,M,U,V,F,g),Math.max(q,K)}computeModelMatrix(l,o,c,d,g,y,b=!1){const M=l.transform,E=M.zoom,P=M.project(this.position),O=bf(this.position.lat,E),F=1/O;a.m.identity(this.matrix),a.m.translate(this.matrix,this.matrix,[P.x+d[0]*F,P.y+d[1]*F,d[2]]);let V=1,U=1;const q=M.worldSize;if(b){if(M.projection.name==="mercator"){let ge=0;M.elevation&&(ge=M.elevation.getAtPointOrZero(new Na(P.x/q,P.y/q),0));const _e=a.e.transformMat4([],[P.x,P.y,ge,1],M.projMatrix)[3]/M.cameraToCenterDistance;V=_e,U=_e*bf(M.center.lat,E)}else if(M.projection.name==="globe"){const ge=Hz(this.matrix,M),_e=a.m.multiply([],M.projMatrix,ge),be=[0,0,0,1];a.e.transformMat4(be,be,_e);const Ae=be[3]/M.cameraToCenterDistance,Pe=Rc(E),Ge=M.projection.pixelsPerMeter(this.position.lat,q)*bf(this.position.lat,E),Ke=M.projection.pixelsPerMeter(M.center.lat,q)*bf(M.center.lat,E);V=Ae/si(Ge,yO(M.center.lat),Pe),U=Ae*O/Ge,V*=Ke,U*=Ke}}else V=F;a.m.scale(this.matrix,this.matrix,[V,V,U]);const K=[...this.matrix],Q=this.orientation,ae=[];if(jz(ae,[Q[0]+o[0],Q[1]+o[1],Q[2]+o[2]],c),a.m.multiply(this.matrix,K,ae),g&&M.elevation){let ge=0;const _e=[];if(y&&M.elevation){ge=this._positionModelOnTerrain(M,_e);const be=a.m.fromQuat([],_e),Ae=a.m.multiply([],be,ae);a.m.multiply(this.matrix,K,Ae)}else ge=M.elevation.getAtPointOrZero(new Na(P.x/q,P.y/q),0);ge!==0&&(this.matrix[14]+=ge)}}upload(l){if(!this.uploaded){for(const o of this.nodes)sA(o,l);for(const o of this.nodes)mb(o);this.uploaded=!0}}destroy(){for(const l of this.nodes)gb(l)}},a.aR=Pt,a.aS=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.aT=yz,a.aU=SO,a.aV=Ea,a.aW=Mz,a.aX=YM,a.aY=HM,a.aZ=bA,a.a_=E_,a.aa=WM,a.ab=qM,a.ac=Rt,a.ad=Ee,a.ae=ut,a.af=class{constructor(l){this.specification=l}possiblyEvaluate(l,o){return ye(l.expression.evaluate(o))}interpolate(l,o,c){return{x:si(l.x,o.x,c),y:si(l.y,o.y,c),z:si(l.z,o.z,c),azimuthal:si(l.azimuthal,o.azimuthal,c),polar:si(l.polar,o.polar,c)}}},a.ag=ct,a.ah=l=>xs(b_(l)),a.ai=_1,a.aj=M_,a.ak=ht,a.al=Ne,a.am=uf,a.an=We,a.ao=Rc,a.ap=l=>xs(T_(l)),a.aq=Sm,a.ar=Dt,a.as=class{constructor(l){this.specification=l}possiblyEvaluate(l,o){return function([c,d]){const g=ye([1,c,d]);return{x:g.x,y:g.y,z:g.z}}(l.expression.evaluate(o))}interpolate(l,o,c){return{x:si(l.x,o.x,c),y:si(l.y,o.y,c),z:si(l.z,o.z,c)}}},a.at=function(l,o,c=0,d=!0){const g=new H(c,c),y=l.sub(g),b=o.add(g),M=[y,new H(b.x,y.y),b,new H(y.x,b.y)];return d&&M.push(y.clone()),M},a.au=function(l,o){const c=[];for(let d=0;d<l.length;d++){const g=gt(d-1,-1,l.length-1),y=gt(d+1,-1,l.length-1),b=l[d],M=l[y],E=l[g].sub(b).unit(),P=M.sub(b).unit(),O=P.angleWithSep(E.x,E.y),F=E.add(P).unit().mult(-1*o/Math.sin(O/2));c.push(b.add(F))}return c},a.av=Ez,a.aw=CO,a.ax=function(l,o,c=0){return a.v.fromValues(((o.x-c)*l.scale-l.x)*tr,(o.y*l.scale-l.y)*tr,_O(o.z,o.y))},a.ay=Uz,a.az=function(l){let o=1/0,c=1/0,d=-1/0,g=-1/0;for(const y of l)o=Math.min(o,y.x),c=Math.min(c,y.y),d=Math.max(d,y.x),g=Math.max(g,y.y);return{min:new H(o,c),max:new H(d,g)}},a.b=mo,a.b$=0,a.b0=mf,a.b1=$R,a.b2=po,a.b3=function(l,o,c){const d=Math.sqrt(l*l+o*o+c*c),g=d>0?Math.acos(c/d)*ne:0;let y=l!==0||o!==0?Math.atan2(-o,-l)*ne+90:0;return y<0&&(y+=360),[d,y,g]},a.b4=rg,a.b5=Nl,a.b6=iA,a.b7=Z2,a.b8=class extends Cc{constructor(l){super(l),this.current=IX}set(l,o,c){if(this.fetchUniformLocation(l,o)){for(let d=0;d<9;d++)if(c[d]!==this.current[d]){this.current=c,this.gl.uniformMatrix3fv(this.location,!1,c);break}}}},a.b9=VR,a.bA=function(l,o){const c=[0,0,0],d=O_(Mu(o.canonical));return a.v.transformMat4(c,c,d),a.v.transformMat4(c,c,l),c},a.bB=l=>({u_camera_to_center_distance:new po(l),u_extrude_scale:new X2(l),u_device_pixel_ratio:new po(l),u_matrix:new E_(l),u_inv_rot_matrix:new E_(l),u_merc_center:new mf(l),u_tile_id:new Z2(l),u_zoom_transition:new po(l),u_up_dir:new Z2(l),u_emissive_strength:new po(l)}),a.bC=l=>({u_matrix:new E_(l),u_pixels_to_tile_units:new X2(l),u_device_pixel_ratio:new po(l),u_units_to_pixels:new mf(l),u_dash_image:new w1(l),u_gradient_image:new w1(l),u_image_height:new po(l),u_texsize:new mf(l),u_tile_units_to_pixels:new po(l),u_alpha_discard_threshold:new po(l),u_trim_offset:new mf(l),u_emissive_strength:new po(l)}),a.bD=l=>({u_matrix:new E_(l),u_texsize:new mf(l),u_pixels_to_tile_units:new X2(l),u_device_pixel_ratio:new po(l),u_image:new w1(l),u_units_to_pixels:new mf(l),u_tile_units_to_pixels:new po(l),u_alpha_discard_threshold:new po(l)}),a.bE=Ll,a.bF=bK,a.bG=wK,a.bH=DO,a.bI=(l,o,c,d,g,y)=>{const b=l.transform,M=b.projection.name==="globe";let E;if(y.paint.get("circle-pitch-alignment")==="map")if(M){const O=pO(b.zoom,o.canonical)*b._pixelsPerMercatorPixel;E=Float32Array.from([O,0,0,O])}else E=b.calculatePixelsToTileUnitsMatrix(c);else E=new Float32Array([b.pixelsToGLUnits[0],0,0,b.pixelsToGLUnits[1]]);const P={u_camera_to_center_distance:l.transform.getCameraToCenterDistance(b.projection),u_matrix:l.translatePosMatrix(o.projMatrix,c,y.paint.get("circle-translate"),y.paint.get("circle-translate-anchor")),u_device_pixel_ratio:ma.devicePixelRatio,u_extrude_scale:E,u_inv_rot_matrix:vY,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:y.paint.get("circle-emissive-strength")};if(M){P.u_inv_rot_matrix=d,P.u_merc_center=g,P.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],P.u_zoom_transition=Rc(b.zoom);const O=g[0]*tr,F=g[1]*tr;P.u_up_dir=b.projection.upVector(new yf(0,0,0),O,F)}return P},a.bJ=wB,a.bK=(l,o,c,d,g)=>{const y=l.transform;return{u_matrix:bB(l,o,c,d),u_texsize:o.imageAtlasTexture?o.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:y.calculatePixelsToTileUnitsMatrix(o),u_device_pixel_ratio:g,u_image:0,u_tile_units_to_pixels:xB(o,y),u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}},a.bL=(l,o,c,d,g,y,b)=>{const M=l.transform,E=M.calculatePixelsToTileUnitsMatrix(o);return{u_matrix:bB(l,o,c,d),u_pixels_to_tile_units:E,u_device_pixel_ratio:y,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:g,u_texsize:SB(c)&&o.lineAtlasTexture?o.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:xB(o,l.transform),u_alpha_discard_threshold:0,u_trim_offset:b,u_emissive_strength:c.paint.get("line-emissive-strength")}},a.bM=nt,a.bN=R1,a.bO=mB,a.bP=tY,a.bQ=ey,a.bR=Wh,a.bS=450,a.bT=7,a.bU=cO,a.bV=yM,a.bW=_r,a.bX=pf,a.bY=ff,a.bZ=1,a.b_=771,a.ba=Ie,a.bb=function(l,o,c){const d=Rc(c.zoom),g=l.style.map._antialias,y=o.options.extStandardDerivativesForceOff||l.terrain&&l.terrain.exaggeration()>0;return d===0&&!g&&!y},a.bc=function(l){const o=l.pixelsPerMeter,c=o/mo(1,l.center.lat),d=a.m.identity(new Float64Array(16));return a.m.translate(d,d,[l.point.x,l.point.y,0]),a.m.scale(d,d,[c,c,o]),Float32Array.from(d)},a.bd=oa,a.be=I1,a.bf=function(l){const o=Fn-5;l=Ce(l,-o,o)/o*90;const c=Math.pow(Math.abs(Math.sin(se(l))),3);return Math.round(c*(gM.length-1))},a.bg=function(l,o,c,d){const g=o.getNorth(),y=o.getSouth(),b=o.getWest(),M=o.getEast(),E=1<<l.z,P=M-b,O=g-y,F=P/$m,V=-O/gM[c],U=[0,F,0,V,0,0,g,b,0];if(l.z>0){const q=180/d;a.bx.multiply(U,U,[q/P+1,0,0,0,q/O+1,0,-.5*q/F,.5*q/V,1])}return U[2]=E,U[5]=l.x,U[8]=l.y,U},a.bh=O_,a.bi=Mu,a.bj=function(l,o,c){const d=a.m.identity(new Float64Array(16)),g=(o/(1<<l)-.5)*Math.PI*2;return a.m.rotateY(d,c.globeMatrix,g),Float32Array.from(d)},a.bk=class{isDataAvailableAtPoint(l){const o=this._source();if(this.isUsingMockSource()||!o||l.y<0||l.y>1)return!1;const c=o.getSource().maxzoom,d=1<<c,g=Math.floor(l.x),y=Math.floor((l.x-g)*d),b=Math.floor(l.y*d),M=this.findDEMTileFor(new _a(c,g,c,y,b));return!(!M||!M.dem)}getAtPointOrZero(l,o=0){return this.getAtPoint(l,o)||0}getAtPoint(l,o,c=!0){if(this.isUsingMockSource())return null;o==null&&(o=null);const d=this._source();if(!d||l.y<0||l.y>1)return o;const g=d.getSource().maxzoom,y=1<<g,b=Math.floor(l.x),M=l.x-b,E=new _a(g,b,g,Math.floor(M*y),Math.floor(l.y*y)),P=this.findDEMTileFor(E);if(!P||!P.dem)return o;const O=P.dem,F=1<<P.tileID.canonical.z,V=(M*F-P.tileID.canonical.x)*O.dim,U=(l.y*F-P.tileID.canonical.y)*O.dim,q=Math.floor(V),K=Math.floor(U);return(c?this.exaggeration():1)*si(si(O.get(q,K),O.get(q,K+1),U-K),si(O.get(q+1,K),O.get(q+1,K+1),U-K),V-q)}getAtTileOffset(l,o,c){const d=1<<l.canonical.z;return this.getAtPointOrZero(new Na(l.wrap+(l.canonical.x+o/tr)/d,(l.canonical.y+c/tr)/d))}getAtTileOffsetFunc(l,o,c,d){return g=>{const y=this.getAtTileOffset(l,g.x,g.y),b=d.upVector(l.canonical,g.x,g.y),M=d.upVectorScale(l.canonical,o,c).metersToTile;return a.v.scale(b,b,y*M),b}}getForTilePoints(l,o,c,d){if(this.isUsingMockSource())return!1;const g=Xm.create(this,l,d);return!!g&&(o.forEach(y=>{y[2]=this.exaggeration()*g.getElevationAt(y[0],y[1],c)}),!0)}getMinMaxForTile(l){if(this.isUsingMockSource())return null;const o=this.findDEMTileFor(l);if(!o||!o.dem)return null;const c=o.dem.tree,d=o.tileID,g=1<<l.canonical.z-d.canonical.z;let y=l.canonical.x/g-d.canonical.x,b=l.canonical.y/g-d.canonical.y,M=0;for(let E=0;E<l.canonical.z-d.canonical.z&&!c.leaves[M];E++){y*=2,b*=2;const P=2*Math.floor(b)+Math.floor(y);M=c.childOffsets[M]+P,y%=1,b%=1}return{min:this.exaggeration()*c.minimums[M],max:this.exaggeration()*c.maximums[M]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(l,o,c){throw new Error("Pure virtual method called.")}pointCoordinate(l){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(l){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const l=this.visibleDemTiles;if(l.length===0)return null;let o=!1,c=Number.MAX_VALUE,d=Number.MIN_VALUE;for(const g of l){const y=this.getMinMaxForTile(g.tileID);y&&(c=Math.min(c,y.min),d=Math.max(d,y.max),o=!0)}return o?{min:c,max:d}:null}},a.bl=P_,a.bm=yn,a.bn=C1,a.bo=Wr,a.bp=Xi,a.bq=Mf,a.br=ry,a.bs=fA,a.bt=tA,a.bu=zO,a.bv=function(l,o){return[Math.pow(l[0],2.2)*o,Math.pow(l[1],2.2)*o,Math.pow(l[2],2.2)*o]},a.bw=function(l){return[Math.pow(l[0],1/2.2),Math.pow(l[1],1/2.2),Math.pow(l[2],1/2.2)]},a.by=pO,a.bz=256,a.c=Ce,a.c$=h,a.c0=$2,a.c1=function(l,o,c,d,g){return Ce((l-o)/(c-o)*(g-d)+d,d,g)},a.c2=rf,a.c3=Un,a.c4=bf,a.c5=Hz,a.c6=[1,1,1],a.c7=Xm,a.c8=pb,a.c9=Za,a.cA=Wt,a.cB=l=>xs(S_(l)),a.cC=xe,a.cD=za,a.cE=ke,a.cF=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},a.cG=Fe,a.cH=xO,a.cI=xf,a.cJ=function([l,o,c]){const d=Math.hypot(l,o,c),g=Math.atan2(l,c),y=.5*Math.PI-Math.acos(-o/d);return new Gi(me(g),me(y))},a.cK=Ko,a.cL=z_,a.cM=m,a.cN=bM,a.cO=gO,a.cP=function(l){const o=[0,0,0],c=a.m.identity(new Float64Array(16));return a.m.multiply(c,l.pixelMatrix,l.globeMatrix),a.v.transformMat4(o,o,c),new H(o[0],o[1])},a.cQ=function(l){const o=l.navigator?l.navigator.userAgent:null;return!!function(c){if(Ze==null){const d=c.navigator?c.navigator.userAgent:null;Ze=!!c.safari||!(!d||!(/\b(iPad|iPhone|iPod)\b/.test(d)||d.match("Safari")&&!d.match("Chrome")))}return Ze}(l)&&o&&(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},a.cR=He,a.cS=class{constructor(l,o,c){this._transformRequestFn=l,this._customAccessToken=o,this._silenceAuthErrors=!!c,this._createSkuToken()}_createSkuToken(){const l=function(){let o="";for(let c=0;c<10;c++)o+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",R,o].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=l.token,this._skuTokenExpiresAt=l.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(l,o){return this._transformRequestFn&&this._transformRequestFn(l,o)||{url:l}}normalizeStyleURL(l,o){if(!Gt(l))return l;const c=Jt(l);return c.params.push(`sdk=js-${h}`),c.path=`/styles/v1${c.path}`,this._makeAPIURL(c,this._customAccessToken||o)}normalizeGlyphsURL(l,o){if(!Gt(l))return l;const c=Jt(l);return c.path=`/fonts/v1${c.path}`,this._makeAPIURL(c,this._customAccessToken||o)}normalizeModelURL(l,o){if(!Gt(l))return l;const c=Jt(l);return c.path=`/models/v1${c.path}`,this._makeAPIURL(c,this._customAccessToken||o)}normalizeSourceURL(l,o,c,d){if(!Gt(l))return l;const g=Jt(l);return g.path=`/v4/${g.authority}.json`,g.params.push("secure"),c&&g.params.push(`language=${c}`),d&&g.params.push(`worldview=${d}`),this._makeAPIURL(g,this._customAccessToken||o)}normalizeSpriteURL(l,o,c,d){const g=Jt(l);return Gt(l)?(g.path=`/styles/v1${g.path}/sprite${o}${c}`,this._makeAPIURL(g,this._customAccessToken||d)):(g.path+=`${o}${c}`,jr(g))}normalizeTileURL(l,o,c){if(this._isSkuTokenExpired()&&this._createSkuToken(),l&&!Gt(l))return l;const d=Jt(l);d.path=d.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${o||c&&d.authority!=="raster"&&c===512?"@2x":""}${v.supported?".webp":"$1"}`),d.authority==="raster"?d.path=`/${m.RASTER_URL_PREFIX}${d.path}`:(d.path=d.path.replace(/^.+\/v4\//,"/"),d.path=`/${m.TILE_URL_VERSION}${d.path}`);const g=this._customAccessToken||function(y){for(const b of y){const M=b.match(/^access_token=(.*)$/);if(M)return M[1]}return null}(d.params)||m.ACCESS_TOKEN;return m.REQUIRE_ACCESS_TOKEN&&g&&this._skuToken&&d.params.push(`sku=${this._skuToken}`),this._makeAPIURL(d,g)}canonicalizeTileURL(l,o){const c=Jt(l);if(!c.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!c.path.match(/\.[\w]+$/))return l;let d="mapbox://";c.path.match(/^\/raster\/v1\//)?d+=`raster/${c.path.replace(`/${m.RASTER_URL_PREFIX}/`,"")}`:d+=`tiles/${c.path.replace(`/${m.TILE_URL_VERSION}/`,"")}`;let g=c.params;return o&&(g=g.filter(y=>!y.match(/^access_token=/))),g.length&&(d+=`?${g.join("&")}`),d}canonicalizeTileset(l,o){const c=!!o&&Gt(o),d=[];for(const g of l.tiles||[])Xt(g)?d.push(this.canonicalizeTileURL(g,c)):d.push(g);return d}_makeAPIURL(l,o){const c="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",d=Jt(m.API_URL);if(l.protocol=d.protocol,l.authority=d.authority,l.protocol==="http"){const g=l.params.indexOf("secure");g>=0&&l.params.splice(g,1)}if(d.path!=="/"&&(l.path=`${d.path}${l.path}`),!m.REQUIRE_ACCESS_TOKEN)return jr(l);if(o=o||m.ACCESS_TOKEN,!this._silenceAuthErrors){if(!o)throw new Error(`An API access token is required to use Mapbox GL. ${c}`);if(o[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${c}`)}return l.params=l.params.filter(g=>g.indexOf("access_token")===-1),l.params.push(`access_token=${o||""}`),jr(l)}},a.cT=function(l,o){o?Sa.add(l):Sa.delete(l)},a.cU=v,a.cV=no,a.cW=ia,a.cX=Vt,a.cY=Qn,a.cZ=function(l){Sa.delete(l)},a.c_=St,a.ca=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[]}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(l){const o=tB(new H(0,0),new H(tr,tr),l),c=[];for(const d of this._activeRegions){if(d.hiddenByOverlap||!eB(o,d))continue;const g=_J(d.min,d.max,l);c.push({min:g.min,max:g.max,sourceId:this._sourceIds[d.priority],footprint:d.footprint,footprintTileId:d.tileId})}return c}setSources(l){this._setSources(l.map(o=>({getSourceId:()=>o.cache.id,getFootprints:()=>{const c=[];for(const d of o.cache.getVisibleCoordinates()){const g=o.cache.getTile(d).buckets[o.layer];if(g)for(const y of g.getNodesInfo()){const b=y.node;b.footprint&&c.push({footprint:b.footprint,id:d.toUnwrapped()})}}return c}})))}_addSource(l){const o=l.getFootprints();if(o.length!==0){for(const c of o){if(!c.footprint)continue;const d=tB(c.footprint.min,c.footprint.max,c.id);this._activeRegions.push({min:d.min,max:d.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:c.id,footprint:c.footprint})}this._sourceIds.push(l.getSourceId())}}_computeReplacement(){this._activeRegions.sort((o,c)=>o.priority-c.priority||vb(o.min,c.min)||vb(o.max,c.max));let l=this._activeRegions.length!==this._prevRegions.length;if(!l){let o=0,c=0;for(;!l&&o!==this._activeRegions.length;){const d=this._activeRegions[o],g=this._prevRegions[c];l=d.priority!==g.priority||!Qz(d,g),++o,++c}}if(l){++this._updateTime;const o=c=>{const d=this._activeRegions;if(c>=d.length)return c;const g=d[c].priority;for(;c<d.length&&d[c].priority===g;)++c;return c};if(this._sourceIds.length>1){let c=0,d=o(c);for(;c!==d;){let g=c;const y=c;for(;g!==d;){const b=this._activeRegions[g];b.hiddenByOverlap=!1;for(let M=0;M<y;M++){const E=this._activeRegions[M];if(!E.hiddenByOverlap&&eB(b,E)&&(b.hiddenByOverlap=iB(b.footprint,b.tileId,E.footprint,E.tileId),b.hiddenByOverlap))break}++g}c=d,d=o(c)}}}}_setSources(l){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let o=l.length-1;o>=0;o--)this._addSource(l[o]);this._computeReplacement()}},a.cb=Hi,a.cc=hb,a.cd=A_,a.ce=class{constructor(l){this._createGrid(l),this._createPoles(l)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const l of this._poleSegments)l.destroy();for(const l of this._gridSegments)l.withSkirts.destroy(),l.withoutSkirts.destroy()}_fillGridMeshWithLods(l,o){const c=new Wr,d=new Xi,g=[],y=l+1+2,b=o[0]+1,M=o[0]+1+(1+o.length),E=(P,O,F)=>{let V=P===y-1?P-2:P===0?P:P-1;return V+=F?24575:0,[V,O]};for(let P=0;P<y;++P)c.emplaceBack(...E(P,0,!0));for(let P=0;P<b;++P)for(let O=0;O<y;++O)c.emplaceBack(...E(O,P,(O===0||O===y-1)&&!0));for(let P=0;P<o.length;++P){const O=o[P];for(let F=0;F<y;++F)c.emplaceBack(...E(F,O,!0))}for(let P=0;P<o.length;++P){const O=d.length,F=o[P]+1+2,V=new Xi;for(let K=0;K<F-1;K++){const Q=K===F-2,ae=Q?y*(M-o.length+P-K):y;for(let ge=0;ge<y-1;ge++){const _e=K*y+ge;K===0||Q||ge===0||ge===y-2?(V.emplaceBack(_e+1,_e,_e+ae),V.emplaceBack(_e+ae,_e+ae+1,_e+1)):(d.emplaceBack(_e+1,_e,_e+ae),d.emplaceBack(_e+ae,_e+ae+1,_e+1))}}const U=yn.simpleSegment(0,O,c.length,d.length-O);for(let K=0;K<V.uint16.length;K+=3)d.emplaceBack(V.uint16[K],V.uint16[K+1],V.uint16[K+2]);const q=yn.simpleSegment(0,O,c.length,d.length-O);g.push({withoutSkirts:U,withSkirts:q})}return{vertices:c,indices:d,segments:g}}_createGrid(l){const o=this._fillGridMeshWithLods($m,gM);this._gridSegments=o.segments,this._gridBuffer=l.createVertexBuffer(o.vertices,P_.members),this._gridIndexBuffer=l.createIndexBuffer(o.indices,!0)}_createPoles(l){const o=new Xi;for(let b=0;b<=$m;b++)o.emplaceBack(0,b+1,b+2);this._poleIndexBuffer=l.createIndexBuffer(o,!0);const c=new ff,d=new ff,g=new ff,y=new ff;this._poleSegments=[];for(let b=0,M=0;b<mM;b++){const E=360/(1<<b);c.emplaceBack(0,-Ms,0,.5,0),d.emplaceBack(0,-Ms,0,.5,1),g.emplaceBack(0,-Ms,0,.5,.5),y.emplaceBack(0,-Ms,0,.5,.5);for(let P=0;P<=$m;P++){let O=P/$m,F=0;const V=si(0,E,O),[U,q,K]=Gm(aY,oY,V,Ms);c.emplaceBack(U,q,K,O,F),d.emplaceBack(U,q,K,O,1-F);const Q=se(V);O=.5+.5*Math.sin(Q),F=.5+.5*Math.cos(Q),g.emplaceBack(U,q,K,O,F),y.emplaceBack(U,q,K,O,1-F)}this._poleSegments.push(yn.simpleSegment(M,0,66,64)),M+=66}this._poleNorthVertexBuffer=l.createVertexBuffer(c,A1,!1),this._poleSouthVertexBuffer=l.createVertexBuffer(d,A1,!1),this._texturedPoleNorthVertexBuffer=l.createVertexBuffer(g,A1,!1),this._texturedPoleSouthVertexBuffer=l.createVertexBuffer(y,A1,!1)}getGridBuffers(l,o){return[this._gridBuffer,this._gridIndexBuffer,o?this._gridSegments[l].withSkirts:this._gridSegments[l].withoutSkirts]}getPoleBuffers(l,o){return[o?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,o?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[l]]}},a.cf=function(l){return Sa.has(l)},a.cg=D1,a.ch=ye,a.ci=function(l){return l({pluginStatus:he,pluginURL:we}),xe.on("pluginStateChange",l),l},a.cj=Jm,a.ck=ZM,a.cl=Ji,a.cm=Le,a.cn=Gt,a.co=Re,a.cp=function(l,o,c){return l.type==="custom"?new OJ(l,o):new NJ[l.type](l,o,c)},a.cq=function(l){const o=l.indexOf(dr);return o>=0?l.slice(0,o):l},a.cr=l=>xs(g1(l)),a.cs=l=>xs(p1(l)),a.ct=l=>xs(w_(l)),a.cu=function(l){return l.indexOf(dr)>=0},a.cv=function(l){const o=l.indexOf(dr);return o>=0?l.slice(o+1):""},a.cw=sf,a.cx=function(l){const o=[],c=l.id;return c===void 0&&o.push({message:`layers.${c}: missing required property "id"`}),l.render===void 0&&o.push({message:`layers.${c}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&o.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),o},a.cy=l=>xs(f1(l)),a.cz=l=>xs(x_(l)),a.d=se,a.d0=function(l,o){Kt=l,Cr=o},a.d1=function(l,o,c=!1){if(he===le||he===de||he===pe)throw new Error("setRTLTextPlugin cannot be called multiple times.");we=ma.resolveURL(l),he=le,fe=o,Oe(),c||ze()},a.d2=Te,a.d3=function(){fA().acquire(dA)},a.d4=function(){const l=ay;l&&(l.isPreloaded()&&l.numActive()===1?(l.release(dA),ay=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.d5=ny,a.d6=function(l){const o=Kr();if(!o)return;const c=o.delete(qt);l&&c.catch(l).then(()=>l())},a.d7=iy,a.d8=RB,a.d9=function(l){pA=ma.resolveURL(l),mA||(mA=new ry(fA(),new Mo)),mA.broadcast("setDracoUrl",pA)},a.da=et,a.db=q1,a.dc=z,a.dd=G1,a.de=$1,a.df=Y,a.dg=HO,a.dh=class extends Mo{constructor(l,o,c,d,g,y){super(),this.actor=l,this.layerIndex=o,this.availableImages=c,this.loadVectorData=g||kB,this.loading={},this.loaded={},this.deduped=new LB(l.scheduler),this.isSpriteLoaded=d,this.scheduler=l.scheduler,this.brightness=y}loadTile(l,o){const c=l.uid,d=l&&l.request,g=d&&d.collectResourceTiming,y=this.loading[c]=new GJ(l);y.abort=this.loadVectorData(l,(b,M)=>{const E=!this.loading[c];if(delete this.loading[c],E||b||!M)return y.status="done",E||(this.loaded[c]=y),o(b);const P=M.rawData,O={};M.expires&&(O.expires=M.expires),M.cacheControl&&(O.cacheControl=M.cacheControl),y.vectorTile=M.vectorTile||new NM(new W1(P));const F=()=>{y.parse(y.vectorTile,this.layerIndex,this.availableImages,this.actor,(V,U)=>{if(V||!U)return o(V);const q={};if(g){const K=_h(d);K.length>0&&(q.resourceTiming=JSON.parse(JSON.stringify(K)))}o(null,ht({rawTileData:P.slice(0)},U,O,q))})};this.isSpriteLoaded?F():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(F,{type:"parseTile",isSymbolTile:l.isSymbolTile,zoom:l.tileZoom}):F()}),this.loaded=this.loaded||{},this.loaded[c]=y})}reloadTile(l,o){const c=this.loaded,d=l.uid,g=this;if(c&&c[d]){const y=c[d];y.showCollisionBoxes=l.showCollisionBoxes,y.projection=l.projection,y.brightness=l.brightness,y.tileTransform=$h(l.tileID.canonical,l.projection),y.extraShadowCaster=l.extraShadowCaster;const b=(M,E)=>{const P=y.reloadCallback;P&&(delete y.reloadCallback,y.parse(y.vectorTile,g.layerIndex,this.availableImages,g.actor,P)),o(M,E)};y.status==="parsing"?y.reloadCallback=b:y.status==="done"&&(y.vectorTile?y.parse(y.vectorTile,this.layerIndex,this.availableImages,this.actor,b):b())}else o(null,void 0)}abortTile(l,o){const c=l.uid,d=this.loading[c];d&&(d.abort&&d.abort(),delete this.loading[c]),o()}removeTile(l,o){const c=this.loaded,d=l.uid;c&&c[d]&&delete c[d],o()}},a.di=_h,a.dj=qn,a.dk=$M,a.dl=function(l){let o=0;if(new Uint32Array(l,0,1)[0]!==zB){const c=new Uint32Array(l,0,7),[,,d,g,y,b]=c;o=c.byteLength+g+y+b+y,(d!==l.byteLength||o>=l.byteLength)&&Ue("Invalid b3dm header information.")}return VB(l,o)},a.dm=function(l,o){const c=UB(l);for(const d of c){for(const g of d.meshes)JJ(g);d.lights&&(d.lightMeshIndex=d.meshes.length,d.meshes.push(QJ(d.lights,o)))}return c},a.dn=Jz,a.dp=IB,a.dq=je,a.dr=function(l){ei(),Rr&&Rr.then(o=>{o.keys().then(c=>{for(let d=0;d<c.length-l;d++)o.delete(c[d])})})},a.f=function(l,o){const{x:c,y:d}=l.point,g=mO(c,d,l.worldSize/l._pixelsPerMercatorPixel,0,0);return a.m.multiply(g,g,yM(Mu(o)))},a.g=xt,a.i=Ym,a.j=Z1,a.k=ob,a.l=Ia,a.n=si,a.o=Rz,a.p=function(l,o){const c={};for(let d=0;d<o.length;d++){const g=o[d];g in l&&(c[g]=l[g])}return c},a.r=Vz,a.s=function(l,o,c){l[4*o+0]=c[0],l[4*o+1]=c[1],l[4*o+2]=c[2],l[4*o+3]=c[3]},a.t=yf,a.u=function(l,o,c,d,g){const y=5*o+2;l.float32[y+0]=c,l.float32[y+1]=d,l.float32[y+2]=g},a.w=gt,a.x=dO,a.y=function(l,o,c,d,g,y,b,M,E){if(E.name==="globe")return dO(l,o,new yf(c,d,g),!1);const P=$h({z:c,x:d,y:g},E);return new Un([(y+P.x/P.scale)*o,o*(P.y/P.scale),b],[(y+P.x2/P.scale)*o,o*(P.y2/P.scale),M])},a.z=function(l,o,c){let d=0;for(let g=0;g<2;++g){const y=c?c[g]:0;l[g]>y&&(d+=(l[g]-y)*(l[g]-y)),o[g]<y&&(d+=(y-o[g])*(y-o[g]))}return d}}),s(["./shared"],function(a){function h(Be){if(typeof Be=="number"||typeof Be=="boolean"||typeof Be=="string"||Be==null)return JSON.stringify(Be);if(Array.isArray(Be)){let ye="[";for(const De of Be)ye+=`${h(De)},`;return`${ye}]`}let ce="{";for(const ye of Object.keys(Be).sort())ce+=`${ye}:${h(Be[ye])},`;return`${ce}}`}function p(Be){let ce="";for(const ye of a.aS)ce+=`/${h(Be[ye])}`;return ce}class m{constructor(ce){this.keyCache={},this._layers={},this._layerConfigs={},ce&&this.replace(ce)}replace(ce,ye){this._layerConfigs={},this._layers={},this.update(ce,[],ye)}update(ce,ye,De){this._options=De;for(const Ze of ce)this._layerConfigs[Ze.id]=Ze,(this._layers[Ze.id]=a.cp(Ze,this.scope,this._options)).compileFilter(),this.keyCache[Ze.id]&&delete this.keyCache[Ze.id];for(const Ze of ye)delete this.keyCache[Ze],delete this._layerConfigs[Ze],delete this._layers[Ze];this.familiesBySource={};const qe=function(Ze,Je){const xt={};for(let bt=0;bt<Ze.length;bt++){const qt=Je&&Je[Ze[bt].id]||p(Ze[bt]);Je&&(Je[Ze[bt].id]=qt);let Kt=xt[qt];Kt||(Kt=xt[qt]=[]),Kt.push(Ze[bt])}const ot=[];for(const bt in xt)ot.push(xt[bt]);return ot}(a.da(this._layerConfigs),this.keyCache);for(const Ze of qe){const Je=Ze.map(Cr=>this._layers[Cr.id]),xt=Je[0];if(xt.visibility==="none")continue;const ot=xt.source||"";let bt=this.familiesBySource[ot];bt||(bt=this.familiesBySource[ot]={});const qt=xt.sourceLayer||"_geojsonTileLayer";let Kt=bt[qt];Kt||(Kt=bt[qt]=[]),Kt.push(Je)}}}class v{loadTile(ce,ye){const{uid:De,encoding:qe,rawImageData:Ze,padding:Je}=ce,xt=ImageBitmap&&Ze instanceof ImageBitmap?this.getImageData(Ze,Je):Ze;ye(null,new a.db(De,xt,qe,Je<1))}getImageData(ce,ye){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ce.width,ce.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ce.width,this.offscreenCanvas.height=ce.height,this.offscreenCanvasContext.drawImage(ce,0,0,ce.width,ce.height);const De=this.offscreenCanvasContext.getImageData(-ye,-ye,ce.width+2*ye,ce.height+2*ye);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),De}}function x(Be,ce){if(Be.length!==0){w(Be[0],ce);for(var ye=1;ye<Be.length;ye++)w(Be[ye],!ce)}}function w(Be,ce){for(var ye=0,De=0,qe=0,Ze=Be.length,Je=Ze-1;qe<Ze;Je=qe++){var xt=(Be[qe][0]-Be[Je][0])*(Be[Je][1]+Be[qe][1]),ot=ye+xt;De+=Math.abs(ye)>=Math.abs(xt)?ye-ot+xt:xt-ot+ye,ye=ot}ye+De>=0!=!!ce&&Be.reverse()}var T=a.dc(function Be(ce,ye){var De,qe=ce&&ce.type;if(qe==="FeatureCollection")for(De=0;De<ce.features.length;De++)Be(ce.features[De],ye);else if(qe==="GeometryCollection")for(De=0;De<ce.geometries.length;De++)Be(ce.geometries[De],ye);else if(qe==="Feature")Be(ce.geometry,ye);else if(qe==="Polygon")x(ce.coordinates,ye);else if(qe==="MultiPolygon")for(De=0;De<ce.coordinates.length;De++)x(ce.coordinates[De],ye);return ce});const C=a.dd.prototype.toGeoJSON;var I={exports:{}},k=a.df,R=a.de.VectorTileFeature,z=$;function $(Be,ce){this.options=ce||{},this.features=Be,this.length=Be.length}function j(Be,ce){this.id=typeof Be.id=="number"?Be.id:void 0,this.type=Be.type,this.rawGeometry=Be.type===1?[Be.geometry]:Be.geometry,this.properties=Be.tags,this.extent=ce||4096}$.prototype.feature=function(Be){return new j(this.features[Be],this.options.extent)},j.prototype.loadGeometry=function(){var Be=this.rawGeometry;this.geometry=[];for(var ce=0;ce<Be.length;ce++){for(var ye=Be[ce],De=[],qe=0;qe<ye.length;qe++)De.push(new k(ye[qe][0],ye[qe][1]));this.geometry.push(De)}return this.geometry},j.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Be=this.geometry,ce=1/0,ye=-1/0,De=1/0,qe=-1/0,Ze=0;Ze<Be.length;Ze++)for(var Je=Be[Ze],xt=0;xt<Je.length;xt++){var ot=Je[xt];ce=Math.min(ce,ot.x),ye=Math.max(ye,ot.x),De=Math.min(De,ot.y),qe=Math.max(qe,ot.y)}return[ce,De,ye,qe]},j.prototype.toGeoJSON=R.prototype.toGeoJSON;var G=a.dg,Y=z;function Z(Be){var ce=new G;return function(ye,De){for(var qe in ye.layers)De.writeMessage(3,H,ye.layers[qe])}(Be,ce),ce.finish()}function H(Be,ce){var ye;ce.writeVarintField(15,Be.version||1),ce.writeStringField(1,Be.name||""),ce.writeVarintField(5,Be.extent||4096);var De={keys:[],values:[],keycache:{},valuecache:{}};for(ye=0;ye<Be.length;ye++)De.feature=Be.feature(ye),ce.writeMessage(2,re,De);var qe=De.keys;for(ye=0;ye<qe.length;ye++)ce.writeStringField(3,qe[ye]);var Ze=De.values;for(ye=0;ye<Ze.length;ye++)ce.writeMessage(4,Ie,Ze[ye])}function re(Be,ce){var ye=Be.feature;ye.id!==void 0&&ce.writeVarintField(1,ye.id),ce.writeMessage(2,ne,Be),ce.writeVarintField(3,ye.type),ce.writeMessage(4,Se,ye)}function ne(Be,ce){var ye=Be.feature,De=Be.keys,qe=Be.values,Ze=Be.keycache,Je=Be.valuecache;for(var xt in ye.properties){var ot=ye.properties[xt],bt=Ze[xt];if(ot!==null){bt===void 0&&(De.push(xt),Ze[xt]=bt=De.length-1),ce.writeVarint(bt);var qt=typeof ot;qt!=="string"&&qt!=="boolean"&&qt!=="number"&&(ot=JSON.stringify(ot));var Kt=qt+":"+ot,Cr=Je[Kt];Cr===void 0&&(qe.push(ot),Je[Kt]=Cr=qe.length-1),ce.writeVarint(Cr)}}}function se(Be,ce){return(ce<<3)+(7&Be)}function me(Be){return Be<<1^Be>>31}function Se(Be,ce){for(var ye=Be.loadGeometry(),De=Be.type,qe=0,Ze=0,Je=ye.length,xt=0;xt<Je;xt++){var ot=ye[xt],bt=1;De===1&&(bt=ot.length),ce.writeVarint(se(1,bt));for(var qt=De===3?ot.length-1:ot.length,Kt=0;Kt<qt;Kt++){Kt===1&&De!==1&&ce.writeVarint(se(2,qt-1));var Cr=ot[Kt].x-qe,Rr=ot[Kt].y-Ze;ce.writeVarint(me(Cr)),ce.writeVarint(me(Rr)),qe+=Cr,Ze+=Rr}De===3&&ce.writeVarint(se(7,1))}}function Ie(Be,ce){var ye=typeof Be;ye==="string"?ce.writeStringField(1,Be):ye==="boolean"?ce.writeBooleanField(7,Be):ye==="number"&&(Be%1!=0?ce.writeDoubleField(3,Be):Be<0?ce.writeSVarintField(6,Be):ce.writeVarintField(5,Be))}I.exports=Z,I.exports.fromVectorTileJs=Z,I.exports.fromGeojsonVt=function(Be,ce){ce=ce||{};var ye={};for(var De in Be)ye[De]=new Y(Be[De].features,ce),ye[De].name=De,ye[De].version=ce.version,ye[De].extent=ce.extent;return Z({layers:ye})},I.exports.GeoJSONWrapper=Y;var ke=a.dc(I.exports);const Fe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Be=>Be},Ce=Math.fround||(We=new Float32Array(1),Be=>(We[0]=+Be,We[0]));var We;const gt=3,St=5,et=6;class ht{constructor(ce){this.options=Object.assign(Object.create(Fe),ce),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ce){const{log:ye,minZoom:De,maxZoom:qe}=this.options;ye&&console.time("total time");const Ze=`prepare ${ce.length} points`;ye&&console.time(Ze),this.points=ce;const Je=[];for(let ot=0;ot<ce.length;ot++){const bt=ce[ot];if(!bt.geometry)continue;const[qt,Kt]=bt.geometry.coordinates,Cr=Ce(dt(qt)),Rr=Ce(nt(Kt));Je.push(Cr,Rr,1/0,ot,-1,1),this.options.reduce&&Je.push(0)}let xt=this.trees[qe+1]=this._createTree(Je);ye&&console.timeEnd(Ze);for(let ot=qe;ot>=De;ot--){const bt=+Date.now();xt=this.trees[ot]=this._createTree(this._cluster(xt,ot)),ye&&console.log("z%d: %d clusters in %dms",ot,xt.numItems,+Date.now()-bt)}return ye&&console.timeEnd("total time"),this}getClusters(ce,ye){let De=((ce[0]+180)%360+360)%360-180;const qe=Math.max(-90,Math.min(90,ce[1]));let Ze=ce[2]===180?180:((ce[2]+180)%360+360)%360-180;const Je=Math.max(-90,Math.min(90,ce[3]));if(ce[2]-ce[0]>=360)De=-180,Ze=180;else if(De>Ze){const Kt=this.getClusters([De,qe,180,Je],ye),Cr=this.getClusters([-180,qe,Ze,Je],ye);return Kt.concat(Cr)}const xt=this.trees[this._limitZoom(ye)],ot=xt.range(dt(De),nt(Je),dt(Ze),nt(qe)),bt=xt.data,qt=[];for(const Kt of ot){const Cr=this.stride*Kt;qt.push(bt[Cr+St]>1?$e(bt,Cr,this.clusterProps):this.points[bt[Cr+gt]])}return qt}getChildren(ce){const ye=this._getOriginId(ce),De=this._getOriginZoom(ce),qe="No cluster with the specified id.",Ze=this.trees[De];if(!Ze)throw new Error(qe);const Je=Ze.data;if(ye*this.stride>=Je.length)throw new Error(qe);const xt=this.options.radius/(this.options.extent*Math.pow(2,De-1)),ot=Ze.within(Je[ye*this.stride],Je[ye*this.stride+1],xt),bt=[];for(const qt of ot){const Kt=qt*this.stride;Je[Kt+4]===ce&&bt.push(Je[Kt+St]>1?$e(Je,Kt,this.clusterProps):this.points[Je[Kt+gt]])}if(bt.length===0)throw new Error(qe);return bt}getLeaves(ce,ye,De){const qe=[];return this._appendLeaves(qe,ce,ye=ye||10,De=De||0,0),qe}getTile(ce,ye,De){const qe=this.trees[this._limitZoom(ce)],Ze=Math.pow(2,ce),{extent:Je,radius:xt}=this.options,ot=xt/Je,bt=(De-ot)/Ze,qt=(De+1+ot)/Ze,Kt={features:[]};return this._addTileFeatures(qe.range((ye-ot)/Ze,bt,(ye+1+ot)/Ze,qt),qe.data,ye,De,Ze,Kt),ye===0&&this._addTileFeatures(qe.range(1-ot/Ze,bt,1,qt),qe.data,Ze,De,Ze,Kt),ye===Ze-1&&this._addTileFeatures(qe.range(0,bt,ot/Ze,qt),qe.data,-1,De,Ze,Kt),Kt.features.length?Kt:null}getClusterExpansionZoom(ce){let ye=this._getOriginZoom(ce)-1;for(;ye<=this.options.maxZoom;){const De=this.getChildren(ce);if(ye++,De.length!==1)break;ce=De[0].properties.cluster_id}return ye}_appendLeaves(ce,ye,De,qe,Ze){const Je=this.getChildren(ye);for(const xt of Je){const ot=xt.properties;if(ot&&ot.cluster?Ze+ot.point_count<=qe?Ze+=ot.point_count:Ze=this._appendLeaves(ce,ot.cluster_id,De,qe,Ze):Ze<qe?Ze++:ce.push(xt),ce.length===De)break}return Ze}_createTree(ce){const ye=new a.aZ(ce.length/this.stride|0,this.options.nodeSize,Float32Array);for(let De=0;De<ce.length;De+=this.stride)ye.add(ce[De],ce[De+1]);return ye.finish(),ye.data=ce,ye}_addTileFeatures(ce,ye,De,qe,Ze,Je){for(const xt of ce){const ot=xt*this.stride,bt=ye[ot+St]>1;let qt,Kt,Cr;if(bt)qt=He(ye,ot,this.clusterProps),Kt=ye[ot],Cr=ye[ot+1];else{const Kr=this.points[ye[ot+gt]];qt=Kr.properties;const[ei,fi]=Kr.geometry.coordinates;Kt=dt(ei),Cr=nt(fi)}const Rr={type:1,geometry:[[Math.round(this.options.extent*(Kt*Ze-De)),Math.round(this.options.extent*(Cr*Ze-qe))]],tags:qt};let Ur;Ur=bt||this.options.generateId?ye[ot+gt]:this.points[ye[ot+gt]].id,Ur!==void 0&&(Rr.id=Ur),Je.features.push(Rr)}}_limitZoom(ce){return Math.max(this.options.minZoom,Math.min(Math.floor(+ce),this.options.maxZoom+1))}_cluster(ce,ye){const{radius:De,extent:qe,reduce:Ze,minPoints:Je}=this.options,xt=De/(qe*Math.pow(2,ye)),ot=ce.data,bt=[],qt=this.stride;for(let Kt=0;Kt<ot.length;Kt+=qt){if(ot[Kt+2]<=ye)continue;ot[Kt+2]=ye;const Cr=ot[Kt],Rr=ot[Kt+1],Ur=ce.within(ot[Kt],ot[Kt+1],xt),Kr=ot[Kt+St];let ei=Kr;for(const fi of Ur){const Ti=fi*qt;ot[Ti+2]>ye&&(ei+=ot[Ti+St])}if(ei>Kr&&ei>=Je){let fi,Ti=Cr*Kr,wn=Rr*Kr,Ki=-1;const Ji=((Kt/qt|0)<<5)+(ye+1)+this.points.length;for(const za of Ur){const qn=za*qt;if(ot[qn+2]<=ye)continue;ot[qn+2]=ye;const Go=ot[qn+St];Ti+=ot[qn]*Go,wn+=ot[qn+1]*Go,ot[qn+4]=Ji,Ze&&(fi||(fi=this._map(ot,Kt,!0),Ki=this.clusterProps.length,this.clusterProps.push(fi)),Ze(fi,this._map(ot,qn)))}ot[Kt+4]=Ji,bt.push(Ti/ei,wn/ei,1/0,Ji,-1,ei),Ze&&bt.push(Ki)}else{for(let fi=0;fi<qt;fi++)bt.push(ot[Kt+fi]);if(ei>1)for(const fi of Ur){const Ti=fi*qt;if(!(ot[Ti+2]<=ye)){ot[Ti+2]=ye;for(let wn=0;wn<qt;wn++)bt.push(ot[Ti+wn])}}}}return bt}_getOriginId(ce){return ce-this.points.length>>5}_getOriginZoom(ce){return(ce-this.points.length)%32}_map(ce,ye,De){if(ce[ye+St]>1){const Je=this.clusterProps[ce[ye+et]];return De?Object.assign({},Je):Je}const qe=this.points[ce[ye+gt]].properties,Ze=this.options.map(qe);return De&&Ze===qe?Object.assign({},Ze):Ze}}function $e(Be,ce,ye){return{type:"Feature",id:Be[ce+gt],properties:He(Be,ce,ye),geometry:{type:"Point",coordinates:[(De=Be[ce],360*(De-.5)),vt(Be[ce+1])]}};var De}function He(Be,ce,ye){const De=Be[ce+St],qe=De>=1e4?`${Math.round(De/1e3)}k`:De>=1e3?Math.round(De/100)/10+"k":De,Ze=Be[ce+et],Je=Ze===-1?{}:Object.assign({},ye[Ze]);return Object.assign(Je,{cluster:!0,cluster_id:Be[ce+gt],point_count:De,point_count_abbreviated:qe})}function dt(Be){return Be/360+.5}function nt(Be){const ce=Math.sin(Be*Math.PI/180),ye=.5-.25*Math.log((1+ce)/(1-ce))/Math.PI;return ye<0?0:ye>1?1:ye}function vt(Be){const ce=(180-360*Be)*Math.PI/180;return 360*Math.atan(Math.exp(ce))/Math.PI-90}var Pt={exports:{}};Pt.exports=function(){function Be(At,Lt,Vt,Gt){for(var Xt,ir=Gt,ar=Vt-Lt>>1,er=Vt-Lt,pr=At[Lt],Jt=At[Lt+1],jr=At[Vt],Ai=At[Vt+1],Tr=Lt+3;Tr<Vt;Tr+=3){var Ri=ce(At[Tr],At[Tr+1],pr,Jt,jr,Ai);if(Ri>ir)Xt=Tr,ir=Ri;else if(Ri===ir){var Ci=Math.abs(Tr-ar);Ci<er&&(Xt=Tr,er=Ci)}}ir>Gt&&(Xt-Lt>3&&Be(At,Lt,Xt,Gt),At[Xt+2]=ir,Vt-Xt>3&&Be(At,Xt,Vt,Gt))}function ce(At,Lt,Vt,Gt,Xt,ir){var ar=Xt-Vt,er=ir-Gt;if(ar!==0||er!==0){var pr=((At-Vt)*ar+(Lt-Gt)*er)/(ar*ar+er*er);pr>1?(Vt=Xt,Gt=ir):pr>0&&(Vt+=ar*pr,Gt+=er*pr)}return(ar=At-Vt)*ar+(er=Lt-Gt)*er}function ye(At,Lt,Vt,Gt){var Xt={id:At===void 0?null:At,type:Lt,geometry:Vt,tags:Gt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ir){var ar=ir.geometry,er=ir.type;if(er==="Point"||er==="MultiPoint"||er==="LineString")De(ir,ar);else if(er==="Polygon"||er==="MultiLineString")for(var pr=0;pr<ar.length;pr++)De(ir,ar[pr]);else if(er==="MultiPolygon")for(pr=0;pr<ar.length;pr++)for(var Jt=0;Jt<ar[pr].length;Jt++)De(ir,ar[pr][Jt])}(Xt),Xt}function De(At,Lt){for(var Vt=0;Vt<Lt.length;Vt+=3)At.minX=Math.min(At.minX,Lt[Vt]),At.minY=Math.min(At.minY,Lt[Vt+1]),At.maxX=Math.max(At.maxX,Lt[Vt]),At.maxY=Math.max(At.maxY,Lt[Vt+1])}function qe(At,Lt,Vt,Gt){if(Lt.geometry){var Xt=Lt.geometry.coordinates,ir=Lt.geometry.type,ar=Math.pow(Vt.tolerance/((1<<Vt.maxZoom)*Vt.extent),2),er=[],pr=Lt.id;if(Vt.promoteId?pr=Lt.properties[Vt.promoteId]:Vt.generateId&&(pr=Gt||0),ir==="Point")Ze(Xt,er);else if(ir==="MultiPoint")for(var Jt=0;Jt<Xt.length;Jt++)Ze(Xt[Jt],er);else if(ir==="LineString")Je(Xt,er,ar,!1);else if(ir==="MultiLineString"){if(Vt.lineMetrics){for(Jt=0;Jt<Xt.length;Jt++)Je(Xt[Jt],er=[],ar,!1),At.push(ye(pr,"LineString",er,Lt.properties));return}xt(Xt,er,ar,!1)}else if(ir==="Polygon")xt(Xt,er,ar,!0);else{if(ir!=="MultiPolygon"){if(ir==="GeometryCollection"){for(Jt=0;Jt<Lt.geometry.geometries.length;Jt++)qe(At,{id:pr,geometry:Lt.geometry.geometries[Jt],properties:Lt.properties},Vt,Gt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Jt=0;Jt<Xt.length;Jt++){var jr=[];xt(Xt[Jt],jr,ar,!0),er.push(jr)}}At.push(ye(pr,ir,er,Lt.properties))}}function Ze(At,Lt){Lt.push(ot(At[0])),Lt.push(bt(At[1])),Lt.push(0)}function Je(At,Lt,Vt,Gt){for(var Xt,ir,ar=0,er=0;er<At.length;er++){var pr=ot(At[er][0]),Jt=bt(At[er][1]);Lt.push(pr),Lt.push(Jt),Lt.push(0),er>0&&(ar+=Gt?(Xt*Jt-pr*ir)/2:Math.sqrt(Math.pow(pr-Xt,2)+Math.pow(Jt-ir,2))),Xt=pr,ir=Jt}var jr=Lt.length-3;Lt[2]=1,Be(Lt,0,jr,Vt),Lt[jr+2]=1,Lt.size=Math.abs(ar),Lt.start=0,Lt.end=Lt.size}function xt(At,Lt,Vt,Gt){for(var Xt=0;Xt<At.length;Xt++){var ir=[];Je(At[Xt],ir,Vt,Gt),Lt.push(ir)}}function ot(At){return At/360+.5}function bt(At){var Lt=Math.sin(At*Math.PI/180),Vt=.5-.25*Math.log((1+Lt)/(1-Lt))/Math.PI;return Vt<0?0:Vt>1?1:Vt}function qt(At,Lt,Vt,Gt,Xt,ir,ar,er){if(Gt/=Lt,ir>=(Vt/=Lt)&&ar<Gt)return At;if(ar<Vt||ir>=Gt)return null;for(var pr=[],Jt=0;Jt<At.length;Jt++){var jr=At[Jt],Ai=jr.geometry,Tr=jr.type,Ri=Xt===0?jr.minX:jr.minY,Ci=Xt===0?jr.maxX:jr.maxY;if(Ri>=Vt&&Ci<Gt)pr.push(jr);else if(!(Ci<Vt||Ri>=Gt)){var vn=[];if(Tr==="Point"||Tr==="MultiPoint")Kt(Ai,vn,Vt,Gt,Xt);else if(Tr==="LineString")Cr(Ai,vn,Vt,Gt,Xt,!1,er.lineMetrics);else if(Tr==="MultiLineString")Ur(Ai,vn,Vt,Gt,Xt,!1);else if(Tr==="Polygon")Ur(Ai,vn,Vt,Gt,Xt,!0);else if(Tr==="MultiPolygon")for(var In=0;In<Ai.length;In++){var Qn=[];Ur(Ai[In],Qn,Vt,Gt,Xt,!0),Qn.length&&vn.push(Qn)}if(vn.length){if(er.lineMetrics&&Tr==="LineString"){for(In=0;In<vn.length;In++)pr.push(ye(jr.id,Tr,vn[In],jr.tags));continue}Tr!=="LineString"&&Tr!=="MultiLineString"||(vn.length===1?(Tr="LineString",vn=vn[0]):Tr="MultiLineString"),Tr!=="Point"&&Tr!=="MultiPoint"||(Tr=vn.length===3?"Point":"MultiPoint"),pr.push(ye(jr.id,Tr,vn,jr.tags))}}}return pr.length?pr:null}function Kt(At,Lt,Vt,Gt,Xt){for(var ir=0;ir<At.length;ir+=3){var ar=At[ir+Xt];ar>=Vt&&ar<=Gt&&(Lt.push(At[ir]),Lt.push(At[ir+1]),Lt.push(At[ir+2]))}}function Cr(At,Lt,Vt,Gt,Xt,ir,ar){for(var er,pr,Jt=Rr(At),jr=Xt===0?ei:fi,Ai=At.start,Tr=0;Tr<At.length-3;Tr+=3){var Ri=At[Tr],Ci=At[Tr+1],vn=At[Tr+2],In=At[Tr+3],Qn=At[Tr+4],ja=Xt===0?Ri:Ci,no=Xt===0?In:Qn,Ba=!1;ar&&(er=Math.sqrt(Math.pow(Ri-In,2)+Math.pow(Ci-Qn,2))),ja<Vt?no>Vt&&(pr=jr(Jt,Ri,Ci,In,Qn,Vt),ar&&(Jt.start=Ai+er*pr)):ja>Gt?no<Gt&&(pr=jr(Jt,Ri,Ci,In,Qn,Gt),ar&&(Jt.start=Ai+er*pr)):Kr(Jt,Ri,Ci,vn),no<Vt&&ja>=Vt&&(pr=jr(Jt,Ri,Ci,In,Qn,Vt),Ba=!0),no>Gt&&ja<=Gt&&(pr=jr(Jt,Ri,Ci,In,Qn,Gt),Ba=!0),!ir&&Ba&&(ar&&(Jt.end=Ai+er*pr),Lt.push(Jt),Jt=Rr(At)),ar&&(Ai+=er)}var ia=At.length-3;Ri=At[ia],Ci=At[ia+1],vn=At[ia+2],(ja=Xt===0?Ri:Ci)>=Vt&&ja<=Gt&&Kr(Jt,Ri,Ci,vn),ia=Jt.length-3,ir&&ia>=3&&(Jt[ia]!==Jt[0]||Jt[ia+1]!==Jt[1])&&Kr(Jt,Jt[0],Jt[1],Jt[2]),Jt.length&&Lt.push(Jt)}function Rr(At){var Lt=[];return Lt.size=At.size,Lt.start=At.start,Lt.end=At.end,Lt}function Ur(At,Lt,Vt,Gt,Xt,ir){for(var ar=0;ar<At.length;ar++)Cr(At[ar],Lt,Vt,Gt,Xt,ir,!1)}function Kr(At,Lt,Vt,Gt){At.push(Lt),At.push(Vt),At.push(Gt)}function ei(At,Lt,Vt,Gt,Xt,ir){var ar=(ir-Lt)/(Gt-Lt);return At.push(ir),At.push(Vt+(Xt-Vt)*ar),At.push(1),ar}function fi(At,Lt,Vt,Gt,Xt,ir){var ar=(ir-Vt)/(Xt-Vt);return At.push(Lt+(Gt-Lt)*ar),At.push(ir),At.push(1),ar}function Ti(At,Lt){for(var Vt=[],Gt=0;Gt<At.length;Gt++){var Xt,ir=At[Gt],ar=ir.type;if(ar==="Point"||ar==="MultiPoint"||ar==="LineString")Xt=wn(ir.geometry,Lt);else if(ar==="MultiLineString"||ar==="Polygon"){Xt=[];for(var er=0;er<ir.geometry.length;er++)Xt.push(wn(ir.geometry[er],Lt))}else if(ar==="MultiPolygon")for(Xt=[],er=0;er<ir.geometry.length;er++){for(var pr=[],Jt=0;Jt<ir.geometry[er].length;Jt++)pr.push(wn(ir.geometry[er][Jt],Lt));Xt.push(pr)}Vt.push(ye(ir.id,ar,Xt,ir.tags))}return Vt}function wn(At,Lt){var Vt=[];Vt.size=At.size,At.start!==void 0&&(Vt.start=At.start,Vt.end=At.end);for(var Gt=0;Gt<At.length;Gt+=3)Vt.push(At[Gt]+Lt,At[Gt+1],At[Gt+2]);return Vt}function Ki(At,Lt){if(At.transformed)return At;var Vt,Gt,Xt,ir=1<<At.z,ar=At.x,er=At.y;for(Vt=0;Vt<At.features.length;Vt++){var pr=At.features[Vt],Jt=pr.geometry,jr=pr.type;if(pr.geometry=[],jr===1)for(Gt=0;Gt<Jt.length;Gt+=2)pr.geometry.push(Ji(Jt[Gt],Jt[Gt+1],Lt,ir,ar,er));else for(Gt=0;Gt<Jt.length;Gt++){var Ai=[];for(Xt=0;Xt<Jt[Gt].length;Xt+=2)Ai.push(Ji(Jt[Gt][Xt],Jt[Gt][Xt+1],Lt,ir,ar,er));pr.geometry.push(Ai)}}return At.transformed=!0,At}function Ji(At,Lt,Vt,Gt,Xt,ir){return[Math.round(Vt*(At*Gt-Xt)),Math.round(Vt*(Lt*Gt-ir))]}function za(At,Lt,Vt,Gt,Xt){for(var ir=Lt===Xt.maxZoom?0:Xt.tolerance/((1<<Lt)*Xt.extent),ar={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Vt,y:Gt,z:Lt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},er=0;er<At.length;er++){ar.numFeatures++,qn(ar,At[er],ir,Xt);var pr=At[er].minX,Jt=At[er].minY,jr=At[er].maxX,Ai=At[er].maxY;pr<ar.minX&&(ar.minX=pr),Jt<ar.minY&&(ar.minY=Jt),jr>ar.maxX&&(ar.maxX=jr),Ai>ar.maxY&&(ar.maxY=Ai)}return ar}function qn(At,Lt,Vt,Gt){var Xt=Lt.geometry,ir=Lt.type,ar=[];if(ir==="Point"||ir==="MultiPoint")for(var er=0;er<Xt.length;er+=3)ar.push(Xt[er]),ar.push(Xt[er+1]),At.numPoints++,At.numSimplified++;else if(ir==="LineString")Go(ar,Xt,At,Vt,!1,!1);else if(ir==="MultiLineString"||ir==="Polygon")for(er=0;er<Xt.length;er++)Go(ar,Xt[er],At,Vt,ir==="Polygon",er===0);else if(ir==="MultiPolygon")for(var pr=0;pr<Xt.length;pr++){var Jt=Xt[pr];for(er=0;er<Jt.length;er++)Go(ar,Jt[er],At,Vt,!0,er===0)}if(ar.length){var jr=Lt.tags||null;if(ir==="LineString"&&Gt.lineMetrics){for(var Ai in jr={},Lt.tags)jr[Ai]=Lt.tags[Ai];jr.mapbox_clip_start=Xt.start/Xt.size,jr.mapbox_clip_end=Xt.end/Xt.size}var Tr={geometry:ar,type:ir==="Polygon"||ir==="MultiPolygon"?3:ir==="LineString"||ir==="MultiLineString"?2:1,tags:jr};Lt.id!==null&&(Tr.id=Lt.id),At.features.push(Tr)}}function Go(At,Lt,Vt,Gt,Xt,ir){var ar=Gt*Gt;if(Gt>0&&Lt.size<(Xt?ar:Gt))Vt.numPoints+=Lt.length/3;else{for(var er=[],pr=0;pr<Lt.length;pr+=3)(Gt===0||Lt[pr+2]>ar)&&(Vt.numSimplified++,er.push(Lt[pr]),er.push(Lt[pr+1])),Vt.numPoints++;Xt&&function(Jt,jr){for(var Ai=0,Tr=0,Ri=Jt.length,Ci=Ri-2;Tr<Ri;Ci=Tr,Tr+=2)Ai+=(Jt[Tr]-Jt[Ci])*(Jt[Tr+1]+Jt[Ci+1]);if(Ai>0===jr)for(Tr=0,Ri=Jt.length;Tr<Ri/2;Tr+=2){var vn=Jt[Tr],In=Jt[Tr+1];Jt[Tr]=Jt[Ri-2-Tr],Jt[Tr+1]=Jt[Ri-1-Tr],Jt[Ri-2-Tr]=vn,Jt[Ri-1-Tr]=In}}(er,ir),At.push(er)}}function fs(At,Lt){var Vt=(Lt=this.options=function(Xt,ir){for(var ar in ir)Xt[ar]=ir[ar];return Xt}(Object.create(this.options),Lt)).debug;if(Vt&&console.time("preprocess data"),Lt.maxZoom<0||Lt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Lt.promoteId&&Lt.generateId)throw new Error("promoteId and generateId cannot be used together.");var Gt=function(Xt,ir){var ar=[];if(Xt.type==="FeatureCollection")for(var er=0;er<Xt.features.length;er++)qe(ar,Xt.features[er],ir,er);else qe(ar,Xt.type==="Feature"?Xt:{geometry:Xt},ir);return ar}(At,Lt);this.tiles={},this.tileCoords=[],Vt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Lt.indexMaxZoom,Lt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Gt=function(Xt,ir){var ar=ir.buffer/ir.extent,er=Xt,pr=qt(Xt,1,-1-ar,ar,0,-1,2,ir),Jt=qt(Xt,1,1-ar,2+ar,0,-1,2,ir);return(pr||Jt)&&(er=qt(Xt,1,-ar,1+ar,0,-1,2,ir)||[],pr&&(er=Ti(pr,1).concat(er)),Jt&&(er=er.concat(Ti(Jt,-1)))),er}(Gt,Lt)).length&&this.splitTile(Gt,0,0,0),Vt&&(Gt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Zn(At,Lt,Vt){return 32*((1<<At)*Vt+Lt)+At}return fs.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},fs.prototype.splitTile=function(At,Lt,Vt,Gt,Xt,ir,ar){for(var er=[At,Lt,Vt,Gt],pr=this.options,Jt=pr.debug;er.length;){Gt=er.pop(),Vt=er.pop(),Lt=er.pop(),At=er.pop();var jr=1<<Lt,Ai=Zn(Lt,Vt,Gt),Tr=this.tiles[Ai];if(!Tr&&(Jt>1&&console.time("creation"),Tr=this.tiles[Ai]=za(At,Lt,Vt,Gt,pr),this.tileCoords.push({z:Lt,x:Vt,y:Gt}),Jt)){Jt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Lt,Vt,Gt,Tr.numFeatures,Tr.numPoints,Tr.numSimplified),console.timeEnd("creation"));var Ri="z"+Lt;this.stats[Ri]=(this.stats[Ri]||0)+1,this.total++}if(Tr.source=At,Xt){if(Lt===pr.maxZoom||Lt===Xt)continue;var Ci=1<<Xt-Lt;if(Vt!==Math.floor(ir/Ci)||Gt!==Math.floor(ar/Ci))continue}else if(Lt===pr.indexMaxZoom||Tr.numPoints<=pr.indexMaxPoints)continue;if(Tr.source=null,At.length!==0){Jt>1&&console.time("clipping");var vn,In,Qn,ja,no,Ba,ia=.5*pr.buffer/pr.extent,Sa=.5-ia,ps=.5+ia,uu=1+ia;vn=In=Qn=ja=null,no=qt(At,jr,Vt-ia,Vt+ps,0,Tr.minX,Tr.maxX,pr),Ba=qt(At,jr,Vt+Sa,Vt+uu,0,Tr.minX,Tr.maxX,pr),At=null,no&&(vn=qt(no,jr,Gt-ia,Gt+ps,1,Tr.minY,Tr.maxY,pr),In=qt(no,jr,Gt+Sa,Gt+uu,1,Tr.minY,Tr.maxY,pr),no=null),Ba&&(Qn=qt(Ba,jr,Gt-ia,Gt+ps,1,Tr.minY,Tr.maxY,pr),ja=qt(Ba,jr,Gt+Sa,Gt+uu,1,Tr.minY,Tr.maxY,pr),Ba=null),Jt>1&&console.timeEnd("clipping"),er.push(vn||[],Lt+1,2*Vt,2*Gt),er.push(In||[],Lt+1,2*Vt,2*Gt+1),er.push(Qn||[],Lt+1,2*Vt+1,2*Gt),er.push(ja||[],Lt+1,2*Vt+1,2*Gt+1)}}},fs.prototype.getTile=function(At,Lt,Vt){var Gt=this.options,Xt=Gt.extent,ir=Gt.debug;if(At<0||At>24)return null;var ar=1<<At,er=Zn(At,Lt=(Lt%ar+ar)%ar,Vt);if(this.tiles[er])return Ki(this.tiles[er],Xt);ir>1&&console.log("drilling down to z%d-%d-%d",At,Lt,Vt);for(var pr,Jt=At,jr=Lt,Ai=Vt;!pr&&Jt>0;)Jt--,jr=Math.floor(jr/2),Ai=Math.floor(Ai/2),pr=this.tiles[Zn(Jt,jr,Ai)];return pr&&pr.source?(ir>1&&console.log("found parent tile z%d-%d-%d",Jt,jr,Ai),ir>1&&console.time("drilling down"),this.splitTile(pr.source,Jt,jr,Ai,At,Lt,Vt),ir>1&&console.timeEnd("drilling down"),this.tiles[er]?Ki(this.tiles[er],Xt):null):null},function(At,Lt){return new fs(At,Lt)}}();var jt=a.dc(Pt.exports);function Et(Be,ce){const ye=Be.tileID.canonical;if(!this._geoJSONIndex)return ce(null,null);const De=this._geoJSONIndex.getTile(ye.z,ye.x,ye.y);if(!De)return ce(null,null);const qe=new class{constructor(Je){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.J,this.length=Je.length,this._features=Je}feature(Je){return new class{constructor(xt){this._feature=xt,this.extent=a.J,this.type=xt.type,this.properties=xt.tags,"id"in xt&&!isNaN(xt.id)&&(this.id=parseInt(xt.id,10))}loadGeometry(){if(this._feature.type===1){const xt=[];for(const ot of this._feature.geometry)xt.push([new a.P(ot[0],ot[1])]);return xt}{const xt=[];for(const ot of this._feature.geometry){const bt=[];for(const qt of ot)bt.push(new a.P(qt[0],qt[1]));xt.push(bt)}return xt}}toGeoJSON(xt,ot,bt){return C.call(this,xt,ot,bt)}}(this._features[Je])}}(De.features);let Ze=ke(qe);Ze.byteOffset===0&&Ze.byteLength===Ze.buffer.byteLength||(Ze=new Uint8Array(Ze)),ce(null,{vectorTile:qe,rawData:Ze.buffer})}class Wt extends a.dh{constructor(ce,ye,De,qe,Ze,Je){super(ce,ye,De,qe,Et,Je),Ze&&(this.loadGeoJSON=Ze)}loadData(ce,ye){const De=ce&&ce.request,qe=De&&De.collectResourceTiming;this.loadGeoJSON(ce,(Ze,Je)=>{if(Ze||!Je)return ye(Ze);if(typeof Je!="object")return ye(new Error(`Input data given to '${ce.source}' is not a valid GeoJSON object.`));{T(Je,!0);try{if(ce.filter){const ot=a.cw(ce.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ot.result==="error")throw new Error(ot.value.map(qt=>`${qt.key}: ${qt.message}`).join(", "));const bt=Je.features.filter(qt=>ot.value.evaluate({zoom:0},qt));Je={type:"FeatureCollection",features:bt}}this._geoJSONIndex=ce.cluster?new ht(function({superclusterOptions:ot,clusterProperties:bt}){if(!bt||!ot)return ot;const qt={},Kt={},Cr={accumulated:null,zoom:0},Rr={properties:null},Ur=Object.keys(bt);for(const Kr of Ur){const[ei,fi]=bt[Kr],Ti=a.cw(fi),wn=a.cw(typeof ei=="string"?[ei,["accumulated"],["get",Kr]]:ei);qt[Kr]=Ti.value,Kt[Kr]=wn.value}return ot.map=Kr=>{Rr.properties=Kr;const ei={};for(const fi of Ur)ei[fi]=qt[fi].evaluate(Cr,Rr);return ei},ot.reduce=(Kr,ei)=>{Rr.properties=ei;for(const fi of Ur)Cr.accumulated=Kr[fi],Kr[fi]=Kt[fi].evaluate(Cr,Rr)},ot}(ce)).load(Je.features):jt(Je,ce.geojsonVtOptions)}catch(ot){return ye(ot)}this.loaded={};const xt={};if(qe){const ot=a.di(De);ot&&(xt.resourceTiming={},xt.resourceTiming[ce.source]=JSON.parse(JSON.stringify(ot)))}ye(null,xt)}})}reloadTile(ce,ye){const De=this.loaded;return De&&De[ce.uid]?super.reloadTile(ce,ye):this.loadTile(ce,ye)}loadGeoJSON(ce,ye){if(ce.request)a.a1(ce.request,ye);else{if(typeof ce.data!="string")return ye(new Error(`Input data given to '${ce.source}' is not a valid GeoJSON object.`));try{return ye(null,JSON.parse(ce.data))}catch{return ye(new Error(`Input data given to '${ce.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ce,ye){try{ye(null,this._geoJSONIndex.getClusterExpansionZoom(ce.clusterId))}catch(De){ye(De)}}getClusterChildren(ce,ye){try{ye(null,this._geoJSONIndex.getChildren(ce.clusterId))}catch(De){ye(De)}}getClusterLeaves(ce,ye){try{ye(null,this._geoJSONIndex.getLeaves(ce.clusterId,ce.limit,ce.offset))}catch(De){ye(De)}}}class Re{constructor(ce,ye){this.tileID=new a.O(ce.tileID.overscaledZ,ce.tileID.wrap,ce.tileID.canonical.z,ce.tileID.canonical.x,ce.tileID.canonical.y),this.tileZoom=ce.tileZoom,this.uid=ce.uid,this.zoom=ce.zoom,this.canonical=ce.tileID.canonical,this.pixelRatio=ce.pixelRatio,this.tileSize=ce.tileSize,this.source=ce.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=ce.projection,this.brightness=ye}parse(ce,ye,De,qe){this.status="parsing";const Ze=new a.O(De.tileID.overscaledZ,De.tileID.wrap,De.tileID.canonical.z,De.tileID.canonical.x,De.tileID.canonical.y),Je={},xt=ye.familiesBySource[De.source],ot=new a.dk(Ze,De.promoteId);return ot.bucketLayerIDs=[],a.dl(ce).then(bt=>{if(!bt)return qe(new Error("Could not parse tile"));const qt=a.dm(bt,1/a.cg(De.tileID.canonical)),Kt=bt.json.extensionsUsed&&bt.json.extensionsUsed.includes("MAPBOX_mesh_features"),Cr=new a.al(this.zoom,{brightness:this.brightness});for(const Rr in xt)for(const Ur of xt[Rr]){const Kr=Ur[0],ei=bt.json.extensionsUsed;Kr.recalculate(Cr,[]);const fi=new a.dn(qt,Ze,ei&&ei.includes("MAPBOX_mesh_features"),this.brightness);Kt||(fi.needsUpload=!0),Je[Kr.fqid]=fi,fi.evaluate(Kr)}this.status="done",qe(null,{buckets:Je,featureIndex:ot})}).catch(bt=>qe(new Error(bt.message)))}}class Ve{constructor(ce,ye,De,qe,Ze,Je){this.actor=ce,this.layerIndex=ye,this.brightness=Je,this.loading={},this.loaded={}}loadTile(ce,ye){const De=ce.uid,qe=this.loading[De]=new Re(ce,this.brightness);a.dj(ce.request,(Ze,Je)=>{const xt=!this.loading[De];return delete this.loading[De],xt||Ze?(qe.status="done",xt||(this.loaded[De]=qe),ye(Ze)):Je&&Je.byteLength!==0?void qe.parse(Je,this.layerIndex,ce,(ot,bt)=>{qe.status="done",this.loaded=this.loaded||{},this.loaded[De]=qe,ot||!bt?ye(ot):ye(null,bt)}):(qe.status="done",this.loaded[De]=qe,ye())})}reloadTile(ce,ye){const De=this.loaded,qe=ce.uid;if(De&&De[qe]){const Ze=De[qe];Ze.projection=ce.projection,Ze.brightness=ce.brightness;const Je=(xt,ot)=>{Ze.reloadCallback&&(delete Ze.reloadCallback,this.loadTile(ce,ye)),ye(xt,ot)};Ze.status==="parsing"?Ze.reloadCallback=Je:Ze.status==="done"&&this.loadTile(ce,ye)}}abortTile(ce,ye){const De=ce.uid;this.loading[De]&&delete this.loading[De],ye()}removeTile(ce,ye){const De=this.loaded,qe=ce.uid;De&&De[qe]&&delete De[qe],ye()}}class Ue{constructor(ce){this.self=ce,this.actor=new a.dp(ce,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=a.o({name:"mercator"}),this.workerSourceTypes={vector:a.dh,geojson:Wt,"batched-model":Ve},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ye,De)=>{if(this.workerSourceTypes[ye])throw new Error(`Worker source with name "${ye}" already registered.`);this.workerSourceTypes[ye]=De},this.self.registerRTLTextPlugin=ye=>{if(a.dq.isParsed())throw new Error("RTL text plugin already registered.");a.dq.applyArabicShaping=ye.applyArabicShaping,a.dq.processBidirectionalText=ye.processBidirectionalText,a.dq.processStyledBidirectionalText=ye.processStyledBidirectionalText}}clearCaches(ce,ye,De){delete this.layerIndexes[ce],delete this.availableImages[ce],delete this.workerSources[ce],delete this.demWorkerSources[ce],De()}checkIfReady(ce,ye,De){De()}setReferrer(ce,ye){this.referrer=ye}spriteLoaded(ce,{scope:ye,isLoaded:De}){if(this.isSpriteLoaded[ce]||(this.isSpriteLoaded[ce]={}),this.isSpriteLoaded[ce][ye]=De,this.workerSources[ce]&&this.workerSources[ce][ye])for(const qe in this.workerSources[ce][ye]){const Ze=this.workerSources[ce][ye][qe];for(const Je in Ze)Ze[Je]instanceof a.dh&&(Ze[Je].isSpriteLoaded=De,Ze[Je].fire(new a.a8("isSpriteLoaded")))}}setImages(ce,{scope:ye,images:De},qe){if(this.availableImages[ce]||(this.availableImages[ce]={}),this.availableImages[ce][ye]=De,this.workerSources[ce]&&this.workerSources[ce][ye]){for(const Ze in this.workerSources[ce][ye]){const Je=this.workerSources[ce][ye][Ze];for(const xt in Je)Je[xt].availableImages=De}qe()}else qe()}setProjection(ce,ye){this.projections[ce]=a.o(ye)}setBrightness(ce,ye,De){this.brightness=ye,De()}setLayers(ce,ye,De){this.getLayerIndex(ce,ye.scope).replace(ye.layers,ye.options),De()}updateLayers(ce,ye,De){this.getLayerIndex(ce,ye.scope).update(ye.layers,ye.removedIds,ye.options),De()}loadTile(ce,ye,De){ye.projection=this.projections[ce]||this.defaultProjection,this.getWorkerSource(ce,ye.type,ye.source,ye.scope).loadTile(ye,De)}loadDEMTile(ce,ye,De){this.getDEMWorkerSource(ce,ye.source,ye.scope).loadTile(ye,De)}reloadTile(ce,ye,De){ye.projection=this.projections[ce]||this.defaultProjection,this.getWorkerSource(ce,ye.type,ye.source,ye.scope).reloadTile(ye,De)}abortTile(ce,ye,De){this.getWorkerSource(ce,ye.type,ye.source,ye.scope).abortTile(ye,De)}removeTile(ce,ye,De){this.getWorkerSource(ce,ye.type,ye.source,ye.scope).removeTile(ye,De)}removeSource(ce,ye,De){if(!(this.workerSources[ce]&&this.workerSources[ce][ye.scope]&&this.workerSources[ce][ye.scope][ye.type]&&this.workerSources[ce][ye.scope][ye.type][ye.source]))return;const qe=this.workerSources[ce][ye.scope][ye.type][ye.source];delete this.workerSources[ce][ye.scope][ye.type][ye.source],qe.removeSource!==void 0?qe.removeSource(ye,De):De()}loadWorkerSource(ce,ye,De){try{this.self.importScripts(ye.url),De()}catch(qe){De(qe.toString())}}syncRTLPluginState(ce,ye,De){try{a.dq.setState(ye);const qe=a.dq.getPluginURL();if(a.dq.isLoaded()&&!a.dq.isParsed()&&qe!=null){this.self.importScripts(qe);const Ze=a.dq.isParsed();De(Ze?void 0:new Error(`RTL Text Plugin failed to import scripts from ${qe}`),Ze)}}catch(qe){De(qe.toString())}}setDracoUrl(ce,ye){this.dracoUrl=ye}getAvailableImages(ce,ye){this.availableImages[ce]||(this.availableImages[ce]={});let De=this.availableImages[ce][ye];return De||(De=[]),De}getLayerIndex(ce,ye){this.layerIndexes[ce]||(this.layerIndexes[ce]={});let De=this.layerIndexes[ce][ye];return De||(De=this.layerIndexes[ce][ye]=new m,De.scope=ye),De}getWorkerSource(ce,ye,De,qe){if(this.workerSources[ce]||(this.workerSources[ce]={}),this.workerSources[ce][qe]||(this.workerSources[ce][qe]={}),this.workerSources[ce][qe][ye]||(this.workerSources[ce][qe][ye]={}),this.isSpriteLoaded[ce]||(this.isSpriteLoaded[ce]={}),!this.workerSources[ce][qe][ye][De]){const Ze={send:(Je,xt,ot,bt,qt,Kt)=>{this.actor.send(Je,xt,ot,ce,qt,Kt)},scheduler:this.actor.scheduler};this.workerSources[ce][qe][ye][De]=new this.workerSourceTypes[ye](Ze,this.getLayerIndex(ce,qe),this.getAvailableImages(ce,qe),this.isSpriteLoaded[ce][qe],void 0,this.brightness)}return this.workerSources[ce][qe][ye][De]}getDEMWorkerSource(ce,ye,De){return this.demWorkerSources[ce]||(this.demWorkerSources[ce]={}),this.demWorkerSources[ce][De]||(this.demWorkerSources[ce][De]={}),this.demWorkerSources[ce][De][ye]||(this.demWorkerSources[ce][De][ye]=new v),this.demWorkerSources[ce][De][ye]}enforceCacheSizeLimit(ce,ye){a.dr(ye)}getWorkerPerformanceMetrics(ce,ye,De){De(void 0,void 0)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Ue(self)),Ue}),s(["./shared"],function(a){function h(S,f){if(Array.isArray(S)){if(!Array.isArray(f)||S.length!==f.length)return!1;for(let _=0;_<S.length;_++)if(!h(S[_],f[_]))return!1;return!0}if(typeof S=="object"&&S!==null&&f!==null){if(typeof f!="object"||Object.keys(S).length!==Object.keys(f).length)return!1;for(const _ in S)if(!h(S[_],f[_]))return!1;return!0}return S===f}var p=m;function m(S){return!function(f){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var A,D,L=new Blob([""],{type:"text/javascript"}),B=URL.createObjectURL(L);try{D=new Worker(B),A=!0}catch{A=!1}return D&&D.terminate(),URL.revokeObjectURL(B),A}()?function(){var A=document.createElement("canvas");A.width=A.height=1;var D=A.getContext("2d");if(!D)return!1;var L=D.getImageData(0,0,1,1);return L&&L.width===A.width}()?(v[_=f&&f.failIfMajorPerformanceCaveat]===void 0&&(v[_]=function(A){var D,L=function(B){var N=document.createElement("canvas"),W=Object.create(m.webGLContextAttributes);return W.failIfMajorPerformanceCaveat=B,N.getContext("webgl2",W)}(A);if(!L)return!1;try{D=L.createShader(L.VERTEX_SHADER)}catch{return!1}return!(!D||L.isContextLost())&&(L.shaderSource(D,"void main() {}"),L.compileShader(D),L.getShaderParameter(D,L.COMPILE_STATUS)===!0)}(_)),v[_]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var _}(S)}var v={};function x(S,f,_){const A=document.createElement(S);return f!=null&&(A.className=f),_&&_.appendChild(A),A}function w(S,f,_){const A=document.createElementNS("http://www.w3.org/2000/svg",S);for(const D of Object.keys(f))A.setAttributeNS(null,D,String(f[D]));return _&&_.appendChild(A),A}m.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const T=typeof document!="undefined"?document.documentElement&&document.documentElement.style:null,C=T&&T.userSelect!==void 0?"userSelect":"WebkitUserSelect";let I;function k(){T&&C&&(I=T[C],T[C]="none")}function R(){T&&C&&(T[C]=I)}function z(S){S.preventDefault(),S.stopPropagation(),window.removeEventListener("click",z,!0)}function $(){window.addEventListener("click",z,!0),window.setTimeout(()=>{window.removeEventListener("click",z,!0)},0)}function j(S,f){const _=S.getBoundingClientRect();return Z(S,_,f)}function G(S,f){const _=S.getBoundingClientRect(),A=[];for(let D=0;D<f.length;D++)A.push(Z(S,_,f[D]));return A}function Y(S){return window.InstallTrigger!==void 0&&S.button===2&&S.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:S.button}function Z(S,f,_){const A=S.offsetWidth===f.width?1:S.offsetWidth/f.width;return new a.P((_.clientX-f.left)*A,(_.clientY-f.top)*A)}class H{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(f,_){this._updatedSourceCaches[f]=_,this.setDirty()}discardSourceCacheUpdate(f){delete this._updatedSourceCaches[f]}updateLayer(f){const _=f.scope;this._updatedLayers[_]=this._updatedLayers[_]||new Set,this._updatedLayers[_].add(f.id),this.setDirty()}removeLayer(f){const _=f.scope;this._removedLayers[_]=this._removedLayers[_]||{},this._updatedLayers[_]=this._updatedLayers[_]||new Set,this._removedLayers[_][f.id]=f,this._updatedLayers[_].delete(f.id),this._updatedPaintProps.delete(f.fqid),this.setDirty()}getRemovedLayer(f){return this._removedLayers[f.scope]?this._removedLayers[f.scope][f.id]:null}discardLayerRemoval(f){this._removedLayers[f.scope]&&delete this._removedLayers[f.scope][f.id]}getLayerUpdatesByScope(){const f={};for(const _ in this._updatedLayers)f[_]=f[_]||{},f[_].updatedIds=Array.from(this._updatedLayers[_].values());for(const _ in this._removedLayers)f[_]=f[_]||{},f[_].removedIds=Object.keys(this._removedLayers[_]);return f}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(f){this._updatedPaintProps.add(f.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(f){this._updatedImages.add(f),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}const re={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ne{constructor(f,_,A,D,L,B){this.length=_.length,this.attributes=A,this.itemSize=_.bytesPerElement,this.dynamicDraw=D,this.instanceCount=B,this.context=f;const N=f.gl;this.buffer=N.createBuffer(),f.bindVertexBuffer.set(this.buffer),N.bufferData(N.ARRAY_BUFFER,_.arrayBuffer,this.dynamicDraw?N.DYNAMIC_DRAW:N.STATIC_DRAW),this.dynamicDraw||L||_.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(f){const _=this.context.gl;this.bind(),_.bufferSubData(_.ARRAY_BUFFER,0,f.arrayBuffer)}enableAttributes(f,_){for(let A=0;A<this.attributes.length;A++){const D=_.attributes[this.attributes[A].name];D!==void 0&&f.enableVertexAttribArray(D)}}setVertexAttribPointers(f,_,A){for(let D=0;D<this.attributes.length;D++){const L=this.attributes[D],B=_.attributes[L.name];B!==void 0&&f.vertexAttribPointer(B,L.components,f[re[L.type]],!1,this.itemSize,L.offset+this.itemSize*(A||0))}}setVertexAttribDivisor(f,_,A){for(let D=0;D<this.attributes.length;D++){const L=_.attributes[this.attributes[D].name];L!==void 0&&this.instanceCount&&this.instanceCount>0&&f.vertexAttribDivisor(L,A)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class se{constructor(f){this.gl=f.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(f){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class me extends se{getDefault(){return a.C.transparent}set(f){const _=this.current;(f.r!==_.r||f.g!==_.g||f.b!==_.b||f.a!==_.a||this.dirty)&&(this.gl.clearColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)}}class Se extends se{getDefault(){return 1}set(f){(f!==this.current||this.dirty)&&(this.gl.clearDepth(f),this.current=f,this.dirty=!1)}}class Ie extends se{getDefault(){return 0}set(f){(f!==this.current||this.dirty)&&(this.gl.clearStencil(f),this.current=f,this.dirty=!1)}}class ke extends se{getDefault(){return[!0,!0,!0,!0]}set(f){const _=this.current;(f[0]!==_[0]||f[1]!==_[1]||f[2]!==_[2]||f[3]!==_[3]||this.dirty)&&(this.gl.colorMask(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)}}class Fe extends se{getDefault(){return!0}set(f){(f!==this.current||this.dirty)&&(this.gl.depthMask(f),this.current=f,this.dirty=!1)}}class Ce extends se{getDefault(){return 255}set(f){(f!==this.current||this.dirty)&&(this.gl.stencilMask(f),this.current=f,this.dirty=!1)}}class We extends se{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(f){const _=this.current;(f.func!==_.func||f.ref!==_.ref||f.mask!==_.mask||this.dirty)&&(this.gl.stencilFunc(f.func,f.ref,f.mask),this.current=f,this.dirty=!1)}}class gt extends se{getDefault(){const f=this.gl;return[f.KEEP,f.KEEP,f.KEEP]}set(f){const _=this.current;(f[0]!==_[0]||f[1]!==_[1]||f[2]!==_[2]||this.dirty)&&(this.gl.stencilOp(f[0],f[1],f[2]),this.current=f,this.dirty=!1)}}class St extends se{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;f?_.enable(_.STENCIL_TEST):_.disable(_.STENCIL_TEST),this.current=f,this.dirty=!1}}class et extends se{getDefault(){return[0,1]}set(f){const _=this.current;(f[0]!==_[0]||f[1]!==_[1]||this.dirty)&&(this.gl.depthRange(f[0],f[1]),this.current=f,this.dirty=!1)}}class ht extends se{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;f?_.enable(_.DEPTH_TEST):_.disable(_.DEPTH_TEST),this.current=f,this.dirty=!1}}class $e extends se{getDefault(){return this.gl.LESS}set(f){(f!==this.current||this.dirty)&&(this.gl.depthFunc(f),this.current=f,this.dirty=!1)}}class He extends se{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;f?_.enable(_.BLEND):_.disable(_.BLEND),this.current=f,this.dirty=!1}}class dt extends se{getDefault(){const f=this.gl;return[f.ONE,f.ZERO,f.ONE,f.ZERO]}set(f){const _=this.current;(f[0]!==_[0]||f[1]!==_[1]||f[2]!==_[2]||f[3]!==_[3]||this.dirty)&&(this.gl.blendFuncSeparate(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)}}class nt extends se{getDefault(){return a.C.transparent}set(f){const _=this.current;(f.r!==_.r||f.g!==_.g||f.b!==_.b||f.a!==_.a||this.dirty)&&(this.gl.blendColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)}}class vt extends se{getDefault(){return this.gl.FUNC_ADD}set(f){(f!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(f,f),this.current=f,this.dirty=!1)}}class Pt extends se{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;f?_.enable(_.CULL_FACE):_.disable(_.CULL_FACE),this.current=f,this.dirty=!1}}class jt extends se{getDefault(){return this.gl.BACK}set(f){(f!==this.current||this.dirty)&&(this.gl.cullFace(f),this.current=f,this.dirty=!1)}}class Et extends se{getDefault(){return this.gl.CCW}set(f){(f!==this.current||this.dirty)&&(this.gl.frontFace(f),this.current=f,this.dirty=!1)}}let Wt=class extends se{getDefault(){return null}set(S){(S!==this.current||this.dirty)&&(this.gl.useProgram(S),this.current=S,this.dirty=!1)}};class Re extends se{getDefault(){return this.gl.TEXTURE0}set(f){(f!==this.current||this.dirty)&&(this.gl.activeTexture(f),this.current=f,this.dirty=!1)}}class Ve extends se{getDefault(){const f=this.gl;return[0,0,f.drawingBufferWidth,f.drawingBufferHeight]}set(f){const _=this.current;(f[0]!==_[0]||f[1]!==_[1]||f[2]!==_[2]||f[3]!==_[3]||this.dirty)&&(this.gl.viewport(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)}}class Ue extends se{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,f),this.current=f,this.dirty=!1}}class Be extends se{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;_.bindRenderbuffer(_.RENDERBUFFER,f),this.current=f,this.dirty=!1}}class ce extends se{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;_.bindTexture(_.TEXTURE_2D,f),this.current=f,this.dirty=!1}}class ye extends se{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;_.bindBuffer(_.ARRAY_BUFFER,f),this.current=f,this.dirty=!1}}class De extends se{getDefault(){return null}set(f){const _=this.gl;_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,f),this.current=f,this.dirty=!1}}class qe extends se{getDefault(){return null}set(f){this.gl&&(f!==this.current||this.dirty)&&(this.gl.bindVertexArray(f),this.current=f,this.dirty=!1)}}class Ze extends se{getDefault(){return 4}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_ALIGNMENT,f),this.current=f,this.dirty=!1}}class Je extends se{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,f),this.current=f,this.dirty=!1}}class xt extends se{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,f),this.current=f,this.dirty=!1}}class ot extends se{constructor(f,_){super(f),this.context=f,this.parent=_}getDefault(){return null}}class bt extends ot{setDirty(){this.dirty=!0}set(f){if(f===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const _=this.gl;_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,f,0),this.current=f,this.dirty=!1}}class qt extends ot{attachment(){return this.gl.DEPTH_ATTACHMENT}set(f){if(f===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const _=this.gl;_.framebufferRenderbuffer(_.FRAMEBUFFER,this.attachment(),_.RENDERBUFFER,f),this.current=f,this.dirty=!1}}class Kt extends ot{attachment(){return this.gl.DEPTH_ATTACHMENT}set(f){if(f===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const _=this.gl;_.framebufferTexture2D(_.FRAMEBUFFER,this.attachment(),_.TEXTURE_2D,f,0),this.current=f,this.dirty=!1}}class Cr extends qt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Rr{constructor(f,_,A,D,L){this.context=f,this.width=_,this.height=A;const B=this.framebuffer=f.gl.createFramebuffer();D&&(this.colorAttachment=new bt(f,B)),L&&(this.depthAttachmentType=L,this.depthAttachment=L==="renderbuffer"?new qt(f,B):new Kt(f,B))}destroy(){const f=this.context.gl;if(this.colorAttachment){const _=this.colorAttachment.get();_&&f.deleteTexture(_)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const _=this.depthAttachment.get();_&&f.deleteRenderbuffer(_)}else{const _=this.depthAttachment.get();_&&f.deleteTexture(_)}f.deleteFramebuffer(this.framebuffer)}}class Ur{constructor(f,_){this.gl=f,this.clearColor=new me(this),this.clearDepth=new Se(this),this.clearStencil=new Ie(this),this.colorMask=new ke(this),this.depthMask=new Fe(this),this.stencilMask=new Ce(this),this.stencilFunc=new We(this),this.stencilOp=new gt(this),this.stencilTest=new St(this),this.depthRange=new et(this),this.depthTest=new ht(this),this.depthFunc=new $e(this),this.blend=new He(this),this.blendFunc=new dt(this),this.blendColor=new nt(this),this.blendEquation=new vt(this),this.cullFace=new Pt(this),this.cullFaceSide=new jt(this),this.frontFace=new Et(this),this.program=new Wt(this),this.activeTexture=new Re(this),this.viewport=new Ve(this),this.bindFramebuffer=new Ue(this),this.bindRenderbuffer=new Be(this),this.bindTexture=new ce(this),this.bindVertexBuffer=new ye(this),this.bindElementBuffer=new De(this),this.bindVertexArrayOES=new qe(this),this.pixelStoreUnpack=new Ze(this),this.pixelStoreUnpackPremultiplyAlpha=new Je(this),this.pixelStoreUnpackFlipY=new xt(this),this.options=_?{..._}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("MOZ_EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=f.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=f.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=f.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=f.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=f.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=f.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=f.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=f.getParameter(f.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(f,_,A){return new a.I(this,f,_,A)}createVertexBuffer(f,_,A,D,L){return new ne(this,f,_,A,D,L)}createRenderbuffer(f,_,A){const D=this.gl,L=D.createRenderbuffer();return this.bindRenderbuffer.set(L),D.renderbufferStorage(D.RENDERBUFFER,f,_,A),this.bindRenderbuffer.set(null),L}createFramebuffer(f,_,A,D){return new Rr(this,f,_,A,D)}clear({color:f,depth:_,stencil:A,colorMask:D}){const L=this.gl;let B=0;f&&(B|=L.COLOR_BUFFER_BIT,this.clearColor.set(f),this.colorMask.set(D||[!0,!0,!0,!0])),_!==void 0&&(B|=L.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(_),this.depthMask.set(!0)),A!==void 0&&(B|=L.STENCIL_BUFFER_BIT,this.clearStencil.set(A),this.stencilMask.set(255)),L.clear(B)}setCullFace(f){f.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(f.mode),this.frontFace.set(f.frontFace))}setDepthMode(f){f.func!==this.gl.ALWAYS||f.mask?(this.depthTest.set(!0),this.depthFunc.set(f.func),this.depthMask.set(f.mask),this.depthRange.set(f.range)):this.depthTest.set(!1)}setStencilMode(f){f.test.func!==this.gl.ALWAYS||f.mask?(this.stencilTest.set(!0),this.stencilMask.set(f.mask),this.stencilOp.set([f.fail,f.depthFail,f.pass]),this.stencilFunc.set({func:f.test.func,ref:f.ref,mask:f.test.mask})):this.stencilTest.set(!1)}setColorMode(f){h(f.blendFunction,a.a.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(f.blendFunction),this.blendColor.set(f.blendColor),f.blendEquation?this.blendEquation.set(f.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(f.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}class Kr{constructor(f=0,_=0,A=0,D=0){if(isNaN(f)||f<0||isNaN(_)||_<0||isNaN(A)||A<0||isNaN(D)||D<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=f,this.bottom=_,this.left=A,this.right=D}interpolate(f,_,A){return _.top!=null&&f.top!=null&&(this.top=a.n(f.top,_.top,A)),_.bottom!=null&&f.bottom!=null&&(this.bottom=a.n(f.bottom,_.bottom,A)),_.left!=null&&f.left!=null&&(this.left=a.n(f.left,_.left,A)),_.right!=null&&f.right!=null&&(this.right=a.n(f.right,_.right,A)),this}getCenter(f,_){const A=a.c((this.left+f-this.right)/2,0,f),D=a.c((this.top+_-this.bottom)/2,0,_);return new a.P(A,D)}equals(f){return this.top===f.top&&this.bottom===f.bottom&&this.left===f.left&&this.right===f.right}clone(){return new Kr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ei(S,f){const _=a.g(S,3);a.m.fromQuat(S,f),a.s(S,3,_)}function fi(S,f){const _=a.q.identity([]);return a.q.rotateZ(_,_,-f),a.q.rotateX(_,_,-S),_}function Ti(S,f){const _=[S[0],S[1],0],A=[f[0],f[1],0];if(a.v.length(_)>=1e-15){const B=a.v.normalize([],_);a.v.scale(A,B,a.v.dot(A,B)),f[0]=A[0],f[1]=A[1]}const D=a.v.cross([],f,S);if(a.v.len(D)<1e-15)return null;const L=Math.atan2(-D[1],D[0]);return fi(Math.atan2(Math.sqrt(S[0]*S[0]+S[1]*S[1]),-S[2]),L)}class wn{constructor(f,_){this.position=f,this.orientation=_}get position(){return this._position}set position(f){if(f){const _=f instanceof a.M?f:new a.M(f[0],f[1],f[2]);this._renderWorldCopies&&(_.x=a.w(_.x,0,1)),this._position=_}else this._position=null}lookAtPoint(f,_){if(this.orientation=null,!this.position)return;const A=this.position,D=this._elevation?this._elevation.getAtPointOrZero(a.M.fromLngLat(f)):0,L=a.M.fromLngLat(f,D),B=[L.x-A.x,L.y-A.y,L.z-A.z];_||(_=[0,0,1]),_[2]=Math.abs(_[2]),this.orientation=Ti(B,_)}setPitchBearing(f,_){this.orientation=fi(a.d(f),a.d(-_))}}class Ki{constructor(f,_){this._transform=a.m.identity([]),this.orientation=_,this.position=f}get mercatorPosition(){const f=this.position;return new a.M(f[0],f[1],f[2])}get position(){const f=a.g(this._transform,3);return[f[0],f[1],f[2]]}set position(f){var _;f&&a.s(this._transform,3,[(_=f)[0],_[1],_[2],1])}get orientation(){return this._orientation}set orientation(f){this._orientation=f||a.q.identity([]),f&&ei(this._transform,this._orientation)}getPitchBearing(){const f=this.forward(),_=this.right();return{bearing:Math.atan2(-_[1],_[0]),pitch:Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2])}}setPitchBearing(f,_){this._orientation=fi(f,_),ei(this._transform,this._orientation)}forward(){const f=a.g(this._transform,2);return[-f[0],-f[1],-f[2]]}up(){const f=a.g(this._transform,1);return[-f[0],-f[1],-f[2]]}right(){const f=a.g(this._transform,0);return[f[0],f[1],f[2]]}getCameraToWorld(f,_){const A=new Float64Array(16);return a.m.invert(A,this.getWorldToCamera(f,_)),A}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(f,_,A){const D=this.position;a.v.scale(D,D,-f);const L=new Float64Array(16);return a.m.fromScaling(L,[A,A,A]),a.m.translate(L,L,D),L[10]*=_,L}getWorldToCamera(f,_){const A=new Float64Array(16),D=new Float64Array(4),L=this.position;return a.q.conjugate(D,this._orientation),a.v.scale(L,L,-f),a.m.fromQuat(A,D),a.m.translate(A,A,L),A[1]*=-1,A[5]*=-1,A[9]*=-1,A[13]*=-1,A[8]*=_,A[9]*=_,A[10]*=_,A[11]*=_,A}getCameraToClipPerspective(f,_,A,D){const L=new Float64Array(16);return a.m.perspective(L,f,_,A,D),L}getCameraToClipOrthographic(f,_,A,D,L,B){const N=new Float64Array(16);return a.m.ortho(N,f,_,A,D,L,B),N}getDistanceToElevation(f,_=!1){const A=f===0?0:a.b(f,_?a.l(this.position[1]):this.position[1]),D=this.forward();return(A-this.position[2])/D[2]}clone(){return new Ki([...this.position],[...this.orientation])}}const Ji={unknown:0,flipRequired:1,flipNotRequired:2},za=Math.tan(85*Math.PI/180);function qn(S,f,_,A,D,L,B){const N=a.m.create();if(_)if(L.name==="globe"){const W=a.f(D,f);a.m.multiply(N,N,W)}else{const W=a.h.invert([],B);N[0]=W[0],N[1]=W[1],N[4]=W[2],N[5]=W[3],A||a.m.rotateZ(N,N,D.angle)}else a.m.multiply(N,D.labelPlaneMatrix,S);return N}function Go(S,f,_,A,D,L,B){const N=qn(S,f,_,A,D,L,B);return L.name==="globe"&&_||(N[2]=N[6]=N[10]=N[14]=0),N}function fs(S,f,_,A,D,L,B){if(_){if(L.name==="globe"){const N=qn(S,f,_,A,D,L,B);return a.m.invert(N,N),a.m.multiply(N,S,N),N}{const N=a.m.clone(S),W=a.m.identity([]);return W[0]=B[0],W[1]=B[1],W[4]=B[2],W[5]=B[3],a.m.multiply(N,N,W),A||a.m.rotateZ(N,N,-D.angle),N}}return D.glCoordMatrix}function Zn(S,f,_,A){const D=[S,f,_,1];_?a.e.transformMat4(D,D,A):jr(D,D,A);const L=D[3];return D[0]/=L,D[1]/=L,D[2]/=L,D}function At(S,f){return Math.min(.5+S/f*.5,1.5)}function Lt(S,f){const _=S[0]/S[3],A=S[1]/S[3];return _>=-f[0]&&_<=f[0]&&A>=-f[1]&&A<=f[1]}function Vt(S,f,_,A,D,L,B,N,W,X){const J=_.transform,te=A?S.textSizeData:S.iconSizeData,oe=a.i(te,_.transform.zoom),le=J.projection.name==="globe",de=[256/_.width*2+1,256/_.height*2+1],pe=A?S.text.dynamicLayoutVertexArray:S.icon.dynamicLayoutVertexArray;pe.clear();let fe=null;le&&(fe=A?S.text.globeExtVertexArray:S.icon.globeExtVertexArray);const he=S.lineVertexArray,we=A?S.text.placedSymbolArray:S.icon.placedSymbolArray,Le=_.transform.width/_.transform.height;let Oe,xe=!1;for(let Te=0;Te<we.length;Te++){const ze=we.get(Te),{numGlyphs:je,writingMode:Ne}=ze;if(Ne!==a.W.vertical||xe||Oe===a.W.horizontal||(xe=!0),Oe=Ne,(ze.hidden||Ne===a.W.vertical)&&!xe){Jt(je,pe);continue}xe=!1;const Ye=new a.P(ze.tileAnchorX,ze.tileAnchorY);let{x:Ct,y:ct,z:_t}=J.projection.projectTilePoint(Ye.x,Ye.y,X.canonical);if(W){const[or,br,ur]=W(Ye);Ct+=or,ct+=br,_t+=ur}const tt=[Ct,ct,_t,1];if(a.e.transformMat4(tt,tt,f),!Lt(tt,de)){Jt(je,pe);continue}const Mt=tt[3],pt=At(_.transform.getCameraToCenterDistance(J.projection),Mt),Dt=a.j(te,oe,ze),Ee=B?Dt/pt:Dt*pt,at=Zn(Ct,ct,_t,D);if(at[3]<=0){Jt(je,pe);continue}let Ft={};const Rt=B?null:W,dr=ir(ze,Ee,!1,N,f,D,L,S.glyphOffsetArray,he,pe,fe,at,Ye,Ft,Le,Rt,J.projection,X,B);xe=dr.useVertical,Rt&&dr.needsFlipping&&(Ft={}),(dr.notEnoughRoom||xe||dr.needsFlipping&&ir(ze,Ee,!0,N,f,D,L,S.glyphOffsetArray,he,pe,fe,at,Ye,Ft,Le,Rt,J.projection,X,B).notEnoughRoom)&&Jt(je,pe)}A?(S.text.dynamicLayoutVertexBuffer.updateData(pe),fe&&S.text.globeExtVertexBuffer&&S.text.globeExtVertexBuffer.updateData(fe)):(S.icon.dynamicLayoutVertexBuffer.updateData(pe),fe&&S.icon.globeExtVertexBuffer&&S.icon.globeExtVertexBuffer.updateData(fe))}function Gt(S,f,_,A,D,L,B,N,W,X,J,te,oe,le,de,pe){const{lineStartIndex:fe,glyphStartIndex:he,segment:we}=N,Le=he+N.numGlyphs,Oe=fe+N.lineLength,xe=f.getoffsetX(he),Te=f.getoffsetX(Le-1),ze=pr(S*xe,_,A,D,L,B,we,fe,Oe,W,X,J,te,oe,!0,le,de,pe);if(!ze)return null;const je=pr(S*Te,_,A,D,L,B,we,fe,Oe,W,X,J,te,oe,!0,le,de,pe);return je?{first:ze,last:je}:null}function Xt(S,f,_,A){return S===a.W.horizontal&&Math.abs(A)>Math.abs(_)?{useVertical:!0}:S===a.W.vertical?A>0?{needsFlipping:!0}:null:f!==Ji.unknown&&function(D,L){return D===0||Math.abs(L/D)>za}(_,A)?f===Ji.flipRequired?{needsFlipping:!0}:null:_<0?{needsFlipping:!0}:null}function ir(S,f,_,A,D,L,B,N,W,X,J,te,oe,le,de,pe,fe,he,we){const Le=f/24,Oe=S.lineOffsetX*Le,xe=S.lineOffsetY*Le,{lineStartIndex:Te,glyphStartIndex:ze,numGlyphs:je,segment:Ne,writingMode:Ye,flipState:Ct}=S,ct=Te+S.lineLength,_t=tt=>{if(J){const[Ee,at,Ft]=tt.up,Rt=X.length;a.u(J,Rt+0,Ee,at,Ft),a.u(J,Rt+1,Ee,at,Ft),a.u(J,Rt+2,Ee,at,Ft),a.u(J,Rt+3,Ee,at,Ft)}const[Mt,pt,Dt]=tt.point;a.k(X,Mt,pt,Dt,tt.angle)};if(je>1){const tt=Gt(Le,N,Oe,xe,_,te,oe,S,W,L,le,pe,!1,fe,he,we);if(!tt)return{notEnoughRoom:!0};if(A&&!_){let[Mt,pt,Dt]=tt.first.point,[Ee,at,Ft]=tt.last.point;[Mt,pt]=Zn(Mt,pt,Dt,B),[Ee,at]=Zn(Ee,at,Ft,B);const Rt=Xt(Ye,Ct,(Ee-Mt)*de,at-pt);if(S.flipState=Rt&&Rt.needsFlipping?Ji.flipRequired:Ji.flipNotRequired,Rt)return Rt}_t(tt.first);for(let Mt=ze+1;Mt<ze+je-1;Mt++){const pt=pr(Le*N.getoffsetX(Mt),Oe,xe,_,te,oe,Ne,Te,ct,W,L,le,pe,!1,!1,fe,he,we);if(!pt)return X.length-=4*(Mt-ze),{notEnoughRoom:!0};_t(pt)}_t(tt.last)}else{if(A&&!_){const Mt=Zn(oe.x,oe.y,0,D),pt=Te+Ne+1,Dt=new a.P(W.getx(pt),W.gety(pt)),Ee=Zn(Dt.x,Dt.y,0,D),at=Ee[3]>0?Ee:er(oe,Dt,Mt,1,D,void 0,fe,he.canonical),Ft=Xt(Ye,Ct,(at[0]-Mt[0])*de,at[1]-Mt[1]);if(S.flipState=Ft&&Ft.needsFlipping?Ji.flipRequired:Ji.flipNotRequired,Ft)return Ft}const tt=pr(Le*N.getoffsetX(ze),Oe,xe,_,te,oe,Ne,Te,ct,W,L,le,pe,!1,!1,fe,he,we);if(!tt)return{notEnoughRoom:!0};_t(tt)}return{}}function ar(S,f,_,A,D){const{x:L,y:B,z:N}=A.projectTilePoint(S.x,S.y,f);if(!D)return Zn(L,B,N,_);const[W,X,J]=D(S);return Zn(L+W,B+X,N+J,_)}function er(S,f,_,A,D,L,B,N){const W=ar(S.sub(f)._unit()._add(S),N,D,B,L);return a.v.sub(W,_,W),a.v.normalize(W,W),a.v.scaleAndAdd(W,_,W,A)}function pr(S,f,_,A,D,L,B,N,W,X,J,te,oe,le,de,pe,fe,he){const we=A?S-f:S+f;let Le=we>0?1:-1,Oe=0;A&&(Le*=-1,Oe=Math.PI),Le<0&&(Oe+=Math.PI);let xe=N+B+(Le>0?0:1)|0,Te=D,ze=D,je=0,Ne=0;const Ye=Math.abs(we),Ct=[],ct=[];let _t=L,tt=_t;const Mt=()=>er(tt,_t,ze,Ye-je+1,J,oe,pe,fe.canonical);for(;je+Ne<=Ye;){if(xe+=Le,xe<N||xe>=W)return null;if(ze=Te,tt=_t,Ct.push(ze),le&&ct.push(tt),_t=new a.P(X.getx(xe),X.gety(xe)),Te=te[xe],!Te){const br=ar(_t,fe.canonical,J,pe,oe);Te=br[3]>0?te[xe]=br:Mt()}je+=Ne,Ne=a.v.distance(ze,Te)}de&&oe&&(te[xe]&&(Te=Mt(),Ne=a.v.distance(ze,Te)),te[xe]=Te);const pt=(Ye-je)/Ne,Dt=_t.sub(tt)._mult(pt)._add(tt),Ee=a.v.sub([],Te,ze),at=a.v.scaleAndAdd([],ze,Ee,pt);let Ft=[0,0,1],Rt=Ee[0],dr=Ee[1];if(he&&(Ft=pe.upVector(fe.canonical,Dt.x,Dt.y),Ft[0]!==0||Ft[1]!==0||Ft[2]!==1)){const br=[Ft[2],0,-Ft[0]],ur=a.v.cross([],Ft,br);a.v.normalize(br,br),a.v.normalize(ur,ur),Rt=a.v.dot(Ee,br),dr=a.v.dot(Ee,ur)}if(_){const br=a.v.cross([],Ft,Ee);a.v.normalize(br,br),a.v.scaleAndAdd(at,at,br,_*Le)}const or=Oe+Math.atan2(dr,Rt);return Ct.push(at),le&&ct.push(Dt),{point:at,angle:or,path:Ct,tilePath:ct,up:Ft}}function Jt(S,f){const _=f.length,A=_+4*S;f.resize(A),f.float32.fill(-1/0,4*_,4*A)}function jr(S,f,_){const A=f[0],D=f[1];return S[0]=_[0]*A+_[4]*D+_[12],S[1]=_[1]*A+_[5]*D+_[13],S[3]=_[3]*A+_[7]*D+_[15],S}const Ai=(S,f,_)=>(1-_)*S+_*f,Tr=S=>S*S*S*S*S;class Ri{constructor(f,_,A,D,L,B,N){this.tileSize=512,this._renderWorldCopies=L===void 0||L,this._minZoom=f||0,this._maxZoom=_||22,this._minPitch=A==null?0:A,this._maxPitch=D==null?60:D,this.setProjection(B),this.setMaxBounds(N),this.width=0,this.height=0,this._center=new a.L(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Kr,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Ki,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const f=new Ri(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return f._elevation=this._elevation,f._centerAltitude=this._centerAltitude,f._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,f.tileSize=this.tileSize,f.mercatorFromTransition=this.mercatorFromTransition,f.width=this.width,f.height=this.height,f.cameraElevationReference=this.cameraElevationReference,f._center=this._center,f._setZoom(this.zoom),f._seaLevelZoom=this._seaLevelZoom,f.angle=this.angle,f._fov=this._fov,f._pitch=this._pitch,f._nearZ=this._nearZ,f._farZ=this._farZ,f._averageElevation=this._averageElevation,f._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,f._unmodified=this._unmodified,f._edgeInsets=this._edgeInsets.clone(),f._camera=this._camera.clone(),f._calcMatrices(),f.freezeTileCoverage=this.freezeTileCoverage,f.frustumCorners=this.frustumCorners,f}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(f){this._elevation!==f&&(this._elevation=f,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(f,_=!1){const A=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||A)&&this._updateCameraOnTerrain(),(f||A)&&this._constrainCamera(_),this._calcMatrices()}getProjection(){return a.p(this.projection,["name","center","parallels"])}setProjection(f){this.projectionOptions=f||{name:"mercator"};const _=this.projection?this.getProjection():void 0;this.projection=a.o(this.projectionOptions);const A=!h(_,this.getProjection());return A&&this._calcMatrices(),this.mercatorFromTransition=!1,A}setOrthographicProjectionAtLowPitch(f){return this._orthographicProjectionAtLowPitch!==f&&(this._orthographicProjectionAtLowPitch=f,this._calcMatrices(),!0)}setMercatorFromTransition(){const f=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=a.o({name:"mercator"});const _=f!==this.projection.name;return _&&this._calcMatrices(),_}get minZoom(){return this._minZoom}set minZoom(f){this._minZoom!==f&&(this._minZoom=f,this.zoom=Math.max(this.zoom,f))}get maxZoom(){return this._maxZoom}set maxZoom(f){this._maxZoom!==f&&(this._maxZoom=f,this.zoom=Math.min(this.zoom,f))}get minPitch(){return this._minPitch}set minPitch(f){this._minPitch!==f&&(this._minPitch=f,this.pitch=Math.max(this.pitch,f))}get maxPitch(){return this._maxPitch}set maxPitch(f){this._maxPitch!==f&&(this._maxPitch=f,this.pitch=Math.min(this.pitch,f))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(f){f===void 0?f=!0:f===null&&(f=!1),this._renderWorldCopies=f}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const f=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(f))}get cameraWorldSize(){const f=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(f))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return a.b(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return a.w(this.rotation,-180,180)}set bearing(f){this.rotation=f}get rotation(){return-this.angle/Math.PI*180}set rotation(f){const _=-f*Math.PI/180;this.angle!==_&&(this._unmodified=!1,this.angle=_,this._calcMatrices(),this.rotationMatrix=a.h.create(),a.h.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(f){const _=a.c(f,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==_&&(this._unmodified=!1,this._pitch=_,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const f=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/f)}set fov(f){f=Math.max(.01,Math.min(60,f)),this._fov!==f&&(this._unmodified=!1,this._fov=a.d(f),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(f){this._averageElevation=f,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(f){const _=Math.min(Math.max(f,this.minZoom),this.maxZoom);this._zoom!==_&&(this._unmodified=!1,this._setZoom(_),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(f){this._zoom=f,this.scale=this.zoomScale(f),this.tileZoom=Math.floor(f),this.zoomFraction=f-this.tileZoom}_updateCameraOnTerrain(){const f=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,_=this.elevation&&f===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||f===Number.NEGATIVE_INFINITY&&(!_||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const A=this._elevation;_||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&A.exaggeration()&&this._centerAltitudeValidForExaggeration!==A.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*A.exaggeration(),this._centerAltitudeValidForExaggeration=A.exaggeration()):(this._centerAltitude=f||0,this._centerAltitudeValidForExaggeration=A.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const f=this._elevation,_=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],A=this.horizonLineFromTop();let D=0,L=0;for(let B=0;B<_.length;B++){const N=new a.P(_[B][0]*this.width,A+_[B][1]*(this.height-A)),W=f.pointCoordinate(N);if(!W)continue;const X=1/Math.hypot(W[0]-this._camera.position[0],W[1]-this._camera.position[1]);D+=W[3]*X,L+=X}return L===0?NaN:D/L}get center(){return this._center}set center(f){f.lat===this._center.lat&&f.lng===this._center.lng||(this._unmodified=!1,this._center=f,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const f=this._seaLevelZoom,_=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),A=this.pixelsPerMeter/this.worldSize*_,D=this._mercatorZfromZoom(f),L=this._mercatorZfromZoom(this._maxZoom),B=Math.max(D-A,L);this._setZoom(this._zoomFromMercatorZ(B))}get padding(){return this._edgeInsets.toJSON()}set padding(f){this._edgeInsets.equals(f)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,f,1),this._calcMatrices())}computeZoomRelativeTo(f){const _=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,f.toAltitude()));let A;A=f.z<this._camera.position[2]?[_.x,_.y,_.z]:[f.x,f.y,f.z];const D=a.v.length(a.v.sub([],this._camera.position,A));return a.c(this._zoomFromMercatorZ(D),this._minZoom,this._maxZoom)}setFreeCameraOptions(f){if(!this.height||!f.position&&!f.orientation)return;this._updateCameraState();let _=!1;if(f.orientation&&!a.q.exactEquals(f.orientation,this._camera.orientation)&&(_=this._setCameraOrientation(f.orientation)),f.position){const A=[f.position.x,f.position.y,f.position.z];a.v.exactEquals(A,this._camera.position)||(this._setCameraPosition(A),_=!0)}_&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const f=this._camera.position,_=new wn;return _.position=new a.M(f[0],f[1],f[2]),_.orientation=this._camera.orientation,_._elevation=this.elevation,_._renderWorldCopies=this.renderWorldCopies,_}_setCameraOrientation(f){if(!a.q.length(f))return!1;a.q.normalize(f,f);const _=a.v.transformQuat([],[0,0,-1],f),A=a.v.transformQuat([],[0,-1,0],f);if(A[2]<0)return!1;const D=Ti(_,A);return!!D&&(this._camera.orientation=D,!0)}_setCameraPosition(f){const _=this.zoomScale(this.minZoom)*this.tileSize,A=this.zoomScale(this.maxZoom)*this.tileSize,D=this.cameraToCenterDistance;f[2]=a.c(f[2],D/A,D/_),this._camera.position=f}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(f){return this._edgeInsets.equals(f)}interpolatePadding(f,_,A){this._unmodified=!1,this._edgeInsets.interpolate(f,_,A),this._constrain(),this._calcMatrices()}coveringZoomLevel(f){const _=(f.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/f.tileSize));return Math.max(0,_)}getVisibleUnwrappedCoordinates(f){const _=[new a.U(0,f)];if(this.renderWorldCopies){const A=this.pointCoordinate(new a.P(0,0)),D=this.pointCoordinate(new a.P(this.width,0)),L=this.pointCoordinate(new a.P(this.width,this.height)),B=this.pointCoordinate(new a.P(0,this.height)),N=Math.floor(Math.min(A.x,D.x,L.x,B.x)),W=Math.floor(Math.max(A.x,D.x,L.x,B.x)),X=1;for(let J=N-X;J<=W+X;J++)J!==0&&_.push(new a.U(J,f))}return _}isLODDisabled(f){return(!f||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCoverForShadows(f,_,A){let D=[];if(_[0]===0&&_[1]===0)return D;for(const B of f){const N=B.canonical,W=B.overscaledZ,X=B.wrap,J=1<<N.z,te=N.x+1<J,oe=N.x>0,le=N.y+1<J,de=N.y>0,pe=B.wrap-(oe?0:1),fe=B.wrap+(te?0:1),he=oe?N.x-1:J-1,we=te?N.x+1:0;_[0]<0?(D.push(new a.O(W,fe,N.z,we,N.y)),_[1]<0&&le&&(D.push(new a.O(W,X,N.z,N.x,N.y+1)),D.push(new a.O(W,fe,N.z,we,N.y+1))),_[1]>0&&de&&(D.push(new a.O(W,X,N.z,N.x,N.y-1)),D.push(new a.O(W,fe,N.z,we,N.y-1)))):_[0]>0?(D.push(new a.O(W,pe,N.z,he,N.y)),_[1]<0&&le&&(D.push(new a.O(W,X,N.z,N.x,N.y+1)),D.push(new a.O(W,pe,N.z,he,N.y+1))),_[1]>0&&de&&(D.push(new a.O(W,X,N.z,N.x,N.y-1)),D.push(new a.O(W,pe,N.z,he,N.y-1)))):_[1]<0&&le?D.push(new a.O(W,X,N.z,N.x,N.y+1)):de&&D.push(new a.O(W,X,N.z,N.x,N.y-1))}if(D.length>1){D.sort((W,X)=>W.overscaledZ-X.overscaledZ||W.wrap-X.wrap||W.canonical.z-X.canonical.z||W.canonical.x-X.canonical.x||W.canonical.y-X.canonical.y);let B=0,N=0;for(;N<D.length;)D[N].equals(D[B])?++N:D[++B]=D[N++];D.length=B+1}const L=[];for(const B of D)D.some(N=>B.isChildOf(N))||L.push(B);return D=L.filter(B=>!f.some(N=>!!(B.overscaledZ<A&&N.isChildOf(B))||B.equals(N)||B.isChildOf(N))),D}coveringTiles(f){let _=this.coveringZoomLevel(f);const A=_,D=this.elevation&&this.elevation.exaggeration(),L=D&&!f.isTerrainDEM,B=this.projection.name==="mercator";if(f.minzoom!==void 0&&_<f.minzoom)return[];f.maxzoom!==void 0&&_>f.maxzoom&&(_=f.maxzoom);const N=this.locationCoordinate(this.center),W=this.center.lat,X=1<<_,J=[X*N.x,X*N.y,0],te=this.projection.name==="globe",oe=!te,le=a.F.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,_,oe),de=te?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),pe=X*a.b(1,this.center.lat),fe=this._camera.position[2]/a.b(1,this.center.lat),he=[X*de.x,X*de.y,fe*(oe?1:pe)],we=te||D,Le=this.cameraToCenterDistance/f.tileSize*(f.roundZoom?1:.502),Oe=this.isLODDisabled(!0)?_:0;let xe;if(this._elevation&&f.isTerrainDEM)xe=1e4*this._elevation.exaggeration();else if(this._elevation){const Ee=this._elevation.getMinMaxForVisibleTiles();xe=Ee?Ee.max:this._centerAltitude}else xe=this._centerAltitude;const Te=f.isTerrainDEM?-xe:this._elevation?this._elevation.getMinElevationBelowMSL():0,ze=this.projection.isReprojectedInTileSpace?a.r(this):1,je=Ee=>{const Ft=new a.M(Ee.x+25e-6,Ee.y,Ee.z),Rt=new a.M(Ee.x,Ee.y+25e-6,Ee.z),dr=Ee.toLngLat(),or=Ft.toLngLat(),br=Rt.toLngLat(),ur=this.locationCoordinate(dr),Ir=this.locationCoordinate(or),Er=this.locationCoordinate(br),vr=Math.hypot(Ir.x-ur.x,Ir.y-ur.y),_r=Math.hypot(Er.x-ur.x,Er.y-ur.y);return Math.sqrt(vr*_r)*ze/25e-6},Ne=Ee=>{const at=xe,Ft=Te;return{aabb:a.y(this,X,0,0,0,Ee,Ft,at,this.projection),zoom:0,x:0,y:0,minZ:Ft,maxZ:at,wrap:Ee,fullyVisible:!1}},Ye=[];let Ct=[];const ct=_,_t=f.reparseOverscaled?A:_,tt=Ee=>Ee*Ee,Mt=tt((fe-this._centerAltitude)*pe),pt=Ee=>{if(!this._elevation||!Ee.tileID||!B)return;const at=this._elevation.getMinMaxForTile(Ee.tileID),Ft=Ee.aabb;at?(Ft.min[2]=at.min,Ft.max[2]=at.max,Ft.center[2]=(Ft.min[2]+Ft.max[2])/2):(Ee.shouldSplit=Dt(Ee),Ee.shouldSplit||(Ft.min[2]=Ft.max[2]=Ft.center[2]=this._centerAltitude))},Dt=Ee=>{if(Ee.zoom<Oe)return!0;if(Ee.zoom===ct)return!1;if(Ee.shouldSplit!=null)return Ee.shouldSplit;const at=Ee.aabb.distanceX(he),Ft=Ee.aabb.distanceY(he);let Rt=Mt,dr=1;if(te){Rt=tt(Ee.aabb.distanceZ(he));const ur=Math.pow(2,Ee.zoom),Ir=a.l((Ee.y+1)/ur),Er=a.l(Ee.y/ur),vr=Math.min(Math.max(W,Ir),Er),_r=a.a0(vr)/a.a0(W);if(dr=vr===W?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,_r/this._mercatorScaleRatio),this.zoom<=a.Z&&Ee.zoom===ct-1&&_r>=.9)return!0}else if(L&&(Rt=tt(Ee.aabb.distanceZ(he)*pe)),this.projection.isReprojectedInTileSpace&&A<=5){const ur=Math.pow(2,Ee.zoom),Ir=je(new a.M((Ee.x+.5)/ur,(Ee.y+.5)/ur));dr=Ir>.85?1:Ir}const or=at*at+Ft*Ft+Rt,br=tt((1<<ct-Ee.zoom)*Le*dr*((ur,Ir)=>{if(Ir*tt(.707)<ur)return 1;const Er=Math.sqrt(Ir/ur);return Er/(1.4144271570014144+(Math.pow(1.1,Er-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Rt,Mt),or));return or<br};if(this.renderWorldCopies)for(let Ee=1;Ee<=3;Ee++)Ye.push(Ne(-Ee)),Ye.push(Ne(Ee));for(Ye.push(Ne(0));Ye.length>0;){const Ee=Ye.pop(),at=Ee.x,Ft=Ee.y;let Rt=Ee.fullyVisible;const dr=()=>this.projection.name==="globe"&&(Ee.y===0||Ee.y===(1<<Ee.zoom)-1);if(!Rt){let or=we?Ee.aabb.intersects(le):Ee.aabb.intersectsFlat(le);if(or===0&&dr()){const br=new a.t(Ee.zoom,at,Ft);or=a.x(this,X,br,!0).intersects(le)}if(or===0)continue;Rt=or===2}if(Ee.zoom!==ct&&Dt(Ee))for(let or=0;or<4;or++){const br=(at<<1)+or%2,ur=(Ft<<1)+(or>>1),Ir={aabb:B?Ee.aabb.quadrant(or):a.y(this,X,Ee.zoom+1,br,ur,Ee.wrap,Ee.minZ,Ee.maxZ,this.projection),zoom:Ee.zoom+1,x:br,y:ur,wrap:Ee.wrap,fullyVisible:Rt,tileID:void 0,shouldSplit:void 0,minZ:Ee.minZ,maxZ:Ee.maxZ};L&&!te&&(Ir.tileID=new a.O(Ee.zoom+1===ct?_t:Ee.zoom+1,Ee.wrap,Ee.zoom+1,br,ur),pt(Ir)),Ye.push(Ir)}else{const or=Ee.zoom===ct?_t:Ee.zoom;if(f.minzoom&&f.minzoom>or)continue;if(!Rt){let Er=we?Ee.aabb.intersectsPrecise(le):Ee.aabb.intersectsPreciseFlat(le);if(Er===0&&dr()){const vr=new a.t(Ee.zoom,at,Ft);Er=a.x(this,X,vr,!0).intersectsPrecise(le)}if(Er===0)continue}const br=J[0]-(.5+at+(Ee.wrap<<Ee.zoom))*(1<<_-Ee.zoom),ur=J[1]-.5-Ft,Ir=Ee.tileID?Ee.tileID:new a.O(or,Ee.wrap,Ee.zoom,at,Ft);Ct.push({tileID:Ir,distanceSq:br*br+ur*ur})}}if(this.fogCullDistSq){const Ee=this.fogCullDistSq,at=this.horizonLineFromTop();Ct=Ct.filter(Ft=>{const Rt=[0,0,0,1],dr=[a.J,a.J,0,1],or=this.calculateFogTileMatrix(Ft.tileID.toUnwrapped());a.e.transformMat4(Rt,Rt,or),a.e.transformMat4(dr,dr,or);const br=a.e.min([],Rt,dr),ur=a.e.max([],Rt,dr),Ir=a.z(br,ur);if(Ir===0)return!0;let Er=!1;const vr=this._elevation;if(vr&&Ir>Ee&&at!==0){const _r=this.calculateProjMatrix(Ft.tileID.toUnwrapped());let vi;f.isTerrainDEM||(vi=vr.getMinMaxForTile(Ft.tileID)),vi||(vi={min:Te,max:xe});const Wr=a._(this.rotation),tn=[Wr[0]*a.J,Wr[1]*a.J,vi.max];a.v.transformMat4(tn,tn,_r),Er=(1-tn[1])*this.height*.5<at}return Ir<Ee||Er})}return Ct.sort((Ee,at)=>Ee.distanceSq-at.distanceSq).map(Ee=>Ee.tileID)}resize(f,_){this.width=f,this.height=_,this.pixelsToGLUnits=[2/f,-2/_],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(f){return Math.pow(2,f)}scaleZoom(f){return Math.log(f)/Math.LN2}project(f){const _=a.c(f.lat,-a.A,a.A),A=this.projection.project(f.lng,_);return new a.P(A.x*this.worldSize,A.y*this.worldSize)}unproject(f){return this.projection.unproject(f.x/this.worldSize,f.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/a.b(1,this.center.lat)/this.worldSize}setLocationAtPoint(f,_){let A,D;const L=this.centerPoint;if(this.projection.name==="globe"){const N=this.worldSize;A=(_.x-L.x)/N,D=(_.y-L.y)/N}else{const N=this.pointCoordinate(_),W=this.pointCoordinate(L);A=N.x-W.x,D=N.y-W.y}const B=this.locationCoordinate(f);this.setLocation(new a.M(B.x-A,B.y-D))}setLocation(f){this.center=this.coordinateLocation(f),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(f){return this.projection.locationPoint(this,f)}locationPoint3D(f){return this.projection.locationPoint(this,f,!0)}pointLocation(f){return this.coordinateLocation(this.pointCoordinate(f))}pointLocation3D(f){return this.coordinateLocation(this.pointCoordinate3D(f))}locationCoordinate(f,_){const A=_?a.b(_,f.lat):void 0,D=this.projection.project(f.lng,f.lat);return new a.M(D.x,D.y,A)}coordinateLocation(f){return this.projection.unproject(f.x,f.y)}pointRayIntersection(f,_){const A=_!=null?_:this._centerAltitude,D=[f.x,f.y,0,1],L=[f.x,f.y,1,1];a.e.transformMat4(D,D,this.pixelMatrixInverse),a.e.transformMat4(L,L,this.pixelMatrixInverse);const B=L[3];a.e.scale(D,D,1/D[3]),a.e.scale(L,L,1/B);const N=D[2],W=L[2];return{p0:D,p1:L,t:N===W?0:(A-N)/(W-N)}}screenPointToMercatorRay(f){const _=[f.x,f.y,0,1],A=[f.x,f.y,1,1];return a.e.transformMat4(_,_,this.pixelMatrixInverse),a.e.transformMat4(A,A,this.pixelMatrixInverse),a.e.scale(_,_,1/_[3]),a.e.scale(A,A,1/A[3]),_[2]=a.b(_[2],this._center.lat)*this.worldSize,A[2]=a.b(A[2],this._center.lat)*this.worldSize,a.e.scale(_,_,1/this.worldSize),a.e.scale(A,A,1/this.worldSize),new a.R([_[0],_[1],_[2]],a.v.normalize([],a.v.sub([],A,_)))}rayIntersectionCoordinate(f){const{p0:_,p1:A,t:D}=f,L=a.b(_[2],this._center.lat),B=a.b(A[2],this._center.lat);return new a.M(a.n(_[0],A[0],D)/this.worldSize,a.n(_[1],A[1],D)/this.worldSize,a.n(L,B,D))}pointCoordinate(f,_=this._centerAltitude){return this.projection.pointCoordinate(this,f.x,f.y,_)}pointCoordinate3D(f){if(!this.elevation)return this.pointCoordinate(f);let _=this.projection.pointCoordinate3D(this,f.x,f.y);if(_)return new a.M(_[0],_[1],_[2]);let A=0,D=this.horizonLineFromTop();if(f.y>D)return this.pointCoordinate(f);const L=.02*D,B=f.clone();for(let N=0;N<10&&D-A>L;N++){B.y=a.n(A,D,.66);const W=this.projection.pointCoordinate3D(this,B.x,B.y);W?(D=B.y,_=W):A=B.y}return _?new a.M(_[0],_[1],_[2]):this.pointCoordinate(f)}isPointAboveHorizon(f){return this.projection.isPointAboveHorizon(this,f)}isPointOnSurface(f){if(f.y<0||f.y>this.height||f.x<0||f.x>this.width)return!1;if(this.elevation||this.zoom>=a.G)return!this.isPointAboveHorizon(f);const _=this.pointCoordinate(f);return _.y>=0&&_.y<=1}_coordinatePoint(f,_){const A=_&&this.elevation?this.elevation.getAtPointOrZero(f,this._centerAltitude):this._centerAltitude,D=[f.x*this.worldSize,f.y*this.worldSize,A+f.toAltitude(),1];return a.e.transformMat4(D,D,this.pixelMatrix),D[3]>0?new a.P(D[0]/D[3],D[1]/D[3]):new a.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:f,left:_}=this._edgeInsets,A=this.height-this._edgeInsets.bottom,D=this.width-this._edgeInsets.right,L=this.pointLocation3D(new a.P(_,f)),B=this.pointLocation3D(new a.P(D,f)),N=this.pointLocation3D(new a.P(D,A)),W=this.pointLocation3D(new a.P(_,A));let X=Math.min(L.lng,B.lng,N.lng,W.lng),J=Math.max(L.lng,B.lng,N.lng,W.lng),te=Math.min(L.lat,B.lat,N.lat,W.lat),oe=Math.max(L.lat,B.lat,N.lat,W.lat);const le=Math.pow(2,-this.zoom)/16*270,de=this.projection.name==="globe"?1:4,pe=(fe,he,we,Le,Oe)=>{const xe=(fe+we)/2,Te=(he+Le)/2,ze=new a.P(xe,Te),{lng:je,lat:Ne}=this.pointLocation3D(ze),Ye=Math.max(0,X-je,te-Ne,je-J,Ne-oe);X=Math.min(X,je),J=Math.max(J,je),te=Math.min(te,Ne),oe=Math.max(oe,Ne),(Oe<de||Ye>le)&&(pe(fe,he,xe,Te,Oe+1),pe(xe,Te,we,Le,Oe+1))};if(pe(_,f,D,f,1),pe(D,f,D,A,1),pe(D,A,_,A,1),pe(_,A,_,f,1),this.projection.name==="globe"){const[fe,he]=a.B(this);fe?(oe=90,J=180,X=-180):he&&(te=-90,J=180,X=-180)}return new a.D(new a.L(X,te),new a.L(J,oe))}_getBoundsRectangular(f,_){const{top:A,left:D}=this._edgeInsets,L=this.height-this._edgeInsets.bottom,B=this.width-this._edgeInsets.right,N=new a.P(D,A),W=new a.P(B,A),X=new a.P(B,L),J=new a.P(D,L);let te=this.pointCoordinate(N,f),oe=this.pointCoordinate(W,f);const le=this.pointCoordinate(X,_),de=this.pointCoordinate(J,_),pe=(fe,he)=>(he.y-fe.y)/(he.x-fe.x);return te.y>1&&oe.y>=0?te=new a.M((1-de.y)/pe(de,te)+de.x,1):te.y<0&&oe.y<=1&&(te=new a.M(-de.y/pe(de,te)+de.x,0)),oe.y>1&&te.y>=0?oe=new a.M((1-le.y)/pe(le,oe)+le.x,1):oe.y<0&&te.y<=1&&(oe=new a.M(-le.y/pe(le,oe)+le.x,0)),new a.D().extend(this.coordinateLocation(te)).extend(this.coordinateLocation(oe)).extend(this.coordinateLocation(de)).extend(this.coordinateLocation(le))}_getBoundsRectangularTerrain(){const f=this.elevation;if(!f.visibleDemTiles.length||f.isUsingMockSource())return this._getBoundsRectangular(0,0);const _=f.visibleDemTiles.reduce((A,D)=>{if(D.dem){const L=D.dem.tree;A.min=Math.min(A.min,L.minimums[0]),A.max=Math.max(A.max,L.maximums[0])}return A},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(_.min*f.exaggeration(),_.max*f.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(f=!0){const _=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,A=this.height/2-_*(1-this._horizonShift);return f?Math.max(0,A):A}getMaxBounds(){return this.maxBounds}setMaxBounds(f){this.maxBounds=f,this.minLat=-a.A,this.maxLat=a.A,this.minLng=-180,this.maxLng=180,f&&(this.minLat=f.getSouth(),this.maxLat=f.getNorth(),this.minLng=f.getWest(),this.maxLng=f.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=a.E(this.minLng)*this.tileSize,this.worldMaxX=a.E(this.maxLng)*this.tileSize,this.worldMinY=a.H(this.maxLat)*this.tileSize,this.worldMaxY=a.H(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(f,_){return this.projection.createTileMatrix(this,_,f)}calculateDistanceTileData(f){const _=f.key,A=this._distanceTileDataCache;if(A[_])return A[_];const D=f.canonical,L=1/this.height,B=this.cameraWorldSize,N=B/this.zoomScale(D.z),W=(D.x+Math.pow(2,D.z)*f.wrap)*N,X=D.y*N,J=this.point;J.x*=B/this.worldSize,J.y*=B/this.worldSize;const te=this.angle,oe=Math.sin(-te),le=-Math.cos(-te);return A[_]={bearing:[oe,le],center:[(J.x-W)*L,(J.y-X)*L],scale:N/a.J*L},A[_]}calculateFogTileMatrix(f){const _=f.key,A=this._fogTileMatrixCache;if(A[_])return A[_];const D=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,f);return a.m.multiply(D,this.worldToFogMatrix,D),A[_]=new Float32Array(D),A[_]}calculateProjMatrix(f,_=!1,A=!1){const D=f.key;let L;if(L=A?this._expandedProjMatrixCache:_?this._alignedProjMatrixCache:this._projMatrixCache,L[D])return L[D];const B=this.calculatePosMatrix(f,this.worldSize);let N;return N=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:A?this.expandedFarZProjMatrix:_?this.alignedProjMatrix:this.projMatrix,a.m.multiply(B,N,B),L[D]=new Float32Array(B),L[D]}calculatePixelsToTileUnitsMatrix(f){const _=f.tileID.key,A=this._pixelsToTileUnitsCache;if(A[_])return A[_];const D=a.K(f,this);return A[_]=D,A[_]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const f=1/this.worldSize,_=a.m.fromScaling([],[f,f,f]);return a.m.multiply(_,_,this.globeMatrix),_}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const f=this._elevation;this._updateCameraState();const _=a.b(1,this._center.lat)*this.worldSize,A=this._computeCameraPosition(_),D=this._camera.forward(),L=a.b(1,this._center.lat);A[2]/=L,D[2]/=L,a.v.normalize(D,D);const B=f.raycast(A,D,f.exaggeration());if(B){const N=a.v.scaleAndAdd([],A,D,B),W=new a.M(N[0],N[1],a.b(N[2],a.l(N[1]))),X=(W.z+a.v.length([W.x-A[0],W.y-A[1],W.z-A[2]*L]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(X),this._centerAltitude=W.toAltitude(),this._center=this.coordinateLocation(W),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(f=!1){if(!this._elevation)return;const _=this._elevation,A=a.b(1,this._center.lat)*this.worldSize,D=this._computeCameraPosition(A),L=_.getAtPointOrZero(new a.M(...D)),B=this.pixelsPerMeter/this.worldSize*L,N=this._minimumHeightOverTerrain(),W=D[2]-B;if(W<=N)if(W<0||f){const X=this.locationCoordinate(this._center,this._centerAltitude),J=[D[0],D[1],X.z-D[2]],te=a.v.length(J);J[2]-=(N-W)/this._pixelsPerMercatorPixel;const oe=a.v.length(J);if(oe===0)return;a.v.scale(J,J,te/oe*this._pixelsPerMercatorPixel),this._camera.position=[D[0],D[1],X.z*this._pixelsPerMercatorPixel-J[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const f=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||f){const oe=this.center;return oe.lat=a.c(oe.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!f)&&(oe.lng=a.c(oe.lng,this.minLng,this.maxLng)),this.center=oe,void(this._constraining=!1)}const _=this._unmodified,{x:A,y:D}=this.point;let L=0,B=A,N=D;const W=this.width/2,X=this.height/2,J=this.worldMinY*this.scale,te=this.worldMaxY*this.scale;if(D-X<J&&(N=J+X),D+X>te&&(N=te-X),te-J<this.height&&(L=Math.max(L,this.height/(te-J)),N=(te+J)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const oe=this.worldMinX*this.scale,le=this.worldMaxX*this.scale,de=this.worldSize/2-(oe+le)/2;B=(A+de+this.worldSize)%this.worldSize-de,B-W<oe&&(B=oe+W),B+W>le&&(B=le-W),le-oe<this.width&&(L=Math.max(L,this.width/(le-oe)),B=(le+oe)/2)}B===A&&N===D||(this.center=this.unproject(new a.P(B,N))),L&&(this.zoom+=this.scaleZoom(L)),this._constrainCamera(),this._unmodified=_,this._constraining=!1}_minZoomForBounds(){let f=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(f=Math.max(f,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),f}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const f=this.centerOffset,_=this.projection.name==="globe",A=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=a.b(1,this.center.lat)/a.b(1,a.$));const D=a.N(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,D),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const L=this.projection.zAxisUnit==="meters"?A:1,B=this._camera.getWorldToCamera(this.worldSize,L);let N;const W=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(W[8]=2*-f.x/this.width,W[9]=2*f.y/this.height,this.isOrthographic){let Ne=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Ye=Ne*this.aspect,Ct=-Ye,ct=-Ne;Ye-=f.x,Ct-=f.x,Ne+=f.y,ct+=f.y,N=this._camera.getCameraToClipOrthographic(Ct,Ye,ct,Ne,this._nearZ,this._farZ),((_t,tt,Mt,pt)=>{for(let Dt=0;Dt<16;Dt++)_t[Dt]=Ai(tt[Dt],Mt[Dt],pt)})(N,N,W,Tr(this.pitch>=15?1:this.pitch/15))}else N=W;const X=a.m.mul([],W,B);let J=a.m.mul([],N,B);if(this.projection.isReprojectedInTileSpace){const Ne=this.locationCoordinate(this.center),Ye=a.m.identity([]);a.m.translate(Ye,Ye,[Ne.x*this.worldSize,Ne.y*this.worldSize,0]),a.m.multiply(Ye,Ye,a.Q(this)),a.m.translate(Ye,Ye,[-Ne.x*this.worldSize,-Ne.y*this.worldSize,0]),a.m.multiply(J,J,Ye),a.m.multiply(X,X,Ye),this.inverseAdjustmentMatrix=a.S(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=a.m.scale([],J,[this.worldSize,this.worldSize,this.worldSize/L,1]),this.projMatrix=J,this.invProjMatrix=a.m.invert(new Float64Array(16),this.projMatrix),_){const Ne=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Ne[8]=2*-f.x/this.width,Ne[9]=2*f.y/this.height,this.expandedFarZProjMatrix=a.m.mul([],Ne,B)}else this.expandedFarZProjMatrix=this.projMatrix;const te=a.m.invert([],N);this.frustumCorners=a.T.fromInvProjectionMatrix(te,this.horizonLineFromTop(),this.height),this.cameraFrustum=a.F.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!_);const oe=new Float32Array(16);a.m.identity(oe),a.m.scale(oe,oe,[1,-1,1]),a.m.rotateX(oe,oe,this._pitch),a.m.rotateZ(oe,oe,this.angle);const le=a.m.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=a.m.clone(le);const de=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;le[8]=2*-f.x/this.width,le[9]=2*(f.y+de)/this.height,this.skyboxMatrix=a.m.multiply(oe,le,oe);const pe=this.point,fe=pe.x,he=pe.y,we=this.width%2/2,Le=this.height%2/2,Oe=Math.cos(this.angle),xe=Math.sin(this.angle),Te=fe-Math.round(fe)+Oe*we+xe*Le,ze=he-Math.round(he)+Oe*Le+xe*we,je=new Float64Array(J);if(a.m.translate(je,je,[Te>.5?Te-1:Te,ze>.5?ze-1:ze,0]),this.alignedProjMatrix=je,J=a.m.create(),a.m.scale(J,J,[this.width/2,-this.height/2,1]),a.m.translate(J,J,[1,-1,0]),this.labelPlaneMatrix=J,J=a.m.create(),a.m.scale(J,J,[1,-1,1]),a.m.translate(J,J,[-1,-1,0]),a.m.scale(J,J,[2/this.width,2/this.height,1]),this.glCoordMatrix=J,this.pixelMatrix=a.m.multiply(new Float64Array(16),this.labelPlaneMatrix,X),this._calcFogMatrices(),this._distanceTileDataCache={},J=a.m.invert(new Float64Array(16),this.pixelMatrix),!J)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=J,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=a.V(this);const Ne=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=a.v.transformMat4(Ne,Ne,B),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=J;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const f=this.cameraWorldSizeForFog,_=this.cameraPixelsPerMeter,A=this._camera.position,D=1/this.height/this._pixelsPerMercatorPixel,L=[f,f,_];a.v.scale(L,L,D),a.v.scale(A,A,-1),a.v.multiply(A,A,L);const B=a.m.create();a.m.translate(B,B,A),a.m.scale(B,B,L),this.mercatorFogMatrix=B,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(f,_,D)}_computeCameraPosition(f){const _=(f=f||this.pixelsPerMeter)/this.pixelsPerMeter,A=this._camera.forward(),D=this.point,L=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*_-f/this.worldSize*this._centerAltitude;return[D.x/this.worldSize-A[0]*L,D.y/this.worldSize-A[1]*L,f/this.worldSize*this._centerAltitude-A[2]*L]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(f){const _=this._maxCameraBoundsDistance()*Math.cos(this._pitch),A=this._camera.position[2],D=f[2];let L=1;this.projection.wrap&&(this.center=this.center.wrap()),D>0&&(L=Math.min((_-A)/D,1)),this._camera.position=a.v.scaleAndAdd([],this._camera.position,f,L),this._updateStateFromCamera()}_updateStateFromCamera(){const f=this._camera.position,_=this._camera.forward(),{pitch:A,bearing:D}=this._camera.getPitchBearing(),L=a.b(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,B=this._mercatorZfromZoom(this._maxZoom)*Math.cos(a.d(this._maxPitch)),N=Math.max((f[2]-L)/Math.cos(A),B),W=this._zoomFromMercatorZ(N);a.v.scaleAndAdd(f,f,_,N),this._pitch=a.c(A,a.d(this.minPitch),a.d(this.maxPitch)),this.angle=a.w(D,-Math.PI,Math.PI),this._setZoom(a.c(W,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new a.M(f[0],f[1],f[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(f){return Math.pow(2,f)*this.tileSize}_mercatorZfromZoom(f){return this.cameraToCenterDistance/this._worldSizeFromZoom(f)}_minimumHeightOverTerrain(){const f=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(f)}_zoomFromMercatorZ(f){return this.scaleZoom(this.cameraToCenterDistance/(f*this.tileSize))}zoomFromMercatorZAdjusted(f){let _=0,A=a.G,D=0,L=1/0;for(;A-_>1e-6&&A>_;){const B=_+.5*(A-_),N=this.tileSize*Math.pow(2,B),W=this.getCameraToCenterDistance(this.projection,B,N),X=this.scaleZoom(W/(f*this.tileSize)),J=Math.abs(B-X);J<L&&(L=J,D=B),B<X?_=B:A=B}return D}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(a.X("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(f,_){const A=Math.min(f.x,_.x),D=Math.max(f.x,_.x),L=Math.min(f.y,_.y),B=Math.max(f.y,_.y);if(L<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const N=[new a.P(A,L),new a.P(D,B),new a.P(A,B),new a.P(D,L)],W=this.renderWorldCopies?-3:0,X=this.renderWorldCopies?4:1;for(const J of N){const te=this.pointRayIntersection(J);if(te.t<0)return!0;const oe=this.rayIntersectionCoordinate(te);if(oe.x<W||oe.y<0||oe.x>X||oe.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+a.Y(this.fovAboveCenter)>88||this.anyCornerOffEdge(new a.P(0,0),new a.P(this.width,this.height))}zoomDeltaToMovement(f,_){const A=a.v.length(a.v.sub([],this._camera.position,f)),D=this._zoomFromMercatorZ(A)+_;return A-this._mercatorZfromZoom(D)}getCameraPoint(){if(this.projection.name==="globe"){const f=function([_,A,D],L){const B=[_,A,D,1];a.e.transformMat4(B,B,L);const N=B[3]=Math.max(B[3],1e-6);return B[0]/=N,B[1]/=N,B[2]/=N,B}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new a.P(f[0],f[1])}{const f=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,f))}}getCameraToCenterDistance(f,_=this.zoom,A=this.worldSize){const D=a.N(f,_,this.width,this.height,1024),L=f.pixelSpaceConversion(this.center.lat,A,D);let B=.5/Math.tan(.5*this._fov)*this.height*L;return this.isOrthographic&&(B=Ai(1,B,Tr(this.pitch>=15?1:this.pitch/15))),B}getWorldToCameraMatrix(){const f=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&a.m.multiply(f,f,this.globeMatrix),f}getFrustum(f){return a.F.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f,this.projection.zAxisUnit==="meters")}}function Ci(S){const{userImage:f}=S;return!!(f&&f.render&&f.render())&&(S.data.replace(new Uint8Array(f.data.buffer)),!0)}class vn extends a.a6{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(f){this.images[f]={},this.loaded[f]=!1,this.updatedImages[f]={},this.patterns[f]={},this.callbackDispatchedThisFrame[f]={},this.atlasImage[f]=new a.a5({width:1,height:1})}isLoaded(){for(const f in this.loaded)if(!this.loaded[f])return!1;return!0}setLoaded(f,_){if(this.loaded[_]!==f&&(this.loaded[_]=f,f)){for(const{ids:A,callback:D}of this.requestors)this._notify(A,_,D);this.requestors=[]}}hasImage(f,_){return!!this.getImage(f,_)}getImage(f,_){return this.images[_][f]}addImage(f,_,A){this._validate(f,A)&&(this.images[_][f]=A)}_validate(f,_){let A=!0;return this._validateStretch(_.stretchX,_.data&&_.data.width)||(this.fire(new a.a7(new Error(`Image "${f}" has invalid "stretchX" value`))),A=!1),this._validateStretch(_.stretchY,_.data&&_.data.height)||(this.fire(new a.a7(new Error(`Image "${f}" has invalid "stretchY" value`))),A=!1),this._validateContent(_.content,_)||(this.fire(new a.a7(new Error(`Image "${f}" has invalid "content" value`))),A=!1),A}_validateStretch(f,_){if(!f)return!0;let A=0;for(const D of f){if(D[0]<A||D[1]<D[0]||_<D[1])return!1;A=D[1]}return!0}_validateContent(f,_){return!(f&&(f.length!==4||f[0]<0||_.data.width<f[0]||f[1]<0||_.data.height<f[1]||f[2]<0||_.data.width<f[2]||f[3]<0||_.data.height<f[3]||f[2]<f[0]||f[3]<f[1]))}updateImage(f,_,A){A.version=this.images[_][f].version+1,this.images[_][f]=A,this.updatedImages[_][f]=!0}removeImage(f,_){const A=this.images[_][f];delete this.images[_][f],delete this.patterns[_][f],A.userImage&&A.userImage.onRemove&&A.userImage.onRemove()}listImages(f){return Object.keys(this.images[f])}getImages(f,_,A){let D=!0;const L=!!this.loaded[_];if(!L)for(const B of f)this.images[_][B]||(D=!1);L||D?this._notify(f,_,A):this.requestors.push({ids:f,scope:_,callback:A})}getUpdatedImages(f){return this.updatedImages[f]}_notify(f,_,A){const D={};for(const L of f){this.images[_][L]||this.fire(new a.a8("styleimagemissing",{id:L}));const B=this.images[_][L];B?D[L]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:Boolean(B.userImage&&B.userImage.render)}:a.X(`Image "${L}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}A(null,D)}getPixelSize(f){const{width:_,height:A}=this.atlasImage[f];return{width:_,height:A}}getPattern(f,_){const A=this.patterns[_][f],D=this.getImage(f,_);if(!D)return null;if(A&&A.position.version===D.version)return A.position;if(A)A.position.version=D.version;else{const L={w:D.data.width+2,h:D.data.height+2,x:0,y:0},B=new a.ab(L,D);this.patterns[_][f]={bin:L,position:B}}return this._updatePatternAtlas(_),this.patterns[_][f].position}bind(f,_){const A=f.gl;let D=this.atlasTexture[_];D?this.dirty&&(D.update(this.atlasImage[_]),this.dirty=!1):(D=new a.a9(f,this.atlasImage[_],A.RGBA),this.atlasTexture[_]=D),D.bind(A.LINEAR,A.CLAMP_TO_EDGE)}_updatePatternAtlas(f){const _=[];for(const B in this.patterns[f])_.push(this.patterns[f][B].bin);const{w:A,h:D}=a.aa(_),L=this.atlasImage[f];L.resize({width:A||1,height:D||1});for(const B in this.patterns[f]){const{bin:N}=this.patterns[f][B],W=N.x+1,X=N.y+1,J=this.images[f][B].data,te=J.width,oe=J.height;a.a5.copy(J,L,{x:0,y:0},{x:W,y:X},{width:te,height:oe}),a.a5.copy(J,L,{x:0,y:oe-1},{x:W,y:X-1},{width:te,height:1}),a.a5.copy(J,L,{x:0,y:0},{x:W,y:X+oe},{width:te,height:1}),a.a5.copy(J,L,{x:te-1,y:0},{x:W-1,y:X},{width:1,height:oe}),a.a5.copy(J,L,{x:0,y:0},{x:W+te,y:X},{width:1,height:oe})}this.dirty=!0}beginFrame(){for(const f in this.images)this.callbackDispatchedThisFrame[f]={}}dispatchRenderCallbacks(f,_){for(const A of f){if(this.callbackDispatchedThisFrame[_][A])continue;this.callbackDispatchedThisFrame[_][A]=!0;const D=this.images[_][A];Ci(D)&&this.updateImage(A,_,D)}}}const In=new a.ac({anchor:new a.ad(a.ae.light.anchor),position:new a.af(a.ae.light.position),color:new a.ad(a.ae.light.color),intensity:new a.ad(a.ae.light.intensity)});class Qn extends a.a6{constructor(f,_="flat"){super(),this._transitionable=new a.ag(In),this.setLight(f,_),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(f,_,A={}){this._validate(a.ah,f,A)||(this._transitionable.setTransitionOrValue(f),this.id=_)}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}_validate(f,_,A){return(!A||A.validate!==!1)&&a.ai(this,f.call(a.aj,a.ak({value:_,style:{glyphs:!0,sprite:!0},styleSpec:a.ae})))}}const ja=new a.ac({source:new a.ad(a.ae.terrain.source),exaggeration:new a.ad(a.ae.terrain.exaggeration)});let no=class extends a.a6{constructor(S,f,_,A){super(),this.scope=_,this._transitionable=new a.ag(ja,_,A),this._transitionable.setTransitionOrValue(S,A),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=f}get(){return this._transitionable.serialize()}set(S,f){this._transitionable.setTransitionOrValue(S,f)}updateTransitions(S){this._transitioning=this._transitionable.transitioned(S,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(S){this.properties=this._transitioning.possiblyEvaluate(S)}getExaggeration(S){return this._transitioning.possiblyEvaluate(new a.al(S)).get("exaggeration")}isZoomDependent(){const S=this._transitionable._values.exaggeration;return S!=null&&S.value!=null&&S.value.expression!=null&&S.value.expression instanceof a.am}};const Ba=45,ia=65,Sa=.05;function ps(S,f,_,A){const D=a.an(Ba,ia,_),[L,B]=uu(S,A);let N=1-Math.min(1,Math.exp((f-L)/(B-L)*-6));return N*=N*N,N=Math.min(1,1.00747*N),N*D*S.alpha}function uu(S,f){const _=.5/Math.tan(.5*f);return[S.range[0]+_,S.range[1]+_]}function _h(S,f,_,A,D){const L=a.v.transformMat4([],[f,_,A],D.mercatorFogMatrix);return ps(S,a.v.length(L),D.pitch,D._fov)}function cc(S,f,_,A,D,L,B){const N=[[_,A,0],[D,A,0],[D,L,0],[_,L,0]];let W=Number.MAX_VALUE,X=-Number.MAX_VALUE;for(const J of N){const te=a.v.transformMat4([],J,f),oe=a.v.length(te);W=Math.min(W,oe),X=Math.max(X,oe)}return[ps(S,W,B.pitch,B._fov),ps(S,X,B.pitch,B._fov)]}const hc=new a.ac({range:new a.ad(a.ae.fog.range),color:new a.ad(a.ae.fog.color),"high-color":new a.ad(a.ae.fog["high-color"]),"space-color":new a.ad(a.ae.fog["space-color"]),"horizon-blend":new a.ad(a.ae.fog["horizon-blend"]),"star-intensity":new a.ad(a.ae.fog["star-intensity"]),"vertical-range":new a.ad(a.ae.fog["vertical-range"])});class yh extends a.a6{constructor(f,_){super(),this._transitionable=new a.ag(hc),this.set(f),this._transitioning=this._transitionable.untransitioned(),this._transform=_}get state(){const f=this._transform,_=f.projection.name==="globe",A=a.ao(f.zoom),D=this.properties.get("range"),L=[.5,3];return{range:_?[a.n(L[0],D[0],A),a.n(L[1],D[1],A)]:D,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(f,_={}){if(this._validate(a.ap,f,_))return;const A=a.ak({},f);for(const D of Object.keys(a.ae.fog))A[D]===void 0&&(A[D]=a.ae.fog[D].default);this._transitionable.setTransitionOrValue(A)}getOpacity(f){if(!this._transform.projection.supportsFog)return 0;const _=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:a.an(Ba,ia,f))*_.a}getOpacityAtLatLng(f,_){return this._transform.projection.supportsFog?function(A,D,L){const B=a.M.fromLngLat(D),N=L.elevation?L.elevation.getAtPointOrZero(B):0;return _h(A,B.x,B.y,N,L)}(this.state,f,_):0}getOpacityForTile(f){if(!this._transform.projection.supportsFog)return[1,1];const _=this._transform.calculateFogTileMatrix(f.toUnwrapped());return cc(this.state,_,0,0,a.J,a.J,this._transform)}getOpacityForBounds(f,_,A,D,L){return this._transform.projection.supportsFog?cc(this.state,f,_,A,D,L,this._transform):[1,1]}getFovAdjustedRange(f){return this._transform.projection.supportsFog?uu(this.state,f):[0,1]}isVisibleOnFrustum(f){if(!this._transform.projection.supportsFog)return!1;const _=[4,5,6,7];for(const A of _){const D=f.points[A];let L;if(D[2]>=0)L=D;else{const B=f.points[A-4];L=a.aq(B,D,B[2]/(B[2]-D[2]))}if(_h(this.state,L[0],L[1],0,this._transform)>=Sa)return!0}return!1}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}_validate(f,_,A){return(!A||A.validate!==!1)&&a.ai(this,f.call(a.aj,a.ak({value:_,style:{glyphs:!0,sprite:!0},styleSpec:a.ae})))}}class cu extends a.a6{constructor(f,_,A,D){super(),this.scope=A,this._options=f,this.properties=new a.ar(_),this._transitionable=new a.ag(_,A,new Map(D)),this._transitionable.setTransitionOrValue(f.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(f){this._transitionable.setTransitionOrValue(this._options.properties,new Map(f))}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(f,_){this._options=f,this._transitionable.setTransitionOrValue(f.properties,_)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}const Ns=new a.ac({color:new a.ad(a.ae.properties_light_ambient.color),intensity:new a.ad(a.ae.properties_light_ambient.intensity)}),sm=new a.ac({direction:new a.as(a.ae.properties_light_directional.direction),color:new a.ad(a.ae.properties_light_directional.color),intensity:new a.ad(a.ae.properties_light_directional.intensity),"cast-shadows":new a.ad(a.ae.properties_light_directional["cast-shadows"]),"shadow-intensity":new a.ad(a.ae.properties_light_directional["shadow-intensity"])});class ma{constructor(f,_,A,D){this.screenBounds=f,this.cameraPoint=_,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=A,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,D)}static createFromScreenPoints(f,_){let A,D;if(f instanceof a.P||typeof f[0]=="number"){const L=a.P.convert(f);A=[L],D=_.isPointAboveHorizon(L)}else{const L=a.P.convert(f[0]),B=a.P.convert(f[1]);A=[L,B],D=a.at(L,B).every(N=>_.isPointAboveHorizon(N))}return new ma(A,_.getCameraPoint(),D,_)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(f){return a.at(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],f)}bufferedCameraGeometry(f){const _=this.screenBounds[0],A=this.screenBounds.length===1?this.screenBounds[0].add(new a.P(1,1)):this.screenBounds[1],D=a.at(_,A,0,!1);return this.cameraPoint.y>A.y&&(this.cameraPoint.x>_.x&&this.cameraPoint.x<A.x?D.splice(3,0,this.cameraPoint):this.cameraPoint.x>=A.x?D[2]=this.cameraPoint:this.cameraPoint.x<=_.x&&(D[3]=this.cameraPoint)),a.au(D,f)}bufferedCameraGeometryGlobe(f){const _=this.screenBounds[0],A=this.screenBounds.length===1?this.screenBounds[0].add(new a.P(1,1)):this.screenBounds[1],D=a.at(_,A,f),L=this.cameraPoint.clone();switch(3*((L.y>_.y)+(L.y>A.y))+((L.x>_.x)+(L.x>A.x))){case 0:D[0]=L,D[4]=L.clone();break;case 1:D.splice(1,0,L);break;case 2:D[1]=L;break;case 3:D.splice(4,0,L);break;case 5:D.splice(2,0,L);break;case 6:D[3]=L;break;case 7:D.splice(3,0,L);break;case 8:D[2]=L}return D}containsTile(f,_,A,D=0){const L=f.queryPadding/_._pixelsPerMercatorPixel+1,B=A?this._bufferedCameraMercator(L,_):this._bufferedScreenMercator(L,_);let N=f.tileID.wrap+(B.unwrapped?D:0);const W=B.polygon.map(fe=>a.av(f.tileTransform,fe,N));if(!a.aw(W,0,0,a.J,a.J))return;N=f.tileID.wrap+(this.screenGeometryMercator.unwrapped?D:0);const X=this.screenGeometryMercator.polygon.map(fe=>a.ax(f.tileTransform,fe,N)),J=X.map(fe=>new a.P(fe[0],fe[1])),te=_.getFreeCameraOptions().position||new a.M(0,0,0),oe=a.ax(f.tileTransform,te,N),le=X.map(fe=>{const he=a.v.sub(fe,fe,oe);return a.v.normalize(he,he),new a.R(oe,he)}),de=a.ay(f,1,_.zoom)*_._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:J,tilespaceRays:le,bufferedTilespaceGeometry:W,bufferedTilespaceBounds:(pe=a.az(W),pe.min.x=a.c(pe.min.x,0,a.J),pe.min.y=a.c(pe.min.y,0,a.J),pe.max.x=a.c(pe.max.x,0,a.J),pe.max.y=a.c(pe.max.y,0,a.J),pe),tile:f,tileID:f.tileID,pixelToTileUnitsFactor:de};var pe}_bufferedScreenMercator(f,_){const A=ao(f);if(this._screenRaycastCache[A])return this._screenRaycastCache[A];{let D;return D=_.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(f),_):{polygon:this.bufferedScreenGeometry(f).map(L=>_.pointCoordinate3D(L)),unwrapped:!0},this._screenRaycastCache[A]=D,D}}_bufferedCameraMercator(f,_){const A=ao(f);if(this._cameraRaycastCache[A])return this._cameraRaycastCache[A];{let D;return D=_.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(f),_):{polygon:this.bufferedCameraGeometry(f).map(L=>_.pointCoordinate3D(L)),unwrapped:!0},this._cameraRaycastCache[A]=D,D}}_projectAndResample(f,_){const A=function(L,B){const N=a.m.multiply([],B.pixelMatrix,B.globeMatrix),W=[0,-a.aC,0,1],X=[0,a.aC,0,1],J=[0,0,0,1];a.e.transformMat4(W,W,N),a.e.transformMat4(X,X,N),a.e.transformMat4(J,J,N);const te=new a.P(W[0]/W[3],W[1]/W[3]),oe=new a.P(X[0]/X[3],X[1]/X[3]),le=a.aA(L,te)&&W[3]<J[3],de=a.aA(L,oe)&&X[3]<J[3];if(!le&&!de)return null;const pe=function(ze,je,Ne){for(let Ye=1;Ye<ze.length;Ye++){const Ct=Vs(je.pointCoordinate3D(ze[Ye-1]).x),ct=Vs(je.pointCoordinate3D(ze[Ye]).x);if(Ne<0){if(Ct<ct)return{idx:Ye,t:-Ct/(ct-1-Ct)}}else if(ct<Ct)return{idx:Ye,t:(1-Ct)/(ct+1-Ct)}}return null}(L,B,le?-1:1);if(!pe)return null;const{idx:fe,t:he}=pe;let we=fe>1?dc(L.slice(0,fe),B):[],Le=fe<L.length?dc(L.slice(fe),B):[];we=we.map(ze=>new a.P(Vs(ze.x),ze.y)),Le=Le.map(ze=>new a.P(Vs(ze.x),ze.y));const Oe=[...we];Oe.length===0&&Oe.push(Le[Le.length-1]);const xe=a.n(Oe[Oe.length-1].y,(Le.length===0?we[0]:Le[0]).y,he);let Te;return Te=le?[new a.P(0,xe),new a.P(0,0),new a.P(1,0),new a.P(1,xe)]:[new a.P(1,xe),new a.P(1,1),new a.P(0,1),new a.P(0,xe)],Oe.push(...Te),Le.length===0?Oe.push(we[0]):Oe.push(...Le),{polygon:Oe.map(ze=>new a.M(ze.x,ze.y)),unwrapped:!1}}(f,_);if(A)return A;const D=function(L,B){let N=!1,W=-1/0,X=0;for(let te=0;te<L.length-1;te++)L[te].x>W&&(W=L[te].x,X=te);for(let te=0;te<L.length-1;te++){const oe=(X+te)%(L.length-1),le=L[oe],de=L[oe+1];Math.abs(le.x-de.x)>.5&&(le.x<de.x?(le.x+=1,oe===0&&(L[L.length-1].x+=1)):(de.x+=1,oe+1===L.length-1&&(L[0].x+=1)),N=!0)}const J=a.E(B.center.lng);return N&&J<Math.abs(J-1)&&L.forEach(te=>{te.x-=1}),{polygon:L,unwrapped:N}}(dc(f,_).map(L=>new a.P(Vs(L.x),L.y)),_);return{polygon:D.polygon.map(L=>new a.M(L.x,L.y)),unwrapped:D.unwrapped}}}function dc(S,f){return a.aB(S,_=>{const A=f.pointCoordinate3D(_);_.x=A.x,_.y=A.y},1/256)}function Vs(S){return S<0?1+S%1:S%1}function ao(S){return 100*S|0}function $s(S,f,_,A,D){const L=function(B,N){if(B)return D(B);if(N){S.url&&N.tiles&&S.tiles&&delete S.tiles;const W=a.p(a.ak(N,S),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);N.vector_layers&&(W.vectorLayers=N.vector_layers,W.vectorLayerIds=W.vectorLayers.map(X=>X.id)),W.tiles=f.canonicalizeTileset(W,S.url),D(null,W)}};return S.url?a.a1(f.transformRequest(f.normalizeSourceURL(S.url,null,_,A),a.a2.Source),L):a.a4.frame(()=>L(null,S))}class Mo{constructor(f,_,A){this.bounds=a.D.convert(this.validateBounds(f)),this.minzoom=_||0,this.maxzoom=A||24}validateBounds(f){return Array.isArray(f)&&f.length===4?[Math.max(-180,f[0]),Math.max(-90,f[1]),Math.min(180,f[2]),Math.min(90,f[3])]:[-180,-90,180,90]}contains(f){const _=Math.pow(2,f.z),A=Math.floor(a.E(this.bounds.getWest())*_),D=Math.floor(a.H(this.bounds.getNorth())*_),L=Math.ceil(a.E(this.bounds.getEast())*_),B=Math.ceil(a.H(this.bounds.getSouth())*_);return f.x>=A&&f.x<L&&f.y>=D&&f.y<B}}class ut extends a.a6{constructor(f,_,A,D){if(super(),this.id=f,this.dispatcher=A,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.ak(this,a.p(_,["url","scheme","tileSize","promoteId"])),this._options=a.ak({type:"vector"},_),this._collectResourceTiming=!!_.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(D),this._tileWorkers={},this._deduped=new a.aD}load(f){this._loaded=!1,this.fire(new a.a8("dataloading",{dataType:"source"}));const _=Array.isArray(this.map._language)?this.map._language.join():this.map._language,A=this.map._worldview;this._tileJSONRequest=$s(this._options,this.map._requestManager,_,A,(D,L)=>{this._tileJSONRequest=null,this._loaded=!0,D?(_&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${_}`),A&&A.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${A}`),this.fire(new a.a7(D))):L&&(a.ak(this,L),L.bounds&&(this.tileBounds=new Mo(L.bounds,this.minzoom,this.maxzoom)),a.aH(L.tiles,this.map._requestManager._customAccessToken),this.fire(new a.a8("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.a8("data",{dataType:"source",sourceDataType:"content"}))),f&&f(D)})}loaded(){return this._loaded}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}onAdd(f){this.map=f,this.load()}reload(){this.cancelTileJSONRequest();const f=a.aE(this.id,this.scope);this.load(()=>this.map.style.clearSource(f))}setTiles(f){return this._options.tiles=f,this.reload(),this}setUrl(f){return this.url=f,this._options.url=f,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return a.ak({},this._options)}loadTile(f,_){const A=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme)),D={request:this.map._requestManager.transformRequest(A,a.a2.Tile),data:void 0,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,tileSize:this.tileSize*f.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:a.a4.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:f.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:f.isExtraShadowCaster};if(D.request.collectResourceTiming=this._collectResourceTiming,f.actor&&f.state!=="expired")f.state==="loading"?f.reloadCallback=_:f.request=f.actor.send("reloadTile",D,L.bind(this));else if(f.actor=this._tileWorkers[A]=this._tileWorkers[A]||this.dispatcher.getActor(),this.dispatcher.ready)f.request=f.actor.send("loadTile",D,L.bind(this),void 0,!0);else{const B=a.aF.call({deduped:this._deduped},D,(N,W)=>{N||!W?L.call(this,N):(D.data={cacheControl:W.cacheControl,expires:W.expires,rawData:W.rawData.slice(0)},f.actor&&f.actor.send("loadTile",D,L.bind(this),void 0,!0))},!0);f.request={cancel:B}}function L(B,N){return delete f.request,f.aborted?_(null):B&&B.status!==404?_(B):(N&&N.resourceTiming&&(f.resourceTiming=N.resourceTiming),this.map._refreshExpiredTiles&&N&&f.setExpiryData(N),f.loadVectorData(N,this.map.painter),a.aG(this.dispatcher),_(null),void(f.reloadCallback&&(this.loadTile(f,f.reloadCallback),f.reloadCallback=null)))}}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.actor&&f.actor.send("abortTile",{uid:f.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(f){f.actor&&f.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id,scope:this.scope}),f.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class mr extends a.a6{constructor(f,_,A,D){super(),this.id=f,this.dispatcher=A,this.setEventedParent(D),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.ak({type:"raster"},_),a.ak(this,a.p(_,["url","scheme","tileSize"]))}load(f){this._loaded=!1,this.fire(new a.a8("dataloading",{dataType:"source"})),this._tileJSONRequest=$s(this._options,this.map._requestManager,null,null,(_,A)=>{this._tileJSONRequest=null,this._loaded=!0,_?this.fire(new a.a7(_)):A&&(a.ak(this,A),A.bounds&&(this.tileBounds=new Mo(A.bounds,this.minzoom,this.maxzoom)),a.aH(A.tiles),this.fire(new a.a8("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.a8("data",{dataType:"source",sourceDataType:"content"}))),f&&f(_)})}loaded(){return this._loaded}onAdd(f){this.map=f,this.load()}reload(){this.cancelTileJSONRequest();const f=a.aE(this.id,this.scope);this.load(()=>this.map.style.clearSource(f))}setTiles(f){return this._options.tiles=f,this.reload(),this}setUrl(f){return this.url=f,this._options.url=f,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return a.ak({},this._options)}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,_){const A=a.a4.devicePixelRatio>=2,D=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),A,this.tileSize);f.request=a.a3(this.map._requestManager.transformRequest(D,a.a2.Tile),(L,B,N,W)=>(delete f.request,f.aborted?(f.state="unloaded",_(null)):L?(f.state="errored",_(L)):B?(this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:N,expires:W}),f.setTexture(B,this.map.painter),f.state="loaded",a.aG(this.dispatcher),void _(null)):_(null)))}abortTile(f,_){f.request&&(f.request.cancel(),delete f.request),_()}unloadTile(f,_){f.texture&&f.texture instanceof a.a9?(f.destroy(!0),f.texture&&f.texture instanceof a.a9&&this.map.painter.saveTileTexture(f.texture)):f.destroy(),_()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}const oo={vector:ut,raster:mr,"raster-dem":class extends mr{constructor(S,f,_,A){super(S,f,_,A),this.type="raster-dem",this.maxzoom=22,this._options=a.ak({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox"}loadTile(S,f){const _=this.map._requestManager.normalizeTileURL(S.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function A(D,L){D&&(S.state="errored",f(D)),L&&(S.dem=L,S.dem.onDeserialize(),S.needsHillshadePrepare=!0,S.needsDEMTextureUpload=!0,S.state="loaded",f(null))}S.request=a.a3(this.map._requestManager.transformRequest(_,a.a2.Tile),function(D,L,B,N){if(delete S.request,S.aborted)S.state="unloaded",f(null);else if(D)S.state="errored",f(D);else if(L){this.map._refreshExpiredTiles&&S.setExpiryData({cacheControl:B,expires:N});const W=ImageBitmap&&L instanceof ImageBitmap&&a.aI(),X=1-(L.width-a.aJ(L.width))/2;X<1||S.neighboringTiles||(S.neighboringTiles=this._getNeighboringTiles(S.tileID));const J=W?L:a.a4.getImageData(L,X),te={uid:S.uid,coord:S.tileID,source:this.id,scope:this.scope,rawImageData:J,encoding:this.encoding,padding:X};S.actor&&S.state!=="expired"||(S.actor=this.dispatcher.getActor(),S.actor.send("loadDEMTile",te,A.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(S){const f=S.canonical,_=Math.pow(2,f.z),A=(f.x-1+_)%_,D=f.x===0?S.wrap-1:S.wrap,L=(f.x+1+_)%_,B=f.x+1===_?S.wrap+1:S.wrap,N={};return N[new a.O(S.overscaledZ,D,f.z,A,f.y).key]={backfilled:!1},N[new a.O(S.overscaledZ,B,f.z,L,f.y).key]={backfilled:!1},f.y>0&&(N[new a.O(S.overscaledZ,D,f.z,A,f.y-1).key]={backfilled:!1},N[new a.O(S.overscaledZ,S.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},N[new a.O(S.overscaledZ,B,f.z,L,f.y-1).key]={backfilled:!1}),f.y+1<_&&(N[new a.O(S.overscaledZ,D,f.z,A,f.y+1).key]={backfilled:!1},N[new a.O(S.overscaledZ,S.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},N[new a.O(S.overscaledZ,B,f.z,L,f.y+1).key]={backfilled:!1}),N}},geojson:class extends a.a6{constructor(S,f,_,A){super(),this.id=S,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=_.getActor(),this.setEventedParent(A),this._data=f.data,this._options=a.ak({},f),this._collectResourceTiming=f.collectResourceTiming,f.maxzoom!==void 0&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId;const D=a.J/this.tileSize;this.workerOptions=a.ak({source:this.id,scope:this.scope,cluster:f.cluster||!1,geojsonVtOptions:{buffer:(f.buffer!==void 0?f.buffer:128)*D,tolerance:(f.tolerance!==void 0?f.tolerance:.375)*D,extent:a.J,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:f.clusterMaxZoom!==void 0?f.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,f.clusterMinPoints||2),extent:a.J,radius:(f.clusterRadius!==void 0?f.clusterRadius:50)*D,log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions)}onAdd(S){this.map=S,this.setData(this._data)}setData(S){return this._data=S,this._updateWorkerData(),this}getClusterExpansionZoom(S,f){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:S,source:this.id,scope:this.scope},f),this}getClusterChildren(S,f){return this.actor.send("geojson.getClusterChildren",{clusterId:S,source:this.id,scope:this.scope},f),this}getClusterLeaves(S,f,_,A){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:S,limit:f,offset:_},A),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new a.a8("dataloading",{dataType:"source"})),this._loaded=!1;const S=a.ak({},this.workerOptions);S.scope=this.scope;const f=this._data;typeof f=="string"?(S.request=this.map._requestManager.transformRequest(a.a4.resolveURL(f),a.a2.Source),S.request.collectResourceTiming=this._collectResourceTiming):S.data=JSON.stringify(f),this._pendingLoad=this.actor.send(`${this.type}.loadData`,S,(_,A)=>{if(this._loaded=!0,this._pendingLoad=null,_)this.fire(new a.a7(_));else{const D={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&A&&A.resourceTiming&&A.resourceTiming[this.id]&&(D.resourceTiming=A.resourceTiming[this.id]),this.fire(new a.a8("data",D)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(S,f){const _=S.actor?"reloadTile":"loadTile";S.actor=this.actor;const A={type:this.type,uid:S.uid,tileID:S.tileID,tileZoom:S.tileZoom,zoom:S.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,scope:this.scope,pixelRatio:a.a4.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0};S.request=this.actor.send(_,A,(D,L)=>(delete S.request,S.destroy(),S.aborted?f(null):D?f(D):(S.loadVectorData(L,this.map.painter,_==="reloadTile"),f(null))),void 0,_==="loadTile")}abortTile(S){S.request&&(S.request.cancel(),delete S.request),S.aborted=!0}unloadTile(S){this.actor.send("removeTile",{uid:S.uid,type:this.type,source:this.id,scope:this.scope}),S.destroy()}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return a.ak({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends a.aK{constructor(S,f,_,A){super(S,f,_,A),this.roundZoom=!0,this.type="video",this.options=f}load(){this._loaded=!1;const S=this.options;this.urls=[];for(const f of S.urls)this.urls.push(this.map._requestManager.transformRequest(f,a.a2.Source).url);a.aL(this.urls,(f,_)=>{this._loaded=!0,f?this.fire(new a.a7(f)):_&&(this.video=_,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(S){if(this.video){const f=this.video.seekable;S<f.start(0)||S>f.end(0)?this.fire(new a.a7(new a.aM(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=S}}getVideo(){return this.video}onAdd(S){this.map||(this.map=S,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const S=this.map.painter.context,f=S.gl;this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new a.a9(S,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(S)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:a.aK,model:class extends a.a6{constructor(S,f,_,A){super(),this.id=S,this.type="model",this.models=[],this._loaded=!1,this._options=f}load(){const S=[];for(const f in this._options.models){const _=this._options.models[f],A=a.aO(this.map._requestManager.transformRequest(_.uri,a.a2.Model).url).then(D=>{if(!D)return;const L=a.aP(D),B=new a.aQ(f,_.position,_.orientation,L);B.computeBoundsAndApplyParent(),this.models.push(B)}).catch(D=>{this.fire(new a.a7(new Error(`Could not load model ${f} from ${_.uri}: ${D.message}`)))});S.push(A)}return Promise.allSettled(S).then(()=>{this._loaded=!0,this.fire(new a.a8("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(f=>{this.fire(new a.a7(new Error(`Could not load models: ${f.message}`)))})}onAdd(S){this.map=S,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(S,f){}serialize(){return{type:"model"}}},"batched-model":class extends a.a6{constructor(S,f,_,A){super(),this.type="batched-model",this.id=S,this.tileSize=512,this._options=f,this.tiles=this._options.tiles,this.maxzoom=f.maxzoom||19,this.minzoom=f.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=_,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(A)}onAdd(S){this.map=S,this.load()}load(S){this._loaded=!1,this.fire(new a.a8("dataloading",{dataType:"source"}));const f=Array.isArray(this.map._language)?this.map._language.join():this.map._language,_=this.map._worldview;this._tileJSONRequest=$s(this._options,this.map._requestManager,f,_,(A,D)=>{this._tileJSONRequest=null,this._loaded=!0,A?(f&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${f}`),_&&_.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${_}`),this.fire(new a.a7(A))):D&&(a.ak(this,D),D.bounds&&(this.tileBounds=new Mo(D.bounds,this.minzoom,this.maxzoom)),a.aH(D.tiles,this.map._requestManager._customAccessToken),this.fire(new a.a8("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.a8("data",{dataType:"source",sourceDataType:"content"}))),S&&S(A)})}hasTransition(){return!1}hasTile(S){return!this.tileBounds||this.tileBounds.contains(S.canonical)}loaded(){return this._loaded}loadTile(S,f){const _=this.map._requestManager.normalizeTileURL(S.tileID.canonical.url(this.tiles,this.scheme)),A={request:this.map._requestManager.transformRequest(_,a.a2.Tile),data:void 0,uid:S.uid,tileID:S.tileID,tileZoom:S.tileZoom,zoom:S.tileID.overscaledZ,tileSize:this.tileSize*S.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:S.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(S.actor&&S.state!=="expired")if(S.state==="loading")S.reloadCallback=f;else{if(S.buckets){const L=Object.values(S.buckets);for(const B of L)B.dirty=!0;return void(S.state="loaded")}S.request=S.actor.send("reloadTile",A,D.bind(this))}else S.actor=this.dispatcher.getActor(),S.request=S.actor.send("loadTile",A,D.bind(this),void 0,!0);function D(L,B){return S.aborted?f(null):L&&L.status!==404?f(L):(B&&(B.resourceTiming&&(S.resourceTiming=B.resourceTiming),this.map._refreshExpiredTiles&&S.setExpiryData(B),S.buckets={...S.buckets,...B.buckets}),S.state="loaded",void f(null))}}serialize(){return a.ak({},this._options)}},canvas:class extends a.aK{constructor(S,f,_,A){super(S,f,_,A),f.coordinates?Array.isArray(f.coordinates)&&f.coordinates.length===4&&!f.coordinates.some(D=>!Array.isArray(D)||D.length!==2||D.some(L=>typeof L!="number"))||this.fire(new a.a7(new a.aM(`sources.${S}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.a7(new a.aM(`sources.${S}`,null,'missing required property "coordinates"'))),f.animate&&typeof f.animate!="boolean"&&this.fire(new a.a7(new a.aM(`sources.${S}`,null,'optional "animate" property must be a boolean value'))),f.canvas?typeof f.canvas=="string"||f.canvas instanceof HTMLCanvasElement||this.fire(new a.a7(new a.aM(`sources.${S}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.a7(new a.aM(`sources.${S}`,null,'missing required property "canvas"'))),this.options=f,this.animate=f.animate===void 0||f.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.a7(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(S){this.map=S,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let S=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,S=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,S=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const f=this.map.painter.context;this.texture?!S&&!this._playing||this.texture instanceof a.aN||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.a9(f,this.canvas,f.gl.RGBA,{premultiply:!0}),this._prepareData(f)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const S of[this.canvas.width,this.canvas.height])if(isNaN(S)||S<=0)return!0;return!1}},custom:class extends a.a6{constructor(S,f,_,A){super(),this.id=S,this.type="custom",this._dataType="raster",this._dispatcher=_,this._implementation=f,this.setEventedParent(A),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new a.a7(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new a.a7(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Mo(this._implementation.bounds,this.minzoom,this.maxzoom)),f.update=this._update.bind(this),f.clearTiles=this._clearTiles.bind(this),f.coveringTiles=this._coveringTiles.bind(this),a.ak(this,a.p(f,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return a.p(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new a.a8("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.a8("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(S){this._map=S,this._loaded=!1,this.fire(new a.a8("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(S),this.load()}onRemove(S){this._implementation.onRemove&&this._implementation.onRemove(S)}hasTile(S){if(this._implementation.hasTile){const{x:f,y:_,z:A}=S.canonical;return this._implementation.hasTile({x:f,y:_,z:A})}return!this.tileBounds||this.tileBounds.contains(S.canonical)}loadTile(S,f){const{x:_,y:A,z:D}=S.tileID.canonical,L=new AbortController;S.request=Promise.resolve(this._implementation.loadTile({x:_,y:A,z:D},{signal:L.signal})).then(function(B){return delete S.request,S.aborted?(S.state="unloaded",f(null)):B===void 0?(S.state="errored",f(null)):B===null?(this.loadTileData(S,{width:this.tileSize,height:this.tileSize,data:null}),S.state="loaded",f(null)):function(N){return N instanceof ImageData||N instanceof HTMLCanvasElement||N instanceof ImageBitmap||N instanceof HTMLImageElement}(B)?(this.loadTileData(S,B),S.state="loaded",void f(null)):(S.state="errored",f(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(B=>{B.code!==20&&(S.state="errored",f(B))}),S.request.cancel=()=>L.abort()}loadTileData(S,f){S.setTexture(f,this._map.painter)}unloadTile(S,f){if(S.texture&&S.texture instanceof a.a9?(S.destroy(!0),S.texture&&S.texture instanceof a.a9&&this._map.painter.saveTileTexture(S.texture)):S.destroy(),this._implementation.unloadTile){const{x:_,y:A,z:D}=S.tileID.canonical;this._implementation.unloadTile({x:_,y:A,z:D})}f()}abortTile(S,f){S.request&&S.request.cancel&&(S.request.cancel(),delete S.request),f()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(S=>({x:S.canonical.x,y:S.canonical.y,z:S.canonical.z}))}_clearTiles(){const S=a.aE(this.id,this.scope);this._map.style.clearSource(S)}_update(){this.fire(new a.a8("data",{dataType:"source",sourceDataType:"content"}))}}},oa=function(S,f,_,A){const D=new oo[f.type](S,f,_,A);if(D.id!==S)throw new Error(`Expected Source id to be ${S} instead of ${D.id}`);return a.aR(["load","abort","unload","serialize","prepare"],D),D};function En(S,f){const _=a.m.identity([]);return a.m.scale(_,_,[.5*S.width,.5*-S.height,1]),a.m.translate(_,_,[1,-1,0]),a.m.multiply(_,_,S.calculateProjMatrix(f.toUnwrapped())),Float32Array.from(_)}function Uo(S,f,_,A,D,L,B,N=!1){const W=S.tilesIn(A,B,N);W.sort(so);const X=[];for(const te of W)X.push({wrappedTileID:te.tile.tileID.wrapped().key,queryResults:te.tile.queryRenderedFeatures(f,_,S._state,te,D,L,En(S.transform,te.tile.tileID),N)});const J=function(te){const oe={},le={};for(const de of te){const pe=de.queryResults,fe=de.wrappedTileID,he=le[fe]=le[fe]||{};for(const we in pe){const Le=pe[we],Oe=he[we]=he[we]||{},xe=oe[we]=oe[we]||[];for(const Te of Le)Oe[Te.featureIndex]||(Oe[Te.featureIndex]=!0,xe.push(Te))}}return oe}(X);for(const te in J)J[te].forEach(oe=>{const le=oe.feature,de=le.layer;de&&de.type!=="background"&&de.type!=="sky"&&de.type!=="slot"&&(le.source=de.source,de["source-layer"]&&(le.sourceLayer=de["source-layer"]),le.state=le.id!==void 0?S.getFeatureState(de["source-layer"],le.id):{})});return J}function Gv(S,f){const _=S.getRenderableIds().map(L=>S.getTileByID(L)),A=[],D={};for(let L=0;L<_.length;L++){const B=_[L],N=B.tileID.canonical.key;D[N]||(D[N]=!0,B.querySourceFeatures(A,f))}return A}function so(S,f){const _=S.tileID,A=f.tileID;return _.overscaledZ-A.overscaledZ||_.canonical.y-A.canonical.y||_.wrap-A.wrap||_.canonical.x-A.canonical.x}class xh{constructor(f){this.style=f}processLayersChanged(){this.layers=[];for(const f in this.style._mergedLayers){const _=this.style._mergedLayers[f];if(_.type==="fill-extrusion")this.layers.push(_);else if(_.type==="model"){const A=this.style.getLayerSource(_);A&&A.type==="batched-model"&&this.layers.push(_)}}}updateZOffset(f,_){this.currentBuildingBuckets=[];for(let D=0;D<this.layers.length;++D){const L=this.layers[D],B=this.style.getLayerSourceCache(L);let N=1;L.type==="fill-extrusion"&&(N=L.paint.get("fill-extrusion-opacity")>0?L.paint.get("fill-extrusion-vertical-scale"):0);let W=B?B.getTile(_):null;if(!W&&B&&_.canonical.z>B.getSource().minzoom){let X=_.scaledTo(Math.min(B.getSource().maxzoom,_.overscaledZ-1));for(;X.overscaledZ>=B.getSource().minzoom&&(W=B.getTile(X),!W&&X.overscaledZ!==0);)X=X.scaledTo(X.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:W?W.getBucket(L):null,tileID:W?W.tileID:_,verticalScale:N})}f.hasAnyZOffset=!1;let A=!1;for(let D=0;D<f.symbolInstances.length;D++){const L=f.symbolInstances.get(D),B=L.zOffset,N=this._getHeightAtTileOffset(_,L.tileAnchorX,L.tileAnchorY);L.zOffset=N!==-1?N:B,A||B===L.zOffset||(A=!0),f.hasAnyZOffset||L.zOffset===0||(f.hasAnyZOffset=!0)}A&&(f.zOffsetBuffersNeedUpload=!0,f.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(f,_,A,D){let L=_,B=A;if(f.canonical.z!==D.canonical.z){const N=D.canonical,W=1/(1<<f.canonical.z-N.z);L=(_+f.canonical.x*a.J)*W-N.x*a.J|0,B=(A+f.canonical.y*a.J)*W-N.y*a.J|0}return{tileX:L,tileY:B}}_getHeightAtTileOffset(f,_,A){let D,L;for(let B=0;B<this.layers.length;++B){if(this.layers[B].type!=="fill-extrusion")continue;const{bucket:N,tileID:W,verticalScale:X}=this.currentBuildingBuckets[B];if(!N)continue;const{tileX:J,tileY:te}=this._mapCoordToOverlappingTile(f,_,A,W),oe=N.getHeightAtTileCoord(J,te);oe&&oe.height!==void 0&&(oe.hidden?D=oe.height:L=Math.max(oe.height*X,L||0))}if(L!==void 0)return L;for(let B=0;B<this.layers.length;++B){if(this.layers[B].type!=="model")continue;const{bucket:N,tileID:W}=this.currentBuildingBuckets[B];if(!N)continue;const{tileX:X,tileY:J}=this._mapCoordToOverlappingTile(f,_,A,W),te=N.getHeightAtTileCoord(X,J);if(te&&!te.hidden)return te.height===void 0&&D!==void 0?Math.min(te.maxHeight,D)*te.verticalScale:(te.height||0)*te.verticalScale}return-1}}function lm(S,f){const _={};for(const A in S)A!=="ref"&&(_[A]=S[A]);return a.aS.forEach(A=>{A in f&&(_[A]=f[A])}),_}function Fa(S){S=S.slice();const f=Object.create(null);for(let _=0;_<S.length;_++)f[S[_].id]=S[_];for(let _=0;_<S.length;_++)"ref"in S[_]&&(S[_]=lm(S[_],f[S[_].ref]));return S}const Ot={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",setImportUrl:"setImportUrl",setImportData:"setImportData",setImportConfig:"setImportConfig"};function hi(S,f,_){_.push({command:Ot.addSource,args:[S,f[S]]})}function yi(S,f,_){f.push({command:Ot.removeSource,args:[S]}),_[S]=!0}function lo(S,f,_,A){yi(S,_,A),hi(S,f,_)}function Sl(S,f,_){let A;for(A in S[_])if(S[_].hasOwnProperty(A)&&A!=="data"&&!h(S[_][A],f[_][A]))return!1;for(A in f[_])if(f[_].hasOwnProperty(A)&&A!=="data"&&!h(S[_][A],f[_][A]))return!1;return!0}function oi(S,f,_,A,D,L){let B;for(B in f=f||{},S=S||{})S.hasOwnProperty(B)&&(h(S[B],f[B])||_.push({command:L,args:[A,B,f[B],D]}));for(B in f)f.hasOwnProperty(B)&&!S.hasOwnProperty(B)&&(h(S[B],f[B])||_.push({command:L,args:[A,B,f[B],D]}))}function Tl(S){return S.id}function Gs(S,f){return S[f.id]=f,S}class fc{constructor(f,_){this.reset(f,_)}reset(f,_){this.points=f||[],this._distances=[0];for(let A=1;A<this.points.length;A++)this._distances[A]=this._distances[A-1]+this.points[A].dist(this.points[A-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(_||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(f){if(this.points.length===1)return this.points[0];f=a.c(f,0,1);let _=1,A=this._distances[_];const D=f*this.paddedLength+this.padding;for(;A<D&&_<this._distances.length;)A=this._distances[++_];const L=_-1,B=this._distances[L],N=A-B,W=N>0?(D-B)/N:0;return this.points[L].mult(1-W).add(this.points[_].mult(W))}}class Ta{constructor(f,_,A){const D=this.boxCells=[],L=this.circleCells=[];this.xCellCount=Math.ceil(f/A),this.yCellCount=Math.ceil(_/A);for(let B=0;B<this.xCellCount*this.yCellCount;B++)D.push([]),L.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=f,this.height=_,this.xScale=this.xCellCount/f,this.yScale=this.yCellCount/_,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(f,_,A,D,L){this._forEachCell(_,A,D,L,this._insertBoxCell,this.boxUid++),this.boxKeys.push(f),this.bboxes.push(_),this.bboxes.push(A),this.bboxes.push(D),this.bboxes.push(L)}insertCircle(f,_,A,D){this._forEachCell(_-D,A-D,_+D,A+D,this._insertCircleCell,this.circleUid++),this.circleKeys.push(f),this.circles.push(_),this.circles.push(A),this.circles.push(D)}_insertBoxCell(f,_,A,D,L,B){this.boxCells[L].push(B)}_insertCircleCell(f,_,A,D,L,B){this.circleCells[L].push(B)}_query(f,_,A,D,L,B){if(A<0||f>this.width||D<0||_>this.height)return!L&&[];const N=[];if(f<=0&&_<=0&&this.width<=A&&this.height<=D){if(L)return!0;for(let W=0;W<this.boxKeys.length;W++)N.push({key:this.boxKeys[W],x1:this.bboxes[4*W],y1:this.bboxes[4*W+1],x2:this.bboxes[4*W+2],y2:this.bboxes[4*W+3]});for(let W=0;W<this.circleKeys.length;W++){const X=this.circles[3*W],J=this.circles[3*W+1],te=this.circles[3*W+2];N.push({key:this.circleKeys[W],x1:X-te,y1:J-te,x2:X+te,y2:J+te})}return B?N.filter(B):N}return this._forEachCell(f,_,A,D,this._queryCell,N,{hitTest:L,seenUids:{box:{},circle:{}}},B),L?N.length>0:N}_queryCircle(f,_,A,D,L){const B=f-A,N=f+A,W=_-A,X=_+A;if(N<0||B>this.width||X<0||W>this.height)return!D&&[];const J=[];return this._forEachCell(B,W,N,X,this._queryCellCircle,J,{hitTest:D,circle:{x:f,y:_,radius:A},seenUids:{box:{},circle:{}}},L),D?J.length>0:J}query(f,_,A,D,L){return this._query(f,_,A,D,!1,L)}hitTest(f,_,A,D,L){return this._query(f,_,A,D,!0,L)}hitTestCircle(f,_,A,D){return this._queryCircle(f,_,A,!0,D)}_queryCell(f,_,A,D,L,B,N,W){const X=N.seenUids,J=this.boxCells[L];if(J!==null){const oe=this.bboxes;for(const le of J)if(!X.box[le]){X.box[le]=!0;const de=4*le;if(f<=oe[de+2]&&_<=oe[de+3]&&A>=oe[de+0]&&D>=oe[de+1]&&(!W||W(this.boxKeys[le]))){if(N.hitTest)return B.push(!0),!0;B.push({key:this.boxKeys[le],x1:oe[de],y1:oe[de+1],x2:oe[de+2],y2:oe[de+3]})}}}const te=this.circleCells[L];if(te!==null){const oe=this.circles;for(const le of te)if(!X.circle[le]){X.circle[le]=!0;const de=3*le;if(this._circleAndRectCollide(oe[de],oe[de+1],oe[de+2],f,_,A,D)&&(!W||W(this.circleKeys[le]))){if(N.hitTest)return B.push(!0),!0;{const pe=oe[de],fe=oe[de+1],he=oe[de+2];B.push({key:this.circleKeys[le],x1:pe-he,y1:fe-he,x2:pe+he,y2:fe+he})}}}}}_queryCellCircle(f,_,A,D,L,B,N,W){const X=N.circle,J=N.seenUids,te=this.boxCells[L];if(te!==null){const le=this.bboxes;for(const de of te)if(!J.box[de]){J.box[de]=!0;const pe=4*de;if(this._circleAndRectCollide(X.x,X.y,X.radius,le[pe+0],le[pe+1],le[pe+2],le[pe+3])&&(!W||W(this.boxKeys[de])))return B.push(!0),!0}}const oe=this.circleCells[L];if(oe!==null){const le=this.circles;for(const de of oe)if(!J.circle[de]){J.circle[de]=!0;const pe=3*de;if(this._circlesCollide(le[pe],le[pe+1],le[pe+2],X.x,X.y,X.radius)&&(!W||W(this.circleKeys[de])))return B.push(!0),!0}}}_forEachCell(f,_,A,D,L,B,N,W){const X=this._convertToXCellCoord(f),J=this._convertToYCellCoord(_),te=this._convertToXCellCoord(A),oe=this._convertToYCellCoord(D);for(let le=X;le<=te;le++)for(let de=J;de<=oe;de++)if(L.call(this,f,_,A,D,this.xCellCount*de+le,B,N,W))return}_convertToXCellCoord(f){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(f*this.xScale)))}_convertToYCellCoord(f){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(f*this.yScale)))}_circlesCollide(f,_,A,D,L,B){const N=D-f,W=L-_,X=A+B;return X*X>N*N+W*W}_circleAndRectCollide(f,_,A,D,L,B,N){const W=(B-D)/2,X=Math.abs(f-(D+W));if(X>W+A)return!1;const J=(N-L)/2,te=Math.abs(_-(L+J));if(te>J+A)return!1;if(X<=W||te<=J)return!0;const oe=X-W,le=te-J;return oe*oe+le*le<=A*A}}const qi=100;class bh{constructor(f,_,A=new Ta(f.width+200,f.height+200,25),D=new Ta(f.width+200,f.height+200,25)){this.transform=f,this.grid=A,this.ignoredGrid=D,this.pitchfactor=Math.cos(f._pitch)*f.cameraToCenterDistance,this.screenRightBoundary=f.width+qi,this.screenBottomBoundary=f.height+qi,this.gridRightBoundary=f.width+200,this.gridBottomBoundary=f.height+200,this.fogState=_}placeCollisionBox(f,_,A,D,L,B,N,W){let X=A.projectedAnchorX,J=A.projectedAnchorY,te=A.projectedAnchorZ;const oe=A.elevation,le=A.tileID,de=f.getProjection();if(oe&&le){const[Te,ze,je]=de.upVector(le.canonical,A.tileAnchorX,A.tileAnchorY),Ne=de.upVectorScale(le.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;X+=Te*oe*Ne,J+=ze*oe*Ne,te+=je*oe*Ne}const pe=this.projectAndGetPerspectiveRatio(N,X,J,te,A.tileID,de.name==="globe"||!!oe||this.transform.pitch>0,de),fe=B*pe.perspectiveRatio,he=(A.x1*_+D.x-A.padding)*fe+pe.point.x,we=(A.y1*_+D.y-A.padding)*fe+pe.point.y,Le=(A.x2*_+D.x+A.padding)*fe+pe.point.x,Oe=(A.y2*_+D.y+A.padding)*fe+pe.point.y,xe=pe.perspectiveRatio<=.55||pe.occluded;return!this.isInsideGrid(he,we,Le,Oe)||!L&&this.grid.hitTest(he,we,Le,Oe,W)||xe?{box:[],offscreen:!1,occluded:pe.occluded}:{box:[he,we,Le,Oe],offscreen:this.isOffscreen(he,we,Le,Oe),occluded:!1}}placeCollisionCircles(f,_,A,D,L,B,N,W,X,J,te,oe,le,de,pe){const fe=[],he=this.transform.elevation,we=f.getProjection(),Le=he?he.getAtTileOffsetFunc(pe,this.transform.center.lat,this.transform.worldSize,we):null,Oe=new a.P(A.tileAnchorX,A.tileAnchorY);let{x:xe,y:Te,z:ze}=we.projectTilePoint(Oe.x,Oe.y,pe.canonical);if(Le){const[Dt,Ee,at]=Le(Oe);xe+=Dt,Te+=Ee,ze+=at}const je=we.name==="globe",Ne=this.projectAndGetPerspectiveRatio(N,xe,Te,ze,pe,je||!!he||this.transform.pitch>0,we),{perspectiveRatio:Ye}=Ne,Ct=(te?B/Ye:B*Ye)/a.aV,ct=Zn(xe,Te,ze,W),_t=Ne.signedDistanceFromCamera>0?Gt(Ct,L,A.lineOffsetX*Ct,A.lineOffsetY*Ct,!1,ct,Oe,A,D,W,{},he&&!te?Le:null,te&&!!he,we,pe,te):null;let tt=!1,Mt=!1,pt=!0;if(_t&&!Ne.occluded){const Dt=.5*le*Ye+de,Ee=new a.P(-100,-100),at=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Ft=new fc,{first:Rt,last:dr}=_t,or=Rt.path.length;let br=[];for(let Er=or-1;Er>=1;Er--)br.push(Rt.path[Er]);for(let Er=1;Er<dr.path.length;Er++)br.push(dr.path[Er]);const ur=2.5*Dt;X&&(br=br.map(([Er,vr,_r],vi)=>(Le&&!je&&(_r=Le(vi<or-1?Rt.tilePath[or-1-vi]:dr.tilePath[vi-or+2])[2]),Zn(Er,vr,_r,X))),br.some(Er=>Er[3]<=0)&&(br=[]));let Ir=[];if(br.length>0){let Er=1/0,vr=-1/0,_r=1/0,vi=-1/0;for(const Wr of br)Er=Math.min(Er,Wr[0]),_r=Math.min(_r,Wr[1]),vr=Math.max(vr,Wr[0]),vi=Math.max(vi,Wr[1]);vr>=Ee.x&&Er<=at.x&&vi>=Ee.y&&_r<=at.y&&(Ir=[br.map(Wr=>new a.P(Wr[0],Wr[1]))],(Er<Ee.x||vr>at.x||_r<Ee.y||vi>at.y)&&(Ir=a.aT(Ir,Ee.x,Ee.y,at.x,at.y)))}for(const Er of Ir){Ft.reset(Er,.25*Dt);let vr=0;vr=Ft.length<=.5*Dt?1:Math.ceil(Ft.paddedLength/ur)+1;for(let _r=0;_r<vr;_r++){const vi=_r/Math.max(vr-1,1),Wr=Ft.lerp(vi),tn=Wr.x+qi,Hi=Wr.y+qi;fe.push(tn,Hi,Dt,0);const qa=tn-Dt,Xo=Hi-Dt,$i=tn+Dt,xi=Hi+Dt;if(pt=pt&&this.isOffscreen(qa,Xo,$i,xi),Mt=Mt||this.isInsideGrid(qa,Xo,$i,xi),!_&&this.grid.hitTestCircle(tn,Hi,Dt,oe)&&(tt=!0,!J))return{circles:[],offscreen:!1,collisionDetected:tt,occluded:!1}}}}return{circles:!J&&tt||!Mt?[]:fe,offscreen:pt,collisionDetected:tt,occluded:Ne.occluded}}queryRenderedSymbols(f){if(f.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const _=[];let A=1/0,D=1/0,L=-1/0,B=-1/0;for(const J of f){const te=new a.P(J.x+qi,J.y+qi);A=Math.min(A,te.x),D=Math.min(D,te.y),L=Math.max(L,te.x),B=Math.max(B,te.y),_.push(te)}const N=this.grid.query(A,D,L,B).concat(this.ignoredGrid.query(A,D,L,B)),W={},X={};for(const J of N){const te=J.key;if(W[te.bucketInstanceId]===void 0&&(W[te.bucketInstanceId]={}),W[te.bucketInstanceId][te.featureIndex])continue;const oe=[new a.P(J.x1,J.y1),new a.P(J.x2,J.y1),new a.P(J.x2,J.y2),new a.P(J.x1,J.y2)];a.aU(_,oe)&&(W[te.bucketInstanceId][te.featureIndex]=!0,X[te.bucketInstanceId]===void 0&&(X[te.bucketInstanceId]=[]),X[te.bucketInstanceId].push(te.featureIndex))}return X}insertCollisionBox(f,_,A,D,L){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:A,featureIndex:D,collisionGroupID:L},f[0],f[1],f[2],f[3])}insertCollisionCircles(f,_,A,D,L){const B=_?this.ignoredGrid:this.grid,N={bucketInstanceId:A,featureIndex:D,collisionGroupID:L};for(let W=0;W<f.length;W+=4)B.insertCircle(N,f[W],f[W+1],f[W+2])}projectAndGetPerspectiveRatio(f,_,A,D,L,B,N){const W=[_,A,D,1];let X=!1;D||this.transform.pitch>0?(a.e.transformMat4(W,W,f),this.fogState&&L&&N.name!=="globe"&&(X=function(oe,le,de,pe,fe,he){const we=he.calculateFogTileMatrix(fe),Le=[le,de,pe];return a.v.transformMat4(Le,Le,we),ps(oe,a.v.length(Le),he.pitch,he._fov)}(this.fogState,_,A,D,L.toUnwrapped(),this.transform)>.9)):jr(W,W,f);const J=W[3];return{point:new a.P((W[0]/J+1)/2*this.transform.width+qi,(-W[1]/J+1)/2*this.transform.height+qi),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(N)/J*.5,1.5),signedDistanceFromCamera:J,occluded:B&&W[2]>J||X}}isOffscreen(f,_,A,D){return A<qi||f>=this.screenRightBoundary||D<qi||_>this.screenBottomBoundary}isInsideGrid(f,_,A,D){return A>=0&&f<this.gridRightBoundary&&D>=0&&_<this.gridBottomBoundary}getViewportMatrix(){const f=a.m.identity([]);return a.m.translate(f,f,[-100,-100,0]),f}}function Ao(S,f,_){const A=f.createTileMatrix(S,S.worldSize,_.toUnwrapped());return a.m.multiply(new Float32Array(16),S.projMatrix,A)}function Ml(S,f,_){if(f.projection.name===_.projection.name)return S.projMatrix;const A=_.clone();return A.setProjection(f.projection),Ao(A,f.getProjection(),S)}function ms(S,f,_){return f.name===_.projection.name?S.projMatrix:Ao(_,f,S)}class pc{constructor(f,_,A,D){this.opacity=f?Math.max(0,Math.min(1,f.opacity+(f.placed?_:-_))):D&&A?1:0,this.placed=A}isHidden(){return this.opacity===0&&!this.placed}}class Al{constructor(f,_,A,D,L,B=!1){this.text=new pc(f?f.text:null,_,A,L),this.icon=new pc(f?f.icon:null,_,D,L),this.clipped=B}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Cl{constructor(f,_,A,D=!1){this.text=f,this.icon=_,this.skipFade=A,this.clipped=D}}class hu{constructor(){this.invProjMatrix=a.m.create(),this.viewportMatrix=a.m.create(),this.circles=[]}}class mc{constructor(f,_,A,D,L){this.bucketInstanceId=f,this.featureIndex=_,this.sourceLayerIndex=A,this.bucketIndex=D,this.tileID=L}}class gs{constructor(f){this.crossSourceCollisions=f,this.maxGroupID=0,this.collisionGroups={}}get(f){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[f]){const _=++this.maxGroupID;this.collisionGroups[f]={ID:_,predicate:A=>A.collisionGroupID===_}}return this.collisionGroups[f]}}function Ma(S,f,_,A,D){const{horizontalAlign:L,verticalAlign:B}=a.aY(S),N=-(L-.5)*f,W=-(B-.5)*_,X=a.aW(S,A);return new a.P(N+X[0]*D,W+X[1]*D)}function sn(S,f,_,A,D){const L=new a.P(S,f);return _&&L._rotate(A?D:-D),L}class qd{constructor(f,_,A,D,L,B){this.transform=f.clone(),this.projection=f.projection.name,this.collisionIndex=new bh(this.transform,L),this.buildingIndex=B,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new gs(A),this.collisionCircleArrays={},this.prevPlacement=D,D&&(D.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(f,_,A,D){const L=A.getBucket(_),B=A.latestFeatureIndex;if(!L||!B||_.fqid!==L.layerIds[0])return;const N=L.layers[0].layout,W=A.collisionBoxArray,X=Math.pow(2,this.transform.zoom-A.tileID.overscaledZ),J=A.tileSize/a.J,te=A.tileID.toUnwrapped();this.transform.setProjection(L.projection);const oe=(le=A.tileID,de=L.getProjection(),pe=this.transform,de.name===this.projection?pe.calculateProjMatrix(le.toUnwrapped()):Ao(pe,de,le));var le,de,pe;const fe=N.get("text-pitch-alignment")==="map",he=N.get("text-rotation-alignment")==="map";_.compileFilter();const we=_.dynamicFilter(),Le=_.dynamicFilterNeedsFeature(),Oe=this.transform.calculatePixelsToTileUnitsMatrix(A),xe=Go(oe,A.tileID.canonical,fe,he,this.transform,L.getProjection(),Oe);let Te=null;if(fe){const Ne=fs(oe,A.tileID.canonical,fe,he,this.transform,L.getProjection(),Oe);Te=a.m.multiply([],this.transform.labelPlaneMatrix,Ne)}let ze=null;we&&A.latestFeatureIndex&&(ze={unwrappedTileID:te,dynamicFilter:we,dynamicFilterNeedsFeature:Le,featureIndex:A.latestFeatureIndex}),this.retainedQueryData[L.bucketInstanceId]=new mc(L.bucketInstanceId,B,L.sourceLayerIndex,L.index,A.tileID);const je={bucket:L,layout:N,posMatrix:oe,textLabelPlaneMatrix:xe,labelToScreenMatrix:Te,clippingData:ze,scale:X,textPixelRatio:J,holdingForFade:A.holdingForFade(),collisionBoxArray:W,partiallyEvaluatedTextSize:a.i(L.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:a.i(L.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(L.sourceID)};if(D)for(const Ne of L.sortKeyRanges){const{sortKey:Ye,symbolInstanceStart:Ct,symbolInstanceEnd:ct}=Ne;f.push({sortKey:Ye,symbolInstanceStart:Ct,symbolInstanceEnd:ct,parameters:je})}else f.push({symbolInstanceStart:0,symbolInstanceEnd:L.symbolInstances.length,parameters:je})}attemptAnchorPlacement(f,_,A,D,L,B,N,W,X,J,te,oe,le,de,pe,fe,he,we){const{textOffset0:Le,textOffset1:Oe,crossTileID:xe}=oe,Te=[Le,Oe],ze=Ma(f,A,D,Te,L),je=this.collisionIndex.placeCollisionBox(de,L,_,sn(ze.x,ze.y,B,N,this.transform.angle),te,W,X,J.predicate);if(fe){const Ne=de.getSymbolInstanceIconSize(we,this.transform.zoom,oe.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(de,Ne,fe,sn(ze.x,ze.y,B,N,this.transform.angle),te,W,X,J.predicate).box.length===0)return}if(je.box.length>0){let Ne;return this.prevPlacement&&this.prevPlacement.variableOffsets[xe]&&this.prevPlacement.placements[xe]&&this.prevPlacement.placements[xe].text&&(Ne=this.prevPlacement.variableOffsets[xe].anchor),this.variableOffsets[xe]={textOffset:Te,width:A,height:D,anchor:f,textScale:L,prevAnchor:Ne},this.markUsedJustification(de,f,oe,pe),de.allowVerticalPlacement&&(this.markUsedOrientation(de,pe,oe),this.placedOrientations[xe]=pe),{shift:ze,placedGlyphBoxes:je}}}placeLayerBucketPart(f,_,A,D){const{bucket:L,layout:B,posMatrix:N,textLabelPlaneMatrix:W,labelToScreenMatrix:X,clippingData:J,textPixelRatio:te,holdingForFade:oe,collisionBoxArray:le,partiallyEvaluatedTextSize:de,partiallyEvaluatedIconSize:pe,collisionGroup:fe}=f.parameters,he=B.get("text-optional"),we=B.get("icon-optional"),Le=B.get("text-allow-overlap"),Oe=B.get("icon-allow-overlap"),xe=B.get("text-rotation-alignment")==="map",Te=B.get("text-pitch-alignment")==="map",ze=B.get("symbol-z-order")==="viewport-y",je=B.get("symbol-z-elevate");this.transform.setProjection(L.projection);let Ne=Le&&(Oe||!L.hasIconData()||we),Ye=Oe&&(Le||!L.hasTextData()||he);!L.collisionArrays&&le&&L.deserializeCollisionBoxes(le),A&&D&&L.updateCollisionDebugBuffers(this.transform.zoom,le);const Ct=(ct,_t,tt)=>{const{crossTileID:Mt,numVerticalGlyphVertices:pt}=ct;if(J){const $i={zoom:this.transform.zoom,pitch:this.transform.pitch};let xi=null;if(J.dynamicFilterNeedsFeature){const Ii=this.retainedQueryData[L.bucketInstanceId];xi=J.featureIndex.loadFeature({featureIndex:ct.featureIndex,bucketIndex:Ii.bucketIndex,sourceLayerIndex:Ii.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,J.dynamicFilter)($i,xi,this.retainedQueryData[L.bucketInstanceId].tileID.canonical,new a.P(ct.tileAnchorX,ct.tileAnchorY),this.transform.calculateDistanceTileData(J.unwrappedTileID)))return this.placements[Mt]=new Cl(!1,!1,!1,!0),void _.add(Mt)}if(_.has(Mt))return;if(oe)return void(this.placements[Mt]=new Cl(!1,!1,!1));let Dt=!1,Ee=!1,at=!0,Ft=!1,Rt=!1,dr=null,or={box:null,offscreen:null,occluded:null},br={box:null,offscreen:null,occluded:null},ur=null,Ir=null,Er=null,vr=0,_r=0,vi=0;tt.textFeatureIndex?vr=tt.textFeatureIndex:ct.useRuntimeCollisionCircles&&(vr=ct.featureIndex),tt.verticalTextFeatureIndex&&(_r=tt.verticalTextFeatureIndex);const Wr=$i=>{$i.tileID=this.retainedQueryData[L.bucketInstanceId].tileID;const xi=this.transform.elevation;$i.elevation=ct.zOffset+(xi?xi.getAtTileOffset($i.tileID,$i.tileAnchorX,$i.tileAnchorY):0)},tn=tt.textBox;if(tn){Wr(tn);const $i=Ii=>{let dn=a.W.horizontal;if(L.allowVerticalPlacement&&!Ii&&this.prevPlacement){const sa=this.prevPlacement.placedOrientations[Mt];sa&&(this.placedOrientations[Mt]=sa,dn=sa,this.markUsedOrientation(L,dn,ct))}return dn},xi=(Ii,dn)=>{if(L.allowVerticalPlacement&&pt>0&&tt.verticalTextBox){for(const sa of L.writingModes)if(sa===a.W.vertical?(or=dn(),br=or):or=Ii(),or&&or.box&&or.box.length)break}else or=Ii()};if(B.get("text-variable-anchor")){let Ii=B.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Mt]){const ln=this.prevPlacement.variableOffsets[Mt];Ii.indexOf(ln.anchor)>0&&(Ii=Ii.filter(Aa=>Aa!==ln.anchor),Ii.unshift(ln.anchor))}const dn=(ln,Aa,Za)=>{const Ca=L.getSymbolInstanceTextSize(de,ct,this.transform.zoom,_t),Yo=(ln.x2-ln.x1)*Ca+2*ln.padding,Ll=(ln.y2-ln.y1)*Ca+2*ln.padding,bs=ct.hasIconTextFit&&!Oe?Aa:null;bs&&Wr(bs);let Xi={box:[],offscreen:!1,occluded:!1};const ws=Le?2*Ii.length:Ii.length;for(let Zs=0;Zs<ws;++Zs){const kl=this.attemptAnchorPlacement(Ii[Zs%Ii.length],ln,Yo,Ll,Ca,xe,Te,te,N,fe,Zs>=Ii.length,ct,_t,L,Za,bs,de,pe);if(kl&&(Xi=kl.placedGlyphBoxes,Xi&&Xi.box&&Xi.box.length)){Dt=!0,dr=kl.shift;break}}return Xi};xi(()=>dn(tn,tt.iconBox,a.W.horizontal),()=>{const ln=tt.verticalTextBox;return ln&&Wr(ln),L.allowVerticalPlacement&&!(or&&or.box&&or.box.length)&&pt>0&&ln?dn(ln,tt.verticalIconBox,a.W.vertical):{box:null,offscreen:null,occluded:null}}),or&&(Dt=or.box,at=or.offscreen,Ft=or.occluded);const sa=$i(!(!or||!or.box));if(!Dt&&this.prevPlacement){const ln=this.prevPlacement.variableOffsets[Mt];ln&&(this.variableOffsets[Mt]=ln,this.markUsedJustification(L,ln.anchor,ct,sa))}}else{const Ii=(dn,sa)=>{const ln=L.getSymbolInstanceTextSize(de,ct,this.transform.zoom,_t),Aa=this.collisionIndex.placeCollisionBox(L,ln,dn,new a.P(0,0),Le,te,N,fe.predicate);return Aa&&Aa.box&&Aa.box.length&&(this.markUsedOrientation(L,sa,ct),this.placedOrientations[Mt]=sa),Aa};xi(()=>Ii(tn,a.W.horizontal),()=>{const dn=tt.verticalTextBox;return L.allowVerticalPlacement&&pt>0&&dn?(Wr(dn),Ii(dn,a.W.vertical)):{box:null,offscreen:null,occluded:null}}),$i(!!(or&&or.box&&or.box.length))}}if(ur=or,Dt=ur&&ur.box&&ur.box.length>0,at=ur&&ur.offscreen,Ft=ur&&ur.occluded,ct.useRuntimeCollisionCircles){const $i=L.text.placedSymbolArray.get(ct.centerJustifiedTextSymbolIndex>=0?ct.centerJustifiedTextSymbolIndex:ct.verticalPlacedTextSymbolIndex),xi=a.j(L.textSizeData,de,$i),Ii=B.get("text-padding");Ir=this.collisionIndex.placeCollisionCircles(L,Le,$i,L.lineVertexArray,L.glyphOffsetArray,xi,N,W,X,A,Te,fe.predicate,ct.collisionCircleDiameter*xi/a.aV,Ii,this.retainedQueryData[L.bucketInstanceId].tileID),Dt=Le||Ir.circles.length>0&&!Ir.collisionDetected,at=at&&Ir.offscreen,Ft=Ir.occluded}if(tt.iconFeatureIndex&&(vi=tt.iconFeatureIndex),tt.iconBox){const $i=xi=>{Wr(xi);const Ii=ct.hasIconTextFit&&dr?sn(dr.x,dr.y,xe,Te,this.transform.angle):new a.P(0,0),dn=L.getSymbolInstanceIconSize(pe,this.transform.zoom,ct.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(L,dn,xi,Ii,Oe,te,N,fe.predicate)};br&&br.box&&br.box.length&&tt.verticalIconBox?(Er=$i(tt.verticalIconBox),Ee=Er.box.length>0):(Er=$i(tt.iconBox),Ee=Er.box.length>0),at=at&&Er.offscreen,Rt=Er.occluded}const Hi=he||ct.numHorizontalGlyphVertices===0&&pt===0,qa=we||ct.numIconVertices===0;if(Hi||qa?qa?Hi||(Ee=Ee&&Dt):Dt=Ee&&Dt:Ee=Dt=Ee&&Dt,Dt&&ur&&ur.box&&this.collisionIndex.insertCollisionBox(ur.box,B.get("text-ignore-placement"),L.bucketInstanceId,br&&br.box&&_r?_r:vr,fe.ID),Ee&&Er&&this.collisionIndex.insertCollisionBox(Er.box,B.get("icon-ignore-placement"),L.bucketInstanceId,vi,fe.ID),Ir&&(Dt&&this.collisionIndex.insertCollisionCircles(Ir.circles,B.get("text-ignore-placement"),L.bucketInstanceId,vr,fe.ID),A)){const $i=L.bucketInstanceId;let xi=this.collisionCircleArrays[$i];xi===void 0&&(xi=this.collisionCircleArrays[$i]=new hu);for(let Ii=0;Ii<Ir.circles.length;Ii+=4)xi.circles.push(Ir.circles[Ii+0]),xi.circles.push(Ir.circles[Ii+1]),xi.circles.push(Ir.circles[Ii+2]),xi.circles.push(Ir.collisionDetected?1:0)}const Xo=L.projection.name!=="globe";Ne=Ne&&(Xo||!Ft),Ye=Ye&&(Xo||!Rt),this.placements[Mt]=new Cl(Dt||Ne,Ee||Ye,at||L.justReloaded),_.add(Mt)};if(je&&this.buildingIndex&&(this.buildingIndex.updateZOffset(L,this.retainedQueryData[L.bucketInstanceId].tileID),L.updateZOffset()),ze){const ct=L.getSortedSymbolIndexes(this.transform.angle);for(let _t=ct.length-1;_t>=0;--_t){const tt=ct[_t];Ct(L.symbolInstances.get(tt),tt,L.collisionArrays[tt])}L.hasAnyZOffset&&a.X(`${L.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(L.hasAnyZOffset){const ct=L.getSortedIndexesByZOffset();for(let _t=0;_t<ct.length;++_t){const tt=ct[_t];Ct(L.symbolInstances.get(tt),tt,L.collisionArrays[tt])}}else for(let ct=f.symbolInstanceStart;ct<f.symbolInstanceEnd;ct++)Ct(L.symbolInstances.get(ct),ct,L.collisionArrays[ct]);if(A&&L.bucketInstanceId in this.collisionCircleArrays){const ct=this.collisionCircleArrays[L.bucketInstanceId];a.m.invert(ct.invProjMatrix,N),ct.viewportMatrix=this.collisionIndex.getViewportMatrix()}L.justReloaded=!1}markUsedJustification(f,_,A,D){const{leftJustifiedTextSymbolIndex:L,centerJustifiedTextSymbolIndex:B,rightJustifiedTextSymbolIndex:N,verticalPlacedTextSymbolIndex:W,crossTileID:X}=A,J=a.aX(_),te=D===a.W.vertical?W:J==="left"?L:J==="center"?B:J==="right"?N:-1;L>=0&&(f.text.placedSymbolArray.get(L).crossTileID=te>=0&&L!==te?0:X),B>=0&&(f.text.placedSymbolArray.get(B).crossTileID=te>=0&&B!==te?0:X),N>=0&&(f.text.placedSymbolArray.get(N).crossTileID=te>=0&&N!==te?0:X),W>=0&&(f.text.placedSymbolArray.get(W).crossTileID=te>=0&&W!==te?0:X)}markUsedOrientation(f,_,A){const D=_===a.W.horizontal||_===a.W.horizontalOnly?_:0,L=_===a.W.vertical?_:0,{leftJustifiedTextSymbolIndex:B,centerJustifiedTextSymbolIndex:N,rightJustifiedTextSymbolIndex:W,verticalPlacedTextSymbolIndex:X}=A,J=f.text.placedSymbolArray;B>=0&&(J.get(B).placedOrientation=D),N>=0&&(J.get(N).placedOrientation=D),W>=0&&(J.get(W).placedOrientation=D),X>=0&&(J.get(X).placedOrientation=L)}commit(f){this.commitTime=f,this.zoomAtLastRecencyCheck=this.transform.zoom;const _=this.prevPlacement;let A=!1;this.prevZoomAdjustment=_?_.zoomAdjustment(this.transform.zoom):0;const D=_?_.symbolFadeChange(f):1,L=_?_.opacities:{},B=_?_.variableOffsets:{},N=_?_.placedOrientations:{};for(const W in this.placements){const X=this.placements[W],J=L[W];J?(this.opacities[W]=new Al(J,D,X.text,X.icon,null,X.clipped),A=A||X.text!==J.text.placed||X.icon!==J.icon.placed):(this.opacities[W]=new Al(null,D,X.text,X.icon,X.skipFade,X.clipped),A=A||X.text||X.icon)}for(const W in L){const X=L[W];if(!this.opacities[W]){const J=new Al(X,D,!1,!1);J.isHidden()||(this.opacities[W]=J,A=A||X.text.placed||X.icon.placed)}}for(const W in B)this.variableOffsets[W]||!this.opacities[W]||this.opacities[W].isHidden()||(this.variableOffsets[W]=B[W]);for(const W in N)this.placedOrientations[W]||!this.opacities[W]||this.opacities[W].isHidden()||(this.placedOrientations[W]=N[W]);A?this.lastPlacementChangeTime=f:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=_?_.lastPlacementChangeTime:f)}updateLayerOpacities(f,_){const A=new Set;for(const D of _){const L=D.getBucket(f);L&&D.latestFeatureIndex&&f.fqid===L.layerIds[0]&&(this.updateBucketOpacities(L,A,D.collisionBoxArray),L.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(L,D.tileID),L.updateZOffset()))}}updateBucketOpacities(f,_,A){f.hasTextData()&&f.text.opacityVertexArray.clear(),f.hasIconData()&&f.icon.opacityVertexArray.clear(),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexArray.clear(),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexArray.clear();const D=f.layers[0].layout,L=!!f.layers[0].dynamicFilter(),B=new Al(null,0,!1,!1,!0),N=D.get("text-allow-overlap"),W=D.get("icon-allow-overlap"),X=D.get("text-variable-anchor"),J=D.get("text-rotation-alignment")==="map",te=D.get("text-pitch-alignment")==="map",oe=new Al(null,0,N&&(W||!f.hasIconData()||D.get("icon-optional")),W&&(N||!f.hasTextData()||D.get("text-optional")),!0);!f.collisionArrays&&A&&(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData())&&f.deserializeCollisionBoxes(A);const le=(pe,fe,he)=>{for(let we=0;we<fe/4;we++)pe.opacityVertexArray.emplaceBack(he)};let de=0;for(let pe=0;pe<f.symbolInstances.length;pe++){const fe=f.symbolInstances.get(pe),{numHorizontalGlyphVertices:he,numVerticalGlyphVertices:we,crossTileID:Le,numIconVertices:Oe}=fe,xe=_.has(Le);let Te=this.opacities[Le];xe?Te=B:Te||(Te=oe,this.opacities[Le]=Te),_.add(Le);const ze=he>0||we>0,je=Oe>0,Ne=this.placedOrientations[Le],Ye=Ne===a.W.vertical,Ct=Ne===a.W.horizontal||Ne===a.W.horizontalOnly;if(!ze&&!je||Te.isHidden()||de++,ze){const ct=Ho(Te.text);le(f.text,he,Ye?Dn:ct),le(f.text,we,Ct?Dn:ct);const _t=Te.text.isHidden(),{leftJustifiedTextSymbolIndex:tt,centerJustifiedTextSymbolIndex:Mt,rightJustifiedTextSymbolIndex:pt,verticalPlacedTextSymbolIndex:Dt}=fe,Ee=f.text.placedSymbolArray,at=_t||Ye?1:0;tt>=0&&(Ee.get(tt).hidden=at),Mt>=0&&(Ee.get(Mt).hidden=at),pt>=0&&(Ee.get(pt).hidden=at),Dt>=0&&(Ee.get(Dt).hidden=_t||Ct?1:0);const Ft=this.variableOffsets[Le];Ft&&this.markUsedJustification(f,Ft.anchor,fe,Ne);const Rt=this.placedOrientations[Le];Rt&&(this.markUsedJustification(f,"left",fe,Rt),this.markUsedOrientation(f,Rt,fe))}if(je){const ct=Ho(Te.icon),{placedIconSymbolIndex:_t,verticalPlacedIconSymbolIndex:tt}=fe,Mt=f.icon.placedSymbolArray,pt=Te.icon.isHidden()?1:0;_t>=0&&(le(f.icon,Oe,Ye?Dn:ct),Mt.get(_t).hidden=pt),tt>=0&&(le(f.icon,fe.numVerticalIconVertices,Ct?Dn:ct),Mt.get(tt).hidden=pt)}if(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData()){const ct=f.collisionArrays[pe];if(ct){let _t=new a.P(0,0),tt=!0;if(ct.textBox||ct.verticalTextBox){if(X){const pt=this.variableOffsets[Le];pt?(_t=Ma(pt.anchor,pt.width,pt.height,pt.textOffset,pt.textScale),J&&_t._rotate(te?this.transform.angle:-this.transform.angle)):tt=!1}L&&(tt=!Te.clipped),ct.textBox&&jo(f.textCollisionBox.collisionVertexArray,Te.text.placed,!tt||Ye,_t.x,_t.y),ct.verticalTextBox&&jo(f.textCollisionBox.collisionVertexArray,Te.text.placed,!tt||Ct,_t.x,_t.y)}const Mt=tt&&Boolean(!Ct&&ct.verticalIconBox);ct.iconBox&&jo(f.iconCollisionBox.collisionVertexArray,Te.icon.placed,Mt,fe.hasIconTextFit?_t.x:0,fe.hasIconTextFit?_t.y:0),ct.verticalIconBox&&jo(f.iconCollisionBox.collisionVertexArray,Te.icon.placed,!Mt,fe.hasIconTextFit?_t.x:0,fe.hasIconTextFit?_t.y:0)}}}if(f.fullyClipped=de===0,f.sortFeatures(this.transform.angle),this.retainedQueryData[f.bucketInstanceId]&&(this.retainedQueryData[f.bucketInstanceId].featureSortOrder=f.featureSortOrder),f.hasTextData()&&f.text.opacityVertexBuffer&&f.text.opacityVertexBuffer.updateData(f.text.opacityVertexArray),f.hasIconData()&&f.icon.opacityVertexBuffer&&f.icon.opacityVertexBuffer.updateData(f.icon.opacityVertexArray),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexBuffer&&f.iconCollisionBox.collisionVertexBuffer.updateData(f.iconCollisionBox.collisionVertexArray),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexBuffer&&f.textCollisionBox.collisionVertexBuffer.updateData(f.textCollisionBox.collisionVertexArray),f.bucketInstanceId in this.collisionCircleArrays){const pe=this.collisionCircleArrays[f.bucketInstanceId];f.placementInvProjMatrix=pe.invProjMatrix,f.placementViewportMatrix=pe.viewportMatrix,f.collisionCircleArray=pe.circles,delete this.collisionCircleArrays[f.bucketInstanceId]}}symbolFadeChange(f){return this.fadeDuration===0?1:(f-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(f){return Math.max(0,(this.transform.zoom-f)/1.5)}hasTransitions(f){return this.stale||f-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(f,_){const A=this.zoomAtLastRecencyCheck===_?1-this.zoomAdjustment(_):1;return this.zoomAtLastRecencyCheck=_,this.commitTime+this.fadeDuration*A>f}setStale(){this.stale=!0}}function jo(S,f,_,A,D){S.emplaceBack(f?1:0,_?1:0,A||0,D||0),S.emplaceBack(f?1:0,_?1:0,A||0,D||0),S.emplaceBack(f?1:0,_?1:0,A||0,D||0),S.emplaceBack(f?1:0,_?1:0,A||0,D||0)}const ga=Math.pow(2,25),Ha=Math.pow(2,24),um=Math.pow(2,17),Co=Math.pow(2,16),kn=Math.pow(2,9),du=Math.pow(2,8),Il=Math.pow(2,1);function Ho(S){if(S.opacity===0&&!S.placed)return 0;if(S.opacity===1&&S.placed)return 4294967295;const f=S.placed?1:0,_=Math.floor(127*S.opacity);return _*ga+f*Ha+_*um+f*Co+_*kn+f*du+_*Il+f}const Dn=0;class wh{constructor(f){this._sortAcrossTiles=f.layout.get("symbol-z-order")!=="viewport-y"&&f.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(f,_,A,D,L){const B=this._bucketParts;for(;this._currentTileIndex<f.length;)if(_.getBucketParts(B,D,f[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,L())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,B.sort((N,W)=>N.sortKey-W.sortKey));this._currentPartIndex<B.length;){const N=B[this._currentPartIndex];if(_.placeLayerBucketPart(N,this._seenCrossTileIDs,A,N.symbolInstanceStart===0),this._currentPartIndex++,L())return!0}return!1}}class Sh{constructor(f,_,A,D,L,B,N,W,X){this.placement=new qd(f,L,B,N,W,X),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=A,this._showCollisionBoxes=D,this._done=!1}isDone(){return this._done}continuePlacement(f,_,A,D){const L=a.a4.now(),B=()=>{const N=a.a4.now()-L;return!this._forceFullPlacement&&N>2};for(;this._currentPlacementIndex>=0;){const N=_[f[this._currentPlacementIndex]],W=this.placement.collisionIndex.transform.zoom;if(N.type==="symbol"&&(!N.minzoom||N.minzoom<=W)&&(!N.maxzoom||N.maxzoom>W)){const X=N,J=X.layout.get("symbol-z-elevate"),te=this._inProgressLayer=this._inProgressLayer||new wh(X),oe=a.aE(N.source,N.scope);if(te.continuePlacement(J?D[oe]:A[oe],this.placement,this._showCollisionBoxes,N,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(f){return this.placement.commit(f),this.placement}}const uo=512/a.J/2;class vs{constructor(f,_,A){this.tileID=f,this.bucketInstanceId=A,this.index=new a.aZ(_.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const D=f.canonical.x*a.J,L=f.canonical.y*a.J;for(let B=0;B<_.length;B++){const{key:N,crossTileID:W,tileAnchorX:X,tileAnchorY:J}=_.get(B),te=Math.floor((D+X)*uo),oe=Math.floor((L+J)*uo);this.index.add(te,oe),this.keys.push(N),this.crossTileIDs.push(W)}this.index.finish()}findMatches(f,_,A){const D=this.tileID.canonical.z<_.canonical.z?1:Math.pow(2,this.tileID.canonical.z-_.canonical.z),L=uo/Math.pow(2,_.canonical.z-this.tileID.canonical.z),B=_.canonical.x*a.J,N=_.canonical.y*a.J;for(let W=0;W<f.length;W++){const X=f.get(W);if(X.crossTileID)continue;const{key:J,tileAnchorX:te,tileAnchorY:oe}=X,le=Math.floor((B+te)*L),de=Math.floor((N+oe)*L),pe=this.index.range(le-D,de-D,le+D,de+D);for(const fe of pe){const he=this.crossTileIDs[fe];if(this.keys[fe]===J&&!A.has(he)){A.add(he),X.crossTileID=he;break}}}}}class fu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class wi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(f){const _=Math.round((f-this.lng)/360);if(_!==0)for(const A in this.indexes){const D=this.indexes[A],L={};for(const B in D){const N=D[B];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+_),L[N.tileID.key]=N}this.indexes[A]=L}this.lng=f}addBucket(f,_,A){if(this.indexes[f.overscaledZ]&&this.indexes[f.overscaledZ][f.key]){if(this.indexes[f.overscaledZ][f.key].bucketInstanceId===_.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(f.overscaledZ,this.indexes[f.overscaledZ][f.key])}for(let L=0;L<_.symbolInstances.length;L++)_.symbolInstances.get(L).crossTileID=0;this.usedCrossTileIDs[f.overscaledZ]||(this.usedCrossTileIDs[f.overscaledZ]=new Set);const D=this.usedCrossTileIDs[f.overscaledZ];for(const L in this.indexes){const B=this.indexes[L];if(Number(L)>f.overscaledZ)for(const N in B){const W=B[N];W.tileID.isChildOf(f)&&W.findMatches(_.symbolInstances,f,D)}else{const N=B[f.scaledTo(Number(L)).key];N&&N.findMatches(_.symbolInstances,f,D)}}for(let L=0;L<_.symbolInstances.length;L++){const B=_.symbolInstances.get(L);B.crossTileID||(B.crossTileID=A.generate(),D.add(B.crossTileID))}return this.indexes[f.overscaledZ]===void 0&&(this.indexes[f.overscaledZ]={}),this.indexes[f.overscaledZ][f.key]=new vs(f,_.symbolInstances,_.bucketInstanceId),!0}removeBucketCrossTileIDs(f,_){for(const A of _.crossTileIDs)this.usedCrossTileIDs[f].delete(A)}removeStaleBuckets(f){let _=!1;for(const A in this.indexes){const D=this.indexes[A];for(const L in D)f[D[L].bucketInstanceId]||(this.removeBucketCrossTileIDs(A,D[L]),delete D[L],_=!0)}return _}}class gc{constructor(){this.layerIndexes={},this.crossTileIDs=new fu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(f,_,A,D){let L=this.layerIndexes[f.fqid];L===void 0&&(L=this.layerIndexes[f.fqid]=new wi);let B=!1;const N={};D.name!=="globe"&&L.handleWrapJump(A);for(const W of _){const X=W.getBucket(f);X&&f.fqid===X.layerIds[0]&&(X.bucketInstanceId||(X.bucketInstanceId=++this.maxBucketInstanceId),L.addBucket(W.tileID,X,this.crossTileIDs)&&(B=!0),N[X.bucketInstanceId]=!0)}return L.removeStaleBuckets(N)&&(B=!0),B}pruneUnusedLayers(f){const _={};f.forEach(A=>{_[A]=!0});for(const A in this.layerIndexes)_[A]||delete this.layerIndexes[A]}}var El=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,Us=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,vec2 pos,vec2 lod_coord) {vec2 size=vec2(textureSize(image,0));vec2 dx=dFdx(lod_coord.xy*size);vec2 dy=dFdy(lod_coord.xy*size);float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}`,Zd=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Dl="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",it=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture(u_depth,uv-df.xz)),unpack_depth(texture(u_depth,uv+df.xz)),unpack_depth(texture(u_depth,uv-df.zy)),unpack_depth(texture(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,ee=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,ve=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Qe=`#ifdef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);vec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return (texCoord.xxyy+vec2(1.5,0.5).xyxy)/texResolution.xxyy;}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;vec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texture(u_image0,c.yz),texture(u_image0,c.xz),texture(u_image0,c.yw),texture(u_image0,c.xw)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;vec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texture(u_image1,c.yz),texture(u_image1,c.xz),texture(u_image1,c.yw),texture(u_image1,c.xw)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texture(u_image0,texCoord);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texture(u_image1,texCoord);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,yt=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,Zt=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef NATIVE
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const Sr=[];Pn(El,Sr),Pn(Zd,Sr),Pn(Us,Sr);const Jr={"_prelude_fog.vertex.glsl":ee,"_prelude_terrain.vertex.glsl":it,"_prelude_shadow.vertex.glsl":yt,"_prelude_fog.fragment.glsl":ve,"_prelude_shadow.fragment.glsl":Zt,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Qe},Mi={};Or("",it),Or(ve,ee),Or(Zt,yt),Or(Qe,"");const Xn=Or(Us,Zd),_n=El;var Zi={background:Or(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Or(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Or(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Or("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Or(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Or(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Or("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in float a_size_scale;in vec2 a_padding;in float a_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(a_z_offset+elevation(a_anchor_pos)),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Or("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Or("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Or(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Or(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Or(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Or(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Or(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
uniform float u_emissive_strength;in float v_height;void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,v_depth);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,u_emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=max(0.01,cutoff_opacity(u_cutoff_params,ground.z));if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff < 0.01 && centroid_pos.x !=0.0));gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:Or(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:Or(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
out vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:Or(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;in float v_depth;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,v_depth));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);v_depth=gl_Position.w;
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:Or(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;HANDLE_WIREFRAME_DEBUG;
#endif
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(1.0,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:Or(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Or(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Or(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {    
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trimmed,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Or(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float pattern_x=v_linesofar/pattern_size.x*aspect;float x=mod(pattern_x,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting_ground(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Or(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),symbolIcon:Or(`#include "_prelude_lighting.glsl"
uniform sampler2D u_texture;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
in float v_fade_opacity;in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
uniform mediump float u_icon_saturation;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
lowp float alpha=opacity*v_fade_opacity;vec4 out_color;
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b)*alpha;
#else
out_color=texture(u_texture,v_tex_a)*alpha;
#endif
#ifdef SATURATION
vec3 luma=vec3(dot(out_color.rgb,vec3(0.2126,0.7152,0.0722)));out_color.rgb=mix(luma,out_color.rgb,u_icon_saturation);
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
v_tex_a=a_tex/u_texsize;
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
v_fade_opacity=out_fade_opacity;}`),symbolSDF:Or(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;in float v_draw_halo;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out float v_draw_halo;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,out_fade_opacity);}`),symbolTextAndIcon:Or(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_halo;in float v_draw_halo;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out float v_draw_halo;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,out_fade_opacity,is_sdf);}`),terrainRaster:Or(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;in float v_depth;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,v_depth,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Or("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:Or(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Dl),skyboxGradient:Or(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Dl),skyboxCapture:Or(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Or(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Or(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:Or(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform sampler2D u_depthTexture;uniform vec2 u_inv_depth_size;bool isOccluded() {vec2 coord=gl_FragCoord.xy*u_inv_depth_size;highp float depth=unpack_depth(texture(u_depthTexture,coord));return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
return vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);color=mix(color,v_color_mix.rgb,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=u_matrix*pos;pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 shadow_pos=local_pos;
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normalize(normal_3f));shadow_pos+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1);v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:Or(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=u_matrix*pos;
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:Or(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`)};function Pn(S,f){const _=S.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let A of _)if(A=A.trim(),A[0]==="#"&&A.includes("if")&&!A.includes("endif")){A=A.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const D=A.split(" ");for(const L of D)f.includes(L)||f.push(L)}}function Or(S,f){const _=/#include\s+"([^"]+)"/g,A=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let D=f.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);D&&(D=D.map(X=>{const J=X.split(" ");return J[J.length-1]}),D=[...new Set(D)]);const L={},B=[],N=[];if(S=S.replace(_,(X,J)=>(N.push(J),"")),(f=f.replace(_,(X,J)=>(B.push(J),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let W=[...Sr];Pn(S,W),Pn(f,W);for(const X of[...B,...N])Jr[X]||console.error(`Undefined include: ${X}`),Mi[X]||(Mi[X]=[],Pn(Jr[X],Mi[X])),W=[...W,...Mi[X]];return{fragmentSource:S=S.replace(A,(X,J,te,oe,le)=>(L[le]=!0,J==="define"?`
#ifndef HAS_UNIFORM_u_${le}
in ${te} ${oe} ${le};
#else
uniform ${te} ${oe} u_${le};
#endif
`:J==="initialize"?`
#ifdef HAS_UNIFORM_u_${le}
    ${te} ${oe} ${le} = u_${le};
#endif
`:J==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${le}
    in ${te} ${oe} ${le};
#endif
`:J==="initialize-attribute"?"":void 0)),vertexSource:f=f.replace(A,(X,J,te,oe,le)=>{const de=oe==="float"?"vec2":oe,pe=le.match(/color/)?"color":de;return J==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${le}
in ${te} ${oe} a_${le};
#endif
`:L[le]?J==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
in ${te} ${de} a_${le};
out ${te} ${oe} ${le};
#else
uniform ${te} ${oe} u_${le};
#endif
`:J==="initialize"?pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = a_${le};
#else
    ${te} ${oe} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = unpack_mix_${pe}(a_${le}, u_${le}_t);
#else
    ${te} ${oe} ${le} = u_${le};
#endif
`:J==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${le}
    in ${te} ${oe} a_${le};
    out ${te} ${oe} ${le};
#endif
`:J==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${le}
    ${le} = a_${le};
#endif
`:void 0:J==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
in ${te} ${de} a_${le};
#else
uniform ${te} ${oe} u_${le};
#endif
`:J==="define-instanced"?pe==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${le}0;
in vec4 a_${le}1;
in vec4 a_${le}2;
in vec4 a_${le}3;
#else
uniform ${te} ${oe} u_${le};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${te} ${de} a_${le};
#else
uniform ${te} ${oe} u_${le};
#endif
`:J==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${le}
    ${te} ${oe} ${le} = a_${le};
#endif
`:pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${te} ${oe} ${le} = a_${le};
#else
    ${te} ${oe} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${te} ${oe} ${le} = unpack_mix_${pe}(a_${le}, u_${le}_t);
#else
    ${te} ${oe} ${le} = u_${le};
#endif
`}),staticAttributes:D,usedDefines:W,vertexIncludes:B,fragmentIncludes:N}}class co{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(f,_,A,D,L,B,N,W){this.context=f;let X=this.boundPaintVertexBuffers.length!==D.length;for(let te=0;!X&&te<D.length;te++)this.boundPaintVertexBuffers[te]!==D[te]&&(X=!0);let J=this.boundDynamicVertexBuffers.length!==N.length;for(let te=0;!J&&te<N.length;te++)this.boundDynamicVertexBuffers[te]!==N[te]&&(J=!0);if(!this.vao||this.boundProgram!==_||this.boundLayoutVertexBuffer!==A||X||J||this.boundIndexBuffer!==L||this.boundVertexOffset!==B)this.freshBind(_,A,D,L,B,N,W);else{f.bindVertexArrayOES.set(this.vao);for(const te of N)te&&(te.bind(),W&&te.instanceCount&&te.setVertexAttribDivisor(f.gl,_,W));L&&L.dynamicDraw&&L.bind()}}freshBind(f,_,A,D,L,B,N){const W=f.numAttributes,X=this.context,J=X.gl;this.vao&&this.destroy(),this.vao=X.gl.createVertexArray(),X.bindVertexArrayOES.set(this.vao),this.boundProgram=f,this.boundLayoutVertexBuffer=_,this.boundPaintVertexBuffers=A,this.boundIndexBuffer=D,this.boundVertexOffset=L,this.boundDynamicVertexBuffers=B,_.enableAttributes(J,f),_.bind(),_.setVertexAttribPointers(J,f,L);for(const te of A)te.enableAttributes(J,f),te.bind(),te.setVertexAttribPointers(J,f,L);for(const te of B)te&&(te.enableAttributes(J,f),te.bind(),te.setVertexAttribPointers(J,f,L),N&&te.instanceCount&&te.setVertexAttribDivisor(J,f,N));D&&D.bind(),X.currentNumAttributes=W}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function Wa(S,f){const _=Math.pow(2,f.canonical.z),A=f.canonical.y;return[new a.M(0,A/_).toLngLat().lat,new a.M(0,(A+1)/_).toLngLat().lat]}function js(S,f,_,A,D,L,B){const N=S.context,W=N.gl,X=_.hillshadeFBO;if(!X)return;S.prepareDrawTile();const J=S.isTileAffectedByFog(f),te=S.getOrCreateProgram("hillshade",{overrideFog:J});N.activeTexture.set(W.TEXTURE0),W.bindTexture(W.TEXTURE_2D,X.colorAttachment.get());const oe=((fe,he,we,Le)=>{const Oe=we.paint.get("hillshade-shadow-color"),xe=we.paint.get("hillshade-highlight-color"),Te=we.paint.get("hillshade-accent-color"),ze=we.paint.get("hillshade-emissive-strength");let je=a.d(we.paint.get("hillshade-illumination-direction"));if(we.paint.get("hillshade-illumination-anchor")==="viewport")je-=fe.transform.angle;else if(fe.style&&fe.style.enable3dLights()&&fe.style.directionalLight){const Ye=fe.style.directionalLight.properties.get("direction"),Ct=a.b3(Ye.x,Ye.y,Ye.z);je=a.d(Ct[1])}const Ne=!fe.options.moving;return{u_matrix:Le||fe.transform.calculateProjMatrix(he.tileID.toUnwrapped(),Ne),u_image:0,u_latrange:Wa(0,he.tileID),u_light:[we.paint.get("hillshade-exaggeration"),je],u_shadow:Oe,u_highlight:xe,u_emissive_strength:ze,u_accent:Te}})(S,_,A,S.terrain?f.projMatrix:null);S.uploadCommonUniforms(N,te,f.toUnwrapped());const{tileBoundsBuffer:le,tileBoundsIndexBuffer:de,tileBoundsSegments:pe}=S.getTileBoundsBuffers(_);te.draw(S,W.TRIANGLES,D,L,B,a.b5.disabled,oe,A.id,le,de,pe)}function _s(S,f,_){if(!f.needsDEMTextureUpload)return;const A=S.context,D=A.gl;A.pixelStoreUnpackPremultiplyAlpha.set(!1),f.demTexture=f.demTexture||S.getTileTexture(_.stride);const L=_.getPixels();f.demTexture?f.demTexture.update(L,{premultiply:!1}):f.demTexture=new a.a9(A,L,D.R32F,{premultiply:!1}),f.needsDEMTextureUpload=!1}function vc(S,f,_){const A=S.context,D=A.gl;if(!f.dem)return;const L=f.dem;if(A.activeTexture.set(D.TEXTURE1),_s(S,f,L),!f.demTexture)return;f.demTexture.bind(D.NEAREST,D.CLAMP_TO_EDGE);const B=L.dim;A.activeTexture.set(D.TEXTURE0);let N=f.hillshadeFBO;if(!N){const oe=new a.a9(A,{width:B,height:B,data:null},D.RGBA);oe.bind(D.LINEAR,D.CLAMP_TO_EDGE),N=f.hillshadeFBO=A.createFramebuffer(B,B,!0,"renderbuffer"),N.colorAttachment.set(oe.texture)}A.bindFramebuffer.set(N.framebuffer),A.viewport.set([0,0,B,B]);const{tileBoundsBuffer:W,tileBoundsIndexBuffer:X,tileBoundsSegments:J}=S.getMercatorTileBoundsBuffers(),te=[];S.linearFloatFilteringSupported()&&te.push("TERRAIN_DEM_FLOAT_FORMAT"),S.getOrCreateProgram("hillshadePrepare",{defines:te}).draw(S,D.TRIANGLES,a.b4.disabled,a.b6.disabled,a.a.unblended,a.b5.disabled,((oe,le)=>{const de=le.stride,pe=a.m.create();return a.m.ortho(pe,0,a.J,-a.J,0,0,1),a.m.translate(pe,pe,[0,-a.J,0]),{u_matrix:pe,u_image:1,u_dimension:[de,de],u_zoom:oe.overscaledZ}})(f.tileID,L),_.id,W,X,J),f.needsHillshadePrepare=!1}const Wo=S=>({u_matrix:new a.a_(S),u_image0:new a.a$(S),u_skirt_height:new a.b2(S),u_ground_shadow_factor:new a.b7(S)}),Th=(S,f,_)=>({u_matrix:S,u_image0:0,u_skirt_height:f,u_ground_shadow_factor:_}),Uv=(S,f,_,A,D,L,B,N,W,X,J,te,oe,le,de)=>({u_proj_matrix:Float32Array.from(S),u_globe_matrix:f,u_normalize_matrix:Float32Array.from(A),u_merc_matrix:_,u_zoom_transition:D,u_merc_center:L,u_image0:0,u_frustum_tl:B,u_frustum_tr:N,u_frustum_br:W,u_frustum_bl:X,u_globe_pos:J,u_globe_radius:te,u_viewport:oe,u_grid_matrix:de?Float32Array.from(de):new Float32Array(9),u_skirt_height:le}),_c=(S,f)=>{if(f>0&&S.terrain&&a.X("Cutoff is currently disabled on terrain"),f<=0||S.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const _=S.transform,A=Math.max(Math.abs(_._zoom-(S.minCutoffZoom-1)),1),D=_.isLODDisabled(!1)?a.an(60,45,_.pitch):a.an(30,15,_.pitch),L=_._farZ-_._nearZ,B=f*_.height,N=((1-(W=D))*_.cameraToCenterDistance+W*(_._farZ+B))*A;var W;return{shouldRenderCutoff:D<1,uniformValues:{u_cutoff_params:[_._nearZ,_._farZ,(N-_._nearZ)/L,(N-B-_._nearZ)/L]}}};function jv(S,f){return S!=null&&f!=null&&!(!S.hasData()||!f.hasData())&&S.demTexture!=null&&f.demTexture!=null&&S.tileID.key!==f.tileID.key}const Hs=new class{constructor(){this.operations={}}newMorphing(S,f,_,A,D){if(S in this.operations){const L=this.operations[S];L.to.tileID.key!==_.tileID.key&&(L.queued=_)}else this.operations[S]={startTime:A,phase:0,duration:D,from:f,to:_,queued:null}}getMorphValuesForProxy(S){if(!(S in this.operations))return null;const f=this.operations[S];return{from:f.from,to:f.to,phase:f.phase}}update(S){for(const f in this.operations){const _=this.operations[f];for(_.phase=(S-_.startTime)/_.duration;_.phase>=1||!this._validOp(_);)if(!this._nextOp(_,S)){delete this.operations[f];break}}}_nextOp(S,f){return!!S.queued&&(S.from=S.to,S.to=S.queued,S.queued=null,S.phase=0,S.startTime=f,!0)}_validOp(S){return S.from.hasData()&&S.to.hasData()}},cm={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Hv(S,f,_){if(f===0)return 0;const A=f<1&&_===514?.25/f:1;return 6*Math.pow(1.5,22-S)*Math.max(f,1)*A}function Wv(S,f){const _=1<<S.z;return!f&&(S.x===0||S.x===_-1)||S.y===0||S.y===_-1}const hm=S=>({u_matrix:S});function dm(S,f,_,A,D){if(D>0){const L=a.a4.now(),B=(L-S.timeAdded)/D,N=f?(L-f.timeAdded)/D:-1,W=_.getSource(),X=A.coveringZoomLevel({tileSize:W.tileSize,roundZoom:W.roundZoom}),J=!f||Math.abs(f.tileID.overscaledZ-X)>Math.abs(S.tileID.overscaledZ-X),te=J&&S.refreshedUponExpiration?1:a.c(J?B:1-N,0,1);return S.refreshedUponExpiration&&B>=1&&(S.refreshedUponExpiration=!1),f?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}class tr extends a.bq{constructor(f){const _={type:"raster-dem",maxzoom:f.transform.maxZoom},A=new a.br(a.bs(),null),D=oa("mock-dem",_,A,f.style);super("mock-dem",D,!1),D.setEventedParent(this),this._sourceLoaded=!0}_loadTile(f,_){f.state="loaded",_(null)}}class Rx extends a.bq{constructor(f){const _=oa("proxy",{type:"geojson",maxzoom:f.transform.maxZoom},new a.br(a.bs(),null),f.style);super("proxy",_,!1),_.setEventedParent(this),this.map=this.getSource().map=f,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(f,_,A){if(f.freezeTileCoverage)return;this.transform=f;const D=f.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((L,B)=>{if(L[B.key]="",!this._tiles[B.key]){const N=new a.bt(B,this._source.tileSize*B.overscaleFactor(),f.tileZoom);N.state="loaded",this._tiles[B.key]=N}return L},{});for(const L in this._tiles)L in D||(this.freeFBO(L),this._tiles[L].unloadVectorData(),delete this._tiles[L])}freeFBO(f){const _=this.proxyCachedFBO[f];if(_!==void 0){const A=Object.values(_);this.renderCachePool.push(...A),delete this.proxyCachedFBO[f]}}deallocRenderCache(){this.renderCache.forEach(f=>f.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class fm extends a.O{constructor(f,_,A){super(f.overscaledZ,f.wrap,f.canonical.z,f.canonical.x,f.canonical.y),this.proxyTileKey=_,this.projMatrix=A}}class qv extends a.bk{constructor(f,_){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},f.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),f.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),f.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=f,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[A,D,L]=function(W){const X=new a.bo,J=new a.bp,te=131;X.reserve(17161),J.reserve(33800);const oe=a.J/128,le=a.J+oe/2,de=le+oe;for(let fe=-oe;fe<de;fe+=oe)for(let he=-oe;he<de;he+=oe){const we=he<0||he>le||fe<0||fe>le?24575:0,Le=a.c(Math.round(he),0,a.J),Oe=a.c(Math.round(fe),0,a.J);X.emplaceBack(Le+we,Oe)}const pe=(fe,he)=>{const we=he*te+fe;J.emplaceBack(we+1,we,we+te),J.emplaceBack(we+te,we+te+1,we+1)};for(let fe=1;fe<129;fe++)for(let he=1;he<129;he++)pe(he,fe);return[0,129].forEach(fe=>{for(let he=0;he<130;he++)pe(he,fe),pe(fe,he)}),[X,J,32768]}(),B=f.context;this.gridBuffer=B.createVertexBuffer(A,a.bl.members),this.gridIndexBuffer=B.createIndexBuffer(D),this.gridSegments=a.bm.simpleSegment(0,0,A.length,D.length),this.gridNoSkirtSegments=a.bm.simpleSegment(0,0,A.length,L),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Rx(_.map),this.orthoMatrix=a.m.create(),a.m.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,a.J,0,a.J,0,1);const N=B.gl;this._overlapStencilMode=new a.b6({func:N.GEQUAL,mask:255},0,255,N.KEEP,N.KEEP,N.REPLACE),this._previousZoom=f.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=_,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new tr(_.map),this._pendingGroundEffectLayers=[]}set style(f){f.on("data",this._onStyleDataEvent.bind(this)),this._style=f,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(f,_,A){if(f&&f.terrain){this._style!==f&&(this.style=f,this._evaluationZoom=void 0);const D=f.terrain.properties,L=f.terrain.drapeRenderMode===0,B=f.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=a.a4.now();const N=f.terrain&&f.terrain.scope,W=D.get("source"),X=L?this._mockSourceCache:f.getSourceCache(W,N);if(!X)return void a.X(`Couldn't find terrain source "${W}".`);if(this.sourceCache=X,this._exaggeration=B?this.calculateExaggeration(_):D.get("exaggeration"),!_.projection.requiresDraping&&B&&this._exaggeration===0)return void this._disable();this.enabled=!0;const J=()=>{this.sourceCache.used&&a.X(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const te=this.getScaledDemTileSize();this.sourceCache.update(_,te,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,J(),this._initializing=!0),J(),_.updateElevation(!0,A),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(_),this._emptyDEMTextureDirty=!0,this._previousZoom=_.zoom}else this._disable()}calculateExaggeration(f){const _=this._previousCameraAltitude,A=f.getFreeCameraOptions().position.z/f.pixelsPerMeter*f.worldSize;this._previousCameraAltitude=A;const D=_!=null?A-_:Number.MAX_VALUE;if(Math.abs(D)<2)return this._exaggeration;const L=f.zoom,B=this._style.terrain;if(!this._previousUpdateTimestamp)return B.getExaggeration(L);let N=L-this._previousZoom;const W=this._previousUpdateTimestamp;let X=L;this._evaluationZoom!=null&&(X=this._evaluationZoom,Math.abs(L-X)>.5&&(N=.5*(L-X+N)),N*D<0&&(X+=N)),this._evaluationZoom=X;const J=B.getExaggeration(X),te=J===B.getExaggeration(Math.max(0,X-.1));if(te&&Math.abs(J-this._exaggeration)<.01)return J;let oe=Math.min(.1,.00375*(this._updateTimestamp-W));return(te||J<.1||Math.abs(N)<1e-4)&&(oe=Math.min(.2,4*oe)),a.n(this._exaggeration,J,oe)}resetTileLookupCache(f){this._findCoveringTileCache[f]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(f){f.coord&&f.dataType==="source"?this._clearRenderCacheForTile(f.sourceCacheId,f.coord):f.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const f in this._style._mergedSourceCaches)this._style._mergedSourceCaches[f].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(f=>f.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const f=2*this.proxySourceCache.getSource().tileSize;return[f,f]}set useVertexMorphing(f){this._useVertexMorphing=f}updateTileBinding(f){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const _=this.proxySourceCache,A=this.painter.transform;this._initializing&&(this._initializing=A._centerAltitude===0&&this.getAtPointOrZero(a.M.fromLngLat(A.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const D=this.proxyCoords=_.getIds().map(W=>{const X=_.getTileByID(W).tileID;return X.projMatrix=A.calculateProjMatrix(X.toUnwrapped()),X});(function(W,X){const J=X.transform.pointCoordinate(X.transform.getCameraPoint()),te=new a.P(J.x,J.y);W.sort((oe,le)=>{if(le.overscaledZ-oe.overscaledZ)return le.overscaledZ-oe.overscaledZ;const de=new a.P(oe.canonical.x+(1<<oe.canonical.z)*oe.wrap,oe.canonical.y),pe=new a.P(le.canonical.x+(1<<le.canonical.z)*le.wrap,le.canonical.y),fe=te.mult(1<<oe.canonical.z);return fe.x-=.5,fe.y-=.5,fe.distSqr(de)-fe.distSqr(pe)})})(D,this.painter);const L=this.proxyToSource||{};this.proxyToSource={},D.forEach(W=>{this.proxyToSource[W.key]={}}),this.terrainTileForTile={};const B=this._style._mergedSourceCaches;for(const W in B){const X=B[W];if(!X.used||(X!==this.sourceCache&&this.resetTileLookupCache(X.id),this._setupProxiedCoordsForOrtho(X,f[W],L),X.usedForTerrain))continue;const J=f[W];X.getSource().reparseOverscaled&&this._assignTerrainTiles(J)}this.proxiedCoords[_.id]=D.map(W=>new fm(W,W.key,this.orthoMatrix)),this._assignTerrainTiles(D),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(L),this.renderingToTexture=!1;const N={};this._visibleDemTiles=[];for(const W of this.proxyCoords){const X=this.terrainTileForTile[W.key];if(!X)continue;const J=X.tileID.key;J in N||(this._visibleDemTiles.push(X),N[J]=J)}}_assignTerrainTiles(f){this._initializing||f.forEach(_=>{if(this.terrainTileForTile[_.key])return;const A=this._findTileCoveringTileID(_,this.sourceCache);A&&(this.terrainTileForTile[_.key]=A)})}_prepareDEMTextures(){const f=this.painter.context,_=f.gl;for(const A in this.terrainTileForTile){const D=this.terrainTileForTile[A],L=D.dem;!L||D.demTexture&&!D.needsDEMTextureUpload||(f.activeTexture.set(_.TEXTURE1),_s(this.painter,D,L))}}_prepareDemTileUniforms(f,_,A,D){if(!_||_.demTexture==null)return!1;const L=f.tileID.canonical,B=Math.pow(2,_.tileID.canonical.z-L.z),N=D||"";return A[`u_dem_tl${N}`]=[L.x*B%1,L.y*B%1],A[`u_dem_scale${N}`]=B,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const f=this.painter.context,_=f.gl;if(!this._emptyDepthBufferTexture){const A=new a.a5({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new a.a9(f,A,_.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let f=0;const _=this._visibleDemTiles.reduce((A,D)=>{if(!D.dem)return A;const L=D.dem.tree.minimums[0];return L>0&&f++,A+L},0);return f?_/f:0}_updateEmptyDEMTexture(){const f=this.painter.context,_=f.gl;f.activeTexture.set(_.TEXTURE2);const A=this._getLoadedAreaMinimum(),[D,L]=(()=>{const N=new a.bu({width:1,height:1},new Float32Array([A]));return[_.R32F,N]})();this._emptyDEMTextureDirty=!1;let B=this._emptyDEMTexture;return B?B.update(L,{premultiply:!1}):B=this._emptyDEMTexture=new a.a9(f,L,D,{premultiply:!1}),B}setupElevationDraw(f,_,A){const D=this.painter.context,L=D.gl,B={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0};B.u_exaggeration=this.exaggeration();let N=null,W=null,X=1;if(A&&A.morphing&&this._useVertexMorphing){const oe=A.morphing.srcDemTile,le=A.morphing.dstDemTile;X=A.morphing.phase,oe&&le&&(this._prepareDemTileUniforms(f,oe,B,"_prev")&&(W=oe),this._prepareDemTileUniforms(f,le,B)&&(N=le))}const J=oe=>oe&&oe.demTexture&&this.painter.linearFloatFilteringSupported()?L.LINEAR:L.NEAREST,te=oe=>{B.u_dem_size=oe.size[0]===1?1:oe.size[0]-2};if(W&&N)D.activeTexture.set(L.TEXTURE2),N.demTexture.bind(J(N),L.CLAMP_TO_EDGE),D.activeTexture.set(L.TEXTURE4),W.demTexture.bind(J(W),L.CLAMP_TO_EDGE),N.demTexture&&te(N.demTexture),B.u_dem_lerp=X;else{N=this.terrainTileForTile[f.tileID.key],D.activeTexture.set(L.TEXTURE2);const oe=this._prepareDemTileUniforms(f,N,B)?N.demTexture:this.emptyDEMTexture;oe.bind(J(N),L.CLAMP_TO_EDGE),te(oe)}if(D.activeTexture.set(L.TEXTURE3),A&&A.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE),this._depthFBO&&(B.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE),B.u_depth_size_inv=[1,1]),A&&A.useMeterToDem&&N){const oe=(1<<N.tileID.canonical.z)*a.b(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;B.u_meter_to_dem=oe}if(A&&A.labelPlaneMatrixInv&&(B.u_label_plane_matrix_inv=A.labelPlaneMatrixInv),_.setTerrainUniformValues(D,B),this.painter.transform.projection.name==="globe"){const oe=this.globeUniformValues(this.painter.transform,f.tileID.canonical,A&&A.useDenormalizedUpVectorScale);_.setGlobeUniformValues(D,oe)}}globeUniformValues(f,_,A){const D=f.projection;return{u_tile_tl_up:D.upVector(_,0,0),u_tile_tr_up:D.upVector(_,a.J,0),u_tile_br_up:D.upVector(_,a.J,a.J),u_tile_bl_up:D.upVector(_,0,a.J),u_tile_up_scale:A?a.bn(1):D.upVectorScale(_,f.center.lat,f.worldSize).metersToTile}}renderToBackBuffer(f){const _=this.painter,A=this.painter.context;f.length!==0&&(A.bindFramebuffer.set(null),A.viewport.set([0,0,_.width,_.height]),_.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(D,L,B,N,W){if(D.transform.projection.name==="globe")(function(X,J,te,oe,le){const de=X.context,pe=de.gl;let fe,he;const we=X.transform,Le=a.bb(X,de,we),Oe=(_t,tt)=>{if(he===tt)return;const Mt=[cm[tt],"PROJECTION_GLOBE_VIEW"];Le&&Mt.push("CUSTOM_ANTIALIASING");const pt=X.isTileAffectedByFog(_t);fe=X.getOrCreateProgram("globeRaster",{defines:Mt,overrideFog:pt}),he=tt},xe=X.colorModeForRenderPass(),Te=new a.b4(pe.LEQUAL,a.b4.ReadWrite,X.depthRangeFor3D);Hs.update(le);const ze=a.bc(we),je=[a.E(we.center.lng),a.H(we.center.lat)],Ne=X.globeSharedBuffers,Ye=[we.width*a.a4.devicePixelRatio,we.height*a.a4.devicePixelRatio],Ct=Float32Array.from(we.globeMatrix),ct={useDenormalizedUpVectorScale:!0};{const _t=X.transform,tt=Hv(_t.zoom,J.exaggeration(),J.sourceCache._source.tileSize);he=-1;const Mt=pe.TRIANGLES;for(const pt of oe){const Dt=te.getTile(pt),Ee=a.b6.disabled,at=J.prevTerrainTileForTile[pt.key],Ft=J.terrainTileForTile[pt.key];jv(at,Ft)&&Hs.newMorphing(pt.key,at,Ft,le,250),de.activeTexture.set(pe.TEXTURE0),Dt.texture&&Dt.texture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE);const Rt=Hs.getMorphValuesForProxy(pt.key),dr=Rt?1:0;Rt&&a.bd(ct,{morphing:{srcDemTile:Rt.from,dstDemTile:Rt.to,phase:a.ba(Rt.phase)}});const or=a.be(pt.canonical),br=a.bf(or.getCenter().lat),ur=a.bg(pt.canonical,or,br,_t.worldSize/_t._pixelsPerMercatorPixel),Ir=a.bh(a.bi(pt.canonical)),Er=Uv(_t.expandedFarZProjMatrix,Ct,ze,Ir,a.ao(_t.zoom),je,_t.frustumCorners.TL,_t.frustumCorners.TR,_t.frustumCorners.BR,_t.frustumCorners.BL,_t.globeCenterInViewSpace,_t.globeRadius,Ye,tt,ur);if(Oe(pt,dr),fe&&(J.setupElevationDraw(Dt,fe,ct),X.uploadCommonUniforms(de,fe,pt.toUnwrapped()),Ne)){const[vr,_r,vi]=Ne.getGridBuffers(br,tt!==0);fe.draw(X,Mt,Te,Ee,xe,a.b5.backCCW,Er,"globe_raster",vr,_r,vi)}}}if(Ne&&(X.renderDefaultNorthPole||X.renderDefaultSouthPole)){const _t=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Le&&_t.push("CUSTOM_ANTIALIASING"),fe=X.getOrCreateProgram("globeRaster",{defines:_t});for(const tt of oe){const{x:Mt,y:pt,z:Dt}=tt.canonical,Ee=pt===0,at=pt===(1<<Dt)-1,[Ft,Rt,dr,or]=Ne.getPoleBuffers(Dt,!1);if(or&&(Ee||at)){const br=te.getTile(tt);de.activeTexture.set(pe.TEXTURE0),br.texture&&br.texture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE);let ur=a.bj(Dt,Mt,we);const Ir=a.bh(a.bi(tt.canonical)),Er=(vr,_r)=>vr.draw(X,pe.TRIANGLES,Te,a.b6.disabled,xe,a.b5.disabled,Uv(we.expandedFarZProjMatrix,ur,ur,Ir,0,je,we.frustumCorners.TL,we.frustumCorners.TR,we.frustumCorners.BR,we.frustumCorners.BL,we.globeCenterInViewSpace,we.globeRadius,Ye,0),"globe_pole_raster",_r,dr,or);J.setupElevationDraw(br,fe,ct),X.uploadCommonUniforms(de,fe,tt.toUnwrapped()),Ee&&X.renderDefaultNorthPole&&Er(fe,Ft),at&&X.renderDefaultSouthPole&&(ur=a.m.scale(a.m.create(),ur,[1,-1,1]),Er(fe,Rt))}}}})(D,L,B,N,W);else{const X=D.context,J=X.gl;let te,oe;const le=D.shadowRenderer,de=_c(D,D.longestCutoffRange),pe=xe=>{if(oe===xe)return;const Te=[];Te.push(cm[xe]),de.shouldRenderCutoff&&Te.push("RENDER_CUTOFF"),te=D.getOrCreateProgram("terrainRaster",{defines:Te}),oe=xe},fe=D.colorModeForRenderPass(),he=new a.b4(J.LEQUAL,a.b4.ReadWrite,D.depthRangeFor3D);Hs.update(W);const we=D.transform,Le=Hv(we.zoom,L.exaggeration(),L.sourceCache._source.tileSize);let Oe=[0,0,0];if(le){const xe=D.style.directionalLight,Te=D.style.ambientLight;xe&&Te&&(Oe=Am(xe,Te))}{oe=-1;const xe=J.TRIANGLES,[Te,ze]=[L.gridIndexBuffer,L.gridSegments];for(const je of N){const Ne=B.getTile(je),Ye=a.b6.disabled,Ct=L.prevTerrainTileForTile[je.key],ct=L.terrainTileForTile[je.key];jv(Ct,ct)&&Hs.newMorphing(je.key,Ct,ct,W,250),X.activeTexture.set(J.TEXTURE0),Ne.texture&&Ne.texture.bind(J.LINEAR,J.CLAMP_TO_EDGE);const _t=Hs.getMorphValuesForProxy(je.key),tt=_t?1:0;let Mt;_t&&(Mt={morphing:{srcDemTile:_t.from,dstDemTile:_t.to,phase:a.ba(_t.phase)}});const pt=Th(je.projMatrix,Wv(je.canonical,we.renderWorldCopies)?Le/10:Le,Oe);if(pe(tt),!te)continue;L.setupElevationDraw(Ne,te,Mt);const Dt=je.toUnwrapped();le&&le.setupShadows(Dt,te),D.uploadCommonUniforms(X,te,Dt,null,de),te.draw(D,xe,he,Ye,fe,a.b5.backCCW,pt,"terrain_raster",L.gridBuffer,Te,ze)}}}}(_,this,this.proxySourceCache,f,this._updateTimestamp),this.renderingToTexture=!0,_.gpuTimingDeferredRenderEnd(),f.splice(0,f.length))}renderBatch(f){if(this._drapedRenderBatches.length===0)return f+1;this.renderingToTexture=!0;const _=this.painter,A=this.painter.context,D=this.proxySourceCache,L=this.proxiedCoords[D.id],B=this._drapedRenderBatches.shift(),N=_.style.order,W=[];let X=0;for(const J of L){const te=D.getTileByID(J.proxyTileKey),oe=D.proxyCachedFBO[J.key]?D.proxyCachedFBO[J.key][f]:void 0,le=oe!==void 0?D.renderCache[oe]:this.pool[X++],de=oe!==void 0;if(te.texture=le.tex,de&&!le.dirty){W.push(te.tileID);continue}let pe;A.bindFramebuffer.set(le.fb.framebuffer),this.renderedToTile=!1,le.dirty&&(A.clear({color:a.C.transparent,stencil:0}),le.dirty=!1);for(let fe=B.start;fe<=B.end;++fe){const he=_.style._mergedLayers[N[fe]];if(he.isHidden(_.transform.zoom))continue;const we=_.style.getLayerSourceCache(he),Le=we?this.proxyToSource[J.key][we.id]:[J];if(!Le)continue;const Oe=Le;A.viewport.set([0,0,le.fb.width,le.fb.height]),pe!==(we?we.id:null)&&(this._setupStencil(le,Le,he,we),pe=we?we.id:null),_.renderLayer(_,we,he,Oe)}if(this._drapedRenderBatches.length===0)for(const fe of this._pendingGroundEffectLayers){const he=_.style._mergedLayers[N[fe]];if(he.isHidden(_.transform.zoom))continue;const we=_.style.getLayerSourceCache(he),Le=we?this.proxyToSource[J.key][we.id]:[J];if(!Le)continue;const Oe=Le;A.viewport.set([0,0,le.fb.width,le.fb.height]),pe!==(we?we.id:null)&&(this._setupStencil(le,Le,he,we),pe=we?we.id:null),_.renderLayer(_,we,he,Oe)}this.renderedToTile?(le.dirty=!0,W.push(te.tileID)):de||--X,X===5&&(X=0,this.renderToBackBuffer(W))}return this.renderToBackBuffer(W),this.renderingToTexture=!1,A.bindFramebuffer.set(null),A.viewport.set([0,0,_.width,_.height]),B.end+1}postRender(){}isLayerOrderingCorrect(f){const _=f.order.length;let A=-1,D=_;for(let L=0;L<_;++L)this._style.isLayerDraped(f._mergedLayers[f.order[L]])?A=Math.max(A,L):D=Math.min(D,L);return D>A}getMinElevationBelowMSL(){let f=0;return this._visibleDemTiles.filter(_=>_.dem).forEach(_=>{f=Math.min(f,_.dem.tree.minimums[0])}),f===0?f:(f-30)*this._exaggeration}raycast(f,_,A){if(!this._visibleDemTiles)return null;const D=this._visibleDemTiles.filter(L=>L.dem).map(L=>{const B=L.tileID,N=1<<B.overscaledZ,{x:W,y:X}=B.canonical,J=W/N,te=(W+1)/N,oe=X/N,le=(X+1)/N;return{minx:J,miny:oe,maxx:te,maxy:le,t:L.dem.tree.raycastRoot(J,oe,te,le,f,_,A),tile:L}});D.sort((L,B)=>(L.t!==null?L.t:Number.MAX_VALUE)-(B.t!==null?B.t:Number.MAX_VALUE));for(const L of D){if(L.t==null)return null;const B=L.tile.dem.tree.raycast(L.minx,L.miny,L.maxx,L.maxy,f,_,A);if(B!=null)return B}return null}_createFBO(){const f=this.painter.context,_=f.gl,A=this.drapeBufferSize;f.activeTexture.set(_.TEXTURE0);const D=new a.a9(f,{width:A[0],height:A[1],data:null},_.RGBA);D.bind(_.LINEAR,_.CLAMP_TO_EDGE);const L=f.createFramebuffer(A[0],A[1],!0,null);return L.colorAttachment.set(D.texture),L.depthAttachment=new Cr(f,L.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=f.createRenderbuffer(f.gl.DEPTH_STENCIL,A[0],A[1]),this._stencilRef=0,L.depthAttachment.set(this._sharedDepthStencil),f.clear({stencil:0})):L.depthAttachment.set(this._sharedDepthStencil),f.extTextureFilterAnisotropic&&_.texParameterf(_.TEXTURE_2D,f.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,f.extTextureFilterAnisotropicMax),{fb:L,tex:D,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const f in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[f].hasTransition())return!0;return this._style.order.some(f=>{const _=this._style._mergedLayers[f],A=_.isHidden(this.painter.transform.zoom);return _.type==="custom"?!A&&_.shouldRedrape():!A&&_.hasTransition()})}_clearLineLayersFromRenderCache(){let f=!1;for(const A of this._style.getSources())if(A instanceof ut){f=!0;break}if(!f)return;const _={};for(let A=0;A<this._style.order.length;++A){const D=this._style._mergedLayers[this._style.order[A]],L=this._style.getLayerSourceCache(D);if(L&&!_[L.id]&&!D.isHidden(this.painter.transform.zoom)&&D.type==="line"&&D.widthExpression()instanceof a.am){_[L.id]=!0;for(const B of this.proxyCoords){const N=this.proxyToSource[B.key][L.id];if(N)for(const W of N)this._clearRenderCacheForTile(L.id,W)}}}}_clearRasterLayersFromRenderCache(){let f=!1;for(const A in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[A]._source instanceof mr){f=!0;break}if(!f)return;const _={};for(let A=0;A<this._style.order.length;++A){const D=this._style._mergedLayers[this._style.order[A]],L=this._style.getLayerSourceCache(D);if(!L||_[L.id]||D.isHidden(this.painter.transform.zoom)||D.type!=="raster")continue;const B=D.paint.get("raster-fade-duration");for(const N of this.proxyCoords){const W=this.proxyToSource[N.key][L.id];if(W)for(const X of W){const J=dm(L.getTile(X),L.findLoadedParent(X,0),L,this.painter.transform,B);(J.opacity!==1||J.mix!==0)&&this._clearRenderCacheForTile(L.id,X)}}}}_setupDrapedRenderBatches(){const f=this._style.order,_=f.length;if(_===0)return;const A=[];this._pendingGroundEffectLayers=[];let D,L=0,B=this._style._mergedLayers[f[L]];for(;!this._style.isLayerDraped(B)&&B.isHidden(this.painter.transform.zoom)&&++L<_;)B=this._style._mergedLayers[f[L]];for(;L<_;++L){const N=this._style._mergedLayers[f[L]];N.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(N)?D===void 0&&(D=L):(N.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(L),D!==void 0&&(A.push({start:D,end:L-1}),D=void 0)))}if(D!==void 0&&A.push({start:D,end:L-1}),A.length!==0){const N=A[A.length-1];this._pendingGroundEffectLayers.every(W=>W>N.end)||a.X("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=A}_setupRenderCache(f){const _=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,_.renderCache.length>_.renderCachePool.length){const B=Object.values(_.proxyCachedFBO);_.proxyCachedFBO={};for(let N=0;N<B.length;++N){const W=Object.values(B[N]);_.renderCachePool.push(...W)}}return}this._clearRasterLayersFromRenderCache();const A=this.proxyCoords,D=this._tilesDirty;for(let B=A.length-1;B>=0;B--){const N=A[B];if(_.getTileByID(N.key),_.proxyCachedFBO[N.key]!==void 0){const W=f[N.key],X=this.proxyToSource[N.key];let J=0;for(const te in X){const oe=X[te],le=W[te];if(!le||le.length!==oe.length||oe.some((de,pe)=>de!==le[pe]||D[te]&&D[te].hasOwnProperty(de.key))){J=-1;break}++J}for(const te in _.proxyCachedFBO[N.key])_.renderCache[_.proxyCachedFBO[N.key][te]].dirty=J<0||J!==Object.values(W).length}}const L=[...this._drapedRenderBatches];L.sort((B,N)=>N.end-N.start-(B.end-B.start));for(const B of L)for(const N of A){if(_.proxyCachedFBO[N.key])continue;let W=_.renderCachePool.pop();W===void 0&&_.renderCache.length<50&&(W=_.renderCache.length,_.renderCache.push(this._createFBO())),W!==void 0&&(_.proxyCachedFBO[N.key]={},_.proxyCachedFBO[N.key][B.start]=W,_.renderCache[W].dirty=!0)}this._tilesDirty={}}_setupStencil(f,_,A,D){if(!D||!this._sourceTilesOverlap[D.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const L=this.painter.context,B=L.gl;if(_.length<=1)return void(this._overlapStencilType=!1);let N;if(A.isTileClipped())N=_.length,this._overlapStencilMode.test={func:B.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(_[0].overscaledZ>_[_.length-1].overscaledZ))return void(this._overlapStencilType=!1);N=1,this._overlapStencilMode.test={func:B.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+N>255&&(L.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=N,this._overlapStencilMode.ref=this._stencilRef,A.isTileClipped()&&this._renderTileClippingMasks(_,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(f){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[f.key]),this._overlapStencilMode):a.b6.disabled}_renderTileClippingMasks(f,_){const A=this.painter,D=this.painter.context,L=D.gl;A._tileClippingMaskIDs={},D.setColorMode(a.a.disabled),D.setDepthMode(a.b4.disabled);const B=A.getOrCreateProgram("clippingMask");for(const N of f){const W=A._tileClippingMaskIDs[N.key]=--_;B.draw(A,L.TRIANGLES,a.b4.disabled,new a.b6({func:L.ALWAYS,mask:0},W,255,L.KEEP,L.KEEP,L.REPLACE),a.a.disabled,a.b5.disabled,hm(N.projMatrix),"$clipping",A.tileExtentBuffer,A.quadTriangleIndexBuffer,A.tileExtentSegments)}}pointCoordinate(f){const _=this.painter.transform;if(f.x<0||f.x>_.width||f.y<0||f.y>_.height)return null;const A=[f.x,f.y,1,1];a.e.transformMat4(A,A,_.pixelMatrixInverse),a.e.scale(A,A,1/A[3]),A[0]/=_.worldSize,A[1]/=_.worldSize;const D=_._camera.position,L=a.b(1,_.center.lat),B=[D[0],D[1],D[2]/L,0],N=a.v.subtract([],A.slice(0,3),B);a.v.normalize(N,N);const W=this.raycast(B,N,this._exaggeration);return W!==null&&W?(a.v.scaleAndAdd(B,B,N,W),B[3]=B[2],B[2]*=L,B):null}drawDepth(){const f=this.painter,_=f.context,A=this.proxySourceCache,D=Math.ceil(f.width),L=Math.ceil(f.height);if(!this._depthFBO||this._depthFBO.width===D&&this._depthFBO.height===L||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const B=_.gl,N=_.createFramebuffer(D,L,!0,"renderbuffer");_.activeTexture.set(B.TEXTURE0);const W=new a.a9(_,{width:D,height:L,data:null},B.RGBA);W.bind(B.NEAREST,B.CLAMP_TO_EDGE),N.colorAttachment.set(W.texture);const X=_.createRenderbuffer(_.gl.DEPTH_COMPONENT16,D,L);N.depthAttachment.set(X),this._depthFBO=N,this._depthTexture=W}_.bindFramebuffer.set(this._depthFBO.framebuffer),_.viewport.set([0,0,D,L]),function(B,N,W,X){if(B.transform.projection.name==="globe")return;const J=B.context,te=J.gl;J.clear({depth:1});const oe=B.getOrCreateProgram("terrainDepth"),le=new a.b4(te.LESS,a.b4.ReadWrite,B.depthRangeFor3D);for(const de of X){const pe=W.getTile(de),fe=Th(de.projMatrix,0,[0,0,0]);N.setupElevationDraw(pe,oe),oe.draw(B,te.TRIANGLES,le,a.b6.disabled,a.a.unblended,a.b5.backCCW,fe,"terrain_depth",N.gridBuffer,N.gridIndexBuffer,N.gridNoSkirtSegments)}}(f,this,A,this.proxyCoords)}_setupProxiedCoordsForOrtho(f,_,A){if(f.getSource()instanceof a.aK)return this._setupProxiedCoordsForImageSource(f,_,A);this._findCoveringTileCache[f.id]=this._findCoveringTileCache[f.id]||{};const D=this.proxiedCoords[f.id]=[],L=this.proxyCoords;for(let W=0;W<L.length;W++){const X=L[W],J=this._findTileCoveringTileID(X,f);if(J){const te=this._createProxiedId(X,J,A[X.key]&&A[X.key][f.id]);D.push(te),this.proxyToSource[X.key][f.id]=[te]}}let B=!1;const N=new Set;for(let W=0;W<_.length;W++){const X=f.getTile(_[W]);if(!X||!X.hasData())continue;const J=this._findTileCoveringTileID(X.tileID,this.proxySourceCache);if(J&&J.tileID.canonical.z!==X.tileID.canonical.z){const te=this.proxyToSource[J.tileID.key][f.id],oe=this._createProxiedId(J.tileID,X,A[J.tileID.key]&&A[J.tileID.key][f.id]);te?te.splice(te.length-1,0,oe):this.proxyToSource[J.tileID.key][f.id]=[oe];const le=this.proxyToSource[J.tileID.key][f.id];N.has(le)||N.add(le),D.push(oe),B=!0}}if(this._sourceTilesOverlap[f.id]=B,B&&this._debugParams.sortTilesHiZFirst)for(const W of N)W.sort((X,J)=>J.overscaledZ-X.overscaledZ)}_setupProxiedCoordsForImageSource(f,_,A){if(!f.getSource().loaded())return;const D=this.proxiedCoords[f.id]=[],L=this.proxyCoords,B=f.getSource(),N=B.tileID;if(!N)return;const W=new a.P(N.x,N.y)._div(1<<N.z),X=B.coordinates.map(a.M.fromLngLat).reduce((te,oe)=>(te.min.x=Math.min(te.min.x,oe.x-W.x),te.min.y=Math.min(te.min.y,oe.y-W.y),te.max.x=Math.max(te.max.x,oe.x-W.x),te.max.y=Math.max(te.max.y,oe.y-W.y),te),{min:new a.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new a.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),J=(te,oe)=>{const le=te.wrap+te.canonical.x/(1<<te.canonical.z),de=te.canonical.y/(1<<te.canonical.z),pe=a.J/(1<<te.canonical.z),fe=oe.wrap+oe.canonical.x/(1<<oe.canonical.z),he=oe.canonical.y/(1<<oe.canonical.z);return le+pe<fe+X.min.x||le>fe+X.max.x||de+pe<he+X.min.y||de>he+X.max.y};for(let te=0;te<L.length;te++){const oe=L[te];for(let le=0;le<_.length;le++){const de=f.getTile(_[le]);if(!de||!de.hasData()||J(oe,de.tileID))continue;const pe=this._createProxiedId(oe,de,A[oe.key]&&A[oe.key][f.id]),fe=this.proxyToSource[oe.key][f.id];fe?fe.push(pe):this.proxyToSource[oe.key][f.id]=[pe],D.push(pe)}}}_createProxiedId(f,_,A){let D=this.orthoMatrix;if(A){const L=A.find(B=>B.key===_.tileID.key);if(L)return L}if(_.tileID.key!==f.key){const L=f.canonical.z-_.tileID.canonical.z;let B,N,W;D=a.m.create();const X=_.tileID.wrap-f.wrap<<f.overscaledZ;L>0?(B=a.J>>L,N=B*((_.tileID.canonical.x<<L)-f.canonical.x+X),W=B*((_.tileID.canonical.y<<L)-f.canonical.y)):(B=a.J<<-L,N=a.J*(_.tileID.canonical.x-(f.canonical.x+X<<-L)),W=a.J*(_.tileID.canonical.y-(f.canonical.y<<-L))),a.m.ortho(D,0,B,0,B,0,1),a.m.translate(D,D,[N,W,0])}return new fm(_.tileID,f.key,D)}_findTileCoveringTileID(f,_){let A=_.getTile(f);if(A&&A.hasData())return A;const D=this._findCoveringTileCache[_.id],L=D[f.key];if(A=L?_.getTileByID(L):null,A&&A.hasData()||L===null)return A;let B=A?A.tileID:f,N=B.overscaledZ;const W=_.getSource().minzoom,X=[];if(!L){const te=_.getSource().maxzoom;if(f.canonical.z>=te){const oe=f.canonical.z-te;_.getSource().reparseOverscaled?(N=Math.max(f.canonical.z+2,_.transform.tileZoom),B=new a.O(N,f.wrap,te,f.canonical.x>>oe,f.canonical.y>>oe)):oe!==0&&(N=te,B=new a.O(N,f.wrap,te,f.canonical.x>>oe,f.canonical.y>>oe))}B.key!==f.key&&(X.push(B.key),A=_.getTile(B))}const J=te=>{X.forEach(oe=>{D[oe]=te}),X.length=0};for(N-=1;N>=W&&(!A||!A.hasData());N--){A&&J(A.tileID.key);const te=B.calculateScaledKey(N);if(A=_.getTileByID(te),A&&A.hasData())break;const oe=D[te];if(oe===null)break;oe===void 0?X.push(te):A=_.getTileByID(oe)}return J(A?A.tileID.key:null),A&&A.hasData()?A:null}findDEMTileFor(f){return this.enabled?this._findTileCoveringTileID(f,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(f,_){let A=this._tilesDirty[f];A||(A=this._tilesDirty[f]={}),A[_.key]=!0}}function Ox(S,f,_){const A=function(N,W,X){const J=a.v.dot(W,N),te=a.v.dot(X,[.2126,.7152,.0722]),oe=(de,pe,fe)=>(1-fe)*de+fe*pe,le=oe(1-.3*Math.min(te,1),1,Math.min(J+1,1));return oe(.92,1,Math.asin(a.c(W[2],-1,1))/Math.PI+.5)*le}(S,[0,0,1],f),D=[0,0,0];a.v.scale(D,_.slice(0,3),A);const L=[0,0,0];a.v.scale(L,f.slice(0,3),S[2]);const B=[0,0,0];return a.v.add(B,D,L),a.bw(B)}const pm=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],Pl=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbolSDF","symbolIcon","symbolTextAndIcon"];class mm{static cacheKey(f,_,A,D){let L=`${_}${D?D.cacheKey:""}`;for(const B of A)f.usedDefines.includes(B)&&(L+=`/${B}`);return L}constructor(f,_,A,D,L,B){const N=f.gl;this.program=N.createProgram(),this.configuration=D,this.name=_,this.fixedDefines=[...B];const W=D?D.getBinderAttributes():[],X=(A.staticAttributes||[]).concat(W);let J=D?D.defines():[];J=J.concat(B.map(fe=>`#define ${fe}`));const te=`#version 300 es
`;let oe=te+J.concat("precision mediump float;",_n,Xn.fragmentSource).join(`
`);for(const fe of A.fragmentIncludes)oe+=`
${Jr[fe]}`;oe+=`
${A.fragmentSource}`;let le=te+J.concat("precision highp float;",_n,Xn.vertexSource).join(`
`);for(const fe of A.vertexIncludes)le+=`
${Jr[fe]}`;le+=`
${A.vertexSource}`;const de=N.createShader(N.FRAGMENT_SHADER);if(N.isContextLost())return void(this.failedToCreate=!0);N.shaderSource(de,oe),N.compileShader(de),N.attachShader(this.program,de);const pe=N.createShader(N.VERTEX_SHADER);if(N.isContextLost())this.failedToCreate=!0;else{N.shaderSource(pe,le),N.compileShader(pe),N.attachShader(this.program,pe),this.attributes={},this.numAttributes=X.length;for(let fe=0;fe<this.numAttributes;fe++)if(X[fe]){const he=X[fe].startsWith("a_")?X[fe]:`a_${X[fe]}`;N.bindAttribLocation(this.program,fe,he),this.attributes[he]=fe}N.linkProgram(this.program),N.deleteShader(pe),N.deleteShader(de),this.fixedUniforms=L(f),this.binderUniforms=D?D.getUniforms(f):[],B.includes("TERRAIN")&&(this.terrainUniforms=(fe=>({u_dem:new a.a$(fe),u_dem_prev:new a.a$(fe),u_dem_tl:new a.b0(fe),u_dem_scale:new a.b2(fe),u_dem_tl_prev:new a.b0(fe),u_dem_scale_prev:new a.b2(fe),u_dem_size:new a.b2(fe),u_dem_lerp:new a.b2(fe),u_exaggeration:new a.b2(fe),u_depth:new a.a$(fe),u_depth_size_inv:new a.b0(fe),u_meter_to_dem:new a.b2(fe),u_label_plane_matrix_inv:new a.a_(fe)}))(f)),B.includes("GLOBE")&&(this.globeUniforms=(fe=>({u_tile_tl_up:new a.b7(fe),u_tile_tr_up:new a.b7(fe),u_tile_br_up:new a.b7(fe),u_tile_bl_up:new a.b7(fe),u_tile_up_scale:new a.b2(fe)}))(f)),B.includes("FOG")&&(this.fogUniforms=(fe=>({u_fog_matrix:new a.a_(fe),u_fog_range:new a.b0(fe),u_fog_color:new a.b9(fe),u_fog_horizon_blend:new a.b2(fe),u_fog_vertical_limit:new a.b0(fe),u_fog_temporal_offset:new a.b2(fe),u_frustum_tl:new a.b7(fe),u_frustum_tr:new a.b7(fe),u_frustum_br:new a.b7(fe),u_frustum_bl:new a.b7(fe),u_globe_pos:new a.b7(fe),u_globe_radius:new a.b2(fe),u_globe_transition:new a.b2(fe),u_is_globe:new a.a$(fe),u_viewport:new a.b0(fe)}))(f)),B.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(fe=>({u_cutoff_params:new a.b9(fe)}))(f)),B.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(fe=>({u_lighting_ambient_color:new a.b7(fe),u_lighting_directional_dir:new a.b7(fe),u_lighting_directional_color:new a.b7(fe),u_ground_radiance:new a.b7(fe)}))(f)),B.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(fe=>({u_light_matrix_0:new a.a_(fe),u_light_matrix_1:new a.a_(fe),u_fade_range:new a.b0(fe),u_shadow_normal_offset:new a.b7(fe),u_shadow_intensity:new a.b2(fe),u_shadow_texel_size:new a.b2(fe),u_shadow_map_resolution:new a.b2(fe),u_shadow_direction:new a.b7(fe),u_shadow_bias:new a.b7(fe),u_shadowmap_0:new a.a$(fe),u_shadowmap_1:new a.a$(fe)}))(f))}}setTerrainUniformValues(f,_){if(!this.terrainUniforms)return;const A=this.terrainUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const D in _)A[D]&&A[D].set(this.program,D,_[D])}}setGlobeUniformValues(f,_){if(!this.globeUniforms)return;const A=this.globeUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const D in _)A[D]&&A[D].set(this.program,D,_[D])}}setFogUniformValues(f,_){if(!this.fogUniforms)return;const A=this.fogUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const D in _)A[D].set(this.program,D,_[D])}}setCutoffUniformValues(f,_){if(!this.cutoffUniforms)return;const A=this.cutoffUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const D in _)A[D].set(this.program,D,_[D])}}setLightsUniformValues(f,_){if(!this.lightsUniforms)return;const A=this.lightsUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const D in _)A[D].set(this.program,D,_[D])}}setShadowUniformValues(f,_){if(this.failedToCreate||!this.shadowUniforms)return;const A=this.shadowUniforms;f.program.set(this.program);for(const D in _)A[D].set(this.program,D,_[D])}_drawDebugWireframe(f,_,A,D,L,B,N,W,X,J){const te=f.options.wireframe;if(te.terrain===!1&&te.layers2D===!1&&te.layers3D===!1)return;const oe=f.context;if(!(()=>!(!te.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!te.layers2D||f._terrain&&f._terrain.renderingToTexture||!pm.includes(this.name))||!(!te.layers3D||!Pl.includes(this.name)))())return;const le=oe.gl,de=f.wireframeDebugCache.getLinesFromTrianglesBuffer(f.frameCounter,L,oe);if(!de)return;const pe=[...this.fixedDefines];pe.push("DEBUG_WIREFRAME");const fe=f.getOrCreateProgram(this.name,{config:this.configuration,defines:pe});oe.program.set(fe.program);const he=(Oe,xe,Te)=>{if(xe[Oe]&&Te[Oe])for(const ze in xe[Oe])Te[Oe][ze]&&Te[Oe][ze].set(Te.program,ze,xe[Oe][ze].current)};X&&X.setUniforms(fe.program,oe,fe.binderUniforms,N,{zoom:W}),he("fixedUniforms",this,fe),he("terrainUniforms",this,fe),he("globeUniforms",this,fe),he("fogUniforms",this,fe),he("lightsUniforms",this,fe),he("shadowUniforms",this,fe),de.bind(),oe.setColorMode(new a.a([le.ONE,le.ONE_MINUS_SRC_ALPHA,le.ZERO,le.ONE],a.C.transparent,[!0,!0,!0,!1])),oe.setDepthMode(new a.b4(_.func===le.LESS?le.LEQUAL:_.func,a.b4.ReadOnly,_.range)),oe.setStencilMode(a.b6.disabled);const we=3*B.primitiveLength*2,Le=3*B.primitiveOffset*2*2;J&&J>1?le.drawElementsInstanced(le.LINES,we,le.UNSIGNED_SHORT,Le,J):le.drawElements(le.LINES,we,le.UNSIGNED_SHORT,Le),L.bind(),oe.program.set(this.program),oe.setDepthMode(_),oe.setStencilMode(A),oe.setColorMode(D)}draw(f,_,A,D,L,B,N,W,X,J,te,oe,le,de,pe,fe){const he=f.context,we=he.gl;if(this.failedToCreate)return;he.program.set(this.program),he.setDepthMode(A),he.setStencilMode(D),he.setColorMode(L),he.setCullFace(B);for(const xe of Object.keys(this.fixedUniforms))this.fixedUniforms[xe].set(this.program,xe,N[xe]);de&&de.setUniforms(this.program,he,this.binderUniforms,oe,{zoom:le});const Le={[we.LINES]:2,[we.TRIANGLES]:3,[we.LINE_STRIP]:1}[_],Oe=fe&&fe>0?1:void 0;for(const xe of te.get()){const Te=xe.vaos||(xe.vaos={});(Te[W]||(Te[W]=new co)).bind(he,this,X,de?de.getPaintVertexBuffers():[],J,xe.vertexOffset,pe||[],Oe),fe&&fe>1?we.drawElementsInstanced(_,xe.primitiveLength*Le,we.UNSIGNED_SHORT,xe.primitiveOffset*Le*2,fe):we.drawElements(_,xe.primitiveLength*Le,we.UNSIGNED_SHORT,xe.primitiveOffset*Le*2),_===we.TRIANGLES&&this._drawDebugWireframe(f,A,D,L,J,xe,oe,le,de,fe)}}}function pu(S,f){const _=Math.pow(2,f.tileID.overscaledZ),A=f.tileSize*Math.pow(2,S.transform.tileZoom)/_,D=A*(f.tileID.canonical.x+f.tileID.wrap*_),L=A*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture?f.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/a.ay(f,1,S.transform.tileZoom),u_pixel_coord_upper:[D>>16,L>>16],u_pixel_coord_lower:[65535&D,65535&L]}}const gm=a.m.create(),yc=(S,f,_,A,D,L,B,N,W,X,J,te,oe,le,de,pe)=>{const fe=f.style.light,he=fe.properties.get("position"),we=[he.x,he.y,he.z],Le=a.bx.create();fe.properties.get("anchor")==="viewport"&&(a.bx.fromRotation(Le,-f.transform.angle),a.v.transformMat3(we,we,Le));const Oe=fe.properties.get("color"),xe=f.transform,Te={u_matrix:S,u_lightpos:we,u_lightintensity:fe.properties.get("intensity"),u_lightcolor:[Oe.r,Oe.g,Oe.b],u_vertical_gradient:+_,u_opacity:A,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:gm,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:D,u_edge_radius:L,u_flood_light_color:te,u_vertical_scale:oe,u_flood_light_intensity:le,u_ground_shadow_factor:de,u_emissive_strength:pe};return xe.projection.name==="globe"&&(Te.u_tile_id=[B.canonical.x,B.canonical.y,1<<B.canonical.z],Te.u_zoom_transition=W,Te.u_inv_rot_matrix=J,Te.u_merc_center=X,Te.u_up_dir=xe.projection.upVector(new a.t(0,0,0),X[0]*a.J,X[1]*a.J),Te.u_height_lift=N),Te},Zv=(S,f,_)=>({u_matrix:S,u_edge_radius:f,u_vertical_scale:_}),y2=(S,f,_,A,D,L,B,N,W,X,J,te,oe,le)=>{const de=yc(S,f,_,A,D,L,B,W,X,J,te,oe,le,1,[0,0,0],0),pe={u_height_factor:-Math.pow(2,B.overscaledZ)/N.tileSize/8};return a.ak(de,pu(f,N),pe)},Xv=(S,f)=>({u_matrix:S,u_emissive_strength:f}),Yv=(S,f,_,A)=>a.ak(Xv(S,f),pu(_,A)),Kv=(S,f,_)=>({u_matrix:S,u_world:_,u_emissive_strength:f}),x2=(S,f,_,A,D)=>a.ak(Yv(S,f,_,A),{u_world:D}),b2=(S,f,_,A)=>{const D=a.J/_.tileSize;return{u_matrix:S,u_camera_to_center_distance:f.getCameraToCenterDistance(A),u_extrude_scale:[f.pixelsToGLUnits[0]/D,f.pixelsToGLUnits[1]/D]}},zx=(S,f,_=1)=>({u_matrix:S,u_color:f,u_overlay:0,u_overlay_scale:_}),w2=a.m.create(),Bx=(S,f,_,A,D,L,B)=>{const N=S.transform,W=N.projection.name==="globe",X=W?a.by(N.zoom,f.canonical)*N._pixelsPerMercatorPixel:a.ay(_,1,L),J={u_matrix:f.projMatrix,u_extrude_scale:X,u_intensity:B,u_inv_rot_matrix:w2,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(W){J.u_inv_rot_matrix=A,J.u_merc_center=D,J.u_tile_id=[f.canonical.x,f.canonical.y,1<<f.canonical.z],J.u_zoom_transition=a.ao(N.zoom);const te=D[0]*a.J,oe=D[1]*a.J;J.u_up_dir=N.projection.upVector(new a.t(0,0,0),te,oe)}return J},Fx=(S,f,_,A,D,L,B,N,W,X,J,te,oe,le,de,pe,fe,he,we,Le,Oe)=>{return{u_matrix:S,u_normalize_matrix:f,u_globe_matrix:_,u_merc_matrix:A,u_grid_matrix:D,u_tl_parent:L,u_scale_parent:X,u_fade_t:J.mix,u_opacity:J.opacity*te.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:te.paint.get("raster-brightness-min"),u_brightness_high:te.paint.get("raster-brightness-max"),u_saturation_factor:(Te=te.paint.get("raster-saturation"),Te>0?1-1/(1.001-Te):-Te),u_contrast_factor:(xe=te.paint.get("raster-contrast"),xe>0?1/(1-xe):1+xe),u_spin_weights:vm(te.paint.get("raster-hue-rotate")),u_perspective_transform:oe,u_raster_elevation:le,u_zoom_transition:B,u_merc_center:N,u_cutoff_params:W,u_colorization_mix:S2(pe,he),u_colorization_offset:Nx(fe,he),u_color_ramp:de,u_texture_offset:[Le/(we+2*Le),we/(we+2*Le)],u_texture_res:[we+2*Le,we+2*Le],u_emissive_strength:Oe};var xe,Te};function vm(S){S*=Math.PI/180;const f=Math.sin(S),_=Math.cos(S);return[(2*_+1)/3,(-Math.sqrt(3)*f-_+1)/3,(Math.sqrt(3)*f-_+1)/3]}function S2([S,f,_,A],[D,L]){if(D===L)return[0,0,0,0];const B=(a.bz+3)/(a.bz+1)/(L-D);return[S*B,f*B,_*B,A*B]}function Nx(S,[f,_]){return f===_?0:((S-f)/(_-f)*(a.bz+3)-1)/(a.bz+1)}const _m=a.m.create(),Xd=(S,f,_,A,D,L,B,N,W,X,J,te,oe,le,de,pe,fe,he)=>{const we=D.transform,Le={u_is_size_zoom_constant:+(S==="constant"||S==="source"),u_is_size_feature_constant:+(S==="constant"||S==="camera"),u_size_t:f?f.uSizeT:0,u_size:f?f.uSize:0,u_camera_to_center_distance:we.getCameraToCenterDistance(pe),u_rotate_symbol:+_,u_aspect_ratio:we.width/we.height,u_fade_change:D.options.fadeDuration?D.symbolFadeChange:1,u_matrix:L,u_label_plane_matrix:B,u_coord_matrix:N,u_is_text:+W,u_pitch_with_map:+A,u_texsize:X,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:_m,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:_m,u_up_vector:[0,-1,0],u_icon_transition:he||0,u_icon_saturation:fe};return pe.name==="globe"&&(Le.u_tile_id=[J.canonical.x,J.canonical.y,1<<J.canonical.z],Le.u_zoom_transition=te,Le.u_inv_rot_matrix=le,Le.u_merc_center=oe,Le.u_camera_forward=we._camera.forward(),Le.u_ecef_origin=a.bA(we.globeMatrix,J.toUnwrapped()),Le.u_tile_matrix=Float32Array.from(we.globeMatrix),Le.u_up_vector=de),Le},ym=(S,f,_,A,D,L,B,N,W,X,J,te,oe,le,de,pe,fe)=>a.ak(Xd(S,f,_,A,D,L,B,N,W,X,te,oe,le,de,pe,fe,1),{u_gamma_scale:A?D.transform.getCameraToCenterDistance(fe)*Math.cos(D.terrain?0:D.transform._pitch):1,u_device_pixel_ratio:a.a4.devicePixelRatio,u_is_halo:+J,undefined:void 0}),Yd=(S,f,_,A,D,L,B,N,W,X,J,te,oe,le,de,pe)=>a.ak(ym(S,f,_,A,D,L,B,N,!0,W,!0,J,te,oe,le,de,pe),{u_texsize_icon:X,u_texture_icon:1}),Jv=(S,f,_,A)=>({u_matrix:S,u_emissive_strength:f,u_opacity:_,u_color:A}),Mh=(S,f,_,A,D,L,B)=>a.ak(function(N,W,X,J){const te=X.imageManager.getPattern(N.toString(),W),{width:oe,height:le}=X.imageManager.getPixelSize(W),de=Math.pow(2,J.tileID.overscaledZ),pe=J.tileSize*Math.pow(2,X.transform.tileZoom)/de,fe=pe*(J.tileID.canonical.x+J.tileID.wrap*de),he=pe*J.tileID.canonical.y;return{u_image:0,u_pattern_tl:te.tl,u_pattern_br:te.br,u_texsize:[oe,le],u_pattern_size:te.displaySize,u_tile_units_to_pixels:1/a.ay(J,1,X.transform.tileZoom),u_pixel_coord_upper:[fe>>16,he>>16],u_pixel_coord_lower:[65535&fe,65535&he]}}(D,L,A,B),{u_matrix:S,u_emissive_strength:f,u_opacity:_}),va={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,ShadowMap0:10},Kd=(S,f,_,A,D,L,B,N,W,X,J,te,oe=[0,0,0])=>{const le=A.style.light,de=le.properties.get("position"),pe=[-de.x,-de.y,de.z],fe=a.bx.create();le.properties.get("anchor")==="viewport"&&(a.bx.fromRotation(fe,-A.transform.angle),a.v.transformMat3(pe,pe,fe));const he=X.alphaMode==="MASK",we=le.properties.get("color"),Le=te.paint.get("model-ambient-occlusion-intensity"),Oe=te.paint.get("model-color").constantOr(a.C.white),xe=te.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:S,u_lighting_matrix:f,u_normal_matrix:_,u_lightpos:pe,u_lightintensity:le.properties.get("intensity"),u_lightcolor:[we.r,we.g,we.b],u_camera_pos:oe,u_opacity:D,u_baseTextureIsAlpha:0,u_alphaMask:+he,u_alphaCutoff:X.alphaCutoff,u_baseColorFactor:[L.r,L.g,L.b,L.a],u_emissiveFactor:[B[0],B[1],B[2],1],u_metallicFactor:N,u_roughnessFactor:W,u_baseColorTexture:va.BaseColor,u_metallicRoughnessTexture:va.MetallicRoughness,u_normalTexture:va.Normal,u_occlusionTexture:va.Occlusion,u_emissionTexture:va.Emission,u_color_mix:[Oe.r,Oe.g,Oe.b,xe],u_aoIntensity:Le,u_emissive_strength:J}},xc=new Float32Array(16),xm=(S,f=xc,_=xc)=>({u_matrix:S,u_instance:f,u_node_matrix:_}),Vx={fillExtrusion:S=>({u_matrix:new a.a_(S),u_lightpos:new a.b7(S),u_lightintensity:new a.b2(S),u_lightcolor:new a.b7(S),u_vertical_gradient:new a.b2(S),u_opacity:new a.b2(S),u_edge_radius:new a.b2(S),u_ao:new a.b0(S),u_tile_id:new a.b7(S),u_zoom_transition:new a.b2(S),u_inv_rot_matrix:new a.a_(S),u_merc_center:new a.b0(S),u_up_dir:new a.b7(S),u_height_lift:new a.b2(S),u_flood_light_color:new a.b7(S),u_vertical_scale:new a.b2(S),u_flood_light_intensity:new a.b2(S),u_ground_shadow_factor:new a.b7(S),u_emissive_strength:new a.b2(S)}),fillExtrusionDepth:S=>({u_matrix:new a.a_(S),u_edge_radius:new a.b2(S),u_vertical_scale:new a.b2(S)}),fillExtrusionPattern:S=>({u_matrix:new a.a_(S),u_lightpos:new a.b7(S),u_lightintensity:new a.b2(S),u_lightcolor:new a.b7(S),u_vertical_gradient:new a.b2(S),u_height_factor:new a.b2(S),u_edge_radius:new a.b2(S),u_ao:new a.b0(S),u_tile_id:new a.b7(S),u_zoom_transition:new a.b2(S),u_inv_rot_matrix:new a.a_(S),u_merc_center:new a.b0(S),u_up_dir:new a.b7(S),u_height_lift:new a.b2(S),u_image:new a.a$(S),u_texsize:new a.b0(S),u_pixel_coord_upper:new a.b0(S),u_pixel_coord_lower:new a.b0(S),u_tile_units_to_pixels:new a.b2(S),u_opacity:new a.b2(S)}),fillExtrusionGroundEffect:S=>({u_matrix:new a.a_(S),u_opacity:new a.b2(S),u_ao_pass:new a.b2(S),u_meter_to_tile:new a.b2(S),u_ao:new a.b0(S),u_flood_light_intensity:new a.b2(S),u_flood_light_color:new a.b7(S),u_attenuation:new a.b2(S),u_edge_radius:new a.b2(S),u_fb:new a.a$(S),u_fb_size:new a.b2(S)}),fill:S=>({u_matrix:new a.a_(S),u_emissive_strength:new a.b2(S)}),fillPattern:S=>({u_matrix:new a.a_(S),u_emissive_strength:new a.b2(S),u_image:new a.a$(S),u_texsize:new a.b0(S),u_pixel_coord_upper:new a.b0(S),u_pixel_coord_lower:new a.b0(S),u_tile_units_to_pixels:new a.b2(S)}),fillOutline:S=>({u_matrix:new a.a_(S),u_emissive_strength:new a.b2(S),u_world:new a.b0(S)}),fillOutlinePattern:S=>({u_matrix:new a.a_(S),u_emissive_strength:new a.b2(S),u_world:new a.b0(S),u_image:new a.a$(S),u_texsize:new a.b0(S),u_pixel_coord_upper:new a.b0(S),u_pixel_coord_lower:new a.b0(S),u_tile_units_to_pixels:new a.b2(S)}),circle:a.bB,collisionBox:S=>({u_matrix:new a.a_(S),u_camera_to_center_distance:new a.b2(S),u_extrude_scale:new a.b0(S)}),collisionCircle:S=>({u_matrix:new a.a_(S),u_inv_matrix:new a.a_(S),u_camera_to_center_distance:new a.b2(S),u_viewport_size:new a.b0(S)}),debug:S=>({u_color:new a.b1(S),u_matrix:new a.a_(S),u_overlay:new a.a$(S),u_overlay_scale:new a.b2(S)}),clippingMask:S=>({u_matrix:new a.a_(S)}),heatmap:S=>({u_extrude_scale:new a.b2(S),u_intensity:new a.b2(S),u_matrix:new a.a_(S),u_inv_rot_matrix:new a.a_(S),u_merc_center:new a.b0(S),u_tile_id:new a.b7(S),u_zoom_transition:new a.b2(S),u_up_dir:new a.b7(S)}),heatmapTexture:S=>({u_image:new a.a$(S),u_color_ramp:new a.a$(S),u_opacity:new a.b2(S)}),hillshade:S=>({u_matrix:new a.a_(S),u_image:new a.a$(S),u_latrange:new a.b0(S),u_light:new a.b0(S),u_shadow:new a.b1(S),u_highlight:new a.b1(S),u_emissive_strength:new a.b2(S),u_accent:new a.b1(S)}),hillshadePrepare:S=>({u_matrix:new a.a_(S),u_image:new a.a$(S),u_dimension:new a.b0(S),u_zoom:new a.b2(S)}),line:a.bC,linePattern:a.bD,raster:S=>({u_matrix:new a.a_(S),u_normalize_matrix:new a.a_(S),u_globe_matrix:new a.a_(S),u_merc_matrix:new a.a_(S),u_grid_matrix:new a.b8(S),u_tl_parent:new a.b0(S),u_scale_parent:new a.b2(S),u_fade_t:new a.b2(S),u_opacity:new a.b2(S),u_image0:new a.a$(S),u_image1:new a.a$(S),u_brightness_low:new a.b2(S),u_brightness_high:new a.b2(S),u_saturation_factor:new a.b2(S),u_contrast_factor:new a.b2(S),u_spin_weights:new a.b7(S),u_perspective_transform:new a.b0(S),u_raster_elevation:new a.b2(S),u_zoom_transition:new a.b2(S),u_merc_center:new a.b0(S),u_cutoff_params:new a.b9(S),u_colorization_mix:new a.b9(S),u_colorization_offset:new a.b2(S),u_color_ramp:new a.a$(S),u_texture_offset:new a.b0(S),u_texture_res:new a.b0(S),u_emissive_strength:new a.b2(S)}),symbolIcon:S=>({u_is_size_zoom_constant:new a.a$(S),u_is_size_feature_constant:new a.a$(S),u_size_t:new a.b2(S),u_size:new a.b2(S),u_camera_to_center_distance:new a.b2(S),u_rotate_symbol:new a.a$(S),u_aspect_ratio:new a.b2(S),u_fade_change:new a.b2(S),u_matrix:new a.a_(S),u_label_plane_matrix:new a.a_(S),u_coord_matrix:new a.a_(S),u_is_text:new a.a$(S),u_pitch_with_map:new a.a$(S),u_texsize:new a.b0(S),u_tile_id:new a.b7(S),u_zoom_transition:new a.b2(S),u_inv_rot_matrix:new a.a_(S),u_merc_center:new a.b0(S),u_camera_forward:new a.b7(S),u_tile_matrix:new a.a_(S),u_up_vector:new a.b7(S),u_ecef_origin:new a.b7(S),u_texture:new a.a$(S),u_icon_transition:new a.b2(S),u_icon_saturation:new a.b2(S)}),symbolSDF:S=>({u_is_size_zoom_constant:new a.a$(S),u_is_size_feature_constant:new a.a$(S),u_size_t:new a.b2(S),u_size:new a.b2(S),u_camera_to_center_distance:new a.b2(S),u_rotate_symbol:new a.a$(S),u_aspect_ratio:new a.b2(S),u_fade_change:new a.b2(S),u_matrix:new a.a_(S),u_label_plane_matrix:new a.a_(S),u_coord_matrix:new a.a_(S),u_is_text:new a.a$(S),u_pitch_with_map:new a.a$(S),u_texsize:new a.b0(S),u_texture:new a.a$(S),u_gamma_scale:new a.b2(S),u_device_pixel_ratio:new a.b2(S),u_tile_id:new a.b7(S),u_zoom_transition:new a.b2(S),u_inv_rot_matrix:new a.a_(S),u_merc_center:new a.b0(S),u_camera_forward:new a.b7(S),u_tile_matrix:new a.a_(S),u_up_vector:new a.b7(S),u_ecef_origin:new a.b7(S),u_is_halo:new a.a$(S)}),symbolTextAndIcon:S=>({u_is_size_zoom_constant:new a.a$(S),u_is_size_feature_constant:new a.a$(S),u_size_t:new a.b2(S),u_size:new a.b2(S),u_camera_to_center_distance:new a.b2(S),u_rotate_symbol:new a.a$(S),u_aspect_ratio:new a.b2(S),u_fade_change:new a.b2(S),u_matrix:new a.a_(S),u_label_plane_matrix:new a.a_(S),u_coord_matrix:new a.a_(S),u_is_text:new a.a$(S),u_pitch_with_map:new a.a$(S),u_texsize:new a.b0(S),u_texsize_icon:new a.b0(S),u_texture:new a.a$(S),u_texture_icon:new a.a$(S),u_gamma_scale:new a.b2(S),u_device_pixel_ratio:new a.b2(S),u_is_halo:new a.a$(S)}),background:S=>({u_matrix:new a.a_(S),u_emissive_strength:new a.b2(S),u_opacity:new a.b2(S),u_color:new a.b1(S)}),backgroundPattern:S=>({u_matrix:new a.a_(S),u_emissive_strength:new a.b2(S),u_opacity:new a.b2(S),u_image:new a.a$(S),u_pattern_tl:new a.b0(S),u_pattern_br:new a.b0(S),u_texsize:new a.b0(S),u_pattern_size:new a.b0(S),u_pixel_coord_upper:new a.b0(S),u_pixel_coord_lower:new a.b0(S),u_tile_units_to_pixels:new a.b2(S)}),terrainRaster:Wo,terrainDepth:Wo,skybox:S=>({u_matrix:new a.a_(S),u_sun_direction:new a.b7(S),u_cubemap:new a.a$(S),u_opacity:new a.b2(S),u_temporal_offset:new a.b2(S)}),skyboxGradient:S=>({u_matrix:new a.a_(S),u_color_ramp:new a.a$(S),u_center_direction:new a.b7(S),u_radius:new a.b2(S),u_opacity:new a.b2(S),u_temporal_offset:new a.b2(S)}),skyboxCapture:S=>({u_matrix_3f:new a.b8(S),u_sun_direction:new a.b7(S),u_sun_intensity:new a.b2(S),u_color_tint_r:new a.b9(S),u_color_tint_m:new a.b9(S),u_luminance:new a.b2(S)}),globeRaster:S=>({u_proj_matrix:new a.a_(S),u_globe_matrix:new a.a_(S),u_normalize_matrix:new a.a_(S),u_merc_matrix:new a.a_(S),u_zoom_transition:new a.b2(S),u_merc_center:new a.b0(S),u_image0:new a.a$(S),u_grid_matrix:new a.b8(S),u_skirt_height:new a.b2(S),u_frustum_tl:new a.b7(S),u_frustum_tr:new a.b7(S),u_frustum_br:new a.b7(S),u_frustum_bl:new a.b7(S),u_globe_pos:new a.b7(S),u_globe_radius:new a.b2(S),u_viewport:new a.b0(S)}),globeAtmosphere:S=>({u_frustum_tl:new a.b7(S),u_frustum_tr:new a.b7(S),u_frustum_br:new a.b7(S),u_frustum_bl:new a.b7(S),u_horizon:new a.b2(S),u_transition:new a.b2(S),u_fadeout_range:new a.b2(S),u_color:new a.b9(S),u_high_color:new a.b9(S),u_space_color:new a.b9(S),u_temporal_offset:new a.b2(S),u_horizon_angle:new a.b2(S)}),model:S=>({u_matrix:new a.a_(S),u_lighting_matrix:new a.a_(S),u_normal_matrix:new a.a_(S),u_lightpos:new a.b7(S),u_lightintensity:new a.b2(S),u_lightcolor:new a.b7(S),u_camera_pos:new a.b7(S),u_opacity:new a.b2(S),u_baseColorFactor:new a.b9(S),u_emissiveFactor:new a.b9(S),u_metallicFactor:new a.b2(S),u_roughnessFactor:new a.b2(S),u_baseTextureIsAlpha:new a.a$(S),u_alphaMask:new a.a$(S),u_alphaCutoff:new a.b2(S),u_baseColorTexture:new a.a$(S),u_metallicRoughnessTexture:new a.a$(S),u_normalTexture:new a.a$(S),u_occlusionTexture:new a.a$(S),u_emissionTexture:new a.a$(S),u_color_mix:new a.b9(S),u_aoIntensity:new a.b2(S),u_emissive_strength:new a.b2(S)}),modelDepth:S=>({u_matrix:new a.a_(S),u_instance:new a.a_(S),u_node_matrix:new a.a_(S)}),groundShadow:S=>({u_matrix:new a.a_(S),u_ground_shadow_factor:new a.b7(S)}),stars:S=>({u_matrix:new a.a_(S),u_up:new a.b7(S),u_right:new a.b7(S),u_intensity_multiplier:new a.b2(S)})};let Ah;function Qv(S,f,_,A,D,L,B){const N=S.context,W=N.gl,X=S.transform,J=S.getOrCreateProgram("collisionBox"),te=[];let oe=0,le=0;for(let Oe=0;Oe<A.length;Oe++){const xe=A[Oe],Te=f.getTile(xe),ze=Te.getBucket(_);if(!ze)continue;const je=Ml(xe,ze,X);let Ne=je;D[0]===0&&D[1]===0||(Ne=S.translatePosMatrix(je,Te,D,L));const Ye=B?ze.textCollisionBox:ze.iconCollisionBox,Ct=ze.collisionCircleArray;if(Ct.length>0){const ct=a.m.create(),_t=Ne;a.m.mul(ct,ze.placementInvProjMatrix,X.glCoordMatrix),a.m.mul(ct,ct,ze.placementViewportMatrix),te.push({circleArray:Ct,circleOffset:le,transform:_t,invTransform:ct,projection:ze.getProjection()}),oe+=Ct.length/4,le=oe}Ye&&(S.terrain&&S.terrain.setupElevationDraw(Te,J),J.draw(S,W.LINES,a.b4.disabled,a.b6.disabled,S.colorModeForRenderPass(),a.b5.disabled,b2(Ne,X,Te,ze.getProjection()),_.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,null,X.zoom,null,[Ye.collisionVertexBuffer,Ye.collisionVertexBufferExt]))}if(!B||!te.length)return;const de=S.getOrCreateProgram("collisionCircle"),pe=new a.bE;pe.resize(4*oe),pe._trim();let fe=0;for(const Oe of te)for(let xe=0;xe<Oe.circleArray.length/4;xe++){const Te=4*xe,ze=Oe.circleArray[Te+0],je=Oe.circleArray[Te+1],Ne=Oe.circleArray[Te+2],Ye=Oe.circleArray[Te+3];pe.emplace(fe++,ze,je,Ne,Ye,0),pe.emplace(fe++,ze,je,Ne,Ye,1),pe.emplace(fe++,ze,je,Ne,Ye,2),pe.emplace(fe++,ze,je,Ne,Ye,3)}(!Ah||Ah.length<2*oe)&&(Ah=function(Oe){const xe=2*Oe,Te=new a.bp;Te.resize(xe),Te._trim();for(let ze=0;ze<xe;ze++){const je=6*ze;Te.uint16[je+0]=4*ze+0,Te.uint16[je+1]=4*ze+1,Te.uint16[je+2]=4*ze+2,Te.uint16[je+3]=4*ze+2,Te.uint16[je+4]=4*ze+3,Te.uint16[je+5]=4*ze+0}return Te}(oe));const he=N.createIndexBuffer(Ah,!0),we=N.createVertexBuffer(pe,a.bF.members,!0);for(const Oe of te){const xe={u_matrix:Oe.transform,u_inv_matrix:Oe.invTransform,u_camera_to_center_distance:(Le=X).getCameraToCenterDistance(Oe.projection),u_viewport_size:[Le.width,Le.height]};de.draw(S,W.TRIANGLES,a.b4.disabled,a.b6.disabled,S.colorModeForRenderPass(),a.b5.disabled,xe,_.id,we,he,a.bm.simpleSegment(0,2*Oe.circleOffset,Oe.circleArray.length,Oe.circleArray.length/2),null,X.zoom)}var Le;we.destroy(),he.destroy()}const bm=a.m.create();function wm({width:S,height:f,anchor:_,textOffset:A,textScale:D},L){const{horizontalAlign:B,verticalAlign:N}=a.aY(_),W=-(B-.5)*S,X=-(N-.5)*f,J=a.aW(_,A);return new a.P((W/D+J[0])*L,(X/D+J[1])*L)}function e_(S,f,_,A,D,L,B,N,W,X,J){const te=S.text.placedSymbolArray,oe=S.text.dynamicLayoutVertexArray,le=S.icon.dynamicLayoutVertexArray,de={},pe=S.getProjection(),fe=ms(N,pe,L),he=L.elevation,we=pe.upVectorScale(N.canonical,L.center.lat,L.worldSize).metersToTile;oe.clear();for(let Le=0;Le<te.length;Le++){const Oe=te.get(Le),{tileAnchorX:xe,tileAnchorY:Te,numGlyphs:ze}=Oe,je=Oe.hidden||!Oe.crossTileID||S.allowVerticalPlacement&&!Oe.placedOrientation?null:A[Oe.crossTileID];if(je){let Ne=0,Ye=0,Ct=0;if(he){const Ft=he?he.getAtTileOffset(N,xe,Te):0,[Rt,dr,or]=pe.upVector(N.canonical,xe,Te);Ne=Ft*Rt*we,Ye=Ft*dr*we,Ct=Ft*or*we}let[ct,_t,tt,Mt]=Zn(Oe.projectedAnchorX+Ne,Oe.projectedAnchorY+Ye,Oe.projectedAnchorZ+Ct,_?fe:B);const pt=At(L.getCameraToCenterDistance(pe),Mt);let Dt=D.evaluateSizeForFeature(S.textSizeData,X,Oe)*pt/a.aV;_&&(Dt*=S.tilePixelRatio/W);const Ee=wm(je,Dt);_?({x:ct,y:_t,z:tt}=pe.projectTilePoint(xe+Ee.x,Te+Ee.y,N.canonical),[ct,_t,tt]=Zn(ct+Ne,_t+Ye,tt+Ct,B)):(f&&Ee._rotate(-L.angle),ct+=Ee.x,_t+=Ee.y,tt=0);const at=S.allowVerticalPlacement&&Oe.placedOrientation===a.W.vertical?Math.PI/2:0;for(let Ft=0;Ft<ze;Ft++)a.k(oe,ct,_t,tt,at);J&&Oe.associatedIconIndex>=0&&(de[Oe.associatedIconIndex]={x:ct,y:_t,z:tt,angle:at})}else Jt(ze,oe)}if(J){le.clear();const Le=S.icon.placedSymbolArray;for(let Oe=0;Oe<Le.length;Oe++){const xe=Le.get(Oe),{numGlyphs:Te}=xe,ze=de[Oe];if(xe.hidden||!ze)Jt(Te,le);else{const{x:je,y:Ne,z:Ye,angle:Ct}=ze;for(let ct=0;ct<Te;ct++)a.k(le,je,Ne,Ye,Ct)}}S.icon.dynamicLayoutVertexBuffer.updateData(le)}S.text.dynamicLayoutVertexBuffer.updateData(oe)}function t_(S,f,_){return _.iconsInText&&f?"symbolTextAndIcon":S?"symbolSDF":"symbolIcon"}function si(S,f,_,A,D,L,B,N,W,X,J,te,oe){const le=S.context,de=le.gl,pe=S.transform,fe=N==="map",he=W==="map",we=fe&&_.layout.get("symbol-placement")!=="point",Le=fe&&!he&&!we,Oe=_.layout.get("symbol-sort-key").constantOr(1)!==void 0;let xe=!1;const Te=S.depthModeForSublayer(0,a.b4.ReadOnly),ze=[a.E(pe.center.lng),a.H(pe.center.lat)],je=_.layout.get("text-variable-anchor"),Ne=pe.projection.name==="globe",Ye=[],Ct=[0,-1,0];let ct=Ct;!Ne&&!pe.mercatorFromTransition||fe||(ct=function(_t){const tt=_t._camera.getWorldToCamera(_t.worldSize,1),Mt=a.m.multiply([],tt,_t.globeMatrix);a.m.invert(Mt,Mt);const pt=[0,0,0],Dt=[0,1,0,0];return a.e.transformMat4(Dt,Dt,Mt),pt[0]=Dt[0],pt[1]=Dt[1],pt[2]=Dt[2],a.v.normalize(pt,pt),pt}(pe));for(const _t of A){const tt=f.getTile(_t),Mt=tt.getBucket(_);if(!Mt||Mt.projection.name==="mercator"&&Ne)continue;const pt=D?Mt.text:Mt.icon;if(!pt||Mt.fullyClipped||!pt.segments.get().length)continue;const Dt=pt.programConfigurations.get(_.id),Ee=D||Mt.sdfIcons,at=D?Mt.textSizeData:Mt.iconSizeData,Ft=he||pe.pitch!==0,Rt=a.i(at,pe.zoom);let dr,or,br,ur,Ir=[0,0],Er=null;if(D)or=tt.glyphAtlasTexture?tt.glyphAtlasTexture:null,br=de.LINEAR,dr=tt.glyphAtlasTexture?tt.glyphAtlasTexture.size:[0,0],Mt.iconsInText&&(Ir=tt.imageAtlasTexture?tt.imageAtlasTexture.size:[0,0],Er=tt.imageAtlasTexture?tt.imageAtlasTexture:null,ur=Ft||S.options.rotating||S.options.zooming||at.kind==="composite"||at.kind==="camera"?de.LINEAR:de.NEAREST);else{const Xi=_.layout.get("icon-size").constantOr(0)!==1||Mt.iconsNeedLinear;or=tt.imageAtlasTexture?tt.imageAtlasTexture:null,br=Ee||S.options.rotating||S.options.zooming||Xi||Ft?de.LINEAR:de.NEAREST,dr=tt.imageAtlasTexture?tt.imageAtlasTexture.size:[0,0]}const vr=Mt.projection.name==="globe",_r=vr?ct:Ct,vi=vr?a.ao(pe.zoom):0,Wr=ms(_t,Mt.getProjection(),pe),tn=pe.calculatePixelsToTileUnitsMatrix(tt),Hi=qn(Wr,tt.tileID.canonical,he,fe,pe,Mt.getProjection(),tn),qa=S.terrain&&he&&we?a.m.invert(a.m.create(),Hi):bm,Xo=fs(Wr,tt.tileID.canonical,he,fe,pe,Mt.getProjection(),tn),$i=je&&Mt.hasTextData(),xi=Mt.hasIconTextFit()&&$i&&Mt.hasIconData();if(we){const Xi=pe.elevation,ws=Xi?Xi.getAtTileOffsetFunc(_t,pe.center.lat,pe.worldSize,Mt.getProjection()):null,Zs=Go(Wr,tt.tileID.canonical,he,fe,pe,Mt.getProjection(),tn);Vt(Mt,Wr,S,D,Zs,Xo,he,X,ws,_t)}const Ii=we||D&&je||xi,dn=S.translatePosMatrix(Wr,tt,L,B),sa=Ii?bm:Hi,ln=S.translatePosMatrix(Xo,tt,L,B,!0),Aa=Mt.getProjection().createInversionMatrix(pe,_t.canonical),Za=_.paint.get("icon-image-cross-fade").constantOr(0),Ca=[];S.terrainRenderModeElevated()&&he&&Ca.push("PITCH_WITH_MAP_TERRAIN"),vr&&(Ca.push("PROJECTION_GLOBE_VIEW"),Ii&&Ca.push("PROJECTED_POS_ON_VIEWPORT")),Za>0&&Ca.push("ICON_TRANSITION"),pt.zOffsetVertexBuffer&&Ca.push("Z_OFFSET");const Yo=Ee&&_.paint.get(D?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ll;Ee?Ll=Mt.iconsInText?Yd(at.kind,Rt,Le,he,S,dn,sa,ln,dr,Ir,_t,vi,ze,Aa,_r,Mt.getProjection()):ym(at.kind,Rt,Le,he,S,dn,sa,ln,D,dr,!0,_t,vi,ze,Aa,_r,Mt.getProjection()):(J<1&&Ca.push("SATURATION"),Ll=Xd(at.kind,Rt,Le,he,S,dn,sa,ln,D,dr,_t,vi,ze,Aa,_r,Mt.getProjection(),J,Za));const bs={program:S.getOrCreateProgram(t_(Ee,D,Mt),{config:Dt,defines:Ca}),buffers:pt,uniformValues:Ll,atlasTexture:or,atlasTextureIcon:Er,atlasInterpolation:br,atlasInterpolationIcon:ur,isSDF:Ee,hasHalo:Yo,tile:tt,labelPlaneMatrixInv:qa};if(Oe&&Mt.canOverlap){xe=!0;const Xi=pt.segments.get();for(const ws of Xi)Ye.push({segments:new a.bm([ws]),sortKey:ws.sortKey,state:bs})}else Ye.push({segments:pt.segments,sortKey:0,state:bs})}xe&&Ye.sort((_t,tt)=>_t.sortKey-tt.sortKey);for(const _t of Ye){const tt=_t.state;if(S.terrain&&S.terrain.setupElevationDraw(tt.tile,tt.program,{useDepthForOcclusion:pe.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:tt.labelPlaneMatrixInv}),le.activeTexture.set(de.TEXTURE0),tt.atlasTexture&&tt.atlasTexture.bind(tt.atlasInterpolation,de.CLAMP_TO_EDGE,!0),tt.atlasTextureIcon&&(le.activeTexture.set(de.TEXTURE1),tt.atlasTextureIcon&&tt.atlasTextureIcon.bind(tt.atlasInterpolationIcon,de.CLAMP_TO_EDGE,!0)),S.uploadCommonLightUniforms(S.context,tt.program),tt.hasHalo){const Mt=tt.uniformValues;Mt.u_is_halo=1,Sm(tt.buffers,_t.segments,_,S,tt.program,Te,te,oe,Mt,2),Mt.u_is_halo=0}else{if(tt.isSDF){const Mt=tt.uniformValues;tt.hasHalo&&(Mt.u_is_halo=1,Sm(tt.buffers,_t.segments,_,S,tt.program,Te,te,oe,Mt,1)),Mt.u_is_halo=0}Sm(tt.buffers,_t.segments,_,S,tt.program,Te,te,oe,tt.uniformValues,1)}}}function Sm(S,f,_,A,D,L,B,N,W,X){const J=[S.dynamicLayoutVertexBuffer,S.opacityVertexBuffer,S.iconTransitioningVertexBuffer,S.globeExtVertexBuffer,S.zOffsetVertexBuffer];D.draw(A,A.context.gl.TRIANGLES,L,B,N,a.b5.disabled,W,_.id,S.layoutVertexBuffer,S.indexBuffer,f,_.paint,A.transform.zoom,S.programConfigurations.get(_.id),J,X)}function Jd(S,f,_,A,D,L,B){const N=S.context.gl,W=_.paint.get("fill-pattern"),X=W&&W.constantOr(1);let J,te,oe,le,de;B?(te=X&&!_.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",J=N.LINES):(te=X?"fillPattern":"fill",J=N.TRIANGLES);for(const pe of A){const fe=f.getTile(pe);if(X&&!fe.patternsLoaded())continue;const he=fe.getBucket(_);if(!he)continue;S.prepareDrawTile();const we=he.programConfigurations.get(_.id),Le=S.isTileAffectedByFog(pe),Oe=S.getOrCreateProgram(te,{config:we,overrideFog:Le});X&&(S.context.activeTexture.set(N.TEXTURE0),fe.imageAtlasTexture&&fe.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),we.updatePaintBuffers());const xe=W.constantOr(null);if(xe&&fe.imageAtlas){const je=fe.imageAtlas.patternPositions[xe.toString()];je&&we.setConstantPatternPositions(je)}const Te=S.translatePosMatrix(pe.projMatrix,fe,_.paint.get("fill-translate"),_.paint.get("fill-translate-anchor")),ze=_.paint.get("fill-emissive-strength");if(B){le=he.indexBuffer2,de=he.segments2;const je=S.terrain&&S.terrain.renderingToTexture?S.terrain.drapeBufferSize:[N.drawingBufferWidth,N.drawingBufferHeight];oe=te==="fillOutlinePattern"&&X?x2(Te,ze,S,fe,je):Kv(Te,ze,je)}else le=he.indexBuffer,de=he.segments,oe=X?Yv(Te,ze,S,fe):Xv(Te,ze);S.uploadCommonUniforms(S.context,Oe,pe.toUnwrapped()),Oe.draw(S,J,D,S.stencilModeForClipping(pe),L,a.b5.disabled,oe,_.id,he.layoutVertexBuffer,le,de,_.paint,S.transform.zoom,we,void 0)}}function Qd(S,f,_,A,D,L,B,N){_.resetLayerRenderingStats();const W=S.context,X=W.gl,J=S.transform,te=_.paint.get("fill-extrusion-pattern"),oe=te.constantOr(1),le=_.paint.get("fill-extrusion-opacity"),de=S.style.enable3dLights(),pe=_.paint.get(de&&!oe?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),fe=[_.paint.get("fill-extrusion-ambient-occlusion-intensity"),pe],he=_.layout.get("fill-extrusion-edge-radius"),we=he>0&&!_.paint.get("fill-extrusion-rounded-roof"),Le=we?0:he,Oe=J.projection.name==="globe"?a.bO():0,xe=J.projection.name==="globe",Te=xe?a.ao(J.zoom):0,ze=[a.E(J.center.lng),a.H(J.center.lat)],je=_.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),Ne=_.paint.get("fill-extrusion-flood-light-intensity"),Ye=_.paint.get("fill-extrusion-vertical-scale"),Ct=_c(S,_.paint.get("fill-extrusion-cutoff-fade-range")),ct=_.paint.get("fill-extrusion-emissive-strength"),_t=[];let tt;xe&&_t.push("PROJECTION_GLOBE_VIEW"),fe[0]>0&&_t.push("FAUX_AO"),we&&_t.push("ZERO_ROOF_RADIUS"),N&&_t.push("HAS_CENTROID"),Ne>0&&_t.push("FLOOD_LIGHT"),Ct.shouldRenderCutoff&&_t.push("RENDER_CUTOFF");const Mt=S.renderPass==="shadow",pt=S.shadowRenderer,Dt=Mt&&!!pt;S.shadowRenderer&&(S.shadowRenderer.useNormalOffset=!0);let Ee=[0,0,0];if(pt){const Rt=S.style.directionalLight,dr=S.style.ambientLight;Rt&&dr&&(Ee=Am(Rt,dr)),tt=_t.concat(["SHADOWS_SINGLE_CASCADE"])}const at=Dt?"fillExtrusionDepth":oe?"fillExtrusionPattern":"fillExtrusion",Ft=_.getLayerRenderingStats();for(const Rt of A){const dr=f.getTile(Rt),or=dr.getBucket(_);if(!or||or.projection.name!==J.projection.name)continue;let br=!1;pt&&(br=pt.getMaxCascadeForTile(Rt.toUnwrapped())===0);const ur=S.isTileAffectedByFog(Rt),Ir=or.programConfigurations.get(_.id),Er=S.getOrCreateProgram(at,{config:Ir,defines:br?tt:_t,overrideFog:ur});if(S.terrain&&S.terrain.setupElevationDraw(dr,Er,{useMeterToDem:!0}),!or.centroidVertexBuffer){const Hi=Er.attributes.a_centroid_pos;Hi!==void 0&&X.vertexAttrib2f(Hi,0,0)}!Mt&&pt&&pt.setupShadows(dr.tileID.toUnwrapped(),Er,"vector-tile",dr.tileID.overscaledZ),oe&&(S.context.activeTexture.set(X.TEXTURE0),dr.imageAtlasTexture&&dr.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),Ir.updatePaintBuffers());const vr=te.constantOr(null);if(vr&&dr.imageAtlas){const Hi=dr.imageAtlas.patternPositions[vr.toString()];Hi&&Ir.setConstantPatternPositions(Hi)}const _r=_.paint.get("fill-extrusion-vertical-gradient");let vi;if(Mt&&pt){if(M2(dr.tileID,or,S))continue;const Hi=pt.calculateShadowPassMatrixFromTile(dr.tileID.toUnwrapped());vi=Zv(Hi,Le,Ye)}else{const Hi=S.translatePosMatrix(Rt.expandedProjMatrix,dr,_.paint.get("fill-extrusion-translate"),_.paint.get("fill-extrusion-translate-anchor")),qa=J.projection.createInversionMatrix(J,Rt.canonical);vi=oe?y2(Hi,S,_r,le,fe,Le,Rt,dr,Oe,Te,ze,qa,je,Ye):yc(Hi,S,_r,le,fe,Le,Rt,Oe,Te,ze,qa,je,Ye,Ne,Ee,ct)}S.uploadCommonUniforms(W,Er,Rt.toUnwrapped(),null,Ct);let Wr=or.segments;if(J.projection.name==="mercator"&&!Mt&&(Wr=or.getVisibleSegments(dr.tileID,S.terrain,S.transform.getFrustum(0)),!Wr.get().length))continue;if(Ft)if(Mt)for(const Hi of Wr.get())Ft.numRenderedVerticesInShadowPass+=Hi.primitiveLength;else for(const Hi of Wr.get())Ft.numRenderedVerticesInTransparentPass+=Hi.primitiveLength;const tn=[];(S.terrain||N)&&tn.push(or.centroidVertexBuffer),xe&&tn.push(or.layoutVertexExtBuffer),Er.draw(S,W.gl.TRIANGLES,D,L,B,a.b5.backCCW,vi,_.id,or.layoutVertexBuffer,or.indexBuffer,Wr,_.paint,S.transform.zoom,Ir,tn)}S.shadowRenderer&&(S.shadowRenderer.useNormalOffset=!1)}function bc(S,f,_,A,D,L,B,N,W,X,J,te,oe,le,de,pe,fe,he,we){const Le=S.context,Oe=Le.gl,xe=S.transform,Te=S.transform.zoom,ze=[],je=_c(S,_.paint.get("fill-extrusion-cutoff-fade-range"));X==="clear"?(ze.push("CLEAR_SUBPASS"),we&&(ze.push("CLEAR_FROM_TEXTURE"),Le.activeTexture.set(Oe.TEXTURE0),we.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE))):X==="sdf"&&ze.push("SDF_SUBPASS"),fe&&ze.push("HAS_CENTROID"),je.shouldRenderCutoff&&ze.push("RENDER_CUTOFF");const Ne=_.layout.get("fill-extrusion-edge-radius"),Ye=(Ct,ct,_t,tt,Mt)=>{const pt=ct.programConfigurations.get(_.id),Dt=S.isTileAffectedByFog(Ct),Ee=S.getOrCreateProgram("fillExtrusionGroundEffect",{config:pt,defines:ze,overrideFog:Dt}),at=((Rt,dr,or,br,ur,Ir,Er,vr,_r,vi,Wr)=>({u_matrix:dr,u_opacity:or,u_ao_pass:br?1:0,u_meter_to_tile:ur,u_ao:Ir,u_flood_light_intensity:Er,u_flood_light_color:vr,u_attenuation:_r,u_edge_radius:vi,u_fb:0,u_fb_size:Wr}))(0,tt,J,W,Mt,[te,oe*Mt],le,de,pe,Te>=17?0:Ne*Mt,we?we.size[0]:0),Ft=[];fe&&Ft.push(ct.hiddenByLandmarkVertexBuffer),S.uploadCommonUniforms(Le,Ee,Ct.toUnwrapped(),null,je),Ee.draw(S,Le.gl.TRIANGLES,D,L,B,N,at,_.id,ct.vertexBuffer,ct.indexBuffer,_t,_.paint,Te,pt,Ft)};for(const Ct of A){const ct=f.getTile(Ct),_t=ct.getBucket(_);if(!_t||_t.projection.name!==xe.projection.name||!_t.groundEffect||_t.groundEffect&&!_t.groundEffect.hasData())continue;const tt=_t.groundEffect,Mt=1/_t.tileToMeter;{const pt=S.translatePosMatrix(Ct.projMatrix,ct,_.paint.get("fill-extrusion-translate"),_.paint.get("fill-extrusion-translate-anchor")),Dt=tt.getDefaultSegment();Ye(Ct,tt,Dt,pt,Mt)}if(he)for(let pt=0;pt<4;pt++){const Dt=a.bP[pt](Ct),Ee=f.getTile(Dt);if(!Ee)continue;const at=Ee.getBucket(_);if(!at||at.projection.name!==xe.projection.name||!at.groundEffect||at.groundEffect&&!at.groundEffect.hasData())continue;const Ft=at.groundEffect;let Rt,dr;pt===0?(Rt=[-a.J,0,0],dr=1):pt===1?(Rt=[a.J,0,0],dr=0):pt===2?(Rt=[0,-a.J,0],dr=3):(Rt=[0,a.J,0],dr=2);const or=Ft.regionSegments[dr];if(!or)continue;const br=new Float32Array(16);a.m.translate(br,Ct.projMatrix,Rt),Ye(Ct,Ft,or,S.translatePosMatrix(br,ct,_.paint.get("fill-extrusion-translate"),_.paint.get("fill-extrusion-translate-anchor")),Mt)}}}function $x(S,f,_,A,D,L,B){A.centroidVertexArray.length===0&&A.createCentroidsBuffer();const N=L?L.findDEMTileFor(_):null;if(!(N&&N.dem||B))return;const W=he=>new a.P(Math.ceil((he+a.bS)*a.bT),0),X=he=>{const we=f.getSource().minzoom,Le=xe=>{const Te=f.getTileByID(xe);if(Te&&Te.hasData())return Te.getBucket(D)},Oe=[0,-1,1];for(const xe of Oe){if(he.overscaledZ+xe<we)continue;const Te=Le(he.calculateScaledKey(he.overscaledZ+xe));if(Te)return Te}},J=[0,0,0],te=(he,we)=>(J[0]=Math.min(he.min.y,we.min.y),J[1]=Math.max(he.max.y,we.max.y),J[2]=a.J-we.min.x>he.max.x?we.min.x-a.J:he.max.x,J),oe=(he,we)=>(J[0]=Math.min(he.min.x,we.min.x),J[1]=Math.max(he.max.x,we.max.x),J[2]=a.J-we.min.y>he.max.y?we.min.y-a.J:he.max.y,J),le=[(he,we)=>te(he,we),(he,we)=>te(we,he),(he,we)=>oe(he,we),(he,we)=>oe(we,he)],de=(he,we,Le,Oe,xe,Te,ze)=>{if(!L)return 0;const je=[[Te?Le:he,Te?he:Le,0],[Te?Le:we,Te?we:Le,0]],Ne=ze<0?a.J+ze:ze,Ye=[Te?Ne:(he+we)/2,Te?(he+we)/2:Ne,0];return Le===0&&ze<0||Le!==0&&ze>0?L.getForTilePoints(xe,[Ye],!0,Oe):je.push(Ye),L.getForTilePoints(_,je,!0,N),Math.max(je[0][2],je[1][2],Ye[2])/L.exaggeration()};for(let he=0;he<4;he++){const we=A.borderFeatureIndices[he];if(we.length===0)continue;const Le=a.bP[he](_),Oe=X(Le);if(!(Oe&&Oe instanceof a.bQ)||A.borderDoneWithNeighborZ[he]===Oe.canonical.z)continue;Oe.centroidVertexArray.length===0&&Oe.createCentroidsBuffer();const xe=L?L.findDEMTileFor(Le):null;if(!(xe&&xe.dem||B))continue;const Te=(he<2?1:5)-he,ze=Oe.borderDoneWithNeighborZ[Te]!==A.canonical.z,je=Oe.borderFeatureIndices[Te];let Ne=0;if(A.canonical.z!==Oe.canonical.z){for(const Ye of we)A.showCentroid(A.featuresOnBorder[Ye]);if(ze)for(const Ye of je)Oe.showCentroid(Oe.featuresOnBorder[Ye]);A.borderDoneWithNeighborZ[he]=Oe.canonical.z,Oe.borderDoneWithNeighborZ[Te]=A.canonical.z}for(const Ye of we){const Ct=A.featuresOnBorder[Ye],ct=A.centroidData[Ct.centroidDataIndex],_t=Ct.borders[he];let tt;for(;Ne<je.length;){tt=Oe.featuresOnBorder[je[Ne]];const Mt=tt.borders[Te];if(Mt[1]>_t[0]+3||Mt[0]>_t[0]-3)break;Oe.showCentroid(tt),Ne++}if(tt&&Ne<je.length){const Mt=Ne;let pt=0;for(;!(tt.borders[Te][0]>_t[1]-3)&&(pt++,++Ne!==je.length);)tt=Oe.featuresOnBorder[je[Ne]];if(tt=Oe.featuresOnBorder[je[Mt]],pt>1){const at=tt.borders[Te];Math.abs(_t[0]-at[0])<3&&Math.abs(_t[1]-at[1])<3&&(pt=1,Ne=Mt+1)}else if(pt===0){A.showCentroid(Ct);continue}const Dt=Oe.centroidData[tt.centroidDataIndex];B&&pt===1&&(((pe=ct).flags|(fe=Dt).flags)&a.bR?(pe.flags|=a.bR,fe.flags|=a.bR):(pe.flags&=~a.bR,fe.flags&=~a.bR));const Ee=Ct.intersectsCount()>1||tt.intersectsCount()>1;if(pt>1)Ne=Mt,ct.centroidXY=Dt.centroidXY=new a.P(0,0);else if(xe&&xe.dem&&!Ee){const at=le[he](ct,Dt),Ft=he%2?a.J-1:0,Rt=de(at[0],Math.min(a.J-1,at[1]),Ft,xe,Le,he<2,at[2]);ct.centroidXY=Dt.centroidXY=W(Rt)}else Ee?ct.centroidXY=Dt.centroidXY=new a.P(0,0):(ct.centroidXY=A.encodeBorderCentroid(Ct),Dt.centroidXY=Oe.encodeBorderCentroid(tt));A.writeCentroidToBuffer(ct),Oe.writeCentroidToBuffer(Dt)}else A.showCentroid(Ct)}A.borderDoneWithNeighborZ[he]=Oe.canonical.z,Oe.borderDoneWithNeighborZ[Te]=A.canonical.z}var pe,fe;(A.needsCentroidUpdate||!A.centroidVertexBuffer&&A.centroidVertexArray.length!==0)&&A.uploadCentroid(S)}const Ch=[1,0,0],Gx=[0,1,0],T2=[0,0,1];function M2(S,f,_){const A=_.transform,D=_.shadowRenderer;if(!D)return!0;const L=S.toUnwrapped(),B=A.tileSize*D._cascades[_.currentShadowCascade].scale;let N=f.maxHeight;if(A.elevation){const pe=A.elevation.getMinMaxForTile(S);pe&&(N+=pe.max)}const W=[...D.shadowDirection];W[2]=-W[2];const X=D.computeSimplifiedTileShadowVolume(L,N,B,W);if(!X)return!1;const J=[Ch,Gx,T2,W,[W[0],0,W[2]],[0,W[1],W[2]]],te=A.projection.name==="globe",oe=A.scaleZoom(B),le=a.F.fromInvProjectionMatrix(A.invProjMatrix,A.worldSize,oe,!te),de=D.getCurrentCascadeFrustum();return le.intersectsPrecise(X.vertices,X.planes,J)===0||de.intersectsPrecise(X.vertices,X.planes,J)===0}function A2(S){const f=S._nearZ,_=S.projection.farthestPixelDistance(S),A=_-f,D=.2*S.height,L=f+D;return[f,_,(L-D-f)/A,(L-f)/A]}const r_=new a.C(1,0,0,1),i_=new a.C(0,1,0,1),n_=new a.C(0,0,1,1),a_=new a.C(1,0,1,1),Ux=new a.C(0,1,1,1);function wc(S,f,_,A,D,L){const B=S.context,N=S.transform,W=B.gl,X=N.projection.name==="globe",J=X?["PROJECTION_GLOBE_VIEW"]:[];let te=a.m.clone(_.projMatrix);if(X&&a.ao(N.zoom)>0){const tt=a.bU(_.canonical,N),Mt=a.bV(tt);te=a.m.multiply(new Float32Array(16),N.globeMatrix,Mt),a.m.multiply(te,N.projMatrix,te)}const oe=a.m.create();oe[12]+=2*D/(a.a4.devicePixelRatio*N.width),oe[13]+=2*L/(a.a4.devicePixelRatio*N.height),a.m.multiply(te,oe,te);const le=S.getOrCreateProgram("debug",{defines:J}),de=f.getTileByID(_.key);S.terrain&&S.terrain.setupElevationDraw(de,le);const pe=a.b4.disabled,fe=a.b6.disabled,he=S.colorModeForRenderPass(),we="$debug";B.activeTexture.set(W.TEXTURE0),S.emptyTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),X?de._makeGlobeTileDebugBuffers(S.context,N):de._makeDebugTileBoundsBuffers(S.context,N.projection);const Le=de._tileDebugBuffer||S.debugBuffer,Oe=de._tileDebugIndexBuffer||S.debugIndexBuffer,xe=de._tileDebugSegments||S.debugSegments;le.draw(S,W.LINE_STRIP,pe,fe,he,a.b5.disabled,zx(te,A),we,Le,Oe,xe,null,null,null,[de._globeTileDebugBorderBuffer]);const Te=de.latestRawTileData,ze=Math.floor((Te&&Te.byteLength||0)/1024),je=f.getTile(_).tileSize,Ne=512/Math.min(je,512)*(_.overscaledZ/N.zoom)*.5;let Ye=_.canonical.toString();_.overscaledZ!==_.canonical.z&&(Ye+=` => ${_.overscaledZ}`),Ye+=` ${ze}kb`,function(tt,Mt){tt.initDebugOverlayCanvas();const pt=tt.debugOverlayCanvas,Dt=tt.context.gl,Ee=tt.debugOverlayCanvas.getContext("2d");Ee.clearRect(0,0,pt.width,pt.height),Ee.shadowColor="white",Ee.shadowBlur=2,Ee.lineWidth=1.5,Ee.strokeStyle="white",Ee.textBaseline="top",Ee.font="bold 36px Open Sans, sans-serif",Ee.fillText(Mt,5,5),Ee.strokeText(Mt,5,5),tt.debugOverlayTexture.update(pt),tt.debugOverlayTexture.bind(Dt.LINEAR,Dt.CLAMP_TO_EDGE)}(S,Ye);const Ct=de._tileDebugTextBuffer||S.debugBuffer,ct=de._tileDebugTextIndexBuffer||S.quadTriangleIndexBuffer,_t=de._tileDebugTextSegments||S.debugSegments;le.draw(S,W.TRIANGLES,pe,fe,a.a.alphaBlended,a.b5.disabled,zx(te,a.C.transparent,Ne),we,Ct,ct,_t,null,null,null,[de._globeTileDebugTextBuffer])}function jx(S,f,_,A){mu(S,0,f+_/2,S.transform.width,_,A)}function Ih(S,f,_,A){mu(S,f-_/2,0,_,S.transform.height,A)}function mu(S,f,_,A,D,L){const B=S.context,N=B.gl;N.enable(N.SCISSOR_TEST),N.scissor(f*a.a4.devicePixelRatio,_*a.a4.devicePixelRatio,A*a.a4.devicePixelRatio,D*a.a4.devicePixelRatio),B.clear({color:L}),N.disable(N.SCISSOR_TEST)}const Hx=a.bW([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Tm}=Hx;function Ws(S,f,_,A){S.emplaceBack(f,_,A)}class ys{constructor(f){this.vertexArray=new a.bX,this.indices=new a.bp,Ws(this.vertexArray,-1,-1,1),Ws(this.vertexArray,1,-1,1),Ws(this.vertexArray,-1,1,1),Ws(this.vertexArray,1,1,1),Ws(this.vertexArray,-1,-1,-1),Ws(this.vertexArray,1,-1,-1),Ws(this.vertexArray,-1,1,-1),Ws(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=f.createVertexBuffer(this.vertexArray,Tm),this.indexBuffer=f.createIndexBuffer(this.indices),this.segment=a.bm.simpleSegment(0,0,36,12)}}function gu(S,f,_,A,D,L){const B=S.context.gl,N=f.paint.get("sky-atmosphere-color"),W=f.paint.get("sky-atmosphere-halo-color"),X=f.paint.get("sky-atmosphere-sun-intensity"),J=((te,oe,le,de,pe)=>({u_matrix_3f:te,u_sun_direction:oe,u_sun_intensity:le,u_color_tint_r:[de.r,de.g,de.b,de.a],u_color_tint_m:[pe.r,pe.g,pe.b,pe.a],u_luminance:5e-5}))(a.bx.fromMat4(a.bx.create(),A),D,X,N,W);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_CUBE_MAP_POSITIVE_X+L,f.skyboxTexture,0),_.draw(S,B.TRIANGLES,a.b4.disabled,a.b6.disabled,a.a.unblended,a.b5.frontCW,J,"skyboxCapture",f.skyboxGeometry.vertexBuffer,f.skyboxGeometry.indexBuffer,f.skyboxGeometry.segment)}const Wx=a.bW([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class o_{constructor(f){const _=new a.bY;_.emplaceBack(-1,1,1,0,0),_.emplaceBack(1,1,1,1,0),_.emplaceBack(1,-1,1,1,1),_.emplaceBack(-1,-1,1,0,1);const A=new a.bp;A.emplaceBack(0,1,2),A.emplaceBack(2,3,0),this.vertexBuffer=f.createVertexBuffer(_,Wx.members),this.indexBuffer=f.createIndexBuffer(A),this.segments=a.bm.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const qx=a.bW([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class s_{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15}}class C2{constructor(f){this.colorModeAlphaBlendedWriteRGB=new a.a([a.bZ,a.b_,a.bZ,a.b_],a.C.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new a.a([a.bZ,a.b$,a.bZ,a.b$],a.C.transparent,[!1,!1,!1,!0]),this.params=new s_,this.allocatedStarsCount=0,f.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1}),f.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01})}update(f){const _=f.context;if(!this.atmosphereBuffer||this.allocatedStarsCount!==this.params.starsCount){this.atmosphereBuffer=new o_(_),this.allocatedStarsCount=this.params.starsCount;const A=100,D=200,L=function(J){const te=a.c2(30),oe=[];for(let le=0;le<J;++le){const de=2*Math.PI*te(),pe=Math.acos(1-2*te())-.5*Math.PI;oe.push(a.v.fromValues(Math.cos(pe)*Math.cos(de),Math.cos(pe)*Math.sin(de),Math.sin(pe)))}return oe}(this.allocatedStarsCount),B=a.c2(300),N=new a.c0,W=new a.bp;let X=0;for(let J=0;J<L.length;++J){const te=a.v.scale([],L[J],200),oe=Math.max(0,1+.01*A*(1*B()-.5)),le=Math.max(0,1+.01*D*(1*B()-.5));N.emplaceBack(te[0],te[1],te[2],-1,-1,oe,le),N.emplaceBack(te[0],te[1],te[2],1,-1,oe,le),N.emplaceBack(te[0],te[1],te[2],1,1,oe,le),N.emplaceBack(te[0],te[1],te[2],-1,1,oe,le),W.emplaceBack(X+0,X+1,X+2),W.emplaceBack(X+0,X+2,X+3),X+=4}this.starsVx=_.createVertexBuffer(N,qx.members),this.starsIdx=_.createIndexBuffer(W),this.starsSegments=a.bm.simpleSegment(0,0,N.length,W.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(f,_){const A=f.context,D=A.gl,L=f.transform,B=new a.b4(D.LEQUAL,a.b4.ReadOnly,[0,1]),N=a.ao(L.zoom),W=_.properties.get("color").toArray01(),X=_.properties.get("high-color").toArray01(),J=_.properties.get("space-color").toArray01PremultipliedAlpha(),te=5e-4,oe=a.c1(_.properties.get("horizon-blend"),0,1,te,.25),le=a.bb(f,A,L)&&oe===te?L.worldSize/(2*Math.PI*1.025)-1:L.globeRadius,de=f.frameCounter/1e3%1,pe=a.v.length(L.globeCenterInViewSpace),fe=Math.sqrt(Math.pow(pe,2)-Math.pow(le,2)),he=Math.acos(fe/pe),we=Le=>{const Oe=L.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];Le&&Oe.push("ALPHA_PASS");const xe=f.getOrCreateProgram("globeAtmosphere",{defines:Oe}),Te=((je,Ne,Ye,Ct,ct,_t,tt,Mt,pt,Dt,Ee,at)=>({u_frustum_tl:je,u_frustum_tr:Ne,u_frustum_br:Ye,u_frustum_bl:Ct,u_horizon:ct,u_transition:_t,u_fadeout_range:tt,u_color:Mt,u_high_color:pt,u_space_color:Dt,u_temporal_offset:Ee,u_horizon_angle:at}))(L.frustumCorners.TL,L.frustumCorners.TR,L.frustumCorners.BR,L.frustumCorners.BL,L.frustumCorners.horizon,N,oe,W,X,J,de,he);f.uploadCommonUniforms(A,xe);const ze=this.atmosphereBuffer;ze&&xe.draw(f,D.TRIANGLES,B,a.b6.disabled,Le?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,a.b5.backCW,Te,Le?"atmosphere_glow_alpha":"atmosphere_glow",ze.vertexBuffer,ze.indexBuffer,ze.segments)};we(!1),we(!0)}drawStars(f,_){const A=a.c(_.properties.get("star-intensity"),0,1);if(A===0)return;const D=f.context,L=D.gl,B=f.transform,N=f.getOrCreateProgram("stars"),W=a.q.identity([]);a.q.rotateX(W,W,-B._pitch),a.q.rotateZ(W,W,-B.angle),a.q.rotateX(W,W,a.d(B._center.lat)),a.q.rotateY(W,W,-a.d(B._center.lng));const X=a.m.fromQuat(new Float32Array(16),W),J=a.m.multiply([],B.starsProjMatrix,X),te=a.bx.fromMat4([],X),oe=a.bx.invert([],te),le=[0,1,0];a.v.transformMat3(le,le,oe),a.v.scale(le,le,this.params.sizeMultiplier);const de=[1,0,0];a.v.transformMat3(de,de,oe),a.v.scale(de,de,this.params.sizeMultiplier);const pe=(fe=le,he=de,we=A,{u_matrix:Float32Array.from(J),u_up:fe,u_right:he,u_intensity_multiplier:we});var fe,he,we;f.uploadCommonUniforms(D,N),this.starsVx&&this.starsIdx&&N.draw(f,L.TRIANGLES,a.b4.disabled,a.b6.disabled,this.colorModeAlphaBlendedWriteRGB,a.b5.disabled,pe,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Mm(S,f){const _=[...S],A=f.cameraWorldSizeForFog/f.worldSize,D=a.m.identity([]);return a.m.scale(D,D,[A,A,1]),a.m.multiply(_,D,_),a.m.multiply(_,f.worldToFogMatrix,_),_}function l_(S,f,_,A){const D=_.material,L=A.context,{baseColorTexture:B,metallicRoughnessTexture:N}=D.pbrMetallicRoughness,{normalTexture:W,occlusionTexture:X,emissionTexture:J}=D;function te(oe,le,de){if(oe&&(S.push(le),L.activeTexture.set(L.gl.TEXTURE0+de),oe.gfxTexture)){const{minFilter:pe,magFilter:fe,wrapS:he,wrapT:we}=oe.sampler;oe.gfxTexture.bindExtraParam(pe,fe,he,we)}}te(B,"HAS_TEXTURE_u_baseColorTexture",va.BaseColor),te(N,"HAS_TEXTURE_u_metallicRoughnessTexture",va.MetallicRoughness),te(W,"HAS_TEXTURE_u_normalTexture",va.Normal),te(X,"HAS_TEXTURE_u_occlusionTexture",va.Occlusion),te(J,"HAS_TEXTURE_u_emissionTexture",va.Emission),_.texcoordBuffer&&(S.push("HAS_ATTRIBUTE_a_uv_2f"),f.push(_.texcoordBuffer)),_.colorBuffer&&(S.push(_.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),f.push(_.colorBuffer)),_.normalBuffer&&(S.push("HAS_ATTRIBUTE_a_normal_3f"),f.push(_.normalBuffer)),_.pbrBuffer&&(S.push("HAS_ATTRIBUTE_a_pbr"),S.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),f.push(_.pbrBuffer)),D.alphaMode!=="OPAQUE"&&D.alphaMode!=="MASK"||S.push("UNPREMULT_TEXTURE_IN_SHADER"),D.defined||S.push("DIFFUSE_SHADED"),S.push("USE_STANDARD_DERIVATIVES")}function Sc(S,f,_,A,D,L){const B=_.paint.get("model-opacity"),N=f.context,W=new a.b4(f.context.gl.LEQUAL,a.b4.ReadWrite,f.depthRangeFor3D),X=f.transform,J=S.mesh,te=J.material,oe=te.pbrMetallicRoughness,le=f.style.fog;let de;de=f.transform.projection.zAxisUnit==="pixels"?[...S.nodeModelMatrix]:a.m.multiply([],A.zScaleMatrix,S.nodeModelMatrix),a.m.multiply(de,A.negCameraPosMatrix,de);const pe=a.m.invert([],de);a.m.transpose(pe,pe);const fe=_.paint.get("model-emissive-strength").constantOr(0),he=Kd(new Float32Array(S.worldViewProjection),new Float32Array(de),new Float32Array(pe),f,B,oe.baseColorFactor,te.emissiveFactor,oe.metallicFactor,oe.roughnessFactor,te,fe,_),we={defines:[]},Le=[];l_(we.defines,Le,J,f);const Oe=f.shadowRenderer;Oe&&(Oe.useNormalOffset=!1);let xe=null;if(le){const je=Mm(S.nodeModelMatrix,f.transform);if(xe=new Float32Array(je),X.projection.name!=="globe"){const Ne=J.aabb.min,Ye=J.aabb.max,[Ct,ct]=le.getOpacityForBounds(je,Ne[0],Ne[1],Ye[0],Ye[1]);we.overrideFog=Ct>=Sa||ct>=Sa}}const Te=_c(f,_.paint.get("model-cutoff-fade-range"));Te.shouldRenderCutoff&&we.defines.push("RENDER_CUTOFF");const ze=f.getOrCreateProgram("model",we);f.uploadCommonUniforms(N,ze,null,xe,Te),f.renderPass!=="shadow"&&Oe&&Oe.setupShadowsFromMatrix(S.nodeModelMatrix,ze),ze.draw(f,N.gl.TRIANGLES,W,D,L,J.material.doubleSided?a.b5.disabled:a.b5.backCCW,he,_.id,J.vertexBuffer,J.indexBuffer,J.segments,_.paint,f.transform.zoom,void 0,Le)}function Zx(S,f,_,A,D,L,B){let N;N=S.projection.name==="globe"?a.c5(_,S):[..._],a.m.multiply(N,N,f.matrix);const W=a.m.multiply([],A,N);if(f.meshes)for(const X of f.meshes){if(X.material.alphaMode!=="BLEND"){B.push({mesh:X,depth:0,modelIndex:D,worldViewProjection:W,nodeModelMatrix:N});continue}const J=a.v.transformMat4([],X.centroid,W);J[2]>0&&L.push({mesh:X,depth:J[2],modelIndex:D,worldViewProjection:W,nodeModelMatrix:N})}if(f.children)for(const X of f.children)Zx(S,X,_,A,D,L,B)}function ef(S,f,_,A){const D=_.shadowRenderer;if(!D)return;const L=D.getShadowPassDepthMode(),B=D.getShadowPassColorMode(),N=D.calculateShadowPassMatrixFromMatrix(f),W=xm(N);_.getOrCreateProgram("modelDepth",{defines:["DEPTH_TEXTURE"]}).draw(_,_.context.gl.TRIANGLES,L,a.b6.disabled,B,a.b5.backCCW,W,A.id,S.vertexBuffer,S.indexBuffer,S.segments,A.paint,_.transform.zoom,void 0,void 0)}function I2(S,f,_){const A=f.updateZoomBasedPaintProperties(),D=function(L,B,N){let W,X,J,te=L.terrain?L.terrain.exaggeration():0;if(L.terrain&&te>0){const oe=L.terrain,le=oe.findDEMTileFor(N);le&&le.dem?W=a.c7.create(oe,N,le):te=0}if(te===0&&(B.terrainElevationMin=0,B.terrainElevationMax=0),te===B.validForExaggeration&&(te===0||W&&W._demTile&&W._demTile.tileID===B.validForDEMTile.id&&W._dem._timestamp===B.validForDEMTile.timestamp))return!1;for(const oe in B.instancesPerModel){const le=B.instancesPerModel[oe];for(let de=0;de<le.instancedDataArray.length;++de){const pe=(W?te*W.getElevationAt(0|le.instancedDataArray.float32[16*de],0|le.instancedDataArray.float32[16*de+1],!0,!0):0)+le.instancesEvaluatedElevation[de];le.instancedDataArray.float32[16*de+6]=pe,X=X?Math.min(B.terrainElevationMin,pe):pe,J=J?Math.max(B.terrainElevationMax,pe):pe}}return B.terrainElevationMin=X||0,B.terrainElevationMax=J||0,B.validForExaggeration=te,B.validForDEMTile=W&&W._demTile?{id:W._demTile.tileID,timestamp:W._dem._timestamp}:{id:void 0,timestamp:0},!0}(S,f,_);(A||D)&&(f.uploaded=!1,f.upload(S.context))}const qo={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new a.c3([0,0,0],[a.J,a.J,0])};function E2(S,f){const _=1<<S.canonical.z,A=f.getFreeCameraOptions().position,D=f.elevation,L=S.canonical.x/_,B=(S.canonical.x+1)/_,N=S.canonical.y/_,W=(S.canonical.y+1)/_;let X=f._centerAltitude;if(D){const le=D.getMinMaxForTile(S);le&&le.max>X&&(X=le.max)}const J=a.c(A.x,L,B)-A.x,te=a.c(A.y,N,W)-A.y,oe=a.b(X,f.center.lat)-A.z;return f._zoomFromMercatorZ(Math.sqrt(J*J+te*te+oe*oe))}function tf(S,f,_,A,D,L,B){const N=S.context,W=S.renderPass==="shadow",X=S.shadowRenderer,J=W&&X?X.getShadowPassDepthMode():new a.b4(N.gl.LEQUAL,a.b4.ReadWrite,S.depthRangeFor3D),te=S.isTileAffectedByFog(L);if(_.meshes)for(const oe of _.meshes){const le=["MODEL_POSITION_ON_GPU"],de=[];let pe,fe,he;A.instancedDataArray.length>20&&le.push("INSTANCED_ARRAYS");const we=_c(S,f.paint.get("model-cutoff-fade-range"));if(we.shouldRenderCutoff&&le.push("RENDER_CUTOFF"),W&&X)pe=S.getOrCreateProgram("modelDepth",{defines:le}),fe=xm(B.shadowTileMatrix,B.shadowTileMatrix,Float32Array.from(_.matrix)),he=X.getShadowPassColorMode();else{l_(le,de,oe,S),pe=S.getOrCreateProgram("model",{defines:le,overrideFog:te});const Oe=oe.material,xe=Oe.pbrMetallicRoughness,Te=f.paint.get("model-opacity"),ze=f.paint.get("model-emissive-strength").constantOr(0);fe=Kd(L.expandedProjMatrix,Float32Array.from(_.matrix),new Float32Array(16),S,Te,xe.baseColorFactor,Oe.emissiveFactor,xe.metallicFactor,xe.roughnessFactor,Oe,ze,f,D),X&&(B.shadowUniformsInitialized?pe.setShadowUniformValues(N,X.getShadowUniformValues()):(X.setupShadows(L.toUnwrapped(),pe,"model-tile",L.overscaledZ),B.shadowUniformsInitialized=!0)),he=we.shouldRenderCutoff||Te<1||Oe.alphaMode!=="OPAQUE"?a.a.alphaBlended:a.a.unblended}S.uploadCommonUniforms(N,pe,L.toUnwrapped(),null,we);const Le=oe.material.doubleSided?a.b5.disabled:a.b5.backCCW;if(A.instancedDataArray.length>20)de.push(A.instancedDataBuffer),pe.draw(S,N.gl.TRIANGLES,J,a.b6.disabled,he,Le,fe,f.id,oe.vertexBuffer,oe.indexBuffer,oe.segments,f.paint,S.transform.zoom,void 0,de,A.instancedDataArray.length);else{const Oe=W?"u_instance":"u_normal_matrix";for(let xe=0;xe<A.instancedDataArray.length;++xe)fe[Oe]=new Float32Array(A.instancedDataArray.arrayBuffer,64*xe,16),pe.draw(S,N.gl.TRIANGLES,J,a.b6.disabled,he,Le,fe,f.id,oe.vertexBuffer,oe.indexBuffer,oe.segments,f.paint,S.transform.zoom,void 0,de)}}if(_.children)for(const oe of _.children)tf(S,f,oe,A,D,L,B)}const D2=[1,-1,1];function Xx(S,f,_,A){if(!_.modelManager)return!0;const D=_.modelManager;if(!_.shadowRenderer)return!0;const L=_.shadowRenderer,B=f.aabb;let N=!0,W=S.maxHeight;if(W===0){let J=0;for(const te in S.instancesPerModel){const oe=D.getModel(te,A);oe?J=Math.max(J,Math.max(Math.max(oe.aabb.max[0],oe.aabb.max[1]),oe.aabb.max[2])):N=!1}W=S.maxScale*J*1.41+S.maxVerticalOffset,N&&(S.maxHeight=W)}B.max[2]=W,B.min[2]+=S.terrainElevationMin,B.max[2]+=S.terrainElevationMax,a.v.transformMat4(B.min,B.min,f.tileMatrix),a.v.transformMat4(B.max,B.max,f.tileMatrix);const X=B.intersects(L.getCurrentCascadeFrustum());return _.currentShadowCascade===0&&(S.isInsideFirstShadowMapFrustum=X===2),X===0}class Yx{}class Eh{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(f,_,A){{const te=this._storage.get(_.id);if(te)return te.lastUsedFrameIdx=f,te.buf}const D=A.gl,L=D.getBufferParameter(D.ELEMENT_ARRAY_BUFFER,D.BUFFER_SIZE),B=new ArrayBuffer(L),N=new Int16Array(B);D.getBufferSubData(D.ELEMENT_ARRAY_BUFFER,0,new Int16Array(B));const W=new a.c9;for(let te=0;te<L/2;te+=3){const oe=N[te],le=N[te+1],de=N[te+2];W.emplaceBack(oe,le),W.emplaceBack(le,de),W.emplaceBack(de,oe)}const X=A.bindVertexArrayOES.current,J=new Yx;return J.buf=new a.I(A,W),J.lastUsedFrameIdx=f,this._storage.set(_.id,J),A.bindVertexArrayOES.set(X),J.buf}update(f){for(const[_,A]of this._storage)f-A.lastUsedFrameIdx>30&&(A.buf.destroy(),this._storage.delete(_))}destroy(){for(const[f,_]of this._storage)_.buf.destroy(),this._storage.delete(f)}}class Kx{registerParameter(f,_,A,D,L){}registerButton(f,_,A){}}const u_={symbol:function(S,f,_,A,D){if(S.renderPass!=="translucent")return;const L=a.b6.disabled,B=S.colorModeForRenderPass();_.layout.get("text-variable-anchor")&&function(N,W,X,J,te,oe,le){const de=W.transform,pe=te==="map",fe=oe==="map";for(const he of N){const we=J.getTile(he),Le=we.getBucket(X);if(!Le||!Le.text||!Le.text.segments.get().length)continue;const Oe=a.i(Le.textSizeData,de.zoom),xe=ms(he,Le.getProjection(),de),Te=de.calculatePixelsToTileUnitsMatrix(we),ze=qn(xe,we.tileID.canonical,fe,pe,de,Le.getProjection(),Te),je=Le.hasIconTextFit()&&Le.hasIconData();if(Oe){const Ne=Math.pow(2,de.zoom-we.tileID.overscaledZ);e_(Le,pe,fe,le,a.bG,de,ze,he,Ne,Oe,je)}}}(A,S,_,f,_.layout.get("text-rotation-alignment"),_.layout.get("text-pitch-alignment"),D),_.paint.get("icon-opacity").constantOr(1)!==0&&si(S,f,_,A,!1,_.paint.get("icon-translate"),_.paint.get("icon-translate-anchor"),_.layout.get("icon-rotation-alignment"),_.layout.get("icon-pitch-alignment"),_.layout.get("icon-keep-upright"),_.paint.get("icon-color-saturation"),L,B),_.paint.get("text-opacity").constantOr(1)!==0&&si(S,f,_,A,!0,_.paint.get("text-translate"),_.paint.get("text-translate-anchor"),_.layout.get("text-rotation-alignment"),_.layout.get("text-pitch-alignment"),_.layout.get("text-keep-upright"),_.paint.get("icon-color-saturation"),L,B),f.map.showCollisionBoxes&&(Qv(S,f,_,A,_.paint.get("text-translate"),_.paint.get("text-translate-anchor"),!0),Qv(S,f,_,A,_.paint.get("icon-translate"),_.paint.get("icon-translate-anchor"),!1))},circle:function(S,f,_,A){if(S.renderPass!=="translucent")return;const D=_.paint.get("circle-opacity"),L=_.paint.get("circle-stroke-width"),B=_.paint.get("circle-stroke-opacity"),N=_.layout.get("circle-sort-key").constantOr(1)!==void 0,W=_.paint.get("circle-emissive-strength");if(D.constantOr(1)===0&&(L.constantOr(1)===0||B.constantOr(1)===0))return;const X=S.context,J=X.gl,te=S.transform,oe=S.depthModeForSublayer(0,a.b4.ReadOnly),le=a.b6.disabled,de=S.colorModeForDrapableLayerRenderPass(W),pe=te.projection.name==="globe",fe=[a.E(te.center.lng),a.H(te.center.lat)],he=[];for(let Le=0;Le<A.length;Le++){const Oe=A[Le],xe=f.getTile(Oe),Te=xe.getBucket(_);if(!Te||Te.projection.name!==te.projection.name)continue;const ze=Te.programConfigurations.get(_.id),je=a.bH(_),Ne=S.isTileAffectedByFog(Oe);pe&&je.push("PROJECTION_GLOBE_VIEW");const Ye=S.getOrCreateProgram("circle",{config:ze,defines:je,overrideFog:Ne}),Ct=Te.layoutVertexBuffer,ct=Te.globeExtVertexBuffer,_t=Te.indexBuffer,tt=te.projection.createInversionMatrix(te,Oe.canonical),Mt={programConfiguration:ze,program:Ye,layoutVertexBuffer:Ct,globeExtVertexBuffer:ct,indexBuffer:_t,uniformValues:a.bI(S,Oe,xe,tt,fe,_),tile:xe};if(N){const pt=Te.segments.get();for(const Dt of pt)he.push({segments:new a.bm([Dt]),sortKey:Dt.sortKey,state:Mt})}else he.push({segments:Te.segments,sortKey:0,state:Mt})}N&&he.sort((Le,Oe)=>Le.sortKey-Oe.sortKey);const we={useDepthForOcclusion:te.depthOcclusionForSymbolsAndCircles};for(const Le of he){const{programConfiguration:Oe,program:xe,layoutVertexBuffer:Te,globeExtVertexBuffer:ze,indexBuffer:je,uniformValues:Ne,tile:Ye}=Le.state,Ct=Le.segments;S.terrain&&S.terrain.setupElevationDraw(Ye,xe,we),S.uploadCommonUniforms(X,xe,Ye.tileID.toUnwrapped()),xe.draw(S,J.TRIANGLES,oe,le,de,a.b5.disabled,Ne,_.id,Te,je,Ct,_.paint,te.zoom,Oe,[ze])}},heatmap:function(S,f,_,A){if(_.paint.get("heatmap-opacity")!==0)if(S.renderPass==="offscreen"){const D=S.context,L=D.gl,B=a.b6.disabled,N=new a.a([L.ONE,L.ONE,L.ONE,L.ONE],a.C.transparent,[!0,!0,!0,!0]);(function(le,de,pe,fe){const he=le.gl,we=de.width*fe,Le=de.height*fe;le.activeTexture.set(he.TEXTURE1),le.viewport.set([0,0,we,Le]);let Oe=pe.heatmapFbo;if(!Oe||Oe&&(Oe.width!==we||Oe.height!==Le)){Oe&&Oe.destroy();const xe=he.createTexture();he.bindTexture(he.TEXTURE_2D,xe),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_S,he.CLAMP_TO_EDGE),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_T,he.CLAMP_TO_EDGE),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MIN_FILTER,he.LINEAR),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MAG_FILTER,he.LINEAR),Oe=pe.heatmapFbo=le.createFramebuffer(we,Le,!0,null),function(Te,ze,je,Ne,Ye,Ct){const ct=Te.gl;ct.texImage2D(ct.TEXTURE_2D,0,Te.extRenderToTextureHalfFloat?ct.RGBA16F:ct.RGBA,Ye,Ct,0,ct.RGBA,Te.extRenderToTextureHalfFloat?ct.HALF_FLOAT:ct.UNSIGNED_BYTE,null),Ne.colorAttachment.set(je)}(le,0,xe,Oe,we,Le)}else he.bindTexture(he.TEXTURE_2D,Oe.colorAttachment.get()),le.bindFramebuffer.set(Oe.framebuffer)})(D,S,_,S.transform.projection.name==="globe"?.5:.25),D.clear({color:a.C.transparent});const W=S.transform,X=W.projection.name==="globe",J=X?["PROJECTION_GLOBE_VIEW"]:[],te=X?a.b5.frontCCW:a.b5.disabled,oe=[a.E(W.center.lng),a.H(W.center.lat)];for(let le=0;le<A.length;le++){const de=A[le];if(f.hasRenderableParent(de))continue;const pe=f.getTile(de),fe=pe.getBucket(_);if(!fe||fe.projection.name!==W.projection.name)continue;const he=S.isTileAffectedByFog(de),we=fe.programConfigurations.get(_.id),Le=S.getOrCreateProgram("heatmap",{config:we,defines:J,overrideFog:he}),{zoom:Oe}=S.transform;S.terrain&&S.terrain.setupElevationDraw(pe,Le),S.uploadCommonUniforms(D,Le,de.toUnwrapped());const xe=W.projection.createInversionMatrix(W,de.canonical);Le.draw(S,L.TRIANGLES,a.b4.disabled,B,N,te,Bx(S,de,pe,xe,oe,Oe,_.paint.get("heatmap-intensity")),_.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,_.paint,S.transform.zoom,we,X?[fe.globeExtVertexBuffer]:null)}D.viewport.set([0,0,S.width,S.height])}else S.renderPass==="translucent"&&(S.context.setColorMode(S.colorModeForRenderPass()),function(D,L){const B=D.context,N=B.gl,W=L.heatmapFbo;if(!W)return;B.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,W.colorAttachment.get()),B.activeTexture.set(N.TEXTURE1);let X=L.colorRampTexture;X||(X=L.colorRampTexture=new a.a9(B,L.colorRamp,N.RGBA)),X.bind(N.LINEAR,N.CLAMP_TO_EDGE),D.getOrCreateProgram("heatmapTexture").draw(D,N.TRIANGLES,a.b4.disabled,a.b6.disabled,D.colorModeForRenderPass(),a.b5.disabled,((J,te,oe,le)=>({u_image:0,u_color_ramp:1,u_opacity:te.paint.get("heatmap-opacity")}))(0,L),L.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,L.paint,D.transform.zoom)}(S,_))},line:function(S,f,_,A){if(S.renderPass!=="translucent")return;const D=_.paint.get("line-opacity"),L=_.paint.get("line-width");if(D.constantOr(1)===0||L.constantOr(1)===0)return;const B=_.paint.get("line-emissive-strength"),N=S.depthModeForSublayer(0,a.b4.ReadOnly),W=S.colorModeForDrapableLayerRenderPass(B),X=S.terrain&&S.terrain.renderingToTexture?1:a.a4.devicePixelRatio,J=_.paint.get("line-dasharray"),te=J.constantOr(1),oe=_.layout.get("line-cap"),le=_.paint.get("line-pattern"),de=le.constantOr(1),pe=_.paint.get("line-pattern").constantOr(1),fe=_.paint.get("line-opacity").constantOr(1)!==1;let he=!pe&&fe;const we=_.paint.get("line-gradient"),Le=de?"linePattern":"line",Oe=S.context,xe=Oe.gl,Te=a.bJ(_);S.terrain&&S.terrain.clipOrMaskOverlapStencilType()&&(he=!1);for(const ze of A){const je=f.getTile(ze);if(de&&!je.patternsLoaded())continue;const Ne=je.getBucket(_);if(!Ne)continue;S.prepareDrawTile();const Ye=Ne.programConfigurations.get(_.id),Ct=S.isTileAffectedByFog(ze),ct=S.getOrCreateProgram(Le,{config:Ye,defines:Te,overrideFog:Ct}),_t=le.constantOr(null);if(_t&&je.imageAtlas){const Rt=je.imageAtlas.patternPositions[_t.toString()];Rt&&Ye.setConstantPatternPositions(Rt)}const tt=J.constantOr(null),Mt=oe.constantOr(null);if(!de&&tt&&Mt&&je.lineAtlas){const Rt=je.lineAtlas.getDash(tt,Mt);Rt&&Ye.setConstantPatternPositions(Rt)}let[pt,Dt]=_.paint.get("line-trim-offset");(Mt==="round"||Mt==="square")&&pt!==Dt&&(pt===0&&(pt-=1),Dt===1&&(Dt+=1));const Ee=S.terrain?ze.projMatrix:null,at=de?a.bK(S,je,_,Ee,X):a.bL(S,je,_,Ee,Ne.lineClipsArray.length,X,[pt,Dt]);if(we){const Rt=Ne.gradients[_.id];let dr=Rt.texture;if(_.gradientVersion!==Rt.version){let or=256;if(_.stepInterpolant){const br=f.getSource().maxzoom,ur=ze.canonical.z===br?Math.ceil(1<<S.transform.maxZoom-ze.canonical.z):1;or=a.c(a.bM(Ne.maxLineLength/a.J*1024*ur),256,Oe.maxTextureSize)}Rt.gradient=a.bN({expression:_.gradientExpression(),evaluationKey:"lineProgress",resolution:or,image:Rt.gradient||void 0,clips:Ne.lineClipsArray}),Rt.texture?Rt.texture.update(Rt.gradient):Rt.texture=new a.a9(Oe,Rt.gradient,xe.RGBA),Rt.version=_.gradientVersion,dr=Rt.texture}Oe.activeTexture.set(xe.TEXTURE1),dr.bind(_.stepInterpolant?xe.NEAREST:xe.LINEAR,xe.CLAMP_TO_EDGE)}te&&(Oe.activeTexture.set(xe.TEXTURE0),je.lineAtlasTexture&&je.lineAtlasTexture.bind(xe.LINEAR,xe.REPEAT),Ye.updatePaintBuffers()),de&&(Oe.activeTexture.set(xe.TEXTURE0),je.imageAtlasTexture&&je.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),Ye.updatePaintBuffers()),S.uploadCommonUniforms(Oe,ct,ze.toUnwrapped());const Ft=Rt=>{ct.draw(S,xe.TRIANGLES,N,Rt,W,a.b5.disabled,at,_.id,Ne.layoutVertexBuffer,Ne.indexBuffer,Ne.segments,_.paint,S.transform.zoom,Ye,[Ne.layoutVertexBuffer2])};if(he){const Rt=S.stencilModeForClipping(ze).ref;Rt===0&&S.terrain&&Oe.clear({stencil:0});const dr={func:xe.EQUAL,mask:255};at.u_alpha_discard_threshold=.8,Ft(new a.b6(dr,Rt,255,xe.KEEP,xe.KEEP,xe.INVERT)),at.u_alpha_discard_threshold=0,Ft(new a.b6(dr,Rt,255,xe.KEEP,xe.KEEP,xe.KEEP))}else Ft(S.stencilModeForClipping(ze))}he&&(S.resetStencilClippingMasks(),S.terrain&&Oe.clear({stencil:0}))},fill:function(S,f,_,A){const D=_.paint.get("fill-color"),L=_.paint.get("fill-opacity");if(L.constantOr(1)===0)return;const B=_.paint.get("fill-emissive-strength"),N=S.colorModeForDrapableLayerRenderPass(B),W=_.paint.get("fill-pattern"),X=S.opaquePassEnabledForLayer()&&!W.constantOr(1)&&D.constantOr(a.C.transparent).a===1&&L.constantOr(0)===1?"opaque":"translucent";if(S.renderPass===X){const J=S.depthModeForSublayer(1,S.renderPass==="opaque"?a.b4.ReadWrite:a.b4.ReadOnly);Jd(S,f,_,A,J,N,!1)}if(S.renderPass==="translucent"&&_.paint.get("fill-antialias")){const J=S.depthModeForSublayer(_.getPaintProperty("fill-outline-color")?2:0,a.b4.ReadOnly);Jd(S,f,_,A,J,N,!0)}},"fill-extrusion":function(S,f,_,A){const D=_.paint.get("fill-extrusion-opacity"),L=S.context,B=L.gl,N=S.terrain,W=N&&N.renderingToTexture;if(D===0)return;const X=S.conflationActive&&S.layerUsedInConflation(_,f.getSource());if(X&&function(J,te,oe,le){for(const de of le){const pe=te.getTile(de).getBucket(oe);pe&&(pe.updateReplacement(de,J.replacementSource),pe.uploadCentroid(J.context))}}(S,f,_,A),N||X)for(const J of A){const te=f.getTile(J).getBucket(_);te&&$x(S.context,f,J,te,_,N,X)}if(S.renderPass==="shadow"&&S.shadowRenderer){const J=S.shadowRenderer;if(N&&D<.65&&_._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof a.am)return;const te=J.getShadowPassDepthMode(),oe=J.getShadowPassColorMode();Qd(S,f,_,A,te,a.b6.disabled,oe,X)}else if(S.renderPass==="translucent"){const J=!_.paint.get("fill-extrusion-pattern").constantOr(1),te=_.paint.get("fill-extrusion-color").constantOr(a.C.white);if(!W&&te.a!==0){const oe=new a.b4(S.context.gl.LEQUAL,a.b4.ReadWrite,S.depthRangeFor3D);D===1&&J?Qd(S,f,_,A,oe,a.b6.disabled,a.a.unblended,X):(Qd(S,f,_,A,oe,a.b6.disabled,a.a.disabled,X),Qd(S,f,_,A,oe,S.stencilModeFor3D(),S.colorModeForRenderPass(),X),S.resetStencilClippingMasks())}if(S.style.enable3dLights()&&J&&(!N&&S.transform.projection.name!=="globe"||W)){const oe=_.paint.get("fill-extrusion-opacity"),le=_.paint.get("fill-extrusion-ambient-occlusion-intensity"),de=_.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),pe=_.paint.get("fill-extrusion-flood-light-intensity"),fe=_.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),he=le>0&&de>0,we=pe>0,Le=(xe,Te,ze)=>(1-ze)*xe+ze*Te,Oe=xe=>{const Te=S.depthModeForSublayer(1,a.b4.ReadOnly,B.LEQUAL,!0),ze=_.paint.get(xe?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),je=Le(.1,3,ze),Ne=S._showOverdrawInspector;if(!Ne){const Ye=new a.b6({func:B.ALWAYS,mask:255},255,255,B.KEEP,B.KEEP,B.REPLACE),Ct=new a.a([B.ONE,B.ONE,B.ONE,B.ONE],a.C.transparent,[!1,!1,!1,!0],B.MIN);bc(S,f,_,A,Te,Ye,Ct,a.b5.disabled,xe,"sdf",oe,le,de,pe,fe,je,X,!1)}{const Ye=Ne?a.b6.disabled:new a.b6({func:B.EQUAL,mask:255},255,255,B.KEEP,B.DECR,B.DECR),Ct=Ne?S.colorModeForRenderPass():new a.a([B.ONE_MINUS_DST_ALPHA,B.DST_ALPHA,B.ONE,B.ONE],a.C.transparent,[!0,!0,!0,!0]);bc(S,f,_,A,Te,Ye,Ct,a.b5.disabled,xe,"color",oe,le,de,pe,fe,je,X,!1)}};if(W){const xe=(Te,ze,je)=>{const Ne=S.depthModeForSublayer(1,a.b4.ReadOnly,B.LEQUAL,!1),Ye=_.paint.get(Te?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Ct=Le(.1,3,Ye);{const ct=new a.a([B.ONE,B.ONE,B.ONE,B.ONE],a.C.transparent,[!1,!1,!1,!0]);bc(S,f,_,A,Ne,a.b6.disabled,ct,a.b5.disabled,Te,"clear",oe,le,de,pe,fe,Ct,X,ze)}{const ct=new a.b6({func:B.ALWAYS,mask:255},255,255,B.KEEP,B.KEEP,B.REPLACE),_t=new a.a([B.ONE,B.ONE,B.ONE,B.ONE],a.C.transparent,[!1,!1,!1,!0],B.MIN);bc(S,f,_,A,Ne,ct,_t,a.b5.disabled,Te,"sdf",oe,le,de,pe,fe,Ct,X,ze)}{const ct=Te?B.ZERO:B.ONE_MINUS_DST_ALPHA,_t=new a.b6({func:B.EQUAL,mask:255},255,255,B.KEEP,B.DECR,B.DECR),tt=new a.a([ct,B.DST_ALPHA,B.ONE_MINUS_DST_ALPHA,B.ZERO],a.C.transparent,[!0,!0,!0,!0]);bc(S,f,_,A,Ne,_t,tt,a.b5.disabled,Te,"color",oe,le,de,pe,fe,Ct,X,ze)}{const ct=new a.a([B.ONE,B.ONE,B.ONE,Te?B.ZERO:B.ONE],a.C.transparent,[!1,!1,!1,!0],Te?B.FUNC_ADD:B.MAX);bc(S,f,_,A,Ne,a.b6.disabled,ct,a.b5.disabled,Te,"clear",oe,le,de,pe,fe,Ct,X,ze,je)}};if(he||we){let Te;if(S.prepareDrawTile(),N){const ze=N.drapeBufferSize[0],je=N.drapeBufferSize[1];Te=N.framebufferCopyTexture,Te&&(!Te||Te.size[0]===ze&&Te.size[1]===je)||(Te&&Te.destroy(),Te=N.framebufferCopyTexture=new a.a9(L,new a.a5({width:ze,height:je}),B.RGBA)),Te.bind(B.LINEAR,B.CLAMP_TO_EDGE),B.copyTexImage2D(B.TEXTURE_2D,0,B.RGBA,0,0,ze,je,0)}he&&xe(!0,!1,Te),we&&xe(!1,!0,Te)}}else he&&Oe(!0),we&&Oe(!1)}}},hillshade:function(S,f,_,A){if(S.renderPass!=="offscreen"&&S.renderPass!=="translucent"||S.style.disableElevatedTerrain)return;const D=S.context,L=S.terrain&&S.terrain.renderingToTexture,[B,N]=S.renderPass!=="translucent"||L?[{},A]:S.stencilConfigForOverlap(A);for(const W of N){const X=f.getTile(W);if(X.needsHillshadePrepare&&S.renderPass==="offscreen")vc(S,X,_);else if(S.renderPass==="translucent"){const J=S.depthModeForSublayer(0,a.b4.ReadOnly),te=_.paint.get("hillshade-emissive-strength"),oe=S.colorModeForDrapableLayerRenderPass(te),le=L&&S.terrain?S.terrain.stencilModeForRTTOverlap(W):B[W.overscaledZ];js(S,W,X,_,J,le,oe)}}D.viewport.set([0,0,S.width,S.height]),S.resetStencilClippingMasks()},raster:function(S,f,_,A,D,L){if(S.renderPass!=="translucent"||_.paint.get("raster-opacity")===0)return;const B=S.context,N=B.gl,W=f.getSource(),X=function(ze,je,Ne){const Ye=ze.paint.get("raster-color"),Ct=[],ct=ze.paint.get("raster-resampling"),_t=ze.paint.get("raster-color-mix"),tt=ze.paint.get("raster-color-range"),Mt=[_t[0],_t[1],_t[2],0],pt=_t[3],Dt=ct==="nearest"?Ne.NEAREST:Ne.LINEAR;if(Ye&&Ct.push("RASTER_COLOR"),Ye){je.activeTexture.set(Ne.TEXTURE2);let Ee=ze.colorRampTexture;Ee||(Ee=ze.colorRampTexture=new a.a9(je,ze.colorRamp,Ne.RGBA)),Ee.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE)}return{mix:Mt,range:tt,offset:pt,defines:Ct,resampling:Dt}}(_,B,N),J=X.defines,te=S.transform.projection.name==="globe";let oe=!1;if(W instanceof a.aK&&!A.length){if(!te)return;if(W.onNorthPole)oe=!0,J.push("GLOBE_POLES");else{if(!W.onSouthPole)return;oe=!0,J.push("GLOBE_POLES")}}const le=_.paint.get("raster-emissive-strength"),de=S.colorModeForDrapableLayerRenderPass(le),pe=S.terrain&&S.terrain.renderingToTexture,fe=W instanceof a.aK&&_.paint.get("raster-elevation")!==0,he=!S.options.moving,we=_.paint.get("raster-resampling")==="nearest"?N.NEAREST:N.LINEAR;if(oe){const ze=f.getSource();if(!(ze instanceof a.aK))return;const je=ze.texture;if(!je)return;const Ne=S.globeSharedBuffers;if(!Ne)return;const Ye=new a.b4(N.LEQUAL,a.b4.ReadWrite,S.depthRangeFor3D),Ct=Float32Array.from(S.transform.expandedFarZProjMatrix);let ct=a.bj(0,0,S.transform);const _t=Float32Array.from(a.bh(a.bi(new a.t(0,0,0)))),tt={opacity:1,mix:0};S.terrain&&S.terrain.prepareDrawTile(),B.activeTexture.set(N.TEXTURE0),je.bind(we,N.CLAMP_TO_EDGE),B.activeTexture.set(N.TEXTURE1),je.bind(we,N.CLAMP_TO_EDGE),je.useMipmap&&B.extTextureFilterAnisotropic&&S.transform.pitch>20&&N.texParameterf(N.TEXTURE_2D,B.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,B.extTextureFilterAnisotropicMax);const[Mt,pt,Dt,Ee]=Ne.getPoleBuffers(0,!0);let at;ze.onNorthPole?(at=Mt,S.renderDefaultNorthPole=!1):(ct=a.m.scale(a.m.create(),ct,[1,-1,1]),at=pt,S.renderDefaultSouthPole=!1);const Ft=((dr,or,br,ur,Ir,Er,vr,_r,vi,Wr,tn,Hi)=>Fx(dr,or,br,new Float32Array(16),new Float32Array(9),[0,0],0,[0,0],[0,0,0,0],1,ur,Ir,[0,0],vr,2,vi,Wr,tn,1,0,Hi))(Ct,_t,ct,tt,_,0,_.paint.get("raster-elevation"),0,X.mix,X.offset,X.range,le),Rt=S.getOrCreateProgram("raster",{defines:X.defines});return S.uploadCommonUniforms(B,Rt,null),void Rt.draw(S,N.TRIANGLES,Ye,a.b6.disabled,de,a.b5.disabled,Ft,_.id,at,Dt,Ee)}if(!A.length)return;const[Le,Oe]=W instanceof a.aK||pe?[{},A]:S.stencilConfigForOverlap(A),xe=Oe[Oe.length-1].overscaledZ,Te=fe&&te;Te&&X.defines.push("PROJECTION_GLOBE_VIEW"),fe&&X.defines.push("RENDER_CUTOFF");for(const ze of Oe){const je=ze.toUnwrapped(),Ne=f.getTile(ze);if(pe&&(!Ne||!Ne.hasData())||!Ne.texture)continue;let Ye,Ct;pe?(Ye=a.b4.disabled,Ct=ze.projMatrix):fe?(Ye=new a.b4(N.LEQUAL,a.b4.ReadWrite,S.depthRangeFor3D),Ct=te?Float32Array.from(S.transform.expandedFarZProjMatrix):S.transform.calculateProjMatrix(je,he)):(Ye=S.depthModeForSublayer(ze.overscaledZ-xe,_.paint.get("raster-opacity")===1?a.b4.ReadWrite:a.b4.ReadOnly,N.LESS),Ct=S.transform.calculateProjMatrix(je,he));const ct=S.terrain&&pe?S.terrain.stencilModeForRTTOverlap(ze):Le[ze.overscaledZ],_t=L?0:_.paint.get("raster-fade-duration");Ne.registerFadeDuration(_t);const tt=f.findLoadedParent(ze,0),Mt=dm(Ne,tt,f,S.transform,_t);let pt,Dt;S.terrain&&S.terrain.prepareDrawTile(),B.activeTexture.set(N.TEXTURE0),Ne.texture&&Ne.texture.bind(we,N.CLAMP_TO_EDGE),B.activeTexture.set(N.TEXTURE1),tt?(tt.texture&&tt.texture.bind(we,N.CLAMP_TO_EDGE),pt=Math.pow(2,tt.tileID.overscaledZ-Ne.tileID.overscaledZ),Dt=[Ne.tileID.canonical.x*pt%1,Ne.tileID.canonical.y*pt%1]):Ne.texture&&Ne.texture.bind(we,N.CLAMP_TO_EDGE),Ne.texture&&Ne.texture.useMipmap&&B.extTextureFilterAnisotropic&&S.transform.pitch>20&&N.texParameterf(N.TEXTURE_2D,B.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,B.extTextureFilterAnisotropicMax);const Ee=S.transform;let at;const Ft=fe?A2(Ee):[0,0,0,0];let Rt,dr,or,br,ur;Te&&W instanceof a.aK&&W.coordinates.length>3?(Rt=Float32Array.from(a.bh(a.bi(new a.t(0,0,0)))),dr=Float32Array.from(Ee.globeMatrix),or=Float32Array.from(a.bc(Ee)),br=[a.E(Ee.center.lng),a.H(Ee.center.lat)],at=W.elevatedGlobePerspectiveTransform,ur=W.elevatedGlobeGridMatrix||new Float32Array(9)):(at=W instanceof a.aK?W.perspectiveTransform:[0,0],Rt=new Float32Array(16),dr=new Float32Array(9),or=new Float32Array(16),br=[0,0],ur=new Float32Array(9));const Ir=Fx(Ct,Rt,dr,or,ur,Dt||[0,0],a.ao(S.transform.zoom),br,Ft,pt||1,Mt,_,at,fe?_.paint.get("raster-elevation"):0,2,X.mix,X.offset,X.range,1,0,le),Er=S.isTileAffectedByFog(ze),vr=S.getOrCreateProgram("raster",{defines:X.defines,overrideFog:Er});if(S.uploadCommonUniforms(B,vr,je),W instanceof a.aK){const _r=W.elevatedGlobeVertexBuffer,vi=W.elevatedGlobeIndexBuffer;if(pe||!te)W.boundsBuffer&&W.boundsSegments&&vr.draw(S,N.TRIANGLES,Ye,a.b6.disabled,de,a.b5.disabled,Ir,_.id,W.boundsBuffer,S.quadTriangleIndexBuffer,W.boundsSegments);else if(_r&&vi){const Wr=Ee.zoom<=a.Z?W.elevatedGlobeSegments:W.getSegmentsForLongitude(Ee.center.lng);Wr&&(vr.draw(S,N.TRIANGLES,Ye,a.b6.disabled,de,a.b5.backCW,Ir,_.id,_r,vi,Wr),vr.draw(S,N.TRIANGLES,Ye,a.b6.disabled,de,a.b5.frontCW,Ir,_.id,_r,vi,Wr))}}else{const{tileBoundsBuffer:_r,tileBoundsIndexBuffer:vi,tileBoundsSegments:Wr}=S.getTileBoundsBuffers(Ne);vr.draw(S,N.TRIANGLES,Ye,ct,de,a.b5.disabled,Ir,_.id,_r,vi,Wr)}}S.resetStencilClippingMasks()},background:function(S,f,_,A){const D=_.paint.get("background-color"),L=_.paint.get("background-opacity"),B=_.paint.get("background-emissive-strength");if(L===0)return;const N=S.context,W=N.gl,X=S.transform,J=X.tileSize,te=_.paint.get("background-pattern");if(S.isPatternMissing(te,_.scope))return;const oe=!te&&D.a===1&&L===1&&S.opaquePassEnabledForLayer()?"opaque":"translucent";if(S.renderPass!==oe)return;const le=a.b6.disabled,de=S.depthModeForSublayer(0,oe==="opaque"?a.b4.ReadWrite:a.b4.ReadOnly),pe=S.colorModeForDrapableLayerRenderPass(B),fe=te?"backgroundPattern":"background";let he,we=A;we||(he=S.getBackgroundTiles(),we=Object.values(he).map(Le=>Le.tileID)),te&&(N.activeTexture.set(W.TEXTURE0),S.imageManager.bind(S.context,_.scope));for(const Le of we){const Oe=S.isTileAffectedByFog(Le),xe=S.getOrCreateProgram(fe,{overrideFog:Oe}),Te=Le.toUnwrapped(),ze=A?Le.projMatrix:S.transform.calculateProjMatrix(Te);S.prepareDrawTile();const je=f?f.getTile(Le):he?he[Le.key]:new a.bt(Le,J,X.zoom,S),Ne=te?Mh(ze,B,L,S,te,_.scope,{tileID:Le,tileSize:J}):Jv(ze,B,L,D);S.uploadCommonUniforms(N,xe,Te);const{tileBoundsBuffer:Ye,tileBoundsIndexBuffer:Ct,tileBoundsSegments:ct}=S.getTileBoundsBuffers(je);xe.draw(S,W.TRIANGLES,de,le,pe,a.b5.disabled,Ne,_.id,Ye,Ct,ct)}},sky:function(S,f,_){const A=S._atmosphere?a.ao(S.transform.zoom):1,D=_.paint.get("sky-opacity")*A;if(D===0)return;const L=S.context,B=_.paint.get("sky-type"),N=new a.b4(L.gl.LEQUAL,a.b4.ReadOnly,[0,1]),W=S.frameCounter/1e3%1;B==="atmosphere"?S.renderPass==="offscreen"?_.needsSkyboxCapture(S)&&(function(X,J,te,oe){const le=X.context,de=le.gl;let pe=J.skyboxFbo;if(!pe){pe=J.skyboxFbo=le.createFramebuffer(32,32,!0,null),J.skyboxGeometry=new ys(le),J.skyboxTexture=le.gl.createTexture(),de.bindTexture(de.TEXTURE_CUBE_MAP,J.skyboxTexture),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_WRAP_S,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_WRAP_T,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_MIN_FILTER,de.LINEAR),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_MAG_FILTER,de.LINEAR);for(let Le=0;Le<6;++Le)de.texImage2D(de.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,de.RGBA,32,32,0,de.RGBA,de.UNSIGNED_BYTE,null)}le.bindFramebuffer.set(pe.framebuffer),le.viewport.set([0,0,32,32]);const fe=J.getCenter(X,!0),he=X.getOrCreateProgram("skyboxCapture"),we=new Float64Array(16);a.m.identity(we),a.m.rotateY(we,we,.5*-Math.PI),gu(X,J,he,we,fe,0),a.m.identity(we),a.m.rotateY(we,we,.5*Math.PI),gu(X,J,he,we,fe,1),a.m.identity(we),a.m.rotateX(we,we,.5*-Math.PI),gu(X,J,he,we,fe,2),a.m.identity(we),a.m.rotateX(we,we,.5*Math.PI),gu(X,J,he,we,fe,3),a.m.identity(we),gu(X,J,he,we,fe,4),a.m.identity(we),a.m.rotateY(we,we,Math.PI),gu(X,J,he,we,fe,5),le.viewport.set([0,0,X.width,X.height])}(S,_),_.markSkyboxValid(S)):S.renderPass==="sky"&&function(X,J,te,oe,le){const de=X.context,pe=de.gl,fe=X.transform,he=X.getOrCreateProgram("skybox");de.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_CUBE_MAP,J.skyboxTexture);const we=((Le,Oe,xe,Te,ze)=>({u_matrix:Le,u_sun_direction:Oe,u_cubemap:0,u_opacity:Te,u_temporal_offset:ze}))(fe.skyboxMatrix,J.getCenter(X,!1),0,oe,le);X.uploadCommonUniforms(de,he),he.draw(X,pe.TRIANGLES,te,a.b6.disabled,X.colorModeForRenderPass(),a.b5.backCW,we,"skybox",J.skyboxGeometry.vertexBuffer,J.skyboxGeometry.indexBuffer,J.skyboxGeometry.segment)}(S,_,N,D,W):B==="gradient"&&S.renderPass==="sky"&&function(X,J,te,oe,le){const de=X.context,pe=de.gl,fe=X.transform,he=X.getOrCreateProgram("skyboxGradient");J.skyboxGeometry||(J.skyboxGeometry=new ys(de)),de.activeTexture.set(pe.TEXTURE0);let we=J.colorRampTexture;we||(we=J.colorRampTexture=new a.a9(de,J.colorRamp,pe.RGBA)),we.bind(pe.LINEAR,pe.CLAMP_TO_EDGE);const Le=((Oe,xe,Te,ze,je)=>({u_matrix:Oe,u_color_ramp:0,u_center_direction:xe,u_radius:a.d(Te),u_opacity:ze,u_temporal_offset:je}))(fe.skyboxMatrix,J.getCenter(X,!1),J.paint.get("sky-gradient-radius"),oe,le);X.uploadCommonUniforms(de,he),he.draw(X,pe.TRIANGLES,te,a.b6.disabled,X.colorModeForRenderPass(),a.b5.backCW,Le,"skyboxGradient",J.skyboxGeometry.vertexBuffer,J.skyboxGeometry.indexBuffer,J.skyboxGeometry.segment)}(S,_,N,D,W)},debug:function(S,f,_,A,D){for(let L=0;L<_.length;L++)if(D){const W=new a.C(A.r*.8,A.g*.8,A.b*.8,1);wc(S,f,_[L],A,-1,-1),wc(S,f,_[L],A,-1,1),wc(S,f,_[L],A,1,1),wc(S,f,_[L],A,1,-1),wc(S,f,_[L],W,0,0)}else wc(S,f,_[L],A,0,0)},custom:function(S,f,_,A){const D=S.context,L=_.implementation;if(!S.transform.projection.unsupportedLayers||!S.transform.projection.unsupportedLayers.includes("custom")||S.terrain&&(S.terrain.renderingToTexture||S.renderPass==="offscreen")&&_.isLayerDraped(f)){if(S.renderPass==="offscreen"){const B=L.prerender;if(B){if(S.setCustomLayerDefaults(),D.setColorMode(S.colorModeForRenderPass()),S.transform.projection.name==="globe"){const N=S.transform.pointMerc;B.call(L,D.gl,S.transform.customLayerMatrix(),S.transform.getProjection(),S.transform.globeToMercatorMatrix(),a.ao(S.transform.zoom),[N.x,N.y],S.transform.pixelsPerMeterRatio)}else B.call(L,D.gl,S.transform.customLayerMatrix());D.setDirty(),S.setBaseState()}}else if(S.renderPass==="translucent"){if(S.terrain&&S.terrain.renderingToTexture){const N=L.renderToTile;if(N){const W=A[0].canonical,X=new a.M(W.x+A[0].wrap*(1<<W.z),W.y,W.z);D.setDepthMode(a.b4.disabled),D.setStencilMode(a.b6.disabled),D.setColorMode(S.colorModeForRenderPass()),S.setCustomLayerDefaults(),N.call(L,D.gl,X),D.setDirty(),S.setBaseState()}return}S.setCustomLayerDefaults(),D.setColorMode(S.colorModeForRenderPass()),D.setStencilMode(a.b6.disabled);const B=L.renderingMode==="3d"?new a.b4(S.context.gl.LEQUAL,a.b4.ReadWrite,S.depthRangeFor3D):S.depthModeForSublayer(0,a.b4.ReadOnly);if(D.setDepthMode(B),S.transform.projection.name==="globe"){const N=S.transform.pointMerc;L.render(D.gl,S.transform.customLayerMatrix(),S.transform.getProjection(),S.transform.globeToMercatorMatrix(),a.ao(S.transform.zoom),[N.x,N.y],S.transform.pixelsPerMeterRatio)}else L.render(D.gl,S.transform.customLayerMatrix());D.setDirty(),S.setBaseState(),D.bindFramebuffer.set(null)}}else a.X("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(S,f,_,A){if(S.renderPass==="opaque")return;const D=_.paint.get("model-opacity");if(D===0)return;const L=_.paint.get("model-cast-shadows");if(S.renderPass==="shadow"&&(!L||S.terrain&&D<.65&&_._transitionablePaint._values["model-opacity"].value.expression instanceof a.am))return;const B=S.shadowRenderer,N=_.paint.get("model-receive-shadows");B&&(B.useNormalOffset=!0,N||(B.enabled=!1));const W=()=>{B&&(B.useNormalOffset=!0,N||(B.enabled=!0))},X=f.getSource();if(S.renderPass==="light-beam"&&X.type!=="batched-model")return;if(X.type==="vector"||X.type==="geojson")return function(he,we,Le,Oe){const xe=he.transform;if(xe.projection.name!=="mercator")return void a.X(`Drawing 3D models for ${xe.projection.name} projection is not yet implemented`);const Te=xe.getFreeCameraOptions().position;if(!he.modelManager)return;const ze=he.modelManager,je=he.shadowRenderer;if(!Le._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Ne=Le._unevaluatedLayout._values["model-id"],Ye={...Le.layout.get("model-id").parameters};for(const Ct of Oe){const ct=we.getTile(Ct).getBucket(Le);if(!ct||ct.projection.name!==xe.projection.name)continue;const _t=E2(Ct,xe);Ye.zoom=_t;const tt=Ne.possiblyEvaluate(Ye);if(I2(he,ct,Ct),qo.shadowUniformsInitialized=!1,qo.useSingleShadowCascade=!!je&&je.getMaxCascadeForTile(Ct.toUnwrapped())===0,he.renderPass==="shadow"&&je){if(he.currentShadowCascade===1&&ct.isInsideFirstShadowMapFrustum)continue;const Dt=xe.calculatePosMatrix(Ct.toUnwrapped(),xe.worldSize);if(qo.tileMatrix.set(Dt),qo.shadowTileMatrix=Float32Array.from(je.calculateShadowPassMatrixFromMatrix(Dt)),qo.aabb.min.fill(0),qo.aabb.max[0]=qo.aabb.max[1]=a.J,qo.aabb.max[2]=0,Xx(ct,qo,he,Le.scope))continue}const Mt=1<<Ct.canonical.z,pt=[((Te.x-Ct.wrap)*Mt-Ct.canonical.x)*a.J,(Te.y*Mt-Ct.canonical.y)*a.J,Te.z*Mt*a.J];for(let Dt in ct.instancesPerModel){const Ee=ct.instancesPerModel[Dt];Ee.features.length>0&&(Dt=tt.evaluate(Ee.features[0].feature,{}));const at=ze.getModel(Dt,Le.scope);if(at&&at.uploaded)for(const Ft of at.nodes)tf(he,Le,Ft,Ee,pt,Ct,qo)}}}(S,f,_,A),void W();if(!X.loaded())return;if(X.type==="batched-model")return function(he,we,Le,Oe){const xe=he.context,Te=he.transform,ze=he.style.fog,je=he.shadowRenderer;if(Te.projection.name!=="mercator")return void a.X(`Drawing 3D landmark models for ${Te.projection.name} projection is not yet implemented`);const Ne=he.transform.getFreeCameraOptions().position,Ye=a.v.scale([],[Ne.x,Ne.y,Ne.z],he.transform.worldSize);a.v.negate(Ye,Ye);const Ct=a.m.identity([]),ct=a.c4(Te.center.lat,Te.zoom),_t=a.m.fromScaling([],[1,1,1/ct]);a.m.translate(Ct,Ct,Ye);const tt=Le.paint.get("model-opacity"),Mt=new a.b4(xe.gl.LEQUAL,a.b4.ReadWrite,he.depthRangeFor3D),pt=new a.b4(xe.gl.LEQUAL,a.b4.ReadOnly,he.depthRangeFor3D),Dt=function(Ee,at){for(const Ft of Oe){const Rt=we.getTile(Ft).getBucket(Le);if(!Rt||!Rt.uploaded)continue;let dr=!1;je&&(dr=je.getMaxCascadeForTile(Ft.toUnwrapped())===0);const or=Te.calculatePosMatrix(Ft.toUnwrapped(),Te.worldSize),br=Rt.modelTraits;for(const ur of Rt.getNodesInfo()){if(ur.hiddenByReplacement||!ur.node.meshes)continue;const Ir=ur.node,Er=he.renderPass==="light-beam",vr=[...or],_r=ur.evaluatedScale;let vi=0;he.terrain&&Ir.elevation&&(vi=Ir.elevation*he.terrain.exaggeration()),a.m.translate(vr,vr,[(Ir.anchor?Ir.anchor[0]:0)*(_r[0]-1),(Ir.anchor?Ir.anchor[1]:0)*(_r[1]-1),vi]),_r!==a.c6&&a.m.scale(vr,vr,_r),a.m.multiply(vr,vr,Ir.matrix);const Wr=a.m.multiply([],_t,vr);a.m.multiply(Wr,Ct,Wr);const tn=a.m.invert([],Wr);a.m.transpose(tn,tn),a.m.scale(tn,tn,D2);const Hi=a.m.multiply([],Te.expandedFarZProjMatrix,vr),qa=br&a.c8.HasMapboxMeshFeatures,Xo=qa?0:ur.evaluatedRMEA[0][2];for(let $i=0;$i<Ir.meshes.length;++$i){const xi=Ir.meshes[$i],Ii=$i===Ir.lightMeshIndex;if(Ii){if(!Er&&!he.terrain&&he.shadowRenderer){he.currentLayer<he.firstLightBeamLayer&&(he.firstLightBeamLayer=he.currentLayer);continue}}else if(Er)continue;const dn={defines:[]},sa=[];l_(dn.defines,sa,xi,he),qa||dn.defines.push("DIFFUSE_SHADED"),dr&&dn.defines.push("SHADOWS_SINGLE_CASCADE");const ln=he.renderPass==="shadow";if(ln){ef(xi,vr,he,Le);continue}let Aa=null;if(ze){const bs=Mm(vr,he.transform);if(Aa=new Float32Array(bs),Te.projection.name!=="globe"){const Xi=xi.aabb.min,ws=xi.aabb.max,[Zs,kl]=ze.getOpacityForBounds(bs,Xi[0],Xi[1],ws[0],ws[1]);dn.overrideFog=Zs>=Sa||kl>=Sa}}const Za=he.getOrCreateProgram("model",dn);!ln&&je&&(je.useNormalOffset=!!xi.normalBuffer,je.setupShadowsFromMatrix(vr,Za,je.useNormalOffset)),he.uploadCommonUniforms(xe,Za,Ft.toUnwrapped(),Aa);const Ca=xi.material,Yo=Ca.pbrMetallicRoughness;Yo.metallicFactor=.9,Yo.roughnessFactor=.5;const Ll=Kd(new Float32Array(Hi),new Float32Array(Wr),new Float32Array(tn),he,tt,Yo.baseColorFactor,Ca.emissiveFactor,Yo.metallicFactor,Yo.roughnessFactor,Ca,Xo,Le);Za.draw(he,xe.gl.TRIANGLES,at&&!Ii?Mt:pt,a.b6.disabled,Ee?Ii||tt<1||ur.hasTranslucentParts?a.a.alphaBlended:a.a.unblended:a.a.disabled,a.b5.backCCW,Ll,Le.id,xi.vertexBuffer,xi.indexBuffer,xi.segments,Le.paint,he.transform.zoom,void 0,sa)}}}};(function(Ee,at,Ft,Rt){const dr=Ee.terrain?Ee.terrain.exaggeration():0,or=Ee.transform.zoom;for(const br of Rt){const ur=at.getTile(br).getBucket(Ft);ur&&(Ee.conflationActive&&ur.updateReplacement(br,Ee.replacementSource),ur.evaluateScale(Ee,Ft),Ee.terrain&&dr>0&&ur.elevationUpdate(Ee.terrain,dr,br,Ft.source),ur.needsReEvaluation(Ee,or,Ft)&&ur.evaluate(Ft))}})(he,we,Le,Oe),tt===1?Dt(!0,!0):(Dt(!1,!0),Dt(!0,!1))}(S,f,_,A),void W();const J=X.getModels(),te=[],oe=S.transform.getFreeCameraOptions().position,le=a.v.scale([],[oe.x,oe.y,oe.z],S.transform.worldSize);a.v.negate(le,le);const de=[],pe=[];let fe=0;for(const he of J){const we=_.paint.get("model-rotation").constantOr(null),Le=_.paint.get("model-scale").constantOr(null),Oe=_.paint.get("model-translation").constantOr(null);he.computeModelMatrix(S,we,Le,Oe,!0,!0,!1);const xe=a.m.identity([]),Te=a.c4(he.position.lat,S.transform.zoom),ze=a.m.fromScaling([],[1,1,1/Te]);a.m.translate(xe,xe,le),te.push({zScaleMatrix:ze,negCameraPosMatrix:xe});for(const je of he.nodes)Zx(S.transform,je,he.matrix,S.transform.expandedFarZProjMatrix,fe,de,pe);fe++}if(de.sort((he,we)=>we.depth-he.depth),S.renderPass!=="shadow"){if(D===1)for(const he of pe)Sc(he,S,_,te[he.modelIndex],a.b6.disabled,S.colorModeForRenderPass());else{for(const he of pe)Sc(he,S,_,te[he.modelIndex],a.b6.disabled,a.a.disabled);for(const he of pe)Sc(he,S,_,te[he.modelIndex],S.stencilModeFor3D(),S.colorModeForRenderPass());S.resetStencilClippingMasks()}for(const he of de)Sc(he,S,_,te[he.modelIndex],a.b6.disabled,S.colorModeForRenderPass());W()}else{for(const he of pe)ef(he.mesh,he.nodeModelMatrix,S,_);for(const he of de)ef(he.mesh,he.nodeModelMatrix,S,_);W()}}},Jx={modelUpload:function(S,f,_){const A=f.getSource();if(!A.loaded())return;if(A.type==="vector"||A.type==="geojson")return void(S.modelManager&&S.modelManager.upload(S,_));if(A.type==="batched-model")return;const D=A.getModels();for(const L of D)L.upload(S.context)}};class P2{constructor(f,_,A,D){this.context=new Ur(f,_),this.transform=A,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=D,this._debugParams={showTerrainProxyTiles:!1},D.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),this.setup(),this.numSublayers=a.bq.maxUnderzooming+a.bq.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new a.ca,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new h_(this),this._wireframeDebugCache=new Eh,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0}updateTerrain(f,_){const A=!!f&&!!f.terrain&&this.transform.projection.supportsTerrain;if(!(A||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new qv(this,f));const D=this._terrain;this.transform.elevation=A?D:null,D.update(f,this.transform,_),this.transform.elevation&&!D.enabled&&(this.transform.elevation=null)}_updateFog(f){const _=f.fog;if(!_||this.transform.projection.name==="globe"||_.getOpacity(this.transform.pitch)<1||_.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[A,D]=_.getFovAdjustedRange(this.transform._fov);if(A>D)return void(this.transform.fogCullDistSq=null);const L=A+.78*(D-A);this.transform.fogCullDistSq=L*L}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(f,_){if(this.width=f*a.a4.devicePixelRatio,this.height=_*a.a4.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const A of this.style.order)this.style._mergedLayers[A].resize()}setup(){const f=this.context,_=new a.bo;_.emplaceBack(0,0),_.emplaceBack(a.J,0),_.emplaceBack(0,a.J),_.emplaceBack(a.J,a.J),this.tileExtentBuffer=f.createVertexBuffer(_,a.bl.members),this.tileExtentSegments=a.bm.simpleSegment(0,0,4,2);const A=new a.bo;A.emplaceBack(0,0),A.emplaceBack(a.J,0),A.emplaceBack(0,a.J),A.emplaceBack(a.J,a.J),this.debugBuffer=f.createVertexBuffer(A,a.bl.members),this.debugSegments=a.bm.simpleSegment(0,0,4,5);const D=new a.bo;D.emplaceBack(-1,-1),D.emplaceBack(1,-1),D.emplaceBack(-1,1),D.emplaceBack(1,1),this.viewportBuffer=f.createVertexBuffer(D,a.bl.members),this.viewportSegments=a.bm.simpleSegment(0,0,4,2);const L=new a.cb;L.emplaceBack(0,0,0,0),L.emplaceBack(a.J,0,a.J,0),L.emplaceBack(0,a.J,0,a.J),L.emplaceBack(a.J,a.J,a.J,a.J),this.mercatorBoundsBuffer=f.createVertexBuffer(L,a.cc.members),this.mercatorBoundsSegments=a.bm.simpleSegment(0,0,4,2);const B=new a.bp;B.emplaceBack(0,1,2),B.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=f.createIndexBuffer(B);const N=new a.cd;for(const X of[0,1,3,2,0])N.emplaceBack(X);this.debugIndexBuffer=f.createIndexBuffer(N),this.emptyTexture=new a.a9(f,new a.a5({width:1,height:1},Uint8Array.of(0,0,0,0)),f.gl.RGBA),this.identityMat=a.m.create();const W=this.context.gl;this.stencilClearMode=new a.b6({func:W.ALWAYS,mask:0},0,255,W.ZERO,W.ZERO,W.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(f){return f._makeTileBoundsBuffers(this.context,this.transform.projection),f._tileBoundsBuffer?{tileBoundsBuffer:f._tileBoundsBuffer,tileBoundsIndexBuffer:f._tileBoundsIndexBuffer,tileBoundsSegments:f._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const f=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,f.TRIANGLES,a.b4.disabled,this.stencilClearMode,a.a.disabled,a.b5.disabled,hm(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(f,_,A){if(!_||this.currentStencilSource===_.id||!f.isTileClipped()||!A||A.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let N=!1;for(const W of A)if(this._tileClippingMaskIDs[W.key]===void 0){N=!0;break}if(!N)return}this.currentStencilSource=_.id;const D=this.context,L=D.gl;this.nextStencilID+A.length>256&&this.clearStencil(),D.setColorMode(a.a.disabled),D.setDepthMode(a.b4.disabled);const B=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const N of A){const W=_.getTile(N),X=this._tileClippingMaskIDs[N.key]=this.nextStencilID++,{tileBoundsBuffer:J,tileBoundsIndexBuffer:te,tileBoundsSegments:oe}=this.getTileBoundsBuffers(W);B.draw(this,L.TRIANGLES,a.b4.disabled,new a.b6({func:L.ALWAYS,mask:0},X,255,L.KEEP,L.KEEP,L.REPLACE),a.a.disabled,a.b5.disabled,hm(N.projMatrix),"$clipping",J,te,oe)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const f=this.nextStencilID++,_=this.context.gl;return new a.b6({func:_.NOTEQUAL,mask:255},f,255,_.KEEP,_.KEEP,_.REPLACE)}stencilModeForClipping(f){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(f);const _=this.context.gl;return new a.b6({func:_.EQUAL,mask:255},this._tileClippingMaskIDs[f.key],0,_.KEEP,_.KEEP,_.REPLACE)}stencilConfigForOverlap(f){const _=this.context.gl,A=f.sort((B,N)=>N.overscaledZ-B.overscaledZ),D=A[A.length-1].overscaledZ,L=A[0].overscaledZ-D+1;if(L>1){this.currentStencilSource=void 0,this.nextStencilID+L>256&&this.clearStencil();const B={};for(let N=0;N<L;N++)B[N+D]=new a.b6({func:_.GEQUAL,mask:255},N+this.nextStencilID,255,_.KEEP,_.KEEP,_.REPLACE);return this.nextStencilID+=L,[B,A]}return[{[D]:a.b6.disabled},A]}colorModeForRenderPass(){const f=this.context.gl;return this._showOverdrawInspector?new a.a([f.CONSTANT_COLOR,f.ONE,f.CONSTANT_COLOR,f.ONE],new a.C(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?a.a.unblended:a.a.alphaBlended}colorModeForDrapableLayerRenderPass(f){const _=this.context.gl;return(()=>this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture)()&&this.renderPass==="translucent"?new a.a([_.ONE,_.ONE_MINUS_SRC_ALPHA,_.CONSTANT_ALPHA,_.ONE_MINUS_SRC_ALPHA],new a.C(0,0,0,f===void 0?0:f),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(f,_,A,D=!1){if(!this.opaquePassEnabledForLayer()&&!D)return a.b4.disabled;const L=1-((1+this.currentLayer)*this.numSublayers+f)*this.depthEpsilon;return new a.b4(A||this.context.gl.LEQUAL,_,[L,L])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(f,_){this._wireframeDebugCache.update(this.frameCounter),this.style=f,this.options=_;const A=this.style._mergedLayers,D=this.style.order,L=D.map(xe=>A[xe]),B=this.style._mergedSourceCaches;this.imageManager=f.imageManager,this.modelManager=f.modelManager,this.symbolFadeChange=f.placement.symbolFadeChange(a.a4.now()),this.imageManager.beginFrame();let N=0,W=!1;for(const xe in B){const Te=B[xe];Te.used&&(Te.prepare(this.context),Te.getSource().usedInConflation&&++N)}const X={},J={},te={},oe={},le={};for(const xe in B){const Te=B[xe];X[xe]=Te.getVisibleCoordinates(),J[xe]=X[xe].slice().reverse(),te[xe]=Te.getVisibleCoordinates(!0).reverse(),oe[xe]=Te.getShadowCasterCoordinates(),le[xe]=Te.sortCoordinatesByDistance(X[xe])}const de=xe=>{const Te=this.style.getLayerSourceCache(xe);return Te&&Te.used?Te.getSource():null};if(N){const xe=[];for(const Te of L)this.layerUsedInConflation(Te,de(Te))&&xe.push(Te);if(xe&&xe.length>1){const Te=[];for(const ze of xe){const je=this.style.getLayerSourceCache(ze);je&&je.used&&je.getSource().usedInConflation&&Te.push({layer:ze.fqid,cache:je})}this.replacementSource.setSources(Te),W=!0}}W||this.replacementSource.clear(),this.conflationActive=W,this.minCutoffZoom=0,this.longestCutoffRange=0;for(const xe of L){const Te=xe.cutoffRange();if(this.longestCutoffRange=Math.max(Te,this.longestCutoffRange),Te>0){const ze=de(xe);ze&&(this.minCutoffZoom=Math.max(ze.minzoom,this.minCutoffZoom)),xe.minzoom&&(this.minCutoffZoom=Math.max(xe.minzoom,this.minCutoffZoom))}}this.opaquePassCutoff=1/0;for(let xe=0;xe<L.length;xe++)if(L[xe].is3D()){this.opaquePassCutoff=xe;break}const pe=this.style&&this.style.fog;pe?(this._fogVisible=pe.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=pe.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(te),this.opaquePassCutoff=0);const fe=this._shadowRenderer;if(fe){fe.updateShadowParameters(this.transform,this.style.directionalLight);for(const xe in B)for(const Te of X[xe]){let ze={min:0,max:0};this.terrain&&(ze=this.terrain.getMinMaxForTile(Te)||ze),fe.addShadowReceiver(Te.toUnwrapped(),ze.min,ze.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new a.ce(this.context));for(const xe of L){if(xe.isHidden(this.transform.zoom))continue;const Te=f.getLayerSourceCache(xe);this.uploadLayer(this,xe,Te)}if(this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new C2(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!a.cf(this.context.gl))return;this.renderPass="offscreen";for(const xe of L){const Te=f.getLayerSourceCache(xe);if(!xe.hasOffscreenPass()||xe.isHidden(this.transform.zoom))continue;const ze=Te?J[Te.id]:void 0;(xe.type==="custom"||xe.type==="raster"||xe.isSky()||ze&&ze.length)&&this.renderLayer(this,Te,xe,ze)}this.depthRangeFor3D=[0,1-(L.length+2)*this.numSublayers*this.depthEpsilon];const he=this.terrain;he&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&!this.transform.isOrthographic&&he.drawDepth(),this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,oe)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const we=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),Le=(()=>{if(_.showOverdrawInspector)return a.C.black;if(this.style.fog&&this.transform.projection.supportsFog&&!we){const xe=this.style.fog.properties.get("color").toArray01();return new a.C(...xe)}if(this.style.fog&&this.transform.projection.supportsFog&&we){const xe=this.style.fog.properties.get("space-color").toArray01();return new a.C(...xe)}return a.C.transparent})();if(this.context.clear({color:Le,depth:1}),this.clearStencil(),this._showOverdrawInspector=_.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&we&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=D.length-1;this.currentLayer>=0;this.currentLayer--){const xe=L[this.currentLayer],Te=f.getLayerSourceCache(xe);if(xe.isSky())continue;const ze=Te?(xe.is3D()?le:J)[Te.id]:void 0;this._renderTileClippingMasks(xe,Te,ze),this.renderLayer(this,Te,xe,ze)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&we&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||a.ao(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<D.length;this.currentLayer++){const xe=L[this.currentLayer],Te=f.getLayerSourceCache(xe);xe.isSky()&&this.renderLayer(this,Te,xe,Te?J[Te.id]:void 0)}this.renderPass="translucent",this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Oe=0;for(fe&&(Oe=fe.getShadowCastingLayerCount());this.currentLayer<D.length;){const xe=L[this.currentLayer],Te=f.getLayerSourceCache(xe);if(xe.isSky()){++this.currentLayer;continue}if(he&&this.style.isLayerDraped(xe)){if(xe.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=he.renderBatch(this.currentLayer);continue}let ze;if(Te&&(ze=(xe.type==="symbol"?te:xe.is3D()?le:J)[Te.id]),this._renderTileClippingMasks(xe,Te,Te?X[Te.id]:void 0),this.renderLayer(this,Te,xe,ze),!he&&fe&&Oe>0&&xe.hasShadowPass()&&--Oe==0&&(fe.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const je=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=je;this.currentLayer++){const Ne=L[this.currentLayer];if(!Ne.hasLightBeamPass())continue;const Ye=f.getLayerSourceCache(Ne);this.renderLayer(this,Ye,Ne,Ye?J[Ye.id]:void 0)}this.currentLayer=je,this.renderPass="translucent"}++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let xe=null;L.forEach(Te=>{const ze=f.getLayerSourceCache(Te);ze&&!Te.isHidden(this.transform.zoom)&&ze.getVisibleCoordinates().length&&(!xe||xe.getSource().maxzoom<ze.getSource().maxzoom)&&(xe=ze)}),xe&&this.options.showTileBoundaries&&u_.debug(this,xe,xe.getVisibleCoordinates(),a.C.red,!1)}this.terrain&&this._debugParams.showTerrainProxyTiles&&u_.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new a.C(1,.8,.1,1),!0),this.options.showPadding&&function(xe){const Te=xe.transform.padding;jx(xe,xe.transform.height-(Te.top||0),3,r_),jx(xe,Te.bottom||0,3,i_),Ih(xe,Te.left||0,3,n_),Ih(xe,xe.transform.width-(Te.right||0),3,a_);const ze=xe.transform.centerPoint;(function(je,Ne,Ye,Ct){mu(je,Ne-1,Ye-10,2,20,Ct),mu(je,Ne-10,Ye-1,20,2,Ct)})(xe,ze.x,xe.transform.height-ze.y,Ux)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),W||(this.conflationActive=!1)}uploadLayer(f,_,A){this.gpuTimingStart(_),(!f.transform.projection.unsupportedLayers||!f.transform.projection.unsupportedLayers.includes(_.type)||f.terrain&&_.type==="custom")&&Jx[`${_.type}Upload`]&&Jx[`${_.type}Upload`](f,A,_.scope),this.gpuTimingEnd()}renderLayer(f,_,A,D){A.isHidden(this.transform.zoom)||(A.type==="background"||A.type==="sky"||A.type==="custom"||A.type==="model"||A.type==="raster"||D&&D.length)&&(this.id=A.id,this.gpuTimingStart(A),(!f.transform.projection.unsupportedLayers||!f.transform.projection.unsupportedLayers.includes(A.type)||f.terrain&&A.type==="custom")&&u_[A.type](f,_,A,D,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(f){if(!this.options.gpuTiming)return;const _=this.context.extTimerQuery,A=this.context.gl;let D=this.gpuTimers[f.id];D||(D=this.gpuTimers[f.id]={calls:0,cpuTime:0,query:A.createQuery()}),D.calls++,A.beginQuery(_.TIME_ELAPSED_EXT,D.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const f=this.context.extTimerQuery,_=this.context.gl,A=_.createQuery();this.deferredRenderGpuTimeQueries.push(A),_.beginQuery(f.TIME_ELAPSED_EXT,A)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const f=this.gpuTimers;return this.gpuTimers={},f}collectDeferredRenderGpuQueries(){const f=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],f}queryGpuTimers(f){const _={};for(const A in f){const D=f[A],L=this.context.extTimerQuery,B=L.getQueryParameter(D.query,this.context.gl.QUERY_RESULT)/1e6;L.deleteQueryEXT(D.query),_[A]=B}return _}queryGpuTimeDeferredRender(f){if(!this.options.gpuTimingDeferredRender)return 0;const _=this.context.extTimerQuery,A=this.context.gl;let D=0;for(const L of f)D+=_.getQueryParameter(L,A.QUERY_RESULT)/1e6,_.deleteQueryEXT(L);return D}translatePosMatrix(f,_,A,D,L){if(!A[0]&&!A[1])return f;const B=L?D==="map"?this.transform.angle:0:D==="viewport"?-this.transform.angle:0;if(B){const X=Math.sin(B),J=Math.cos(B);A=[A[0]*J-A[1]*X,A[0]*X+A[1]*J]}const N=[L?A[0]:a.ay(_,A[0],this.transform.zoom),L?A[1]:a.ay(_,A[1],this.transform.zoom),0],W=new Float32Array(16);return a.m.translate(W,f,N),W}saveTileTexture(f){const _=f.size[0],A=this._tileTextures[_];A?A.push(f):this._tileTextures[_]=[f]}getTileTexture(f){const _=this._tileTextures[f];return _&&_.length>0?_.pop():null}isPatternMissing(f,_){return f===null||f!==void 0&&!this.imageManager.getPattern(f.toString(),_)}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(f,_,A){const D=A===void 0?this.terrain&&this.terrain.renderingToTexture:A,L=this.terrain&&this.terrain.exaggeration()===0,B=[];return this.style&&this.style.enable3dLights()&&(f==="globeRaster"||f==="terrainRaster"?(B.push("LIGHTING_3D_MODE"),B.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):D||B.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"?this._shadowMapDebug||B.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?B.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):B.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(B.push("TERRAIN"),this.linearFloatFilteringSupported()&&B.push("TERRAIN_DEM_FLOAT_FORMAT"),L&&B.push("ZERO_EXAGGERATION")),this.transform.projection.name==="globe"&&B.push("GLOBE"),!this._fogVisible||D||_!==void 0&&!_||B.push("FOG","FOG_DITHERING"),D&&B.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&B.push("OVERDRAW_INSPECTOR"),B}getOrCreateProgram(f,_){this.cache=this.cache||{};const A=_&&_.defines||[],D=_&&_.config,L=this.currentGlobalDefines(f,_&&_.overrideFog,_&&_.overrideRtt).concat(A),B=mm.cacheKey(Zi[f],f,L,D);return this.cache[B]||(this.cache[B]=new mm(this.context,f,Zi[f],D,Vx[f],L)),this.cache[B]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const f=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(f.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.a9(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(f,_){if(this.style.enable3dLights()){const A=this.style.directionalLight,D=this.style.ambientLight;if(A&&D){const L=((B,N)=>{const W=B.properties.get("direction"),X=B.properties.get("color").toArray01(),J=B.properties.get("intensity"),te=N.properties.get("color").toArray01(),oe=N.properties.get("intensity"),le=[W.x,W.y,W.z],de=a.bv(te,oe),pe=a.bv(X,J);return{u_lighting_ambient_color:de,u_lighting_directional_dir:le,u_lighting_directional_color:pe,u_ground_radiance:Ox(le,pe,de)}})(A,D);_.setLightsUniformValues(f,L)}}}uploadCommonUniforms(f,_,A,D,L){if(this.uploadCommonLightUniforms(f,_),this.terrain&&this.terrain.renderingToTexture)return;const B=this.style.fog;if(B){const N=B.getOpacity(this.transform.pitch),W=((X,J,te,oe,le,de,pe,fe,he,we,Le,Oe)=>{const xe=X.transform,Te=J.properties.get("color").toArray01();Te[3]=oe;const ze=X.frameCounter/1e3%1,[je,Ne]=J.properties.get("vertical-range");return{u_fog_matrix:te?xe.calculateFogTileMatrix(te):Oe||X.identityMat,u_fog_range:J.getFovAdjustedRange(xe._fov),u_fog_color:Te,u_fog_horizon_blend:J.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(je,Ne),Ne],u_fog_temporal_offset:ze,u_frustum_tl:le,u_frustum_tr:de,u_frustum_br:pe,u_frustum_bl:fe,u_globe_pos:he,u_globe_radius:we,u_viewport:Le,u_globe_transition:a.ao(xe.zoom),u_is_globe:+(xe.projection.name==="globe")}})(this,B,A,N,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*a.a4.devicePixelRatio,this.transform.height*a.a4.devicePixelRatio],D);_.setFogUniformValues(f,W)}L&&_.setCutoffUniformValues(f,L.uniformValues)}setTileLoadedFlag(f){this.tileLoaded=f}saveCanvasCopy(){const f=this.canvasCopy();f&&(this.frameCopies.push(f),this.tileLoaded=!1)}canvasCopy(){const f=this.context.gl,_=f.createTexture();return f.bindTexture(f.TEXTURE_2D,_),f.copyTexImage2D(f.TEXTURE_2D,0,f.RGBA,0,0,f.drawingBufferWidth,f.drawingBufferHeight,0),_}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const f=this.style&&this.style.fog;return!!f&&f.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const f=this._backgroundTiles,_=this._backgroundTiles={},A=this.transform.coveringTiles({tileSize:512});for(const D of A)_[D.key]=f[D.key]||new a.bt(D,512,this.transform.tileZoom,this);return _}clearBackgroundTiles(){this._backgroundTiles={}}layerUsedInConflation(f,_){return!(!f.is3D()||f.minzoom&&f.minzoom>this.transform.zoom||f.sourceLayer!=="building"&&(!_||_.type!=="batched-model"))}isTileAffectedByFog(f){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let _=this._cachedTileFogOpacities[f.key];return _||(this._cachedTileFogOpacities[f.key]=_=this.style.fog.getOpacityForTile(f)),_[0]>=Sa||_[1]>=Sa}}const ho={cascadeCount:2,shadowMapResolution:2048};class L2{constructor(f,_){this.aabb=f,this.lastCascade=_}}class c_{add(f,_){const A=this.receivers[f.key];A!==void 0?(A.aabb.min[0]=Math.min(A.aabb.min[0],_.min[0]),A.aabb.min[1]=Math.min(A.aabb.min[1],_.min[1]),A.aabb.min[2]=Math.min(A.aabb.min[2],_.min[2]),A.aabb.max[0]=Math.max(A.aabb.max[0],_.max[0]),A.aabb.max[1]=Math.max(A.aabb.max[1],_.max[1]),A.aabb.max[2]=Math.max(A.aabb.max[2],_.max[2])):this.receivers[f.key]=new L2(_,null)}clear(){this.receivers={}}get(f){return this.receivers[f.key]}computeRequiredCascades(f,_,A){const D=a.c3.fromPoints(f.points);let L=0;for(const B in this.receivers){const N=this.receivers[B];if(!N||!D.intersectsAabb(N.aabb))continue;N.aabb.min=D.closestPoint(N.aabb.min),N.aabb.max=D.closestPoint(N.aabb.max);const W=N.aabb.getCorners();for(let X=0;X<A.length;X++){let J=!0;for(const te of W){const oe=[te[0]*_,te[1]*_,te[2]];if(a.v.transformMat4(oe,oe,A[X].matrix),oe[0]<-1||oe[0]>1||oe[1]<-1||oe[1]>1){J=!1;break}}if(N.lastCascade=X,L=Math.max(L,X),J)break}}return L+1}}class h_{constructor(f){this.painter=f,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new c_,this._depthMode=new a.b4(f.context.gl.LEQUAL,a.b4.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this.useNormalOffset=!1,f.tp.registerParameter(ho,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),f.tp.registerParameter(ho,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32})}destroy(){for(const f of this._cascades)f.texture.destroy(),f.framebuffer.destroy();this._cascades=[]}updateShadowParameters(f,_){const A=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!_||!_.properties)return;const D=_.properties.get("shadow-intensity");if(!_.shadowsEnabled()||D<=0||(this._shadowLayerCount=A.style.order.reduce((de,pe)=>{const fe=A.style._mergedLayers[pe];return de+(fe.hasShadowPass()&&!fe.isHidden(f.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this._enabled))return;const L=A.context,B=ho.shadowMapResolution,N=ho.shadowMapResolution;if(this._cascades.length===0||ho.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let de=0;de<ho.cascadeCount;++de){const pe=A._shadowMapDebug,fe=L.gl,he=L.createFramebuffer(B,N,pe,"texture"),we=new a.a9(L,{width:B,height:N,data:null},fe.DEPTH_COMPONENT);if(he.depthAttachment.set(we.texture),pe){const Le=new a.a9(L,{width:B,height:N,data:null},fe.RGBA);he.colorAttachment.set(Le.texture)}this._cascades.push({framebuffer:he,texture:we,matrix:[],far:0,boundingSphereRadius:0,frustum:new a.F,scale:0})}}this.shadowDirection=d_(_);let W=0;if(f.elevation){const de=f.elevation,pe=[1e4,-1e4];de.visibleDemTiles.filter(fe=>fe.dem).forEach(fe=>{const he=fe.dem.tree;pe[0]=Math.min(pe[0],he.minimums[0]),pe[1]=Math.max(pe[1],he.maximums[0])}),pe[0]!==1e4&&(W=(pe[1]-pe[0])*de.exaggeration())}const X=1.5*f.cameraToCenterDistance,J=3*X,te=new Float64Array(16);for(let de=0;de<this._cascades.length;++de){const pe=this._cascades[de];let fe=f.height/50,he=1;ho.cascadeCount===1?he=J:de===0?he=X:(fe=X,he=J);const[we,Le]=Qx(f,this.shadowDirection,fe,he,ho.shadowMapResolution,W);pe.scale=f.scale,pe.matrix=we,pe.boundingSphereRadius=Le,a.m.invert(te,pe.matrix),pe.frustum=a.F.fromInvProjectionMatrix(te,1,0,!0),pe.far=he}const oe=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[oe].far,this._cascades[oe].far],this._uniformValues.u_shadow_intensity=D,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/ho.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=ho.shadowMapResolution,this._uniformValues.u_shadowmap_0=va.ShadowMap0,this._uniformValues.u_shadowmap_1=va.ShadowMap0+1,this._groundShadowTiles=A.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const le=A.transform.elevation;for(const de of this._groundShadowTiles){let pe={min:0,max:0};if(le){const fe=le.getMinMaxForTile(de);fe&&(pe=fe)}this.addShadowReceiver(de.toUnwrapped(),pe.min,pe.max)}}get enabled(){return this._enabled}set enabled(f){this._enabled=f}drawShadowPass(f,_){if(!this._enabled)return;const A=this.painter,D=A.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(A.transform.getFrustum(0),A.transform.worldSize,this._cascades),D.viewport.set([0,0,ho.shadowMapResolution,ho.shadowMapResolution]);for(let L=0;L<this._numCascadesToRender;++L){A.currentShadowCascade=L,D.bindFramebuffer.set(this._cascades[L].framebuffer.framebuffer),D.clear({color:a.C.white,depth:1});for(const B of f.order){const N=f._mergedLayers[B];if(!N.hasShadowPass()||N.isHidden(A.transform.zoom))continue;const W=f.getLayerSourceCache(N),X=W?_[W.id]:void 0;(N.type==="model"||X&&X.length)&&A.renderLayer(A,W,N,X)}}A.currentShadowCascade=0}drawGroundShadows(){if(!this._enabled)return;const f=this.painter,_=f.style,A=f.context,D=_.directionalLight,L=_.ambientLight;if(!D||!L)return;const B=[],N=_c(f,f.longestCutoffRange);N.shouldRenderCutoff&&B.push("RENDER_CUTOFF");const W=Am(D,L),X=new a.b4(A.gl.LEQUAL,a.b4.ReadOnly,f.depthRangeFor3D);for(const J of this._groundShadowTiles){const te=J.toUnwrapped(),oe=f.isTileAffectedByFog(J),le=f.getOrCreateProgram("groundShadow",{defines:B,overrideFog:oe});this.setupShadows(te,le),f.uploadCommonUniforms(A,le,te,null,N);const de={u_matrix:f.transform.calculateProjMatrix(te),u_ground_shadow_factor:W};le.draw(f,A.gl.TRIANGLES,X,a.b6.disabled,a.a.multiply,a.b5.disabled,de,"ground_shadow",f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments,{},f.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?a.a.unblended:a.a.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(f){const _=this.painter.transform,A=_.calculatePosMatrix(f,_.worldSize);return a.m.multiply(A,this._cascades[this.painter.currentShadowCascade].matrix,A),Float32Array.from(A)}calculateShadowPassMatrixFromMatrix(f){return a.m.multiply(f,this._cascades[this.painter.currentShadowCascade].matrix,f),Float32Array.from(f)}setupShadows(f,_,A,D=0){if(!this._enabled)return;const L=this.painter.transform,B=this.painter.context,N=B.gl,W=this._uniformValues,X=new Float64Array(16),J=L.calculatePosMatrix(f,L.worldSize);for(let te=0;te<this._cascades.length;te++)a.m.multiply(X,this._cascades[te].matrix,J),W[te===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(X),B.activeTexture.set(N.TEXTURE0+va.ShadowMap0+te),this._cascades[te].texture.bind(N.NEAREST,N.CLAMP_TO_EDGE);if(this.useNormalOffset=!!A,this.useNormalOffset){const te=a.cg(f.canonical),oe=2/L.tileSize*a.J/ho.shadowMapResolution,le=oe*this._cascades[0].boundingSphereRadius,de=oe*this._cascades[this._cascades.length-1].boundingSphereRadius,pe=(A==="vector-tile"?1:3)/Math.pow(2,D-f.canonical.z-(1-L.zoom+Math.floor(L.zoom)));W.u_shadow_normal_offset=[te,le*pe,de*pe],W.u_shadow_bias=[6e-5,.0012,.012]}else W.u_shadow_bias=[36e-5,.0012,.012];_.setShadowUniformValues(B,W)}setupShadowsFromMatrix(f,_,A=!1){if(!this._enabled)return;const D=this.painter.context,L=D.gl,B=this._uniformValues,N=new Float64Array(16);for(let W=0;W<ho.cascadeCount;W++)a.m.multiply(N,this._cascades[W].matrix,f),B[W===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(N),D.activeTexture.set(L.TEXTURE0+va.ShadowMap0+W),this._cascades[W].texture.bind(L.NEAREST,L.CLAMP_TO_EDGE);this.useNormalOffset=A,A?(B.u_shadow_normal_offset=[1,5,5],B.u_shadow_bias=[6e-5,.0012,.012]):B.u_shadow_bias=[36e-5,.0012,.012],_.setShadowUniformValues(D,B)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(f,_,A,D){if(D[2]>=0)return{};const L=function(W,X,J){const te=J/(1<<W.canonical.z);return new a.c3([W.canonical.x*te+W.wrap*J,W.canonical.y*te+W.wrap*J,0],[(W.canonical.x+1)*te+W.wrap*J,(W.canonical.y+1)*te+W.wrap*J,X])}(f,_,A).getCorners(),B=_/-D[2];D[0]<0?(a.v.add(L[0],L[0],[D[0]*B,0,0]),a.v.add(L[3],L[3],[D[0]*B,0,0])):D[0]>0&&(a.v.add(L[1],L[1],[D[0]*B,0,0]),a.v.add(L[2],L[2],[D[0]*B,0,0])),D[1]<0?(a.v.add(L[0],L[0],[0,D[1]*B,0]),a.v.add(L[1],L[1],[0,D[1]*B,0])):D[1]>0&&(a.v.add(L[2],L[2],[0,D[1]*B,0]),a.v.add(L[3],L[3],[0,D[1]*B,0]));const N={};return N.vertices=L,N.planes=[rf(L[1],L[0],L[4]),rf(L[2],L[1],L[5]),rf(L[3],L[2],L[6]),rf(L[0],L[3],L[7])],N}addShadowReceiver(f,_,A){this._receivers.add(f,a.c3.fromTileIdAndHeight(f,_,A))}getMaxCascadeForTile(f){const _=this._receivers.get(f);return _&&_.lastCascade?_.lastCascade:0}}function rf(S,f,_){const A=a.v.sub([],_,f),D=a.v.sub([],S,f),L=a.v.cross([],A,D),B=a.v.length(L);return B===0?[0,0,1,0]:(a.v.scale(L,L,1/B),[L[0],L[1],L[2],-a.v.dot(L,f)])}function d_(S){const f=S.properties.get("direction"),_=a.b3(f.x,f.y,f.z);_[2]=a.c(_[2],0,75);const A=a.ch([_[0],_[1],_[2]]);return a.v.fromValues(A.x,A.y,A.z)}function Am(S,f){const _=S.properties.get("color"),A=S.properties.get("intensity"),D=S.properties.get("direction"),L=[D.x,D.y,D.z],B=f.properties.get("color"),N=f.properties.get("intensity"),W=Math.max(a.v.dot([0,0,1],L),0),X=[0,0,0];a.v.scale(X,B.toArray01Linear().slice(0,3),N);const J=[0,0,0];return a.v.scale(J,_.toArray01Linear().slice(0,3),W*A),a.bw([X[0]>0?X[0]/(X[0]+J[0]):0,X[1]>0?X[1]/(X[1]+J[1]):0,X[2]>0?X[2]/(X[2]+J[2]):0])}function Qx(S,f,_,A,D,L){const B=S.zoom,N=S.scale,W=S.worldSize,X=1/W,J=S.aspect,te=Math.sqrt(1+J*J)*Math.tan(.5*S.fovX),oe=te*te,le=A-_,de=A+_;let pe,fe;oe>le/de?(pe=A,fe=A*te):(pe=.5*de*(1+oe),fe=.5*Math.sqrt(le*le+2*(A*A+_*_)*oe+de*de*oe*oe));const he=S.projection.pixelsPerMeter(S.center.lat,W),we=S._camera.getCameraToWorldMercator(),Le=[0,0,-pe*X];a.v.transformMat4(Le,Le,we);let Oe=fe*X;const xe=S._edgeInsets;if(!(xe.left===0&&xe.top===0&&xe.right===0&&xe.bottom===0||xe.left===xe.right&&xe.top===xe.bottom)){const Rt=S._camera.getWorldToCamera(S.worldSize,S.projection.zAxisUnit==="meters"?he:1),dr=S._camera.getCameraToClipPerspective(S._fov,S.width/S.height,_,A);dr[8]=2*-S.centerOffset.x/S.width,dr[9]=2*S.centerOffset.y/S.height;const or=new Float64Array(16);a.m.mul(or,dr,Rt);const br=new Float64Array(16);a.m.invert(br,or);const ur=a.F.fromInvProjectionMatrix(br,W,B,!0);for(const Ir of ur.points){const Er=((Te=Ir)[0]/=N,Te[1]/=N,Te[2]=a.b(Te[2],S._center.lat),Te);Oe=Math.max(Oe,a.v.len(a.v.subtract([],Le,Er)))}}var Te;Oe*=D/(D-1);const ze=Math.acos(f[2]),je=Math.atan2(-f[0],-f[1]),Ne=new Ki;Ne.position=Le,Ne.setPitchBearing(ze,je);const Ye=Ne.getWorldToCamera(W,he),Ct=Oe*W,ct=Math.min(S._mercatorZfromZoom(17)*W*-2,-2*Ct),_t=Ne.getCameraToClipOrthographic(-Ct,Ct,-Ct,Ct,ct,(Ct+L*he)/f[2]),tt=new Float64Array(16);a.m.multiply(tt,_t,Ye);const Mt=a.v.fromValues(Math.floor(1e6*Le[0])/1e6*W,Math.floor(1e6*Le[1])/1e6*W,0),pt=.5*D,Dt=[0,0,0];a.v.transformMat4(Dt,Mt,tt),a.v.scale(Dt,Dt,pt);const Ee=[Math.floor(Dt[0]),Math.floor(Dt[1]),Math.floor(Dt[2])],at=[0,0,0];a.v.sub(at,Dt,Ee),a.v.scale(at,at,-1/pt);const Ft=new Float64Array(16);return a.m.identity(Ft),a.m.translate(Ft,Ft,at),a.m.multiply(tt,Ft,tt),[tt,Ct]}class e1 extends a.a6{constructor(f){super(),this.requestManager=f,this.models={"":{}},this.numModelsLoading={}}loadModel(f,_){return a.aO(this.requestManager.transformRequest(_,a.a2.Model).url).then(A=>{if(!A)return;const D=a.aP(A),L=new a.aQ(f,void 0,void 0,D);return L.computeBoundsAndApplyParent(),L}).catch(A=>{this.fire(new a.a7(new Error(`Could not load model ${f} from ${_}: ${A.message}`)))})}load(f,_){this.models[_]||(this.models[_]={});const A=Object.keys(f);this.numModelsLoading[_]=(this.numModelsLoading[_]||0)+A.length;const D=[];for(const L of A)D.push(this.loadModel(L,f[L]));Promise.allSettled(D).then(L=>{for(let B=0;B<L.length;B++){const{status:N,value:W}=L[B];N==="fulfilled"&&W&&(this.models[_][A[B]]=W)}this.numModelsLoading[_]-=A.length,this.fire(new a.a8("data",{dataType:"style"}))}).catch(L=>{this.fire(new a.a7(new Error(`Could not load models: ${L.message}`)))})}isLoaded(){for(const f in this.numModelsLoading)if(this.numModelsLoading[f]>0)return!1;return!0}hasModel(f,_){return!!this.getModel(f,_)}getModel(f,_){return this.models[_]||(this.models[_]={}),this.models[_][f]}addModel(f,_,A){this.models[A]||(this.models[A]={}),this.hasModel(f,A)&&this.removeModel(f,A),this.load({[f]:this.requestManager.normalizeModelURL(_)},A)}addModels(f,_){const A={};for(const D in f)A[D]=this.requestManager.normalizeModelURL(f[D]);this.load(A,_)}removeModel(f,_){this.models[_]||(this.models[_]={});const A=this.models[_][f];delete this.models[_][f],A.destroy()}listModels(f){return this.models[f]||(this.models[f]={}),Object.keys(this.models[f])}upload(f,_){this.models[_]||(this.models[_]={});for(const A in this.models[_])this.models[_][A].upload(f.context)}}const Tc=(S,f)=>a.ai(S,f&&f.filter(_=>_.identifier!=="source.canvas")),t1=a.p(Ot,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","setImportUrl","setImportData","setImportConfig"]),r1=a.p(Ot,["setCenter","setZoom","setBearing","setPitch"]),f_={version:8,layers:[],sources:{}},vu={duration:300,delay:0},nf=new Set(["fill","line","background","hillshade","raster"]);class Zo extends a.a6{constructor(f,_={}){super(),this.map=f,this.scope=_.scope||"",this.fragments=[],this.importDepth=_.importDepth||0,this.importsCache=_.importsCache||new Map,this.resolvedImports=_.resolvedImports||new Set,this.transition=a.ak({},vu),this._buildingIndex=new xh(this),this.crossTileSymbolIndex=new gc,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=_.styleChanges||new H,this.dispatcher=_.dispatcher?_.dispatcher:new a.br(a.bs(),this),_.imageManager?this.imageManager=_.imageManager:(this.imageManager=new vn,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=_.glyphManager?_.glyphManager:new a.cj(f._requestManager,_.localFontFamily?a.ck.all:_.localIdeographFontFamily?a.ck.ideographs:a.ck.none,_.localFontFamily||_.localIdeographFontFamily),_.modelManager?this.modelManager=_.modelManager:(this.modelManager=new e1(f._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=_.configOptions?_.configOptions:new Map,this._configDependentLayers=_.configDependentLayers?_.configDependentLayers:new Set,this._config=_.config,this.dispatcher.broadcast("setReferrer",a.cl());const A=this;this._rtlTextPluginCallback=Zo.registerForPluginStateChange(D=>{A.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:D.pluginStatus,pluginURL:D.pluginURL},(L,B)=>{if(a.cm(L),B&&B.every(N=>N))for(const N in A._sourceCaches){const W=A._sourceCaches[N],X=W.getSource().type;X!=="vector"&&X!=="geojson"||W.reload()}})}),this.on("data",D=>{if(D.dataType!=="source"||D.sourceDataType!=="metadata")return;const L=this.getOwnSource(D.sourceId);if(L&&L.vectorLayerIds)for(const B in this._layers){const N=this._layers[B];N.source===L.id&&this._validateLayer(N)}})}loadURL(f,_={}){this.fire(new a.a8("dataloading",{dataType:"style"}));const A=typeof _.validate=="boolean"?_.validate:!a.cn(f);f=this.map._requestManager.normalizeStyleURL(f,_.accessToken),this.resolvedImports.add(f);const D=this.importsCache.get(f);if(D)return this._load(D,A);const L=this.map._requestManager.transformRequest(f,a.a2.Style);this._request=a.a1(L,(B,N)=>{if(this._request=null,B)this.fire(new a.a7(B));else if(N)return this.importsCache.set(f,N),this._load(N,A)})}loadJSON(f,_={}){this.fire(new a.a8("dataloading",{dataType:"style"})),this._request=a.a4.frame(()=>{this._request=null,this._load(f,_.validate!==!1)})}loadEmpty(){this.fire(new a.a8("dataloading",{dataType:"style"})),this._load(f_,!1)}_loadImports(f,_){if(this.importDepth>=4)return a.X("Style doesn't support nesting deeper than 5"),Promise.resolve();const A=[];for(const D of f){const L=this._createFragmentStyle(D),B=new Promise(W=>{L.once("style.import.load",W),L.once("error",W)}).then(()=>this.mergeAll());if(A.push(B),this.resolvedImports.has(D.url)){L.loadEmpty();continue}const N=D.data||this.importsCache.get(D.url);N?L.loadJSON(N,{validate:_}):D.url?L.loadURL(D.url,{validate:_}):L.loadEmpty(),this.fragments.push({style:L,id:D.id,config:D.config})}return Promise.allSettled(A)}_createFragmentStyle(f){const _=this.scope?a.aE(f.id,this.scope):f.id,A=new Zo(this.map,{scope:_,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:f.config,configOptions:this.options,configDependentLayers:this._configDependentLayers});return A.setEventedParent(this.map,{style:A}),A}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options});const f=this.isRootStyle();this._shouldPrecompile=f,this.fire(new a.a8(f?"style.load":"style.import.load"))}_load(f,_){const A=f.schema;if(this.isRootStyle()&&(f.fragment||A&&f.fragment!==!1)){const B=a.ak({},f_,{imports:[{id:"basemap",data:f,url:""}]});return void this._load(B,_)}if(this.setConfig(this._config,A),_&&Tc(this,a.aj(f)))return;this._loaded=!0,this.stylesheet=a.co(f);for(const B in f.sources)this.addSource(B,f.sources[B],{validate:!1,isInitialLoad:!0});f.sprite?this._loadSprite(f.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(f.glyphs,this.scope);const D=Fa(this.stylesheet.layers);if(this._order=D.map(B=>B.id),this.stylesheet.light&&a.X("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const B=this.stylesheet.lights[0];this.light=new Qn(B.properties,B.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Qn(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(const B of D){const N=a.cp(B,this.scope,this.options);N.isConfigDependent&&this._configDependentLayers.add(N.fqid),N.setEventedParent(this,{layer:{id:N.id}}),this._layers[N.id]=N,this._serializedLayers[N.id]=N.serialize();const W=this.getOwnLayerSourceCache(N),X=!!this.directionalLight&&this.directionalLight.shadowsEnabled();W&&N.canCastShadows()&&X&&(W.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const L=this.stylesheet.terrain;L&&(this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=a.a4.hasCanvasFingerprintNoise()),this.disableElevatedTerrain?a.X("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."):this.terrainSetForDrapingOnly()||this._createTerrain(L,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new a.a8("data",{dataType:"style"})),f.imports?this._loadImports(f.imports,_).then(()=>this._reloadImports()):this._reloadImports()}isRootStyle(){return this.importDepth===0}mergeAll(){let f,_,A,D,L,B,N,W;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(X=>{if(X.stylesheet){if(X.light!=null&&(f=X.light),X.stylesheet.lights)for(const J of X.stylesheet.lights)J.type==="ambient"&&X.ambientLight!=null&&(_=X.ambientLight),J.type==="directional"&&X.directionalLight!=null&&(A=X.directionalLight);D=this._prioritizeTerrain(D,X.terrain,X.stylesheet.terrain),X.stylesheet.fog&&X.fog!=null&&(L=X.fog),X.stylesheet.camera!=null&&(W=X.stylesheet.camera),X.stylesheet.projection!=null&&(B=X.stylesheet.projection),X.stylesheet.transition!=null&&(N=X.stylesheet.transition)}}),this.light=f,this.ambientLight=_,this.directionalLight=A,this.fog=L,D===null?delete this.terrain:this.terrain=D,this.camera=W||{"camera-projection":"perspective"},this.projection=B||{name:"mercator"},this.transition=a.ak({},vu,N),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(f){const _=A=>{for(const D of A.fragments)_(D.style);f(A)};_(this)}_prioritizeTerrain(f,_,A){const D=f&&f.drapeRenderMode===0;return A===null?_&&_.drapeRenderMode===0?_:D?f:null:_!=null&&(!f||D||_&&_.drapeRenderMode===1)?_:f}mergeTerrain(){let f;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(_=>{f=this._prioritizeTerrain(f,_.terrain,_.stylesheet.terrain)}),f===null?delete this.terrain:this.terrain=f}mergeProjection(){let f;this.forEachFragmentStyle(_=>{_.stylesheet.projection!=null&&(f=_.stylesheet.projection)}),this.projection=f||{name:"mercator"}}mergeSources(){const f={},_={},A={};this.forEachFragmentStyle(D=>{for(const L in D._sourceCaches){const B=a.aE(L,D.scope);f[B]=D._sourceCaches[L]}for(const L in D._otherSourceCaches){const B=a.aE(L,D.scope);_[B]=D._otherSourceCaches[L]}for(const L in D._symbolSourceCaches){const B=a.aE(L,D.scope);A[B]=D._symbolSourceCaches[L]}}),this._mergedSourceCaches=f,this._mergedOtherSourceCaches=_,this._mergedSymbolSourceCaches=A}mergeLayers(){const f={},_=[],A={};this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(L=>{for(const B of L._order){const N=L._layers[B];if(N.type==="slot"){const W=a.cq(B);if(f[W])continue;f[W]=[]}N.slot&&f[N.slot]?f[N.slot].push(N):_.push(N)}}),this._mergedOrder=[];const D=(L=[])=>{for(const B of L)if(B.type==="slot"){const N=a.cq(B.id);f[N]&&D(f[N])}else{const N=a.aE(B.id,B.scope);this._mergedOrder.push(N),A[N]=B,B.is3D()&&(this._has3DLayers=!0),B.type==="circle"&&(this._hasCircleLayers=!0),B.type==="symbol"&&(this._hasSymbolLayers=!0)}};D(_),this._mergedLayers=A,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(f){return this.stylesheet.camera=a.ak({},this.stylesheet.camera,f),this.camera=this.stylesheet.camera,this}setProjection(f){f?this.stylesheet.projection=f:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(f){this._spriteRequest=function(_,A,D){let L,B,N;const W=a.a4.devicePixelRatio>1?"@2x":"";let X=a.a1(A.transformRequest(A.normalizeSpriteURL(_,W,".json"),a.a2.SpriteJSON),(oe,le)=>{X=null,N||(N=oe,L=le,te())}),J=a.a3(A.transformRequest(A.normalizeSpriteURL(_,W,".png"),a.a2.SpriteImage),(oe,le)=>{J=null,N||(N=oe,B=le,te())});function te(){if(N)D(N);else if(L&&B){const oe=a.a4.getImageData(B),le={};for(const de in L){const{width:pe,height:fe,x:he,y:we,sdf:Le,pixelRatio:Oe,stretchX:xe,stretchY:Te,content:ze}=L[de],je=new a.a5({width:pe,height:fe});a.a5.copy(oe,je,{x:he,y:we},{x:0,y:0},{width:pe,height:fe}),le[de]={data:je,pixelRatio:Oe,sdf:Le,stretchX:xe,stretchY:Te,content:ze}}D(null,le)}}return{cancel(){X&&(X.cancel(),X=null),J&&(J.cancel(),J=null)}}}(f,this.map._requestManager,(_,A)=>{if(this._spriteRequest=null,_)this.fire(new a.a7(_));else if(A)for(const D in A)this.imageManager.addImage(D,this.scope,A[D]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new a.a8("data",{dataType:"style"}))})}_validateLayer(f){const _=this.getOwnSource(f.source);if(!_)return;const A=f.sourceLayer;A&&(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(A)===-1)&&this.fire(new a.a7(new Error(`Source layer "${A}" does not exist on source "${_.id}" as specified by style layer "${f.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const f in this._sourceCaches)if(!this._sourceCaches[f].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded())return!1;for(const{style:f}of this.fragments)if(!f.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((f,_)=>{const A=this.fragments[_];return A&&A.style&&(f.data=A.style.serialize()),f})}_serializeSources(){const f={};for(const _ in this._sourceCaches){const A=this._sourceCaches[_].getSource();f[A.id]||(f[A.id]=A.serialize())}return f}_serializeLayers(f){const _=[];for(const A of f){const D=this._layers[A];D&&D.type!=="custom"&&_.push(D.serialize())}return _}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const f in this._sourceCaches)if(this._sourceCaches[f].hasTransition())return!0;for(const f in this._layers)if(this._layers[f].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(f){return!!this.terrain&&(typeof f.isLayerDraped=="function"?f.isLayerDraped(this.getLayerSourceCache(f)):nf.has(f.type))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(f){const _=this.getOwnLayer(f);if(_)return _;this.fire(new a.a7(new Error(`The layer '${f}' does not exist in the map's style.`)))}_checkSource(f){const _=this.getOwnSource(f);if(_)return _;this.fire(new a.a7(new Error(`The source '${f}' does not exist in the map's style.`)))}update(f){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(f),this.directionalLight&&this.directionalLight.recalculate(f);const _=this.calculateLightsBrightness();f.brightness=_||0,_!==this._brightness&&(this._brightness=_,this.dispatcher.broadcast("setBrightness",_));const A=this._changes.isDirty();if(this._changes.isDirty()){const L=this._changes.getLayerUpdatesByScope();for(const B in L){const{updatedIds:N,removedIds:W}=L[B];(N||W)&&this._updateWorkerLayers(B,N,W)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(f),this.light&&this.light.updateTransitions(f),this.ambientLight&&this.ambientLight.updateTransitions(f),this.directionalLight&&this.directionalLight.updateTransitions(f),this.fog&&this.fog.updateTransitions(f),this._changes.reset()}const D={};for(const L in this._mergedSourceCaches){const B=this._mergedSourceCaches[L];D[L]=B.used,B.used=!1}for(const L of this._mergedOrder){const B=this._mergedLayers[L];if(B.recalculate(f,this._availableImages),!B.isHidden(f.zoom)){const N=this.getLayerSourceCache(B);N&&(N.used=!0)}if(!this._precompileDone&&this._shouldPrecompile)for(let N=B.minzoom||0;N<(B.maxzoom||25.5);N++){const W=this.map.painter;if(W){const X=B.getProgramIds();if(!X)continue;for(const J of X){const te=B.getDefaultProgramParams(J,f.zoom);te&&(W.style=this,this.fog&&(W._fogVisible=!0,te.overrideFog=!0,W.getOrCreateProgram(J,te)),W._fogVisible=!1,te.overrideFog=!1,W.getOrCreateProgram(J,te),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(te.overrideRtt=!0,W.getOrCreateProgram(J,te)))}}}}this._shouldPrecompile&&(this._precompileDone=!0);for(const L in D){const B=this._mergedSourceCaches[L];D[L]!==B.used&&B.getSource().fire(new a.a8("data",{sourceDataType:"visibility",dataType:"source",sourceId:B.getSource().id}))}this.light&&this.light.recalculate(f),this.terrain&&this.terrain.recalculate(f),this.fog&&this.fog.recalculate(f),this.z=f.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),A&&this.fire(new a.a8("data",{dataType:"style"}))}_updateTilesForChangedImages(){const f=this._changes.getUpdatedImages();if(f.length){for(const _ in this._sourceCaches)this._sourceCaches[_].reloadTilesForDependencies(["icons","patterns"],f);this._changes.resetUpdatedImages()}}_updateWorkerLayers(f,_,A){const D=this.getFragmentStyle(f);D&&this.dispatcher.broadcast("updateLayers",{layers:_?D._serializeLayers(_):[],scope:f,removedIds:A||[],options:D.options})}setState(f){if(this._checkLoaded(),Tc(this,a.aj(f)))return!1;(f=a.co(f)).layers=Fa(f.layers);const _=function(D,L){if(!D)return[{command:Ot.setStyle,args:[L]}];let B=[];try{if(!h(D.version,L.version))return[{command:Ot.setStyle,args:[L]}];h(D.center,L.center)||B.push({command:Ot.setCenter,args:[L.center]}),h(D.zoom,L.zoom)||B.push({command:Ot.setZoom,args:[L.zoom]}),h(D.bearing,L.bearing)||B.push({command:Ot.setBearing,args:[L.bearing]}),h(D.pitch,L.pitch)||B.push({command:Ot.setPitch,args:[L.pitch]}),h(D.sprite,L.sprite)||B.push({command:Ot.setSprite,args:[L.sprite]}),h(D.glyphs,L.glyphs)||B.push({command:Ot.setGlyphs,args:[L.glyphs]}),h(D.imports,L.imports)||function(te=[],oe=[],le){oe=oe||[];const de=(te=te||[]).map(Tl),pe=oe.map(Tl),fe=te.reduce(Gs,{}),he=oe.reduce(Gs,{}),we=de.slice();let Le,Oe,xe,Te;for(Le=0,Oe=0;Le<de.length;Le++)xe=de[Le],he.hasOwnProperty(xe)?Oe++:(le.push({command:Ot.removeImport,args:[xe]}),we.splice(we.indexOf(xe,Oe),1));for(Le=0,Oe=0;Le<pe.length;Le++)xe=pe[pe.length-1-Le],we[we.length-1-Le]!==xe&&(fe.hasOwnProperty(xe)?(le.push({command:Ot.removeImport,args:[xe]}),we.splice(we.lastIndexOf(xe,we.length-Oe),1)):Oe++,Te=we[we.length-Le],le.push({command:Ot.addImport,args:[he[xe],Te]}),we.splice(we.length-Le,0,xe));for(const ze of oe){const je=fe[ze.id];if(!je||h(je,ze))continue;h(je.config,ze.config)||le.push({command:Ot.setImportConfig,args:[ze.id,ze.config]}),h(je.url,ze.url)||le.push({command:Ot.setImportUrl,args:[ze.id,ze.url]});const Ne=ze.data;h(je&&je.data,Ne)||le.push({command:Ot.setImportData,args:[ze.id,Ne]})}}(D.imports,L.imports,B),h(D.transition,L.transition)||B.push({command:Ot.setTransition,args:[L.transition]}),h(D.light,L.light)||B.push({command:Ot.setLight,args:[L.light]}),h(D.fog,L.fog)||B.push({command:Ot.setFog,args:[L.fog]}),h(D.projection,L.projection)||B.push({command:Ot.setProjection,args:[L.projection]}),h(D.lights,L.lights)||B.push({command:Ot.setLights,args:[L.lights]}),h(D.camera,L.camera)||B.push({command:Ot.setCamera,args:[L.camera]});const N={},W=[];(function(te,oe,le,de){let pe;for(pe in oe=oe||{},te=te||{})te.hasOwnProperty(pe)&&(oe.hasOwnProperty(pe)||yi(pe,le,de));for(pe in oe){if(!oe.hasOwnProperty(pe))continue;const fe=oe[pe];te.hasOwnProperty(pe)?h(te[pe],fe)||(te[pe].type==="geojson"&&fe.type==="geojson"&&Sl(te,oe,pe)?le.push({command:Ot.setGeoJSONSourceData,args:[pe,fe.data]}):lo(pe,oe,le,de)):hi(pe,oe,le)}})(D.sources,L.sources,W,N);const X=[];D.layers&&D.layers.forEach(te=>{te.source&&N[te.source]?B.push({command:Ot.removeLayer,args:[te.id]}):X.push(te)});let J=D.terrain;J&&N[J.source]&&(B.push({command:Ot.setTerrain,args:[void 0]}),J=void 0),B=B.concat(W),h(J,L.terrain)||B.push({command:Ot.setTerrain,args:[L.terrain]}),function(te,oe,le){oe=oe||[];const de=(te=te||[]).map(Tl),pe=oe.map(Tl),fe=te.reduce(Gs,{}),he=oe.reduce(Gs,{}),we=de.slice(),Le=Object.create(null);let Oe,xe,Te,ze,je,Ne,Ye;for(Oe=0,xe=0;Oe<de.length;Oe++)Te=de[Oe],he.hasOwnProperty(Te)?xe++:(le.push({command:Ot.removeLayer,args:[Te]}),we.splice(we.indexOf(Te,xe),1));for(Oe=0,xe=0;Oe<pe.length;Oe++)Te=pe[pe.length-1-Oe],we[we.length-1-Oe]!==Te&&(fe.hasOwnProperty(Te)?(le.push({command:Ot.removeLayer,args:[Te]}),we.splice(we.lastIndexOf(Te,we.length-xe),1)):xe++,Ne=we[we.length-Oe],le.push({command:Ot.addLayer,args:[he[Te],Ne]}),we.splice(we.length-Oe,0,Te),Le[Te]=!0);for(Oe=0;Oe<pe.length;Oe++)if(Te=pe[Oe],ze=fe[Te],je=he[Te],!Le[Te]&&!h(ze,je))if(h(ze.source,je.source)&&h(ze["source-layer"],je["source-layer"])&&h(ze.type,je.type)){for(Ye in oi(ze.layout,je.layout,le,Te,null,Ot.setLayoutProperty),oi(ze.paint,je.paint,le,Te,null,Ot.setPaintProperty),h(ze.slot,je.slot)||le.push({command:Ot.setSlot,args:[Te,je.slot]}),h(ze.filter,je.filter)||le.push({command:Ot.setFilter,args:[Te,je.filter]}),h(ze.minzoom,je.minzoom)&&h(ze.maxzoom,je.maxzoom)||le.push({command:Ot.setLayerZoomRange,args:[Te,je.minzoom,je.maxzoom]}),ze)ze.hasOwnProperty(Ye)&&Ye!=="layout"&&Ye!=="paint"&&Ye!=="filter"&&Ye!=="metadata"&&Ye!=="minzoom"&&Ye!=="maxzoom"&&Ye!=="slot"&&(Ye.indexOf("paint.")===0?oi(ze[Ye],je[Ye],le,Te,Ye.slice(6),Ot.setPaintProperty):h(ze[Ye],je[Ye])||le.push({command:Ot.setLayerProperty,args:[Te,Ye,je[Ye]]}));for(Ye in je)je.hasOwnProperty(Ye)&&!ze.hasOwnProperty(Ye)&&Ye!=="layout"&&Ye!=="paint"&&Ye!=="filter"&&Ye!=="metadata"&&Ye!=="minzoom"&&Ye!=="maxzoom"&&Ye!=="slot"&&(Ye.indexOf("paint.")===0?oi(ze[Ye],je[Ye],le,Te,Ye.slice(6),Ot.setPaintProperty):h(ze[Ye],je[Ye])||le.push({command:Ot.setLayerProperty,args:[Te,Ye,je[Ye]]}))}else le.push({command:Ot.removeLayer,args:[Te]}),Ne=we[we.lastIndexOf(Te)+1],le.push({command:Ot.addLayer,args:[je,Ne]})}(X,L.layers,B)}catch(N){console.warn("Unable to compute style diff:",N),B=[{command:Ot.setStyle,args:[L]}]}return B}(this.serialize(),f).filter(D=>!(D.command in r1));if(_.length===0)return!1;const A=_.filter(D=>!(D.command in t1));if(A.length>0)throw new Error(`Unimplemented: ${A.map(D=>D.command).join(", ")}.`);return _.forEach(D=>{this[D.command].apply(this,D.args)}),this.stylesheet=f,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(f,_){return this.getImage(f)?this.fire(new a.a7(new Error("An image with this name already exists."))):(this.imageManager.addImage(f,this.scope,_),this._afterImageUpdated(f),this)}updateImage(f,_){this.imageManager.updateImage(f,this.scope,_)}getImage(f){return this.imageManager.getImage(f,this.scope)}removeImage(f){return this.getImage(f)?(this.imageManager.removeImage(f,this.scope),this._afterImageUpdated(f),this):this.fire(new a.a7(new Error("No image with this name exists.")))}_afterImageUpdated(f){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(f),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new a.a8("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(f,_,A={}){return this._checkLoaded(),this._validate(a.cr,`models.${f}`,_,null,A)||(this.modelManager.addModel(f,_,this.scope),this._changes.setDirty()),this}hasModel(f){return this.modelManager.hasModel(f,this.scope)}removeModel(f){return this.hasModel(f)?(this.modelManager.removeModel(f,this.scope),this):this.fire(new a.a7(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(f,_,A={}){if(this._checkLoaded(),this.getOwnSource(f)!==void 0)throw new Error(`There is already a source with ID "${f}".`);if(!_.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(_).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(_.type)>=0&&this._validate(a.cs,`sources.${f}`,_,null,A))return;this.map&&this.map._collectResourceTiming&&(_.collectResourceTiming=!0);const D=oa(f,_,this.dispatcher,this);D.scope=this.scope,D.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(D.id),source:D.serialize(),sourceId:D.id}));const L=B=>{const N=(B?"symbol:":"other:")+D.id,W=a.aE(N,this.scope),X=this._sourceCaches[N]=new a.bq(W,D,B);(B?this._symbolSourceCaches:this._otherSourceCaches)[D.id]=X,X.onAdd(this.map)};L(!1),_.type!=="vector"&&_.type!=="geojson"||L(!0),D.onAdd&&D.onAdd(this.map),A.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(f){this._checkLoaded();const _=this.getOwnSource(f);if(!_)throw new Error("There is no source with this ID");for(const D in this._layers)if(this._layers[D].source===f)return this.fire(new a.a7(new Error(`Source "${f}" cannot be removed while layer "${D}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===f)return this.fire(new a.a7(new Error(`Source "${f}" cannot be removed while terrain is using it.`)));const A=this.getOwnSourceCaches(f);for(const D of A){const L=a.cq(D.id);delete this._sourceCaches[L],this._changes.discardSourceCacheUpdate(D.id),D.fire(new a.a8("data",{sourceDataType:"metadata",dataType:"source",sourceId:D.getSource().id})),D.setEventedParent(null),D.clearTiles()}return delete this._otherSourceCaches[f],delete this._symbolSourceCaches[f],this.mergeSources(),_.setEventedParent(null),_.onRemove&&_.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(f,_){this._checkLoaded(),this.getOwnSource(f).setData(_),this._changes.setDirty()}getOwnSource(f){const _=this.getOwnSourceCache(f);return _&&_.getSource()}getOwnSources(){const f=[];for(const _ in this._otherSourceCaches){const A=this.getOwnSourceCache(_);A&&f.push(A.getSource())}return f}areTilesLoaded(){const f=this._mergedSourceCaches;for(const _ in f){const A=f[_]._tiles;for(const D in A){const L=A[D];if(L.state!=="loaded"&&L.state!=="errored")return!1}}return!0}setLights(f){if(this._checkLoaded(),!f)return delete this.ambientLight,void delete this.directionalLight;const _=this._getTransitionParameters();for(const D of f){if(this._validate(a.ct,"lights",D))return;switch(D.type){case"ambient":if(this.ambientLight){const L=this.ambientLight;L.set(D),L.updateTransitions(_)}else this.ambientLight=new cu(D,Ns,this.scope,this.options);break;case"directional":if(this.directionalLight){const L=this.directionalLight;L.set(D),L.updateTransitions(_)}else this.directionalLight=new cu(D,sm,this.scope,this.options)}}const A=new a.al(this.z||0,_);this.ambientLight&&this.ambientLight.recalculate(A),this.directionalLight&&this.directionalLight.recalculate(A),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const f=this.directionalLight,_=this.ambientLight;if(!f||!_)return;const A=te=>.2126*(te[0]<=.03928?te[0]/12.92:Math.pow((te[0]+.055)/1.055,2.4))+.7152*(te[1]<=.03928?te[1]/12.92:Math.pow((te[1]+.055)/1.055,2.4))+.0722*(te[2]<=.03928?te[2]/12.92:Math.pow((te[2]+.055)/1.055,2.4)),D=f.properties.get("color").toArray01(),L=f.properties.get("intensity"),B=f.properties.get("direction"),N=1-a.b3(B.x,B.y,B.z)[2]/90,W=A(D)*L*N,X=_.properties.get("color").toArray01(),J=_.properties.get("intensity");return(W+A(X)*J)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const f=[];return this.directionalLight&&f.push(this.directionalLight.get()),this.ambientLight&&f.push(this.ambientLight.get()),f}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(f){if(!f)return this;if(a.cu(f)){const _=a.cv(f),A=this.fragments.find(({id:L})=>L===_);if(!A)throw new Error(`Style import not found: ${f}`);const D=a.cq(f);return A.style.getFragmentStyle(D)}{const _=this.fragments.find(({id:A})=>A===f);if(!_)throw new Error(`Style import not found: ${f}`);return _.style}}getConfigProperty(f,_){const A=this.getFragmentStyle(f);if(!A)return null;const D=a.aE(_,A.scope),L=A.options.get(D),B=L?L.value||L.default:null;return B?B.serialize():null}setConfigProperty(f,_,A){const D=a.cw(A);if(D.result!=="success")return void Tc(this,D.value);const L=D.value.expression,B=this.getFragmentStyle(f);if(!B)return;const N=a.aE(_,B.scope),W=B.options.get(N);W&&(this.options.set(N,{...W,value:L}),this.updateConfigDependencies())}setConfig(f,_){if(this._config=f,f||_)if(_)for(const A in _){let D,L;const B=a.cw(_[A].default);if(B.result==="success"&&(D=B.value.expression),f&&f[A]!==void 0){const oe=a.cw(f[A]);oe.result==="success"&&(L=oe.value.expression)}const{minValue:N,maxValue:W,stepValue:X,type:J,values:te}=_[A];if(D){const oe=a.aE(A,this.scope);this.options.set(oe,{default:D,value:L,minValue:N,maxValue:W,stepValue:X,type:J,values:te})}else this.fire(new a.a7(new Error(`No schema defined for config option "${A}".`)))}else this.fire(new a.a7(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(){for(const f of this._configDependentLayers){const _=this.getLayer(f);_&&(_.possiblyEvaluateVisibility(),this._updateLayer(_))}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this._changes.setDirty()}addLayer(f,_,A={}){this._checkLoaded();const D=f.id;if(this._layers[D])return void this.fire(new a.a7(new Error(`Layer with id "${D}" already exists on this map`)));let L;if(f.type==="custom"){if(Tc(this,a.cx(f)))return;L=a.cp(f,this.scope,this.options)}else{if(typeof f.source=="object"&&(this.addSource(D,f.source),f=a.co(f),f=a.ak(f,{source:D})),this._validate(a.cy,`layers.${D}`,f,{arrayIndex:-1},A))return;L=a.cp(f,this.scope,this.options),this._validateLayer(L),L.setEventedParent(this,{layer:{id:D}}),this._serializedLayers[L.id]=L.serialize()}L.isConfigDependent&&this._configDependentLayers.add(L.fqid);let B=this._order.length;if(_){const J=this._order.indexOf(_);if(J===-1)return void this.fire(new a.a7(new Error(`Layer with id "${_}" does not exist on this map.`)));L.slot===this._layers[_].slot?B=J:a.X(`Layer with id "${_}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(B,0,D),this._layerOrderChanged=!0,this._layers[D]=L;const N=this.getOwnLayerSourceCache(L),W=!!this.directionalLight&&this.directionalLight.shadowsEnabled();N&&L.canCastShadows()&&W&&(N.castsShadows=!0);const X=this._changes.getRemovedLayer(L);if(X&&L.source&&N&&L.type!=="custom"){this._changes.discardLayerRemoval(L);const J=a.aE(L.source,L.scope);X.type!==L.type?this._changes.updateSourceCache(J,"clear"):(this._changes.updateSourceCache(J,"reload"),N.pause())}this._updateLayer(L),L.onAdd&&L.onAdd(this.map),L.scope=this.scope,this.mergeLayers()}moveLayer(f,_){this._checkLoaded();const A=this._checkLayer(f);if(!A||f===_)return;const D=this._order.indexOf(f);this._order.splice(D,1);let L=this._order.length;if(_){const B=this._order.indexOf(_);if(B===-1)return void this.fire(new a.a7(new Error(`Layer with id "${_}" does not exist on this map.`)));A.slot===this._layers[_].slot?L=B:a.X(`Layer with id "${_}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(L,0,f),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(f){this._checkLoaded();const _=this._checkLayer(f);if(!_)return;_.setEventedParent(null);const A=this._order.indexOf(f);this._order.splice(A,1),delete this._layers[f],delete this._serializedLayers[f],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(_.fqid),this._changes.removeLayer(_);const D=this.getOwnLayerSourceCache(_);if(D&&D.castsShadows){let L=!1;for(const B in this._layers)if(this._layers[B].source===_.source&&this._layers[B].canCastShadows()){L=!0;break}D.castsShadows=L}_.onRemove&&_.onRemove(this.map),this.mergeLayers()}getOwnLayer(f){return this._layers[f]}hasLayer(f){return f in this._mergedLayers}hasLayerType(f){for(const _ in this._layers)if(this._layers[_].type===f)return!0;return!1}setLayerZoomRange(f,_,A){this._checkLoaded();const D=this._checkLayer(f);D&&(D.minzoom===_&&D.maxzoom===A||(_!=null&&(D.minzoom=_),A!=null&&(D.maxzoom=A),this._updateLayer(D)))}setSlot(f,_){this._checkLoaded();const A=this._checkLayer(f);A&&A.slot!==_&&(A.slot=_,this._updateLayer(A))}setFilter(f,_,A={}){this._checkLoaded();const D=this._checkLayer(f);if(D&&!h(D.filter,_))return _==null?(D.filter=void 0,void this._updateLayer(D)):void(this._validate(a.cz,`layers.${D.id}.filter`,_,{layerType:D.type},A)||(D.filter=a.co(_),this._updateLayer(D)))}getFilter(f){const _=this._checkLayer(f);if(_)return a.co(_.filter)}setLayoutProperty(f,_,A,D={}){this._checkLoaded();const L=this._checkLayer(f);L&&(h(L.getLayoutProperty(_),A)||(L.setLayoutProperty(_,A,D),L.isConfigDependent&&this._configDependentLayers.add(L.fqid),this._updateLayer(L)))}getLayoutProperty(f,_){const A=this._checkLayer(f);if(A)return A.getLayoutProperty(_)}setPaintProperty(f,_,A,D={}){this._checkLoaded();const L=this._checkLayer(f);if(!L||h(L.getPaintProperty(_),A))return;const B=L.setPaintProperty(_,A,D);L.isConfigDependent&&this._configDependentLayers.add(L.fqid),B&&this._updateLayer(L),this._changes.updatePaintProperties(L)}getPaintProperty(f,_){const A=this._checkLayer(f);if(A)return A.getPaintProperty(_)}setFeatureState(f,_){this._checkLoaded();const A=f.source,D=f.sourceLayer,L=this._checkSource(A);if(!L)return;const B=L.type;if(B==="geojson"&&D)return void this.fire(new a.a7(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(B==="vector"&&!D)return void this.fire(new a.a7(new Error("The sourceLayer parameter must be provided for vector source types.")));f.id===void 0&&this.fire(new a.a7(new Error("The feature id parameter must be provided.")));const N=this.getOwnSourceCaches(A);for(const W of N)W.setFeatureState(D,f.id,_)}removeFeatureState(f,_){this._checkLoaded();const A=f.source,D=this._checkSource(A);if(!D)return;const L=D.type,B=L==="vector"?f.sourceLayer:void 0;if(L==="vector"&&!B)return void this.fire(new a.a7(new Error("The sourceLayer parameter must be provided for vector source types.")));if(_&&typeof f.id!="string"&&typeof f.id!="number")return void this.fire(new a.a7(new Error("A feature id is required to remove its specific state property.")));const N=this.getOwnSourceCaches(A);for(const W of N)W.removeFeatureState(B,f.id,_)}getFeatureState(f){this._checkLoaded();const _=f.source,A=f.sourceLayer,D=this._checkSource(_);if(D){if(D.type!=="vector"||A)return f.id===void 0&&this.fire(new a.a7(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(_)[0].getFeatureState(A,f.id);this.fire(new a.a7(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(f){return this.stylesheet.transition=a.ak({},this.stylesheet.transition,f),this.transition=this.stylesheet.transition,this}getTransition(){return a.ak({},this.stylesheet.transition)}serialize(){this._checkLoaded();const f=this.getTerrain(),_=f&&this.terrain&&this.terrain.scope===this.scope?f:this.stylesheet.terrain;return a.cA({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:_,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},A=>A!==void 0)}_updateLayer(f){this._changes.updateLayer(f);const _=this.getLayerSourceCache(f),A=a.aE(f.source,f.scope),D=this._changes.getUpdatedSourceCaches();f.source&&!D[A]&&_&&_.getSource().type!=="raster"&&(this._changes.updateSourceCache(A,"reload"),_.pause()),f.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(f){const _=N=>this._mergedLayers[N].type==="fill-extrusion",A=this.order,D={},L=[];for(let N=A.length-1;N>=0;N--){const W=A[N];if(_(W)){D[W]=N;for(const X of f){const J=X[W];if(J)for(const te of J)L.push(te)}}}L.sort((N,W)=>W.intersectionZ-N.intersectionZ);const B=[];for(let N=A.length-1;N>=0;N--){const W=A[N];if(_(W))for(let X=L.length-1;X>=0;X--){const J=L[X].feature;if(D[J.layer.id]<N)break;B.push(J),L.pop()}else for(const X of f){const J=X[W];if(J)for(const te of J)B.push(te.feature)}}return B}queryRenderedFeatures(f,_,A){_&&_.filter&&this._validate(a.cz,"queryRenderedFeatures.filter",_.filter,null,_),_.scope=this.scope,_.availableImages=this._availableImages,_.serializedLayers=this._serializedLayers;const D={};if(_&&_.layers){if(!Array.isArray(_.layers))return this.fire(new a.a7(new Error("parameters.layers must be an Array."))),[];for(const X of _.layers){const J=this._mergedLayers[X];if(!J)return this.fire(new a.a7(new Error(`The layer '${X}' does not exist in the map's style and cannot be queried for features.`))),[];D[J.source]=!0}}const L=[],B=_.serializedLayers||{},N=_&&_.layers?_.layers.some(X=>{const J=this.getLayer(X);return J&&J.is3D()}):this.has3DLayers(),W=ma.createFromScreenPoints(f,A);for(const X in this._mergedSourceCaches){const J=this._mergedSourceCaches[X].getSource();if(!J||J.scope!==_.scope)continue;const te=this._mergedSourceCaches[X].getSource().id;_.layers&&!D[te]||L.push(Uo(this._mergedSourceCaches[X],this._mergedLayers,B,W,_,A,N,!!this.map._showQueryGeometry))}return this.placement&&L.push(function(X,J,te,oe,le,de,pe){const fe={},he=de.queryRenderedSymbols(oe),we=[];for(const Le of Object.keys(he).map(Number))we.push(pe[Le]);we.sort(so);for(const Le of we){const Oe=Le.featureIndex.lookupSymbolFeatures(he[Le.bucketInstanceId],J,Le.bucketIndex,Le.sourceLayerIndex,le.filter,le.layers,le.availableImages,X);for(const xe in Oe){const Te=fe[xe]=fe[xe]||[],ze=Oe[xe];ze.sort((je,Ne)=>{const Ye=Le.featureSortOrder;if(Ye){const Ct=Ye.indexOf(je.featureIndex);return Ye.indexOf(Ne.featureIndex)-Ct}return Ne.featureIndex-je.featureIndex});for(const je of ze)Te.push(je)}}for(const Le in fe)fe[Le].forEach(Oe=>{const xe=Oe.feature,Te=te(X[Le]);if(!Te)return;const ze=Te.getFeatureState(xe.layer["source-layer"],xe.id);xe.source=xe.layer.source,xe.layer["source-layer"]&&(xe.sourceLayer=xe.layer["source-layer"]),xe.state=ze});return fe}(this._mergedLayers,B,this.getLayerSourceCache.bind(this),W.screenGeometry,_,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(L)}querySourceFeatures(f,_){_&&_.filter&&this._validate(a.cz,"querySourceFeatures.filter",_.filter,null,_);const A=this.getOwnSourceCaches(f);let D=[];for(const L of A)D=D.concat(Gv(L,_));return D}addSourceType(f,_,A){return Zo.getSourceType(f)?A(new Error(`A source type called "${f}" already exists.`)):(Zo.setSourceType(f,_),_.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:f,url:_.workerSourceURL},A):A(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(f,_,A={}){this._checkLoaded();const D=this.light.getLight();let L=!1;for(const N in f)if(!h(f[N],D[N])){L=!0;break}if(!L)return;const B=this._getTransitionParameters();this.light.setLight(f,_,A),this.light.updateTransitions(B)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(f,_=1){if(this._checkLoaded(),!f)return delete this.terrain,f===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let A=f;const D=f.source==null;if(_===1){if(typeof A.source=="object"){const N="terrain-dem-src";this.addSource(N,A.source),A=a.co(A),A=a.ak(A,{source:N})}const L=a.ak({},A),B={};if(this.terrain&&D){L.source=this.terrain.get().source;const N=this.terrain?this.getFragmentStyle(this.terrain.scope):null;N&&(B.style=N.serialize())}if(this._validate(a.cB,"terrain",L,B))return}if(!this.terrain||this.terrain.scope!==this.scope&&!D||this.terrain&&_!==this.terrain.drapeRenderMode){if(!A)return;this._createTerrain(A,_),this.fire(new a.a8("data",{dataType:"style"}))}else{const L=this.terrain,B=L.get();for(const N of Object.keys(a.ae.terrain))!A.hasOwnProperty(N)&&a.ae.terrain[N].default&&(A[N]=a.ae.terrain[N].default);for(const N in f)if(!h(f[N],B[N])){L.set(f,this.options),this.stylesheet.terrain=f;const W=this._getTransitionParameters({duration:0});L.updateTransitions(W),this.fire(new a.a8("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(f){const _=this.fog=new yh(f,this.map.transform);this.stylesheet.fog=_.get();const A=this._getTransitionParameters({duration:0});_.updateTransitions(A)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const f of this.map._markers)f._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(f){if(this._checkLoaded(),!f)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const _=this.fog;if(!h(_.get(),f)){_.set(f),this.stylesheet.fog=_.get();const A=this._getTransitionParameters({duration:0});_.updateTransitions(A)}}else this._createFog(f);this._markersNeedUpdate=!0}_getTransitionParameters(f){return{now:a.a4.now(),transition:a.ak(this.transition,f)}}updateDrapeFirstLayers(){if(!this.terrain)return;const f=[],_=[];for(const A in this._mergedLayers)this.isLayerDraped(this._mergedLayers[A])?f.push(A):_.push(A);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...f),this._drapedFirstOrder.push(..._)}_createTerrain(f,_){const A=this.terrain=new no(f,_,this.scope,this.options);_===1&&(this.stylesheet.terrain=f),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const D=this._getTransitionParameters({duration:0});A.updateTransitions(D)}_force3DLayerUpdate(){for(const f in this._layers){const _=this._layers[f];_.type==="fill-extrusion"&&this._updateLayer(_)}}_forceSymbolLayerUpdate(){for(const f in this._layers){const _=this._layers[f];_.type==="symbol"&&this._updateLayer(_)}}_validate(f,_,A,D,L={}){if(L&&L.validate===!1)return!1;const B=a.ak({},this.serialize());return Tc(this,f.call(a.aj,a.ak({key:_,style:B,value:A,styleSpec:a.ae},D)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.cC.off("pluginStateChange",this._rtlTextPluginCallback);for(const f in this._mergedLayers)this._mergedLayers[f].setEventedParent(null);for(const f in this._mergedSourceCaches)this._mergedSourceCaches[f].clearTiles(),this._mergedSourceCaches[f].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(f){const _=this.getSourceCaches(f);for(const A of _)A.clearTiles()}clearSources(){for(const f in this._mergedSourceCaches)this._mergedSourceCaches[f].clearTiles()}reloadSource(f){const _=this.getSourceCaches(f);for(const A of _)A.resume(),A.reload()}reloadSources(){for(const f of this.getSources())f.reload&&f.reload()}updateSources(f){let _;this.directionalLight&&(_=d_(this.directionalLight));for(const A in this._mergedSourceCaches)this._mergedSourceCaches[A].update(f,void 0,void 0,_)}_generateCollisionBoxes(){for(const f in this._sourceCaches){const _=this._sourceCaches[f];_.resume(),_.reload()}}_updatePlacement(f,_,A,D,L=!1){let B=!1,N=!1;const W={},X={};for(const J of this._mergedOrder){const te=this._mergedLayers[J];if(te.type!=="symbol")continue;const oe=a.aE(te.source,te.scope);let le=W[oe];if(!le){const pe=this.getLayerSourceCache(te);if(!pe)continue;const fe=pe.getRenderableIds(!0).map(he=>pe.getTileByID(he));X[oe]=fe.slice(),le=W[oe]=fe.sort((he,we)=>we.tileID.overscaledZ-he.tileID.overscaledZ||(he.tileID.isLessThan(we.tileID)?-1:1))}const de=this.crossTileSymbolIndex.addLayer(te,le,f.center.lng,f.projection);B=B||de}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),L=L||this._layerOrderChanged||A===0,this._layerOrderChanged&&this.fire(new a.a8("neworder")),(L||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.a4.now(),f.zoom))&&(this.pauseablePlacement=new Sh(f,this._mergedOrder,L,_,A,D,this.placement,this.fog&&f.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,W,X),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.a4.now()),N=!0),B&&this.pauseablePlacement.placement.setStale()),N||B)for(const J of this._mergedOrder){const te=this._mergedLayers[J];te.type==="symbol"&&this.placement.updateLayerOpacities(te,W[a.aE(te.source,te.scope)])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.a4.now())}_releaseSymbolFadeTiles(){for(const f in this._sourceCaches)this._sourceCaches[f].releaseSymbolFadeTiles()}addImport(f){this._checkLoaded();const _=this.stylesheet.imports=this.stylesheet.imports||[];return _.findIndex(({id:A})=>A===f.id)!==-1?this.fire(new a.a7(new Error(`Import with id '${f.id}' already exists in the map's style.`))):(_.push(f),this._loadImports([f],!0),this)}setImportUrl(f,_){this._checkLoaded();const A=this.stylesheet.imports||[],D=this.getImportIndex(f);if(D===-1)return this;A[D].url=_;const L=this.fragments[D];return L.style=this._createFragmentStyle(A[D]),L.style.on("style.import.load",()=>this.mergeAll()),L.style.loadURL(_),this}setImportData(f,_){this._checkLoaded();const A=this.getImportIndex(f),D=this.stylesheet.imports||[];return A===-1?this:_?(this.fragments[A].style.setState(_),this._reloadImports(),this):(delete D[A].data,this.setImportUrl(f,D[A].url))}setImportConfig(f,_){this._checkLoaded();const A=this.getImportIndex(f),D=this.stylesheet.imports||[];if(A===-1)return this;_?D[A].config=_:delete D[A].config;const L=this.fragments[A],B=L.style.stylesheet&&L.style.stylesheet.schema;return L.config=_,L.style.setConfig(_,B),this.updateConfigDependencies(),this}removeImport(f){this._checkLoaded();const _=this.stylesheet.imports||[],A=this.getImportIndex(f);return A===-1||(_.splice(A,1),this.fragments[A].style._remove(),this.fragments.splice(A,1),this._reloadImports()),this}getImportIndex(f){const _=(this.stylesheet.imports||[]).findIndex(A=>A.id===f);return _===-1&&this.fire(new a.a7(new Error(`Import '${f}' does not exist in the map's style and cannot be updated.`))),_}getLayer(f){return this._mergedLayers[f]}getSources(){const f=[];for(const _ in this._mergedOtherSourceCaches){const A=this._mergedOtherSourceCaches[_];A&&f.push(A.getSource())}return f}getSource(f,_){const A=this.getSourceCache(f,_);return A&&A.getSource()}getLayerSource(f){const _=this.getLayerSourceCache(f);return _&&_.getSource()}getSourceCache(f,_){const A=a.aE(f,_);return this._mergedOtherSourceCaches[A]}getLayerSourceCache(f){const _=a.aE(f.source,f.scope);return f.type==="symbol"?this._mergedSymbolSourceCaches[_]:this._mergedOtherSourceCaches[_]}getSourceCaches(f){const _=[];return this._mergedOtherSourceCaches[f]&&_.push(this._mergedOtherSourceCaches[f]),this._mergedSymbolSourceCaches[f]&&_.push(this._mergedSymbolSourceCaches[f]),_}updateSourceCaches(){const f=this._changes.getUpdatedSourceCaches();for(const _ in f){const A=f[_];A==="reload"?this.reloadSource(_):A==="clear"&&this.clearSource(_)}}updateLayers(f){const _=this._changes.getUpdatedPaintProperties();for(const A of _){const D=this.getLayer(A);D&&D.updateTransitions(f)}}getImages(f,_,A){this.imageManager.getImages(_.icons,_.scope,A),this._updateTilesForChangedImages();const D=L=>{L&&L.setDependencies(_.tileID.key,_.type,_.icons)};D(this._otherSourceCaches[_.source]),D(this._symbolSourceCaches[_.source])}getGlyphs(f,_,A){this.glyphManager.getGlyphs(_.stacks,_.scope,A)}getResource(f,_,A){return a.cD(_,A)}getOwnSourceCache(f){return this._otherSourceCaches[f]}getOwnLayerSourceCache(f){return f.type==="symbol"?this._symbolSourceCaches[f.source]:this._otherSourceCaches[f.source]}getOwnSourceCaches(f){const _=[];return this._otherSourceCaches[f]&&_.push(this._otherSourceCaches[f]),this._symbolSourceCaches[f]&&_.push(this._symbolSourceCaches[f]),_}_isSourceCacheLoaded(f){const _=this.getOwnSourceCaches(f);return _.length===0?(this.fire(new a.a7(new Error(`There is no source with ID '${f}'`))),!1):_.every(A=>A.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}function _u(S,f){let _=!1,A=null;const D=()=>{A=null,_&&(S(),A=setTimeout(D,f),_=!1)};return()=>(_=!0,A||D(),A)}Zo.getSourceType=function(S){return oo[S]},Zo.setSourceType=function(S,f){oo[S]=f},Zo.registerForPluginStateChange=a.ci;class i1{constructor(f){this._hashName=f&&encodeURIComponent(f),a.aR(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=_u(this._updateHashUnthrottled.bind(this),300)}addTo(f){return this._map=f,window.addEventListener("hashchange",this._onHashChange,!1),f.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const f=this._map;if(!f)return"";const _=yu(f);if(this._hashName){const A=this._hashName;let D=!1;const L=location.hash.slice(1).split("&").map(B=>{const N=B.split("=")[0];return N===A?(D=!0,`${N}=${_}`):B}).filter(B=>B);return D||L.push(`${A}=${_}`),`#${L.join("&")}`}return`#${_}`}_getCurrentHash(){const f=location.hash.replace("#","");if(this._hashName){let _;return f.split("&").map(A=>A.split("=")).forEach(A=>{A[0]===this._hashName&&(_=A)}),(_&&_[1]||"").split("/")}return f.split("/")}_onHashChange(){const f=this._map;if(!f)return!1;const _=this._getCurrentHash();if(_.length>=3&&!_.some(A=>isNaN(A))){const A=f.dragRotate.isEnabled()&&f.touchZoomRotate.isEnabled()?+(_[3]||0):f.getBearing();return f.jumpTo({center:[+_[2],+_[1]],zoom:+_[0],bearing:A,pitch:+(_[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function yu(S,f){const _=S.getCenter(),A=Math.round(100*S.getZoom())/100,D=Math.ceil((A*Math.LN2+Math.log(512/360/.5))/Math.LN10),L=Math.pow(10,D),B=Math.round(_.lng*L)/L,N=Math.round(_.lat*L)/L,W=S.getBearing(),X=S.getPitch();let J=f?`/${B}/${N}/${A}`:`${A}/${N}/${B}`;return(W||X)&&(J+="/"+Math.round(10*W)/10),X&&(J+=`/${Math.round(X)}`),J}const af={linearity:.3,easing:a.cE(0,0,.3,1)},p_=a.ak({deceleration:2500,maxSpeed:1400},af),m_=a.ak({deceleration:20,maxSpeed:1400},af),Cm=a.ak({deceleration:1e3,maxSpeed:360},af),k2=a.ak({deceleration:1e3,maxSpeed:90},af);class n1{constructor(f){this._map=f,this.clear()}clear(){this._inertiaBuffer=[]}record(f){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.a4.now(),settings:f})}_drainInertiaBuffer(){const f=this._inertiaBuffer,_=a.a4.now();for(;f.length>0&&_-f[0].time>160;)f.shift()}_onMoveEnd(f){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const _={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:L}of this._inertiaBuffer)_.zoom+=L.zoomDelta||0,_.bearing+=L.bearingDelta||0,_.pitch+=L.pitchDelta||0,L.panDelta&&_.pan._add(L.panDelta),L.around&&(_.around=L.around),L.pinchAround&&(_.pinchAround=L.pinchAround);const A=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,D={};if(_.pan.mag()){const L=Im(_.pan.mag(),A,a.ak({},p_,f||{}));D.offset=_.pan.mult(L.amount/_.pan.mag()),D.center=this._map.transform.center,xu(D,L)}if(_.zoom){const L=Im(_.zoom,A,m_);D.zoom=this._map.transform.zoom+L.amount,xu(D,L)}if(_.bearing){const L=Im(_.bearing,A,Cm);D.bearing=this._map.transform.bearing+a.c(L.amount,-179,179),xu(D,L)}if(_.pitch){const L=Im(_.pitch,A,k2);D.pitch=this._map.transform.pitch+L.amount,xu(D,L)}if(D.zoom||D.bearing){const L=_.pinchAround===void 0?_.around:_.pinchAround;D.around=L?this._map.unproject(L):this._map.getCenter()}return this.clear(),D.noMoveStart=!0,D}}function xu(S,f){(!S.duration||S.duration<f.duration)&&(S.duration=f.duration,S.easing=f.easing)}function Im(S,f,_){const{maxSpeed:A,linearity:D,deceleration:L}=_,B=a.c(S*D/(f/1e3),-A,A),N=Math.abs(B)/(L*D);return{easing:_.easing,duration:1e3*N,amount:B*(N/2)}}class Io extends a.a8{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(f,_,A,D={}){const L=j(_.getCanvasContainer(),A),B=_.unproject(L);super(f,a.ak({point:L,lngLat:B,originalEvent:A},D)),this._defaultPrevented=!1,this.target=_}}class of extends a.a8{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(f,_,A){const D=f==="touchend"?A.changedTouches:A.touches,L=G(_.getCanvasContainer(),D),B=L.map(W=>_.unproject(W)),N=L.reduce((W,X,J,te)=>W.add(X.div(te.length)),new a.P(0,0));super(f,{points:L,point:N,lngLats:B,lngLat:_.unproject(N),originalEvent:A}),this._defaultPrevented=!1}}class R2 extends a.a8{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(f,_,A){super(f,{originalEvent:A}),this._defaultPrevented=!1}}class g_{constructor(f,_){this._map=f,this._clickTolerance=_.clickTolerance}reset(){this._mousedownPos=void 0}wheel(f){return this._firePreventable(new R2(f.type,this._map,f))}mousedown(f,_){return this._mousedownPos=_,this._firePreventable(new Io(f.type,this._map,f))}mouseup(f){this._map.fire(new Io(f.type,this._map,f))}preclick(f){const _=a.ak({},f);_.type="preclick",this._map.fire(new Io(_.type,this._map,_))}click(f,_){this._mousedownPos&&this._mousedownPos.dist(_)>=this._clickTolerance||(this.preclick(f),this._map.fire(new Io(f.type,this._map,f)))}dblclick(f){return this._firePreventable(new Io(f.type,this._map,f))}mouseover(f){this._map.fire(new Io(f.type,this._map,f))}mouseout(f){this._map.fire(new Io(f.type,this._map,f))}touchstart(f){return this._firePreventable(new of(f.type,this._map,f))}touchmove(f){this._map.fire(new of(f.type,this._map,f))}touchend(f){this._map.fire(new of(f.type,this._map,f))}touchcancel(f){this._map.fire(new of(f.type,this._map,f))}_firePreventable(f){if(this._map.fire(f),f.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Em{constructor(f){this._map=f}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(f){this._map.fire(new Io(f.type,this._map,f))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Io("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(f){this._delayContextMenu?this._contextMenuEvent=f:this._map.fire(new Io(f.type,this._map,f)),this._map.listens("contextmenu")&&f.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class sf{constructor(f,_){this._map=f,this._el=f.getCanvasContainer(),this._container=f.getContainer(),this._clickTolerance=_.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(f,_){this.isEnabled()&&f.shiftKey&&f.button===0&&(k(),this._startPos=this._lastPos=_,this._active=!0)}mousemoveWindow(f,_){if(!this._active)return;const A=_,D=this._startPos,L=this._lastPos;if(!D||!L||L.equals(A)||!this._box&&A.dist(D)<this._clickTolerance)return;this._lastPos=A,this._box||(this._box=x("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",f));const B=Math.min(D.x,A.x),N=Math.max(D.x,A.x),W=Math.min(D.y,A.y),X=Math.max(D.y,A.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${B}px,${W}px)`,this._box.style.width=N-B+"px",this._box.style.height=X-W+"px")})}mouseupWindow(f,_){if(!this._active)return;const A=this._startPos,D=_;if(A&&f.button===0){if(this.reset(),$(),A.x!==D.x||A.y!==D.y)return this._map.fire(new a.a8("boxzoomend",{originalEvent:f})),{cameraAnimation:L=>L.fitScreenCoordinates(A,D,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",f)}}keydown(f){this._active&&f.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",f))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),R(),delete this._startPos,delete this._lastPos}_fireEvent(f,_){return this._map.fire(new a.a8(f,{originalEvent:_}))}}function lf(S,f){const _={};for(let A=0;A<S.length;A++)_[S[A].identifier]=f[A];return _}class uf{constructor(f){this.reset(),this.numTouches=f.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(f,_,A){(this.centroid||A.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=f.timeStamp),A.length===this.numTouches&&(this.centroid=function(D){const L=new a.P(0,0);for(const B of D)L._add(B);return L.div(D.length)}(_),this.touches=lf(A,_)))}touchmove(f,_,A){if(this.aborted||!this.centroid)return;const D=lf(A,_);for(const L in this.touches){const B=D[L];(!B||B.dist(this.touches[L])>30)&&(this.aborted=!0)}}touchend(f,_,A){if((!this.centroid||f.timeStamp-this.startTime>500)&&(this.aborted=!0),A.length===0){const D=!this.aborted&&this.centroid;if(this.reset(),D)return D}}}class cf{constructor(f){this.singleTap=new uf(f),this.numTaps=f.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(f,_,A){this.singleTap.touchstart(f,_,A)}touchmove(f,_,A){this.singleTap.touchmove(f,_,A)}touchend(f,_,A){const D=this.singleTap.touchend(f,_,A);if(D){const L=f.timeStamp-this.lastTime<500,B=!this.lastTap||this.lastTap.dist(D)<30;if(L&&B||this.reset(),this.count++,this.lastTime=f.timeStamp,this.lastTap=D,this.count===this.numTaps)return this.reset(),D}}}class Dm{constructor(){this._zoomIn=new cf({numTouches:1,numTaps:2}),this._zoomOut=new cf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(f,_,A){this._zoomIn.touchstart(f,_,A),this._zoomOut.touchstart(f,_,A)}touchmove(f,_,A){this._zoomIn.touchmove(f,_,A),this._zoomOut.touchmove(f,_,A)}touchend(f,_,A){const D=this._zoomIn.touchend(f,_,A),L=this._zoomOut.touchend(f,_,A);return D?(this._active=!0,f.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:B=>B.easeTo({duration:300,zoom:B.getZoom()+1,around:B.unproject(D)},{originalEvent:f})}):L?(this._active=!0,f.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:B=>B.easeTo({duration:300,zoom:B.getZoom()-1,around:B.unproject(L)},{originalEvent:f})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Pm={0:1,2:2};class fo{constructor(f){this.reset(),this._clickTolerance=f.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(f,_){return!1}_move(f,_){return{}}mousedown(f,_){if(this._lastPoint)return;const A=Y(f);this._correctButton(f,A)&&(this._lastPoint=_,this._eventButton=A)}mousemoveWindow(f,_){const A=this._lastPoint;if(A){if(f.preventDefault(),this._eventButton!=null&&function(D,L){const B=Pm[L];return D.buttons===void 0||(D.buttons&B)!==B}(f,this._eventButton))this.reset();else if(this._moved||!(_.dist(A)<this._clickTolerance))return this._moved=!0,this._lastPoint=_,this._move(A,_)}}mouseupWindow(f){this._lastPoint&&Y(f)===this._eventButton&&(this._moved&&$(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class a1 extends fo{mousedown(f,_){super.mousedown(f,_),this._lastPoint&&(this._active=!0)}_correctButton(f,_){return _===0&&!f.ctrlKey}_move(f,_){return{around:_,panDelta:_.sub(f)}}}class v_ extends fo{_correctButton(f,_){return _===0&&f.ctrlKey||_===2}_move(f,_){const A=.8*(_.x-f.x);if(A)return this._active=!0,{bearingDelta:A}}contextmenu(f){f.preventDefault()}}class __ extends fo{_correctButton(f,_){return _===0&&f.ctrlKey||_===2}_move(f,_){const A=-.5*(_.y-f.y);if(A)return this._active=!0,{pitchDelta:A}}contextmenu(f){f.preventDefault()}}class Mc{constructor(f,_){this._map=f,this._el=f.getCanvasContainer(),this._minTouches=1,this._clickTolerance=_.clickTolerance||1,this.reset(),a.aR(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}touchstart(f,_,A){return this._calculateTransform(f,_,A)}touchmove(f,_,A){if(this._active&&!(A.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(A.length===1&&!a.cF())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return f.cancelable&&f.preventDefault(),this._calculateTransform(f,_,A)}}touchend(f,_,A){this._calculateTransform(f,_,A),this._active&&A.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(f,_,A){A.length>0&&(this._active=!0);const D=lf(A,_),L=new a.P(0,0),B=new a.P(0,0);let N=0;for(const X in D){const J=D[X],te=this._touches[X];te&&(L._add(J),B._add(J.sub(te)),N++,D[X]=J)}if(this._touches=D,N<this._minTouches||!B.mag())return;const W=B.div(N);return this._sum._add(W),this._sum.mag()<this._clickTolerance?void 0:{around:L.div(N),panDelta:W}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=x("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Lm{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(f){}_move(f,_,A){return{}}touchstart(f,_,A){this._firstTwoTouches||A.length<2||(this._firstTwoTouches=[A[0].identifier,A[1].identifier],this._start([_[0],_[1]]))}touchmove(f,_,A){const D=this._firstTwoTouches;if(!D)return;f.preventDefault();const[L,B]=D,N=Ac(A,_,L),W=Ac(A,_,B);if(!N||!W)return;const X=this._aroundCenter?null:N.add(W).div(2);return this._move([N,W],X,f)}touchend(f,_,A){if(!this._firstTwoTouches)return;const[D,L]=this._firstTwoTouches,B=Ac(A,_,D),N=Ac(A,_,L);B&&N||(this._active&&$(),this.reset())}touchcancel(){this.reset()}enable(f){this._enabled=!0,this._aroundCenter=!!f&&f.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ac(S,f,_){for(let A=0;A<S.length;A++)if(S[A].identifier===_)return f[A]}function km(S,f){return Math.log(S/f)/Math.LN2}class Rm extends Lm{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(f){this._startDistance=this._distance=f[0].dist(f[1])}_move(f,_){const A=this._distance;if(this._distance=f[0].dist(f[1]),this._active||!(Math.abs(km(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:km(this._distance,A),pinchAround:_}}}function y_(S,f){return 180*S.angleWith(f)/Math.PI}class o1 extends Lm{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(f){this._startVector=this._vector=f[0].sub(f[1]),this._minDiameter=f[0].dist(f[1])}_move(f,_){const A=this._vector;if(this._vector=f[0].sub(f[1]),A&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:y_(this._vector,A),pinchAround:_}}_isBelowThreshold(f){this._minDiameter=Math.min(this._minDiameter,f.mag());const _=25/(Math.PI*this._minDiameter)*360,A=this._startVector;if(!A)return!1;const D=y_(f,A);return Math.abs(D)<_}}function bu(S){return Math.abs(S.y)>Math.abs(S.x)}class O2 extends Lm{constructor(f){super(),this._map=f}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(f){this._lastPoints=f,bu(f[0].sub(f[1]))&&(this._valid=!1)}_move(f,_,A){const D=this._lastPoints;if(!D)return;const L=f[0].sub(D[0]),B=f[1].sub(D[1]);return this._map._cooperativeGestures&&!a.cF()&&A.touches.length<3||(this._valid=this.gestureBeginsVertically(L,B,A.timeStamp),!this._valid)?void 0:(this._lastPoints=f,this._active=!0,{pitchDelta:(L.y+B.y)/2*-.5})}gestureBeginsVertically(f,_,A){if(this._valid!==void 0)return this._valid;const D=f.mag()>=2,L=_.mag()>=2;if(!D&&!L)return;if(!D||!L)return this._firstMove==null&&(this._firstMove=A),A-this._firstMove<100&&void 0;const B=f.y>0==_.y>0;return bu(f)&&bu(_)&&B}}const z2={panStep:100,bearingStep:15,pitchStep:10};class s1{constructor(){const f=z2;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(f){if(f.altKey||f.ctrlKey||f.metaKey)return;let _=0,A=0,D=0,L=0,B=0;switch(f.keyCode){case 61:case 107:case 171:case 187:_=1;break;case 189:case 109:case 173:_=-1;break;case 37:f.shiftKey?A=-1:(f.preventDefault(),L=-1);break;case 39:f.shiftKey?A=1:(f.preventDefault(),L=1);break;case 38:f.shiftKey?D=1:(f.preventDefault(),B=-1);break;case 40:f.shiftKey?D=-1:(f.preventDefault(),B=1);break;default:return}return this._rotationDisabled&&(A=0,D=0),{cameraAnimation:N=>{const W=N.getZoom();N.easeTo({duration:300,easeId:"keyboardHandler",easing:Om,zoom:_?Math.round(W)+_*(f.shiftKey?2:1):W,bearing:N.getBearing()+A*this._bearingStep,pitch:N.getPitch()+D*this._pitchStep,offset:[-L*this._panStep,-B*this._panStep],center:N.getCenter()},{originalEvent:f})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Om(S){return S*(2-S)}const zm=4.000244140625;class l1{constructor(f,_){this._map=f,this._el=f.getCanvasContainer(),this._handler=_,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.aR(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(f){this._defaultZoomRate=f}setWheelZoomRate(f){this._wheelZoomRate=f}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(f){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!f&&f.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(f){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(f.ctrlKey||f.metaKey||this.isZooming()||a.cF()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let _=f.deltaMode===WheelEvent.DOM_DELTA_LINE?40*f.deltaY:f.deltaY;const A=a.a4.now(),D=A-(this._lastWheelEventTime||0);this._lastWheelEventTime=A,_!==0&&_%zm==0?this._type="wheel":_!==0&&Math.abs(_)<4?this._type="trackpad":D>400?(this._type=null,this._lastValue=_,this._timeout=setTimeout(this._onTimeout,40,f)):this._type||(this._type=Math.abs(D*_)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,_+=this._lastValue)),f.shiftKey&&_&&(_/=4),this._type&&(this._lastWheelEvent=f,this._delta-=_,this._active||this._start(f)),f.preventDefault()}_onTimeout(f){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)}_start(f){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const _=j(this._el,f);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:_,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const f=this._map.transform;this._type==="wheel"&&f.projection.wrap&&(f._center.lng>=180||f._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const _=()=>f._terrainEnabled()&&this._aroundCoord?f.computeZoomRelativeTo(this._aroundCoord):f.zoom;if(this._delta!==0){const X=this._type==="wheel"&&Math.abs(this._delta)>zm?this._wheelZoomRate:this._defaultZoomRate;let J=2/(1+Math.exp(-Math.abs(this._delta*X)));this._delta<0&&J!==0&&(J=1/J);const te=_(),oe=Math.pow(2,te),le=typeof this._targetZoom=="number"?f.zoomScale(this._targetZoom):oe;this._targetZoom=Math.min(f.maxZoom,Math.max(f.minZoom,f.scaleZoom(le*J))),this._type==="wheel"&&(this._startZoom=te,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const A=typeof this._targetZoom=="number"?this._targetZoom:_(),D=this._startZoom,L=this._easing;let B,N=!1;if(this._type==="wheel"&&D&&L){const X=Math.min((a.a4.now()-this._lastWheelEventTime)/200,1),J=L(X);B=a.n(D,A,J),X<1?this._frameId||(this._frameId=!0):N=!0}else B=A,N=!0;this._active=!0,N&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let W=B-_();return W*this._lastDelta<0&&(W=0),{noInertia:!0,needsRenderFrame:!N,zoomDelta:W,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(f){let _=a.cG;if(this._prevEase){const A=this._prevEase,D=(a.a4.now()-A.start)/A.duration,L=A.easing(D+.01)-A.easing(D),B=.27/Math.sqrt(L*L+1e-4)*.01,N=Math.sqrt(.0729-B*B);_=a.cE(B,N,.25,1)}return this._prevEase={start:a.a4.now(),duration:f,easing:_},_}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=x("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class u1{constructor(f,_){this._clickZoom=f,this._tapZoom=_}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Bm{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(f,_){return f.preventDefault(),{cameraAnimation:A=>{A.easeTo({duration:300,zoom:A.getZoom()+(f.shiftKey?-1:1),around:A.unproject(_)},{originalEvent:f})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class x_{constructor(){this._tap=new cf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(f,_,A){this._swipePoint||(this._tapTime&&f.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?A.length>0&&(this._swipePoint=_[0],this._swipeTouch=A[0].identifier):this._tap.touchstart(f,_,A))}touchmove(f,_,A){if(this._tapTime){if(this._swipePoint){if(A[0].identifier!==this._swipeTouch)return;const D=_[0],L=D.y-this._swipePoint.y;return this._swipePoint=D,f.preventDefault(),this._active=!0,{zoomDelta:L/128}}}else this._tap.touchmove(f,_,A)}touchend(f,_,A){this._tapTime?this._swipePoint&&A.length===0&&this.reset():this._tap.touchend(f,_,A)&&(this._tapTime=f.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class c1{constructor(f,_,A){this._el=f,this._mousePan=_,this._touchPan=A}enable(f){this._inertiaOptions=f||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class h1{constructor(f,_,A){this._pitchWithRotate=f.pitchWithRotate,this._mouseRotate=_,this._mousePitch=A}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class d1{constructor(f,_,A,D){this._el=f,this._touchZoom=_,this._touchRotate=A,this._tapDragZoom=D,this._rotationDisabled=!1,this._enabled=!0}enable(f){this._touchZoom.enable(f),this._rotationDisabled||this._touchRotate.enable(f),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const hf=S=>S.zoom||S.drag||S.pitch||S.rotate;class f1 extends a.a8{}class Dh{constructor(){this.constants=[1,1,.01],this.radius=0}setup(f,_){const A=a.v.sub([],_,f);this.radius=a.v.length(A[2]<0?a.v.div([],A,this.constants):[A[0],A[1],0])}projectRay(f){a.v.div(f,f,this.constants),a.v.normalize(f,f),a.v.mul(f,f,this.constants);const _=a.v.scale([],f,this.radius);if(_[2]>0){const A=a.v.scale([],[0,0,1],a.v.dot(_,[0,0,1])),D=a.v.scale([],a.v.normalize([],[_[0],_[1],0]),this.radius),L=a.v.add([],_,a.v.scale([],a.v.sub([],a.v.add([],D,A),_),2));_[0]=L[0],_[1]=L[1]}return _}}function df(S){return S.panDelta&&S.panDelta.mag()||S.zoomDelta||S.bearingDelta||S.pitchDelta}class p1{constructor(f,_){this._map=f,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new n1(f),this._bearingSnap=_.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Dh,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(_),a.aR(["handleEvent","handleWindowEvent"],this);const A=this._el;this._listeners=[[A,"touchstart",{passive:!0}],[A,"touchmove",{passive:!1}],[A,"touchend",void 0],[A,"touchcancel",void 0],[A,"mousedown",void 0],[A,"mousemove",void 0],[A,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[A,"mouseover",void 0],[A,"mouseout",void 0],[A,"dblclick",void 0],[A,"click",void 0],[A,"keydown",{capture:!1}],[A,"keyup",void 0],[A,"wheel",{passive:!1}],[A,"contextmenu",void 0],[window,"blur",void 0]];for(const[D,L,B]of this._listeners){const N=D===document?this.handleWindowEvent:this.handleEvent;D.addEventListener(L,N,B)}}destroy(){for(const[f,_,A]of this._listeners){const D=f===document?this.handleWindowEvent:this.handleEvent;f.removeEventListener(_,D,A)}}_addDefaultHandlers(f){const _=this._map,A=_.getCanvasContainer();this._add("mapEvent",new g_(_,f));const D=_.boxZoom=new sf(_,f);this._add("boxZoom",D);const L=new Dm,B=new Bm;_.doubleClickZoom=new u1(B,L),this._add("tapZoom",L),this._add("clickZoom",B);const N=new x_;this._add("tapDragZoom",N);const W=_.touchPitch=new O2(_);this._add("touchPitch",W);const X=new v_(f),J=new __(f);_.dragRotate=new h1(f,X,J),this._add("mouseRotate",X,["mousePitch"]),this._add("mousePitch",J,["mouseRotate"]);const te=new a1(f),oe=new Mc(_,f);_.dragPan=new c1(A,te,oe),this._add("mousePan",te),this._add("touchPan",oe,["touchZoom","touchRotate"]);const le=new o1,de=new Rm;_.touchZoomRotate=new d1(A,de,le,N),this._add("touchRotate",le,["touchPan","touchZoom"]),this._add("touchZoom",de,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Em(_));const pe=_.scrollZoom=new l1(_,this);this._add("scrollZoom",pe,["mousePan"]);const fe=_.keyboard=new s1;this._add("keyboard",fe);for(const he of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])f.interactive&&f[he]&&_[he].enable(f[he])}_add(f,_,A){this._handlers.push({handlerName:f,handler:_,allowed:A}),this._handlersById[f]=_}stop(f){if(!this._updatingCamera){for(const{handler:_}of this._handlers)_.reset();this._inertia.clear(),this._fireEvents({},{},f),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:f}of this._handlers)if(f.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!hf(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(f,_,A){for(const D in f)if(D!==A&&(!_||_.indexOf(D)<0))return!0;return!1}handleWindowEvent(f){this.handleEvent(f,`${f.type}Window`)}_getMapTouches(f){const _=[];for(const A of f)this._el.contains(A.target)&&_.push(A);return _}handleEvent(f,_){this._updatingCamera=!0;const A=f.type==="renderFrame",D=A?void 0:f,L={needsRenderFrame:!1},B={},N={},W=f.touches?this._getMapTouches(f.touches):void 0,X=W?G(this._el,W):A?void 0:j(this._el,f);for(const{handlerName:oe,handler:le,allowed:de}of this._handlers){if(!le.isEnabled())continue;let pe;this._blockedByActive(N,de,oe)?le.reset():le[_||f.type]&&(pe=le[_||f.type](f,X,W),this.mergeHandlerResult(L,B,pe,oe,D),pe&&pe.needsRenderFrame&&this._triggerRenderFrame()),(pe||le.isActive())&&(N[oe]=le)}const J={};for(const oe in this._previousActiveHandlers)N[oe]||(J[oe]=D);this._previousActiveHandlers=N,(Object.keys(J).length||df(L))&&(this._changes.push([L,B,J]),this._triggerRenderFrame()),(Object.keys(N).length||df(L))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:te}=L;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))}mergeHandlerResult(f,_,A,D,L){if(!A)return;a.ak(f,A);const B={handlerName:D,originalEvent:A.originalEvent||L};A.zoomDelta!==void 0&&(_.zoom=B),A.panDelta!==void 0&&(_.drag=B),A.pitchDelta!==void 0&&(_.pitch=B),A.bearingDelta!==void 0&&(_.rotate=B)}_applyChanges(){const f={},_={},A={};for(const[D,L,B]of this._changes)D.panDelta&&(f.panDelta=(f.panDelta||new a.P(0,0))._add(D.panDelta)),D.zoomDelta&&(f.zoomDelta=(f.zoomDelta||0)+D.zoomDelta),D.bearingDelta&&(f.bearingDelta=(f.bearingDelta||0)+D.bearingDelta),D.pitchDelta&&(f.pitchDelta=(f.pitchDelta||0)+D.pitchDelta),D.around!==void 0&&(f.around=D.around),D.aroundCoord!==void 0&&(f.aroundCoord=D.aroundCoord),D.pinchAround!==void 0&&(f.pinchAround=D.pinchAround),D.noInertia&&(f.noInertia=D.noInertia),a.ak(_,L),a.ak(A,B);this._updateMapTransform(f,_,A),this._changes=[]}_updateMapTransform(f,_,A){const D=this._map,L=D.transform,B=we=>[we.x,we.y,we.z];if((we=>{const Le=this._eventsInProgress.drag;return Le&&!this._handlersById[Le.handlerName].isActive()})()&&!df(f)){const we=L.zoom;L.cameraElevationReference="sea",this._originalZoom!=null&&L._orthographicProjectionAtLowPitch&&L.projection.name!=="globe"&&L.pitch===0?(L.cameraElevationReference="ground",L.zoom=this._originalZoom):(L.recenterOnTerrain(),L.cameraElevationReference="ground"),we!==L.zoom&&this._map._update(!0)}if(L._isCameraConstrained&&D._stop(!0),!df(f))return void this._fireEvents(_,A,!0);let{panDelta:N,zoomDelta:W,bearingDelta:X,pitchDelta:J,around:te,aroundCoord:oe,pinchAround:le}=f;L._isCameraConstrained&&(W>0&&(W=0),L._isCameraConstrained=!1),le!==void 0&&(te=le),(W||(we=>_[we]&&!this._eventsInProgress[we])("drag"))&&te&&(this._dragOrigin=B(L.pointCoordinate3D(te)),this._originalZoom=L.zoom,this._trackingEllipsoid.setup(L._camera.position,this._dragOrigin)),L.cameraElevationReference="sea",D._stop(!0),te=te||D.transform.centerPoint,X&&(L.bearing+=X),J&&(L.pitch+=J),L._updateCameraState();const de=[0,0,0];if(N)if(L.projection.name==="mercator"){const we=this._trackingEllipsoid.projectRay(L.screenPointToMercatorRay(te).dir),Le=this._trackingEllipsoid.projectRay(L.screenPointToMercatorRay(te.sub(N)).dir);de[0]=Le[0]-we[0],de[1]=Le[1]-we[1]}else{const we=L.pointCoordinate(te);if(L.projection.name==="globe"){N=N.rotate(-L.angle);const Le=L._pixelsPerMercatorPixel/L.worldSize;de[0]=-N.x*a.cH(a.l(we.y))*Le,de[1]=-N.y*a.cH(L.center.lat)*Le}else{const Le=L.pointCoordinate(te.sub(N));we&&Le&&(de[0]=Le.x-we.x,de[1]=Le.y-we.y)}}const pe=L.zoom,fe=[0,0,0];if(W){const we=B(oe||L.pointCoordinate3D(te)),Le={dir:a.v.normalize([],a.v.sub([],we,L._camera.position))};if(Le.dir[2]<0){const Oe=L.zoomDeltaToMovement(we,W);a.v.scale(fe,Le.dir,Oe)}}const he=a.v.add(de,de,fe);L._translateCameraConstrained(he),W&&Math.abs(L.zoom-pe)>1e-4&&L.recenterOnTerrain(),L.cameraElevationReference="ground",this._map._update(),f.noInertia||this._inertia.record(f),this._fireEvents(_,A,!0)}_fireEvents(f,_,A){const D=hf(this._eventsInProgress),L=hf(f),B={};for(const J in f){const{originalEvent:te}=f[J];this._eventsInProgress[J]||(B[`${J}start`]=te),this._eventsInProgress[J]=f[J]}!D&&L&&this._fireEvent("movestart",L.originalEvent);for(const J in B)this._fireEvent(J,B[J]);L&&this._fireEvent("move",L.originalEvent);for(const J in f){const{originalEvent:te}=f[J];this._fireEvent(J,te)}const N={};let W;for(const J in this._eventsInProgress){const{handlerName:te,originalEvent:oe}=this._eventsInProgress[J];this._handlersById[te].isActive()||(delete this._eventsInProgress[J],W=_[te]||oe,N[`${J}end`]=W)}for(const J in N)this._fireEvent(J,N[J]);const X=hf(this._eventsInProgress);if(A&&(D||L)&&!X){this._updatingCamera=!0;const J=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),te=oe=>oe!==0&&-this._bearingSnap<oe&&oe<this._bearingSnap;J?(te(J.bearing||this._map.getBearing())&&(J.bearing=0),this._map.easeTo(J,{originalEvent:W})):(this._map.fire(new a.a8("moveend",{originalEvent:W})),te(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(f,_){this._map.fire(new a.a8(f,_?{originalEvent:_}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(f=>{this._frameId=void 0,this.handleEvent(new f1("renderFrame",{timeStamp:f})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const m1="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class g1 extends a.a6{constructor(f,_){super(),this._moving=!1,this._zooming=!1,this.transform=f,this._bearingSnap=_.bearingSnap,this._respectPrefersReducedMotion=_.respectPrefersReducedMotion!==!1,a.aR(["_renderFrameCallback"],this)}getCenter(){return new a.L(this.transform.center.lng,this.transform.center.lat)}setCenter(f,_){return this.jumpTo({center:f},_)}panBy(f,_,A){return f=a.P.convert(f).mult(-1),this.panTo(this.transform.center,a.ak({offset:f},_),A)}panTo(f,_,A){return this.easeTo(a.ak({center:f},_),A)}getZoom(){return this.transform.zoom}setZoom(f,_){return this.jumpTo({zoom:f},_),this}zoomTo(f,_,A){return this.easeTo(a.ak({zoom:f},_),A)}zoomIn(f,_){return this.zoomTo(this.getZoom()+1,f,_),this}zoomOut(f,_){return this.zoomTo(this.getZoom()-1,f,_),this}getBearing(){return this.transform.bearing}setBearing(f,_){return this.jumpTo({bearing:f},_),this}getPadding(){return this.transform.padding}setPadding(f,_){return this.jumpTo({padding:f},_),this}rotateTo(f,_,A){return this.easeTo(a.ak({bearing:f},_),A)}resetNorth(f,_){return this.rotateTo(0,a.ak({duration:1e3},f),_),this}resetNorthPitch(f,_){return this.easeTo(a.ak({bearing:0,pitch:0,duration:1e3},f),_),this}snapToNorth(f,_){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(f,_):this}getPitch(){return this.transform.pitch}setPitch(f,_){return this.jumpTo({pitch:f},_),this}cameraForBounds(f,_){f=a.D.convert(f);const A=_&&_.bearing||0,D=_&&_.pitch||0,L=f.getNorthWest(),B=f.getSouthEast();return this._cameraForBounds(this.transform,L,B,A,D,_)}_extendCameraOptions(f){const _={top:0,bottom:0,right:0,left:0};if(typeof(f=a.ak({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding=="number"){const A=f.padding;f.padding={top:A,bottom:A,right:A,left:A}}return f.padding=a.ak(_,f.padding),f}_minimumAABBFrustumDistance(f,_){const A=_.max[0]-_.min[0],D=_.max[1]-_.min[1];return A/D>f.aspect?A/(2*Math.tan(.5*f.fovX)*f.aspect):D/(2*Math.tan(.5*f.fovY)*f.aspect)}_cameraForBoundsOnGlobe(f,_,A,D,L,B){const N=f.clone(),W=this._extendCameraOptions(B);N.bearing=D,N.pitch=L;const X=a.L.convert(_),J=a.L.convert(A),te=.5*(X.lat+J.lat),oe=.5*(X.lng+J.lng),le=a.cI(te,oe),de=a.v.normalize([],le),pe=a.v.normalize([],a.v.cross([],de,[0,1,0])),fe=a.v.cross([],pe,de),he=[pe[0],pe[1],pe[2],0,fe[0],fe[1],fe[2],0,de[0],de[1],de[2],0,0,0,0,1],we=[le,a.cI(X.lat,X.lng),a.cI(J.lat,X.lng),a.cI(J.lat,J.lng),a.cI(X.lat,J.lng),a.cI(te,X.lng),a.cI(te,J.lng),a.cI(X.lat,oe),a.cI(J.lat,oe)];let Le=a.c3.fromPoints(we.map(at=>[a.v.dot(pe,at),a.v.dot(fe,at),a.v.dot(de,at)]));const Oe=a.v.transformMat4([],Le.center,he);a.v.squaredLength(Oe)===0&&a.v.set(Oe,0,0,1),a.v.normalize(Oe,Oe),a.v.scale(Oe,Oe,a.aC),N.center=a.cJ(Oe);const xe=N.getWorldToCameraMatrix(),Te=a.m.invert(new Float64Array(16),xe);Le=a.c3.applyTransform(Le,a.m.multiply([],xe,he)),a.v.transformMat4(Oe,Oe,xe);const ze=.5*(Le.max[2]-Le.min[2]),je=this._minimumAABBFrustumDistance(N,Le),Ne=a.v.scale([],[0,0,1],ze),Ye=a.v.add(Ne,Oe,Ne),Ct=je+(N.pitch===0?0:a.v.distance(Oe,Ye)),ct=N.globeCenterInViewSpace,_t=a.v.sub([],Oe,[ct[0],ct[1],ct[2]]);a.v.normalize(_t,_t),a.v.scale(_t,_t,Ct);const tt=a.v.add([],Oe,_t);a.v.transformMat4(tt,tt,Te);const Mt=a.cL/a.aC,pt=a.v.length(tt),Dt=a.b(Math.max(pt*Mt-a.cL,Number.EPSILON),0),Ee=Math.min(N.zoomFromMercatorZAdjusted(Dt),W.maxZoom);return Ee>.5*(a.Z+a.G)?(N.setProjection({name:"mercator"}),N.zoom=Ee,this._cameraForBounds(N,_,A,D,L,B)):{center:N.center,zoom:Ee,bearing:D,pitch:L}}queryTerrainElevation(f,_){const A=this.transform.elevation;return A?(_=a.ak({},{exaggerated:!0},_),A.getAtPoint(a.M.fromLngLat(f),null,_.exaggerated)):null}_cameraForBounds(f,_,A,D,L,B){if(f.projection.name==="globe")return this._cameraForBoundsOnGlobe(f,_,A,D,L,B);const N=f.clone(),W=this._extendCameraOptions(B),X=N.padding;N.bearing=D,N.pitch=L;const J=a.L.convert(_),te=a.L.convert(A),oe=new a.L(J.lng,te.lat),le=new a.L(te.lng,J.lat),de=N.project(J),pe=N.project(te),fe=this.queryTerrainElevation(J),he=this.queryTerrainElevation(te),we=this.queryTerrainElevation(oe),Le=this.queryTerrainElevation(le),Oe=[[de.x,de.y,Math.min(fe||0,he||0,we||0,Le||0)],[pe.x,pe.y,Math.max(fe||0,he||0,we||0,Le||0)]];let xe=a.c3.fromPoints(Oe);const Te=N.getWorldToCameraMatrix(),ze=a.m.invert(new Float64Array(16),Te);xe=a.c3.applyTransform(xe,Te);const je=a.v.sub([],xe.max,xe.min),Ne=X.left||0,Ye=X.right||0,Ct=X.bottom||0,ct=X.top||0,{left:_t,right:tt,top:Mt,bottom:pt}=W.padding,Dt=.5*(Ne+Ye),Ee=.5*(ct+Ct),at=Math.min(N.scaleZoom(N.scale*Math.min((N.width-(Ne+Ye+_t+tt))/je[0],(N.height-(Ct+ct+pt+Mt))/je[1])),W.maxZoom),Ft=N.scale/N.zoomScale(at);xe=new a.c3([xe.min[0]-(_t+Dt)*Ft,xe.min[1]-(pt+Ee)*Ft,xe.min[2]],[xe.max[0]+(tt+Dt)*Ft,xe.max[1]+(Mt+Ee)*Ft,xe.max[2]]);const Rt=.5*je[2],dr=this._minimumAABBFrustumDistance(N,xe),or=[0,0,1,0];a.e.transformMat4(or,or,Te),a.e.normalize(or,or);const br=a.v.scale([],or,dr+Rt),ur=a.v.add([],xe.center,br),Ir=(typeof W.offset.x=="number"&&typeof W.offset.y=="number"?new a.P(W.offset.x,W.offset.y):a.P.convert(W.offset)).rotate(-a.d(D));xe.center[0]-=Ir.x*Ft,xe.center[1]+=Ir.y*Ft,a.v.transformMat4(xe.center,xe.center,ze),a.v.transformMat4(ur,ur,ze);const Er=[xe.center[0],xe.center[1],ur[2]*N.pixelsPerMeter];a.v.scale(Er,Er,1/N.worldSize);const vr=a.cK(Er[0]),_r=a.l(Er[1]),vi=Math.min(N._zoomFromMercatorZ(Er[2]),W.maxZoom),Wr=new a.L(vr,_r);return N.mercatorFromTransition&&vi<.5*(a.Z+a.G)?(N.setProjection({name:"globe"}),N.zoom=vi,this._cameraForBounds(N,_,A,D,L,B)):{center:Wr,zoom:vi,bearing:D,pitch:L}}fitBounds(f,_,A){const D=this.cameraForBounds(f,_);return this._fitInternal(D,_,A)}fitScreenCoordinates(f,_,A,D,L){const B=a.P.convert(f),N=a.P.convert(_),W=new a.P(Math.min(B.x,N.x),Math.min(B.y,N.y)),X=new a.P(Math.max(B.x,N.x),Math.max(B.y,N.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(B,N))return this;const J=this.transform.pointLocation3D(W),te=this.transform.pointLocation3D(X),oe=this.transform.pointLocation3D(new a.P(W.x,X.y)),le=this.transform.pointLocation3D(new a.P(X.x,W.y)),de=[Math.min(J.lng,te.lng,oe.lng,le.lng),Math.min(J.lat,te.lat,oe.lat,le.lat)],pe=[Math.max(J.lng,te.lng,oe.lng,le.lng),Math.max(J.lat,te.lat,oe.lat,le.lat)],fe=D&&D.pitch?D.pitch:this.getPitch(),he=this._cameraForBounds(this.transform,de,pe,A,fe,D);return this._fitInternal(he,D,L)}_fitInternal(f,_,A){return f?(delete(_=a.ak(f,_)).padding,_.linear?this.easeTo(_,A):this.flyTo(_,A)):this}jumpTo(f,_){this.stop();const A=f.preloadOnly?this.transform.clone():this.transform;let D=!1,L=!1,B=!1;return"zoom"in f&&A.zoom!==+f.zoom&&(D=!0,A.zoom=+f.zoom),f.center!==void 0&&(A.center=a.L.convert(f.center)),"bearing"in f&&A.bearing!==+f.bearing&&(L=!0,A.bearing=+f.bearing),"pitch"in f&&A.pitch!==+f.pitch&&(B=!0,A.pitch=+f.pitch),f.padding==null||A.isPaddingEqual(f.padding)||(A.padding=f.padding),f.preloadOnly?(this._preloadTiles(A),this):(this.fire(new a.a8("movestart",_)).fire(new a.a8("move",_)),D&&this.fire(new a.a8("zoomstart",_)).fire(new a.a8("zoom",_)).fire(new a.a8("zoomend",_)),L&&this.fire(new a.a8("rotatestart",_)).fire(new a.a8("rotate",_)).fire(new a.a8("rotateend",_)),B&&this.fire(new a.a8("pitchstart",_)).fire(new a.a8("pitch",_)).fire(new a.a8("pitchend",_)),this.fire(new a.a8("moveend",_)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||a.X(m1),this.transform.getFreeCameraOptions()}setFreeCameraOptions(f,_){const A=this.transform;if(!A.projection.supportsFreeCamera)return a.X(m1),this;this.stop();const D=A.zoom,L=A.pitch,B=A.bearing;A.setFreeCameraOptions(f);const N=D!==A.zoom,W=L!==A.pitch,X=B!==A.bearing;return this.fire(new a.a8("movestart",_)).fire(new a.a8("move",_)),N&&this.fire(new a.a8("zoomstart",_)).fire(new a.a8("zoom",_)).fire(new a.a8("zoomend",_)),X&&this.fire(new a.a8("rotatestart",_)).fire(new a.a8("rotate",_)).fire(new a.a8("rotateend",_)),W&&this.fire(new a.a8("pitchstart",_)).fire(new a.a8("pitch",_)).fire(new a.a8("pitchend",_)),this.fire(new a.a8("moveend",_)),this}easeTo(f,_){this._stop(!1,f.easeId),((f=a.ak({offset:[0,0],duration:500,easing:a.cG},f)).animate===!1||this._prefersReducedMotion(f))&&(f.duration=0);const A=this.transform,D=this.getZoom(),L=this.getBearing(),B=this.getPitch(),N=this.getPadding(),W="zoom"in f?+f.zoom:D,X="bearing"in f?this._normalizeBearing(f.bearing,L):L,J="pitch"in f?+f.pitch:B,te="padding"in f?f.padding:A.padding,oe=a.P.convert(f.offset);let le,de,pe;if(A.projection.name==="globe"){const Ne=a.M.fromLngLat(A.center),Ye=oe.rotate(-A.angle);Ne.x+=Ye.x/A.worldSize,Ne.y+=Ye.y/A.worldSize;const Ct=Ne.toLngLat(),ct=a.L.convert(f.center||Ct);this._normalizeCenter(ct),le=A.centerPoint.add(Ye),de=new a.P(Ne.x,Ne.y).mult(A.worldSize),pe=new a.P(a.E(ct.lng),a.H(ct.lat)).mult(A.worldSize).sub(de)}else{le=A.centerPoint.add(oe);const Ne=A.pointLocation(le),Ye=a.L.convert(f.center||Ne);this._normalizeCenter(Ye),de=A.project(Ne),pe=A.project(Ye).sub(de)}const fe=A.zoomScale(W-D);let he,we;f.around&&(he=a.L.convert(f.around),we=A.locationPoint(he));const Le=this._zooming||W!==D,Oe=this._rotating||L!==X,xe=this._pitching||J!==B,Te=!A.isPaddingEqual(te),ze=Ne=>Ye=>{if(Le&&(Ne.zoom=a.n(D,W,Ye)),Oe&&(Ne.bearing=a.n(L,X,Ye)),xe&&(Ne.pitch=a.n(B,J,Ye)),Te&&(Ne.interpolatePadding(N,te,Ye),le=Ne.centerPoint.add(oe)),he)Ne.setLocationAtPoint(he,we);else{const Ct=Ne.zoomScale(Ne.zoom-D),ct=W>D?Math.min(2,fe):Math.max(.5,fe),_t=Math.pow(ct,1-Ye),tt=Ne.unproject(de.add(pe.mult(Ye*_t)).mult(Ct));Ne.setLocationAtPoint(Ne.renderWorldCopies?tt.wrap():tt,le)}return f.preloadOnly||this._fireMoveEvents(_),Ne};if(f.preloadOnly){const Ne=this._emulate(ze,f.duration,A);return this._preloadTiles(Ne),this}const je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Le,this._rotating=Oe,this._pitching=xe,this._easeId=f.easeId,this._prepareEase(_,f.noMoveStart,je),this._ease(ze(A),Ne=>{A.cameraElevationReference==="sea"&&A.recenterOnTerrain(),this._afterEase(_,Ne)},f),this}_prepareEase(f,_,A={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),_||A.moving||this.fire(new a.a8("movestart",f)),this._zooming&&!A.zooming&&this.fire(new a.a8("zoomstart",f)),this._rotating&&!A.rotating&&this.fire(new a.a8("rotatestart",f)),this._pitching&&!A.pitching&&this.fire(new a.a8("pitchstart",f))}_fireMoveEvents(f){this.fire(new a.a8("move",f)),this._zooming&&this.fire(new a.a8("zoom",f)),this._rotating&&this.fire(new a.a8("rotate",f)),this._pitching&&this.fire(new a.a8("pitch",f))}_afterEase(f,_){if(this._easeId&&_&&this._easeId===_)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const A=this._zooming,D=this._rotating,L=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,A&&this.fire(new a.a8("zoomend",f)),D&&this.fire(new a.a8("rotateend",f)),L&&this.fire(new a.a8("pitchend",f)),this.fire(new a.a8("moveend",f))}flyTo(f,_){if(this._prefersReducedMotion(f)){const pt=a.p(f,["center","zoom","bearing","pitch","around"]);return this.jumpTo(pt,_)}this.stop(),f=a.ak({offset:[0,0],speed:1.2,curve:1.42,easing:a.cG},f);const A=this.transform,D=this.getZoom(),L=this.getBearing(),B=this.getPitch(),N="zoom"in f?a.c(+f.zoom,A.minZoom,A.maxZoom):D,W="bearing"in f?this._normalizeBearing(f.bearing,L):L,X="pitch"in f?+f.pitch:B,J=A.zoomScale(N-D),te=a.P.convert(f.offset),oe=A.centerPoint.add(te),le=A.pointLocation(oe);let de=f.center;if(de&&f.padding){const pt=this._cameraForBounds(this.transform,de,de,W,X,f);pt&&(de=pt.center)}de=a.L.convert(de||le),this._normalizeCenter(de);const pe=A.project(le),fe=A.project(de).sub(pe);let he=f.curve;const we=Math.max(A.width,A.height),Le=we/J,Oe=fe.mag();if("minZoom"in f){const pt=a.c(Math.min(f.minZoom,D,N),A.minZoom,A.maxZoom),Dt=we/A.zoomScale(pt-D);he=Math.sqrt(Dt/Oe*2)}const xe=he*he;function Te(pt){const Dt=(Le*Le-we*we+(pt?-1:1)*xe*xe*Oe*Oe)/(2*(pt?Le:we)*xe*Oe);return Math.log(Math.sqrt(Dt*Dt+1)-Dt)}function ze(pt){return(Math.exp(pt)-Math.exp(-pt))/2}function je(pt){return(Math.exp(pt)+Math.exp(-pt))/2}const Ne=Te(0);let Ye=function(pt){return je(Ne)/je(Ne+he*pt)},Ct=function(pt){return we*((je(Ne)*(ze(Dt=Ne+he*pt)/je(Dt))-ze(Ne))/xe)/Oe;var Dt},ct=(Te(1)-Ne)/he;if(Math.abs(Oe)<1e-6||!isFinite(ct)){if(Math.abs(we-Le)<1e-6)return this.easeTo(f,_);const pt=Le<we?-1:1;ct=Math.abs(Math.log(Le/we))/he,Ct=function(){return 0},Ye=function(Dt){return Math.exp(pt*he*Dt)}}f.duration="duration"in f?+f.duration:1e3*ct/("screenSpeed"in f?+f.screenSpeed/he:+f.speed),f.maxDuration&&f.duration>f.maxDuration&&(f.duration=0);const _t=L!==W,tt=X!==B,Mt=pt=>Dt=>{const Ee=Dt*ct,at=1/Ye(Ee);pt.zoom=Dt===1?N:D+pt.scaleZoom(at),_t&&(pt.bearing=a.n(L,W,Dt)),tt&&(pt.pitch=a.n(B,X,Dt));const Ft=Dt===1?de:pt.unproject(pe.add(fe.mult(Ct(Ee))).mult(at));return pt.setLocationAtPoint(pt.renderWorldCopies?Ft.wrap():Ft,oe),pt._updateCameraOnTerrain(),f.preloadOnly||this._fireMoveEvents(_),pt};if(f.preloadOnly){const pt=this._emulate(Mt,f.duration,A);return this._preloadTiles(pt),this}return this._zooming=!0,this._rotating=_t,this._pitching=tt,this._prepareEase(_,!1),this._ease(Mt(A),()=>this._afterEase(_),f),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(f,_){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const A=this._onEaseEnd;this._onEaseEnd=void 0,A.call(this,_)}if(!f){const A=this.handlers;A&&A.stop(!1)}return this}_ease(f,_,A){A.animate===!1||A.duration===0?(f(1),_()):(this._easeStart=a.a4.now(),this._easeOptions=A,this._onEaseFrame=f,this._onEaseEnd=_,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const f=Math.min((a.a4.now()-this._easeStart)/this._easeOptions.duration,1),_=this._onEaseFrame;_&&_(this._easeOptions.easing(f)),f<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(f,_){f=a.w(f,-180,180);const A=Math.abs(f-_);return Math.abs(f-360-_)<A&&(f-=360),Math.abs(f+360-_)<A&&(f+=360),f}_normalizeCenter(f){const _=this.transform;if(_.maxBounds||_.projection.name!=="globe"&&!_.renderWorldCopies)return;const A=f.lng-_.center.lng;f.lng+=A>180?-360:A<-180?360:0}_prefersReducedMotion(f){return this._respectPrefersReducedMotion&&a.a4.prefersReducedMotion&&!(f&&f.essential)}_emulate(f,_,A){const D=Math.ceil(15*_/1e3),L=[],B=f(A.clone());for(let N=0;N<=D;N++){const W=B(N/D);L.push(W.clone())}return L}}class b_{constructor(f={}){this.options=f,a.aR(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(f){const _=this.options&&this.options.compact;return this._map=f,this._container=x("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=x("button","mapboxgl-ctrl-attrib-button",this._container),x("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=x("div","mapboxgl-ctrl-attrib-inner",this._container),_&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),_===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(f,_){const A=this._map._getUIString(`AttributionControl.${_}`);f.removeAttribute("title"),f.firstElementChild&&f.firstElementChild.setAttribute("title",A)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let f=this._editLink;f||(f=this._editLink=this._container.querySelector(".mapbox-improve-map"));const _=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.cM.ACCESS_TOKEN}];if(f){const A=_.reduce((D,L,B)=>(L.value&&(D+=`${L.key}=${L.value}${B<_.length-1?"&":""}`),D),"?");f.href=`${a.cM.FEEDBACK_URL}/${A}#${yu(this._map,!0)}`,f.rel="noopener nofollow",this._setElementTitle(f,"MapFeedback")}}_updateData(f){!f||f.sourceDataType!=="metadata"&&f.sourceDataType!=="visibility"&&f.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let f=[];if(this._map.style.stylesheet){const D=this._map.style.stylesheet;this.styleOwner=D.owner,this.styleId=D.id}const _=this._map.style._mergedSourceCaches;for(const D in _){const L=_[D];if(L.used){const B=L.getSource();B.attribution&&f.indexOf(B.attribution)<0&&f.push(B.attribution)}}f.sort((D,L)=>D.length-L.length),f=f.filter((D,L)=>{for(let B=L+1;B<f.length;B++)if(f[B].indexOf(D)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?f=[...this.options.customAttribution,...f]:f.unshift(this.options.customAttribution));const A=f.join(" | ");A!==this._attribHTML&&(this._attribHTML=A,f.length?(this._innerContainer.innerHTML=A,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class w_{constructor(){a.aR(["_updateLogo","_updateCompact"],this)}onAdd(f){this._map=f,this._container=x("div","mapboxgl-ctrl");const _=x("a","mapboxgl-ctrl-logo");return _.target="_blank",_.rel="noopener nofollow",_.href="https://www.mapbox.com/",_.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),_.setAttribute("rel","noopener nofollow"),this._container.appendChild(_),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(f){f&&f.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const f=this._map.style._sourceCaches;if(Object.entries(f).length===0)return!0;for(const _ in f){const A=f[_].getSource();if(A.hasOwnProperty("mapbox_logo")&&!A.mapbox_logo)return!1}return!0}_updateCompact(){const f=this._container.children;if(f.length){const _=f[0];this._map.getCanvasContainer().offsetWidth<250?_.classList.add("mapboxgl-compact"):_.classList.remove("mapboxgl-compact")}}}class S_{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(f){const _=++this._id;return this._queue.push({callback:f,id:_,cancelled:!1}),_}remove(f){const _=this._currentlyRunning,A=_?this._queue.concat(_):this._queue;for(const D of A)if(D.id===f)return void(D.cancelled=!0)}run(f=0){const _=this._currentlyRunning=this._queue;this._queue=[];for(const A of _)if(!A.cancelled&&(A.callback(f),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function T_(S,f,_){if(S=new a.L(S.lng,S.lat),f){const A=new a.L(S.lng-360,S.lat),D=new a.L(S.lng+360,S.lat),L=360*Math.ceil(Math.abs(S.lng-_.center.lng)/360),B=_.locationPoint(S).distSqr(f),N=f.x<0||f.y<0||f.x>_.width||f.y>_.height;_.locationPoint(A).distSqr(f)<B&&(N||Math.abs(A.lng-_.center.lng)<L)?S=A:_.locationPoint(D).distSqr(f)<B&&(N||Math.abs(D.lng-_.center.lng)<L)&&(S=D)}for(;Math.abs(S.lng-_.center.lng)>180;){const A=_.locationPoint(S);if(A.x>=0&&A.y>=0&&A.x<=_.width&&A.y<=_.height)break;S.lng>_.center.lng?S.lng-=360:S.lng+=360}return S}const Fm={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class ea extends a.a6{constructor(f,_){if(super(),(f instanceof HTMLElement||_)&&(f=a.ak({element:f},_)),a.aR(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=f&&f.anchor||"center",this._color=f&&f.color||"#3FB1CE",this._scale=f&&f.scale||1,this._draggable=f&&f.draggable||!1,this._clickTolerance=f&&f.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=f&&f.rotation||0,this._rotationAlignment=f&&f.rotationAlignment||"auto",this._pitchAlignment=f&&f.pitchAlignment&&f.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=f&&f.occludedOpacity||.2,f&&f.element)this._element=f.element,this._offset=a.P.convert(f&&f.offset||[0,0]);else{this._defaultMarker=!0,this._element=x("div");const L=41,B=27,N=w("svg",{display:"block",height:L*this._scale+"px",width:B*this._scale+"px",viewBox:`0 0 ${B} ${L}`},this._element),W=w("radialGradient",{id:"shadowGradient"},w("defs",{},N));w("stop",{offset:"10%","stop-opacity":.4},W),w("stop",{offset:"100%","stop-opacity":.05},W),w("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},N),w("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},N),w("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},N),w("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},N),this._offset=a.P.convert(f&&f.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",L=>{L.preventDefault()}),this._element.addEventListener("mousedown",L=>{L.preventDefault()});const A=this._element.classList;for(const L in Fm)A.remove(`mapboxgl-marker-anchor-${L}`);A.add(`mapboxgl-marker-anchor-${this._anchor}`);const D=f&&f.className?f.className.trim().split(/\s+/):[];A.add(...D),this._popup=null}addTo(f){return f===this._map||(this.remove(),this._map=f,f.getCanvasContainer().appendChild(this._element),f.on("move",this._updateMoving),f.on("moveend",this._update),f.on("remove",this._clearFadeTimer),f._addMarker(this),this.setDraggable(this._draggable),this._update(),f.on("click",this._onMapClick)),this}remove(){const f=this._map;return f&&(f.off("click",this._onMapClick),f.off("move",this._updateMoving),f.off("moveend",this._update),f.off("mousedown",this._addDragHandler),f.off("touchstart",this._addDragHandler),f.off("mouseup",this._onUp),f.off("touchend",this._onUp),f.off("mousemove",this._onMove),f.off("touchmove",this._onMove),f.off("remove",this._clearFadeTimer),f._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=a.L.convert(f),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(f){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),f){if(!("offset"in f.options)){const D=Math.sqrt(Math.pow(13.5,2)/2);f.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[D,-1*(38.1-13.5+D)],"bottom-right":[-D,-1*(38.1-13.5+D)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=f,f._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(f){const _=f.code,A=f.charCode||f.keyCode;_!=="Space"&&_!=="Enter"&&A!==32&&A!==13||this.togglePopup()}_onMapClick(f){const _=f.originalEvent.target,A=this._element;this._popup&&(_===A||A.contains(_))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const f=this._popup;return f?(f.isOpen()?(f.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(f.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const f=this._map,_=this._pos;if(!f||!_)return!1;const A=f.unproject(_),D=f.getFreeCameraOptions();if(!D.position)return!1;const L=D.position.toLngLat();return L.distanceTo(A)<.9*L.distanceTo(this._lngLat)}_evaluateOpacity(){const f=this._map;if(!f)return;const _=this._pos;if(!_||_.x<0||_.x>f.transform.width||_.y<0||_.y>f.transform.height)return void this._clearFadeTimer();const A=f.unproject(_);let D;f._showingGlobe()&&a.cN(f.transform,this._lngLat)?D=0:(D=1-f._queryFogOpacity(A),f.transform._terrainEnabled()&&f.getTerrain()&&this._behindTerrain()&&(D*=this._occludedOpacity)),this._element.style.opacity=`${D}`,this._element.style.pointerEvents=D>0?"auto":"none",this._popup&&this._popup._setOpacity(D),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const f=this._pos;if(!f||!this._map)return;const _=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${f.x}px,${f.y}px)
            ${Fm[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${_.x}px,${_.y}px)
        `}_calculateXYTransform(){const f=this._pos,_=this._map,A=this.getPitchAlignment();if(!_||!f||A!=="map")return"";if(!_._showingGlobe()){const W=_.getPitch();return W?`rotateX(${W}deg)`:""}const D=a.Y(a.cO(_.transform,this._lngLat)),L=f.sub(a.cP(_.transform)),B=Math.abs(L.x)+Math.abs(L.y);if(B===0)return"";const N=D/B;return`rotateX(${-L.y*N}deg) rotateY(${L.x*N}deg)`}_calculateZTransform(){const f=this._pos,_=this._map;if(!_||!f)return"";let A=0;const D=this.getRotationAlignment();if(D==="map")if(_._showingGlobe()){const L=_.project(new a.L(this._lngLat.lng,this._lngLat.lat+.001)),B=_.project(new a.L(this._lngLat.lng,this._lngLat.lat-.001)).sub(L);A=a.Y(Math.atan2(B.y,B.x))-90}else A=-_.getBearing();else if(D==="horizon"){const L=a.an(4,6,_.getZoom()),B=a.cP(_.transform);B.y+=L*_.transform.height;const N=f.sub(B),W=a.Y(Math.atan2(N.y,N.x));A=(W>90?W-270:W+90)*(1-L)}return A+=this._rotation,A?`rotateZ(${A}deg)`:""}_update(f){cancelAnimationFrame(this._updateFrameId);const _=this._map;_&&(_.transform.renderWorldCopies&&(this._lngLat=T_(this._lngLat,this._pos,_.transform)),this._pos=_.project(this._lngLat),f===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),_._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(_._showingGlobe()||_.getTerrain()||_.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(f){return this._offset=a.P.convert(f),this._update(),this}addClassName(f){return this._element.classList.add(f),this}removeClassName(f){return this._element.classList.remove(f),this}toggleClassName(f){return this._element.classList.toggle(f)}_onMove(f){const _=this._map;if(!_)return;const A=this._pointerdownPos,D=this._positionDelta;if(A&&D){if(!this._isDragging){const L=this._clickTolerance||_._clickTolerance;if(f.point.dist(A)<L)return;this._isDragging=!0}this._pos=f.point.sub(D),this._lngLat=_.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.a8("dragstart"))),this.fire(new a.a8("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const f=this._map;f&&(f.off("mousemove",this._onMove),f.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new a.a8("dragend")),this._state="inactive"}_addDragHandler(f){const _=this._map,A=this._pos;_&&A&&this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(A),this._pointerdownPos=f.point,this._state="pending",_.on("mousemove",this._onMove),_.on("touchmove",this._onMove),_.once("mouseup",this._onUp),_.once("touchend",this._onUp))}setDraggable(f){this._draggable=!!f;const _=this._map;return _&&(f?(_.on("mousedown",this._addDragHandler),_.on("touchstart",this._addDragHandler)):(_.off("mousedown",this._addDragHandler),_.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(f){return this._rotation=f||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(f){return this._rotationAlignment=f||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(f){return this._pitchAlignment=f||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(f){return this._occludedOpacity=f||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const B2={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},v1=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function M_(S=new a.P(0,0),f="bottom"){if(typeof S=="number"){const _=Math.round(Math.sqrt(.5*Math.pow(S,2)));switch(f){case"top":return new a.P(0,S);case"top-left":return new a.P(_,_);case"top-right":return new a.P(-_,_);case"bottom":return new a.P(0,-S);case"bottom-left":return new a.P(_,-_);case"bottom-right":return new a.P(-_,-_);case"left":return new a.P(S,0);case"right":return new a.P(-S,0)}return new a.P(0,0)}return S instanceof a.P||Array.isArray(S)?a.P.convert(S):a.P.convert(S[f]||[0,0])}class F2{constructor(f){this.jumpTo(f)}getValue(f){if(f<=this._startTime)return this._start;if(f>=this._endTime)return this._end;const _=a.ba((f-this._startTime)/(this._endTime-this._startTime));return this._start*(1-_)+this._end*_}isEasing(f){return f>=this._startTime&&f<=this._endTime}jumpTo(f){this._startTime=-1/0,this._endTime=-1/0,this._start=f,this._end=f}easeTo(f,_,A){this._start=this.getValue(_),this._end=f,this._startTime=_,this._endTime=_+A}}const N2={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},xs={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1};class _1{constructor(){this.showOverdrawInspector=!1,this.showTileBoundaries=!1,this.continuousRedraw=!1,this.showTerrainWireframe=!1,this.showLayers2DWireframe=!1,this.showLayers3DWireframe=!1}}const V2={showCompass:!0,showZoom:!0,visualizePitch:!1};class wu{constructor(f,_,A=!1){this._clickTolerance=10,this.element=_,this.mouseRotate=new v_({clickTolerance:f.dragRotate._mouseRotate._clickTolerance}),this.map=f,A&&(this.mousePitch=new __({clickTolerance:f.dragRotate._mousePitch._clickTolerance})),a.aR(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),_.addEventListener("mousedown",this.mousedown),_.addEventListener("touchstart",this.touchstart,{passive:!1}),_.addEventListener("touchmove",this.touchmove),_.addEventListener("touchend",this.touchend),_.addEventListener("touchcancel",this.reset)}down(f,_){this.mouseRotate.mousedown(f,_),this.mousePitch&&this.mousePitch.mousedown(f,_),k()}move(f,_){const A=this.map,D=this.mouseRotate.mousemoveWindow(f,_),L=D&&D.bearingDelta;if(L&&A.setBearing(A.getBearing()+L),this.mousePitch){const B=this.mousePitch.mousemoveWindow(f,_),N=B&&B.pitchDelta;N&&A.setPitch(A.getPitch()+N)}}off(){const f=this.element;f.removeEventListener("mousedown",this.mousedown),f.removeEventListener("touchstart",this.touchstart,{passive:!1}),f.removeEventListener("touchmove",this.touchmove),f.removeEventListener("touchend",this.touchend),f.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){R(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(f){this.down(a.ak({},f,{ctrlKey:!0,preventDefault:()=>f.preventDefault()}),j(this.element,f)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(f){this.move(f,j(this.element,f))}mouseup(f){this.mouseRotate.mouseupWindow(f),this.mousePitch&&this.mousePitch.mouseupWindow(f),this.offTemp()}touchstart(f){f.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=G(this.element,f.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>f.preventDefault()},this._startPos))}touchmove(f){f.targetTouches.length!==1?this.reset():(this._lastPos=G(this.element,f.targetTouches)[0],this.move({preventDefault:()=>f.preventDefault()},this._lastPos))}touchend(f){f.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const qs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Ph={maxWidth:100,unit:"metric"},Nm={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"};return{version:a.c$,supported:p,setRTLTextPlugin:a.d1,getRTLTextPluginStatus:a.d2,Map:class extends g1{constructor(S){const f=S;if((S=a.ak({},xs,S)).minZoom!=null&&S.maxZoom!=null&&S.minZoom>S.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(S.minPitch!=null&&S.maxPitch!=null&&S.minPitch>S.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(S.minPitch!=null&&S.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(S.maxPitch!=null&&S.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(S.antialias&&a.cQ(window)&&(S.antialias=!1,a.X("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ri(S.minZoom,S.maxZoom,S.minPitch,S.maxPitch,S.renderWorldCopies),S),this._repaint=!1,this._interactive=S.interactive,this._minTileCacheSize=S.minTileCacheSize,this._maxTileCacheSize=S.maxTileCacheSize,this._failIfMajorPerformanceCaveat=S.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=S.preserveDrawingBuffer,this._antialias=S.antialias,this._trackResize=S.trackResize,this._bearingSnap=S.bearingSnap,this._refreshExpiredTiles=S.refreshExpiredTiles,this._fadeDuration=S.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=S.crossSourceCollisions,this._collectResourceTiming=S.collectResourceTiming,this._language=this._parseLanguage(S.language),this._worldview=S.worldview,this._renderTaskQueue=new S_,this._domRenderTaskQueue=new S_,this._controls=[],this._markers=[],this._popups=[],this._mapId=a.cR(),this._locale=a.ak({},N2,S.locale),this._clickTolerance=S.clickTolerance,this._cooperativeGestures=S.cooperativeGestures,this._performanceMetricsCollection=S.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new F2(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new a.cS(S.transformRequest,S.accessToken,S.testMode),this._silenceAuthErrors=!!S.testMode,this._contextCreateOptions=S.contextCreateOptions?{...S.contextCreateOptions}:{},typeof S.container=="string"){const _=document.getElementById(S.container);if(!_)throw new Error(`Container '${S.container.toString()}' not found.`);this._container=_}else{if(!(S.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=S.container}if(this._container.childNodes.length>0&&a.X("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),S.maxBounds&&this.setMaxBounds(S.maxBounds),a.aR(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._debugParams=new _1,this._tp=S.devtools?new Kx(this):new Kx,this._tp.registerParameter(this._debugParams,["Debug"],"showOverdrawInspector",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"showTileBoundaries",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"continuousRedraw",void 0,_=>{this.repaint=_}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showTerrainWireframe",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showLayers2DWireframe",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showLayers3DWireframe",void 0,()=>{this._update()}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new p1(this,S),this._localFontFamily=S.localFontFamily,this._localIdeographFontFamily=S.localIdeographFontFamily,(S.style||!S.testMode)&&this.setStyle(S.style||a.cM.DEFAULT_STYLE,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),S.projection&&this.setProjection(S.projection),S.hash&&(this._hash=new i1(typeof S.hash=="string"&&S.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){f.center==null&&f.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:S.center,zoom:S.zoom,bearing:S.bearing,pitch:S.pitch});const _=S.bounds;_&&(this.resize(),this.fitBounds(_,a.ak({},S.fitBoundsOptions,{duration:0})))}this.resize(),S.attributionControl&&this.addControl(new b_({customAttribution:S.customAttribution})),this._logoControl=new w_,this.addControl(this._logoControl,S.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",_=>{this._update(_.dataType==="style"),this.fire(new a.a8(`${_.dataType}data`,_))}),this.on("dataloading",_=>{this.fire(new a.a8(`${_.dataType}dataloading`,_))})}_getMapId(){return this._mapId}addControl(S,f){if(f===void 0&&(f=S.getDefaultPosition?S.getDefaultPosition():"top-right"),!S||!S.onAdd)return this.fire(new a.a7(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const _=S.onAdd(this);this._controls.push(S);const A=this._controlPositions[f];return f.indexOf("bottom")!==-1?A.insertBefore(_,A.firstChild):A.appendChild(_),this}removeControl(S){if(!S||!S.onRemove)return this.fire(new a.a7(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const f=this._controls.indexOf(S);return f>-1&&this._controls.splice(f,1),S.onRemove(this),this}hasControl(S){return this._controls.indexOf(S)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(S){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const f=!this._moving;return f&&this.fire(new a.a8("movestart",S)).fire(new a.a8("move",S)),this.fire(new a.a8("resize",S)),f&&this.fire(new a.a8("moveend",S)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(S){return this.transform.setMaxBounds(a.D.convert(S)),this._update()}setMinZoom(S){if((S=S==null?-2:S)>=-2&&S<=this.transform.maxZoom)return this.transform.minZoom=S,this._update(),this.getZoom()<S?this.setZoom(S):this.fire(new a.a8("zoomstart")).fire(new a.a8("zoom")).fire(new a.a8("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(S){if((S=S==null?22:S)>=this.transform.minZoom)return this.transform.maxZoom=S,this._update(),this.getZoom()>S?this.setZoom(S):this.fire(new a.a8("zoomstart")).fire(new a.a8("zoom")).fire(new a.a8("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(S){if((S=S==null?0:S)<0)throw new Error("minPitch must be greater than or equal to 0");if(S>=0&&S<=this.transform.maxPitch)return this.transform.minPitch=S,this._update(),this.getPitch()<S?this.setPitch(S):this.fire(new a.a8("pitchstart")).fire(new a.a8("pitch")).fire(new a.a8("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(S){if((S=S==null?85:S)>85)throw new Error("maxPitch must be less than or equal to 85");if(S>=this.transform.minPitch)return this.transform.maxPitch=S,this._update(),this.getPitch()>S?this.setPitch(S):this.fire(new a.a8("pitchstart")).fire(new a.a8("pitch")).fire(new a.a8("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(S){return this.transform.renderWorldCopies=S,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(S){return S==="auto"?navigator.language:Array.isArray(S)?S.length===0?void 0:S.map(f=>f==="auto"?navigator.language:f):S}setLanguage(S){const f=this._parseLanguage(S);if(!this.style||f===this._language)return this;this._language=f,this.style.reloadSources();for(const _ of this._controls)_._setLanguage&&_._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(S){return this.style&&S!==this._worldview?(this._worldview=S,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(S){return this._lazyInitEmptyStyle(),S?typeof S=="string"&&(S={name:S}):S=null,this._useExplicitProjection=!!S,this._prioritizeAndUpdateProjection(S,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const S=this.transform,f=S.projection.name;let _;f==="globe"&&S.zoom>=a.G?(S.setMercatorFromTransition(),_=!0):f==="mercator"&&S.zoom<a.G&&(S.setProjection({name:"globe"}),_=!0),_&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(S,f){return this._updateProjection(S||f||{name:"mercator"})}_updateProjection(S){let f;return f=S.name==="globe"&&this.transform.zoom>=a.G?this.transform.setMercatorFromTransition():this.transform.setProjection(S),this.style.applyProjectionUpdate(),f&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(S){return this.transform.locationPoint3D(a.L.convert(S))}unproject(S){return this.transform.pointLocation3D(a.P.convert(S))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(S,f,_){if(S==="mouseenter"||S==="mouseover"){let A=!1;const D=B=>{const N=f.filter(X=>this.getLayer(X)),W=N.length?this.queryRenderedFeatures(B.point,{layers:N}):[];W.length?A||(A=!0,_.call(this,new Io(S,this,B.originalEvent,{features:W}))):A=!1},L=()=>{A=!1};return{layers:new Set(f),listener:_,delegates:{mousemove:D,mouseout:L}}}if(S==="mouseleave"||S==="mouseout"){let A=!1;const D=B=>{const N=f.filter(W=>this.getLayer(W));(N.length?this.queryRenderedFeatures(B.point,{layers:N}):[]).length?A=!0:A&&(A=!1,_.call(this,new Io(S,this,B.originalEvent)))},L=B=>{A&&(A=!1,_.call(this,new Io(S,this,B.originalEvent)))};return{layers:new Set(f),listener:_,delegates:{mousemove:D,mouseout:L}}}{const A=D=>{const L=f.filter(N=>this.getLayer(N)),B=L.length?this.queryRenderedFeatures(D.point,{layers:L}):[];B.length&&(D.features=B,_.call(this,D),delete D.features)};return{layers:new Set(f),listener:_,delegates:{[S]:A}}}}on(S,f,_){if(_===void 0)return super.on(S,f);if(Array.isArray(f)||(f=[f]),f){for(const D of f)if(!this._isValidId(D))return this}const A=this._createDelegatedListener(S,f,_);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[S]=this._delegatedListeners[S]||[],this._delegatedListeners[S].push(A);for(const D in A.delegates)this.on(D,A.delegates[D]);return this}once(S,f,_){if(_===void 0)return super.once(S,f);if(Array.isArray(f)||(f=[f]),f){for(const D of f)if(!this._isValidId(D))return this}const A=this._createDelegatedListener(S,f,_);for(const D in A.delegates)this.once(D,A.delegates[D]);return this}off(S,f,_){if(_===void 0)return super.off(S,f);f=new Set(Array.isArray(f)?f:[f]);for(const L of f)if(!this._isValidId(L))return this;const A=(L,B)=>{if(L.size!==B.size)return!1;for(const N of L)if(!B.has(N))return!1;return!0},D=this._delegatedListeners?this._delegatedListeners[S]:void 0;return D&&(L=>{for(let B=0;B<L.length;B++){const N=L[B];if(N.listener===_&&A(N.layers,f)){for(const W in N.delegates)this.off(W,N.delegates[W]);return L.splice(B,1),this}}})(D),this}queryRenderedFeatures(S,f){if(!this.style)return[];if(f!==void 0||S===void 0||S instanceof a.P||Array.isArray(S)||(f=S,S=void 0),S=S||[[0,0],[this.transform.width,this.transform.height]],(f=f||{}).layers&&Array.isArray(f.layers)){for(const _ of f.layers)if(!this._isValidId(_))return[]}return this.style.queryRenderedFeatures(S,f,this.transform)}querySourceFeatures(S,f){return this._isValidId(S)?this.style.querySourceFeatures(S,f):[]}isPointOnSurface(S){const{name:f}=this.transform.projection;return f!=="globe"&&f!=="mercator"&&a.X(`${f} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(a.P.convert(S))}setStyle(S,f){return(f=a.ak({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},f)).diff!==!1&&f.localIdeographFontFamily===this._localIdeographFontFamily&&f.localFontFamily===this._localFontFamily&&this.style&&S?(this._diffStyle(S,f),this):(this._localIdeographFontFamily=f.localIdeographFontFamily,this._localFontFamily=f.localFontFamily,this._updateStyle(S,f))}_getUIString(S){const f=this._locale[S];if(f==null)throw new Error(`Missing UI string '${S}'`);return f}_updateStyle(S,f){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),S&&(this.style=new Zo(this,f||{}),this.style.setEventedParent(this,{style:this.style}),typeof S=="string"?this.style.loadURL(S):this.style.loadJSON(S)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Zo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(S,f){if(typeof S=="string"){const _=this._requestManager.normalizeStyleURL(S),A=this._requestManager.transformRequest(_,a.a2.Style);a.a1(A,(D,L)=>{D?this.fire(new a.a7(D)):L&&this._updateDiff(L,f)})}else typeof S=="object"&&this._updateDiff(S,f)}_updateDiff(S,f){try{this.style.setState(S)&&this._update(!0)}catch(_){a.X(`Unable to perform style diff: ${_.message||_.error||_}.  Rebuilding the style from scratch.`),this._updateStyle(S,f)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(a.X("There is no style added to the map."),!1)}_isValidId(S){return S==null?(this.fire(new a.a7(new Error("IDs can't be empty."))),!1):!a.cu(S)||(this.fire(new a.a7(new Error(`IDs can't contain special symbols: "${S}".`))),!1)}addSource(S,f){return this._isValidId(S)?(this._lazyInitEmptyStyle(),this.style.addSource(S,f),this._update(!0)):this}isSourceLoaded(S){return!!this._isValidId(S)&&!!this.style&&this.style._isSourceCacheLoaded(S)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(S,f,_){this._lazyInitEmptyStyle(),this.style.addSourceType(S,f,_)}removeSource(S){return this._isValidId(S)?(this.style.removeSource(S),this._updateTerrain(),this._update(!0)):this}getSource(S){return this._isValidId(S)?this.style.getOwnSource(S):null}addImage(S,f,{pixelRatio:_=1,sdf:A=!1,stretchX:D,stretchY:L,content:B}={}){if(this._lazyInitEmptyStyle(),f instanceof HTMLImageElement||ImageBitmap&&f instanceof ImageBitmap){const{width:N,height:W,data:X}=a.a4.getImageData(f);this.style.addImage(S,{data:new a.a5({width:N,height:W},X),pixelRatio:_,stretchX:D,stretchY:L,content:B,sdf:A,version:0})}else if(f.width===void 0||f.height===void 0)this.fire(new a.a7(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:N,height:W}=f,X=f;this.style.addImage(S,{data:new a.a5({width:N,height:W},new Uint8Array(X.data)),pixelRatio:_,stretchX:D,stretchY:L,content:B,sdf:A,version:0,userImage:X}),X.onAdd&&X.onAdd(this,S)}}updateImage(S,f){this._lazyInitEmptyStyle();const _=this.style.getImage(S);if(!_)return void this.fire(new a.a7(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const A=f instanceof HTMLImageElement||ImageBitmap&&f instanceof ImageBitmap?a.a4.getImageData(f):f,{width:D,height:L}=A,B=A.data;if(D===void 0||L===void 0)return void this.fire(new a.a7(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(D!==_.data.width||L!==_.data.height)return void this.fire(new a.a7(new Error(`The width and height of the updated image (${D}, ${L})
                must be that same as the previous version of the image
                (${_.data.width}, ${_.data.height})`)));const N=!(f instanceof HTMLImageElement||ImageBitmap&&f instanceof ImageBitmap);_.data.replace(B,N),this.style.updateImage(S,_)}hasImage(S){return S?!!this.style&&!!this.style.getImage(S):(this.fire(new a.a7(new Error("Missing required image id"))),!1)}removeImage(S){this.style.removeImage(S)}loadImage(S,f){a.a3(this._requestManager.transformRequest(S,a.a2.Image),(_,A)=>{f(_,A instanceof HTMLImageElement?a.a4.getImageData(A):A)})}listImages(){return this.style.listImages()}addModel(S,f){this._lazyInitEmptyStyle(),this.style.addModel(S,f)}hasModel(S){return S?this.style.hasModel(S):(this.fire(new a.a7(new Error("Missing required model id"))),!1)}removeModel(S){this.style.removeModel(S)}listModels(){return this.style.listModels()}addLayer(S,f){return this._isValidId(S.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(S,f),this._update(!0)):this}moveLayer(S,f){return this._isValidId(S)?(this.style.moveLayer(S,f),this._update(!0)):this}removeLayer(S){return this._isValidId(S)?(this.style.removeLayer(S),this._update(!0)):this}getLayer(S){return this._isValidId(S)?this.style.getOwnLayer(S):null}setLayerZoomRange(S,f,_){return this._isValidId(S)?(this.style.setLayerZoomRange(S,f,_),this._update(!0)):this}setFilter(S,f,_={}){return this._isValidId(S)?(this.style.setFilter(S,f,_),this._update(!0)):this}getFilter(S){return this._isValidId(S)?this.style.getFilter(S):null}setPaintProperty(S,f,_,A={}){return this._isValidId(S)?(this.style.setPaintProperty(S,f,_,A),this._update(!0)):this}getPaintProperty(S,f){return this._isValidId(S)?this.style.getPaintProperty(S,f):null}setLayoutProperty(S,f,_,A={}){return this._isValidId(S)?(this.style.setLayoutProperty(S,f,_,A),this._update(!0)):this}getLayoutProperty(S,f){return this._isValidId(S)?this.style.getLayoutProperty(S,f):null}getConfigProperty(S,f){return this.style.getConfigProperty(S,f)}setConfigProperty(S,f,_){return this.style.setConfigProperty(S,f,_),this._update(!0)}setLights(S){if(this._lazyInitEmptyStyle(),S&&S.length===1&&S[0].type==="flat"){const f=S[0];f.properties?this.style.setFlatLight(f.properties,f.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(S),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const S=this.style.getLights()||[];return S.length===0&&S.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),S}setLight(S,f={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:S}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(S){return this._lazyInitEmptyStyle(),!S&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(S),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(S){return this._lazyInitEmptyStyle(),this.style.setFog(S),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setCamera(S){return this.style.setCamera(S),this._triggerCameraUpdate(S)}_triggerCameraUpdate(S){return this._update(this.transform.setOrthographicProjectionAtLowPitch(S["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(S){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(a.L.convert(S),this.transform):0}setFeatureState(S,f){return this._isValidId(S.source)?(this.style.setFeatureState(S,f),this._update()):this}removeFeatureState(S,f){return this._isValidId(S.source)?(this.style.removeFeatureState(S,f),this._update()):this}getFeatureState(S){return this._isValidId(S.source)?this.style.getFeatureState(S):null}_updateContainerDimensions(){if(!this._container)return;const S=this._container.getBoundingClientRect().width||400,f=this._container.getBoundingClientRect().height||300;let _,A,D,L=this._container;for(;L&&(!A||!D);){const B=window.getComputedStyle(L).transform;B&&B!=="none"&&(_=B.match(/matrix.*\((.+)\)/)[1].split(", "),_[0]&&_[0]!=="0"&&_[0]!=="1"&&(A=_[0]),_[3]&&_[3]!=="0"&&_[3]!=="1"&&(D=_[3])),L=L.parentElement}this._containerWidth=A?Math.abs(S/A):S,this._containerHeight=D?Math.abs(f/D):f}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.X("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const S=this._container;S.classList.add("mapboxgl-map"),(this._missingCSSCanary=x("div","mapboxgl-canary",S)).style.visibility="hidden",this._detectMissingCSS();const f=this._canvasContainer=x("div","mapboxgl-canvas-container",S);this._canvas=x("canvas","mapboxgl-canvas",f),this._interactive&&(f.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const _=this._controlContainer=x("div","mapboxgl-control-container",S),A=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(D=>{A[D]=x("div",`mapboxgl-ctrl-${D}`,_)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(S,f){const _=a.a4.devicePixelRatio||1;this._canvas.width=_*Math.ceil(S),this._canvas.height=_*Math.ceil(f),this._canvas.style.width=`${S}px`,this._canvas.style.height=`${f}px`}_addMarker(S){this._markers.push(S)}_removeMarker(S){const f=this._markers.indexOf(S);f!==-1&&this._markers.splice(f,1)}_addPopup(S){this._popups.push(S)}_removePopup(S){const f=this._popups.indexOf(S);f!==-1&&this._popups.splice(f,1)}_setupPainter(){const S=a.ak({},p.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),f=this._canvas.getContext("webgl2",S);f?(a.cT(f,!0),this.painter=new P2(f,this._contextCreateOptions,this.transform,this._tp),this.on("data",_=>{_.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),a.cU.testSupport(f)):this.fire(new a.a7(new Error("Failed to initialize WebGL")))}_contextLost(S){S.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.a8("webglcontextlost",{originalEvent:S}))}_contextRestored(S){this._setupPainter(),this.resize(),this._update(),this.fire(new a.a8("webglcontextrestored",{originalEvent:S}))}_onMapScroll(S){if(S.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(S){return this.style?(this._styleDirty=this._styleDirty||S,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(S){return this._update(),this._renderTaskQueue.add(S)}_cancelRenderFrame(S){this._renderTaskQueue.remove(S)}_requestDomTask(S){!this.loaded()||this.loaded()&&!this.isMoving()?S():this._domRenderTaskQueue.add(S)}_render(S){let f;this.fire(new a.a8("renderstart"));const _=this.painter.context.extTimerQuery,A=a.a4.now(),D=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(f=D.createQuery(),D.beginQuery(_.TIME_ELAPSED_EXT,f)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(S),this._domRenderTaskQueue.run(S),this._removed)return;this._updateProjectionTransition();const L=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const W=this.transform.zoom,X=this.transform.pitch,J=a.a4.now(),te=new a.al(W,{now:J,fadeDuration:L,pitch:X,transition:this.style.transition});this.style.update(te)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let B=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),B=this._updateAverageElevation(A),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):B=this._updateAverageElevation(A),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,L,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries||this._debugParams.showTileBoundaries,wireframe:{terrain:this.showTerrainWireframe||this._debugParams.showTerrainWireframe,layers2D:this.showLayers2DWireframe||this._debugParams.showLayers2DWireframe,layers3D:this.showLayers3DWireframe||this._debugParams.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector||this._debugParams.showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:L,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new a.a8("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.a8("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),f){const W=a.a4.now()-A;D.endQuery(_.TIME_ELAPSED_EXT),setTimeout(()=>{const X=D.getQueryParameter(f,D.QUERY_RESULT)/1e6;D.deleteQuery(f),this.fire(new a.a8("gpu-timing-frame",{cpuTime:W,gpuTime:X}))},50)}if(this.listens("gpu-timing-layer")){const W=this.painter.collectGpuTimers();setTimeout(()=>{const X=this.painter.queryGpuTimers(W);this.fire(new a.a8("gpu-timing-layer",{layerTimes:X}))},50)}if(this.listens("gpu-timing-deferred-render")){const W=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const X=this.painter.queryGpuTimeDeferredRender(W);this.fire(new a.a8("gpu-timing-deferred-render",{gpuTime:X}))},50)}const N=this._sourcesDirty||this._styleDirty||this._placementDirty||B;if(N||this._repaint)this.triggerRepaint();else{const W=!this.isMoving()&&this.loaded();if(W&&(B=this._updateAverageElevation(A,!0)),B)this.triggerRepaint();else if(this._triggerFrame(!1),W&&(this.fire(new a.a8("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const X=this._calculateSpeedIndex();this.fire(new a.a8("speedindexcompleted",{speedIndex:X})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||N||(this._fullyLoaded=!0,this._performanceMetricsCollection&&a.cV(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(S){for(const f of this._markers)S&&!this.getRenderWorldCopies()&&(f._lngLat=f._lngLat.wrap()),f._update();for(const f of this._popups)!S||this.getRenderWorldCopies()||f._trackPointer||(f._lngLat=f._lngLat.wrap()),f._update()}_updateAverageElevation(S,f=!1){const _=D=>(this.transform.averageElevation=D,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&_(0);const A=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(A||(f||S-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(S)){const D=this.transform.averageElevation;let L=this.transform.sampleAverageElevation();this.transform.elevation&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(L)?L=0:this._averageElevationLastSampledAt=S;const B=Math.abs(D-L);if(B>1){if(this._isInitialLoad||A)return this._averageElevation.jumpTo(L),_(L);this._averageElevation.easeTo(L,S,300)}else if(B>1e-4)return this._averageElevation.jumpTo(L),_(L)}return!!this._averageElevation.isEasing(S)&&_(this._averageElevation.getValue(S))}_authenticate(){a.cW(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,S=>{if(S&&(S.message===a.cX||S.status===401)){const f=this.painter.context.gl;a.cT(f,!1),this._logoControl instanceof w_&&this._logoControl._updateLogo(),f&&f.clear(f.DEPTH_BUFFER_BIT|f.COLOR_BUFFER_BIT|f.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new a.a7(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),a.cY(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const S=this._isDragging();this.painter.updateTerrain(this.style,S)}_calculateSpeedIndex(){const S=this.painter.canvasCopy(),f=this.painter.getCanvasCopiesAndTimestamps();f.timeStamps.push(performance.now());const _=this.painter.context.gl,A=_.createFramebuffer();function D(L){_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,L,0);const B=new Uint8Array(_.drawingBufferWidth*_.drawingBufferHeight*4);return _.readPixels(0,0,_.drawingBufferWidth,_.drawingBufferHeight,_.RGBA,_.UNSIGNED_BYTE,B),B}return _.bindFramebuffer(_.FRAMEBUFFER,A),this._canvasPixelComparison(D(S),f.canvasCopies.map(D),f.timeStamps)}_canvasPixelComparison(S,f,_){let A=_[1]-_[0];const D=S.length/4;for(let L=0;L<f.length;L++){const B=f[L];let N=0;for(let W=0;W<B.length;W+=4)B[W]===S[W]&&B[W+1]===S[W+1]&&B[W+2]===S[W+2]&&B[W+3]===S[W+3]&&(N+=1);A+=(_[L+2]-_[L+1])*(1-N/D)}return A}remove(){this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const S=this.painter.context.gl.getExtension("WEBGL_lose_context");S&&S.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),a.cZ(this.painter.context.gl),this._removed=!0,this.fire(new a.a8("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(S){this._renderNextFrame=this._renderNextFrame||S,this.style&&!this._frame&&(this._frame=a.a4.frame(f=>{const _=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,_&&this._render(f)}))}_preloadTiles(S){const f=this.style?Object.values(this.style._sourceCaches):[];return a.c_(f,(_,A)=>_._preloadTiles(S,A),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(S){this._trackResize&&this.resize({originalEvent:S})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(S){this._showTileBoundaries!==S&&(this._showTileBoundaries=S,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(S){this._showTerrainWireframe!==S&&(this._showTerrainWireframe=S,this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(S){this._showLayers2DWireframe!==S&&(this._showLayers2DWireframe=S,this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(S){this._showLayers3DWireframe!==S&&(this._showLayers3DWireframe=S,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(S){this._speedIndexTiming!==S&&(this._speedIndexTiming=S,this._update())}get showPadding(){return!!this._showPadding}set showPadding(S){this._showPadding!==S&&(this._showPadding=S,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(S){this._showCollisionBoxes!==S&&(this._showCollisionBoxes=S,S?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(S){this._showOverdrawInspector!==S&&(this._showOverdrawInspector=S,this._update())}get repaint(){return!!this._repaint}set repaint(S){this._repaint!==S&&(this._repaint=S,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(S){this._vertices=S,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(S){this._showTileAABBs!==S&&(this._showTileAABBs=S,S&&this._update())}_setCacheLimits(S,f){a.d0(S,f)}get version(){return a.c$}},NavigationControl:class{constructor(S){this.options=a.ak({},V2,S),this._container=x("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",f=>f.preventDefault()),this.options.showZoom&&(a.aR(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",f=>{this._map&&this._map.zoomIn({},{originalEvent:f})}),x("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",f=>{this._map&&this._map.zoomOut({},{originalEvent:f})}),x("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.aR(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",f=>{const _=this._map;_&&(this.options.visualizePitch?_.resetNorthPitch({},{originalEvent:f}):_.resetNorth({},{originalEvent:f}))}),this._compassIcon=x("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const S=this._map;if(!S)return;const f=S.getZoom(),_=f===S.getMaxZoom(),A=f===S.getMinZoom();this._zoomInButton.disabled=_,this._zoomOutButton.disabled=A,this._zoomInButton.setAttribute("aria-disabled",_.toString()),this._zoomOutButton.setAttribute("aria-disabled",A.toString())}_rotateCompassArrow(){const S=this._map;if(!S)return;const f=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(S.transform.pitch*(Math.PI/180)),.5)}) rotateX(${S.transform.pitch}deg) rotateZ(${S.transform.angle*(180/Math.PI)}deg)`:`rotate(${S.transform.angle*(180/Math.PI)}deg)`;S._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=f)})}onAdd(S){return this._map=S,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),S.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&S.on("pitch",this._rotateCompassArrow),S.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new wu(S,this._compass,this.options.visualizePitch)),this._container}onRemove(){const S=this._map;S&&(this._container.remove(),this.options.showZoom&&S.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&S.off("pitch",this._rotateCompassArrow),S.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(S,f){const _=x("button",S,this._container);return _.type="button",_.addEventListener("click",f),_}_setButtonTitle(S,f){if(!this._map)return;const _=this._map._getUIString(`NavigationControl.${f}`);S.setAttribute("aria-label",_),S.firstElementChild&&S.firstElementChild.setAttribute("title",_)}},GeolocateControl:class extends a.a6{constructor(S){super();const f=navigator.geolocation;this.options=a.ak({geolocation:f},qs,S),a.aR(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=_u(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(S){return this._map=S,this._container=x("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(S){const f=(_=!!this.options.geolocation)=>{this._supportsGeolocation=_,S(_)};this._supportsGeolocation!==void 0?S(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(_=>f(_.state!=="denied")).catch(()=>f()):f()}_isOutOfMapMaxBounds(S){const f=this._map.getMaxBounds(),_=S.coords;return!!f&&(_.longitude<f.getWest()||_.longitude>f.getEast()||_.latitude<f.getSouth()||_.latitude>f.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(S){if(this._map){if(this._isOutOfMapMaxBounds(S))return this._setErrorState(),this.fire(new a.a8("outofmaxbounds",S)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=S,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(S),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(S),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new a.a8("geolocate",S)),this._finish()}}_updateCamera(S){const f=new a.L(S.coords.longitude,S.coords.latitude),_=S.coords.accuracy,A=this._map.getBearing(),D=a.ak({bearing:A},this.options.fitBoundsOptions);this._map.fitBounds(f.toBounds(_),D,{geolocateSource:!0})}_updateMarker(S){if(S){const f=new a.L(S.coords.longitude,S.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=S.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const S=this._map.transform,f=a.b(1,S._center.lat)*S.worldSize,_=Math.ceil(2*this._accuracy*f);this._circleElement.style.width=`${_}px`,this._circleElement.style.height=`${_}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(S){if(this._map){if(this.options.trackUserLocation)if(S.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",f),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",f),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(S.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new a.a8("error",S)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(S){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",f=>f.preventDefault()),this._geolocateButton=x("button","mapboxgl-ctrl-geolocate",this._container),x("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",S===!1){a.X("Geolocation support is not available so the GeolocateControl will be disabled.");const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",f),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",f)}else{const f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",f),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x("div","mapboxgl-user-location"),this._dotElement.appendChild(x("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(x("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new ea({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=x("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ea({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",f=>{f.geolocateSource||this._watchState!=="ACTIVE_LOCK"||f.originalEvent&&f.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new a.a8("trackuserlocationend")))})}}_onDeviceOrientation(S){this._userLocationDotMarker&&(S.webkitCompassHeading?this._heading=S.webkitCompassHeading:S.absolute===!0&&(this._heading=-1*S.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return a.X("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.a8("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.a8("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.a8("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let S;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(S={maximumAge:6e5,timeout:0},this._noTimeout=!0):(S=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,S),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const S=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent!="undefined"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(f=>{f==="granted"&&S()}).catch(console.error):S()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:b_,ScaleControl:class{constructor(S){this.options=a.ak({},Ph,S),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),a.aR(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const S=this.options.maxWidth||100,f=this._map,_=f._containerHeight/2,A=f._containerWidth/2-S/2,D=f.unproject([A,_]),L=f.unproject([A+S,_]),B=D.distanceTo(L);if(this.options.unit==="imperial"){const N=3.2808*B;N>5280?this._setScale(S,N/5280,"mile"):this._setScale(S,N,"foot")}else this.options.unit==="nautical"?this._setScale(S,B/1852,"nautical-mile"):B>=1e3?this._setScale(S,B/1e3,"kilometer"):this._setScale(S,B,"meter")}_setScale(S,f,_){this._map._requestDomTask(()=>{const A=function(L){const B=Math.pow(10,`${Math.floor(L)}`.length-1);let N=L/B;return N=N>=10?10:N>=5?5:N>=3?3:N>=2?2:N>=1?1:function(W){const X=Math.pow(10,Math.ceil(-Math.log(W)/Math.LN10));return Math.round(W*X)/X}(N),B*N}(f),D=A/f;this._container.innerHTML=this._isNumberFormatSupported&&_!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:_}).format(A):`${A}&nbsp;${Nm[_]}`,this._container.style.width=S*D+"px"})}onAdd(S){return this._map=S,this._language=S.getLanguage(),this._container=x("div","mapboxgl-ctrl mapboxgl-ctrl-scale",S.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(S){this._language=S,this._update()}setUnit(S){this.options.unit=S,this._update()}},FullscreenControl:class{constructor(S){this._fullscreen=!1,S&&S.container&&(S.container instanceof HTMLElement?this._container=S.container:a.X("Full screen control 'container' must be a DOM element.")),a.aR(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(S){return this._map=S,this._container||(this._container=this._map.getContainer()),this._controlContainer=x("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.X("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const S=this._fullscreenButton=x("button","mapboxgl-ctrl-fullscreen",this._controlContainer);x("span","mapboxgl-ctrl-icon",S).setAttribute("aria-hidden","true"),S.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const S=this._getTitle();this._fullscreenButton.setAttribute("aria-label",S),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",S)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends a.a6{constructor(S){super(),this.options=a.ak(Object.create(B2),S),a.aR(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(S&&S.className?S.className.trim().split(/\s+/):[])}addTo(S){return this._map&&this.remove(),this._map=S,this.options.closeOnClick&&S.on("preclick",this._onClose),this.options.closeOnMove&&S.on("move",this._onClose),S.on("remove",this.remove),this._update(),S._addPopup(this),this._focusFirstElement(),this._trackPointer?(S.on("mousemove",this._onMouseEvent),S.on("mouseup",this._onMouseEvent),S._canvasContainer.classList.add("mapboxgl-track-pointer")):S.on("move",this._update),this.fire(new a.a8("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const S=this._map;return S&&(S.off("move",this._update),S.off("move",this._onClose),S.off("preclick",this._onClose),S.off("click",this._onClose),S.off("remove",this.remove),S.off("mousemove",this._onMouseEvent),S.off("mouseup",this._onMouseEvent),S.off("drag",this._onMouseEvent),S._canvasContainer&&S._canvasContainer.classList.remove("mapboxgl-track-pointer"),S._removePopup(this),this._map=void 0),this.fire(new a.a8("close")),this}getLngLat(){return this._lngLat}setLngLat(S){this._lngLat=a.L.convert(S),this._pos=null,this._trackPointer=!1,this._update();const f=this._map;return f&&(f.on("move",this._update),f.off("mousemove",this._onMouseEvent),f._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const S=this._map;return S&&(S.off("move",this._update),S.on("mousemove",this._onMouseEvent),S.on("drag",this._onMouseEvent),S._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(S){return this.setDOMContent(document.createTextNode(S))}setHTML(S){const f=document.createDocumentFragment(),_=document.createElement("body");let A;for(_.innerHTML=S;A=_.firstChild,A;)f.appendChild(A);return this.setDOMContent(f)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(S){return this.options.maxWidth=S,this._update(),this}setDOMContent(S){let f=this._content;if(f)for(;f.hasChildNodes();)f.firstChild&&f.removeChild(f.firstChild);else f=this._content=x("div","mapboxgl-popup-content",this._container||void 0);if(f.appendChild(S),this.options.closeButton){const _=this._closeButton=x("button","mapboxgl-popup-close-button",f);_.type="button",_.setAttribute("aria-label","Close popup"),_.setAttribute("aria-hidden","true"),_.innerHTML="&#215;",_.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(S){return this._classList.add(S),this._updateClassList(),this}removeClassName(S){return this._classList.delete(S),this._updateClassList(),this}setOffset(S){return this.options.offset=S,this._update(),this}toggleClassName(S){let f;return this._classList.delete(S)?f=!1:(this._classList.add(S),f=!0),this._updateClassList(),f}_onMouseEvent(S){this._update(S.point)}_getAnchor(S){if(this.options.anchor)return this.options.anchor;const f=this._map,_=this._container,A=this._pos;if(!f||!_||!A)return"bottom";const D=_.offsetWidth,L=_.offsetHeight,B=A.x<D/2,N=A.x>f.transform.width-D/2;if(A.y+S<L)return B?"top-left":N?"top-right":"top";if(A.y>f.transform.height-L){if(B)return"bottom-left";if(N)return"bottom-right"}return B?"left":N?"right":"bottom"}_updateClassList(){const S=this._container;if(!S)return;const f=[...this._classList];f.push("mapboxgl-popup"),this._anchor&&f.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&f.push("mapboxgl-popup-track-pointer"),S.className=f.join(" ")}_update(S){const f=this._map,_=this._content;if(!f||!this._lngLat&&!this._trackPointer||!_)return;let A=this._container;if(A||(A=this._container=x("div","mapboxgl-popup",f.getContainer()),this._tip=x("div","mapboxgl-popup-tip",A),A.appendChild(_)),this.options.maxWidth&&A.style.maxWidth!==this.options.maxWidth&&(A.style.maxWidth=this.options.maxWidth),f.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=T_(this._lngLat,this._pos,f.transform)),!this._trackPointer||S){const D=this._pos=this._trackPointer&&S?S:f.project(this._lngLat),L=M_(this.options.offset),B=this._anchor=this._getAnchor(L.y),N=M_(this.options.offset,B),W=D.add(N).round();f._requestDomTask(()=>{this._container&&B&&(this._container.style.transform=`${Fm[B]} translate(${W.x}px,${W.y}px)`)})}if(!this._marker&&f._showingGlobe()){const D=a.cN(f.transform,this._lngLat)?0:1;this._setOpacity(D)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const S=this._container.querySelector(v1);S&&S.focus()}_onClose(){this.remove()}_setOpacity(S){this._container&&(this._container.style.opacity=`${S}`),this._content&&(this._content.style.pointerEvents=S?"auto":"none")}},Marker:ea,Style:Zo,LngLat:a.L,LngLatBounds:a.D,Point:a.P,MercatorCoordinate:a.M,FreeCameraOptions:wn,Evented:a.a6,config:a.cM,prewarm:a.d3,clearPrewarmedResources:a.d4,get accessToken(){return a.cM.ACCESS_TOKEN},set accessToken(S){a.cM.ACCESS_TOKEN=S},get baseApiUrl(){return a.cM.API_URL},set baseApiUrl(S){a.cM.API_URL=S},get workerCount(){return a.d5.workerCount},set workerCount(S){a.d5.workerCount=S},get maxParallelImageRequests(){return a.cM.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(S){a.cM.MAX_PARALLEL_IMAGE_REQUESTS=S},clearStorage(S){a.d6(S)},get workerUrl(){return a.d7.workerUrl},set workerUrl(S){a.d7.workerUrl=S},get workerClass(){return a.d7.workerClass},set workerClass(S){a.d7.workerClass=S},get workerParams(){return a.d7.workerParams},set workerParams(S){a.d7.workerParams=S},get dracoUrl(){return a.d8()},set dracoUrl(S){a.d9(S)},setNow:a.a4.setNow,restoreNow:a.a4.restoreNow}});var u=n;return u})})(cj);var hy=CT(cj.exports);function mde(r,e){let t;if(e===void 0)for(const i of r)i!=null&&(t<i||t===void 0&&i>=i)&&(t=i);else{let i=-1;for(let n of r)(n=e(n,++i,r))!=null&&(t<n||t===void 0&&n>=n)&&(t=n)}return t}function gde(r,e){let t;if(e===void 0)for(const i of r)i!=null&&(t>i||t===void 0&&i>=i)&&(t=i);else{let i=-1;for(let n of r)(n=e(n,++i,r))!=null&&(t>n||t===void 0&&n>=n)&&(t=n)}return t}var s5={},GA={},UA=34,dy=10,jA=13;function dj(r){return new Function("d","return {"+r.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function vde(r,e){var t=dj(r);return function(i,n){return e(t(i),n,r)}}function l5(r){var e=Object.create(null),t=[];return r.forEach(function(i){for(var n in i)n in e||t.push(e[n]=n)}),t}function ns(r,e){var t=r+"",i=t.length;return i<e?new Array(e-i+1).join(0)+t:t}function _de(r){return r<0?"-"+ns(-r,6):r>9999?"+"+ns(r,6):ns(r,4)}function yde(r){var e=r.getUTCHours(),t=r.getUTCMinutes(),i=r.getUTCSeconds(),n=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":_de(r.getUTCFullYear())+"-"+ns(r.getUTCMonth()+1,2)+"-"+ns(r.getUTCDate(),2)+(n?"T"+ns(e,2)+":"+ns(t,2)+":"+ns(i,2)+"."+ns(n,3)+"Z":i?"T"+ns(e,2)+":"+ns(t,2)+":"+ns(i,2)+"Z":t||e?"T"+ns(e,2)+":"+ns(t,2)+"Z":"")}function xde(r){var e=new RegExp('["'+r+`
\r]`),t=r.charCodeAt(0);function i(v,x){var w,T,C=n(v,function(I,k){if(w)return w(I,k-1);T=I,w=x?vde(I,x):dj(I)});return C.columns=T||[],C}function n(v,x){var w=[],T=v.length,C=0,I=0,k,R=T<=0,z=!1;v.charCodeAt(T-1)===dy&&--T,v.charCodeAt(T-1)===jA&&--T;function $(){if(R)return GA;if(z)return z=!1,s5;var G,Y=C,Z;if(v.charCodeAt(Y)===UA){for(;C++<T&&v.charCodeAt(C)!==UA||v.charCodeAt(++C)===UA;);return(G=C)>=T?R=!0:(Z=v.charCodeAt(C++))===dy?z=!0:Z===jA&&(z=!0,v.charCodeAt(C)===dy&&++C),v.slice(Y+1,G-1).replace(/""/g,'"')}for(;C<T;){if((Z=v.charCodeAt(G=C++))===dy)z=!0;else if(Z===jA)z=!0,v.charCodeAt(C)===dy&&++C;else if(Z!==t)continue;return v.slice(Y,G)}return R=!0,v.slice(Y,T)}for(;(k=$())!==GA;){for(var j=[];k!==s5&&k!==GA;)j.push(k),k=$();x&&(j=x(j,I++))==null||w.push(j)}return w}function s(v,x){return v.map(function(w){return x.map(function(T){return m(w[T])}).join(r)})}function u(v,x){return x==null&&(x=l5(v)),[x.map(m).join(r)].concat(s(v,x)).join(`
`)}function a(v,x){return x==null&&(x=l5(v)),s(v,x).join(`
`)}function h(v){return v.map(p).join(`
`)}function p(v){return v.map(m).join(r)}function m(v){return v==null?"":v instanceof Date?yde(v):e.test(v+="")?'"'+v.replace(/"/g,'""')+'"':v}return{parse:i,parseRows:n,format:u,formatBody:a,formatRows:h,formatRow:p,formatValue:m}}var bde=xde(","),wde=bde.parse;function Sde(r){if(!r.ok)throw new Error(r.status+" "+r.statusText);return r.text()}function Tde(r,e){return fetch(r,e).then(Sde)}function Mde(r){return function(e,t,i){return arguments.length===2&&typeof t=="function"&&(i=t,t=void 0),Tde(e,t).then(function(n){return r(n,i)})}}var Ade=Mde(wde);function Ng(r,e,t){this.k=r,this.x=e,this.y=t}Ng.prototype={constructor:Ng,scale:function(r){return r===1?this:new Ng(this.k*r,this.x,this.y)},translate:function(r,e){return r===0&e===0?this:new Ng(this.k,this.x+this.k*r,this.y+this.k*e)},apply:function(r){return[r[0]*this.k+this.x,r[1]*this.k+this.y]},applyX:function(r){return r*this.k+this.x},applyY:function(r){return r*this.k+this.y},invert:function(r){return[(r[0]-this.x)/this.k,(r[1]-this.y)/this.k]},invertX:function(r){return(r-this.x)/this.k},invertY:function(r){return(r-this.y)/this.k},rescaleX:function(r){return r.copy().domain(r.range().map(this.invertX,this).map(r.invert,r))},rescaleY:function(r){return r.copy().domain(r.range().map(this.invertY,this).map(r.invert,r))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Ng(1,0,0);Ng.prototype;const Cde={props:{initialVisible:{type:Boolean,default:!0}},setup(r,{emit:e}){const t=tc(r.initialVisible);return{isVisible:t,toggle:()=>{t.value=!t.value,e("update:visible",t.value)}}}};function Ide(r,e,t,i,n,s){return Yt(),lr("button",{onClick:e[0]||(e[0]=(...u)=>i.toggle&&i.toggle(...u))},Pi(i.isVisible?"Hide":" Forecast Weather"),1)}var Ede=ph(Cde,[["render",Ide],["__scopeId","data-v-054265b7"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var NE=function(r,e){return NE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},NE(r,e)};function lt(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");NE(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Dde=function(){function r(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return r}(),Pde=function(){function r(){this.browser=new Dde,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window!="undefined"}return r}(),op=new Pde;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(op.wxa=!0,op.touchEventsSupported=!0):typeof document=="undefined"&&typeof self!="undefined"?op.worker=!0:typeof navigator=="undefined"||navigator.userAgent.indexOf("Node.js")===0?(op.node=!0,op.svgSupported=!0):Lde(navigator.userAgent,op);function Lde(r,e){var t=e.browser,i=r.match(/Firefox\/([\d.]+)/),n=r.match(/MSIE\s([\d.]+)/)||r.match(/Trident\/.+?rv:(([\d.]+))/),s=r.match(/Edge?\/([\d.]+)/),u=/micromessenger/i.test(r);i&&(t.firefox=!0,t.version=i[1]),n&&(t.ie=!0,t.version=n[1]),s&&(t.edge=!0,t.version=s[1],t.newEdge=+s[1].split(".")[0]>18),u&&(t.weChat=!0),e.svgSupported=typeof SVGRect!="undefined",e.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,e.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11),e.domSupported=typeof document!="undefined";var a=document.documentElement.style;e.transform3dSupported=(t.ie&&"transition"in a||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in a)&&!("OTransition"in a),e.transformSupported=e.transform3dSupported||t.ie&&+t.version>=9}var Fi=op,dL=12,fj="sans-serif",Rd=dL+"px "+fj,kde=20,Rde=100,Ode="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function zde(r){var e={};if(typeof JSON=="undefined")return e;for(var t=0;t<r.length;t++){var i=String.fromCharCode(t+32),n=(r.charCodeAt(t)-kde)/Rde;e[i]=n}return e}var Bde=zde(Ode),ah={createCanvas:function(){return typeof document!="undefined"&&document.createElement("canvas")},measureText:function(){var r,e;return function(t,i){if(!r){var n=ah.createCanvas();r=n&&n.getContext("2d")}if(r)return e!==i&&(e=r.font=i||Rd),r.measureText(t);t=t||"",i=i||Rd;var s=/(\d+)px/.exec(i),u=s&&+s[1]||dL,a=0;if(i.indexOf("mono")>=0)a=u*t.length;else for(var h=0;h<t.length;h++){var p=Bde[t[h]];a+=p==null?u:p*u}return{width:a}}}(),loadImage:function(r,e,t){var i=new Image;return i.onload=e,i.onerror=t,i.src=r,i}},pj=ic(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(r,e){return r["[object "+e+"]"]=!0,r},{}),mj=ic(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(r,e){return r["[object "+e+"Array]"]=!0,r},{}),Mv=Object.prototype.toString,kT=Array.prototype,Fde=kT.forEach,Nde=kT.filter,fL=kT.slice,Vde=kT.map,u5=function(){}.constructor,Lb=u5?u5.prototype:null,pL="__proto__",$de=2311;function gj(){return $de++}function mL(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];typeof console!="undefined"&&console.error.apply(console,r)}function Nr(r){if(r==null||typeof r!="object")return r;var e=r,t=Mv.call(r);if(t==="[object Array]"){if(!f0(r)){e=[];for(var i=0,n=r.length;i<n;i++)e[i]=Nr(r[i])}}else if(mj[t]){if(!f0(r)){var s=r.constructor;if(s.from)e=s.from(r);else{e=new s(r.length);for(var i=0,n=r.length;i<n;i++)e[i]=r[i]}}}else if(!pj[t]&&!f0(r)&&!lv(r)){e={};for(var u in r)r.hasOwnProperty(u)&&u!==pL&&(e[u]=Nr(r[u]))}return e}function ni(r,e,t){if(!Br(e)||!Br(r))return t?Nr(e):r;for(var i in e)if(e.hasOwnProperty(i)&&i!==pL){var n=r[i],s=e[i];Br(s)&&Br(n)&&!Nt(s)&&!Nt(n)&&!lv(s)&&!lv(n)&&!c5(s)&&!c5(n)&&!f0(s)&&!f0(n)?ni(n,s,t):(t||!(i in r))&&(r[i]=Nr(e[i]))}return r}function gL(r,e){for(var t=r[0],i=1,n=r.length;i<n;i++)t=ni(t,r[i],e);return t}function kt(r,e){if(Object.assign)Object.assign(r,e);else for(var t in e)e.hasOwnProperty(t)&&t!==pL&&(r[t]=e[t]);return r}function zr(r,e,t){for(var i=bi(e),n=0;n<i.length;n++){var s=i[n];(t?e[s]!=null:r[s]==null)&&(r[s]=e[s])}return r}ah.createCanvas;function di(r,e){if(r){if(r.indexOf)return r.indexOf(e);for(var t=0,i=r.length;t<i;t++)if(r[t]===e)return t}return-1}function Gde(r,e){var t=r.prototype;function i(){}i.prototype=e.prototype,r.prototype=new i;for(var n in t)t.hasOwnProperty(n)&&(r.prototype[n]=t[n]);r.prototype.constructor=r,r.superClass=e}function pa(r,e,t){if(r="prototype"in r?r.prototype:r,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var i=Object.getOwnPropertyNames(e),n=0;n<i.length;n++){var s=i[n];s!=="constructor"&&(t?e[s]!=null:r[s]==null)&&(r[s]=e[s])}else zr(r,e,t)}function So(r){return!r||typeof r=="string"?!1:typeof r.length=="number"}function ue(r,e,t){if(!!(r&&e))if(r.forEach&&r.forEach===Fde)r.forEach(e,t);else if(r.length===+r.length)for(var i=0,n=r.length;i<n;i++)e.call(t,r[i],i,r);else for(var s in r)r.hasOwnProperty(s)&&e.call(t,r[s],s,r)}function Ht(r,e,t){if(!r)return[];if(!e)return vL(r);if(r.map&&r.map===Vde)return r.map(e,t);for(var i=[],n=0,s=r.length;n<s;n++)i.push(e.call(t,r[n],n,r));return i}function ic(r,e,t,i){if(!!(r&&e)){for(var n=0,s=r.length;n<s;n++)t=e.call(i,t,r[n],n,r);return t}}function un(r,e,t){if(!r)return[];if(!e)return vL(r);if(r.filter&&r.filter===Nde)return r.filter(e,t);for(var i=[],n=0,s=r.length;n<s;n++)e.call(t,r[n],n,r)&&i.push(r[n]);return i}function Ude(r,e,t){if(!!(r&&e)){for(var i=0,n=r.length;i<n;i++)if(e.call(t,r[i],i,r))return r[i]}}function bi(r){if(!r)return[];if(Object.keys)return Object.keys(r);var e=[];for(var t in r)r.hasOwnProperty(t)&&e.push(t);return e}function jde(r,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return function(){return r.apply(e,t.concat(fL.call(arguments)))}}var xr=Lb&&kr(Lb.bind)?Lb.call.bind(Lb.bind):jde;function Qr(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){return r.apply(this,e.concat(fL.call(arguments)))}}function Nt(r){return Array.isArray?Array.isArray(r):Mv.call(r)==="[object Array]"}function kr(r){return typeof r=="function"}function gr(r){return typeof r=="string"}function VE(r){return Mv.call(r)==="[object String]"}function Vi(r){return typeof r=="number"}function Br(r){var e=typeof r;return e==="function"||!!r&&e==="object"}function c5(r){return!!pj[Mv.call(r)]}function us(r){return!!mj[Mv.call(r)]}function lv(r){return typeof r=="object"&&typeof r.nodeType=="number"&&typeof r.ownerDocument=="object"}function RT(r){return r.colorStops!=null}function Hde(r){return r.image!=null}function Wde(r){return Mv.call(r)==="[object RegExp]"}function z0(r){return r!==r}function Ga(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=0,i=r.length;t<i;t++)if(r[t]!=null)return r[t]}function Yr(r,e){return r!=null?r:e}function Ju(r,e,t){return r!=null?r:e!=null?e:t}function vL(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return fL.apply(r,e)}function _L(r){if(typeof r=="number")return[r,r,r,r];var e=r.length;return e===2?[r[0],r[1],r[0],r[1]]:e===3?[r[0],r[1],r[2],r[1]]:r}function Vo(r,e){if(!r)throw new Error(e)}function Kl(r){return r==null?null:typeof r.trim=="function"?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var vj="__ec_primitive__";function vS(r){r[vj]=!0}function f0(r){return r[vj]}var qde=function(){function r(){this.data={}}return r.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},r.prototype.has=function(e){return this.data.hasOwnProperty(e)},r.prototype.get=function(e){return this.data[e]},r.prototype.set=function(e,t){return this.data[e]=t,this},r.prototype.keys=function(){return bi(this.data)},r.prototype.forEach=function(e){var t=this.data;for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},r}(),_j=typeof Map=="function";function Zde(){return _j?new Map:new qde}var Xde=function(){function r(e){var t=Nt(e);this.data=Zde();var i=this;e instanceof r?e.each(n):e&&ue(e,n);function n(s,u){t?i.set(s,u):i.set(u,s)}}return r.prototype.hasKey=function(e){return this.data.has(e)},r.prototype.get=function(e){return this.data.get(e)},r.prototype.set=function(e,t){return this.data.set(e,t),t},r.prototype.each=function(e,t){this.data.forEach(function(i,n){e.call(t,i,n)})},r.prototype.keys=function(){var e=this.data.keys();return _j?Array.from(e):e},r.prototype.removeKey=function(e){this.data.delete(e)},r}();function Mr(r){return new Xde(r)}function _S(r,e){for(var t=new r.constructor(r.length+e.length),i=0;i<r.length;i++)t[i]=r[i];for(var n=r.length,i=0;i<e.length;i++)t[i+n]=e[i];return t}function OT(r,e){var t;if(Object.create)t=Object.create(r);else{var i=function(){};i.prototype=r,t=new i}return e&&kt(t,e),t}function yj(r){var e=r.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function wr(r,e){return r.hasOwnProperty(e)}function aa(){}var $w=180/Math.PI;function Jp(r,e){return r==null&&(r=0),e==null&&(e=0),[r,e]}function ko(r,e){return r[0]=e[0],r[1]=e[1],r}function Jc(r){return[r[0],r[1]]}function Yde(r,e,t){return r[0]=e,r[1]=t,r}function h5(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r}function $E(r,e,t,i){return r[0]=e[0]+t[0]*i,r[1]=e[1]+t[1]*i,r}function xp(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r}function GE(r){return Math.sqrt(Kde(r))}function Kde(r){return r[0]*r[0]+r[1]*r[1]}function Gw(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r}function Av(r,e){var t=GE(e);return t===0?(r[0]=0,r[1]=0):(r[0]=e[0]/t,r[1]=e[1]/t),r}function UE(r,e){return Math.sqrt((r[0]-e[0])*(r[0]-e[0])+(r[1]-e[1])*(r[1]-e[1]))}var md=UE;function Jde(r,e){return(r[0]-e[0])*(r[0]-e[0])+(r[1]-e[1])*(r[1]-e[1])}var Lp=Jde;function Uw(r,e,t,i){return r[0]=e[0]+i*(t[0]-e[0]),r[1]=e[1]+i*(t[1]-e[1]),r}function Qa(r,e,t){var i=e[0],n=e[1];return r[0]=t[0]*i+t[2]*n+t[4],r[1]=t[1]*i+t[3]*n+t[5],r}function gd(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r}function vd(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r}var lg=function(){function r(e,t){this.target=e,this.topTarget=t&&t.topTarget}return r}(),Qde=function(){function r(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return r.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new lg(t,e),"dragstart",e.event))},r.prototype._drag=function(e){var t=this._draggingTarget;if(t){var i=e.offsetX,n=e.offsetY,s=i-this._x,u=n-this._y;this._x=i,this._y=n,t.drift(s,u,e),this.handler.dispatchToElement(new lg(t,e),"drag",e.event);var a=this.handler.findHover(i,n,t).target,h=this._dropTarget;this._dropTarget=a,t!==a&&(h&&a!==h&&this.handler.dispatchToElement(new lg(h,e),"dragleave",e.event),a&&a!==h&&this.handler.dispatchToElement(new lg(a,e),"dragenter",e.event))}},r.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new lg(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new lg(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},r}(),efe=Qde,tfe=function(){function r(e){e&&(this._$eventProcessor=e)}return r.prototype.on=function(e,t,i,n){this._$handlers||(this._$handlers={});var s=this._$handlers;if(typeof t=="function"&&(n=i,i=t,t=null),!i||!e)return this;var u=this._$eventProcessor;t!=null&&u&&u.normalizeQuery&&(t=u.normalizeQuery(t)),s[e]||(s[e]=[]);for(var a=0;a<s[e].length;a++)if(s[e][a].h===i)return this;var h={h:i,query:t,ctx:n||this,callAtLast:i.zrEventfulCallAtLast},p=s[e].length-1,m=s[e][p];return m&&m.callAtLast?s[e].splice(p,0,h):s[e].push(h),this},r.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},r.prototype.off=function(e,t){var i=this._$handlers;if(!i)return this;if(!e)return this._$handlers={},this;if(t){if(i[e]){for(var n=[],s=0,u=i[e].length;s<u;s++)i[e][s].h!==t&&n.push(i[e][s]);i[e]=n}i[e]&&i[e].length===0&&delete i[e]}else delete i[e];return this},r.prototype.trigger=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!this._$handlers)return this;var n=this._$handlers[e],s=this._$eventProcessor;if(n)for(var u=t.length,a=n.length,h=0;h<a;h++){var p=n[h];if(!(s&&s.filter&&p.query!=null&&!s.filter(e,p.query)))switch(u){case 0:p.h.call(p.ctx);break;case 1:p.h.call(p.ctx,t[0]);break;case 2:p.h.call(p.ctx,t[0],t[1]);break;default:p.h.apply(p.ctx,t);break}}return s&&s.afterTrigger&&s.afterTrigger(e),this},r.prototype.triggerWithContext=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!this._$handlers)return this;var n=this._$handlers[e],s=this._$eventProcessor;if(n)for(var u=t.length,a=t[u-1],h=n.length,p=0;p<h;p++){var m=n[p];if(!(s&&s.filter&&m.query!=null&&!s.filter(e,m.query)))switch(u){case 0:m.h.call(a);break;case 1:m.h.call(a,t[0]);break;case 2:m.h.call(a,t[0],t[1]);break;default:m.h.apply(a,t.slice(1,u-1));break}}return s&&s.afterTrigger&&s.afterTrigger(e),this},r}(),xl=tfe,rfe=Math.log(2);function jE(r,e,t,i,n,s){var u=i+"-"+n,a=r.length;if(s.hasOwnProperty(u))return s[u];if(e===1){var h=Math.round(Math.log((1<<a)-1&~n)/rfe);return r[t][h]}for(var p=i|1<<t,m=t+1;i&1<<m;)m++;for(var v=0,x=0,w=0;x<a;x++){var T=1<<x;T&n||(v+=(w%2?-1:1)*r[t][x]*jE(r,e-1,m,p,n|T,s),w++)}return s[u]=v,v}function d5(r,e){var t=[[r[0],r[1],1,0,0,0,-e[0]*r[0],-e[0]*r[1]],[0,0,0,r[0],r[1],1,-e[1]*r[0],-e[1]*r[1]],[r[2],r[3],1,0,0,0,-e[2]*r[2],-e[2]*r[3]],[0,0,0,r[2],r[3],1,-e[3]*r[2],-e[3]*r[3]],[r[4],r[5],1,0,0,0,-e[4]*r[4],-e[4]*r[5]],[0,0,0,r[4],r[5],1,-e[5]*r[4],-e[5]*r[5]],[r[6],r[7],1,0,0,0,-e[6]*r[6],-e[6]*r[7]],[0,0,0,r[6],r[7],1,-e[7]*r[6],-e[7]*r[7]]],i={},n=jE(t,8,0,0,0,i);if(n!==0){for(var s=[],u=0;u<8;u++)for(var a=0;a<8;a++)s[a]==null&&(s[a]=0),s[a]+=((u+a)%2?-1:1)*jE(t,7,u===0?1:0,1<<u,1<<a,i)/n*e[u];return function(h,p,m){var v=p*s[6]+m*s[7]+1;h[0]=(p*s[0]+m*s[1]+s[2])/v,h[1]=(p*s[3]+m*s[4]+s[5])/v}}}var f5="___zrEVENTSAVED",HA=[];function ife(r,e,t,i,n){return HE(HA,e,i,n,!0)&&HE(r,t,HA[0],HA[1])}function HE(r,e,t,i,n){if(e.getBoundingClientRect&&Fi.domSupported&&!xj(e)){var s=e[f5]||(e[f5]={}),u=nfe(e,s),a=afe(u,s,n);if(a)return a(r,t,i),!0}return!1}function nfe(r,e){var t=e.markers;if(t)return t;t=e.markers=[];for(var i=["left","right"],n=["top","bottom"],s=0;s<4;s++){var u=document.createElement("div"),a=u.style,h=s%2,p=(s>>1)%2;a.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[h]+":0",n[p]+":0",i[1-h]+":auto",n[1-p]+":auto",""].join("!important;"),r.appendChild(u),t.push(u)}return t}function afe(r,e,t){for(var i=t?"invTrans":"trans",n=e[i],s=e.srcCoords,u=[],a=[],h=!0,p=0;p<4;p++){var m=r[p].getBoundingClientRect(),v=2*p,x=m.left,w=m.top;u.push(x,w),h=h&&s&&x===s[v]&&w===s[v+1],a.push(r[p].offsetLeft,r[p].offsetTop)}return h&&n?n:(e.srcCoords=u,e[i]=t?d5(a,u):d5(u,a))}function xj(r){return r.nodeName.toUpperCase()==="CANVAS"}var ofe=/([&<>"'])/g,sfe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function as(r){return r==null?"":(r+"").replace(ofe,function(e,t){return sfe[t]})}var lfe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,WA=[],ufe=Fi.browser.firefox&&+Fi.browser.version.split(".")[0]<39;function WE(r,e,t,i){return t=t||{},i?p5(r,e,t):ufe&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):p5(r,e,t),t}function p5(r,e,t){if(Fi.domSupported&&r.getBoundingClientRect){var i=e.clientX,n=e.clientY;if(xj(r)){var s=r.getBoundingClientRect();t.zrX=i-s.left,t.zrY=n-s.top;return}else if(HE(WA,r,i,n)){t.zrX=WA[0],t.zrY=WA[1];return}}t.zrX=t.zrY=0}function yL(r){return r||window.event}function ol(r,e,t){if(e=yL(e),e.zrX!=null)return e;var i=e.type,n=i&&i.indexOf("touch")>=0;if(n){var u=i!=="touchend"?e.targetTouches[0]:e.changedTouches[0];u&&WE(r,u,e,t)}else{WE(r,e,e,t);var s=cfe(e);e.zrDelta=s?s/120:-(e.detail||0)/3}var a=e.button;return e.which==null&&a!==void 0&&lfe.test(e.type)&&(e.which=a&1?1:a&2?3:a&4?2:0),e}function cfe(r){var e=r.wheelDelta;if(e)return e;var t=r.deltaX,i=r.deltaY;if(t==null||i==null)return e;var n=Math.abs(i!==0?i:t),s=i>0?-1:i<0?1:t>0?-1:1;return 3*n*s}function qE(r,e,t,i){r.addEventListener(e,t,i)}function hfe(r,e,t,i){r.removeEventListener(e,t,i)}var oh=function(r){r.preventDefault(),r.stopPropagation(),r.cancelBubble=!0};function m5(r){return r.which===2||r.which===3}var dfe=function(){function r(){this._track=[]}return r.prototype.recognize=function(e,t,i){return this._doTrack(e,t,i),this._recognize(e)},r.prototype.clear=function(){return this._track.length=0,this},r.prototype._doTrack=function(e,t,i){var n=e.touches;if(!!n){for(var s={points:[],touches:[],target:t,event:e},u=0,a=n.length;u<a;u++){var h=n[u],p=WE(i,h,{});s.points.push([p.zrX,p.zrY]),s.touches.push(h)}this._track.push(s)}},r.prototype._recognize=function(e){for(var t in qA)if(qA.hasOwnProperty(t)){var i=qA[t](this._track,e);if(i)return i}},r}();function g5(r){var e=r[1][0]-r[0][0],t=r[1][1]-r[0][1];return Math.sqrt(e*e+t*t)}function ffe(r){return[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]}var qA={pinch:function(r,e){var t=r.length;if(!!t){var i=(r[t-1]||{}).points,n=(r[t-2]||{}).points||i;if(n&&n.length>1&&i&&i.length>1){var s=g5(i)/g5(n);!isFinite(s)&&(s=1),e.pinchScale=s;var u=ffe(i);return e.pinchX=u[0],e.pinchY=u[1],{type:"pinch",target:r[0].target,event:e}}}}};function ks(){return[1,0,0,1,0,0]}function zT(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r}function xL(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function Qc(r,e,t){var i=e[0]*t[0]+e[2]*t[1],n=e[1]*t[0]+e[3]*t[1],s=e[0]*t[2]+e[2]*t[3],u=e[1]*t[2]+e[3]*t[3],a=e[0]*t[4]+e[2]*t[5]+e[4],h=e[1]*t[4]+e[3]*t[5]+e[5];return r[0]=i,r[1]=n,r[2]=s,r[3]=u,r[4]=a,r[5]=h,r}function nc(r,e,t){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4]+t[0],r[5]=e[5]+t[1],r}function Qp(r,e,t,i){i===void 0&&(i=[0,0]);var n=e[0],s=e[2],u=e[4],a=e[1],h=e[3],p=e[5],m=Math.sin(t),v=Math.cos(t);return r[0]=n*v+a*m,r[1]=-n*m+a*v,r[2]=s*v+h*m,r[3]=-s*m+v*h,r[4]=v*(u-i[0])+m*(p-i[1])+i[0],r[5]=v*(p-i[1])-m*(u-i[0])+i[1],r}function bL(r,e,t){var i=t[0],n=t[1];return r[0]=e[0]*i,r[1]=e[1]*n,r[2]=e[2]*i,r[3]=e[3]*n,r[4]=e[4]*i,r[5]=e[5]*n,r}function Cv(r,e){var t=e[0],i=e[2],n=e[4],s=e[1],u=e[3],a=e[5],h=t*u-s*i;return h?(h=1/h,r[0]=u*h,r[1]=-s*h,r[2]=-i*h,r[3]=t*h,r[4]=(i*a-u*n)*h,r[5]=(s*n-t*a)*h,r):null}function pfe(r){var e=ks();return xL(e,r),e}var mfe=function(){function r(e,t){this.x=e||0,this.y=t||0}return r.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.set=function(e,t){return this.x=e,this.y=t,this},r.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},r.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},r.prototype.scale=function(e){this.x*=e,this.y*=e},r.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},r.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},r.prototype.dot=function(e){return this.x*e.x+this.y*e.y},r.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},r.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},r.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},r.prototype.distance=function(e){var t=this.x-e.x,i=this.y-e.y;return Math.sqrt(t*t+i*i)},r.prototype.distanceSquare=function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},r.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},r.prototype.transform=function(e){if(!!e){var t=this.x,i=this.y;return this.x=e[0]*t+e[2]*i+e[4],this.y=e[1]*t+e[3]*i+e[5],this}},r.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},r.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},r.set=function(e,t,i){e.x=t,e.y=i},r.copy=function(e,t){e.x=t.x,e.y=t.y},r.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},r.lenSquare=function(e){return e.x*e.x+e.y*e.y},r.dot=function(e,t){return e.x*t.x+e.y*t.y},r.add=function(e,t,i){e.x=t.x+i.x,e.y=t.y+i.y},r.sub=function(e,t,i){e.x=t.x-i.x,e.y=t.y-i.y},r.scale=function(e,t,i){e.x=t.x*i,e.y=t.y*i},r.scaleAndAdd=function(e,t,i,n){e.x=t.x+i.x*n,e.y=t.y+i.y*n},r.lerp=function(e,t,i,n){var s=1-n;e.x=s*t.x+n*i.x,e.y=s*t.y+n*i.y},r}(),ii=mfe,kb=Math.min,Rb=Math.max,kf=new ii,Rf=new ii,Of=new ii,zf=new ii,fy=new ii,py=new ii,gfe=function(){function r(e,t,i,n){i<0&&(e=e+i,i=-i),n<0&&(t=t+n,n=-n),this.x=e,this.y=t,this.width=i,this.height=n}return r.prototype.union=function(e){var t=kb(e.x,this.x),i=kb(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Rb(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=Rb(e.y+e.height,this.y+this.height)-i:this.height=e.height,this.x=t,this.y=i},r.prototype.applyTransform=function(e){r.applyTransform(this,this,e)},r.prototype.calculateTransform=function(e){var t=this,i=e.width/t.width,n=e.height/t.height,s=ks();return nc(s,s,[-t.x,-t.y]),bL(s,s,[i,n]),nc(s,s,[e.x,e.y]),s},r.prototype.intersect=function(e,t){if(!e)return!1;e instanceof r||(e=r.create(e));var i=this,n=i.x,s=i.x+i.width,u=i.y,a=i.y+i.height,h=e.x,p=e.x+e.width,m=e.y,v=e.y+e.height,x=!(s<h||p<n||a<m||v<u);if(t){var w=1/0,T=0,C=Math.abs(s-h),I=Math.abs(p-n),k=Math.abs(a-m),R=Math.abs(v-u),z=Math.min(C,I),$=Math.min(k,R);s<h||p<n?z>T&&(T=z,C<I?ii.set(py,-C,0):ii.set(py,I,0)):z<w&&(w=z,C<I?ii.set(fy,C,0):ii.set(fy,-I,0)),a<m||v<u?$>T&&(T=$,k<R?ii.set(py,0,-k):ii.set(py,0,R)):z<w&&(w=z,k<R?ii.set(fy,0,k):ii.set(fy,0,-R))}return t&&ii.copy(t,x?fy:py),x},r.prototype.contain=function(e,t){var i=this;return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copy=function(e){r.copy(this,e)},r.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},r.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},r.prototype.isZero=function(){return this.width===0||this.height===0},r.create=function(e){return new r(e.x,e.y,e.width,e.height)},r.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},r.applyTransform=function(e,t,i){if(!i){e!==t&&r.copy(e,t);return}if(i[1]<1e-5&&i[1]>-1e-5&&i[2]<1e-5&&i[2]>-1e-5){var n=i[0],s=i[3],u=i[4],a=i[5];e.x=t.x*n+u,e.y=t.y*s+a,e.width=t.width*n,e.height=t.height*s,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}kf.x=Of.x=t.x,kf.y=zf.y=t.y,Rf.x=zf.x=t.x+t.width,Rf.y=Of.y=t.y+t.height,kf.transform(i),zf.transform(i),Rf.transform(i),Of.transform(i),e.x=kb(kf.x,Rf.x,Of.x,zf.x),e.y=kb(kf.y,Rf.y,Of.y,zf.y);var h=Rb(kf.x,Rf.x,Of.x,zf.x),p=Rb(kf.y,Rf.y,Of.y,zf.y);e.width=h-e.x,e.height=p-e.y},r}(),ai=gfe,bj="silent";function vfe(r,e,t){return{type:r,event:t,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:_fe}}function _fe(){oh(this.event)}var yfe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.handler=null,t}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(xl),my=function(){function r(e,t){this.x=e,this.y=t}return r}(),xfe=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],ZA=new ai(0,0,0,0),wj=function(r){lt(e,r);function e(t,i,n,s,u){var a=r.call(this)||this;return a._hovered=new my(0,0),a.storage=t,a.painter=i,a.painterRoot=s,a._pointerSize=u,n=n||new yfe,a.proxy=null,a.setHandlerProxy(n),a._draggingMgr=new efe(a),a}return e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(ue(xfe,function(i){t.on&&t.on(i,this[i],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var i=t.zrX,n=t.zrY,s=Sj(this,i,n),u=this._hovered,a=u.target;a&&!a.__zr&&(u=this.findHover(u.x,u.y),a=u.target);var h=this._hovered=s?new my(i,n):this.findHover(i,n),p=h.target,m=this.proxy;m.setCursor&&m.setCursor(p?p.cursor:"default"),a&&p!==a&&this.dispatchToElement(u,"mouseout",t),this.dispatchToElement(h,"mousemove",t),p&&p!==a&&this.dispatchToElement(h,"mouseover",t)},e.prototype.mouseout=function(t){var i=t.zrEventControl;i!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),i!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new my(0,0)},e.prototype.dispatch=function(t,i){var n=this[t];n&&n.call(this,i)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var i=this.proxy;i.setCursor&&i.setCursor(t)},e.prototype.dispatchToElement=function(t,i,n){t=t||{};var s=t.target;if(!(s&&s.silent)){for(var u="on"+i,a=vfe(i,t,n);s&&(s[u]&&(a.cancelBubble=!!s[u].call(s,a)),s.trigger(i,a),s=s.__hostTarget?s.__hostTarget:s.parent,!a.cancelBubble););a.cancelBubble||(this.trigger(i,a),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(h){typeof h[u]=="function"&&h[u].call(h,a),h.trigger&&h.trigger(i,a)}))}},e.prototype.findHover=function(t,i,n){var s=this.storage.getDisplayList(),u=new my(t,i);if(v5(s,u,t,i,n),this._pointerSize&&!u.target){for(var a=[],h=this._pointerSize,p=h/2,m=new ai(t-p,i-p,h,h),v=s.length-1;v>=0;v--){var x=s[v];x!==n&&!x.ignore&&!x.ignoreCoarsePointer&&(!x.parent||!x.parent.ignoreCoarsePointer)&&(ZA.copy(x.getBoundingRect()),x.transform&&ZA.applyTransform(x.transform),ZA.intersect(m)&&a.push(x))}if(a.length)for(var w=4,T=Math.PI/12,C=Math.PI*2,I=0;I<p;I+=w)for(var k=0;k<C;k+=T){var R=t+I*Math.cos(k),z=i+I*Math.sin(k);if(v5(a,u,R,z,n),u.target)return u}}return u},e.prototype.processGesture=function(t,i){this._gestureMgr||(this._gestureMgr=new dfe);var n=this._gestureMgr;i==="start"&&n.clear();var s=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(i==="end"&&n.clear(),s){var u=s.type;t.gestureEvent=u;var a=new my;a.target=s.target,this.dispatchToElement(a,u,s.event)}},e}(xl);ue(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(r){wj.prototype[r]=function(e){var t=e.zrX,i=e.zrY,n=Sj(this,t,i),s,u;if((r!=="mouseup"||!n)&&(s=this.findHover(t,i),u=s.target),r==="mousedown")this._downEl=u,this._downPoint=[e.zrX,e.zrY],this._upEl=u;else if(r==="mouseup")this._upEl=u;else if(r==="click"){if(this._downEl!==this._upEl||!this._downPoint||md(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(s,r,e)}});function bfe(r,e,t){if(r[r.rectHover?"rectContain":"contain"](e,t)){for(var i=r,n=void 0,s=!1;i;){if(i.ignoreClip&&(s=!0),!s){var u=i.getClipPath();if(u&&!u.contain(e,t))return!1}i.silent&&(n=!0);var a=i.__hostTarget;i=a||i.parent}return n?bj:!0}return!1}function v5(r,e,t,i,n){for(var s=r.length-1;s>=0;s--){var u=r[s],a=void 0;if(u!==n&&!u.ignore&&(a=bfe(u,t,i))&&(!e.topTarget&&(e.topTarget=u),a!==bj)){e.target=u;break}}}function Sj(r,e,t){var i=r.painter;return e<0||e>i.getWidth()||t<0||t>i.getHeight()}var wfe=wj,Tj=32,gy=7;function Sfe(r){for(var e=0;r>=Tj;)e|=r&1,r>>=1;return r+e}function _5(r,e,t,i){var n=e+1;if(n===t)return 1;if(i(r[n++],r[e])<0){for(;n<t&&i(r[n],r[n-1])<0;)n++;Tfe(r,e,n)}else for(;n<t&&i(r[n],r[n-1])>=0;)n++;return n-e}function Tfe(r,e,t){for(t--;e<t;){var i=r[e];r[e++]=r[t],r[t--]=i}}function y5(r,e,t,i,n){for(i===e&&i++;i<t;i++){for(var s=r[i],u=e,a=i,h;u<a;)h=u+a>>>1,n(s,r[h])<0?a=h:u=h+1;var p=i-u;switch(p){case 3:r[u+3]=r[u+2];case 2:r[u+2]=r[u+1];case 1:r[u+1]=r[u];break;default:for(;p>0;)r[u+p]=r[u+p-1],p--}r[u]=s}}function XA(r,e,t,i,n,s){var u=0,a=0,h=1;if(s(r,e[t+n])>0){for(a=i-n;h<a&&s(r,e[t+n+h])>0;)u=h,h=(h<<1)+1,h<=0&&(h=a);h>a&&(h=a),u+=n,h+=n}else{for(a=n+1;h<a&&s(r,e[t+n-h])<=0;)u=h,h=(h<<1)+1,h<=0&&(h=a);h>a&&(h=a);var p=u;u=n-h,h=n-p}for(u++;u<h;){var m=u+(h-u>>>1);s(r,e[t+m])>0?u=m+1:h=m}return h}function YA(r,e,t,i,n,s){var u=0,a=0,h=1;if(s(r,e[t+n])<0){for(a=n+1;h<a&&s(r,e[t+n-h])<0;)u=h,h=(h<<1)+1,h<=0&&(h=a);h>a&&(h=a);var p=u;u=n-h,h=n-p}else{for(a=i-n;h<a&&s(r,e[t+n+h])>=0;)u=h,h=(h<<1)+1,h<=0&&(h=a);h>a&&(h=a),u+=n,h+=n}for(u++;u<h;){var m=u+(h-u>>>1);s(r,e[t+m])<0?h=m:u=m+1}return h}function Mfe(r,e){var t=gy,i,n,s=0,u=[];i=[],n=[];function a(w,T){i[s]=w,n[s]=T,s+=1}function h(){for(;s>1;){var w=s-2;if(w>=1&&n[w-1]<=n[w]+n[w+1]||w>=2&&n[w-2]<=n[w]+n[w-1])n[w-1]<n[w+1]&&w--;else if(n[w]>n[w+1])break;m(w)}}function p(){for(;s>1;){var w=s-2;w>0&&n[w-1]<n[w+1]&&w--,m(w)}}function m(w){var T=i[w],C=n[w],I=i[w+1],k=n[w+1];n[w]=C+k,w===s-3&&(i[w+1]=i[w+2],n[w+1]=n[w+2]),s--;var R=YA(r[I],r,T,C,0,e);T+=R,C-=R,C!==0&&(k=XA(r[T+C-1],r,I,k,k-1,e),k!==0&&(C<=k?v(T,C,I,k):x(T,C,I,k)))}function v(w,T,C,I){var k=0;for(k=0;k<T;k++)u[k]=r[w+k];var R=0,z=C,$=w;if(r[$++]=r[z++],--I===0){for(k=0;k<T;k++)r[$+k]=u[R+k];return}if(T===1){for(k=0;k<I;k++)r[$+k]=r[z+k];r[$+I]=u[R];return}for(var j=t,G,Y,Z;;){G=0,Y=0,Z=!1;do if(e(r[z],u[R])<0){if(r[$++]=r[z++],Y++,G=0,--I===0){Z=!0;break}}else if(r[$++]=u[R++],G++,Y=0,--T===1){Z=!0;break}while((G|Y)<j);if(Z)break;do{if(G=YA(r[z],u,R,T,0,e),G!==0){for(k=0;k<G;k++)r[$+k]=u[R+k];if($+=G,R+=G,T-=G,T<=1){Z=!0;break}}if(r[$++]=r[z++],--I===0){Z=!0;break}if(Y=XA(u[R],r,z,I,0,e),Y!==0){for(k=0;k<Y;k++)r[$+k]=r[z+k];if($+=Y,z+=Y,I-=Y,I===0){Z=!0;break}}if(r[$++]=u[R++],--T===1){Z=!0;break}j--}while(G>=gy||Y>=gy);if(Z)break;j<0&&(j=0),j+=2}if(t=j,t<1&&(t=1),T===1){for(k=0;k<I;k++)r[$+k]=r[z+k];r[$+I]=u[R]}else{if(T===0)throw new Error;for(k=0;k<T;k++)r[$+k]=u[R+k]}}function x(w,T,C,I){var k=0;for(k=0;k<I;k++)u[k]=r[C+k];var R=w+T-1,z=I-1,$=C+I-1,j=0,G=0;if(r[$--]=r[R--],--T===0){for(j=$-(I-1),k=0;k<I;k++)r[j+k]=u[k];return}if(I===1){for($-=T,R-=T,G=$+1,j=R+1,k=T-1;k>=0;k--)r[G+k]=r[j+k];r[$]=u[z];return}for(var Y=t;;){var Z=0,H=0,re=!1;do if(e(u[z],r[R])<0){if(r[$--]=r[R--],Z++,H=0,--T===0){re=!0;break}}else if(r[$--]=u[z--],H++,Z=0,--I===1){re=!0;break}while((Z|H)<Y);if(re)break;do{if(Z=T-YA(u[z],r,w,T,T-1,e),Z!==0){for($-=Z,R-=Z,T-=Z,G=$+1,j=R+1,k=Z-1;k>=0;k--)r[G+k]=r[j+k];if(T===0){re=!0;break}}if(r[$--]=u[z--],--I===1){re=!0;break}if(H=I-XA(r[R],u,0,I,I-1,e),H!==0){for($-=H,z-=H,I-=H,G=$+1,j=z+1,k=0;k<H;k++)r[G+k]=u[j+k];if(I<=1){re=!0;break}}if(r[$--]=r[R--],--T===0){re=!0;break}Y--}while(Z>=gy||H>=gy);if(re)break;Y<0&&(Y=0),Y+=2}if(t=Y,t<1&&(t=1),I===1){for($-=T,R-=T,G=$+1,j=R+1,k=T-1;k>=0;k--)r[G+k]=r[j+k];r[$]=u[z]}else{if(I===0)throw new Error;for(j=$-(I-1),k=0;k<I;k++)r[j+k]=u[k]}}return{mergeRuns:h,forceMergeRuns:p,pushRun:a}}function jw(r,e,t,i){t||(t=0),i||(i=r.length);var n=i-t;if(!(n<2)){var s=0;if(n<Tj){s=_5(r,t,i,e),y5(r,t,i,t+s,e);return}var u=Mfe(r,e),a=Sfe(n);do{if(s=_5(r,t,i,e),s<a){var h=n;h>a&&(h=a),y5(r,t,t+h,t+s,e),s=h}u.pushRun(t,s),u.mergeRuns(),n-=s,t+=s}while(n!==0);u.forceMergeRuns()}}var Ps=1,jy=2,kg=4,x5=!1;function KA(){x5||(x5=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function b5(r,e){return r.zlevel===e.zlevel?r.z===e.z?r.z2-e.z2:r.z-e.z:r.zlevel-e.zlevel}var Afe=function(){function r(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=b5}return r.prototype.traverse=function(e,t){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(e,t)},r.prototype.getDisplayList=function(e,t){t=t||!1;var i=this._displayList;return(e||!i.length)&&this.updateDisplayList(t),i},r.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,i=this._displayList,n=0,s=t.length;n<s;n++)this._updateAndAddDisplayable(t[n],null,e);i.length=this._displayListLen,jw(i,b5)},r.prototype._updateAndAddDisplayable=function(e,t,i){if(!(e.ignore&&!i)){e.beforeUpdate(),e.update(),e.afterUpdate();var n=e.getClipPath();if(e.ignoreClip)t=null;else if(n){t?t=t.slice():t=[];for(var s=n,u=e;s;)s.parent=u,s.updateTransform(),t.push(s),u=s,s=s.getClipPath()}if(e.childrenRef){for(var a=e.childrenRef(),h=0;h<a.length;h++){var p=a[h];e.__dirty&&(p.__dirty|=Ps),this._updateAndAddDisplayable(p,t,i)}e.__dirty=0}else{var m=e;t&&t.length?m.__clipPaths=t:m.__clipPaths&&m.__clipPaths.length>0&&(m.__clipPaths=[]),isNaN(m.z)&&(KA(),m.z=0),isNaN(m.z2)&&(KA(),m.z2=0),isNaN(m.zlevel)&&(KA(),m.zlevel=0),this._displayList[this._displayListLen++]=m}var v=e.getDecalElement&&e.getDecalElement();v&&this._updateAndAddDisplayable(v,t,i);var x=e.getTextGuideLine();x&&this._updateAndAddDisplayable(x,t,i);var w=e.getTextContent();w&&this._updateAndAddDisplayable(w,t,i)}},r.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},r.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,i=e.length;t<i;t++)this.delRoot(e[t]);return}var n=di(this._roots,e);n>=0&&this._roots.splice(n,1)},r.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},r.prototype.getRoots=function(){return this._roots},r.prototype.dispose=function(){this._displayList=null,this._roots=null},r}(),Cfe=Afe,Mj;Mj=Fi.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(r){return setTimeout(r,16)};var ZE=Mj,Hw={linear:function(r){return r},quadraticIn:function(r){return r*r},quadraticOut:function(r){return r*(2-r)},quadraticInOut:function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)},cubicIn:function(r){return r*r*r},cubicOut:function(r){return--r*r*r+1},cubicInOut:function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)},quarticIn:function(r){return r*r*r*r},quarticOut:function(r){return 1- --r*r*r*r},quarticInOut:function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)},quinticIn:function(r){return r*r*r*r*r},quinticOut:function(r){return--r*r*r*r*r+1},quinticInOut:function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)},sinusoidalIn:function(r){return 1-Math.cos(r*Math.PI/2)},sinusoidalOut:function(r){return Math.sin(r*Math.PI/2)},sinusoidalInOut:function(r){return .5*(1-Math.cos(Math.PI*r))},exponentialIn:function(r){return r===0?0:Math.pow(1024,r-1)},exponentialOut:function(r){return r===1?1:1-Math.pow(2,-10*r)},exponentialInOut:function(r){return r===0?0:r===1?1:(r*=2)<1?.5*Math.pow(1024,r-1):.5*(-Math.pow(2,-10*(r-1))+2)},circularIn:function(r){return 1-Math.sqrt(1-r*r)},circularOut:function(r){return Math.sqrt(1- --r*r)},circularInOut:function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)},elasticIn:function(r){var e,t=.1,i=.4;return r===0?0:r===1?1:(!t||t<1?(t=1,e=i/4):e=i*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(r-=1))*Math.sin((r-e)*(2*Math.PI)/i)))},elasticOut:function(r){var e,t=.1,i=.4;return r===0?0:r===1?1:(!t||t<1?(t=1,e=i/4):e=i*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*r)*Math.sin((r-e)*(2*Math.PI)/i)+1)},elasticInOut:function(r){var e,t=.1,i=.4;return r===0?0:r===1?1:(!t||t<1?(t=1,e=i/4):e=i*Math.asin(1/t)/(2*Math.PI),(r*=2)<1?-.5*(t*Math.pow(2,10*(r-=1))*Math.sin((r-e)*(2*Math.PI)/i)):t*Math.pow(2,-10*(r-=1))*Math.sin((r-e)*(2*Math.PI)/i)*.5+1)},backIn:function(r){var e=1.70158;return r*r*((e+1)*r-e)},backOut:function(r){var e=1.70158;return--r*r*((e+1)*r+e)+1},backInOut:function(r){var e=2.5949095;return(r*=2)<1?.5*(r*r*((e+1)*r-e)):.5*((r-=2)*r*((e+1)*r+e)+2)},bounceIn:function(r){return 1-Hw.bounceOut(1-r)},bounceOut:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},bounceInOut:function(r){return r<.5?Hw.bounceIn(r*2)*.5:Hw.bounceOut(r*2-1)*.5+.5}},Aj=Hw,Ob=Math.pow,Cd=Math.sqrt,yS=1e-8,Cj=1e-4,w5=Cd(3),zb=1/3,Hu=Jp(),cl=Jp(),Wg=Jp();function _d(r){return r>-yS&&r<yS}function Ij(r){return r>yS||r<-yS}function Da(r,e,t,i,n){var s=1-n;return s*s*(s*r+3*n*e)+n*n*(n*i+3*s*t)}function S5(r,e,t,i,n){var s=1-n;return 3*(((e-r)*s+2*(t-e)*n)*s+(i-t)*n*n)}function xS(r,e,t,i,n,s){var u=i+3*(e-t)-r,a=3*(t-e*2+r),h=3*(e-r),p=r-n,m=a*a-3*u*h,v=a*h-9*u*p,x=h*h-3*a*p,w=0;if(_d(m)&&_d(v))if(_d(a))s[0]=0;else{var T=-h/a;T>=0&&T<=1&&(s[w++]=T)}else{var C=v*v-4*m*x;if(_d(C)){var I=v/m,T=-a/u+I,k=-I/2;T>=0&&T<=1&&(s[w++]=T),k>=0&&k<=1&&(s[w++]=k)}else if(C>0){var R=Cd(C),z=m*a+1.5*u*(-v+R),$=m*a+1.5*u*(-v-R);z<0?z=-Ob(-z,zb):z=Ob(z,zb),$<0?$=-Ob(-$,zb):$=Ob($,zb);var T=(-a-(z+$))/(3*u);T>=0&&T<=1&&(s[w++]=T)}else{var j=(2*m*a-3*u*v)/(2*Cd(m*m*m)),G=Math.acos(j)/3,Y=Cd(m),Z=Math.cos(G),T=(-a-2*Y*Z)/(3*u),k=(-a+Y*(Z+w5*Math.sin(G)))/(3*u),H=(-a+Y*(Z-w5*Math.sin(G)))/(3*u);T>=0&&T<=1&&(s[w++]=T),k>=0&&k<=1&&(s[w++]=k),H>=0&&H<=1&&(s[w++]=H)}}return w}function Ej(r,e,t,i,n){var s=6*t-12*e+6*r,u=9*e+3*i-3*r-9*t,a=3*e-3*r,h=0;if(_d(u)){if(Ij(s)){var p=-a/s;p>=0&&p<=1&&(n[h++]=p)}}else{var m=s*s-4*u*a;if(_d(m))n[0]=-s/(2*u);else if(m>0){var v=Cd(m),p=(-s+v)/(2*u),x=(-s-v)/(2*u);p>=0&&p<=1&&(n[h++]=p),x>=0&&x<=1&&(n[h++]=x)}}return h}function Od(r,e,t,i,n,s){var u=(e-r)*n+r,a=(t-e)*n+e,h=(i-t)*n+t,p=(a-u)*n+u,m=(h-a)*n+a,v=(m-p)*n+p;s[0]=r,s[1]=u,s[2]=p,s[3]=v,s[4]=v,s[5]=m,s[6]=h,s[7]=i}function Dj(r,e,t,i,n,s,u,a,h,p,m){var v,x=.005,w=1/0,T,C,I,k;Hu[0]=h,Hu[1]=p;for(var R=0;R<1;R+=.05)cl[0]=Da(r,t,n,u,R),cl[1]=Da(e,i,s,a,R),I=Lp(Hu,cl),I<w&&(v=R,w=I);w=1/0;for(var z=0;z<32&&!(x<Cj);z++)T=v-x,C=v+x,cl[0]=Da(r,t,n,u,T),cl[1]=Da(e,i,s,a,T),I=Lp(cl,Hu),T>=0&&I<w?(v=T,w=I):(Wg[0]=Da(r,t,n,u,C),Wg[1]=Da(e,i,s,a,C),k=Lp(Wg,Hu),C<=1&&k<w?(v=C,w=k):x*=.5);return m&&(m[0]=Da(r,t,n,u,v),m[1]=Da(e,i,s,a,v)),Cd(w)}function Ife(r,e,t,i,n,s,u,a,h){for(var p=r,m=e,v=0,x=1/h,w=1;w<=h;w++){var T=w*x,C=Da(r,t,n,u,T),I=Da(e,i,s,a,T),k=C-p,R=I-m;v+=Math.sqrt(k*k+R*R),p=C,m=I}return v}function Va(r,e,t,i){var n=1-i;return n*(n*r+2*i*e)+i*i*t}function XE(r,e,t,i){return 2*((1-i)*(e-r)+i*(t-e))}function Efe(r,e,t,i,n){var s=r-2*e+t,u=2*(e-r),a=r-i,h=0;if(_d(s)){if(Ij(u)){var p=-a/u;p>=0&&p<=1&&(n[h++]=p)}}else{var m=u*u-4*s*a;if(_d(m)){var p=-u/(2*s);p>=0&&p<=1&&(n[h++]=p)}else if(m>0){var v=Cd(m),p=(-u+v)/(2*s),x=(-u-v)/(2*s);p>=0&&p<=1&&(n[h++]=p),x>=0&&x<=1&&(n[h++]=x)}}return h}function Pj(r,e,t){var i=r+t-2*e;return i===0?.5:(r-e)/i}function B0(r,e,t,i,n){var s=(e-r)*i+r,u=(t-e)*i+e,a=(u-s)*i+s;n[0]=r,n[1]=s,n[2]=a,n[3]=a,n[4]=u,n[5]=t}function Lj(r,e,t,i,n,s,u,a,h){var p,m=.005,v=1/0;Hu[0]=u,Hu[1]=a;for(var x=0;x<1;x+=.05){cl[0]=Va(r,t,n,x),cl[1]=Va(e,i,s,x);var w=Lp(Hu,cl);w<v&&(p=x,v=w)}v=1/0;for(var T=0;T<32&&!(m<Cj);T++){var C=p-m,I=p+m;cl[0]=Va(r,t,n,C),cl[1]=Va(e,i,s,C);var w=Lp(cl,Hu);if(C>=0&&w<v)p=C,v=w;else{Wg[0]=Va(r,t,n,I),Wg[1]=Va(e,i,s,I);var k=Lp(Wg,Hu);I<=1&&k<v?(p=I,v=k):m*=.5}}return h&&(h[0]=Va(r,t,n,p),h[1]=Va(e,i,s,p)),Cd(v)}function Dfe(r,e,t,i,n,s,u){for(var a=r,h=e,p=0,m=1/u,v=1;v<=u;v++){var x=v*m,w=Va(r,t,n,x),T=Va(e,i,s,x),C=w-a,I=T-h;p+=Math.sqrt(C*C+I*I),a=w,h=T}return p}var Pfe=/cubic-bezier\(([0-9,\.e ]+)\)/;function wL(r){var e=r&&Pfe.exec(r);if(e){var t=e[1].split(","),i=+Kl(t[0]),n=+Kl(t[1]),s=+Kl(t[2]),u=+Kl(t[3]);if(isNaN(i+n+s+u))return;var a=[];return function(h){return h<=0?0:h>=1?1:xS(0,i,s,1,h,a)&&Da(0,n,u,1,a[0])}}}var Lfe=function(){function r(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||aa,this.ondestroy=e.ondestroy||aa,this.onrestart=e.onrestart||aa,e.easing&&this.setEasing(e.easing)}return r.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var i=this._life,n=e-this._startTime-this._pausedTime,s=n/i;s<0&&(s=0),s=Math.min(s,1);var u=this.easingFunc,a=u?u(s):s;if(this.onframe(a),s===1)if(this.loop){var h=n%i;this._startTime=e-h,this._pausedTime=0,this.onrestart()}else return!0;return!1},r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1},r.prototype.setEasing=function(e){this.easing=e,this.easingFunc=kr(e)?e:Aj[e]||wL(e)},r}(),kfe=Lfe,kj=function(){function r(e){this.value=e}return r}(),Rfe=function(){function r(){this._len=0}return r.prototype.insert=function(e){var t=new kj(e);return this.insertEntry(t),t},r.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},r.prototype.remove=function(e){var t=e.prev,i=e.next;t?t.next=i:this.head=i,i?i.prev=t:this.tail=t,e.next=e.prev=null,this._len--},r.prototype.len=function(){return this._len},r.prototype.clear=function(){this.head=this.tail=null,this._len=0},r}(),Ofe=function(){function r(e){this._list=new Rfe,this._maxSize=10,this._map={},this._maxSize=e}return r.prototype.put=function(e,t){var i=this._list,n=this._map,s=null;if(n[e]==null){var u=i.len(),a=this._lastRemovedEntry;if(u>=this._maxSize&&u>0){var h=i.head;i.remove(h),delete n[h.key],s=h.value,this._lastRemovedEntry=h}a?a.value=t:a=new kj(t),a.key=e,i.insertEntry(a),n[e]=a}return s},r.prototype.get=function(e){var t=this._map[e],i=this._list;if(t!=null)return t!==i.tail&&(i.remove(t),i.insertEntry(t)),t.value},r.prototype.clear=function(){this._list.clear(),this._map={}},r.prototype.len=function(){return this._list.len()},r}(),dx=Ofe,T5={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function eu(r){return r=Math.round(r),r<0?0:r>255?255:r}function zfe(r){return r=Math.round(r),r<0?0:r>360?360:r}function F0(r){return r<0?0:r>1?1:r}function JA(r){var e=r;return e.length&&e.charAt(e.length-1)==="%"?eu(parseFloat(e)/100*255):eu(parseInt(e,10))}function kp(r){var e=r;return e.length&&e.charAt(e.length-1)==="%"?F0(parseFloat(e)/100):F0(parseFloat(e))}function QA(r,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?r+(e-r)*t*6:t*2<1?e:t*3<2?r+(e-r)*(2/3-t)*6:r}function yd(r,e,t){return r+(e-r)*t}function al(r,e,t,i,n){return r[0]=e,r[1]=t,r[2]=i,r[3]=n,r}function YE(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}var Rj=new dx(20),Bb=null;function ug(r,e){Bb&&YE(Bb,e),Bb=Rj.put(r,Bb||e.slice())}function Rs(r,e){if(!!r){e=e||[];var t=Rj.get(r);if(t)return YE(e,t);r=r+"";var i=r.replace(/ /g,"").toLowerCase();if(i in T5)return YE(e,T5[i]),ug(r,e),e;var n=i.length;if(i.charAt(0)==="#"){if(n===4||n===5){var s=parseInt(i.slice(1,4),16);if(!(s>=0&&s<=4095)){al(e,0,0,0,1);return}return al(e,(s&3840)>>4|(s&3840)>>8,s&240|(s&240)>>4,s&15|(s&15)<<4,n===5?parseInt(i.slice(4),16)/15:1),ug(r,e),e}else if(n===7||n===9){var s=parseInt(i.slice(1,7),16);if(!(s>=0&&s<=16777215)){al(e,0,0,0,1);return}return al(e,(s&16711680)>>16,(s&65280)>>8,s&255,n===9?parseInt(i.slice(7),16)/255:1),ug(r,e),e}return}var u=i.indexOf("("),a=i.indexOf(")");if(u!==-1&&a+1===n){var h=i.substr(0,u),p=i.substr(u+1,a-(u+1)).split(","),m=1;switch(h){case"rgba":if(p.length!==4)return p.length===3?al(e,+p[0],+p[1],+p[2],1):al(e,0,0,0,1);m=kp(p.pop());case"rgb":if(p.length>=3)return al(e,JA(p[0]),JA(p[1]),JA(p[2]),p.length===3?m:kp(p[3])),ug(r,e),e;al(e,0,0,0,1);return;case"hsla":if(p.length!==4){al(e,0,0,0,1);return}return p[3]=kp(p[3]),KE(p,e),ug(r,e),e;case"hsl":if(p.length!==3){al(e,0,0,0,1);return}return KE(p,e),ug(r,e),e;default:return}}al(e,0,0,0,1)}}function KE(r,e){var t=(parseFloat(r[0])%360+360)%360/360,i=kp(r[1]),n=kp(r[2]),s=n<=.5?n*(i+1):n+i-n*i,u=n*2-s;return e=e||[],al(e,eu(QA(u,s,t+1/3)*255),eu(QA(u,s,t)*255),eu(QA(u,s,t-1/3)*255),1),r.length===4&&(e[3]=r[3]),e}function Bfe(r){if(!!r){var e=r[0]/255,t=r[1]/255,i=r[2]/255,n=Math.min(e,t,i),s=Math.max(e,t,i),u=s-n,a=(s+n)/2,h,p;if(u===0)h=0,p=0;else{a<.5?p=u/(s+n):p=u/(2-s-n);var m=((s-e)/6+u/2)/u,v=((s-t)/6+u/2)/u,x=((s-i)/6+u/2)/u;e===s?h=x-v:t===s?h=1/3+m-x:i===s&&(h=2/3+v-m),h<0&&(h+=1),h>1&&(h-=1)}var w=[h*360,p,a];return r[3]!=null&&w.push(r[3]),w}}function JE(r,e){var t=Rs(r);if(t){for(var i=0;i<3;i++)e<0?t[i]=t[i]*(1-e)|0:t[i]=(255-t[i])*e+t[i]|0,t[i]>255?t[i]=255:t[i]<0&&(t[i]=0);return eh(t,t.length===4?"rgba":"rgb")}}function eC(r,e,t){if(!(!(e&&e.length)||!(r>=0&&r<=1))){t=t||[];var i=r*(e.length-1),n=Math.floor(i),s=Math.ceil(i),u=e[n],a=e[s],h=i-n;return t[0]=eu(yd(u[0],a[0],h)),t[1]=eu(yd(u[1],a[1],h)),t[2]=eu(yd(u[2],a[2],h)),t[3]=F0(yd(u[3],a[3],h)),t}}function Ffe(r,e,t){if(!(!(e&&e.length)||!(r>=0&&r<=1))){var i=r*(e.length-1),n=Math.floor(i),s=Math.ceil(i),u=Rs(e[n]),a=Rs(e[s]),h=i-n,p=eh([eu(yd(u[0],a[0],h)),eu(yd(u[1],a[1],h)),eu(yd(u[2],a[2],h)),F0(yd(u[3],a[3],h))],"rgba");return t?{color:p,leftIndex:n,rightIndex:s,value:i}:p}}function p0(r,e,t,i){var n=Rs(r);if(r)return n=Bfe(n),e!=null&&(n[0]=zfe(e)),t!=null&&(n[1]=kp(t)),i!=null&&(n[2]=kp(i)),eh(KE(n),"rgba")}function bS(r,e){var t=Rs(r);if(t&&e!=null)return t[3]=F0(e),eh(t,"rgba")}function eh(r,e){if(!(!r||!r.length)){var t=r[0]+","+r[1]+","+r[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(t+=","+r[3]),e+"("+t+")"}}function wS(r,e){var t=Rs(r);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*e:0}var M5=new dx(100);function QE(r){if(gr(r)){var e=M5.get(r);return e||(e=JE(r,-.1),M5.put(r,e)),e}else if(RT(r)){var t=kt({},r);return t.colorStops=Ht(r.colorStops,function(i){return{offset:i.offset,color:JE(i.color,-.1)}}),t}return r}var SS=Math.round;function N0(r){var e;if(!r||r==="transparent")r="none";else if(typeof r=="string"&&r.indexOf("rgba")>-1){var t=Rs(r);t&&(r="rgb("+t[0]+","+t[1]+","+t[2]+")",e=t[3])}return{color:r,opacity:e==null?1:e}}var A5=1e-4;function xd(r){return r<A5&&r>-A5}function Fb(r){return SS(r*1e3)/1e3}function eD(r){return SS(r*1e4)/1e4}function Nfe(r){return"matrix("+Fb(r[0])+","+Fb(r[1])+","+Fb(r[2])+","+Fb(r[3])+","+eD(r[4])+","+eD(r[5])+")"}var Vfe={left:"start",right:"end",center:"middle",middle:"middle"};function $fe(r,e,t){return t==="top"?r+=e/2:t==="bottom"&&(r-=e/2),r}function Gfe(r){return r&&(r.shadowBlur||r.shadowOffsetX||r.shadowOffsetY)}function Ufe(r){var e=r.style,t=r.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),t[0],t[1]].join(",")}function Oj(r){return r&&!!r.image}function jfe(r){return r&&!!r.svgElement}function SL(r){return Oj(r)||jfe(r)}function zj(r){return r.type==="linear"}function Bj(r){return r.type==="radial"}function Fj(r){return r&&(r.type==="linear"||r.type==="radial")}function BT(r){return"url(#"+r+")"}function Nj(r){var e=r.getGlobalScale(),t=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(t)/Math.log(10)),1)}function Vj(r){var e=r.x||0,t=r.y||0,i=(r.rotation||0)*$w,n=Yr(r.scaleX,1),s=Yr(r.scaleY,1),u=r.skewX||0,a=r.skewY||0,h=[];return(e||t)&&h.push("translate("+e+"px,"+t+"px)"),i&&h.push("rotate("+i+")"),(n!==1||s!==1)&&h.push("scale("+n+","+s+")"),(u||a)&&h.push("skew("+SS(u*$w)+"deg, "+SS(a*$w)+"deg)"),h.join(" ")}var Hfe=function(){return Fi.hasGlobalWindow&&kr(window.btoa)?function(r){return window.btoa(unescape(encodeURIComponent(r)))}:typeof Buffer!="undefined"?function(r){return Buffer.from(r).toString("base64")}:function(r){return null}}(),tD=Array.prototype.slice;function Wc(r,e,t){return(e-r)*t+r}function tC(r,e,t,i){for(var n=e.length,s=0;s<n;s++)r[s]=Wc(e[s],t[s],i);return r}function Wfe(r,e,t,i){for(var n=e.length,s=n&&e[0].length,u=0;u<n;u++){r[u]||(r[u]=[]);for(var a=0;a<s;a++)r[u][a]=Wc(e[u][a],t[u][a],i)}return r}function Nb(r,e,t,i){for(var n=e.length,s=0;s<n;s++)r[s]=e[s]+t[s]*i;return r}function C5(r,e,t,i){for(var n=e.length,s=n&&e[0].length,u=0;u<n;u++){r[u]||(r[u]=[]);for(var a=0;a<s;a++)r[u][a]=e[u][a]+t[u][a]*i}return r}function qfe(r,e){for(var t=r.length,i=e.length,n=t>i?e:r,s=Math.min(t,i),u=n[s-1]||{color:[0,0,0,0],offset:0},a=s;a<Math.max(t,i);a++)n.push({offset:u.offset,color:u.color.slice()})}function Zfe(r,e,t){var i=r,n=e;if(!(!i.push||!n.push)){var s=i.length,u=n.length;if(s!==u){var a=s>u;if(a)i.length=u;else for(var h=s;h<u;h++)i.push(t===1?n[h]:tD.call(n[h]))}for(var p=i[0]&&i[0].length,h=0;h<i.length;h++)if(t===1)isNaN(i[h])&&(i[h]=n[h]);else for(var m=0;m<p;m++)isNaN(i[h][m])&&(i[h][m]=n[h][m])}}function m0(r){if(So(r)){var e=r.length;if(So(r[0])){for(var t=[],i=0;i<e;i++)t.push(tD.call(r[i]));return t}return tD.call(r)}return r}function Ww(r){return r[0]=Math.floor(r[0])||0,r[1]=Math.floor(r[1])||0,r[2]=Math.floor(r[2])||0,r[3]=r[3]==null?1:r[3],"rgba("+r.join(",")+")"}function Xfe(r){return So(r&&r[0])?2:1}var Vb=0,qw=1,$j=2,Hy=3,rD=4,iD=5,I5=6;function E5(r){return r===rD||r===iD}function $b(r){return r===qw||r===$j}var vy=[0,0,0,0],Yfe=function(){function r(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return r.prototype.isFinished=function(){return this._finished},r.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},r.prototype.needsAnimate=function(){return this.keyframes.length>=1},r.prototype.getAdditiveTrack=function(){return this._additiveTrack},r.prototype.addKeyframe=function(e,t,i){this._needsSort=!0;var n=this.keyframes,s=n.length,u=!1,a=I5,h=t;if(So(t)){var p=Xfe(t);a=p,(p===1&&!Vi(t[0])||p===2&&!Vi(t[0][0]))&&(u=!0)}else if(Vi(t)&&!z0(t))a=Vb;else if(gr(t))if(!isNaN(+t))a=Vb;else{var m=Rs(t);m&&(h=m,a=Hy)}else if(RT(t)){var v=kt({},h);v.colorStops=Ht(t.colorStops,function(w){return{offset:w.offset,color:Rs(w.color)}}),zj(t)?a=rD:Bj(t)&&(a=iD),h=v}s===0?this.valType=a:(a!==this.valType||a===I5)&&(u=!0),this.discrete=this.discrete||u;var x={time:e,value:h,rawValue:t,percent:0};return i&&(x.easing=i,x.easingFunc=kr(i)?i:Aj[i]||wL(i)),n.push(x),x},r.prototype.prepare=function(e,t){var i=this.keyframes;this._needsSort&&i.sort(function(C,I){return C.time-I.time});for(var n=this.valType,s=i.length,u=i[s-1],a=this.discrete,h=$b(n),p=E5(n),m=0;m<s;m++){var v=i[m],x=v.value,w=u.value;v.percent=v.time/e,a||(h&&m!==s-1?Zfe(x,w,n):p&&qfe(x.colorStops,w.colorStops))}if(!a&&n!==iD&&t&&this.needsAnimate()&&t.needsAnimate()&&n===t.valType&&!t._finished){this._additiveTrack=t;for(var T=i[0].value,m=0;m<s;m++)n===Vb?i[m].additiveValue=i[m].value-T:n===Hy?i[m].additiveValue=Nb([],i[m].value,T,-1):$b(n)&&(i[m].additiveValue=n===qw?Nb([],i[m].value,T,-1):C5([],i[m].value,T,-1))}},r.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var i=this._additiveTrack!=null,n=i?"additiveValue":"value",s=this.valType,u=this.keyframes,a=u.length,h=this.propName,p=s===Hy,m,v=this._lastFr,x=Math.min,w,T;if(a===1)w=T=u[0];else{if(t<0)m=0;else if(t<this._lastFrP){var C=x(v+1,a-1);for(m=C;m>=0&&!(u[m].percent<=t);m--);m=x(m,a-2)}else{for(m=v;m<a&&!(u[m].percent>t);m++);m=x(m-1,a-2)}T=u[m+1],w=u[m]}if(!!(w&&T)){this._lastFr=m,this._lastFrP=t;var I=T.percent-w.percent,k=I===0?1:x((t-w.percent)/I,1);T.easingFunc&&(k=T.easingFunc(k));var R=i?this._additiveValue:p?vy:e[h];if(($b(s)||p)&&!R&&(R=this._additiveValue=[]),this.discrete)e[h]=k<1?w.rawValue:T.rawValue;else if($b(s))s===qw?tC(R,w[n],T[n],k):Wfe(R,w[n],T[n],k);else if(E5(s)){var z=w[n],$=T[n],j=s===rD;e[h]={type:j?"linear":"radial",x:Wc(z.x,$.x,k),y:Wc(z.y,$.y,k),colorStops:Ht(z.colorStops,function(Y,Z){var H=$.colorStops[Z];return{offset:Wc(Y.offset,H.offset,k),color:Ww(tC([],Y.color,H.color,k))}}),global:$.global},j?(e[h].x2=Wc(z.x2,$.x2,k),e[h].y2=Wc(z.y2,$.y2,k)):e[h].r=Wc(z.r,$.r,k)}else if(p)tC(R,w[n],T[n],k),i||(e[h]=Ww(R));else{var G=Wc(w[n],T[n],k);i?this._additiveValue=G:e[h]=G}i&&this._addToTarget(e)}}},r.prototype._addToTarget=function(e){var t=this.valType,i=this.propName,n=this._additiveValue;t===Vb?e[i]=e[i]+n:t===Hy?(Rs(e[i],vy),Nb(vy,vy,n,1),e[i]=Ww(vy)):t===qw?Nb(e[i],e[i],n,1):t===$j&&C5(e[i],e[i],n,1)},r}(),TL=function(){function r(e,t,i,n){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&n){mL("Can' use additive animation on looped animation.");return}this._additiveAnimators=n,this._allowDiscrete=i}return r.prototype.getMaxTime=function(){return this._maxTime},r.prototype.getDelay=function(){return this._delay},r.prototype.getLoop=function(){return this._loop},r.prototype.getTarget=function(){return this._target},r.prototype.changeTarget=function(e){this._target=e},r.prototype.when=function(e,t,i){return this.whenWithKeys(e,t,bi(t),i)},r.prototype.whenWithKeys=function(e,t,i,n){for(var s=this._tracks,u=0;u<i.length;u++){var a=i[u],h=s[a];if(!h){h=s[a]=new Yfe(a);var p=void 0,m=this._getAdditiveTrack(a);if(m){var v=m.keyframes,x=v[v.length-1];p=x&&x.value,m.valType===Hy&&p&&(p=Ww(p))}else p=this._target[a];if(p==null)continue;e>0&&h.addKeyframe(0,m0(p),n),this._trackKeys.push(a)}h.addKeyframe(e,m0(t[a]),n)}return this._maxTime=Math.max(this._maxTime,e),this},r.prototype.pause=function(){this._clip.pause(),this._paused=!0},r.prototype.resume=function(){this._clip.resume(),this._paused=!1},r.prototype.isPaused=function(){return!!this._paused},r.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},r.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,i=0;i<t;i++)e[i].call(this)},r.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var i=0;i<t.length;i++)t[i].call(this)},r.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,i=0;i<t.length;i++)e[t[i]].setFinished()},r.prototype._getAdditiveTrack=function(e){var t,i=this._additiveAnimators;if(i)for(var n=0;n<i.length;n++){var s=i[n].getTrack(e);s&&(t=s)}return t},r.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,i=[],n=this._maxTime||0,s=0;s<this._trackKeys.length;s++){var u=this._trackKeys[s],a=this._tracks[u],h=this._getAdditiveTrack(u),p=a.keyframes,m=p.length;if(a.prepare(n,h),a.needsAnimate())if(!this._allowDiscrete&&a.discrete){var v=p[m-1];v&&(t._target[a.propName]=v.rawValue),a.setFinished()}else i.push(a)}if(i.length||this._force){var x=new kfe({life:n,loop:this._loop,delay:this._delay||0,onframe:function(w){t._started=2;var T=t._additiveAnimators;if(T){for(var C=!1,I=0;I<T.length;I++)if(T[I]._clip){C=!0;break}C||(t._additiveAnimators=null)}for(var I=0;I<i.length;I++)i[I].step(t._target,w);var k=t._onframeCbs;if(k)for(var I=0;I<k.length;I++)k[I](t._target,w)},ondestroy:function(){t._doneCallback()}});this._clip=x,this.animation&&this.animation.addClip(x),e&&x.setEasing(e)}else this._doneCallback();return this}},r.prototype.stop=function(e){if(!!this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},r.prototype.delay=function(e){return this._delay=e,this},r.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},r.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},r.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},r.prototype.getClip=function(){return this._clip},r.prototype.getTrack=function(e){return this._tracks[e]},r.prototype.getTracks=function(){var e=this;return Ht(this._trackKeys,function(t){return e._tracks[t]})},r.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var i=this._tracks,n=this._trackKeys,s=0;s<e.length;s++){var u=i[e[s]];u&&!u.isFinished()&&(t?u.step(this._target,1):this._started===1&&u.step(this._target,0),u.setFinished())}for(var a=!0,s=0;s<n.length;s++)if(!i[n[s]].isFinished()){a=!1;break}return a&&this._abortedCallback(),a},r.prototype.saveTo=function(e,t,i){if(!!e){t=t||this._trackKeys;for(var n=0;n<t.length;n++){var s=t[n],u=this._tracks[s];if(!(!u||u.isFinished())){var a=u.keyframes,h=a[i?0:a.length-1];h&&(e[s]=m0(h.rawValue))}}}},r.prototype.__changeFinalValue=function(e,t){t=t||bi(e);for(var i=0;i<t.length;i++){var n=t[i],s=this._tracks[n];if(!!s){var u=s.keyframes;if(u.length>1){var a=u.pop();s.addKeyframe(a.time,e[n]),s.prepare(this._maxTime,s.getAdditiveTrack())}}}},r}();function Vg(){return new Date().getTime()}var Kfe=function(r){lt(e,r);function e(t){var i=r.call(this)||this;return i._running=!1,i._time=0,i._pausedTime=0,i._pauseStart=0,i._paused=!1,t=t||{},i.stage=t.stage||{},i}return e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var i=t.getClip();i&&this.addClip(i)},e.prototype.removeClip=function(t){if(!!t.animation){var i=t.prev,n=t.next;i?i.next=n:this._head=n,n?n.prev=i:this._tail=i,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var i=t.getClip();i&&this.removeClip(i),t.animation=null},e.prototype.update=function(t){for(var i=Vg()-this._pausedTime,n=i-this._time,s=this._head;s;){var u=s.next,a=s.step(i,n);a&&(s.ondestroy(),this.removeClip(s)),s=u}this._time=i,t||(this.trigger("frame",n),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0;function i(){t._running&&(ZE(i),!t._paused&&t.update())}ZE(i)},e.prototype.start=function(){this._running||(this._time=Vg(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=Vg(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=Vg()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var i=t.next;t.prev=t.next=t.animation=null,t=i}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(t,i){i=i||{},this.start();var n=new TL(t,i.loop);return this.addAnimator(n),n},e}(xl),Jfe=Kfe,Qfe=300,rC=Fi.domSupported,iC=function(){var r=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},i=Ht(r,function(n){var s=n.replace("mouse","pointer");return t.hasOwnProperty(s)?s:n});return{mouse:r,touch:e,pointer:i}}(),D5={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},P5=!1;function nD(r){var e=r.pointerType;return e==="pen"||e==="touch"}function epe(r){r.touching=!0,r.touchTimer!=null&&(clearTimeout(r.touchTimer),r.touchTimer=null),r.touchTimer=setTimeout(function(){r.touching=!1,r.touchTimer=null},700)}function nC(r){r&&(r.zrByTouch=!0)}function tpe(r,e){return ol(r.dom,new rpe(r,e),!0)}function Gj(r,e){for(var t=e,i=!1;t&&t.nodeType!==9&&!(i=t.domBelongToZr||t!==e&&t===r.painterRoot);)t=t.parentNode;return i}var rpe=function(){function r(e,t){this.stopPropagation=aa,this.stopImmediatePropagation=aa,this.preventDefault=aa,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}return r}(),Hl={mousedown:function(r){r=ol(this.dom,r),this.__mayPointerCapture=[r.zrX,r.zrY],this.trigger("mousedown",r)},mousemove:function(r){r=ol(this.dom,r);var e=this.__mayPointerCapture;e&&(r.zrX!==e[0]||r.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",r)},mouseup:function(r){r=ol(this.dom,r),this.__togglePointerCapture(!1),this.trigger("mouseup",r)},mouseout:function(r){r=ol(this.dom,r);var e=r.toElement||r.relatedTarget;Gj(this,e)||(this.__pointerCapturing&&(r.zrEventControl="no_globalout"),this.trigger("mouseout",r))},wheel:function(r){P5=!0,r=ol(this.dom,r),this.trigger("mousewheel",r)},mousewheel:function(r){P5||(r=ol(this.dom,r),this.trigger("mousewheel",r))},touchstart:function(r){r=ol(this.dom,r),nC(r),this.__lastTouchMoment=new Date,this.handler.processGesture(r,"start"),Hl.mousemove.call(this,r),Hl.mousedown.call(this,r)},touchmove:function(r){r=ol(this.dom,r),nC(r),this.handler.processGesture(r,"change"),Hl.mousemove.call(this,r)},touchend:function(r){r=ol(this.dom,r),nC(r),this.handler.processGesture(r,"end"),Hl.mouseup.call(this,r),+new Date-+this.__lastTouchMoment<Qfe&&Hl.click.call(this,r)},pointerdown:function(r){Hl.mousedown.call(this,r)},pointermove:function(r){nD(r)||Hl.mousemove.call(this,r)},pointerup:function(r){Hl.mouseup.call(this,r)},pointerout:function(r){nD(r)||Hl.mouseout.call(this,r)}};ue(["click","dblclick","contextmenu"],function(r){Hl[r]=function(e){e=ol(this.dom,e),this.trigger(r,e)}});var aD={pointermove:function(r){nD(r)||aD.mousemove.call(this,r)},pointerup:function(r){aD.mouseup.call(this,r)},mousemove:function(r){this.trigger("mousemove",r)},mouseup:function(r){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",r),e&&(r.zrEventControl="only_globalout",this.trigger("mouseout",r))}};function ipe(r,e){var t=e.domHandlers;Fi.pointerEventsSupported?ue(iC.pointer,function(i){Zw(e,i,function(n){t[i].call(r,n)})}):(Fi.touchEventsSupported&&ue(iC.touch,function(i){Zw(e,i,function(n){t[i].call(r,n),epe(e)})}),ue(iC.mouse,function(i){Zw(e,i,function(n){n=yL(n),e.touching||t[i].call(r,n)})}))}function npe(r,e){Fi.pointerEventsSupported?ue(D5.pointer,t):Fi.touchEventsSupported||ue(D5.mouse,t);function t(i){function n(s){s=yL(s),Gj(r,s.target)||(s=tpe(r,s),e.domHandlers[i].call(r,s))}Zw(e,i,n,{capture:!0})}}function Zw(r,e,t,i){r.mounted[e]=t,r.listenerOpts[e]=i,qE(r.domTarget,e,t,i)}function aC(r){var e=r.mounted;for(var t in e)e.hasOwnProperty(t)&&hfe(r.domTarget,t,e[t],r.listenerOpts[t]);r.mounted={}}var L5=function(){function r(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}return r}(),ape=function(r){lt(e,r);function e(t,i){var n=r.call(this)||this;return n.__pointerCapturing=!1,n.dom=t,n.painterRoot=i,n._localHandlerScope=new L5(t,Hl),rC&&(n._globalHandlerScope=new L5(document,aD)),ipe(n,n._localHandlerScope),n}return e.prototype.dispose=function(){aC(this._localHandlerScope),rC&&aC(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,rC&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var i=this._globalHandlerScope;t?npe(this,i):aC(i)}},e}(xl),ope=ape,Uj=1;Fi.hasGlobalWindow&&(Uj=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var TS=Uj,oD=.4,sD="#333",lD="#ccc",spe="#eee",k5=zT,R5=5e-5;function Bf(r){return r>R5||r<-R5}var Ff=[],cg=[],oC=ks(),sC=Math.abs,lpe=function(){function r(){}return r.prototype.getLocalTransform=function(e){return r.getLocalTransform(this,e)},r.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},r.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},r.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},r.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},r.prototype.needLocalTransform=function(){return Bf(this.rotation)||Bf(this.x)||Bf(this.y)||Bf(this.scaleX-1)||Bf(this.scaleY-1)||Bf(this.skewX)||Bf(this.skewY)},r.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),i=this.transform;if(!(t||e)){i&&(k5(i),this.invTransform=null);return}i=i||ks(),t?this.getLocalTransform(i):k5(i),e&&(t?Qc(i,e,i):xL(i,e)),this.transform=i,this._resolveGlobalScaleRatio(i)},r.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(Ff);var i=Ff[0]<0?-1:1,n=Ff[1]<0?-1:1,s=((Ff[0]-i)*t+i)/Ff[0]||0,u=((Ff[1]-n)*t+n)/Ff[1]||0;e[0]*=s,e[1]*=s,e[2]*=u,e[3]*=u}this.invTransform=this.invTransform||ks(),Cv(this.invTransform,e)},r.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},r.prototype.setLocalTransform=function(e){if(!!e){var t=e[0]*e[0]+e[1]*e[1],i=e[2]*e[2]+e[3]*e[3],n=Math.atan2(e[1],e[0]),s=Math.PI/2+n-Math.atan2(e[3],e[2]);i=Math.sqrt(i)*Math.cos(s),t=Math.sqrt(t),this.skewX=s,this.skewY=0,this.rotation=-n,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=i,this.originX=0,this.originY=0}},r.prototype.decomposeTransform=function(){if(!!this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||ks(),Qc(cg,e.invTransform,t),t=cg);var i=this.originX,n=this.originY;(i||n)&&(oC[4]=i,oC[5]=n,Qc(cg,t,oC),cg[4]-=i,cg[5]-=n,t=cg),this.setLocalTransform(t)}},r.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},r.prototype.transformCoordToLocal=function(e,t){var i=[e,t],n=this.invTransform;return n&&Qa(i,i,n),i},r.prototype.transformCoordToGlobal=function(e,t){var i=[e,t],n=this.transform;return n&&Qa(i,i,n),i},r.prototype.getLineScale=function(){var e=this.transform;return e&&sC(e[0]-1)>1e-10&&sC(e[3]-1)>1e-10?Math.sqrt(sC(e[0]*e[3]-e[2]*e[1])):1},r.prototype.copyTransform=function(e){jj(this,e)},r.getLocalTransform=function(e,t){t=t||[];var i=e.originX||0,n=e.originY||0,s=e.scaleX,u=e.scaleY,a=e.anchorX,h=e.anchorY,p=e.rotation||0,m=e.x,v=e.y,x=e.skewX?Math.tan(e.skewX):0,w=e.skewY?Math.tan(-e.skewY):0;if(i||n||a||h){var T=i+a,C=n+h;t[4]=-T*s-x*C*u,t[5]=-C*u-w*T*s}else t[4]=t[5]=0;return t[0]=s,t[3]=u,t[1]=w*s,t[2]=x*u,p&&Qp(t,t,p),t[4]+=i+m,t[5]+=n+v,t},r.initDefaultProps=function(){var e=r.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),r}(),ac=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function jj(r,e){for(var t=0;t<ac.length;t++){var i=ac[t];r[i]=e[i]}}var Xc=lpe,O5={};function Os(r,e){e=e||Rd;var t=O5[e];t||(t=O5[e]=new dx(500));var i=t.get(r);return i==null&&(i=ah.measureText(r,e).width,t.put(r,i)),i}function z5(r,e,t,i){var n=Os(r,e),s=FT(e),u=Wy(0,n,t),a=Rg(0,s,i),h=new ai(u,a,n,s);return h}function fx(r,e,t,i){var n=((r||"")+"").split(`
`),s=n.length;if(s===1)return z5(n[0],e,t,i);for(var u=new ai(0,0,0,0),a=0;a<n.length;a++){var h=z5(n[a],e,t,i);a===0?u.copy(h):u.union(h)}return u}function Wy(r,e,t){return t==="right"?r-=e:t==="center"&&(r-=e/2),r}function Rg(r,e,t){return t==="middle"?r-=e/2:t==="bottom"&&(r-=e),r}function FT(r){return Os("\u56FD",r)}function iu(r,e){return typeof r=="string"?r.lastIndexOf("%")>=0?parseFloat(r)/100*e:parseFloat(r):r}function MS(r,e,t){var i=e.position||"inside",n=e.distance!=null?e.distance:5,s=t.height,u=t.width,a=s/2,h=t.x,p=t.y,m="left",v="top";if(i instanceof Array)h+=iu(i[0],t.width),p+=iu(i[1],t.height),m=null,v=null;else switch(i){case"left":h-=n,p+=a,m="right",v="middle";break;case"right":h+=n+u,p+=a,v="middle";break;case"top":h+=u/2,p-=n,m="center",v="bottom";break;case"bottom":h+=u/2,p+=s+n,m="center";break;case"inside":h+=u/2,p+=a,m="center",v="middle";break;case"insideLeft":h+=n,p+=a,v="middle";break;case"insideRight":h+=u-n,p+=a,m="right",v="middle";break;case"insideTop":h+=u/2,p+=n,m="center";break;case"insideBottom":h+=u/2,p+=s-n,m="center",v="bottom";break;case"insideTopLeft":h+=n,p+=n;break;case"insideTopRight":h+=u-n,p+=n,m="right";break;case"insideBottomLeft":h+=n,p+=s-n,v="bottom";break;case"insideBottomRight":h+=u-n,p+=s-n,m="right",v="bottom";break}return r=r||{},r.x=h,r.y=p,r.align=m,r.verticalAlign=v,r}var lC="__zr_normal__",uC=ac.concat(["ignore"]),upe=ic(ac,function(r,e){return r[e]=!0,r},{ignore:!1}),hg={},cpe=new ai(0,0,0,0),ML=function(){function r(e){this.id=gj(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return r.prototype._init=function(e){this.attr(e)},r.prototype.drift=function(e,t,i){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=e,n[5]+=t,this.decomposeTransform(),this.markRedraw()},r.prototype.beforeUpdate=function(){},r.prototype.afterUpdate=function(){},r.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},r.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var i=this.textConfig,n=i.local,s=t.innerTransformable,u=void 0,a=void 0,h=!1;s.parent=n?this:null;var p=!1;if(s.copyTransform(t),i.position!=null){var m=cpe;i.layoutRect?m.copy(i.layoutRect):m.copy(this.getBoundingRect()),n||m.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(hg,i,m):MS(hg,i,m),s.x=hg.x,s.y=hg.y,u=hg.align,a=hg.verticalAlign;var v=i.origin;if(v&&i.rotation!=null){var x=void 0,w=void 0;v==="center"?(x=m.width*.5,w=m.height*.5):(x=iu(v[0],m.width),w=iu(v[1],m.height)),p=!0,s.originX=-s.x+x+(n?0:m.x),s.originY=-s.y+w+(n?0:m.y)}}i.rotation!=null&&(s.rotation=i.rotation);var T=i.offset;T&&(s.x+=T[0],s.y+=T[1],p||(s.originX=-T[0],s.originY=-T[1]));var C=i.inside==null?typeof i.position=="string"&&i.position.indexOf("inside")>=0:i.inside,I=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),k=void 0,R=void 0,z=void 0;C&&this.canBeInsideText()?(k=i.insideFill,R=i.insideStroke,(k==null||k==="auto")&&(k=this.getInsideTextFill()),(R==null||R==="auto")&&(R=this.getInsideTextStroke(k),z=!0)):(k=i.outsideFill,R=i.outsideStroke,(k==null||k==="auto")&&(k=this.getOutsideFill()),(R==null||R==="auto")&&(R=this.getOutsideStroke(k),z=!0)),k=k||"#000",(k!==I.fill||R!==I.stroke||z!==I.autoStroke||u!==I.align||a!==I.verticalAlign)&&(h=!0,I.fill=k,I.stroke=R,I.autoStroke=z,I.align=u,I.verticalAlign=a,t.setDefaultTextStyle(I)),t.__dirty|=Ps,h&&t.dirtyStyle(!0)}},r.prototype.canBeInsideText=function(){return!0},r.prototype.getInsideTextFill=function(){return"#fff"},r.prototype.getInsideTextStroke=function(e){return"#000"},r.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?lD:sD},r.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),i=typeof t=="string"&&Rs(t);i||(i=[255,255,255,1]);for(var n=i[3],s=this.__zr.isDarkMode(),u=0;u<3;u++)i[u]=i[u]*n+(s?0:255)*(1-n);return i[3]=1,eh(i,"rgba")},r.prototype.traverse=function(e,t){},r.prototype.attrKV=function(e,t){e==="textConfig"?this.setTextConfig(t):e==="textContent"?this.setTextContent(t):e==="clipPath"?this.setClipPath(t):e==="extra"?(this.extra=this.extra||{},kt(this.extra,t)):this[e]=t},r.prototype.hide=function(){this.ignore=!0,this.markRedraw()},r.prototype.show=function(){this.ignore=!1,this.markRedraw()},r.prototype.attr=function(e,t){if(typeof e=="string")this.attrKV(e,t);else if(Br(e))for(var i=e,n=bi(i),s=0;s<n.length;s++){var u=n[s];this.attrKV(u,e[u])}return this.markRedraw(),this},r.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,i=0;i<this.animators.length;i++){var n=this.animators[i],s=n.__fromStateTransition;if(!(n.getLoop()||s&&s!==lC)){var u=n.targetName,a=u?t[u]:t;n.saveTo(a)}}},r.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,uC)},r.prototype._savePrimaryToNormal=function(e,t,i){for(var n=0;n<i.length;n++){var s=i[n];e[s]!=null&&!(s in t)&&(t[s]=this[s])}},r.prototype.hasState=function(){return this.currentStates.length>0},r.prototype.getState=function(e){return this.states[e]},r.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},r.prototype.clearStates=function(e){this.useState(lC,!1,e)},r.prototype.useState=function(e,t,i,n){var s=e===lC,u=this.hasState();if(!(!u&&s)){var a=this.currentStates,h=this.stateTransition;if(!(di(a,e)>=0&&(t||a.length===1))){var p;if(this.stateProxy&&!s&&(p=this.stateProxy(e)),p||(p=this.states&&this.states[e]),!p&&!s){mL("State "+e+" not exists.");return}s||this.saveCurrentToNormalState(p);var m=!!(p&&p.hoverLayer||n);m&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,p,this._normalState,t,!i&&!this.__inHover&&h&&h.duration>0,h);var v=this._textContent,x=this._textGuide;return v&&v.useState(e,t,i,m),x&&x.useState(e,t,i,m),s?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!m&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Ps),p}}},r.prototype.useStates=function(e,t,i){if(!e.length)this.clearStates();else{var n=[],s=this.currentStates,u=e.length,a=u===s.length;if(a){for(var h=0;h<u;h++)if(e[h]!==s[h]){a=!1;break}}if(a)return;for(var h=0;h<u;h++){var p=e[h],m=void 0;this.stateProxy&&(m=this.stateProxy(p,e)),m||(m=this.states[p]),m&&n.push(m)}var v=n[u-1],x=!!(v&&v.hoverLayer||i);x&&this._toggleHoverLayerFlag(!0);var w=this._mergeStates(n),T=this.stateTransition;this.saveCurrentToNormalState(w),this._applyStateObj(e.join(","),w,this._normalState,!1,!t&&!this.__inHover&&T&&T.duration>0,T);var C=this._textContent,I=this._textGuide;C&&C.useStates(e,t,x),I&&I.useStates(e,t,x),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!x&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Ps)}},r.prototype.isSilent=function(){for(var e=this.silent,t=this.parent;!e&&t;){if(t.silent){e=!0;break}t=t.parent}return e},r.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},r.prototype.removeState=function(e){var t=di(this.currentStates,e);if(t>=0){var i=this.currentStates.slice();i.splice(t,1),this.useStates(i)}},r.prototype.replaceState=function(e,t,i){var n=this.currentStates.slice(),s=di(n,e),u=di(n,t)>=0;s>=0?u?n.splice(s,1):n[s]=t:i&&!u&&n.push(t),this.useStates(n)},r.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},r.prototype._mergeStates=function(e){for(var t={},i,n=0;n<e.length;n++){var s=e[n];kt(t,s),s.textConfig&&(i=i||{},kt(i,s.textConfig))}return i&&(t.textConfig=i),t},r.prototype._applyStateObj=function(e,t,i,n,s,u){var a=!(t&&n);t&&t.textConfig?(this.textConfig=kt({},n?this.textConfig:i.textConfig),kt(this.textConfig,t.textConfig)):a&&i.textConfig&&(this.textConfig=i.textConfig);for(var h={},p=!1,m=0;m<uC.length;m++){var v=uC[m],x=s&&upe[v];t&&t[v]!=null?x?(p=!0,h[v]=t[v]):this[v]=t[v]:a&&i[v]!=null&&(x?(p=!0,h[v]=i[v]):this[v]=i[v])}if(!s)for(var m=0;m<this.animators.length;m++){var w=this.animators[m],T=w.targetName;w.getLoop()||w.__changeFinalValue(T?(t||i)[T]:t||i)}p&&this._transitionState(e,h,u)},r.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},r.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},r.prototype.getClipPath=function(){return this._clipPath},r.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},r.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},r.prototype.getTextContent=function(){return this._textContent},r.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new Xc,this._attachComponent(e),this._textContent=e,this.markRedraw())},r.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),kt(this.textConfig,e),this.markRedraw()},r.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},r.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},r.prototype.getTextGuideLine=function(){return this._textGuide},r.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},r.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},r.prototype.markRedraw=function(){this.__dirty|=Ps;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},r.prototype.dirty=function(){this.markRedraw()},r.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,i=this._textGuide;t&&(t.__inHover=e),i&&(i.__inHover=e)},r.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var i=0;i<t.length;i++)e.animation.addAnimator(t[i]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},r.prototype.removeSelfFromZr=function(e){if(!!this.__zr){this.__zr=null;var t=this.animators;if(t)for(var i=0;i<t.length;i++)e.animation.removeAnimator(t[i]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},r.prototype.animate=function(e,t,i){var n=e?this[e]:this,s=new TL(n,t,i);return e&&(s.targetName=e),this.addAnimator(s,e),s},r.prototype.addAnimator=function(e,t){var i=this.__zr,n=this;e.during(function(){n.updateDuringAnimation(t)}).done(function(){var s=n.animators,u=di(s,e);u>=0&&s.splice(u,1)}),this.animators.push(e),i&&i.animation.addAnimator(e),i&&i.wakeUp()},r.prototype.updateDuringAnimation=function(e){this.markRedraw()},r.prototype.stopAnimation=function(e,t){for(var i=this.animators,n=i.length,s=[],u=0;u<n;u++){var a=i[u];!e||e===a.scope?a.stop(t):s.push(a)}return this.animators=s,this},r.prototype.animateTo=function(e,t,i){cC(this,e,t,i)},r.prototype.animateFrom=function(e,t,i){cC(this,e,t,i,!0)},r.prototype._transitionState=function(e,t,i,n){for(var s=cC(this,t,i,n),u=0;u<s.length;u++)s[u].__fromStateTransition=e},r.prototype.getBoundingRect=function(){return null},r.prototype.getPaintRect=function(){return null},r.initDefaultProps=function(){var e=r.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=Ps;function t(i,n,s,u){Object.defineProperty(e,i,{get:function(){if(!this[n]){var h=this[n]=[];a(this,h)}return this[n]},set:function(h){this[s]=h[0],this[u]=h[1],this[n]=h,a(this,h)}});function a(h,p){Object.defineProperty(p,0,{get:function(){return h[s]},set:function(m){h[s]=m}}),Object.defineProperty(p,1,{get:function(){return h[u]},set:function(m){h[u]=m}})}}Object.defineProperty&&(t("position","_legacyPos","x","y"),t("scale","_legacyScale","scaleX","scaleY"),t("origin","_legacyOrigin","originX","originY"))}(),r}();pa(ML,xl);pa(ML,Xc);function cC(r,e,t,i,n){t=t||{};var s=[];Hj(r,"",r,e,t,i,s,n);var u=s.length,a=!1,h=t.done,p=t.aborted,m=function(){a=!0,u--,u<=0&&(a?h&&h():p&&p())},v=function(){u--,u<=0&&(a?h&&h():p&&p())};u||h&&h(),s.length>0&&t.during&&s[0].during(function(T,C){t.during(C)});for(var x=0;x<s.length;x++){var w=s[x];m&&w.done(m),v&&w.aborted(v),t.force&&w.duration(t.duration),w.start(t.easing)}return s}function hC(r,e,t){for(var i=0;i<t;i++)r[i]=e[i]}function hpe(r){return So(r[0])}function dpe(r,e,t){if(So(e[t]))if(So(r[t])||(r[t]=[]),us(e[t])){var i=e[t].length;r[t].length!==i&&(r[t]=new e[t].constructor(i),hC(r[t],e[t],i))}else{var n=e[t],s=r[t],u=n.length;if(hpe(n))for(var a=n[0].length,h=0;h<u;h++)s[h]?hC(s[h],n[h],a):s[h]=Array.prototype.slice.call(n[h]);else hC(s,n,u);s.length=n.length}else r[t]=e[t]}function fpe(r,e){return r===e||So(r)&&So(e)&&ppe(r,e)}function ppe(r,e){var t=r.length;if(t!==e.length)return!1;for(var i=0;i<t;i++)if(r[i]!==e[i])return!1;return!0}function Hj(r,e,t,i,n,s,u,a){for(var h=bi(i),p=n.duration,m=n.delay,v=n.additive,x=n.setToFinal,w=!Br(s),T=r.animators,C=[],I=0;I<h.length;I++){var k=h[I],R=i[k];if(R!=null&&t[k]!=null&&(w||s[k]))if(Br(R)&&!So(R)&&!RT(R)){if(e){a||(t[k]=R,r.updateDuringAnimation(e));continue}Hj(r,k,t[k],R,n,s&&s[k],u,a)}else C.push(k);else a||(t[k]=R,r.updateDuringAnimation(e),C.push(k))}var z=C.length;if(!v&&z)for(var $=0;$<T.length;$++){var j=T[$];if(j.targetName===e){var G=j.stopTracks(C);if(G){var Y=di(T,j);T.splice(Y,1)}}}if(n.force||(C=un(C,function(ne){return!fpe(i[ne],t[ne])}),z=C.length),z>0||n.force&&!u.length){var Z=void 0,H=void 0,re=void 0;if(a){H={},x&&(Z={});for(var $=0;$<z;$++){var k=C[$];H[k]=t[k],x?Z[k]=i[k]:t[k]=i[k]}}else if(x){re={};for(var $=0;$<z;$++){var k=C[$];re[k]=m0(t[k]),dpe(t,i,k)}}var j=new TL(t,!1,!1,v?un(T,function(se){return se.targetName===e}):null);j.targetName=e,n.scope&&(j.scope=n.scope),x&&Z&&j.whenWithKeys(0,Z,C),re&&j.whenWithKeys(0,re,C),j.whenWithKeys(p==null?500:p,a?H:i,C).delay(m||0),r.addAnimator(j,e),u.push(j)}}var Wj=ML,qj=function(r){lt(e,r);function e(t){var i=r.call(this)||this;return i.isGroup=!0,i._children=[],i.attr(t),i}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var i=this._children,n=0;n<i.length;n++)if(i[n].name===t)return i[n]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,i){if(t&&t!==this&&t.parent!==this&&i&&i.parent===this){var n=this._children,s=n.indexOf(i);s>=0&&(n.splice(s,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,i){var n=di(this._children,t);return n>=0&&this.replaceAt(i,n),this},e.prototype.replaceAt=function(t,i){var n=this._children,s=n[i];if(t&&t!==this&&t.parent!==this&&t!==s){n[i]=t,s.parent=null;var u=this.__zr;u&&s.removeSelfFromZr(u),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var i=this.__zr;i&&i!==t.__zr&&t.addSelfToZr(i),i&&i.refresh()},e.prototype.remove=function(t){var i=this.__zr,n=this._children,s=di(n,t);return s<0?this:(n.splice(s,1),t.parent=null,i&&t.removeSelfFromZr(i),i&&i.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,i=this.__zr,n=0;n<t.length;n++){var s=t[n];i&&s.removeSelfFromZr(i),s.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,i){for(var n=this._children,s=0;s<n.length;s++){var u=n[s];t.call(i,u,s)}return this},e.prototype.traverse=function(t,i){for(var n=0;n<this._children.length;n++){var s=this._children[n],u=t.call(i,s);s.isGroup&&!u&&s.traverse(t,i)}return this},e.prototype.addSelfToZr=function(t){r.prototype.addSelfToZr.call(this,t);for(var i=0;i<this._children.length;i++){var n=this._children[i];n.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){r.prototype.removeSelfFromZr.call(this,t);for(var i=0;i<this._children.length;i++){var n=this._children[i];n.removeSelfFromZr(t)}},e.prototype.getBoundingRect=function(t){for(var i=new ai(0,0,0,0),n=t||this._children,s=[],u=null,a=0;a<n.length;a++){var h=n[a];if(!(h.ignore||h.invisible)){var p=h.getBoundingRect(),m=h.getLocalTransform(s);m?(ai.applyTransform(i,p,m),u=u||i.clone(),u.union(i)):(u=u||p.clone(),u.union(p))}}return u||i},e}(Wj);qj.prototype.type="group";var Vr=qj;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var Xw={},Zj={};function mpe(r){delete Zj[r]}function gpe(r){if(!r)return!1;if(typeof r=="string")return wS(r,1)<oD;if(r.colorStops){for(var e=r.colorStops,t=0,i=e.length,n=0;n<i;n++)t+=wS(e[n].color,1);return t/=i,t<oD}return!1}var vpe=function(){function r(e,t,i){var n=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,i=i||{},this.dom=t,this.id=e;var s=new Cfe,u=i.renderer||"canvas";Xw[u]||(u=bi(Xw)[0]),i.useDirtyRect=i.useDirtyRect==null?!1:i.useDirtyRect;var a=new Xw[u](t,s,i,e),h=i.ssr||a.ssrOnly;this.storage=s,this.painter=a;var p=!Fi.node&&!Fi.worker&&!h?new ope(a.getViewportRoot(),a.root):null,m=i.useCoarsePointer,v=m==null||m==="auto"?Fi.touchEventsSupported:!!m,x=44,w;v&&(w=Yr(i.pointerSize,x)),this.handler=new wfe(s,a,p,a.root,w),this.animation=new Jfe({stage:{update:h?null:function(){return n._flush(!0)}}}),h||this.animation.start()}return r.prototype.add=function(e){this._disposed||!e||(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},r.prototype.remove=function(e){this._disposed||!e||(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},r.prototype.configLayer=function(e,t){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh())},r.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=gpe(e))},r.prototype.getBackgroundColor=function(){return this._backgroundColor},r.prototype.setDarkMode=function(e){this._darkMode=e},r.prototype.isDarkMode=function(){return this._darkMode},r.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},r.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},r.prototype.flush=function(){this._disposed||this._flush(!1)},r.prototype._flush=function(e){var t,i=Vg();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var n=Vg();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:n-i})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},r.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},r.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},r.prototype.refreshHover=function(){this._needsRefreshHover=!0},r.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},r.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},r.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},r.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},r.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},r.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},r.prototype.findHover=function(e,t){if(!this._disposed)return this.handler.findHover(e,t)},r.prototype.on=function(e,t,i){return this._disposed||this.handler.on(e,t,i),this},r.prototype.off=function(e,t){this._disposed||this.handler.off(e,t)},r.prototype.trigger=function(e,t){this._disposed||this.handler.trigger(e,t)},r.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof Vr&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},r.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,mpe(this.id))},r}();function B5(r,e){var t=new vpe(gj(),r,e);return Zj[t.id]=t,t}function _pe(r,e){Xw[r]=e}var uD;function ype(r){if(typeof uD=="function")return uD(r)}function xpe(r){uD=r}var F5=1e-4,Xj=20;function bpe(r){return r.replace(/^\s+|\s+$/g,"")}function on(r,e,t,i){var n=e[0],s=e[1],u=t[0],a=t[1],h=s-n,p=a-u;if(h===0)return p===0?u:(u+a)/2;if(i)if(h>0){if(r<=n)return u;if(r>=s)return a}else{if(r>=n)return u;if(r<=s)return a}else{if(r===n)return u;if(r===s)return a}return(r-n)/h*p+u}function sr(r,e){switch(r){case"center":case"middle":r="50%";break;case"left":case"top":r="0%";break;case"right":case"bottom":r="100%";break}return gr(r)?bpe(r).match(/%$/)?parseFloat(r)/100*e:parseFloat(r):r==null?NaN:+r}function ra(r,e,t){return e==null&&(e=10),e=Math.min(Math.max(0,e),Xj),r=(+r).toFixed(e),t?r:+r}function pl(r){return r.sort(function(e,t){return e-t}),r}function qu(r){if(r=+r,isNaN(r))return 0;if(r>1e-14){for(var e=1,t=0;t<15;t++,e*=10)if(Math.round(r*e)/e===r)return t}return wpe(r)}function wpe(r){var e=r.toString().toLowerCase(),t=e.indexOf("e"),i=t>0?+e.slice(t+1):0,n=t>0?t:e.length,s=e.indexOf("."),u=s<0?0:n-1-s;return Math.max(0,u-i)}function Yj(r,e){var t=Math.log,i=Math.LN10,n=Math.floor(t(r[1]-r[0])/i),s=Math.round(t(Math.abs(e[1]-e[0]))/i),u=Math.min(Math.max(-n+s,0),20);return isFinite(u)?u:20}function Spe(r,e){var t=ic(r,function(w,T){return w+(isNaN(T)?0:T)},0);if(t===0)return[];for(var i=Math.pow(10,e),n=Ht(r,function(w){return(isNaN(w)?0:w)/t*i*100}),s=i*100,u=Ht(n,function(w){return Math.floor(w)}),a=ic(u,function(w,T){return w+T},0),h=Ht(n,function(w,T){return w-u[T]});a<s;){for(var p=Number.NEGATIVE_INFINITY,m=null,v=0,x=h.length;v<x;++v)h[v]>p&&(p=h[v],m=v);++u[m],h[m]=0,++a}return Ht(u,function(w){return w/i})}function Tpe(r,e){var t=Math.max(qu(r),qu(e)),i=r+e;return t>Xj?i:ra(i,t)}var N5=9007199254740991;function Kj(r){var e=Math.PI*2;return(r%e+e)%e}function V0(r){return r>-F5&&r<F5}var Mpe=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function oc(r){if(r instanceof Date)return r;if(gr(r)){var e=Mpe.exec(r);if(!e)return new Date(NaN);if(e[8]){var t=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(t-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(r==null)return new Date(NaN);return new Date(Math.round(r))}function Ape(r){return Math.pow(10,AL(r))}function AL(r){if(r===0)return 0;var e=Math.floor(Math.log(r)/Math.LN10);return r/Math.pow(10,e)>=10&&e++,e}function Jj(r,e){var t=AL(r),i=Math.pow(10,t),n=r/i,s;return e?n<1.5?s=1:n<2.5?s=2:n<4?s=3:n<7?s=5:s=10:n<1?s=1:n<2?s=2:n<3?s=3:n<5?s=5:s=10,r=s*i,t>=-20?+r.toFixed(t<0?-t:0):r}function dC(r,e){var t=(r.length-1)*e+1,i=Math.floor(t),n=+r[i-1],s=t-i;return s?n+s*(r[i]-n):n}function V5(r){r.sort(function(h,p){return a(h,p,0)?-1:1});for(var e=-1/0,t=1,i=0;i<r.length;){for(var n=r[i].interval,s=r[i].close,u=0;u<2;u++)n[u]<=e&&(n[u]=e,s[u]=u?1:1-t),e=n[u],t=s[u];n[0]===n[1]&&s[0]*s[1]!==1?r.splice(i,1):i++}return r;function a(h,p,m){return h.interval[m]<p.interval[m]||h.interval[m]===p.interval[m]&&(h.close[m]-p.close[m]===(m?-1:1)||!m&&a(h,p,1))}}function sh(r){var e=parseFloat(r);return e==r&&(e!==0||!gr(r)||r.indexOf("x")<=0)?e:NaN}function Qj(r){return!isNaN(sh(r))}function eH(){return Math.round(Math.random()*9)}function tH(r,e){return e===0?r:tH(e,r%e)}function $5(r,e){return r==null?e:e==null?r:r*e/tH(r,e)}function Qi(r){throw new Error(r)}function G5(r,e,t){return(e-r)*t+r}var rH="series\0",iH="\0_ec_\0";function hn(r){return r instanceof Array?r:r==null?[]:[r]}function jp(r,e,t){if(r){r[e]=r[e]||{},r.emphasis=r.emphasis||{},r.emphasis[e]=r.emphasis[e]||{};for(var i=0,n=t.length;i<n;i++){var s=t[i];!r.emphasis[e].hasOwnProperty(s)&&r[e].hasOwnProperty(s)&&(r.emphasis[e][s]=r[e][s])}}}var U5=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Iv(r){return Br(r)&&!Nt(r)&&!(r instanceof Date)?r.value:r}function Cpe(r){return Br(r)&&!(r instanceof Array)}function nH(r,e,t){var i=t==="normalMerge",n=t==="replaceMerge",s=t==="replaceAll";r=r||[],e=(e||[]).slice();var u=Mr();ue(e,function(h,p){if(!Br(h)){e[p]=null;return}});var a=Ipe(r,u,t);return(i||n)&&Epe(a,r,u,e),i&&Dpe(a,e),i||n?Ppe(a,e,n):s&&Lpe(a,e),kpe(a),a}function Ipe(r,e,t){var i=[];if(t==="replaceAll")return i;for(var n=0;n<r.length;n++){var s=r[n];s&&s.id!=null&&e.set(s.id,n),i.push({existing:t==="replaceMerge"||$0(s)?null:s,newOption:null,keyInfo:null,brandNew:null})}return i}function Epe(r,e,t,i){ue(i,function(n,s){if(!(!n||n.id==null)){var u=g0(n.id),a=t.get(u);if(a!=null){var h=r[a];Vo(!h.newOption,'Duplicated option on id "'+u+'".'),h.newOption=n,h.existing=e[a],i[s]=null}}})}function Dpe(r,e){ue(e,function(t,i){if(!(!t||t.name==null))for(var n=0;n<r.length;n++){var s=r[n].existing;if(!r[n].newOption&&s&&(s.id==null||t.id==null)&&!$0(t)&&!$0(s)&&aH("name",s,t)){r[n].newOption=t,e[i]=null;return}}})}function Ppe(r,e,t){ue(e,function(i){if(!!i){for(var n,s=0;(n=r[s])&&(n.newOption||$0(n.existing)||n.existing&&i.id!=null&&!aH("id",i,n.existing));)s++;n?(n.newOption=i,n.brandNew=t):r.push({newOption:i,brandNew:t,existing:null,keyInfo:null}),s++}})}function Lpe(r,e){ue(e,function(t){r.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}function kpe(r){var e=Mr();ue(r,function(t){var i=t.existing;i&&e.set(i.id,t)}),ue(r,function(t){var i=t.newOption;Vo(!i||i.id==null||!e.get(i.id)||e.get(i.id)===t,"id duplicates: "+(i&&i.id)),i&&i.id!=null&&e.set(i.id,t),!t.keyInfo&&(t.keyInfo={})}),ue(r,function(t,i){var n=t.existing,s=t.newOption,u=t.keyInfo;if(!!Br(s)){if(u.name=s.name!=null?g0(s.name):n?n.name:rH+i,n)u.id=g0(n.id);else if(s.id!=null)u.id=g0(s.id);else{var a=0;do u.id="\0"+u.name+"\0"+a++;while(e.get(u.id))}e.set(u.id,t)}})}function aH(r,e,t){var i=ya(e[r],null),n=ya(t[r],null);return i!=null&&n!=null&&i===n}function g0(r){return ya(r,"")}function ya(r,e){return r==null?e:gr(r)?r:Vi(r)||VE(r)?r+"":e}function CL(r){var e=r.name;return!!(e&&e.indexOf(rH))}function $0(r){return r&&r.id!=null&&g0(r.id).indexOf(iH)===0}function Rpe(r){return iH+r}function Ope(r,e,t){ue(r,function(i){var n=i.newOption;Br(n)&&(i.keyInfo.mainType=e,i.keyInfo.subType=zpe(e,n,i.existing,t))})}function zpe(r,e,t,i){var n=e.type?e.type:t?t.subType:i.determineSubType(r,e);return n}function Bpe(r,e){var t={},i={};return n(r||[],t),n(e||[],i,t),[s(t),s(i)];function n(u,a,h){for(var p=0,m=u.length;p<m;p++){var v=ya(u[p].seriesId,null);if(v==null)return;for(var x=hn(u[p].dataIndex),w=h&&h[v],T=0,C=x.length;T<C;T++){var I=x[T];w&&w[I]?w[I]=null:(a[v]||(a[v]={}))[I]=1}}}function s(u,a){var h=[];for(var p in u)if(u.hasOwnProperty(p)&&u[p]!=null)if(a)h.push(+p);else{var m=s(u[p],!0);m.length&&h.push({seriesId:p,dataIndex:m})}return h}}function Hp(r,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return Nt(e.dataIndex)?Ht(e.dataIndex,function(t){return r.indexOfRawIndex(t)}):r.indexOfRawIndex(e.dataIndex);if(e.name!=null)return Nt(e.name)?Ht(e.name,function(t){return r.indexOfName(t)}):r.indexOfName(e.name)}function ki(){var r="__ec_inner_"+Fpe++;return function(e){return e[r]||(e[r]={})}}var Fpe=eH();function v0(r,e,t){var i=IL(e,t),n=i.mainTypeSpecified,s=i.queryOptionMap,u=i.others,a=u,h=t?t.defaultMainType:null;return!n&&h&&s.set(h,{}),s.each(function(p,m){var v=px(r,m,p,{useDefault:h===m,enableAll:t&&t.enableAll!=null?t.enableAll:!0,enableNone:t&&t.enableNone!=null?t.enableNone:!0});a[m+"Models"]=v.models,a[m+"Model"]=v.models[0]}),a}function IL(r,e){var t;if(gr(r)){var i={};i[r+"Index"]=0,t=i}else t=r;var n=Mr(),s={},u=!1;return ue(t,function(a,h){if(h==="dataIndex"||h==="dataIndexInside"){s[h]=a;return}var p=h.match(/^(\w+)(Index|Id|Name)$/)||[],m=p[1],v=(p[2]||"").toLowerCase();if(!(!m||!v||e&&e.includeMainTypes&&di(e.includeMainTypes,m)<0)){u=u||!!m;var x=n.get(m)||n.set(m,{});x[v]=a}}),{mainTypeSpecified:u,queryOptionMap:n,others:s}}var da={useDefault:!0,enableAll:!1,enableNone:!1},Npe={useDefault:!1,enableAll:!0,enableNone:!0};function px(r,e,t,i){i=i||da;var n=t.index,s=t.id,u=t.name,a={models:null,specified:n!=null||s!=null||u!=null};if(!a.specified){var h=void 0;return a.models=i.useDefault&&(h=r.getComponent(e))?[h]:[],a}return n==="none"||n===!1?(Vo(i.enableNone,'`"none"` or `false` is not a valid value on index option.'),a.models=[],a):(n==="all"&&(Vo(i.enableAll,'`"all"` is not a valid value on index option.'),n=s=u=null),a.models=r.queryComponents({mainType:e,index:n,id:s,name:u}),a)}function oH(r,e,t){r.setAttribute?r.setAttribute(e,t):r[e]=t}function Vpe(r,e){return r.getAttribute?r.getAttribute(e):r[e]}function $pe(r){return r==="auto"?Fi.domSupported?"html":"richText":r||"html"}function cD(r,e){var t=Mr(),i=[];return ue(r,function(n){var s=e(n);(t.get(s)||(i.push(s),t.set(s,[]))).push(n)}),{keys:i,buckets:t}}function sH(r,e,t,i,n){var s=e==null||e==="auto";if(i==null)return i;if(Vi(i)){var u=G5(t||0,i,n);return ra(u,s?Math.max(qu(t||0),qu(i)):e)}else{if(gr(i))return n<1?t:i;for(var a=[],h=t,p=i,m=Math.max(h?h.length:0,p.length),v=0;v<m;++v){var x=r.getDimensionInfo(v);if(x&&x.type==="ordinal")a[v]=(n<1&&h?h:p)[v];else{var w=h&&h[v]?h[v]:0,T=p[v],u=G5(w,T,n);a[v]=ra(u,s?Math.max(qu(w),qu(T)):e)}}return a}}var Gpe=".",Nf="___EC__COMPONENT__CONTAINER___",lH="___EC__EXTENDED_CLASS___";function Zu(r){var e={main:"",sub:""};if(r){var t=r.split(Gpe);e.main=t[0]||"",e.sub=t[1]||""}return e}function Upe(r){Vo(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(r),'componentType "'+r+'" illegal')}function jpe(r){return!!(r&&r[lH])}function EL(r,e){r.$constructor=r,r.extend=function(t){var i=this,n;return Hpe(i)?n=function(s){lt(u,s);function u(){return s.apply(this,arguments)||this}return u}(i):(n=function(){(t.$constructor||i).apply(this,arguments)},Gde(n,this)),kt(n.prototype,t),n[lH]=!0,n.extend=this.extend,n.superCall=Zpe,n.superApply=Xpe,n.superClass=i,n}}function Hpe(r){return kr(r)&&/^class\s/.test(Function.prototype.toString.call(r))}function uH(r,e){r.extend=e.extend}var Wpe=Math.round(Math.random()*10);function qpe(r){var e=["__\0is_clz",Wpe++].join("_");r.prototype[e]=!0,r.isInstance=function(t){return!!(t&&t[e])}}function Zpe(r,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return this.superClass.prototype[e].apply(r,t)}function Xpe(r,e,t){return this.superClass.prototype[e].apply(r,t)}function NT(r){var e={};r.registerClass=function(i){var n=i.type||i.prototype.type;if(n){Upe(n),i.prototype.type=n;var s=Zu(n);if(!s.sub)e[s.main]=i;else if(s.sub!==Nf){var u=t(s);u[s.sub]=i}}return i},r.getClass=function(i,n,s){var u=e[i];if(u&&u[Nf]&&(u=n?u[n]:null),s&&!u)throw new Error(n?"Component "+i+"."+(n||"")+" is used but not imported.":i+".type should be specified.");return u},r.getClassesByMainType=function(i){var n=Zu(i),s=[],u=e[n.main];return u&&u[Nf]?ue(u,function(a,h){h!==Nf&&s.push(a)}):s.push(u),s},r.hasClass=function(i){var n=Zu(i);return!!e[n.main]},r.getAllClassMainTypes=function(){var i=[];return ue(e,function(n,s){i.push(s)}),i},r.hasSubTypes=function(i){var n=Zu(i),s=e[n.main];return s&&s[Nf]};function t(i){var n=e[i.main];return(!n||!n[Nf])&&(n=e[i.main]={},n[Nf]=!0),n}}function Wp(r,e){for(var t=0;t<r.length;t++)r[t][1]||(r[t][1]=r[t][0]);return e=e||!1,function(i,n,s){for(var u={},a=0;a<r.length;a++){var h=r[a][1];if(!(n&&di(n,h)>=0||s&&di(s,h)<0)){var p=i.getShallow(h,e);p!=null&&(u[r[a][0]]=p)}}return u}}var Ype=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],Kpe=Wp(Ype),Jpe=function(){function r(){}return r.prototype.getAreaStyle=function(e,t){return Kpe(this,e,t)},r}(),hD=new dx(50);function Qpe(r){if(typeof r=="string"){var e=hD.get(r);return e&&e.image}else return r}function DL(r,e,t,i,n){if(r)if(typeof r=="string"){if(e&&e.__zrImageSrc===r||!t)return e;var s=hD.get(r),u={hostEl:t,cb:i,cbPayload:n};return s?(e=s.image,!VT(e)&&s.pending.push(u)):(e=ah.loadImage(r,j5,j5),e.__zrImageSrc=r,hD.put(r,e.__cachedImgObj={image:e,pending:[u]})),e}else return r;else return e}function j5(){var r=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<r.pending.length;e++){var t=r.pending[e],i=t.cb;i&&i(this,t.cbPayload),t.hostEl.dirty()}r.pending.length=0}function VT(r){return r&&r.width&&r.height}var fC=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function eme(r,e,t,i,n){if(!e)return"";var s=(r+"").split(`
`);n=cH(e,t,i,n);for(var u=0,a=s.length;u<a;u++)s[u]=hH(s[u],n);return s.join(`
`)}function cH(r,e,t,i){i=i||{};var n=kt({},i);n.font=e,t=Yr(t,"..."),n.maxIterations=Yr(i.maxIterations,2);var s=n.minChar=Yr(i.minChar,0);n.cnCharWidth=Os("\u56FD",e);var u=n.ascCharWidth=Os("a",e);n.placeholder=Yr(i.placeholder,"");for(var a=r=Math.max(0,r-1),h=0;h<s&&a>=u;h++)a-=u;var p=Os(t,e);return p>a&&(t="",p=0),a=r-p,n.ellipsis=t,n.ellipsisWidth=p,n.contentWidth=a,n.containerWidth=r,n}function hH(r,e){var t=e.containerWidth,i=e.font,n=e.contentWidth;if(!t)return"";var s=Os(r,i);if(s<=t)return r;for(var u=0;;u++){if(s<=n||u>=e.maxIterations){r+=e.ellipsis;break}var a=u===0?tme(r,n,e.ascCharWidth,e.cnCharWidth):s>0?Math.floor(r.length*n/s):0;r=r.substr(0,a),s=Os(r,i)}return r===""&&(r=e.placeholder),r}function tme(r,e,t,i){for(var n=0,s=0,u=r.length;s<u&&n<e;s++){var a=r.charCodeAt(s);n+=0<=a&&a<=127?t:i}return s}function rme(r,e){r!=null&&(r+="");var t=e.overflow,i=e.padding,n=e.font,s=t==="truncate",u=FT(n),a=Yr(e.lineHeight,u),h=!!e.backgroundColor,p=e.lineOverflow==="truncate",m=e.width,v;m!=null&&(t==="break"||t==="breakAll")?v=r?dH(r,e.font,m,t==="breakAll",0).lines:[]:v=r?r.split(`
`):[];var x=v.length*a,w=Yr(e.height,x);if(x>w&&p){var T=Math.floor(w/a);v=v.slice(0,T)}if(r&&s&&m!=null)for(var C=cH(m,n,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),I=0;I<v.length;I++)v[I]=hH(v[I],C);for(var k=w,R=0,I=0;I<v.length;I++)R=Math.max(Os(v[I],n),R);m==null&&(m=R);var z=R;return i&&(k+=i[0]+i[2],z+=i[1]+i[3],m+=i[1]+i[3]),h&&(z=m),{lines:v,height:w,outerWidth:z,outerHeight:k,lineHeight:a,calculatedLineHeight:u,contentWidth:R,contentHeight:x,width:m}}var ime=function(){function r(){}return r}(),H5=function(){function r(e){this.tokens=[],e&&(this.tokens=e)}return r}(),nme=function(){function r(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return r}();function ame(r,e){var t=new nme;if(r!=null&&(r+=""),!r)return t;for(var i=e.width,n=e.height,s=e.overflow,u=(s==="break"||s==="breakAll")&&i!=null?{width:i,accumWidth:0,breakAll:s==="breakAll"}:null,a=fC.lastIndex=0,h;(h=fC.exec(r))!=null;){var p=h.index;p>a&&pC(t,r.substring(a,p),e,u),pC(t,h[2],e,u,h[1]),a=fC.lastIndex}a<r.length&&pC(t,r.substring(a,r.length),e,u);var m=[],v=0,x=0,w=e.padding,T=s==="truncate",C=e.lineOverflow==="truncate";function I(Ce,We,gt){Ce.width=We,Ce.lineHeight=gt,v+=gt,x=Math.max(x,We)}e:for(var k=0;k<t.lines.length;k++){for(var R=t.lines[k],z=0,$=0,j=0;j<R.tokens.length;j++){var G=R.tokens[j],Y=G.styleName&&e.rich[G.styleName]||{},Z=G.textPadding=Y.padding,H=Z?Z[1]+Z[3]:0,re=G.font=Y.font||e.font;G.contentHeight=FT(re);var ne=Yr(Y.height,G.contentHeight);if(G.innerHeight=ne,Z&&(ne+=Z[0]+Z[2]),G.height=ne,G.lineHeight=Ju(Y.lineHeight,e.lineHeight,ne),G.align=Y&&Y.align||e.align,G.verticalAlign=Y&&Y.verticalAlign||"middle",C&&n!=null&&v+G.lineHeight>n){j>0?(R.tokens=R.tokens.slice(0,j),I(R,$,z),t.lines=t.lines.slice(0,k+1)):t.lines=t.lines.slice(0,k);break e}var se=Y.width,me=se==null||se==="auto";if(typeof se=="string"&&se.charAt(se.length-1)==="%")G.percentWidth=se,m.push(G),G.contentWidth=Os(G.text,re);else{if(me){var Se=Y.backgroundColor,Ie=Se&&Se.image;Ie&&(Ie=Qpe(Ie),VT(Ie)&&(G.width=Math.max(G.width,Ie.width*ne/Ie.height)))}var ke=T&&i!=null?i-$:null;ke!=null&&ke<G.width?!me||ke<H?(G.text="",G.width=G.contentWidth=0):(G.text=eme(G.text,ke-H,re,e.ellipsis,{minChar:e.truncateMinChar}),G.width=G.contentWidth=Os(G.text,re)):G.contentWidth=Os(G.text,re)}G.width+=H,$+=G.width,Y&&(z=Math.max(z,G.lineHeight))}I(R,$,z)}t.outerWidth=t.width=Yr(i,x),t.outerHeight=t.height=Yr(n,v),t.contentHeight=v,t.contentWidth=x,w&&(t.outerWidth+=w[1]+w[3],t.outerHeight+=w[0]+w[2]);for(var k=0;k<m.length;k++){var G=m[k],Fe=G.percentWidth;G.width=parseInt(Fe,10)/100*t.width}return t}function pC(r,e,t,i,n){var s=e==="",u=n&&t.rich[n]||{},a=r.lines,h=u.font||t.font,p=!1,m,v;if(i){var x=u.padding,w=x?x[1]+x[3]:0;if(u.width!=null&&u.width!=="auto"){var T=iu(u.width,i.width)+w;a.length>0&&T+i.accumWidth>i.width&&(m=e.split(`
`),p=!0),i.accumWidth=T}else{var C=dH(e,h,i.width,i.breakAll,i.accumWidth);i.accumWidth=C.accumWidth+w,v=C.linesWidths,m=C.lines}}else m=e.split(`
`);for(var I=0;I<m.length;I++){var k=m[I],R=new ime;if(R.styleName=n,R.text=k,R.isLineHolder=!k&&!s,typeof u.width=="number"?R.width=u.width:R.width=v?v[I]:Os(k,h),!I&&!p){var z=(a[a.length-1]||(a[0]=new H5)).tokens,$=z.length;$===1&&z[0].isLineHolder?z[0]=R:(k||!$||s)&&z.push(R)}else a.push(new H5([R]))}}function ome(r){var e=r.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var sme=ic(",&?/;] ".split(""),function(r,e){return r[e]=!0,r},{});function lme(r){return ome(r)?!!sme[r]:!0}function dH(r,e,t,i,n){for(var s=[],u=[],a="",h="",p=0,m=0,v=0;v<r.length;v++){var x=r.charAt(v);if(x===`
`){h&&(a+=h,m+=p),s.push(a),u.push(m),a="",h="",p=0,m=0;continue}var w=Os(x,e),T=i?!1:!lme(x);if(s.length?m+w>t:n+m+w>t){m?(a||h)&&(T?(a||(a=h,h="",p=0,m=p),s.push(a),u.push(m-p),h+=x,p+=w,a="",m=p):(h&&(a+=h,h="",p=0),s.push(a),u.push(m),a=x,m=w)):T?(s.push(h),u.push(p),h=x,p=w):(s.push(x),u.push(w));continue}m+=w,T?(h+=x,p+=w):(h&&(a+=h,h="",p=0),a+=x)}return!s.length&&!a&&(a=r,h="",p=0),h&&(a+=h),a&&(s.push(a),u.push(m)),s.length===1&&(m+=n),{accumWidth:m,lines:s,linesWidths:u}}var dD="__zr_style_"+Math.round(Math.random()*10),Rp={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},$T={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Rp[dD]=!0;var W5=["z","z2","invisible"],ume=["invisible"],cme=function(r){lt(e,r);function e(t){return r.call(this,t)||this}return e.prototype._init=function(t){for(var i=bi(t),n=0;n<i.length;n++){var s=i[n];s==="style"?this.useStyle(t[s]):r.prototype.attrKV.call(this,s,t[s])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,i,n,s){var u=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&hme(this,t,i)||u&&!u[0]&&!u[3])return!1;if(n&&this.__clipPaths){for(var a=0;a<this.__clipPaths.length;++a)if(this.__clipPaths[a].isZeroArea())return!1}if(s&&this.parent)for(var h=this.parent;h;){if(h.ignore)return!1;h=h.parent}return!0},e.prototype.contain=function(t,i){return this.rectContain(t,i)},e.prototype.traverse=function(t,i){t.call(i,this)},e.prototype.rectContain=function(t,i){var n=this.transformCoordToLocal(t,i),s=this.getBoundingRect();return s.contain(n[0],n[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var i=this.transform,n=this.getBoundingRect(),s=this.style,u=s.shadowBlur||0,a=s.shadowOffsetX||0,h=s.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new ai(0,0,0,0)),i?ai.applyTransform(t,n,i):t.copy(n),(u||a||h)&&(t.width+=u*2+Math.abs(a),t.height+=u*2+Math.abs(h),t.x=Math.min(t.x,t.x+a-u),t.y=Math.min(t.y,t.y+h-u));var p=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-p),t.y=Math.floor(t.y-p),t.width=Math.ceil(t.width+1+p*2),t.height=Math.ceil(t.height+1+p*2))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new ai(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(t,i){t!=="style"?r.prototype.attrKV.call(this,t,i):this.style?this.setStyle(i):this.useStyle(i)},e.prototype.setStyle=function(t,i){return typeof t=="string"?this.style[t]=i:kt(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=jy,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&jy)},e.prototype.styleUpdated=function(){this.__dirty&=~jy},e.prototype.createStyle=function(t){return OT(Rp,t)},e.prototype.useStyle=function(t){t[dD]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[dD]},e.prototype._innerSaveToNormal=function(t){r.prototype._innerSaveToNormal.call(this,t);var i=this._normalState;t.style&&!i.style&&(i.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,i,W5)},e.prototype._applyStateObj=function(t,i,n,s,u,a){r.prototype._applyStateObj.call(this,t,i,n,s,u,a);var h=!(i&&s),p;if(i&&i.style?u?s?p=i.style:(p=this._mergeStyle(this.createStyle(),n.style),this._mergeStyle(p,i.style)):(p=this._mergeStyle(this.createStyle(),s?this.style:n.style),this._mergeStyle(p,i.style)):h&&(p=n.style),p)if(u){var m=this.style;if(this.style=this.createStyle(h?{}:m),h)for(var v=bi(m),x=0;x<v.length;x++){var w=v[x];w in p&&(p[w]=p[w],this.style[w]=m[w])}for(var T=bi(p),x=0;x<T.length;x++){var w=T[x];this.style[w]=this.style[w]}this._transitionState(t,{style:p},a,this.getAnimationStyleProps())}else this.useStyle(p);for(var C=this.__inHover?ume:W5,x=0;x<C.length;x++){var w=C[x];i&&i[w]!=null?this[w]=i[w]:h&&n[w]!=null&&(this[w]=n[w])}},e.prototype._mergeStates=function(t){for(var i=r.prototype._mergeStates.call(this,t),n,s=0;s<t.length;s++){var u=t[s];u.style&&(n=n||{},this._mergeStyle(n,u.style))}return n&&(i.style=n),i},e.prototype._mergeStyle=function(t,i){return kt(t,i),t},e.prototype.getAnimationStyleProps=function(){return $T},e.initDefaultProps=function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=Ps|jy}(),e}(Wj),mC=new ai(0,0,0,0),gC=new ai(0,0,0,0);function hme(r,e,t){return mC.copy(r.getBoundingRect()),r.transform&&mC.applyTransform(r.transform),gC.width=e,gC.height=t,!mC.intersect(gC)}var yl=cme,os=Math.min,ss=Math.max,vC=Math.sin,_C=Math.cos,Vf=Math.PI*2,Gb=Jp(),Ub=Jp(),jb=Jp();function GT(r,e,t){if(r.length!==0){for(var i=r[0],n=i[0],s=i[0],u=i[1],a=i[1],h=1;h<r.length;h++)i=r[h],n=os(n,i[0]),s=ss(s,i[0]),u=os(u,i[1]),a=ss(a,i[1]);e[0]=n,e[1]=u,t[0]=s,t[1]=a}}function q5(r,e,t,i,n,s){n[0]=os(r,t),n[1]=os(e,i),s[0]=ss(r,t),s[1]=ss(e,i)}var Z5=[],X5=[];function dme(r,e,t,i,n,s,u,a,h,p){var m=Ej,v=Da,x=m(r,t,n,u,Z5);h[0]=1/0,h[1]=1/0,p[0]=-1/0,p[1]=-1/0;for(var w=0;w<x;w++){var T=v(r,t,n,u,Z5[w]);h[0]=os(T,h[0]),p[0]=ss(T,p[0])}x=m(e,i,s,a,X5);for(var w=0;w<x;w++){var C=v(e,i,s,a,X5[w]);h[1]=os(C,h[1]),p[1]=ss(C,p[1])}h[0]=os(r,h[0]),p[0]=ss(r,p[0]),h[0]=os(u,h[0]),p[0]=ss(u,p[0]),h[1]=os(e,h[1]),p[1]=ss(e,p[1]),h[1]=os(a,h[1]),p[1]=ss(a,p[1])}function fme(r,e,t,i,n,s,u,a){var h=Pj,p=Va,m=ss(os(h(r,t,n),1),0),v=ss(os(h(e,i,s),1),0),x=p(r,t,n,m),w=p(e,i,s,v);u[0]=os(r,n,x),u[1]=os(e,s,w),a[0]=ss(r,n,x),a[1]=ss(e,s,w)}function pme(r,e,t,i,n,s,u,a,h){var p=gd,m=vd,v=Math.abs(n-s);if(v%Vf<1e-4&&v>1e-4){a[0]=r-t,a[1]=e-i,h[0]=r+t,h[1]=e+i;return}if(Gb[0]=_C(n)*t+r,Gb[1]=vC(n)*i+e,Ub[0]=_C(s)*t+r,Ub[1]=vC(s)*i+e,p(a,Gb,Ub),m(h,Gb,Ub),n=n%Vf,n<0&&(n=n+Vf),s=s%Vf,s<0&&(s=s+Vf),n>s&&!u?s+=Vf:n<s&&u&&(n+=Vf),u){var x=s;s=n,n=x}for(var w=0;w<s;w+=Math.PI/2)w>n&&(jb[0]=_C(w)*t+r,jb[1]=vC(w)*i+e,p(a,jb,a),m(h,jb,h))}var bn={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},$f=[],Gf=[],ku=[],Jh=[],Ru=[],Ou=[],yC=Math.min,xC=Math.max,Uf=Math.cos,jf=Math.sin,$c=Math.abs,fD=Math.PI,ud=fD*2,bC=typeof Float32Array!="undefined",_y=[];function wC(r){var e=Math.round(r/fD*1e8)/1e8;return e%2*fD}function PL(r,e){var t=wC(r[0]);t<0&&(t+=ud);var i=t-r[0],n=r[1];n+=i,!e&&n-t>=ud?n=t+ud:e&&t-n>=ud?n=t-ud:!e&&t>n?n=t+(ud-wC(t-n)):e&&t<n&&(n=t-(ud-wC(n-t))),r[0]=t,r[1]=n}var sc=function(){function r(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return r.prototype.increaseVersion=function(){this._version++},r.prototype.getVersion=function(){return this._version},r.prototype.setScale=function(e,t,i){i=i||0,i>0&&(this._ux=$c(i/TS/e)||0,this._uy=$c(i/TS/t)||0)},r.prototype.setDPR=function(e){this.dpr=e},r.prototype.setContext=function(e){this._ctx=e},r.prototype.getContext=function(){return this._ctx},r.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},r.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},r.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(bn.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},r.prototype.lineTo=function(e,t){var i=$c(e-this._xi),n=$c(t-this._yi),s=i>this._ux||n>this._uy;if(this.addData(bn.L,e,t),this._ctx&&s&&this._ctx.lineTo(e,t),s)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var u=i*i+n*n;u>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=u)}return this},r.prototype.bezierCurveTo=function(e,t,i,n,s,u){return this._drawPendingPt(),this.addData(bn.C,e,t,i,n,s,u),this._ctx&&this._ctx.bezierCurveTo(e,t,i,n,s,u),this._xi=s,this._yi=u,this},r.prototype.quadraticCurveTo=function(e,t,i,n){return this._drawPendingPt(),this.addData(bn.Q,e,t,i,n),this._ctx&&this._ctx.quadraticCurveTo(e,t,i,n),this._xi=i,this._yi=n,this},r.prototype.arc=function(e,t,i,n,s,u){this._drawPendingPt(),_y[0]=n,_y[1]=s,PL(_y,u),n=_y[0],s=_y[1];var a=s-n;return this.addData(bn.A,e,t,i,i,n,a,0,u?0:1),this._ctx&&this._ctx.arc(e,t,i,n,s,u),this._xi=Uf(s)*i+e,this._yi=jf(s)*i+t,this},r.prototype.arcTo=function(e,t,i,n,s){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,i,n,s),this},r.prototype.rect=function(e,t,i,n){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,i,n),this.addData(bn.R,e,t,i,n),this},r.prototype.closePath=function(){this._drawPendingPt(),this.addData(bn.Z);var e=this._ctx,t=this._x0,i=this._y0;return e&&e.closePath(),this._xi=t,this._yi=i,this},r.prototype.fill=function(e){e&&e.fill(),this.toStatic()},r.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},r.prototype.len=function(){return this._len},r.prototype.setData=function(e){var t=e.length;!(this.data&&this.data.length===t)&&bC&&(this.data=new Float32Array(t));for(var i=0;i<t;i++)this.data[i]=e[i];this._len=t},r.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var t=e.length,i=0,n=this._len,s=0;s<t;s++)i+=e[s].len();bC&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+i));for(var s=0;s<t;s++)for(var u=e[s].data,a=0;a<u.length;a++)this.data[n++]=u[a];this._len=n},r.prototype.addData=function(e,t,i,n,s,u,a,h,p){if(!!this._saveData){var m=this.data;this._len+arguments.length>m.length&&(this._expandData(),m=this.data);for(var v=0;v<arguments.length;v++)m[this._len++]=arguments[v]}},r.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},r.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},r.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,bC&&this._len>11&&(this.data=new Float32Array(e)))}},r.prototype.getBoundingRect=function(){ku[0]=ku[1]=Ru[0]=Ru[1]=Number.MAX_VALUE,Jh[0]=Jh[1]=Ou[0]=Ou[1]=-Number.MAX_VALUE;var e=this.data,t=0,i=0,n=0,s=0,u;for(u=0;u<this._len;){var a=e[u++],h=u===1;switch(h&&(t=e[u],i=e[u+1],n=t,s=i),a){case bn.M:t=n=e[u++],i=s=e[u++],Ru[0]=n,Ru[1]=s,Ou[0]=n,Ou[1]=s;break;case bn.L:q5(t,i,e[u],e[u+1],Ru,Ou),t=e[u++],i=e[u++];break;case bn.C:dme(t,i,e[u++],e[u++],e[u++],e[u++],e[u],e[u+1],Ru,Ou),t=e[u++],i=e[u++];break;case bn.Q:fme(t,i,e[u++],e[u++],e[u],e[u+1],Ru,Ou),t=e[u++],i=e[u++];break;case bn.A:var p=e[u++],m=e[u++],v=e[u++],x=e[u++],w=e[u++],T=e[u++]+w;u+=1;var C=!e[u++];h&&(n=Uf(w)*v+p,s=jf(w)*x+m),pme(p,m,v,x,w,T,C,Ru,Ou),t=Uf(T)*v+p,i=jf(T)*x+m;break;case bn.R:n=t=e[u++],s=i=e[u++];var I=e[u++],k=e[u++];q5(n,s,n+I,s+k,Ru,Ou);break;case bn.Z:t=n,i=s;break}gd(ku,ku,Ru),vd(Jh,Jh,Ou)}return u===0&&(ku[0]=ku[1]=Jh[0]=Jh[1]=0),new ai(ku[0],ku[1],Jh[0]-ku[0],Jh[1]-ku[1])},r.prototype._calculateLength=function(){var e=this.data,t=this._len,i=this._ux,n=this._uy,s=0,u=0,a=0,h=0;this._pathSegLen||(this._pathSegLen=[]);for(var p=this._pathSegLen,m=0,v=0,x=0;x<t;){var w=e[x++],T=x===1;T&&(s=e[x],u=e[x+1],a=s,h=u);var C=-1;switch(w){case bn.M:s=a=e[x++],u=h=e[x++];break;case bn.L:{var I=e[x++],k=e[x++],R=I-s,z=k-u;($c(R)>i||$c(z)>n||x===t-1)&&(C=Math.sqrt(R*R+z*z),s=I,u=k);break}case bn.C:{var $=e[x++],j=e[x++],I=e[x++],k=e[x++],G=e[x++],Y=e[x++];C=Ife(s,u,$,j,I,k,G,Y,10),s=G,u=Y;break}case bn.Q:{var $=e[x++],j=e[x++],I=e[x++],k=e[x++];C=Dfe(s,u,$,j,I,k,10),s=I,u=k;break}case bn.A:var Z=e[x++],H=e[x++],re=e[x++],ne=e[x++],se=e[x++],me=e[x++],Se=me+se;x+=1,T&&(a=Uf(se)*re+Z,h=jf(se)*ne+H),C=xC(re,ne)*yC(ud,Math.abs(me)),s=Uf(Se)*re+Z,u=jf(Se)*ne+H;break;case bn.R:{a=s=e[x++],h=u=e[x++];var Ie=e[x++],ke=e[x++];C=Ie*2+ke*2;break}case bn.Z:{var R=a-s,z=h-u;C=Math.sqrt(R*R+z*z),s=a,u=h;break}}C>=0&&(p[v++]=C,m+=C)}return this._pathLen=m,m},r.prototype.rebuildPath=function(e,t){var i=this.data,n=this._ux,s=this._uy,u=this._len,a,h,p,m,v,x,w=t<1,T,C,I=0,k=0,R,z=0,$,j;if(w&&(this._pathSegLen||this._calculateLength(),T=this._pathSegLen,C=this._pathLen,R=t*C,!R))return;e:for(var G=0;G<u;){var Y=i[G++],Z=G===1;switch(Z&&(p=i[G],m=i[G+1],a=p,h=m),Y!==bn.L&&z>0&&(e.lineTo($,j),z=0),Y){case bn.M:a=p=i[G++],h=m=i[G++],e.moveTo(p,m);break;case bn.L:{v=i[G++],x=i[G++];var H=$c(v-p),re=$c(x-m);if(H>n||re>s){if(w){var ne=T[k++];if(I+ne>R){var se=(R-I)/ne;e.lineTo(p*(1-se)+v*se,m*(1-se)+x*se);break e}I+=ne}e.lineTo(v,x),p=v,m=x,z=0}else{var me=H*H+re*re;me>z&&($=v,j=x,z=me)}break}case bn.C:{var Se=i[G++],Ie=i[G++],ke=i[G++],Fe=i[G++],Ce=i[G++],We=i[G++];if(w){var ne=T[k++];if(I+ne>R){var se=(R-I)/ne;Od(p,Se,ke,Ce,se,$f),Od(m,Ie,Fe,We,se,Gf),e.bezierCurveTo($f[1],Gf[1],$f[2],Gf[2],$f[3],Gf[3]);break e}I+=ne}e.bezierCurveTo(Se,Ie,ke,Fe,Ce,We),p=Ce,m=We;break}case bn.Q:{var Se=i[G++],Ie=i[G++],ke=i[G++],Fe=i[G++];if(w){var ne=T[k++];if(I+ne>R){var se=(R-I)/ne;B0(p,Se,ke,se,$f),B0(m,Ie,Fe,se,Gf),e.quadraticCurveTo($f[1],Gf[1],$f[2],Gf[2]);break e}I+=ne}e.quadraticCurveTo(Se,Ie,ke,Fe),p=ke,m=Fe;break}case bn.A:var gt=i[G++],St=i[G++],et=i[G++],ht=i[G++],$e=i[G++],He=i[G++],dt=i[G++],nt=!i[G++],vt=et>ht?et:ht,Pt=$c(et-ht)>.001,jt=$e+He,Et=!1;if(w){var ne=T[k++];I+ne>R&&(jt=$e+He*(R-I)/ne,Et=!0),I+=ne}if(Pt&&e.ellipse?e.ellipse(gt,St,et,ht,dt,$e,jt,nt):e.arc(gt,St,vt,$e,jt,nt),Et)break e;Z&&(a=Uf($e)*et+gt,h=jf($e)*ht+St),p=Uf(jt)*et+gt,m=jf(jt)*ht+St;break;case bn.R:a=p=i[G],h=m=i[G+1],v=i[G++],x=i[G++];var Wt=i[G++],Re=i[G++];if(w){var ne=T[k++];if(I+ne>R){var Ve=R-I;e.moveTo(v,x),e.lineTo(v+yC(Ve,Wt),x),Ve-=Wt,Ve>0&&e.lineTo(v+Wt,x+yC(Ve,Re)),Ve-=Re,Ve>0&&e.lineTo(v+xC(Wt-Ve,0),x+Re),Ve-=Wt,Ve>0&&e.lineTo(v,x+xC(Re-Ve,0));break e}I+=ne}e.rect(v,x,Wt,Re);break;case bn.Z:if(w){var ne=T[k++];if(I+ne>R){var se=(R-I)/ne;e.lineTo(p*(1-se)+a*se,m*(1-se)+h*se);break e}I+=ne}e.closePath(),p=a,m=h}}},r.prototype.clone=function(){var e=new r,t=this.data;return e.data=t.slice?t.slice():Array.prototype.slice.call(t),e._len=this._len,e},r.CMD=bn,r.initDefaultProps=function(){var e=r.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),r}();function fd(r,e,t,i,n,s,u){if(n===0)return!1;var a=n,h=0,p=r;if(u>e+a&&u>i+a||u<e-a&&u<i-a||s>r+a&&s>t+a||s<r-a&&s<t-a)return!1;if(r!==t)h=(e-i)/(r-t),p=(r*i-t*e)/(r-t);else return Math.abs(s-r)<=a/2;var m=h*s-u+p,v=m*m/(h*h+1);return v<=a/2*a/2}function mme(r,e,t,i,n,s,u,a,h,p,m){if(h===0)return!1;var v=h;if(m>e+v&&m>i+v&&m>s+v&&m>a+v||m<e-v&&m<i-v&&m<s-v&&m<a-v||p>r+v&&p>t+v&&p>n+v&&p>u+v||p<r-v&&p<t-v&&p<n-v&&p<u-v)return!1;var x=Dj(r,e,t,i,n,s,u,a,p,m,null);return x<=v/2}function fH(r,e,t,i,n,s,u,a,h){if(u===0)return!1;var p=u;if(h>e+p&&h>i+p&&h>s+p||h<e-p&&h<i-p&&h<s-p||a>r+p&&a>t+p&&a>n+p||a<r-p&&a<t-p&&a<n-p)return!1;var m=Lj(r,e,t,i,n,s,a,h,null);return m<=p/2}var Y5=Math.PI*2;function Ls(r){return r%=Y5,r<0&&(r+=Y5),r}var yy=Math.PI*2;function gme(r,e,t,i,n,s,u,a,h){if(u===0)return!1;var p=u;a-=r,h-=e;var m=Math.sqrt(a*a+h*h);if(m-p>t||m+p<t)return!1;if(Math.abs(i-n)%yy<1e-4)return!0;if(s){var v=i;i=Ls(n),n=Ls(v)}else i=Ls(i),n=Ls(n);i>n&&(n+=yy);var x=Math.atan2(h,a);return x<0&&(x+=yy),x>=i&&x<=n||x+yy>=i&&x+yy<=n}function qc(r,e,t,i,n,s){if(s>e&&s>i||s<e&&s<i||i===e)return 0;var u=(s-e)/(i-e),a=i<e?1:-1;(u===1||u===0)&&(a=i<e?.5:-.5);var h=u*(t-r)+r;return h===n?1/0:h>n?a:0}var Qh=sc.CMD,Hf=Math.PI*2,vme=1e-4;function _me(r,e){return Math.abs(r-e)<vme}var Ro=[-1,-1,-1],ll=[-1,-1];function yme(){var r=ll[0];ll[0]=ll[1],ll[1]=r}function xme(r,e,t,i,n,s,u,a,h,p){if(p>e&&p>i&&p>s&&p>a||p<e&&p<i&&p<s&&p<a)return 0;var m=xS(e,i,s,a,p,Ro);if(m===0)return 0;for(var v=0,x=-1,w=void 0,T=void 0,C=0;C<m;C++){var I=Ro[C],k=I===0||I===1?.5:1,R=Da(r,t,n,u,I);R<h||(x<0&&(x=Ej(e,i,s,a,ll),ll[1]<ll[0]&&x>1&&yme(),w=Da(e,i,s,a,ll[0]),x>1&&(T=Da(e,i,s,a,ll[1]))),x===2?I<ll[0]?v+=w<e?k:-k:I<ll[1]?v+=T<w?k:-k:v+=a<T?k:-k:I<ll[0]?v+=w<e?k:-k:v+=a<w?k:-k)}return v}function bme(r,e,t,i,n,s,u,a){if(a>e&&a>i&&a>s||a<e&&a<i&&a<s)return 0;var h=Efe(e,i,s,a,Ro);if(h===0)return 0;var p=Pj(e,i,s);if(p>=0&&p<=1){for(var m=0,v=Va(e,i,s,p),x=0;x<h;x++){var w=Ro[x]===0||Ro[x]===1?.5:1,T=Va(r,t,n,Ro[x]);T<u||(Ro[x]<p?m+=v<e?w:-w:m+=s<v?w:-w)}return m}else{var w=Ro[0]===0||Ro[0]===1?.5:1,T=Va(r,t,n,Ro[0]);return T<u?0:s<e?w:-w}}function wme(r,e,t,i,n,s,u,a){if(a-=e,a>t||a<-t)return 0;var h=Math.sqrt(t*t-a*a);Ro[0]=-h,Ro[1]=h;var p=Math.abs(i-n);if(p<1e-4)return 0;if(p>=Hf-1e-4){i=0,n=Hf;var m=s?1:-1;return u>=Ro[0]+r&&u<=Ro[1]+r?m:0}if(i>n){var v=i;i=n,n=v}i<0&&(i+=Hf,n+=Hf);for(var x=0,w=0;w<2;w++){var T=Ro[w];if(T+r>u){var C=Math.atan2(a,T),m=s?1:-1;C<0&&(C=Hf+C),(C>=i&&C<=n||C+Hf>=i&&C+Hf<=n)&&(C>Math.PI/2&&C<Math.PI*1.5&&(m=-m),x+=m)}}return x}function pH(r,e,t,i,n){for(var s=r.data,u=r.len(),a=0,h=0,p=0,m=0,v=0,x,w,T=0;T<u;){var C=s[T++],I=T===1;switch(C===Qh.M&&T>1&&(t||(a+=qc(h,p,m,v,i,n))),I&&(h=s[T],p=s[T+1],m=h,v=p),C){case Qh.M:m=s[T++],v=s[T++],h=m,p=v;break;case Qh.L:if(t){if(fd(h,p,s[T],s[T+1],e,i,n))return!0}else a+=qc(h,p,s[T],s[T+1],i,n)||0;h=s[T++],p=s[T++];break;case Qh.C:if(t){if(mme(h,p,s[T++],s[T++],s[T++],s[T++],s[T],s[T+1],e,i,n))return!0}else a+=xme(h,p,s[T++],s[T++],s[T++],s[T++],s[T],s[T+1],i,n)||0;h=s[T++],p=s[T++];break;case Qh.Q:if(t){if(fH(h,p,s[T++],s[T++],s[T],s[T+1],e,i,n))return!0}else a+=bme(h,p,s[T++],s[T++],s[T],s[T+1],i,n)||0;h=s[T++],p=s[T++];break;case Qh.A:var k=s[T++],R=s[T++],z=s[T++],$=s[T++],j=s[T++],G=s[T++];T+=1;var Y=!!(1-s[T++]);x=Math.cos(j)*z+k,w=Math.sin(j)*$+R,I?(m=x,v=w):a+=qc(h,p,x,w,i,n);var Z=(i-k)*$/z+k;if(t){if(gme(k,R,$,j,j+G,Y,e,Z,n))return!0}else a+=wme(k,R,$,j,j+G,Y,Z,n);h=Math.cos(j+G)*z+k,p=Math.sin(j+G)*$+R;break;case Qh.R:m=h=s[T++],v=p=s[T++];var H=s[T++],re=s[T++];if(x=m+H,w=v+re,t){if(fd(m,v,x,v,e,i,n)||fd(x,v,x,w,e,i,n)||fd(x,w,m,w,e,i,n)||fd(m,w,m,v,e,i,n))return!0}else a+=qc(x,v,x,w,i,n),a+=qc(m,w,m,v,i,n);break;case Qh.Z:if(t){if(fd(h,p,m,v,e,i,n))return!0}else a+=qc(h,p,m,v,i,n);h=m,p=v;break}}return!t&&!_me(p,v)&&(a+=qc(h,p,m,v,i,n)||0),a!==0}function Sme(r,e,t){return pH(r,0,!1,e,t)}function Tme(r,e,t,i){return pH(r,e,!0,t,i)}var AS=zr({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Rp),Mme={style:zr({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},$T.style)},SC=ac.concat(["invisible","culling","z","z2","zlevel","parent"]),Ame=function(r){lt(e,r);function e(t){return r.call(this,t)||this}return e.prototype.update=function(){var t=this;r.prototype.update.call(this);var i=this.style;if(i.decal){var n=this._decalEl=this._decalEl||new e;n.buildPath===e.prototype.buildPath&&(n.buildPath=function(h){t.buildPath(h,t.shape)}),n.silent=!0;var s=n.style;for(var u in i)s[u]!==i[u]&&(s[u]=i[u]);s.fill=i.fill?i.decal:null,s.decal=null,s.shadowColor=null,i.strokeFirst&&(s.stroke=null);for(var a=0;a<SC.length;++a)n[SC[a]]=this[SC[a]];n.__dirty|=Ps}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(t){var i=bi(t);this.shape=this.getDefaultShape();var n=this.getDefaultStyle();n&&this.useStyle(n);for(var s=0;s<i.length;s++){var u=i[s],a=t[u];u==="style"?this.style?kt(this.style,a):this.useStyle(a):u==="shape"?kt(this.shape,a):r.prototype.attrKV.call(this,u,a)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(gr(t)){var i=wS(t,0);return i>.5?sD:i>.2?spe:lD}else if(t)return lD}return sD},e.prototype.getInsideTextStroke=function(t){var i=this.style.fill;if(gr(i)){var n=this.__zr,s=!!(n&&n.isDarkMode()),u=wS(t,0)<oD;if(s===u)return i}},e.prototype.buildPath=function(t,i,n){},e.prototype.pathUpdated=function(){this.__dirty&=~kg},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new sc(!1)},e.prototype.hasStroke=function(){var t=this.style,i=t.stroke;return!(i==null||i==="none"||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,i=t.fill;return i!=null&&i!=="none"},e.prototype.getBoundingRect=function(){var t=this._rect,i=this.style,n=!t;if(n){var s=!1;this.path||(s=!0,this.createPathProxy());var u=this.path;(s||this.__dirty&kg)&&(u.beginPath(),this.buildPath(u,this.shape,!1),this.pathUpdated()),t=u.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var a=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||n){a.copy(t);var h=i.strokeNoScale?this.getLineScale():1,p=i.lineWidth;if(!this.hasFill()){var m=this.strokeContainThreshold;p=Math.max(p,m==null?4:m)}h>1e-10&&(a.width+=p/h,a.height+=p/h,a.x-=p/h/2,a.y-=p/h/2)}return a}return t},e.prototype.contain=function(t,i){var n=this.transformCoordToLocal(t,i),s=this.getBoundingRect(),u=this.style;if(t=n[0],i=n[1],s.contain(t,i)){var a=this.path;if(this.hasStroke()){var h=u.lineWidth,p=u.strokeNoScale?this.getLineScale():1;if(p>1e-10&&(this.hasFill()||(h=Math.max(h,this.strokeContainThreshold)),Tme(a,h/p,t,i)))return!0}if(this.hasFill())return Sme(a,t,i)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=kg,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(t,i){t==="shape"?this.setShape(i):r.prototype.attrKV.call(this,t,i)},e.prototype.setShape=function(t,i){var n=this.shape;return n||(n=this.shape={}),typeof t=="string"?n[t]=i:kt(n,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&kg)},e.prototype.createStyle=function(t){return OT(AS,t)},e.prototype._innerSaveToNormal=function(t){r.prototype._innerSaveToNormal.call(this,t);var i=this._normalState;t.shape&&!i.shape&&(i.shape=kt({},this.shape))},e.prototype._applyStateObj=function(t,i,n,s,u,a){r.prototype._applyStateObj.call(this,t,i,n,s,u,a);var h=!(i&&s),p;if(i&&i.shape?u?s?p=i.shape:(p=kt({},n.shape),kt(p,i.shape)):(p=kt({},s?this.shape:n.shape),kt(p,i.shape)):h&&(p=n.shape),p)if(u){this.shape=kt({},this.shape);for(var m={},v=bi(p),x=0;x<v.length;x++){var w=v[x];typeof p[w]=="object"?this.shape[w]=p[w]:m[w]=p[w]}this._transitionState(t,{shape:m},a)}else this.shape=p,this.dirtyShape()},e.prototype._mergeStates=function(t){for(var i=r.prototype._mergeStates.call(this,t),n,s=0;s<t.length;s++){var u=t[s];u.shape&&(n=n||{},this._mergeStyle(n,u.shape))}return n&&(i.shape=n),i},e.prototype.getAnimationStyleProps=function(){return Mme},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var i=function(s){lt(u,s);function u(a){var h=s.call(this,a)||this;return t.init&&t.init.call(h,a),h}return u.prototype.getDefaultStyle=function(){return Nr(t.style)},u.prototype.getDefaultShape=function(){return Nr(t.shape)},u}(e);for(var n in t)typeof t[n]=="function"&&(i.prototype[n]=t[n]);return i},e.initDefaultProps=function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=Ps|jy|kg}(),e}(yl),_i=Ame,Cme=zr({strokeFirst:!0,font:Rd,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},AS),mH=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var t=this.style,i=t.stroke;return i!=null&&i!=="none"&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style,i=t.fill;return i!=null&&i!=="none"},e.prototype.createStyle=function(t){return OT(Cme,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var i=t.text;i!=null?i+="":i="";var n=fx(i,t.font,t.textAlign,t.textBaseline);if(n.x+=t.x||0,n.y+=t.y||0,this.hasStroke()){var s=t.lineWidth;n.x-=s/2,n.y-=s/2,n.width+=s,n.height+=s}this._rect=n}return this._rect},e.initDefaultProps=function(){var t=e.prototype;t.dirtyRectTolerance=10}(),e}(yl);mH.prototype.type="tspan";var G0=mH,Ime=zr({x:0,y:0},Rp),Eme={style:zr({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},$T.style)};function Dme(r){return!!(r&&typeof r!="string"&&r.width&&r.height)}var gH=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createStyle=function(t){return OT(Ime,t)},e.prototype._getSize=function(t){var i=this.style,n=i[t];if(n!=null)return n;var s=Dme(i.image)?i.image:this.__image;if(!s)return 0;var u=t==="width"?"height":"width",a=i[u];return a==null?s[t]:s[t]/s[u]*a},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return Eme},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new ai(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(yl);gH.prototype.type="image";var io=gH;function Pme(r,e){var t=e.x,i=e.y,n=e.width,s=e.height,u=e.r,a,h,p,m;n<0&&(t=t+n,n=-n),s<0&&(i=i+s,s=-s),typeof u=="number"?a=h=p=m=u:u instanceof Array?u.length===1?a=h=p=m=u[0]:u.length===2?(a=p=u[0],h=m=u[1]):u.length===3?(a=u[0],h=m=u[1],p=u[2]):(a=u[0],h=u[1],p=u[2],m=u[3]):a=h=p=m=0;var v;a+h>n&&(v=a+h,a*=n/v,h*=n/v),p+m>n&&(v=p+m,p*=n/v,m*=n/v),h+p>s&&(v=h+p,h*=s/v,p*=s/v),a+m>s&&(v=a+m,a*=s/v,m*=s/v),r.moveTo(t+a,i),r.lineTo(t+n-h,i),h!==0&&r.arc(t+n-h,i+h,h,-Math.PI/2,0),r.lineTo(t+n,i+s-p),p!==0&&r.arc(t+n-p,i+s-p,p,0,Math.PI/2),r.lineTo(t+m,i+s),m!==0&&r.arc(t+m,i+s-m,m,Math.PI/2,Math.PI),r.lineTo(t,i+a),a!==0&&r.arc(t+a,i+a,a,Math.PI,Math.PI*1.5)}var $g=Math.round;function vH(r,e,t){if(!!e){var i=e.x1,n=e.x2,s=e.y1,u=e.y2;r.x1=i,r.x2=n,r.y1=s,r.y2=u;var a=t&&t.lineWidth;return a&&($g(i*2)===$g(n*2)&&(r.x1=r.x2=bp(i,a,!0)),$g(s*2)===$g(u*2)&&(r.y1=r.y2=bp(s,a,!0))),r}}function _H(r,e,t){if(!!e){var i=e.x,n=e.y,s=e.width,u=e.height;r.x=i,r.y=n,r.width=s,r.height=u;var a=t&&t.lineWidth;return a&&(r.x=bp(i,a,!0),r.y=bp(n,a,!0),r.width=Math.max(bp(i+s,a,!1)-r.x,s===0?0:1),r.height=Math.max(bp(n+u,a,!1)-r.y,u===0?0:1)),r}}function bp(r,e,t){if(!e)return r;var i=$g(r*2);return(i+$g(e))%2===0?i/2:(i+(t?1:-1))/2}var Lme=function(){function r(){this.x=0,this.y=0,this.width=0,this.height=0}return r}(),kme={},yH=function(r){lt(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Lme},e.prototype.buildPath=function(t,i){var n,s,u,a;if(this.subPixelOptimize){var h=_H(kme,i,this.style);n=h.x,s=h.y,u=h.width,a=h.height,h.r=i.r,i=h}else n=i.x,s=i.y,u=i.width,a=i.height;i.r?Pme(t,i):t.rect(n,s,u,a)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(_i);yH.prototype.type="rect";var Li=yH,K5={fill:"#000"},J5=2,Rme={style:zr({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},$T.style)},xH=function(r){lt(e,r);function e(t){var i=r.call(this)||this;return i.type="text",i._children=[],i._defaultStyle=K5,i.attr(t),i}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){r.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var i=this._children[t];i.zlevel=this.zlevel,i.z=this.z,i.z2=this.z2,i.culling=this.culling,i.cursor=this.cursor,i.invisible=this.invisible}},e.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):r.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(t){var i=this.innerTransformable;return i?i.getLocalTransform(t):r.prototype.getLocalTransform.call(this,t)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),r.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,Bme(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(t){r.prototype.addSelfToZr.call(this,t);for(var i=0;i<this._children.length;i++)this._children[i].__zr=t},e.prototype.removeSelfFromZr=function(t){r.prototype.removeSelfFromZr.call(this,t);for(var i=0;i<this._children.length;i++)this._children[i].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new ai(0,0,0,0),i=this._children,n=[],s=null,u=0;u<i.length;u++){var a=i[u],h=a.getBoundingRect(),p=a.getLocalTransform(n);p?(t.copy(h),t.applyTransform(p),s=s||t.clone(),s.union(t)):(s=s||h.clone(),s.union(h))}this._rect=s||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||K5},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,i){if(!i)return t;var n=i.rich,s=t.rich||n&&{};return kt(t,i),n&&s?(this._mergeRich(s,n),t.rich=s):s&&(t.rich=s),t},e.prototype._mergeRich=function(t,i){for(var n=bi(i),s=0;s<n.length;s++){var u=n[s];t[u]=t[u]||{},kt(t[u],i[u])}},e.prototype.getAnimationStyleProps=function(){return Rme},e.prototype._getOrCreateChild=function(t){var i=this._children[this._childCursor];return(!i||!(i instanceof t))&&(i=new t),this._children[this._childCursor++]=i,i.__zr=this.__zr,i.parent=this,i},e.prototype._updatePlainTexts=function(){var t=this.style,i=t.font||Rd,n=t.padding,s=a4(t),u=rme(s,t),a=TC(t),h=!!t.backgroundColor,p=u.outerHeight,m=u.outerWidth,v=u.contentWidth,x=u.lines,w=u.lineHeight,T=this._defaultStyle,C=t.x||0,I=t.y||0,k=t.align||T.align||"left",R=t.verticalAlign||T.verticalAlign||"top",z=C,$=Rg(I,u.contentHeight,R);if(a||n){var j=Wy(C,m,k),G=Rg(I,p,R);a&&this._renderBackground(t,t,j,G,m,p)}$+=w/2,n&&(z=n4(C,k,n),R==="top"?$+=n[0]:R==="bottom"&&($-=n[2]));for(var Y=0,Z=!1,H=i4("fill"in t?t.fill:(Z=!0,T.fill)),re=r4("stroke"in t?t.stroke:!h&&(!T.autoStroke||Z)?(Y=J5,T.stroke):null),ne=t.textShadowBlur>0,se=t.width!=null&&(t.overflow==="truncate"||t.overflow==="break"||t.overflow==="breakAll"),me=u.calculatedLineHeight,Se=0;Se<x.length;Se++){var Ie=this._getOrCreateChild(G0),ke=Ie.createStyle();Ie.useStyle(ke),ke.text=x[Se],ke.x=z,ke.y=$,k&&(ke.textAlign=k),ke.textBaseline="middle",ke.opacity=t.opacity,ke.strokeFirst=!0,ne&&(ke.shadowBlur=t.textShadowBlur||0,ke.shadowColor=t.textShadowColor||"transparent",ke.shadowOffsetX=t.textShadowOffsetX||0,ke.shadowOffsetY=t.textShadowOffsetY||0),ke.stroke=re,ke.fill=H,re&&(ke.lineWidth=t.lineWidth||Y,ke.lineDash=t.lineDash,ke.lineDashOffset=t.lineDashOffset||0),ke.font=i,e4(ke,t),$+=w,se&&Ie.setBoundingRect(new ai(Wy(ke.x,t.width,ke.textAlign),Rg(ke.y,me,ke.textBaseline),v,me))}},e.prototype._updateRichTexts=function(){var t=this.style,i=a4(t),n=ame(i,t),s=n.width,u=n.outerWidth,a=n.outerHeight,h=t.padding,p=t.x||0,m=t.y||0,v=this._defaultStyle,x=t.align||v.align,w=t.verticalAlign||v.verticalAlign,T=Wy(p,u,x),C=Rg(m,a,w),I=T,k=C;h&&(I+=h[3],k+=h[0]);var R=I+s;TC(t)&&this._renderBackground(t,t,T,C,u,a);for(var z=!!t.backgroundColor,$=0;$<n.lines.length;$++){for(var j=n.lines[$],G=j.tokens,Y=G.length,Z=j.lineHeight,H=j.width,re=0,ne=I,se=R,me=Y-1,Se=void 0;re<Y&&(Se=G[re],!Se.align||Se.align==="left");)this._placeToken(Se,t,Z,k,ne,"left",z),H-=Se.width,ne+=Se.width,re++;for(;me>=0&&(Se=G[me],Se.align==="right");)this._placeToken(Se,t,Z,k,se,"right",z),H-=Se.width,se-=Se.width,me--;for(ne+=(s-(ne-I)-(R-se)-H)/2;re<=me;)Se=G[re],this._placeToken(Se,t,Z,k,ne+Se.width/2,"center",z),ne+=Se.width,re++;k+=Z}},e.prototype._placeToken=function(t,i,n,s,u,a,h){var p=i.rich[t.styleName]||{};p.text=t.text;var m=t.verticalAlign,v=s+n/2;m==="top"?v=s+t.height/2:m==="bottom"&&(v=s+n-t.height/2);var x=!t.isLineHolder&&TC(p);x&&this._renderBackground(p,i,a==="right"?u-t.width:a==="center"?u-t.width/2:u,v-t.height/2,t.width,t.height);var w=!!p.backgroundColor,T=t.textPadding;T&&(u=n4(u,a,T),v-=t.height/2-T[0]-t.innerHeight/2);var C=this._getOrCreateChild(G0),I=C.createStyle();C.useStyle(I);var k=this._defaultStyle,R=!1,z=0,$=i4("fill"in p?p.fill:"fill"in i?i.fill:(R=!0,k.fill)),j=r4("stroke"in p?p.stroke:"stroke"in i?i.stroke:!w&&!h&&(!k.autoStroke||R)?(z=J5,k.stroke):null),G=p.textShadowBlur>0||i.textShadowBlur>0;I.text=t.text,I.x=u,I.y=v,G&&(I.shadowBlur=p.textShadowBlur||i.textShadowBlur||0,I.shadowColor=p.textShadowColor||i.textShadowColor||"transparent",I.shadowOffsetX=p.textShadowOffsetX||i.textShadowOffsetX||0,I.shadowOffsetY=p.textShadowOffsetY||i.textShadowOffsetY||0),I.textAlign=a,I.textBaseline="middle",I.font=t.font||Rd,I.opacity=Ju(p.opacity,i.opacity,1),e4(I,p),j&&(I.lineWidth=Ju(p.lineWidth,i.lineWidth,z),I.lineDash=Yr(p.lineDash,i.lineDash),I.lineDashOffset=i.lineDashOffset||0,I.stroke=j),$&&(I.fill=$);var Y=t.contentWidth,Z=t.contentHeight;C.setBoundingRect(new ai(Wy(I.x,Y,I.textAlign),Rg(I.y,Z,I.textBaseline),Y,Z))},e.prototype._renderBackground=function(t,i,n,s,u,a){var h=t.backgroundColor,p=t.borderWidth,m=t.borderColor,v=h&&h.image,x=h&&!v,w=t.borderRadius,T=this,C,I;if(x||t.lineHeight||p&&m){C=this._getOrCreateChild(Li),C.useStyle(C.createStyle()),C.style.fill=null;var k=C.shape;k.x=n,k.y=s,k.width=u,k.height=a,k.r=w,C.dirtyShape()}if(x){var R=C.style;R.fill=h||null,R.fillOpacity=Yr(t.fillOpacity,1)}else if(v){I=this._getOrCreateChild(io),I.onload=function(){T.dirtyStyle()};var z=I.style;z.image=h.image,z.x=n,z.y=s,z.width=u,z.height=a}if(p&&m){var R=C.style;R.lineWidth=p,R.stroke=m,R.strokeOpacity=Yr(t.strokeOpacity,1),R.lineDash=t.borderDash,R.lineDashOffset=t.borderDashOffset||0,C.strokeContainThreshold=0,C.hasFill()&&C.hasStroke()&&(R.strokeFirst=!0,R.lineWidth*=2)}var $=(C||I).style;$.shadowBlur=t.shadowBlur||0,$.shadowColor=t.shadowColor||"transparent",$.shadowOffsetX=t.shadowOffsetX||0,$.shadowOffsetY=t.shadowOffsetY||0,$.opacity=Ju(t.opacity,i.opacity,1)},e.makeFont=function(t){var i="";return wH(t)&&(i=[t.fontStyle,t.fontWeight,bH(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),i&&Kl(i)||t.textFont||t.font},e}(yl),Ome={left:!0,right:1,center:1},zme={top:1,bottom:1,middle:1},Q5=["fontStyle","fontWeight","fontSize","fontFamily"];function bH(r){return typeof r=="string"&&(r.indexOf("px")!==-1||r.indexOf("rem")!==-1||r.indexOf("em")!==-1)?r:isNaN(+r)?dL+"px":r+"px"}function e4(r,e){for(var t=0;t<Q5.length;t++){var i=Q5[t],n=e[i];n!=null&&(r[i]=n)}}function wH(r){return r.fontSize!=null||r.fontFamily||r.fontWeight}function Bme(r){return t4(r),ue(r.rich,t4),r}function t4(r){if(r){r.font=xH.makeFont(r);var e=r.align;e==="middle"&&(e="center"),r.align=e==null||Ome[e]?e:"left";var t=r.verticalAlign;t==="center"&&(t="middle"),r.verticalAlign=t==null||zme[t]?t:"top";var i=r.padding;i&&(r.padding=_L(r.padding))}}function r4(r,e){return r==null||e<=0||r==="transparent"||r==="none"?null:r.image||r.colorStops?"#000":r}function i4(r){return r==null||r==="none"?null:r.image||r.colorStops?"#000":r}function n4(r,e,t){return e==="right"?r-t[1]:e==="center"?r+t[3]/2-t[1]/2:r+t[3]}function a4(r){var e=r.text;return e!=null&&(e+=""),e}function TC(r){return!!(r.backgroundColor||r.lineHeight||r.borderWidth&&r.borderColor)}var Ni=xH,Gr=ki(),pD=function(r,e,t,i){if(i){var n=Gr(i);n.dataIndex=t,n.dataType=e,n.seriesIndex=r,n.ssrType="chart",i.type==="group"&&i.traverse(function(s){var u=Gr(s);u.seriesIndex=r,u.dataIndex=t,u.dataType=e,u.ssrType="chart"})}},o4=1,s4={},SH=ki(),LL=ki(),kL=0,mx=1,UT=2,$o=["emphasis","blur","select"],U0=["normal","emphasis","blur","select"],Ev=10,Fme=9,Op="highlight",Yw="downplay",_0="select",Kw="unselect",y0="toggleSelect";function dg(r){return r!=null&&r!=="none"}function jT(r,e,t){r.onHoverStateChange&&(r.hoverState||0)!==t&&r.onHoverStateChange(e),r.hoverState=t}function TH(r){jT(r,"emphasis",UT)}function MH(r){r.hoverState===UT&&jT(r,"normal",kL)}function RL(r){jT(r,"blur",mx)}function AH(r){r.hoverState===mx&&jT(r,"normal",kL)}function Nme(r){r.selected=!0}function Vme(r){r.selected=!1}function l4(r,e,t){e(r,t)}function mh(r,e,t){l4(r,e,t),r.isGroup&&r.traverse(function(i){l4(i,e,t)})}function CS(r,e){switch(e){case"emphasis":r.hoverState=UT;break;case"normal":r.hoverState=kL;break;case"blur":r.hoverState=mx;break;case"select":r.selected=!0}}function $me(r,e,t,i){for(var n=r.style,s={},u=0;u<e.length;u++){var a=e[u],h=n[a];s[a]=h==null?i&&i[a]:h}for(var u=0;u<r.animators.length;u++){var p=r.animators[u];p.__fromStateTransition&&p.__fromStateTransition.indexOf(t)<0&&p.targetName==="style"&&p.saveTo(s,e)}return s}function Gme(r,e,t,i){var n=t&&di(t,"select")>=0,s=!1;if(r instanceof _i){var u=SH(r),a=n&&u.selectFill||u.normalFill,h=n&&u.selectStroke||u.normalStroke;if(dg(a)||dg(h)){i=i||{};var p=i.style||{};p.fill==="inherit"?(s=!0,i=kt({},i),p=kt({},p),p.fill=a):!dg(p.fill)&&dg(a)?(s=!0,i=kt({},i),p=kt({},p),p.fill=QE(a)):!dg(p.stroke)&&dg(h)&&(s||(i=kt({},i),p=kt({},p)),p.stroke=QE(h)),i.style=p}}if(i&&i.z2==null){s||(i=kt({},i));var m=r.z2EmphasisLift;i.z2=r.z2+(m!=null?m:Ev)}return i}function Ume(r,e,t){if(t&&t.z2==null){t=kt({},t);var i=r.z2SelectLift;t.z2=r.z2+(i!=null?i:Fme)}return t}function jme(r,e,t){var i=di(r.currentStates,e)>=0,n=r.style.opacity,s=i?null:$me(r,["opacity"],e,{opacity:1});t=t||{};var u=t.style||{};return u.opacity==null&&(t=kt({},t),u=kt({opacity:i?n:s.opacity*.1},u),t.style=u),t}function MC(r,e){var t=this.states[r];if(this.style){if(r==="emphasis")return Gme(this,r,e,t);if(r==="blur")return jme(this,r,t);if(r==="select")return Ume(this,r,t)}return t}function qp(r){r.stateProxy=MC;var e=r.getTextContent(),t=r.getTextGuideLine();e&&(e.stateProxy=MC),t&&(t.stateProxy=MC)}function u4(r,e){!DH(r,e)&&!r.__highByOuter&&mh(r,TH)}function c4(r,e){!DH(r,e)&&!r.__highByOuter&&mh(r,MH)}function lh(r,e){r.__highByOuter|=1<<(e||0),mh(r,TH)}function uh(r,e){!(r.__highByOuter&=~(1<<(e||0)))&&mh(r,MH)}function CH(r){mh(r,RL)}function OL(r){mh(r,AH)}function IH(r){mh(r,Nme)}function EH(r){mh(r,Vme)}function DH(r,e){return r.__highDownSilentOnTouch&&e.zrByTouch}function PH(r){var e=r.getModel(),t=[],i=[];e.eachComponent(function(n,s){var u=LL(s),a=n==="series",h=a?r.getViewOfSeriesModel(s):r.getViewOfComponentModel(s);!a&&i.push(h),u.isBlured&&(h.group.traverse(function(p){AH(p)}),a&&t.push(s)),u.isBlured=!1}),ue(i,function(n){n&&n.toggleBlurSeries&&n.toggleBlurSeries(t,!1,e)})}function mD(r,e,t,i){var n=i.getModel();t=t||"coordinateSystem";function s(p,m){for(var v=0;v<m.length;v++){var x=p.getItemGraphicEl(m[v]);x&&OL(x)}}if(r!=null&&!(!e||e==="none")){var u=n.getSeriesByIndex(r),a=u.coordinateSystem;a&&a.master&&(a=a.master);var h=[];n.eachSeries(function(p){var m=u===p,v=p.coordinateSystem;v&&v.master&&(v=v.master);var x=v&&a?v===a:m;if(!(t==="series"&&!m||t==="coordinateSystem"&&!x||e==="series"&&m)){var w=i.getViewOfSeriesModel(p);if(w.group.traverse(function(I){I.__highByOuter&&m&&e==="self"||RL(I)}),So(e))s(p.getData(),e);else if(Br(e))for(var T=bi(e),C=0;C<T.length;C++)s(p.getData(T[C]),e[T[C]]);h.push(p),LL(p).isBlured=!0}}),n.eachComponent(function(p,m){if(p!=="series"){var v=i.getViewOfComponentModel(m);v&&v.toggleBlurSeries&&v.toggleBlurSeries(h,!0,n)}})}}function gD(r,e,t){if(!(r==null||e==null)){var i=t.getModel().getComponent(r,e);if(!!i){LL(i).isBlured=!0;var n=t.getViewOfComponentModel(i);!n||!n.focusBlurEnabled||n.group.traverse(function(s){RL(s)})}}}function Hme(r,e,t){var i=r.seriesIndex,n=r.getData(e.dataType);if(!!n){var s=Hp(n,e);s=(Nt(s)?s[0]:s)||0;var u=n.getItemGraphicEl(s);if(!u)for(var a=n.count(),h=0;!u&&h<a;)u=n.getItemGraphicEl(h++);if(u){var p=Gr(u);mD(i,p.focus,p.blurScope,t)}else{var m=r.get(["emphasis","focus"]),v=r.get(["emphasis","blurScope"]);m!=null&&mD(i,m,v,t)}}}function zL(r,e,t,i){var n={focusSelf:!1,dispatchers:null};if(r==null||r==="series"||e==null||t==null)return n;var s=i.getModel().getComponent(r,e);if(!s)return n;var u=i.getViewOfComponentModel(s);if(!u||!u.findHighDownDispatchers)return n;for(var a=u.findHighDownDispatchers(t),h,p=0;p<a.length;p++)if(Gr(a[p]).focus==="self"){h=!0;break}return{focusSelf:h,dispatchers:a}}function Wme(r,e,t){var i=Gr(r),n=zL(i.componentMainType,i.componentIndex,i.componentHighDownName,t),s=n.dispatchers,u=n.focusSelf;s?(u&&gD(i.componentMainType,i.componentIndex,t),ue(s,function(a){return u4(a,e)})):(mD(i.seriesIndex,i.focus,i.blurScope,t),i.focus==="self"&&gD(i.componentMainType,i.componentIndex,t),u4(r,e))}function qme(r,e,t){PH(t);var i=Gr(r),n=zL(i.componentMainType,i.componentIndex,i.componentHighDownName,t).dispatchers;n?ue(n,function(s){return c4(s,e)}):c4(r,e)}function Zme(r,e,t){if(!!_D(e)){var i=e.dataType,n=r.getData(i),s=Hp(n,e);Nt(s)||(s=[s]),r[e.type===y0?"toggleSelect":e.type===_0?"select":"unselect"](s,i)}}function h4(r){var e=r.getAllData();ue(e,function(t){var i=t.data,n=t.type;i.eachItemGraphicEl(function(s,u){r.isSelected(u,n)?IH(s):EH(s)})})}function Xme(r){var e=[];return r.eachSeries(function(t){var i=t.getAllData();ue(i,function(n){n.data;var s=n.type,u=t.getSelectedDataIndices();if(u.length>0){var a={dataIndex:u,seriesIndex:t.seriesIndex};s!=null&&(a.dataType=s),e.push(a)}})}),e}function zp(r,e,t){wp(r,!0),mh(r,qp),vD(r,e,t)}function Yme(r){wp(r,!1)}function Kn(r,e,t,i){i?Yme(r):zp(r,e,t)}function vD(r,e,t){var i=Gr(r);e!=null?(i.focus=e,i.blurScope=t):i.focus&&(i.focus=null)}var d4=["emphasis","blur","select"],Kme={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function to(r,e,t,i){t=t||"itemStyle";for(var n=0;n<d4.length;n++){var s=d4[n],u=e.getModel([s,t]),a=r.ensureState(s);a.style=i?i(u):u[Kme[t]]()}}function wp(r,e){var t=e===!1,i=r;r.highDownSilentOnTouch&&(i.__highDownSilentOnTouch=r.highDownSilentOnTouch),(!t||i.__highDownDispatcher)&&(i.__highByOuter=i.__highByOuter||0,i.__highDownDispatcher=!t)}function j0(r){return!!(r&&r.__highDownDispatcher)}function Jme(r,e,t){var i=Gr(r);i.componentMainType=e.mainType,i.componentIndex=e.componentIndex,i.componentHighDownName=t}function Qme(r){var e=s4[r];return e==null&&o4<=32&&(e=s4[r]=o4++),e}function _D(r){var e=r.type;return e===_0||e===Kw||e===y0}function f4(r){var e=r.type;return e===Op||e===Yw}function ege(r){var e=SH(r);e.normalFill=r.style.fill,e.normalStroke=r.style.stroke;var t=r.states.select||{};e.selectFill=t.style&&t.style.fill||null,e.selectStroke=t.style&&t.style.stroke||null}var fg=sc.CMD,tge=[[],[],[]],p4=Math.sqrt,rge=Math.atan2;function LH(r,e){if(!!e){var t=r.data,i=r.len(),n,s,u,a,h,p,m=fg.M,v=fg.C,x=fg.L,w=fg.R,T=fg.A,C=fg.Q;for(u=0,a=0;u<i;){switch(n=t[u++],a=u,s=0,n){case m:s=1;break;case x:s=1;break;case v:s=3;break;case C:s=2;break;case T:var I=e[4],k=e[5],R=p4(e[0]*e[0]+e[1]*e[1]),z=p4(e[2]*e[2]+e[3]*e[3]),$=rge(-e[1]/z,e[0]/R);t[u]*=R,t[u++]+=I,t[u]*=z,t[u++]+=k,t[u++]*=R,t[u++]*=z,t[u++]+=$,t[u++]+=$,u+=2,a=u;break;case w:p[0]=t[u++],p[1]=t[u++],Qa(p,p,e),t[a++]=p[0],t[a++]=p[1],p[0]+=t[u++],p[1]+=t[u++],Qa(p,p,e),t[a++]=p[0],t[a++]=p[1]}for(h=0;h<s;h++){var j=tge[h];j[0]=t[u++],j[1]=t[u++],Qa(j,j,e),t[a++]=j[0],t[a++]=j[1]}}r.increaseVersion()}}var AC=Math.sqrt,Hb=Math.sin,Wb=Math.cos,xy=Math.PI;function m4(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function yD(r,e){return(r[0]*e[0]+r[1]*e[1])/(m4(r)*m4(e))}function g4(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(yD(r,e))}function v4(r,e,t,i,n,s,u,a,h,p,m){var v=h*(xy/180),x=Wb(v)*(r-t)/2+Hb(v)*(e-i)/2,w=-1*Hb(v)*(r-t)/2+Wb(v)*(e-i)/2,T=x*x/(u*u)+w*w/(a*a);T>1&&(u*=AC(T),a*=AC(T));var C=(n===s?-1:1)*AC((u*u*(a*a)-u*u*(w*w)-a*a*(x*x))/(u*u*(w*w)+a*a*(x*x)))||0,I=C*u*w/a,k=C*-a*x/u,R=(r+t)/2+Wb(v)*I-Hb(v)*k,z=(e+i)/2+Hb(v)*I+Wb(v)*k,$=g4([1,0],[(x-I)/u,(w-k)/a]),j=[(x-I)/u,(w-k)/a],G=[(-1*x-I)/u,(-1*w-k)/a],Y=g4(j,G);if(yD(j,G)<=-1&&(Y=xy),yD(j,G)>=1&&(Y=0),Y<0){var Z=Math.round(Y/xy*1e6)/1e6;Y=xy*2+Z%2*xy}m.addData(p,R,z,u,a,$,Y,v,s)}var ige=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,nge=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function age(r){var e=new sc;if(!r)return e;var t=0,i=0,n=t,s=i,u,a=sc.CMD,h=r.match(ige);if(!h)return e;for(var p=0;p<h.length;p++){for(var m=h[p],v=m.charAt(0),x=void 0,w=m.match(nge)||[],T=w.length,C=0;C<T;C++)w[C]=parseFloat(w[C]);for(var I=0;I<T;){var k=void 0,R=void 0,z=void 0,$=void 0,j=void 0,G=void 0,Y=void 0,Z=t,H=i,re=void 0,ne=void 0;switch(v){case"l":t+=w[I++],i+=w[I++],x=a.L,e.addData(x,t,i);break;case"L":t=w[I++],i=w[I++],x=a.L,e.addData(x,t,i);break;case"m":t+=w[I++],i+=w[I++],x=a.M,e.addData(x,t,i),n=t,s=i,v="l";break;case"M":t=w[I++],i=w[I++],x=a.M,e.addData(x,t,i),n=t,s=i,v="L";break;case"h":t+=w[I++],x=a.L,e.addData(x,t,i);break;case"H":t=w[I++],x=a.L,e.addData(x,t,i);break;case"v":i+=w[I++],x=a.L,e.addData(x,t,i);break;case"V":i=w[I++],x=a.L,e.addData(x,t,i);break;case"C":x=a.C,e.addData(x,w[I++],w[I++],w[I++],w[I++],w[I++],w[I++]),t=w[I-2],i=w[I-1];break;case"c":x=a.C,e.addData(x,w[I++]+t,w[I++]+i,w[I++]+t,w[I++]+i,w[I++]+t,w[I++]+i),t+=w[I-2],i+=w[I-1];break;case"S":k=t,R=i,re=e.len(),ne=e.data,u===a.C&&(k+=t-ne[re-4],R+=i-ne[re-3]),x=a.C,Z=w[I++],H=w[I++],t=w[I++],i=w[I++],e.addData(x,k,R,Z,H,t,i);break;case"s":k=t,R=i,re=e.len(),ne=e.data,u===a.C&&(k+=t-ne[re-4],R+=i-ne[re-3]),x=a.C,Z=t+w[I++],H=i+w[I++],t+=w[I++],i+=w[I++],e.addData(x,k,R,Z,H,t,i);break;case"Q":Z=w[I++],H=w[I++],t=w[I++],i=w[I++],x=a.Q,e.addData(x,Z,H,t,i);break;case"q":Z=w[I++]+t,H=w[I++]+i,t+=w[I++],i+=w[I++],x=a.Q,e.addData(x,Z,H,t,i);break;case"T":k=t,R=i,re=e.len(),ne=e.data,u===a.Q&&(k+=t-ne[re-4],R+=i-ne[re-3]),t=w[I++],i=w[I++],x=a.Q,e.addData(x,k,R,t,i);break;case"t":k=t,R=i,re=e.len(),ne=e.data,u===a.Q&&(k+=t-ne[re-4],R+=i-ne[re-3]),t+=w[I++],i+=w[I++],x=a.Q,e.addData(x,k,R,t,i);break;case"A":z=w[I++],$=w[I++],j=w[I++],G=w[I++],Y=w[I++],Z=t,H=i,t=w[I++],i=w[I++],x=a.A,v4(Z,H,t,i,G,Y,z,$,j,x,e);break;case"a":z=w[I++],$=w[I++],j=w[I++],G=w[I++],Y=w[I++],Z=t,H=i,t+=w[I++],i+=w[I++],x=a.A,v4(Z,H,t,i,G,Y,z,$,j,x,e);break}}(v==="z"||v==="Z")&&(x=a.Z,e.addData(x),t=n,i=s),u=x}return e.toStatic(),e}var kH=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.applyTransform=function(t){},e}(_i);function RH(r){return r.setData!=null}function OH(r,e){var t=age(r),i=kt({},e);return i.buildPath=function(n){if(RH(n)){n.setData(t.data);var s=n.getContext();s&&n.rebuildPath(s,1)}else{var s=n;t.rebuildPath(s,1)}},i.applyTransform=function(n){LH(t,n),this.dirtyShape()},i}function zH(r,e){return new kH(OH(r,e))}function oge(r,e){var t=OH(r,e),i=function(n){lt(s,n);function s(u){var a=n.call(this,u)||this;return a.applyTransform=t.applyTransform,a.buildPath=t.buildPath,a}return s}(kH);return i}function sge(r,e){for(var t=[],i=r.length,n=0;n<i;n++){var s=r[n];t.push(s.getUpdatedPathProxy(!0))}var u=new _i(e);return u.createPathProxy(),u.buildPath=function(a){if(RH(a)){a.appendPath(t);var h=a.getContext();h&&a.rebuildPath(h,1)}},u}function BL(r,e){e=e||{};var t=new _i;return r.shape&&t.setShape(r.shape),t.setStyle(r.style),e.bakeTransform?LH(t.path,r.getComputedTransform()):e.toLocal?t.setLocalTransform(r.getComputedTransform()):t.copyTransform(r),t.buildPath=r.buildPath,t.applyTransform=t.applyTransform,t.z=r.z,t.z2=r.z2,t.zlevel=r.zlevel,t}var lge=function(){function r(){this.cx=0,this.cy=0,this.r=0}return r}(),BH=function(r){lt(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new lge},e.prototype.buildPath=function(t,i){t.moveTo(i.cx+i.r,i.cy),t.arc(i.cx,i.cy,i.r,0,Math.PI*2)},e}(_i);BH.prototype.type="circle";var jd=BH,uge=function(){function r(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return r}(),FH=function(r){lt(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new uge},e.prototype.buildPath=function(t,i){var n=.5522848,s=i.cx,u=i.cy,a=i.rx,h=i.ry,p=a*n,m=h*n;t.moveTo(s-a,u),t.bezierCurveTo(s-a,u-m,s-p,u-h,s,u-h),t.bezierCurveTo(s+p,u-h,s+a,u-m,s+a,u),t.bezierCurveTo(s+a,u+m,s+p,u+h,s,u+h),t.bezierCurveTo(s-p,u+h,s-a,u+m,s-a,u),t.closePath()},e}(_i);FH.prototype.type="ellipse";var FL=FH,NH=Math.PI,CC=NH*2,Wf=Math.sin,pg=Math.cos,cge=Math.acos,_o=Math.atan2,_4=Math.abs,x0=Math.sqrt,qy=Math.max,zu=Math.min,jl=1e-4;function hge(r,e,t,i,n,s,u,a){var h=t-r,p=i-e,m=u-n,v=a-s,x=v*h-m*p;if(!(x*x<jl))return x=(m*(e-s)-v*(r-n))/x,[r+x*h,e+x*p]}function qb(r,e,t,i,n,s,u){var a=r-t,h=e-i,p=(u?s:-s)/x0(a*a+h*h),m=p*h,v=-p*a,x=r+m,w=e+v,T=t+m,C=i+v,I=(x+T)/2,k=(w+C)/2,R=T-x,z=C-w,$=R*R+z*z,j=n-s,G=x*C-T*w,Y=(z<0?-1:1)*x0(qy(0,j*j*$-G*G)),Z=(G*z-R*Y)/$,H=(-G*R-z*Y)/$,re=(G*z+R*Y)/$,ne=(-G*R+z*Y)/$,se=Z-I,me=H-k,Se=re-I,Ie=ne-k;return se*se+me*me>Se*Se+Ie*Ie&&(Z=re,H=ne),{cx:Z,cy:H,x0:-m,y0:-v,x1:Z*(n/j-1),y1:H*(n/j-1)}}function dge(r){var e;if(Nt(r)){var t=r.length;if(!t)return r;t===1?e=[r[0],r[0],0,0]:t===2?e=[r[0],r[0],r[1],r[1]]:t===3?e=r.concat(r[2]):e=r}else e=[r,r,r,r];return e}function fge(r,e){var t,i=qy(e.r,0),n=qy(e.r0||0,0),s=i>0,u=n>0;if(!(!s&&!u)){if(s||(i=n,n=0),n>i){var a=i;i=n,n=a}var h=e.startAngle,p=e.endAngle;if(!(isNaN(h)||isNaN(p))){var m=e.cx,v=e.cy,x=!!e.clockwise,w=_4(p-h),T=w>CC&&w%CC;if(T>jl&&(w=T),!(i>jl))r.moveTo(m,v);else if(w>CC-jl)r.moveTo(m+i*pg(h),v+i*Wf(h)),r.arc(m,v,i,h,p,!x),n>jl&&(r.moveTo(m+n*pg(p),v+n*Wf(p)),r.arc(m,v,n,p,h,x));else{var C=void 0,I=void 0,k=void 0,R=void 0,z=void 0,$=void 0,j=void 0,G=void 0,Y=void 0,Z=void 0,H=void 0,re=void 0,ne=void 0,se=void 0,me=void 0,Se=void 0,Ie=i*pg(h),ke=i*Wf(h),Fe=n*pg(p),Ce=n*Wf(p),We=w>jl;if(We){var gt=e.cornerRadius;gt&&(t=dge(gt),C=t[0],I=t[1],k=t[2],R=t[3]);var St=_4(i-n)/2;if(z=zu(St,k),$=zu(St,R),j=zu(St,C),G=zu(St,I),H=Y=qy(z,$),re=Z=qy(j,G),(Y>jl||Z>jl)&&(ne=i*pg(p),se=i*Wf(p),me=n*pg(h),Se=n*Wf(h),w<NH)){var et=hge(Ie,ke,me,Se,ne,se,Fe,Ce);if(et){var ht=Ie-et[0],$e=ke-et[1],He=ne-et[0],dt=se-et[1],nt=1/Wf(cge((ht*He+$e*dt)/(x0(ht*ht+$e*$e)*x0(He*He+dt*dt)))/2),vt=x0(et[0]*et[0]+et[1]*et[1]);H=zu(Y,(i-vt)/(nt+1)),re=zu(Z,(n-vt)/(nt-1))}}}if(!We)r.moveTo(m+Ie,v+ke);else if(H>jl){var Pt=zu(k,H),jt=zu(R,H),Et=qb(me,Se,Ie,ke,i,Pt,x),Wt=qb(ne,se,Fe,Ce,i,jt,x);r.moveTo(m+Et.cx+Et.x0,v+Et.cy+Et.y0),H<Y&&Pt===jt?r.arc(m+Et.cx,v+Et.cy,H,_o(Et.y0,Et.x0),_o(Wt.y0,Wt.x0),!x):(Pt>0&&r.arc(m+Et.cx,v+Et.cy,Pt,_o(Et.y0,Et.x0),_o(Et.y1,Et.x1),!x),r.arc(m,v,i,_o(Et.cy+Et.y1,Et.cx+Et.x1),_o(Wt.cy+Wt.y1,Wt.cx+Wt.x1),!x),jt>0&&r.arc(m+Wt.cx,v+Wt.cy,jt,_o(Wt.y1,Wt.x1),_o(Wt.y0,Wt.x0),!x))}else r.moveTo(m+Ie,v+ke),r.arc(m,v,i,h,p,!x);if(!(n>jl)||!We)r.lineTo(m+Fe,v+Ce);else if(re>jl){var Pt=zu(C,re),jt=zu(I,re),Et=qb(Fe,Ce,ne,se,n,-jt,x),Wt=qb(Ie,ke,me,Se,n,-Pt,x);r.lineTo(m+Et.cx+Et.x0,v+Et.cy+Et.y0),re<Z&&Pt===jt?r.arc(m+Et.cx,v+Et.cy,re,_o(Et.y0,Et.x0),_o(Wt.y0,Wt.x0),!x):(jt>0&&r.arc(m+Et.cx,v+Et.cy,jt,_o(Et.y0,Et.x0),_o(Et.y1,Et.x1),!x),r.arc(m,v,n,_o(Et.cy+Et.y1,Et.cx+Et.x1),_o(Wt.cy+Wt.y1,Wt.cx+Wt.x1),x),Pt>0&&r.arc(m+Wt.cx,v+Wt.cy,Pt,_o(Wt.y1,Wt.x1),_o(Wt.y0,Wt.x0),!x))}else r.lineTo(m+Fe,v+Ce),r.arc(m,v,n,p,h,x)}r.closePath()}}}var pge=function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return r}(),VH=function(r){lt(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new pge},e.prototype.buildPath=function(t,i){fge(t,i)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(_i);VH.prototype.type="sector";var cs=VH,mge=function(){function r(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return r}(),$H=function(r){lt(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new mge},e.prototype.buildPath=function(t,i){var n=i.cx,s=i.cy,u=Math.PI*2;t.moveTo(n+i.r,s),t.arc(n,s,i.r,0,u,!1),t.moveTo(n+i.r0,s),t.arc(n,s,i.r0,0,u,!0)},e}(_i);$H.prototype.type="ring";var HT=$H;function gge(r,e,t,i){var n=[],s=[],u=[],a=[],h,p,m,v;if(i){m=[1/0,1/0],v=[-1/0,-1/0];for(var x=0,w=r.length;x<w;x++)gd(m,m,r[x]),vd(v,v,r[x]);gd(m,m,i[0]),vd(v,v,i[1])}for(var x=0,w=r.length;x<w;x++){var T=r[x];if(t)h=r[x?x-1:w-1],p=r[(x+1)%w];else if(x===0||x===w-1){n.push(Jc(r[x]));continue}else h=r[x-1],p=r[x+1];xp(s,p,h),Gw(s,s,e);var C=UE(T,h),I=UE(T,p),k=C+I;k!==0&&(C/=k,I/=k),Gw(u,s,-C),Gw(a,s,I);var R=h5([],T,u),z=h5([],T,a);i&&(vd(R,R,m),gd(R,R,v),vd(z,z,m),gd(z,z,v)),n.push(R),n.push(z)}return t&&n.push(n.shift()),n}function GH(r,e,t){var i=e.smooth,n=e.points;if(n&&n.length>=2){if(i){var s=gge(n,i,t,e.smoothConstraint);r.moveTo(n[0][0],n[0][1]);for(var u=n.length,a=0;a<(t?u:u-1);a++){var h=s[a*2],p=s[a*2+1],m=n[(a+1)%u];r.bezierCurveTo(h[0],h[1],p[0],p[1],m[0],m[1])}}else{r.moveTo(n[0][0],n[0][1]);for(var a=1,v=n.length;a<v;a++)r.lineTo(n[a][0],n[a][1])}t&&r.closePath()}}var vge=function(){function r(){this.points=null,this.smooth=0,this.smoothConstraint=null}return r}(),UH=function(r){lt(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new vge},e.prototype.buildPath=function(t,i){GH(t,i,!0)},e}(_i);UH.prototype.type="polygon";var hs=UH,_ge=function(){function r(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return r}(),jH=function(r){lt(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new _ge},e.prototype.buildPath=function(t,i){GH(t,i,!1)},e}(_i);jH.prototype.type="polyline";var ds=jH,yge={},xge=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return r}(),HH=function(r){lt(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new xge},e.prototype.buildPath=function(t,i){var n,s,u,a;if(this.subPixelOptimize){var h=vH(yge,i,this.style);n=h.x1,s=h.y1,u=h.x2,a=h.y2}else n=i.x1,s=i.y1,u=i.x2,a=i.y2;var p=i.percent;p!==0&&(t.moveTo(n,s),p<1&&(u=n*(1-p)+u*p,a=s*(1-p)+a*p),t.lineTo(u,a))},e.prototype.pointAt=function(t){var i=this.shape;return[i.x1*(1-t)+i.x2*t,i.y1*(1-t)+i.y2*t]},e}(_i);HH.prototype.type="line";var Ua=HH,ts=[],bge=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return r}();function y4(r,e,t){var i=r.cpx2,n=r.cpy2;return i!=null||n!=null?[(t?S5:Da)(r.x1,r.cpx1,r.cpx2,r.x2,e),(t?S5:Da)(r.y1,r.cpy1,r.cpy2,r.y2,e)]:[(t?XE:Va)(r.x1,r.cpx1,r.x2,e),(t?XE:Va)(r.y1,r.cpy1,r.y2,e)]}var WH=function(r){lt(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new bge},e.prototype.buildPath=function(t,i){var n=i.x1,s=i.y1,u=i.x2,a=i.y2,h=i.cpx1,p=i.cpy1,m=i.cpx2,v=i.cpy2,x=i.percent;x!==0&&(t.moveTo(n,s),m==null||v==null?(x<1&&(B0(n,h,u,x,ts),h=ts[1],u=ts[2],B0(s,p,a,x,ts),p=ts[1],a=ts[2]),t.quadraticCurveTo(h,p,u,a)):(x<1&&(Od(n,h,m,u,x,ts),h=ts[1],m=ts[2],u=ts[3],Od(s,p,v,a,x,ts),p=ts[1],v=ts[2],a=ts[3]),t.bezierCurveTo(h,p,m,v,u,a)))},e.prototype.pointAt=function(t){return y4(this.shape,t,!1)},e.prototype.tangentAt=function(t){var i=y4(this.shape,t,!0);return Av(i,i)},e}(_i);WH.prototype.type="bezier-curve";var WT=WH,wge=function(){function r(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r}(),qH=function(r){lt(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new wge},e.prototype.buildPath=function(t,i){var n=i.cx,s=i.cy,u=Math.max(i.r,0),a=i.startAngle,h=i.endAngle,p=i.clockwise,m=Math.cos(a),v=Math.sin(a);t.moveTo(m*u+n,v*u+s),t.arc(n,s,u,a,h,!p)},e}(_i);qH.prototype.type="arc";var NL=qH,Sge=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="compound",t}return e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,i=this.shapeChanged(),n=0;n<t.length;n++)i=i||t[n].shapeChanged();i&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],i=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(i[0],i[1],t[n].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,i){for(var n=i.paths||[],s=0;s<n.length;s++)n[s].buildPath(t,n[s].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],i=0;i<t.length;i++)t[i].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),_i.prototype.getBoundingRect.call(this)},e}(_i),VL=Sge,Tge=function(){function r(e){this.colorStops=e||[]}return r.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},r}(),ZH=Tge,Mge=function(r){lt(e,r);function e(t,i,n,s,u,a){var h=r.call(this,u)||this;return h.x=t==null?0:t,h.y=i==null?0:i,h.x2=n==null?1:n,h.y2=s==null?0:s,h.type="linear",h.global=a||!1,h}return e}(ZH),gx=Mge,Age=function(r){lt(e,r);function e(t,i,n,s,u){var a=r.call(this,s)||this;return a.x=t==null?.5:t,a.y=i==null?.5:i,a.r=n==null?.5:n,a.type="radial",a.global=u||!1,a}return e}(ZH),XH=Age,qf=[0,0],Zf=[0,0],Zb=new ii,Xb=new ii,Cge=function(){function r(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var i=0;i<4;i++)this._corners[i]=new ii;for(var i=0;i<2;i++)this._axes[i]=new ii;e&&this.fromBoundingRect(e,t)}return r.prototype.fromBoundingRect=function(e,t){var i=this._corners,n=this._axes,s=e.x,u=e.y,a=s+e.width,h=u+e.height;if(i[0].set(s,u),i[1].set(a,u),i[2].set(a,h),i[3].set(s,h),t)for(var p=0;p<4;p++)i[p].transform(t);ii.sub(n[0],i[1],i[0]),ii.sub(n[1],i[3],i[0]),n[0].normalize(),n[1].normalize();for(var p=0;p<2;p++)this._origin[p]=n[p].dot(i[0])},r.prototype.intersect=function(e,t){var i=!0,n=!t;return Zb.set(1/0,1/0),Xb.set(0,0),!this._intersectCheckOneSide(this,e,Zb,Xb,n,1)&&(i=!1,n)||!this._intersectCheckOneSide(e,this,Zb,Xb,n,-1)&&(i=!1,n)||n||ii.copy(t,i?Zb:Xb),i},r.prototype._intersectCheckOneSide=function(e,t,i,n,s,u){for(var a=!0,h=0;h<2;h++){var p=this._axes[h];if(this._getProjMinMaxOnAxis(h,e._corners,qf),this._getProjMinMaxOnAxis(h,t._corners,Zf),qf[1]<Zf[0]||qf[0]>Zf[1]){if(a=!1,s)return a;var m=Math.abs(Zf[0]-qf[1]),v=Math.abs(qf[0]-Zf[1]);Math.min(m,v)>n.len()&&(m<v?ii.scale(n,p,-m*u):ii.scale(n,p,v*u))}else if(i){var m=Math.abs(Zf[0]-qf[1]),v=Math.abs(qf[0]-Zf[1]);Math.min(m,v)<i.len()&&(m<v?ii.scale(i,p,m*u):ii.scale(i,p,-v*u))}}return a},r.prototype._getProjMinMaxOnAxis=function(e,t,i){for(var n=this._axes[e],s=this._origin,u=t[0].dot(n)+s[e],a=u,h=u,p=1;p<t.length;p++){var m=t[p].dot(n)+s[e];a=Math.min(m,a),h=Math.max(m,h)}i[0]=a,i[1]=h},r}(),IS=Cge,Ige=[],Ege=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return e.prototype.traverse=function(t,i){t.call(i,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,i){i?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,i){i=i||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],i)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var i=this._cursor;i<this._displayables.length;i++)t&&t(this._displayables[i]);for(var i=0;i<this._temporaryDisplayables.length;i++)t&&t(this._temporaryDisplayables[i])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var i=this._displayables[t];i.parent=this,i.update(),i.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var i=this._temporaryDisplayables[t];i.parent=this,i.update(),i.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new ai(1/0,1/0,-1/0,-1/0),i=0;i<this._displayables.length;i++){var n=this._displayables[i],s=n.getBoundingRect().clone();n.needLocalTransform()&&s.applyTransform(n.getLocalTransform(Ige)),t.union(s)}this._rect=t}return this._rect},e.prototype.contain=function(t,i){var n=this.transformCoordToLocal(t,i),s=this.getBoundingRect();if(s.contain(n[0],n[1]))for(var u=0;u<this._displayables.length;u++){var a=this._displayables[u];if(a.contain(t,i))return!0}return!1},e}(yl),Dge=Ege,YH=ki();function Dv(r,e,t,i,n){var s;if(e&&e.ecModel){var u=e.ecModel.getUpdatePayload();s=u&&u.animation}var a=e&&e.isAnimationEnabled(),h=r==="update";if(a){var p=void 0,m=void 0,v=void 0;i?(p=Yr(i.duration,200),m=Yr(i.easing,"cubicOut"),v=0):(p=e.getShallow(h?"animationDurationUpdate":"animationDuration"),m=e.getShallow(h?"animationEasingUpdate":"animationEasing"),v=e.getShallow(h?"animationDelayUpdate":"animationDelay")),s&&(s.duration!=null&&(p=s.duration),s.easing!=null&&(m=s.easing),s.delay!=null&&(v=s.delay)),kr(v)&&(v=v(t,n)),kr(p)&&(p=p(t));var x={duration:p||0,delay:v,easing:m};return x}else return null}function $L(r,e,t,i,n,s,u){var a=!1,h;kr(n)?(u=s,s=n,n=null):Br(n)&&(s=n.cb,u=n.during,a=n.isFrom,h=n.removeOpt,n=n.dataIndex);var p=r==="leave";p||e.stopAnimation("leave");var m=Dv(r,i,n,p?h||{}:null,i&&i.getAnimationDelayParams?i.getAnimationDelayParams(e,n):null);if(m&&m.duration>0){var v=m.duration,x=m.delay,w=m.easing,T={duration:v,delay:x||0,easing:w,done:s,force:!!s||!!u,setToFinal:!p,scope:r,during:u};a?e.animateFrom(t,T):e.animateTo(t,T)}else e.stopAnimation(),!a&&e.attr(t),u&&u(1),s&&s()}function ji(r,e,t,i,n,s){$L("update",r,e,t,i,n,s)}function Bn(r,e,t,i,n,s){$L("enter",r,e,t,i,n,s)}function qg(r){if(!r.__zr)return!0;for(var e=0;e<r.animators.length;e++){var t=r.animators[e];if(t.scope==="leave")return!0}return!1}function zd(r,e,t,i,n,s){qg(r)||$L("leave",r,e,t,i,n,s)}function x4(r,e,t,i){r.removeTextContent(),r.removeTextGuideLine(),zd(r,{style:{opacity:0}},e,t,i)}function H0(r,e,t){function i(){r.parent&&r.parent.remove(r)}r.isGroup?r.traverse(function(n){n.isGroup||x4(n,e,t,i)}):x4(r,e,t,i)}function nu(r){YH(r).oldStyle=r.style}function Pge(r){return YH(r).oldStyle}var ES=Math.max,DS=Math.min,xD={};function Lge(r){return _i.extend(r)}var kge=oge;function Rge(r,e){return kge(r,e)}function su(r,e){xD[r]=e}function GL(r){if(xD.hasOwnProperty(r))return xD[r]}function qT(r,e,t,i){var n=zH(r,e);return t&&(i==="center"&&(t=JH(t,n.getBoundingRect())),QH(n,t)),n}function KH(r,e,t){var i=new io({style:{image:r,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(n){if(t==="center"){var s={width:n.width,height:n.height};i.setStyle(JH(e,s))}}});return i}function JH(r,e){var t=e.width/e.height,i=r.height*t,n;i<=r.width?n=r.height:(i=r.width,n=i/t);var s=r.x+r.width/2,u=r.y+r.height/2;return{x:s-i/2,y:u-n/2,width:i,height:n}}var dl=sge;function QH(r,e){if(!!r.applyTransform){var t=r.getBoundingRect(),i=t.calculateTransform(e);r.applyTransform(i)}}function uv(r,e){return vH(r,r,{lineWidth:e}),r}function Oge(r){return _H(r.shape,r.shape,r.style),r}var Jw=bp;function Bp(r,e){for(var t=zT([]);r&&r!==e;)Qc(t,r.getLocalTransform(),t),r=r.parent;return t}function tu(r,e,t){return e&&!So(e)&&(e=Xc.getLocalTransform(e)),t&&(e=Cv([],e)),Qa([],r,e)}function ZT(r,e,t){var i=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),n=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),s=[r==="left"?-i:r==="right"?i:0,r==="top"?-n:r==="bottom"?n:0];return s=tu(s,e,t),Math.abs(s[0])>Math.abs(s[1])?s[0]>0?"right":"left":s[1]>0?"bottom":"top"}function b4(r){return!r.isGroup}function zge(r){return r.shape!=null}function vx(r,e,t){if(!r||!e)return;function i(u){var a={};return u.traverse(function(h){b4(h)&&h.anid&&(a[h.anid]=h)}),a}function n(u){var a={x:u.x,y:u.y,rotation:u.rotation};return zge(u)&&(a.shape=kt({},u.shape)),a}var s=i(r);e.traverse(function(u){if(b4(u)&&u.anid){var a=s[u.anid];if(a){var h=n(u);u.attr(n(a)),ji(u,h,t,Gr(u).dataIndex)}}})}function eW(r,e){return Ht(r,function(t){var i=t[0];i=ES(i,e.x),i=DS(i,e.x+e.width);var n=t[1];return n=ES(n,e.y),n=DS(n,e.y+e.height),[i,n]})}function Bge(r,e){var t=ES(r.x,e.x),i=DS(r.x+r.width,e.x+e.width),n=ES(r.y,e.y),s=DS(r.y+r.height,e.y+e.height);if(i>=t&&s>=n)return{x:t,y:n,width:i-t,height:s-n}}function _x(r,e,t){var i=kt({rectHover:!0},e),n=i.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},r)return r.indexOf("image://")===0?(n.image=r.slice(8),zr(n,t),new io(i)):qT(r.replace("path://",""),i,t,"center")}function Zy(r,e,t,i,n){for(var s=0,u=n[n.length-1];s<n.length;s++){var a=n[s];if(tW(r,e,t,i,a[0],a[1],u[0],u[1]))return!0;u=a}}function tW(r,e,t,i,n,s,u,a){var h=t-r,p=i-e,m=u-n,v=a-s,x=IC(m,v,h,p);if(Fge(x))return!1;var w=r-n,T=e-s,C=IC(w,T,h,p)/x;if(C<0||C>1)return!1;var I=IC(w,T,m,v)/x;return!(I<0||I>1)}function IC(r,e,t,i){return r*i-t*e}function Fge(r){return r<=1e-6&&r>=-1e-6}function Pv(r){var e=r.itemTooltipOption,t=r.componentModel,i=r.itemName,n=gr(e)?{formatter:e}:e,s=t.mainType,u=t.componentIndex,a={componentType:s,name:i,$vars:["name"]};a[s+"Index"]=u;var h=r.formatterParamsExtra;h&&ue(bi(h),function(m){wr(a,m)||(a[m]=h[m],a.$vars.push(m))});var p=Gr(r.el);p.componentMainType=s,p.componentIndex=u,p.tooltipConfig={name:i,option:zr({content:i,formatterParams:a},n)}}function w4(r,e){var t;r.isGroup&&(t=e(r)),t||r.traverse(e)}function Hd(r,e){if(r)if(Nt(r))for(var t=0;t<r.length;t++)w4(r[t],e);else w4(r,e)}su("circle",jd);su("ellipse",FL);su("sector",cs);su("ring",HT);su("polygon",hs);su("polyline",ds);su("rect",Li);su("line",Ua);su("bezierCurve",WT);su("arc",NL);var em=Object.freeze(Object.defineProperty({__proto__:null,updateProps:ji,initProps:Bn,removeElement:zd,removeElementWithFadeOut:H0,isElementRemoved:qg,extendShape:Lge,extendPath:Rge,registerShape:su,getShapeClass:GL,makePath:qT,makeImage:KH,mergePath:dl,resizePath:QH,subPixelOptimizeLine:uv,subPixelOptimizeRect:Oge,subPixelOptimize:Jw,getTransform:Bp,applyTransform:tu,transformDirection:ZT,groupTransition:vx,clipPointsByRect:eW,clipRectByRect:Bge,createIcon:_x,linePolygonIntersect:Zy,lineLineIntersect:tW,setTooltipConfig:Pv,traverseElements:Hd,Group:Vr,Image:io,Text:Ni,Circle:jd,Ellipse:FL,Sector:cs,Ring:HT,Polygon:hs,Polyline:ds,Rect:Li,Line:Ua,BezierCurve:WT,Arc:NL,IncrementalDisplayable:Dge,CompoundPath:VL,LinearGradient:gx,RadialGradient:XH,BoundingRect:ai,OrientedBoundingRect:IS,Point:ii,Path:_i},Symbol.toStringTag,{value:"Module"})),XT={};function rW(r,e){for(var t=0;t<$o.length;t++){var i=$o[t],n=e[i],s=r.ensureState(i);s.style=s.style||{},s.style.text=n}var u=r.currentStates.slice();r.clearStates(!0),r.setStyle({text:e.normal}),r.useStates(u,!0)}function bD(r,e,t){var i=r.labelFetcher,n=r.labelDataIndex,s=r.labelDimIndex,u=e.normal,a;i&&(a=i.getFormattedLabel(n,"normal",null,s,u&&u.get("formatter"),t!=null?{interpolatedValue:t}:null)),a==null&&(a=kr(r.defaultText)?r.defaultText(n,r,t):r.defaultText);for(var h={normal:a},p=0;p<$o.length;p++){var m=$o[p],v=e[m];h[m]=Yr(i?i.getFormattedLabel(n,m,null,s,v&&v.get("formatter")):null,a)}return h}function ro(r,e,t,i){t=t||XT;for(var n=r instanceof Ni,s=!1,u=0;u<U0.length;u++){var a=e[U0[u]];if(a&&a.getShallow("show")){s=!0;break}}var h=n?r:r.getTextContent();if(s){n||(h||(h=new Ni,r.setTextContent(h)),r.stateProxy&&(h.stateProxy=r.stateProxy));var p=bD(t,e),m=e.normal,v=!!m.getShallow("show"),x=Mn(m,i&&i.normal,t,!1,!n);x.text=p.normal,n||r.setTextConfig(PS(m,t,!1));for(var u=0;u<$o.length;u++){var w=$o[u],a=e[w];if(a){var T=h.ensureState(w),C=!!Yr(a.getShallow("show"),v);if(C!==v&&(T.ignore=!C),T.style=Mn(a,i&&i[w],t,!0,!n),T.style.text=p[w],!n){var I=r.ensureState(w);I.textConfig=PS(a,t,!0)}}}h.silent=!!m.getShallow("silent"),h.style.x!=null&&(x.x=h.style.x),h.style.y!=null&&(x.y=h.style.y),h.ignore=!v,h.useStyle(x),h.dirty(),t.enableTextSetter&&(Lv(h).setLabelText=function(k){var R=bD(t,e,k);rW(h,R)})}else h&&(h.ignore=!0);r.dirty()}function Ra(r,e){e=e||"label";for(var t={normal:r.getModel(e)},i=0;i<$o.length;i++){var n=$o[i];t[n]=r.getModel([n,e])}return t}function Mn(r,e,t,i,n){var s={};return Nge(s,r,t,i,n),e&&kt(s,e),s}function PS(r,e,t){e=e||{};var i={},n,s=r.getShallow("rotate"),u=Yr(r.getShallow("distance"),t?null:5),a=r.getShallow("offset");return n=r.getShallow("position")||(t?null:"inside"),n==="outside"&&(n=e.defaultOutsidePosition||"top"),n!=null&&(i.position=n),a!=null&&(i.offset=a),s!=null&&(s*=Math.PI/180,i.rotation=s),u!=null&&(i.distance=u),i.outsideFill=r.get("color")==="inherit"?e.inheritColor||null:"auto",i}function Nge(r,e,t,i,n){t=t||XT;var s=e.ecModel,u=s&&s.option.textStyle,a=Vge(e),h;if(a){h={};for(var p in a)if(a.hasOwnProperty(p)){var m=e.getModel(["rich",p]);A4(h[p]={},m,u,t,i,n,!1,!0)}}h&&(r.rich=h);var v=e.get("overflow");v&&(r.overflow=v);var x=e.get("minMargin");x!=null&&(r.margin=x),A4(r,e,u,t,i,n,!0,!1)}function Vge(r){for(var e;r&&r!==r.ecModel;){var t=(r.option||XT).rich;if(t){e=e||{};for(var i=bi(t),n=0;n<i.length;n++){var s=i[n];e[s]=1}}r=r.parentModel}return e}var S4=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],T4=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],M4=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function A4(r,e,t,i,n,s,u,a){t=!n&&t||XT;var h=i&&i.inheritColor,p=e.getShallow("color"),m=e.getShallow("textBorderColor"),v=Yr(e.getShallow("opacity"),t.opacity);(p==="inherit"||p==="auto")&&(h?p=h:p=null),(m==="inherit"||m==="auto")&&(h?m=h:m=null),s||(p=p||t.color,m=m||t.textBorderColor),p!=null&&(r.fill=p),m!=null&&(r.stroke=m);var x=Yr(e.getShallow("textBorderWidth"),t.textBorderWidth);x!=null&&(r.lineWidth=x);var w=Yr(e.getShallow("textBorderType"),t.textBorderType);w!=null&&(r.lineDash=w);var T=Yr(e.getShallow("textBorderDashOffset"),t.textBorderDashOffset);T!=null&&(r.lineDashOffset=T),!n&&v==null&&!a&&(v=i&&i.defaultOpacity),v!=null&&(r.opacity=v),!n&&!s&&r.fill==null&&i.inheritColor&&(r.fill=i.inheritColor);for(var C=0;C<S4.length;C++){var I=S4[C],k=Yr(e.getShallow(I),t[I]);k!=null&&(r[I]=k)}for(var C=0;C<T4.length;C++){var I=T4[C],k=e.getShallow(I);k!=null&&(r[I]=k)}if(r.verticalAlign==null){var R=e.getShallow("baseline");R!=null&&(r.verticalAlign=R)}if(!u||!i.disableBox){for(var C=0;C<M4.length;C++){var I=M4[C],k=e.getShallow(I);k!=null&&(r[I]=k)}var z=e.getShallow("borderType");z!=null&&(r.borderDash=z),(r.backgroundColor==="auto"||r.backgroundColor==="inherit")&&h&&(r.backgroundColor=h),(r.borderColor==="auto"||r.borderColor==="inherit")&&h&&(r.borderColor=h)}}function UL(r,e){var t=e&&e.getModel("textStyle");return Kl([r.fontStyle||t&&t.getShallow("fontStyle")||"",r.fontWeight||t&&t.getShallow("fontWeight")||"",(r.fontSize||t&&t.getShallow("fontSize")||12)+"px",r.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var Lv=ki();function iW(r,e,t,i){if(!!r){var n=Lv(r);n.prevValue=n.value,n.value=t;var s=e.normal;n.valueAnimation=s.get("valueAnimation"),n.valueAnimation&&(n.precision=s.get("precision"),n.defaultInterpolatedText=i,n.statesModels=e)}}function nW(r,e,t,i,n){var s=Lv(r);if(!s.valueAnimation||s.prevValue===s.value)return;var u=s.defaultInterpolatedText,a=Yr(s.interpolatedValue,s.prevValue),h=s.value;function p(m){var v=sH(t,s.precision,a,h,m);s.interpolatedValue=m===1?null:v;var x=bD({labelDataIndex:e,labelFetcher:n,defaultText:u?u(v):v+""},s.statesModels,v);rW(r,x)}r.percent=0,(s.prevValue==null?Bn:ji)(r,{percent:1},i,e,null,p)}var $ge=["textStyle","color"],EC=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],DC=new Ni,Gge=function(){function r(){}return r.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get($ge):null)},r.prototype.getFont=function(){return UL({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},r.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},i=0;i<EC.length;i++)t[EC[i]]=this.getShallow(EC[i]);return DC.useStyle(t),DC.update(),DC.getBoundingRect()},r}(),Uge=Gge,aW=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],jge=Wp(aW),Hge=function(){function r(){}return r.prototype.getLineStyle=function(e){return jge(this,e)},r}(),oW=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Wge=Wp(oW),qge=function(){function r(){}return r.prototype.getItemStyle=function(e,t){return Wge(this,e,t)},r}(),tm=function(){function r(e,t,i){this.parentModel=t,this.ecModel=i,this.option=e}return r.prototype.init=function(e,t,i){},r.prototype.mergeOption=function(e,t){ni(this.option,e,!0)},r.prototype.get=function(e,t){return e==null?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},r.prototype.getShallow=function(e,t){var i=this.option,n=i==null?i:i[e];if(n==null&&!t){var s=this.parentModel;s&&(n=s.getShallow(e))}return n},r.prototype.getModel=function(e,t){var i=e!=null,n=i?this.parsePath(e):null,s=i?this._doGet(n):this.option;return t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(n)),new r(s,t,this.ecModel)},r.prototype.isEmpty=function(){return this.option==null},r.prototype.restoreData=function(){},r.prototype.clone=function(){var e=this.constructor;return new e(Nr(this.option))},r.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},r.prototype.resolveParentPath=function(e){return e},r.prototype.isAnimationEnabled=function(){if(!Fi.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},r.prototype._doGet=function(e,t){var i=this.option;if(!e)return i;for(var n=0;n<e.length&&!(!!e[n]&&(i=i&&typeof i=="object"?i[e[n]]:null,i==null));n++);return i==null&&t&&(i=t._doGet(this.resolveParentPath(e),t.parentModel)),i},r}();EL(tm);qpe(tm);pa(tm,Hge);pa(tm,qge);pa(tm,Jpe);pa(tm,Uge);var An=tm,Zge=Math.round(Math.random()*10);function kv(r){return[r||"",Zge++].join("_")}function Xge(r){var e={};r.registerSubTypeDefaulter=function(t,i){var n=Zu(t);e[n.main]=i},r.determineSubType=function(t,i){var n=i.type;if(!n){var s=Zu(t).main;r.hasSubTypes(t)&&e[s]&&(n=e[s](i))}return n}}function Yge(r,e){r.topologicalTravel=function(s,u,a,h){if(!s.length)return;var p=t(u),m=p.graph,v=p.noEntryList,x={};for(ue(s,function(R){x[R]=!0});v.length;){var w=v.pop(),T=m[w],C=!!x[w];C&&(a.call(h,w,T.originalDeps.slice()),delete x[w]),ue(T.successor,C?k:I)}ue(x,function(){var R="";throw new Error(R)});function I(R){m[R].entryCount--,m[R].entryCount===0&&v.push(R)}function k(R){x[R]=!0,I(R)}};function t(s){var u={},a=[];return ue(s,function(h){var p=i(u,h),m=p.originalDeps=e(h),v=n(m,s);p.entryCount=v.length,p.entryCount===0&&a.push(h),ue(v,function(x){di(p.predecessor,x)<0&&p.predecessor.push(x);var w=i(u,x);di(w.successor,x)<0&&w.successor.push(h)})}),{graph:u,noEntryList:a}}function i(s,u){return s[u]||(s[u]={predecessor:[],successor:[]}),s[u]}function n(s,u){var a=[];return ue(s,function(h){di(u,h)>=0&&a.push(h)}),a}}function Wd(r,e){return ni(ni({},r,!0),e,!0)}var Kge={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},Jge={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE",custom:"\u81EA\u5B9A\u4E49\u56FE\u8868",chart:"\u56FE\u8868"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}},LS="ZH",jL="EN",Zg=jL,Qw={},HL={},sW=Fi.domSupported?function(){var r=(document.documentElement.lang||navigator.language||navigator.browserLanguage||Zg).toUpperCase();return r.indexOf(LS)>-1?LS:Zg}():Zg;function lW(r,e){r=r.toUpperCase(),HL[r]=new An(e),Qw[r]=e}function Qge(r){if(gr(r)){var e=Qw[r.toUpperCase()]||{};return r===LS||r===jL?Nr(e):ni(Nr(e),Nr(Qw[Zg]),!1)}else return ni(Nr(r),Nr(Qw[Zg]),!1)}function wD(r){return HL[r]}function eve(){return HL[Zg]}lW(jL,Kge);lW(LS,Jge);var WL=1e3,qL=WL*60,b0=qL*60,fl=b0*24,C4=fl*365,Xy={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Yb="{yyyy}-{MM}-{dd}",I4={year:"{yyyy}",month:"{yyyy}-{MM}",day:Yb,hour:Yb+" "+Xy.hour,minute:Yb+" "+Xy.minute,second:Yb+" "+Xy.second,millisecond:Xy.none},PC=["year","month","day","hour","minute","second","millisecond"],uW=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function ed(r,e){return r+="","0000".substr(0,e-r.length)+r}function Xg(r){switch(r){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return r}}function tve(r){return r===Xg(r)}function rve(r){switch(r){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function YT(r,e,t,i){var n=oc(r),s=n[ZL(t)](),u=n[Yg(t)]()+1,a=Math.floor((u-1)/3)+1,h=n[KT(t)](),p=n["get"+(t?"UTC":"")+"Day"](),m=n[W0(t)](),v=(m-1)%12+1,x=n[JT(t)](),w=n[QT(t)](),T=n[e2(t)](),C=i instanceof An?i:wD(i||sW)||eve(),I=C.getModel("time"),k=I.get("month"),R=I.get("monthAbbr"),z=I.get("dayOfWeek"),$=I.get("dayOfWeekAbbr");return(e||"").replace(/{yyyy}/g,s+"").replace(/{yy}/g,ed(s%100+"",2)).replace(/{Q}/g,a+"").replace(/{MMMM}/g,k[u-1]).replace(/{MMM}/g,R[u-1]).replace(/{MM}/g,ed(u,2)).replace(/{M}/g,u+"").replace(/{dd}/g,ed(h,2)).replace(/{d}/g,h+"").replace(/{eeee}/g,z[p]).replace(/{ee}/g,$[p]).replace(/{e}/g,p+"").replace(/{HH}/g,ed(m,2)).replace(/{H}/g,m+"").replace(/{hh}/g,ed(v+"",2)).replace(/{h}/g,v+"").replace(/{mm}/g,ed(x,2)).replace(/{m}/g,x+"").replace(/{ss}/g,ed(w,2)).replace(/{s}/g,w+"").replace(/{SSS}/g,ed(T,3)).replace(/{S}/g,T+"")}function ive(r,e,t,i,n){var s=null;if(gr(t))s=t;else if(kr(t))s=t(r.value,e,{level:r.level});else{var u=kt({},Xy);if(r.level>0)for(var a=0;a<PC.length;++a)u[PC[a]]="{primary|"+u[PC[a]]+"}";var h=t?t.inherit===!1?t:zr(t,u):u,p=cW(r.value,n);if(h[p])s=h[p];else if(h.inherit){for(var m=uW.indexOf(p),a=m-1;a>=0;--a)if(h[p]){s=h[p];break}s=s||u.none}if(Nt(s)){var v=r.level==null?0:r.level>=0?r.level:s.length+r.level;v=Math.min(v,s.length-1),s=s[v]}}return YT(new Date(r.value),s,n,i)}function cW(r,e){var t=oc(r),i=t[Yg(e)]()+1,n=t[KT(e)](),s=t[W0(e)](),u=t[JT(e)](),a=t[QT(e)](),h=t[e2(e)](),p=h===0,m=p&&a===0,v=m&&u===0,x=v&&s===0,w=x&&n===1,T=w&&i===1;return T?"year":w?"month":x?"day":v?"hour":m?"minute":p?"second":"millisecond"}function E4(r,e,t){var i=Vi(r)?oc(r):r;switch(e=e||cW(r,t),e){case"year":return i[ZL(t)]();case"half-year":return i[Yg(t)]()>=6?1:0;case"quarter":return Math.floor((i[Yg(t)]()+1)/4);case"month":return i[Yg(t)]();case"day":return i[KT(t)]();case"half-day":return i[W0(t)]()/24;case"hour":return i[W0(t)]();case"minute":return i[JT(t)]();case"second":return i[QT(t)]();case"millisecond":return i[e2(t)]()}}function ZL(r){return r?"getUTCFullYear":"getFullYear"}function Yg(r){return r?"getUTCMonth":"getMonth"}function KT(r){return r?"getUTCDate":"getDate"}function W0(r){return r?"getUTCHours":"getHours"}function JT(r){return r?"getUTCMinutes":"getMinutes"}function QT(r){return r?"getUTCSeconds":"getSeconds"}function e2(r){return r?"getUTCMilliseconds":"getMilliseconds"}function nve(r){return r?"setUTCFullYear":"setFullYear"}function hW(r){return r?"setUTCMonth":"setMonth"}function dW(r){return r?"setUTCDate":"setDate"}function fW(r){return r?"setUTCHours":"setHours"}function pW(r){return r?"setUTCMinutes":"setMinutes"}function mW(r){return r?"setUTCSeconds":"setSeconds"}function gW(r){return r?"setUTCMilliseconds":"setMilliseconds"}function vW(r){if(!Qj(r))return gr(r)?r:"-";var e=(r+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function _W(r,e){return r=(r||"").toLowerCase().replace(/-(.)/g,function(t,i){return i.toUpperCase()}),e&&r&&(r=r.charAt(0).toUpperCase()+r.slice(1)),r}var Rv=_L;function SD(r,e,t){var i="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function n(m){return m&&Kl(m)?m:"-"}function s(m){return!!(m!=null&&!isNaN(m)&&isFinite(m))}var u=e==="time",a=r instanceof Date;if(u||a){var h=u?oc(r):r;if(isNaN(+h)){if(a)return"-"}else return YT(h,i,t)}if(e==="ordinal")return VE(r)?n(r):Vi(r)&&s(r)?r+"":"-";var p=sh(r);return s(p)?vW(p):VE(r)?n(r):typeof r=="boolean"?r+"":"-"}var D4=["a","b","c","d","e","f","g"],LC=function(r,e){return"{"+r+(e==null?"":e)+"}"};function yW(r,e,t){Nt(e)||(e=[e]);var i=e.length;if(!i)return"";for(var n=e[0].$vars||[],s=0;s<n.length;s++){var u=D4[s];r=r.replace(LC(u),LC(u,0))}for(var a=0;a<i;a++)for(var h=0;h<n.length;h++){var p=e[a][n[h]];r=r.replace(LC(D4[h],a),t?as(p):p)}return r}function ave(r,e,t){return ue(e,function(i,n){r=r.replace("{"+n+"}",t?as(i):i)}),r}function ove(r,e){var t=gr(r)?{color:r,extraCssText:e}:r||{},i=t.color,n=t.type;e=t.extraCssText;var s=t.renderMode||"html";if(!i)return"";if(s==="html")return n==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+as(i)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+as(i)+";"+(e||"")+'"></span>';var u=t.markerId||"markerX";return{renderMode:s,content:"{"+u+"|}  ",style:n==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:i}:{width:10,height:10,borderRadius:5,backgroundColor:i}}}function Zp(r,e){return e=e||"transparent",gr(r)?r:Br(r)&&r.colorStops&&(r.colorStops[0]||{}).color||e}function kS(r,e){if(e==="_blank"||e==="blank"){var t=window.open();t.opener=null,t.location.href=r}else window.open(r,e)}var eS=ue,xW=["left","right","top","bottom","width","height"],Sp=[["width","left","right"],["height","top","bottom"]];function XL(r,e,t,i,n){var s=0,u=0;i==null&&(i=1/0),n==null&&(n=1/0);var a=0;e.eachChild(function(h,p){var m=h.getBoundingRect(),v=e.childAt(p+1),x=v&&v.getBoundingRect(),w,T;if(r==="horizontal"){var C=m.width+(x?-x.x+m.x:0);w=s+C,w>i||h.newline?(s=0,w=C,u+=a+t,a=m.height):a=Math.max(a,m.height)}else{var I=m.height+(x?-x.y+m.y:0);T=u+I,T>n||h.newline?(s+=a+t,u=0,T=I,a=m.width):a=Math.max(a,m.width)}h.newline||(h.x=s,h.y=u,h.markRedraw(),r==="horizontal"?s=w+t:u=T+t)})}var Fp=XL;Qr(XL,"vertical");Qr(XL,"horizontal");function sve(r,e,t){var i=e.width,n=e.height,s=sr(r.left,i),u=sr(r.top,n),a=sr(r.right,i),h=sr(r.bottom,n);return(isNaN(s)||isNaN(parseFloat(r.left)))&&(s=0),(isNaN(a)||isNaN(parseFloat(r.right)))&&(a=i),(isNaN(u)||isNaN(parseFloat(r.top)))&&(u=0),(isNaN(h)||isNaN(parseFloat(r.bottom)))&&(h=n),t=Rv(t||0),{width:Math.max(a-s-t[1]-t[3],0),height:Math.max(h-u-t[0]-t[2],0)}}function xa(r,e,t){t=Rv(t||0);var i=e.width,n=e.height,s=sr(r.left,i),u=sr(r.top,n),a=sr(r.right,i),h=sr(r.bottom,n),p=sr(r.width,i),m=sr(r.height,n),v=t[2]+t[0],x=t[1]+t[3],w=r.aspect;switch(isNaN(p)&&(p=i-a-x-s),isNaN(m)&&(m=n-h-v-u),w!=null&&(isNaN(p)&&isNaN(m)&&(w>i/n?p=i*.8:m=n*.8),isNaN(p)&&(p=w*m),isNaN(m)&&(m=p/w)),isNaN(s)&&(s=i-a-p-x),isNaN(u)&&(u=n-h-m-v),r.left||r.right){case"center":s=i/2-p/2-t[3];break;case"right":s=i-p-x;break}switch(r.top||r.bottom){case"middle":case"center":u=n/2-m/2-t[0];break;case"bottom":u=n-m-v;break}s=s||0,u=u||0,isNaN(p)&&(p=i-x-s-(a||0)),isNaN(m)&&(m=n-v-u-(h||0));var T=new ai(s+t[3],u+t[0],p,m);return T.margin=t,T}function t2(r,e,t,i,n,s){var u=!n||!n.hv||n.hv[0],a=!n||!n.hv||n.hv[1],h=n&&n.boundingMode||"all";if(s=s||r,s.x=r.x,s.y=r.y,!u&&!a)return!1;var p;if(h==="raw")p=r.type==="group"?new ai(0,0,+e.width||0,+e.height||0):r.getBoundingRect();else if(p=r.getBoundingRect(),r.needLocalTransform()){var m=r.getLocalTransform();p=p.clone(),p.applyTransform(m)}var v=xa(zr({width:p.width,height:p.height},e),t,i),x=u?v.x-p.x:0,w=a?v.y-p.y:0;return h==="raw"?(s.x=x,s.y=w):(s.x+=x,s.y+=w),s===r&&r.markRedraw(),!0}function lve(r,e){return r[Sp[e][0]]!=null||r[Sp[e][1]]!=null&&r[Sp[e][2]]!=null}function q0(r){var e=r.layoutMode||r.constructor.layoutMode;return Br(e)?e:e?{type:e}:null}function Bd(r,e,t){var i=t&&t.ignoreSize;!Nt(i)&&(i=[i,i]);var n=u(Sp[0],0),s=u(Sp[1],1);p(Sp[0],r,n),p(Sp[1],r,s);function u(m,v){var x={},w=0,T={},C=0,I=2;if(eS(m,function(z){T[z]=r[z]}),eS(m,function(z){a(e,z)&&(x[z]=T[z]=e[z]),h(x,z)&&w++,h(T,z)&&C++}),i[v])return h(e,m[1])?T[m[2]]=null:h(e,m[2])&&(T[m[1]]=null),T;if(C===I||!w)return T;if(w>=I)return x;for(var k=0;k<m.length;k++){var R=m[k];if(!a(x,R)&&a(r,R)){x[R]=r[R];break}}return x}function a(m,v){return m.hasOwnProperty(v)}function h(m,v){return m[v]!=null&&m[v]!=="auto"}function p(m,v,x){eS(m,function(w){v[w]=x[w]})}}function Ov(r){return bW({},r)}function bW(r,e){return e&&r&&eS(xW,function(t){e.hasOwnProperty(t)&&(r[t]=e[t])}),r}var uve=ki(),zv=function(r){lt(e,r);function e(t,i,n){var s=r.call(this,t,i,n)||this;return s.uid=kv("ec_cpt_model"),s}return e.prototype.init=function(t,i,n){this.mergeDefaultAndTheme(t,n)},e.prototype.mergeDefaultAndTheme=function(t,i){var n=q0(this),s=n?Ov(t):{},u=i.getTheme();ni(t,u.get(this.mainType)),ni(t,this.getDefaultOption()),n&&Bd(t,s,n)},e.prototype.mergeOption=function(t,i){ni(this.option,t,!0);var n=q0(this);n&&Bd(this.option,t,n)},e.prototype.optionUpdated=function(t,i){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!jpe(t))return t.defaultOption;var i=uve(this);if(!i.defaultOption){for(var n=[],s=t;s;){var u=s.prototype.defaultOption;u&&n.push(u),s=s.superClass}for(var a={},h=n.length-1;h>=0;h--)a=ni(a,n[h],!0);i.defaultOption=a}return i.defaultOption},e.prototype.getReferringComponents=function(t,i){var n=t+"Index",s=t+"Id";return px(this.ecModel,t,{index:this.get(n,!0),id:this.get(s,!0)},i)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0}(),e}(An);uH(zv,An);NT(zv);Xge(zv);Yge(zv,cve);function cve(r){var e=[];return ue(zv.getClassesByMainType(r),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=Ht(e,function(t){return Zu(t).main}),r!=="dataset"&&di(e,"dataset")<=0&&e.unshift("dataset"),e}var Oi=zv,wW="";typeof navigator!="undefined"&&(wW=navigator.platform||"");var mg="rgba(0, 0, 0, 0.2)",hve={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:mg,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:mg,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:mg,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:mg,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:mg,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:mg,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:wW.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},SW=Mr(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),bl="original",To="arrayRows",wl="objectRows",lc="keyedColumns",Id="typedArray",TW="unknown",Qu="column",Bv="row",Ka={Must:1,Might:2,Not:3},MW=ki();function dve(r){MW(r).datasetMap=Mr()}function AW(r,e,t){var i={},n=KL(e);if(!n||!r)return i;var s=[],u=[],a=e.ecModel,h=MW(a).datasetMap,p=n.uid+"_"+t.seriesLayoutBy,m,v;r=r.slice(),ue(r,function(C,I){var k=Br(C)?C:r[I]={name:C};k.type==="ordinal"&&m==null&&(m=I,v=T(k)),i[k.name]=[]});var x=h.get(p)||h.set(p,{categoryWayDim:v,valueWayDim:0});ue(r,function(C,I){var k=C.name,R=T(C);if(m==null){var z=x.valueWayDim;w(i[k],z,R),w(u,z,R),x.valueWayDim+=R}else if(m===I)w(i[k],0,R),w(s,0,R);else{var z=x.categoryWayDim;w(i[k],z,R),w(u,z,R),x.categoryWayDim+=R}});function w(C,I,k){for(var R=0;R<k;R++)C.push(I+R)}function T(C){var I=C.dimsDef;return I?I.length:1}return s.length&&(i.itemName=s),u.length&&(i.seriesName=u),i}function YL(r,e,t){var i={},n=KL(r);if(!n)return i;var s=e.sourceFormat,u=e.dimensionsDefine,a;(s===wl||s===lc)&&ue(u,function(m,v){(Br(m)?m.name:m)==="name"&&(a=v)});var h=function(){for(var m={},v={},x=[],w=0,T=Math.min(5,t);w<T;w++){var C=IW(e.data,s,e.seriesLayoutBy,u,e.startIndex,w);x.push(C);var I=C===Ka.Not;if(I&&m.v==null&&w!==a&&(m.v=w),(m.n==null||m.n===m.v||!I&&x[m.n]===Ka.Not)&&(m.n=w),k(m)&&x[m.n]!==Ka.Not)return m;I||(C===Ka.Might&&v.v==null&&w!==a&&(v.v=w),(v.n==null||v.n===v.v)&&(v.n=w))}function k(R){return R.v!=null&&R.n!=null}return k(m)?m:k(v)?v:null}();if(h){i.value=[h.v];var p=a!=null?a:h.n;i.itemName=[p],i.seriesName=[p]}return i}function KL(r){var e=r.get("data",!0);if(!e)return px(r.ecModel,"dataset",{index:r.get("datasetIndex",!0),id:r.get("datasetId",!0)},da).models[0]}function fve(r){return!r.get("transform",!0)&&!r.get("fromTransformResult",!0)?[]:px(r.ecModel,"dataset",{index:r.get("fromDatasetIndex",!0),id:r.get("fromDatasetId",!0)},da).models}function CW(r,e){return IW(r.data,r.sourceFormat,r.seriesLayoutBy,r.dimensionsDefine,r.startIndex,e)}function IW(r,e,t,i,n,s){var u,a=5;if(us(r))return Ka.Not;var h,p;if(i){var m=i[s];Br(m)?(h=m.name,p=m.type):gr(m)&&(h=m)}if(p!=null)return p==="ordinal"?Ka.Must:Ka.Not;if(e===To){var v=r;if(t===Bv){for(var x=v[s],w=0;w<(x||[]).length&&w<a;w++)if((u=$(x[n+w]))!=null)return u}else for(var w=0;w<v.length&&w<a;w++){var T=v[n+w];if(T&&(u=$(T[s]))!=null)return u}}else if(e===wl){var C=r;if(!h)return Ka.Not;for(var w=0;w<C.length&&w<a;w++){var I=C[w];if(I&&(u=$(I[h]))!=null)return u}}else if(e===lc){var k=r;if(!h)return Ka.Not;var x=k[h];if(!x||us(x))return Ka.Not;for(var w=0;w<x.length&&w<a;w++)if((u=$(x[w]))!=null)return u}else if(e===bl)for(var R=r,w=0;w<R.length&&w<a;w++){var I=R[w],z=Iv(I);if(!Nt(z))return Ka.Not;if((u=$(z[s]))!=null)return u}function $(j){var G=gr(j);if(j!=null&&isFinite(j)&&j!=="")return G?Ka.Might:Ka.Not;if(G&&j!=="-")return Ka.Must}return Ka.Not}var TD=Mr();function pve(r,e){Vo(TD.get(r)==null&&e),TD.set(r,e)}function mve(r,e,t){var i=TD.get(e);if(!i)return t;var n=i(r);return n?t.concat(n):t}var P4=ki(),gve=ki(),JL=function(){function r(){}return r.prototype.getColorFromPalette=function(e,t,i){var n=hn(this.get("color",!0)),s=this.get("colorLayer",!0);return EW(this,P4,n,s,e,t,i)},r.prototype.clearColorPalette=function(){_ve(this,P4)},r}();function MD(r,e,t,i){var n=hn(r.get(["aria","decal","decals"]));return EW(r,gve,n,null,e,t,i)}function vve(r,e){for(var t=r.length,i=0;i<t;i++)if(r[i].length>e)return r[i];return r[t-1]}function EW(r,e,t,i,n,s,u){s=s||r;var a=e(s),h=a.paletteIdx||0,p=a.paletteNameMap=a.paletteNameMap||{};if(p.hasOwnProperty(n))return p[n];var m=u==null||!i?t:vve(i,u);if(m=m||t,!(!m||!m.length)){var v=m[h];return n&&(p[n]=v),a.paletteIdx=(h+1)%m.length,v}}function _ve(r,e){e(r).paletteIdx=0,e(r).paletteNameMap={}}var Kb,by,L4,k4="\0_ec_inner",yve=1,DW=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.init=function(t,i,n,s,u,a){s=s||{},this.option=null,this._theme=new An(s),this._locale=new An(u),this._optionManager=a},e.prototype.setOption=function(t,i,n){var s=z4(i);this._optionManager.setOption(t,n,s),this._resetOption(null,s)},e.prototype.resetOption=function(t,i){return this._resetOption(t,z4(i))},e.prototype._resetOption=function(t,i){var n=!1,s=this._optionManager;if(!t||t==="recreate"){var u=s.mountOption(t==="recreate");!this.option||t==="recreate"?L4(this,u):(this.restoreData(),this._mergeOption(u,i)),n=!0}if((t==="timeline"||t==="media")&&this.restoreData(),!t||t==="recreate"||t==="timeline"){var a=s.getTimelineOption(this);a&&(n=!0,this._mergeOption(a,i))}if(!t||t==="recreate"||t==="media"){var h=s.getMediaOption(this);h.length&&ue(h,function(p){n=!0,this._mergeOption(p,i)},this)}return n},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,i){var n=this.option,s=this._componentsMap,u=this._componentsCount,a=[],h=Mr(),p=i&&i.replaceMergeMainTypeMap;dve(this),ue(t,function(v,x){v!=null&&(Oi.hasClass(x)?x&&(a.push(x),h.set(x,!0)):n[x]=n[x]==null?Nr(v):ni(n[x],v,!0))}),p&&p.each(function(v,x){Oi.hasClass(x)&&!h.get(x)&&(a.push(x),h.set(x,!0))}),Oi.topologicalTravel(a,Oi.getAllClassMainTypes(),m,this);function m(v){var x=mve(this,v,hn(t[v])),w=s.get(v),T=w?p&&p.get(v)?"replaceMerge":"normalMerge":"replaceAll",C=nH(w,x,T);Ope(C,v,Oi),n[v]=null,s.set(v,null),u.set(v,0);var I=[],k=[],R=0,z;ue(C,function($,j){var G=$.existing,Y=$.newOption;if(!Y)G&&(G.mergeOption({},this),G.optionUpdated({},!1));else{var Z=v==="series",H=Oi.getClass(v,$.keyInfo.subType,!Z);if(!H)return;if(v==="tooltip"){if(z)return;z=!0}if(G&&G.constructor===H)G.name=$.keyInfo.name,G.mergeOption(Y,this),G.optionUpdated(Y,!1);else{var re=kt({componentIndex:j},$.keyInfo);G=new H(Y,this,this,re),kt(G,re),$.brandNew&&(G.__requireNewView=!0),G.init(Y,this,this),G.optionUpdated(null,!0)}}G?(I.push(G.option),k.push(G),R++):(I.push(void 0),k.push(void 0))},this),n[v]=I,s.set(v,k),u.set(v,R),v==="series"&&Kb(this)}this._seriesIndices||Kb(this)},e.prototype.getOption=function(){var t=Nr(this.option);return ue(t,function(i,n){if(Oi.hasClass(n)){for(var s=hn(i),u=s.length,a=!1,h=u-1;h>=0;h--)s[h]&&!$0(s[h])?a=!0:(s[h]=null,!a&&u--);s.length=u,t[n]=s}}),delete t[k4],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,i){var n=this._componentsMap.get(t);if(n){var s=n[i||0];if(s)return s;if(i==null){for(var u=0;u<n.length;u++)if(n[u])return n[u]}}},e.prototype.queryComponents=function(t){var i=t.mainType;if(!i)return[];var n=t.index,s=t.id,u=t.name,a=this._componentsMap.get(i);if(!a||!a.length)return[];var h;return n!=null?(h=[],ue(hn(n),function(p){a[p]&&h.push(a[p])})):s!=null?h=R4("id",s,a):u!=null?h=R4("name",u,a):h=un(a,function(p){return!!p}),O4(h,t)},e.prototype.findComponents=function(t){var i=t.query,n=t.mainType,s=a(i),u=s?this.queryComponents(s):un(this._componentsMap.get(n),function(p){return!!p});return h(O4(u,t));function a(p){var m=n+"Index",v=n+"Id",x=n+"Name";return p&&(p[m]!=null||p[v]!=null||p[x]!=null)?{mainType:n,index:p[m],id:p[v],name:p[x]}:null}function h(p){return t.filter?un(p,t.filter):p}},e.prototype.eachComponent=function(t,i,n){var s=this._componentsMap;if(kr(t)){var u=i,a=t;s.each(function(v,x){for(var w=0;v&&w<v.length;w++){var T=v[w];T&&a.call(u,x,T,T.componentIndex)}})}else for(var h=gr(t)?s.get(t):Br(t)?this.findComponents(t):null,p=0;h&&p<h.length;p++){var m=h[p];m&&i.call(n,m,m.componentIndex)}},e.prototype.getSeriesByName=function(t){var i=ya(t,null);return un(this._componentsMap.get("series"),function(n){return!!n&&i!=null&&n.name===i})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return un(this._componentsMap.get("series"),function(i){return!!i&&i.subType===t})},e.prototype.getSeries=function(){return un(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,i){by(this),ue(this._seriesIndices,function(n){var s=this._componentsMap.get("series")[n];t.call(i,s,n)},this)},e.prototype.eachRawSeries=function(t,i){ue(this._componentsMap.get("series"),function(n){n&&t.call(i,n,n.componentIndex)})},e.prototype.eachSeriesByType=function(t,i,n){by(this),ue(this._seriesIndices,function(s){var u=this._componentsMap.get("series")[s];u.subType===t&&i.call(n,u,s)},this)},e.prototype.eachRawSeriesByType=function(t,i,n){return ue(this.getSeriesByType(t),i,n)},e.prototype.isSeriesFiltered=function(t){return by(this),this._seriesIndicesMap.get(t.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,i){by(this);var n=[];ue(this._seriesIndices,function(s){var u=this._componentsMap.get("series")[s];t.call(i,u,s)&&n.push(s)},this),this._seriesIndices=n,this._seriesIndicesMap=Mr(n)},e.prototype.restoreData=function(t){Kb(this);var i=this._componentsMap,n=[];i.each(function(s,u){Oi.hasClass(u)&&n.push(u)}),Oi.topologicalTravel(n,Oi.getAllClassMainTypes(),function(s){ue(i.get(s),function(u){u&&(s!=="series"||!xve(u,t))&&u.restoreData()})})},e.internalField=function(){Kb=function(t){var i=t._seriesIndices=[];ue(t._componentsMap.get("series"),function(n){n&&i.push(n.componentIndex)}),t._seriesIndicesMap=Mr(i)},by=function(t){},L4=function(t,i){t.option={},t.option[k4]=yve,t._componentsMap=Mr({series:[]}),t._componentsCount=Mr();var n=i.aria;Br(n)&&n.enabled==null&&(n.enabled=!0),bve(i,t._theme.option),ni(i,hve,!1),t._mergeOption(i,null)}}(),e}(An);function xve(r,e){if(e){var t=e.seriesIndex,i=e.seriesId,n=e.seriesName;return t!=null&&r.componentIndex!==t||i!=null&&r.id!==i||n!=null&&r.name!==n}}function bve(r,e){var t=r.color&&!r.colorLayer;ue(e,function(i,n){n==="colorLayer"&&t||Oi.hasClass(n)||(typeof i=="object"?r[n]=r[n]?ni(r[n],i,!1):Nr(i):r[n]==null&&(r[n]=i))})}function R4(r,e,t){if(Nt(e)){var i=Mr();return ue(e,function(s){if(s!=null){var u=ya(s,null);u!=null&&i.set(s,!0)}}),un(t,function(s){return s&&i.get(s[r])})}else{var n=ya(e,null);return un(t,function(s){return s&&n!=null&&s[r]===n})}}function O4(r,e){return e.hasOwnProperty("subType")?un(r,function(t){return t&&t.subType===e.subType}):r}function z4(r){var e=Mr();return r&&ue(hn(r.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}pa(DW,JL);var PW=DW,wve=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],Sve=function(){function r(e){ue(wve,function(t){this[t]=xr(e[t],e)},this)}return r}(),LW=Sve,kC={},Tve=function(){function r(){this._coordinateSystems=[]}return r.prototype.create=function(e,t){var i=[];ue(kC,function(n,s){var u=n.create(e,t);i=i.concat(u||[])}),this._coordinateSystems=i},r.prototype.update=function(e,t){ue(this._coordinateSystems,function(i){i.update&&i.update(e,t)})},r.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},r.register=function(e,t){kC[e]=t},r.get=function(e){return kC[e]},r}(),yx=Tve,Mve=/^(min|max)?(.+)$/,Ave=function(){function r(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return r.prototype.setOption=function(e,t,i){e&&(ue(hn(e.series),function(u){u&&u.data&&us(u.data)&&vS(u.data)}),ue(hn(e.dataset),function(u){u&&u.source&&us(u.source)&&vS(u.source)})),e=Nr(e);var n=this._optionBackup,s=Cve(e,t,!n);this._newBaseOption=s.baseOption,n?(s.timelineOptions.length&&(n.timelineOptions=s.timelineOptions),s.mediaList.length&&(n.mediaList=s.mediaList),s.mediaDefault&&(n.mediaDefault=s.mediaDefault)):this._optionBackup=s},r.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Nr(e?t.baseOption:this._newBaseOption)},r.prototype.getTimelineOption=function(e){var t,i=this._timelineOptions;if(i.length){var n=e.getComponent("timeline");n&&(t=Nr(i[n.getCurrentIndex()]))}return t},r.prototype.getMediaOption=function(e){var t=this._api.getWidth(),i=this._api.getHeight(),n=this._mediaList,s=this._mediaDefault,u=[],a=[];if(!n.length&&!s)return a;for(var h=0,p=n.length;h<p;h++)Ive(n[h].query,t,i)&&u.push(h);return!u.length&&s&&(u=[-1]),u.length&&!Dve(u,this._currentMediaIndices)&&(a=Ht(u,function(m){return Nr(m===-1?s.option:n[m].option)})),this._currentMediaIndices=u,a},r}();function Cve(r,e,t){var i=[],n,s,u=r.baseOption,a=r.timeline,h=r.options,p=r.media,m=!!r.media,v=!!(h||a||u&&u.timeline);u?(s=u,s.timeline||(s.timeline=a)):((v||m)&&(r.options=r.media=null),s=r),m&&Nt(p)&&ue(p,function(w){w&&w.option&&(w.query?i.push(w):n||(n=w))}),x(s),ue(h,function(w){return x(w)}),ue(i,function(w){return x(w.option)});function x(w){ue(e,function(T){T(w,t)})}return{baseOption:s,timelineOptions:h||[],mediaDefault:n,mediaList:i}}function Ive(r,e,t){var i={width:e,height:t,aspectratio:e/t},n=!0;return ue(r,function(s,u){var a=u.match(Mve);if(!(!a||!a[1]||!a[2])){var h=a[1],p=a[2].toLowerCase();Eve(i[p],s,h)||(n=!1)}}),n}function Eve(r,e,t){return t==="min"?r>=e:t==="max"?r<=e:r===e}function Dve(r,e){return r.join(",")===e.join(",")}var Pve=Ave,Gl=ue,Z0=Br,B4=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function RC(r){var e=r&&r.itemStyle;if(!!e)for(var t=0,i=B4.length;t<i;t++){var n=B4[t],s=e.normal,u=e.emphasis;s&&s[n]&&(r[n]=r[n]||{},r[n].normal?ni(r[n].normal,s[n]):r[n].normal=s[n],s[n]=null),u&&u[n]&&(r[n]=r[n]||{},r[n].emphasis?ni(r[n].emphasis,u[n]):r[n].emphasis=u[n],u[n]=null)}}function xo(r,e,t){if(r&&r[e]&&(r[e].normal||r[e].emphasis)){var i=r[e].normal,n=r[e].emphasis;i&&(t?(r[e].normal=r[e].emphasis=null,zr(r[e],i)):r[e]=i),n&&(r.emphasis=r.emphasis||{},r.emphasis[e]=n,n.focus&&(r.emphasis.focus=n.focus),n.blurScope&&(r.emphasis.blurScope=n.blurScope))}}function Yy(r){xo(r,"itemStyle"),xo(r,"lineStyle"),xo(r,"areaStyle"),xo(r,"label"),xo(r,"labelLine"),xo(r,"upperLabel"),xo(r,"edgeLabel")}function ha(r,e){var t=Z0(r)&&r[e],i=Z0(t)&&t.textStyle;if(i)for(var n=0,s=U5.length;n<s;n++){var u=U5[n];i.hasOwnProperty(u)&&(t[u]=i[u])}}function sl(r){r&&(Yy(r),ha(r,"label"),r.emphasis&&ha(r.emphasis,"label"))}function Lve(r){if(!!Z0(r)){RC(r),Yy(r),ha(r,"label"),ha(r,"upperLabel"),ha(r,"edgeLabel"),r.emphasis&&(ha(r.emphasis,"label"),ha(r.emphasis,"upperLabel"),ha(r.emphasis,"edgeLabel"));var e=r.markPoint;e&&(RC(e),sl(e));var t=r.markLine;t&&(RC(t),sl(t));var i=r.markArea;i&&sl(i);var n=r.data;if(r.type==="graph"){n=n||r.nodes;var s=r.links||r.edges;if(s&&!us(s))for(var u=0;u<s.length;u++)sl(s[u]);ue(r.categories,function(p){Yy(p)})}if(n&&!us(n))for(var u=0;u<n.length;u++)sl(n[u]);if(e=r.markPoint,e&&e.data)for(var a=e.data,u=0;u<a.length;u++)sl(a[u]);if(t=r.markLine,t&&t.data)for(var h=t.data,u=0;u<h.length;u++)Nt(h[u])?(sl(h[u][0]),sl(h[u][1])):sl(h[u]);r.type==="gauge"?(ha(r,"axisLabel"),ha(r,"title"),ha(r,"detail")):r.type==="treemap"?(xo(r.breadcrumb,"itemStyle"),ue(r.levels,function(p){Yy(p)})):r.type==="tree"&&Yy(r.leaves)}}function Gc(r){return Nt(r)?r:r?[r]:[]}function F4(r){return(Nt(r)?r[0]:r)||{}}function kve(r,e){Gl(Gc(r.series),function(i){Z0(i)&&Lve(i)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),Gl(t,function(i){Gl(Gc(r[i]),function(n){n&&(ha(n,"axisLabel"),ha(n.axisPointer,"label"))})}),Gl(Gc(r.parallel),function(i){var n=i&&i.parallelAxisDefault;ha(n,"axisLabel"),ha(n&&n.axisPointer,"label")}),Gl(Gc(r.calendar),function(i){xo(i,"itemStyle"),ha(i,"dayLabel"),ha(i,"monthLabel"),ha(i,"yearLabel")}),Gl(Gc(r.radar),function(i){ha(i,"name"),i.name&&i.axisName==null&&(i.axisName=i.name,delete i.name),i.nameGap!=null&&i.axisNameGap==null&&(i.axisNameGap=i.nameGap,delete i.nameGap)}),Gl(Gc(r.geo),function(i){Z0(i)&&(sl(i),Gl(Gc(i.regions),function(n){sl(n)}))}),Gl(Gc(r.timeline),function(i){sl(i),xo(i,"label"),xo(i,"itemStyle"),xo(i,"controlStyle",!0);var n=i.data;Nt(n)&&ue(n,function(s){Br(s)&&(xo(s,"label"),xo(s,"itemStyle"))})}),Gl(Gc(r.toolbox),function(i){xo(i,"iconStyle"),Gl(i.feature,function(n){xo(n,"iconStyle")})}),ha(F4(r.axisPointer),"label"),ha(F4(r.tooltip).axisPointer,"label")}function Rve(r,e){for(var t=e.split(","),i=r,n=0;n<t.length&&(i=i&&i[t[n]],i!=null);n++);return i}function Ove(r,e,t,i){for(var n=e.split(","),s=r,u,a=0;a<n.length-1;a++)u=n[a],s[u]==null&&(s[u]={}),s=s[u];(i||s[n[a]]==null)&&(s[n[a]]=t)}function N4(r){r&&ue(zve,function(e){e[0]in r&&!(e[1]in r)&&(r[e[1]]=r[e[0]])})}var zve=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Bve=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],OC=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function wy(r){var e=r&&r.itemStyle;if(e)for(var t=0;t<OC.length;t++){var i=OC[t][1],n=OC[t][0];e[i]!=null&&(e[n]=e[i])}}function V4(r){!r||r.alignTo==="edge"&&r.margin!=null&&r.edgeDistance==null&&(r.edgeDistance=r.margin)}function $4(r){!r||r.downplay&&!r.blur&&(r.blur=r.downplay)}function Fve(r){!r||r.focusNodeAdjacency!=null&&(r.emphasis=r.emphasis||{},r.emphasis.focus==null&&(r.emphasis.focus="adjacency"))}function kW(r,e){if(r)for(var t=0;t<r.length;t++)e(r[t]),r[t]&&kW(r[t].children,e)}function RW(r,e){kve(r,e),r.series=hn(r.series),ue(r.series,function(t){if(!!Br(t)){var i=t.type;if(i==="line")t.clipOverflow!=null&&(t.clip=t.clipOverflow);else if(i==="pie"||i==="gauge"){t.clockWise!=null&&(t.clockwise=t.clockWise),V4(t.label);var n=t.data;if(n&&!us(n))for(var s=0;s<n.length;s++)V4(n[s]);t.hoverOffset!=null&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if(i==="gauge"){var u=Rve(t,"pointer.color");u!=null&&Ove(t,"itemStyle.color",u)}else if(i==="bar"){wy(t),wy(t.backgroundStyle),wy(t.emphasis);var n=t.data;if(n&&!us(n))for(var s=0;s<n.length;s++)typeof n[s]=="object"&&(wy(n[s]),wy(n[s]&&n[s].emphasis))}else if(i==="sunburst"){var a=t.highlightPolicy;a&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=a)),$4(t),kW(t.data,$4)}else i==="graph"||i==="sankey"?Fve(t):i==="map"&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&zr(t,t.mapLocation));t.hoverAnimation!=null&&(t.emphasis=t.emphasis||{},t.emphasis&&t.emphasis.scale==null&&(t.emphasis.scale=t.hoverAnimation)),N4(t)}}),r.dataRange&&(r.visualMap=r.dataRange),ue(Bve,function(t){var i=r[t];i&&(Nt(i)||(i=[i]),ue(i,function(n){N4(n)}))})}function Nve(r){var e=Mr();r.eachSeries(function(t){var i=t.get("stack");if(i){var n=e.get(i)||e.set(i,[]),s=t.getData(),u={stackResultDimension:s.getCalculationInfo("stackResultDimension"),stackedOverDimension:s.getCalculationInfo("stackedOverDimension"),stackedDimension:s.getCalculationInfo("stackedDimension"),stackedByDimension:s.getCalculationInfo("stackedByDimension"),isStackedByIndex:s.getCalculationInfo("isStackedByIndex"),data:s,seriesModel:t};if(!u.stackedDimension||!(u.isStackedByIndex||u.stackedByDimension))return;n.length&&s.setCalculationInfo("stackedOnSeries",n[n.length-1].seriesModel),n.push(u)}}),e.each(Vve)}function Vve(r){ue(r,function(e,t){var i=[],n=[NaN,NaN],s=[e.stackResultDimension,e.stackedOverDimension],u=e.data,a=e.isStackedByIndex,h=e.seriesModel.get("stackStrategy")||"samesign";u.modify(s,function(p,m,v){var x=u.get(e.stackedDimension,v);if(isNaN(x))return n;var w,T;a?T=u.getRawIndex(v):w=u.get(e.stackedByDimension,v);for(var C=NaN,I=t-1;I>=0;I--){var k=r[I];if(a||(T=k.data.rawIndexOf(k.stackedByDimension,w)),T>=0){var R=k.data.getByRawIndex(k.stackResultDimension,T);if(h==="all"||h==="positive"&&R>0||h==="negative"&&R<0||h==="samesign"&&x>=0&&R>0||h==="samesign"&&x<=0&&R<0){x=Tpe(x,R),C=R;break}}}return i[0]=x,i[1]=C,i})})}var r2=function(){function r(e){this.data=e.data||(e.sourceFormat===lc?{}:[]),this.sourceFormat=e.sourceFormat||TW,this.seriesLayoutBy=e.seriesLayoutBy||Qu,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var i=0;i<t.length;i++){var n=t[i];n.type==null&&CW(this,i)===Ka.Must&&(n.type="ordinal")}}return r}();function QL(r){return r instanceof r2}function AD(r,e,t){t=t||OW(r);var i=e.seriesLayoutBy,n=Gve(r,t,i,e.sourceHeader,e.dimensions),s=new r2({data:r,sourceFormat:t,seriesLayoutBy:i,dimensionsDefine:n.dimensionsDefine,startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount,metaRawOption:Nr(e)});return s}function ek(r){return new r2({data:r,sourceFormat:us(r)?Id:bl})}function $ve(r){return new r2({data:r.data,sourceFormat:r.sourceFormat,seriesLayoutBy:r.seriesLayoutBy,dimensionsDefine:Nr(r.dimensionsDefine),startIndex:r.startIndex,dimensionsDetectedCount:r.dimensionsDetectedCount})}function OW(r){var e=TW;if(us(r))e=Id;else if(Nt(r)){r.length===0&&(e=To);for(var t=0,i=r.length;t<i;t++){var n=r[t];if(n!=null){if(Nt(n)||us(n)){e=To;break}else if(Br(n)){e=wl;break}}}}else if(Br(r)){for(var s in r)if(wr(r,s)&&So(r[s])){e=lc;break}}return e}function Gve(r,e,t,i,n){var s,u;if(!r)return{dimensionsDefine:G4(n),startIndex:u,dimensionsDetectedCount:s};if(e===To){var a=r;i==="auto"||i==null?U4(function(p){p!=null&&p!=="-"&&(gr(p)?u==null&&(u=1):u=0)},t,a,10):u=Vi(i)?i:i?1:0,!n&&u===1&&(n=[],U4(function(p,m){n[m]=p!=null?p+"":""},t,a,1/0)),s=n?n.length:t===Bv?a.length:a[0]?a[0].length:null}else if(e===wl)n||(n=Uve(r));else if(e===lc)n||(n=[],ue(r,function(p,m){n.push(m)}));else if(e===bl){var h=Iv(r[0]);s=Nt(h)&&h.length||1}return{startIndex:u,dimensionsDefine:G4(n),dimensionsDetectedCount:s}}function Uve(r){for(var e=0,t;e<r.length&&!(t=r[e++]););if(t)return bi(t)}function G4(r){if(!!r){var e=Mr();return Ht(r,function(t,i){t=Br(t)?t:{name:t};var n={name:t.name,displayName:t.displayName,type:t.type};if(n.name==null)return n;n.name+="",n.displayName==null&&(n.displayName=n.name);var s=e.get(n.name);return s?n.name+="-"+s.count++:e.set(n.name,{count:1}),n})}}function U4(r,e,t,i){if(e===Bv)for(var n=0;n<t.length&&n<i;n++)r(t[n]?t[n][0]:null,n);else for(var s=t[0]||[],n=0;n<s.length&&n<i;n++)r(s[n],n)}function zW(r){var e=r.sourceFormat;return e===wl||e===lc}var Xf,Yf,Kf,j4,H4,BW=function(){function r(e,t){var i=QL(e)?e:ek(e);this._source=i;var n=this._data=i.data;i.sourceFormat===Id&&(this._offset=0,this._dimSize=t,this._data=n),H4(this,n,i)}return r.prototype.getSource=function(){return this._source},r.prototype.count=function(){return 0},r.prototype.getItem=function(e,t){},r.prototype.appendData=function(e){},r.prototype.clean=function(){},r.protoInitialize=function(){var e=r.prototype;e.pure=!1,e.persistent=!0}(),r.internalField=function(){var e;H4=function(u,a,h){var p=h.sourceFormat,m=h.seriesLayoutBy,v=h.startIndex,x=h.dimensionsDefine,w=j4[tk(p,m)];if(kt(u,w),p===Id)u.getItem=t,u.count=n,u.fillStorage=i;else{var T=FW(p,m);u.getItem=xr(T,null,a,v,x);var C=NW(p,m);u.count=xr(C,null,a,v,x)}};var t=function(u,a){u=u-this._offset,a=a||[];for(var h=this._data,p=this._dimSize,m=p*u,v=0;v<p;v++)a[v]=h[m+v];return a},i=function(u,a,h,p){for(var m=this._data,v=this._dimSize,x=0;x<v;x++){for(var w=p[x],T=w[0]==null?1/0:w[0],C=w[1]==null?-1/0:w[1],I=a-u,k=h[x],R=0;R<I;R++){var z=m[R*v+x];k[u+R]=z,z<T&&(T=z),z>C&&(C=z)}w[0]=T,w[1]=C}},n=function(){return this._data?this._data.length/this._dimSize:0};j4=(e={},e[To+"_"+Qu]={pure:!0,appendData:s},e[To+"_"+Bv]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[wl]={pure:!0,appendData:s},e[lc]={pure:!0,appendData:function(u){var a=this._data;ue(u,function(h,p){for(var m=a[p]||(a[p]=[]),v=0;v<(h||[]).length;v++)m.push(h[v])})}},e[bl]={appendData:s},e[Id]={persistent:!1,pure:!0,appendData:function(u){this._data=u},clean:function(){this._offset+=this.count(),this._data=null}},e);function s(u){for(var a=0;a<u.length;a++)this._data.push(u[a])}}(),r}(),W4=function(r,e,t,i){return r[i]},jve=(Xf={},Xf[To+"_"+Qu]=function(r,e,t,i){return r[i+e]},Xf[To+"_"+Bv]=function(r,e,t,i,n){i+=e;for(var s=n||[],u=r,a=0;a<u.length;a++){var h=u[a];s[a]=h?h[i]:null}return s},Xf[wl]=W4,Xf[lc]=function(r,e,t,i,n){for(var s=n||[],u=0;u<t.length;u++){var a=t[u].name,h=r[a];s[u]=h?h[i]:null}return s},Xf[bl]=W4,Xf);function FW(r,e){var t=jve[tk(r,e)];return t}var q4=function(r,e,t){return r.length},Hve=(Yf={},Yf[To+"_"+Qu]=function(r,e,t){return Math.max(0,r.length-e)},Yf[To+"_"+Bv]=function(r,e,t){var i=r[0];return i?Math.max(0,i.length-e):0},Yf[wl]=q4,Yf[lc]=function(r,e,t){var i=t[0].name,n=r[i];return n?n.length:0},Yf[bl]=q4,Yf);function NW(r,e){var t=Hve[tk(r,e)];return t}var zC=function(r,e,t){return r[e]},Wve=(Kf={},Kf[To]=zC,Kf[wl]=function(r,e,t){return r[t]},Kf[lc]=zC,Kf[bl]=function(r,e,t){var i=Iv(r);return i instanceof Array?i[e]:i},Kf[Id]=zC,Kf);function VW(r){var e=Wve[r];return e}function tk(r,e){return r===To?r+"_"+e:r}function cv(r,e,t){if(!!r){var i=r.getRawDataItem(e);if(i!=null){var n=r.getStore(),s=n.getSource().sourceFormat;if(t!=null){var u=r.getDimensionIndex(t),a=n.getDimensionProperty(u);return VW(s)(i,u,a)}else{var h=i;return s===bl&&(h=Iv(i)),h}}}}var qve=/\{@(.+?)\}/g,rk=function(){function r(){}return r.prototype.getDataParams=function(e,t){var i=this.getData(t),n=this.getRawValue(e,t),s=i.getRawIndex(e),u=i.getName(e),a=i.getRawDataItem(e),h=i.getItemVisual(e,"style"),p=h&&h[i.getItemVisual(e,"drawType")||"fill"],m=h&&h.stroke,v=this.mainType,x=v==="series",w=i.userOutput&&i.userOutput.get();return{componentType:v,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:x?this.subType:null,seriesIndex:this.seriesIndex,seriesId:x?this.id:null,seriesName:x?this.name:null,name:u,dataIndex:s,data:a,dataType:t,value:n,color:p,borderColor:m,dimensionNames:w?w.fullDimensions:null,encode:w?w.encode:null,$vars:["seriesName","name","value"]}},r.prototype.getFormattedLabel=function(e,t,i,n,s,u){t=t||"normal";var a=this.getData(i),h=this.getDataParams(e,i);if(u&&(h.value=u.interpolatedValue),n!=null&&Nt(h.value)&&(h.value=h.value[n]),!s){var p=a.getItemModel(e);s=p.get(t==="normal"?["label","formatter"]:[t,"label","formatter"])}if(kr(s))return h.status=t,h.dimensionIndex=n,s(h);if(gr(s)){var m=yW(s,h);return m.replace(qve,function(v,x){var w=x.length,T=x;T.charAt(0)==="["&&T.charAt(w-1)==="]"&&(T=+T.slice(1,w-1));var C=cv(a,e,T);if(u&&Nt(u.interpolatedValue)){var I=a.getDimensionIndex(T);I>=0&&(C=u.interpolatedValue[I])}return C!=null?C+"":""})}},r.prototype.getRawValue=function(e,t){return cv(this.getData(t),e)},r.prototype.formatTooltip=function(e,t,i){},r}();function Z4(r){var e,t;return Br(r)?r.type&&(t=r):e=r,{text:e,frag:t}}function w0(r){return new Zve(r)}var Zve=function(){function r(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return r.prototype.perform=function(e){var t=this._upstream,i=e&&e.skip;if(this._dirty&&t){var n=this.context;n.data=n.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var s;this._plan&&!i&&(s=this._plan(this.context));var u=m(this._modBy),a=this._modDataCount||0,h=m(e&&e.modBy),p=e&&e.modDataCount||0;(u!==h||a!==p)&&(s="reset");function m(R){return!(R>=1)&&(R=1),R}var v;(this._dirty||s==="reset")&&(this._dirty=!1,v=this._doReset(i)),this._modBy=h,this._modDataCount=p;var x=e&&e.step;if(t?this._dueEnd=t._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var w=this._dueIndex,T=Math.min(x!=null?this._dueIndex+x:1/0,this._dueEnd);if(!i&&(v||w<T)){var C=this._progress;if(Nt(C))for(var I=0;I<C.length;I++)this._doProgress(C[I],w,T,h,p);else this._doProgress(C,w,T,h,p)}this._dueIndex=T;var k=this._settedOutputEnd!=null?this._settedOutputEnd:T;this._outputDueEnd=k}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},r.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},r.prototype._doProgress=function(e,t,i,n,s){X4.reset(t,i,n,s),this._callingProgress=e,this._callingProgress({start:t,end:i,count:i-t,next:X4.next},this.context)},r.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var t,i;!e&&this._reset&&(t=this._reset(this.context),t&&t.progress&&(i=t.forceFirstProgress,t=t.progress),Nt(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var n=this._downstream;return n&&n.dirty(),i},r.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},r.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},r.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},r.prototype.getUpstream=function(){return this._upstream},r.prototype.getDownstream=function(){return this._downstream},r.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},r}(),X4=function(){var r,e,t,i,n,s={reset:function(h,p,m,v){e=h,r=p,t=m,i=v,n=Math.ceil(i/t),s.next=t>1&&i>0?a:u}};return s;function u(){return e<r?e++:null}function a(){var h=e%n*t+Math.ceil(e/n),p=e>=r?null:h<i?h:e;return e++,p}}();function Ed(r,e){var t=e&&e.type;return t==="ordinal"?r:(t==="time"&&!Vi(r)&&r!=null&&r!=="-"&&(r=+oc(r)),r==null||r===""?NaN:+r)}var Xve=Mr({number:function(r){return parseFloat(r)},time:function(r){return+oc(r)},trim:function(r){return gr(r)?Kl(r):r}});function $W(r){return Xve.get(r)}var GW={lt:function(r,e){return r<e},lte:function(r,e){return r<=e},gt:function(r,e){return r>e},gte:function(r,e){return r>=e}},Yve=function(){function r(e,t){if(!Vi(t)){var i="";Qi(i)}this._opFn=GW[e],this._rvalFloat=sh(t)}return r.prototype.evaluate=function(e){return Vi(e)?this._opFn(e,this._rvalFloat):this._opFn(sh(e),this._rvalFloat)},r}(),UW=function(){function r(e,t){var i=e==="desc";this._resultLT=i?1:-1,t==null&&(t=i?"min":"max"),this._incomparable=t==="min"?-1/0:1/0}return r.prototype.evaluate=function(e,t){var i=Vi(e)?e:sh(e),n=Vi(t)?t:sh(t),s=isNaN(i),u=isNaN(n);if(s&&(i=this._incomparable),u&&(n=this._incomparable),s&&u){var a=gr(e),h=gr(t);a&&(i=h?e:0),h&&(n=a?t:0)}return i<n?this._resultLT:i>n?-this._resultLT:0},r}(),Kve=function(){function r(e,t){this._rval=t,this._isEQ=e,this._rvalTypeof=typeof t,this._rvalFloat=sh(t)}return r.prototype.evaluate=function(e){var t=e===this._rval;if(!t){var i=typeof e;i!==this._rvalTypeof&&(i==="number"||this._rvalTypeof==="number")&&(t=sh(e)===this._rvalFloat)}return this._isEQ?t:!t},r}();function Jve(r,e){return r==="eq"||r==="ne"?new Kve(r==="eq",e):wr(GW,r)?new Yve(r,e):null}var Qve=function(){function r(){}return r.prototype.getRawData=function(){throw new Error("not supported")},r.prototype.getRawDataItem=function(e){throw new Error("not supported")},r.prototype.cloneRawData=function(){},r.prototype.getDimensionInfo=function(e){},r.prototype.cloneAllDimensionInfo=function(){},r.prototype.count=function(){},r.prototype.retrieveValue=function(e,t){},r.prototype.retrieveValueFromItem=function(e,t){},r.prototype.convertValue=function(e,t){return Ed(e,t)},r}();function e_e(r,e){var t=new Qve,i=r.data,n=t.sourceFormat=r.sourceFormat,s=r.startIndex,u="";r.seriesLayoutBy!==Qu&&Qi(u);var a=[],h={},p=r.dimensionsDefine;if(p)ue(p,function(C,I){var k=C.name,R={index:I,name:k,displayName:C.displayName};if(a.push(R),k!=null){var z="";wr(h,k)&&Qi(z),h[k]=R}});else for(var m=0;m<r.dimensionsDetectedCount;m++)a.push({index:m});var v=FW(n,Qu);e.__isBuiltIn&&(t.getRawDataItem=function(C){return v(i,s,a,C)},t.getRawData=xr(t_e,null,r)),t.cloneRawData=xr(r_e,null,r);var x=NW(n,Qu);t.count=xr(x,null,i,s,a);var w=VW(n);t.retrieveValue=function(C,I){var k=v(i,s,a,C);return T(k,I)};var T=t.retrieveValueFromItem=function(C,I){if(C!=null){var k=a[I];if(k)return w(C,I,k.name)}};return t.getDimensionInfo=xr(i_e,null,a,h),t.cloneAllDimensionInfo=xr(n_e,null,a),t}function t_e(r){var e=r.sourceFormat;if(!ik(e)){var t="";Qi(t)}return r.data}function r_e(r){var e=r.sourceFormat,t=r.data;if(!ik(e)){var i="";Qi(i)}if(e===To){for(var n=[],s=0,u=t.length;s<u;s++)n.push(t[s].slice());return n}else if(e===wl){for(var n=[],s=0,u=t.length;s<u;s++)n.push(kt({},t[s]));return n}}function i_e(r,e,t){if(t!=null){if(Vi(t)||!isNaN(t)&&!wr(e,t))return r[t];if(wr(e,t))return e[t]}}function n_e(r){return Nr(r)}var jW=Mr();function a_e(r){r=Nr(r);var e=r.type,t="";e||Qi(t);var i=e.split(":");i.length!==2&&Qi(t);var n=!1;i[0]==="echarts"&&(e=i[1],n=!0),r.__isBuiltIn=n,jW.set(e,r)}function o_e(r,e,t){var i=hn(r),n=i.length,s="";n||Qi(s);for(var u=0,a=n;u<a;u++){var h=i[u];e=s_e(h,e),u!==a-1&&(e.length=Math.max(e.length,1))}return e}function s_e(r,e,t,i){var n="";e.length||Qi(n),Br(r)||Qi(n);var s=r.type,u=jW.get(s);u||Qi(n);var a=Ht(e,function(p){return e_e(p,u)}),h=hn(u.transform({upstream:a[0],upstreamList:a,config:Nr(r.config)}));return Ht(h,function(p,m){var v="";Br(p)||Qi(v),p.data||Qi(v);var x=OW(p.data);ik(x)||Qi(v);var w,T=e[0];if(T&&m===0&&!p.dimensions){var C=T.startIndex;C&&(p.data=T.data.slice(0,C).concat(p.data)),w={seriesLayoutBy:Qu,sourceHeader:C,dimensions:T.metaRawOption.dimensions}}else w={seriesLayoutBy:Qu,sourceHeader:0,dimensions:p.dimensions};return AD(p.data,w,null)})}function ik(r){return r===To||r===wl}var i2="undefined",l_e=typeof Uint32Array===i2?Array:Uint32Array,u_e=typeof Uint16Array===i2?Array:Uint16Array,HW=typeof Int32Array===i2?Array:Int32Array,Y4=typeof Float64Array===i2?Array:Float64Array,WW={float:Y4,int:HW,ordinal:Array,number:Array,time:Y4},BC;function Sy(r){return r>65535?l_e:u_e}function gg(){return[1/0,-1/0]}function c_e(r){var e=r.constructor;return e===Array?r.slice():new e(r)}function K4(r,e,t,i,n){var s=WW[t||"float"];if(n){var u=r[e],a=u&&u.length;if(a!==i){for(var h=new s(i),p=0;p<a;p++)h[p]=u[p];r[e]=h}}else r[e]=new s(i)}var CD=function(){function r(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Mr()}return r.prototype.initData=function(e,t,i){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var n=e.getSource(),s=this.defaultDimValueGetter=BC[n.sourceFormat];this._dimValueGetter=i||s,this._rawExtent=[],zW(n),this._dimensions=Ht(t,function(u){return{type:u.type,property:u.property}}),this._initDataFromProvider(0,e.count())},r.prototype.getProvider=function(){return this._provider},r.prototype.getSource=function(){return this._provider.getSource()},r.prototype.ensureCalculationDimension=function(e,t){var i=this._calcDimNameToIdx,n=this._dimensions,s=i.get(e);if(s!=null){if(n[s].type===t)return s}else s=n.length;return n[s]={type:t},i.set(e,s),this._chunks[s]=new WW[t||"float"](this._rawCount),this._rawExtent[s]=gg(),s},r.prototype.collectOrdinalMeta=function(e,t){var i=this._chunks[e],n=this._dimensions[e],s=this._rawExtent,u=n.ordinalOffset||0,a=i.length;u===0&&(s[e]=gg());for(var h=s[e],p=u;p<a;p++){var m=i[p]=t.parseAndCollect(i[p]);isNaN(m)||(h[0]=Math.min(m,h[0]),h[1]=Math.max(m,h[1]))}n.ordinalMeta=t,n.ordinalOffset=a,n.type="ordinal"},r.prototype.getOrdinalMeta=function(e){var t=this._dimensions[e],i=t.ordinalMeta;return i},r.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},r.prototype.appendData=function(e){var t=this._provider,i=this.count();t.appendData(e);var n=t.count();return t.persistent||(n+=i),i<n&&this._initDataFromProvider(i,n,!0),[i,n]},r.prototype.appendValues=function(e,t){for(var i=this._chunks,n=this._dimensions,s=n.length,u=this._rawExtent,a=this.count(),h=a+Math.max(e.length,t||0),p=0;p<s;p++){var m=n[p];K4(i,p,m.type,h,!0)}for(var v=[],x=a;x<h;x++)for(var w=x-a,T=0;T<s;T++){var m=n[T],C=BC.arrayRows.call(this,e[w]||v,m.property,w,T);i[T][x]=C;var I=u[T];C<I[0]&&(I[0]=C),C>I[1]&&(I[1]=C)}return this._rawCount=this._count=h,{start:a,end:h}},r.prototype._initDataFromProvider=function(e,t,i){for(var n=this._provider,s=this._chunks,u=this._dimensions,a=u.length,h=this._rawExtent,p=Ht(u,function(R){return R.property}),m=0;m<a;m++){var v=u[m];h[m]||(h[m]=gg()),K4(s,m,v.type,t,i)}if(n.fillStorage)n.fillStorage(e,t,s,h);else for(var x=[],w=e;w<t;w++){x=n.getItem(w,x);for(var T=0;T<a;T++){var C=s[T],I=this._dimValueGetter(x,p[T],w,T);C[w]=I;var k=h[T];I<k[0]&&(k[0]=I),I>k[1]&&(k[1]=I)}}!n.persistent&&n.clean&&n.clean(),this._rawCount=this._count=t,this._extent=[]},r.prototype.count=function(){return this._count},r.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var i=this._chunks[e];return i?i[this.getRawIndex(t)]:NaN},r.prototype.getValues=function(e,t){var i=[],n=[];if(t==null){t=e,e=[];for(var s=0;s<this._dimensions.length;s++)n.push(s)}else n=e;for(var s=0,u=n.length;s<u;s++)i.push(this.get(n[s],t));return i},r.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var i=this._chunks[e];return i?i[t]:NaN},r.prototype.getSum=function(e){var t=this._chunks[e],i=0;if(t)for(var n=0,s=this.count();n<s;n++){var u=this.get(e,n);isNaN(u)||(i+=u)}return i},r.prototype.getMedian=function(e){var t=[];this.each([e],function(s){isNaN(s)||t.push(s)});var i=t.sort(function(s,u){return s-u}),n=this.count();return n===0?0:n%2===1?i[(n-1)/2]:(i[n/2]+i[n/2-1])/2},r.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,i=t[e];if(i!=null&&i<this._count&&i===e)return e;for(var n=0,s=this._count-1;n<=s;){var u=(n+s)/2|0;if(t[u]<e)n=u+1;else if(t[u]>e)s=u-1;else return u}return-1},r.prototype.indicesOfNearest=function(e,t,i){var n=this._chunks,s=n[e],u=[];if(!s)return u;i==null&&(i=1/0);for(var a=1/0,h=-1,p=0,m=0,v=this.count();m<v;m++){var x=this.getRawIndex(m),w=t-s[x],T=Math.abs(w);T<=i&&((T<a||T===a&&w>=0&&h<0)&&(a=T,h=w,p=0),w===h&&(u[p++]=m))}return u.length=p,u},r.prototype.getIndices=function(){var e,t=this._indices;if(t){var i=t.constructor,n=this._count;if(i===Array){e=new i(n);for(var s=0;s<n;s++)e[s]=t[s]}else e=new i(t.buffer,0,n)}else{var i=Sy(this._rawCount);e=new i(this.count());for(var s=0;s<e.length;s++)e[s]=s}return e},r.prototype.filter=function(e,t){if(!this._count)return this;for(var i=this.clone(),n=i.count(),s=Sy(i._rawCount),u=new s(n),a=[],h=e.length,p=0,m=e[0],v=i._chunks,x=0;x<n;x++){var w=void 0,T=i.getRawIndex(x);if(h===0)w=t(x);else if(h===1){var C=v[m][T];w=t(C,x)}else{for(var I=0;I<h;I++)a[I]=v[e[I]][T];a[I]=x,w=t.apply(null,a)}w&&(u[p++]=T)}return p<n&&(i._indices=u),i._count=p,i._extent=[],i._updateGetRawIdx(),i},r.prototype.selectRange=function(e){var t=this.clone(),i=t._count;if(!i)return this;var n=bi(e),s=n.length;if(!s)return this;var u=t.count(),a=Sy(t._rawCount),h=new a(u),p=0,m=n[0],v=e[m][0],x=e[m][1],w=t._chunks,T=!1;if(!t._indices){var C=0;if(s===1){for(var I=w[n[0]],k=0;k<i;k++){var R=I[k];(R>=v&&R<=x||isNaN(R))&&(h[p++]=C),C++}T=!0}else if(s===2){for(var I=w[n[0]],z=w[n[1]],$=e[n[1]][0],j=e[n[1]][1],k=0;k<i;k++){var R=I[k],G=z[k];(R>=v&&R<=x||isNaN(R))&&(G>=$&&G<=j||isNaN(G))&&(h[p++]=C),C++}T=!0}}if(!T)if(s===1)for(var k=0;k<u;k++){var Y=t.getRawIndex(k),R=w[n[0]][Y];(R>=v&&R<=x||isNaN(R))&&(h[p++]=Y)}else for(var k=0;k<u;k++){for(var Z=!0,Y=t.getRawIndex(k),H=0;H<s;H++){var re=n[H],R=w[re][Y];(R<e[re][0]||R>e[re][1])&&(Z=!1)}Z&&(h[p++]=t.getRawIndex(k))}return p<u&&(t._indices=h),t._count=p,t._extent=[],t._updateGetRawIdx(),t},r.prototype.map=function(e,t){var i=this.clone(e);return this._updateDims(i,e,t),i},r.prototype.modify=function(e,t){this._updateDims(this,e,t)},r.prototype._updateDims=function(e,t,i){for(var n=e._chunks,s=[],u=t.length,a=e.count(),h=[],p=e._rawExtent,m=0;m<t.length;m++)p[t[m]]=gg();for(var v=0;v<a;v++){for(var x=e.getRawIndex(v),w=0;w<u;w++)h[w]=n[t[w]][x];h[u]=v;var T=i&&i.apply(null,h);if(T!=null){typeof T!="object"&&(s[0]=T,T=s);for(var m=0;m<T.length;m++){var C=t[m],I=T[m],k=p[C],R=n[C];R&&(R[x]=I),I<k[0]&&(k[0]=I),I>k[1]&&(k[1]=I)}}}},r.prototype.lttbDownSample=function(e,t){var i=this.clone([e],!0),n=i._chunks,s=n[e],u=this.count(),a=0,h=Math.floor(1/t),p=this.getRawIndex(0),m,v,x,w=new(Sy(this._rawCount))(Math.min((Math.ceil(u/h)+2)*2,u));w[a++]=p;for(var T=1;T<u-1;T+=h){for(var C=Math.min(T+h,u-1),I=Math.min(T+h*2,u),k=(I+C)/2,R=0,z=C;z<I;z++){var $=this.getRawIndex(z),j=s[$];isNaN(j)||(R+=j)}R/=I-C;var G=T,Y=Math.min(T+h,u),Z=T-1,H=s[p];m=-1,x=G;for(var re=-1,ne=0,z=G;z<Y;z++){var $=this.getRawIndex(z),j=s[$];if(isNaN(j)){ne++,re<0&&(re=$);continue}v=Math.abs((Z-k)*(j-H)-(Z-z)*(R-H)),v>m&&(m=v,x=$)}ne>0&&ne<Y-G&&(w[a++]=Math.min(re,x),x=Math.max(re,x)),w[a++]=x,p=x}return w[a++]=this.getRawIndex(u-1),i._count=a,i._indices=w,i.getRawIndex=this._getRawIdx,i},r.prototype.downSample=function(e,t,i,n){for(var s=this.clone([e],!0),u=s._chunks,a=[],h=Math.floor(1/t),p=u[e],m=this.count(),v=s._rawExtent[e]=gg(),x=new(Sy(this._rawCount))(Math.ceil(m/h)),w=0,T=0;T<m;T+=h){h>m-T&&(h=m-T,a.length=h);for(var C=0;C<h;C++){var I=this.getRawIndex(T+C);a[C]=p[I]}var k=i(a),R=this.getRawIndex(Math.min(T+n(a,k)||0,m-1));p[R]=k,k<v[0]&&(v[0]=k),k>v[1]&&(v[1]=k),x[w++]=R}return s._count=w,s._indices=x,s._updateGetRawIdx(),s},r.prototype.each=function(e,t){if(!!this._count)for(var i=e.length,n=this._chunks,s=0,u=this.count();s<u;s++){var a=this.getRawIndex(s);switch(i){case 0:t(s);break;case 1:t(n[e[0]][a],s);break;case 2:t(n[e[0]][a],n[e[1]][a],s);break;default:for(var h=0,p=[];h<i;h++)p[h]=n[e[h]][a];p[h]=s,t.apply(null,p)}}},r.prototype.getDataExtent=function(e){var t=this._chunks[e],i=gg();if(!t)return i;var n=this.count(),s=!this._indices,u;if(s)return this._rawExtent[e].slice();if(u=this._extent[e],u)return u.slice();u=i;for(var a=u[0],h=u[1],p=0;p<n;p++){var m=this.getRawIndex(p),v=t[m];v<a&&(a=v),v>h&&(h=v)}return u=[a,h],this._extent[e]=u,u},r.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var i=[],n=this._chunks,s=0;s<n.length;s++)i.push(n[s][t]);return i},r.prototype.clone=function(e,t){var i=new r,n=this._chunks,s=e&&ic(e,function(a,h){return a[h]=!0,a},{});if(s)for(var u=0;u<n.length;u++)i._chunks[u]=s[u]?c_e(n[u]):n[u];else i._chunks=n;return this._copyCommonProps(i),t||(i._indices=this._cloneIndices()),i._updateGetRawIdx(),i},r.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Nr(this._extent),e._rawExtent=Nr(this._rawExtent)},r.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var i=this._indices.length;t=new e(i);for(var n=0;n<i;n++)t[n]=this._indices[n]}else t=new e(this._indices);return t}return null},r.prototype._getRawIdxIdentity=function(e){return e},r.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},r.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},r.internalField=function(){function e(t,i,n,s){return Ed(t[s],this._dimensions[s])}BC={arrayRows:e,objectRows:function(t,i,n,s){return Ed(t[i],this._dimensions[s])},keyedColumns:e,original:function(t,i,n,s){var u=t&&(t.value==null?t:t.value);return Ed(u instanceof Array?u[s]:u,this._dimensions[s])},typedArray:function(t,i,n,s){return t[s]}}}(),r}(),qW=function(){function r(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return r.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},r.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},r.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},r.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},r.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,t=this._getUpstreamSourceManagers(),i=!!t.length,n,s;if(Jb(e)){var u=e,a=void 0,h=void 0,p=void 0;if(i){var m=t[0];m.prepareSource(),p=m.getSource(),a=p.data,h=p.sourceFormat,s=[m._getVersionSign()]}else a=u.get("data",!0),h=us(a)?Id:bl,s=[];var v=this._getSourceMetaRawOption()||{},x=p&&p.metaRawOption||{},w=Yr(v.seriesLayoutBy,x.seriesLayoutBy)||null,T=Yr(v.sourceHeader,x.sourceHeader),C=Yr(v.dimensions,x.dimensions),I=w!==x.seriesLayoutBy||!!T!=!!x.sourceHeader||C;n=I?[AD(a,{seriesLayoutBy:w,sourceHeader:T,dimensions:C},h)]:[]}else{var k=e;if(i){var R=this._applyTransform(t);n=R.sourceList,s=R.upstreamSignList}else{var z=k.get("source",!0);n=[AD(z,this._getSourceMetaRawOption(),null)],s=[]}}this._setLocalSource(n,s)},r.prototype._applyTransform=function(e){var t=this._sourceHost,i=t.get("transform",!0),n=t.get("fromTransformResult",!0);if(n!=null){var s="";e.length!==1&&Q4(s)}var u,a=[],h=[];return ue(e,function(p){p.prepareSource();var m=p.getSource(n||0),v="";n!=null&&!m&&Q4(v),a.push(m),h.push(p._getVersionSign())}),i?u=o_e(i,a,{datasetIndex:t.componentIndex}):n!=null&&(u=[$ve(a[0])]),{sourceList:u,upstreamSignList:h}},r.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var i=e[t];if(i._isDirty()||this._upstreamSignList[t]!==i._getVersionSign())return!0}},r.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var i=this._getUpstreamSourceManagers();return i[0]&&i[0].getSource(e)}return t},r.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},r.prototype._innerGetDataStore=function(e,t,i){var n=0,s=this._storeList,u=s[n];u||(u=s[n]={});var a=u[i];if(!a){var h=this._getUpstreamSourceManagers()[0];Jb(this._sourceHost)&&h?a=h._innerGetDataStore(e,t,i):(a=new CD,a.initData(new BW(t,e.length),e)),u[i]=a}return a},r.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(Jb(e)){var t=KL(e);return t?[t.getSourceManager()]:[]}else return Ht(fve(e),function(i){return i.getSourceManager()})},r.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,t,i,n;if(Jb(e))t=e.get("seriesLayoutBy",!0),i=e.get("sourceHeader",!0),n=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var s=e;t=s.get("seriesLayoutBy",!0),i=s.get("sourceHeader",!0),n=s.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:i,dimensions:n}},r}();function J4(r){var e=r.option.transform;e&&vS(r.option.transform)}function Jb(r){return r.mainType==="series"}function Q4(r){throw new Error(r)}var ZW="line-height:1";function XW(r,e){var t=r.color||"#6e7079",i=r.fontSize||12,n=r.fontWeight||"400",s=r.color||"#464646",u=r.fontSize||14,a=r.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+as(i+"")+"px;color:"+as(t)+";font-weight:"+as(n+""),valueStyle:"font-size:"+as(u+"")+"px;color:"+as(s)+";font-weight:"+as(a+"")}:{nameStyle:{fontSize:i,fill:t,fontWeight:n},valueStyle:{fontSize:u,fill:s,fontWeight:a}}}var h_e=[0,10,20,30],d_e=["",`
`,`

`,`


`];function Oa(r,e){return e.type=r,e}function ID(r){return r.type==="section"}function YW(r){return ID(r)?f_e:p_e}function KW(r){if(ID(r)){var e=0,t=r.blocks.length,i=t>1||t>0&&!r.noHeader;return ue(r.blocks,function(n){var s=KW(n);s>=e&&(e=s+ +(i&&(!s||ID(n)&&!n.noHeader)))}),e}return 0}function f_e(r,e,t,i){var n=e.noHeader,s=m_e(KW(e)),u=[],a=e.blocks||[];Vo(!a||Nt(a)),a=a||[];var h=r.orderMode;if(e.sortBlocks&&h){a=a.slice();var p={valueAsc:"asc",valueDesc:"desc"};if(wr(p,h)){var m=new UW(p[h],null);a.sort(function(T,C){return m.evaluate(T.sortParam,C.sortParam)})}else h==="seriesDesc"&&a.reverse()}ue(a,function(T,C){var I=e.valueFormatter,k=YW(T)(I?kt(kt({},r),{valueFormatter:I}):r,T,C>0?s.html:0,i);k!=null&&u.push(k)});var v=r.renderMode==="richText"?u.join(s.richText):ED(u.join(""),n?t:s.html);if(n)return v;var x=SD(e.header,"ordinal",r.useUTC),w=XW(i,r.renderMode).nameStyle;return r.renderMode==="richText"?JW(r,x,w)+s.richText+v:ED('<div style="'+w+";"+ZW+';">'+as(x)+"</div>"+v,t)}function p_e(r,e,t,i){var n=r.renderMode,s=e.noName,u=e.noValue,a=!e.markerType,h=e.name,p=r.useUTC,m=e.valueFormatter||r.valueFormatter||function($){return $=Nt($)?$:[$],Ht($,function(j,G){return SD(j,Nt(w)?w[G]:w,p)})};if(!(s&&u)){var v=a?"":r.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",n),x=s?"":SD(h,"ordinal",p),w=e.valueType,T=u?[]:m(e.value,e.dataIndex),C=!a||!s,I=!a&&s,k=XW(i,n),R=k.nameStyle,z=k.valueStyle;return n==="richText"?(a?"":v)+(s?"":JW(r,x,R))+(u?"":__e(r,T,C,I,z)):ED((a?"":v)+(s?"":g_e(x,!a,R))+(u?"":v_e(T,C,I,z)),t)}}function eN(r,e,t,i,n,s){if(!!r){var u=YW(r),a={useUTC:n,renderMode:t,orderMode:i,markupStyleCreator:e,valueFormatter:r.valueFormatter};return u(a,r,0,s)}}function m_e(r){return{html:h_e[r],richText:d_e[r]}}function ED(r,e){var t='<div style="clear:both"></div>',i="margin: "+e+"px 0 0";return'<div style="'+i+";"+ZW+';">'+r+t+"</div>"}function g_e(r,e,t){var i=e?"margin-left:2px":"";return'<span style="'+t+";"+i+'">'+as(r)+"</span>"}function v_e(r,e,t,i){var n=t?"10px":"20px",s=e?"float:right;margin-left:"+n:"";return r=Nt(r)?r:[r],'<span style="'+s+";"+i+'">'+Ht(r,function(u){return as(u)}).join("&nbsp;&nbsp;")+"</span>"}function JW(r,e,t){return r.markupStyleCreator.wrapRichTextStyle(e,t)}function __e(r,e,t,i,n){var s=[n],u=i?10:20;return t&&s.push({padding:[0,0,0,u],align:"right"}),r.markupStyleCreator.wrapRichTextStyle(Nt(e)?e.join("  "):e,s)}function QW(r,e){var t=r.getData().getItemVisual(e,"style"),i=t[r.visualDrawType];return Zp(i)}function e7(r,e){var t=r.get("padding");return t!=null?t:e==="richText"?[8,10]:10}var FC=function(){function r(){this.richTextStyles={},this._nextStyleNameId=eH()}return r.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},r.prototype.makeTooltipMarker=function(e,t,i){var n=i==="richText"?this._generateStyleName():null,s=ove({color:t,type:e,renderMode:i,markerId:n});return gr(s)?s:(this.richTextStyles[n]=s.style,s.content)},r.prototype.wrapRichTextStyle=function(e,t){var i={};Nt(t)?ue(t,function(s){return kt(i,s)}):kt(i,t);var n=this._generateStyleName();return this.richTextStyles[n]=i,"{"+n+"|"+e+"}"},r}();function t7(r){var e=r.series,t=r.dataIndex,i=r.multipleSeries,n=e.getData(),s=n.mapDimensionsAll("defaultedTooltip"),u=s.length,a=e.getRawValue(t),h=Nt(a),p=QW(e,t),m,v,x,w;if(u>1||h&&!u){var T=y_e(a,e,t,s,p);m=T.inlineValues,v=T.inlineValueTypes,x=T.blocks,w=T.inlineValues[0]}else if(u){var C=n.getDimensionInfo(s[0]);w=m=cv(n,t,s[0]),v=C.type}else w=m=h?a[0]:a;var I=CL(e),k=I&&e.name||"",R=n.getName(t),z=i?k:R;return Oa("section",{header:k,noHeader:i||!I,sortParam:w,blocks:[Oa("nameValue",{markerType:"item",markerColor:p,name:z,noName:!Kl(z),value:m,valueType:v,dataIndex:t})].concat(x||[])})}function y_e(r,e,t,i,n){var s=e.getData(),u=ic(r,function(v,x,w){var T=s.getDimensionInfo(w);return v=v||T&&T.tooltip!==!1&&T.displayName!=null},!1),a=[],h=[],p=[];i.length?ue(i,function(v){m(cv(s,t,v),v)}):ue(r,m);function m(v,x){var w=s.getDimensionInfo(x);!w||w.otherDims.tooltip===!1||(u?p.push(Oa("nameValue",{markerType:"subItem",markerColor:n,name:w.displayName,value:v,valueType:w.type})):(a.push(v),h.push(w.type)))}return{inlineValues:a,inlineValueTypes:h,blocks:p}}var td=ki();function Qb(r,e){return r.getName(e)||r.getId(e)}var tS="__universalTransitionEnabled",n2=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return e.prototype.init=function(t,i,n){this.seriesIndex=this.componentIndex,this.dataTask=w0({count:b_e,reset:w_e}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n);var s=td(this).sourceManager=new qW(this);s.prepareSource();var u=this.getInitialData(t,n);rN(u,this),this.dataTask.context.data=u,td(this).dataBeforeProcessed=u,tN(this),this._initSelectedMapFromData(u)},e.prototype.mergeDefaultAndTheme=function(t,i){var n=q0(this),s=n?Ov(t):{},u=this.subType;Oi.hasClass(u)&&(u+="Series"),ni(t,i.getTheme().get(this.subType)),ni(t,this.getDefaultOption()),jp(t,"label",["show"]),this.fillDataTextStyle(t.data),n&&Bd(t,s,n)},e.prototype.mergeOption=function(t,i){t=ni(this.option,t,!0),this.fillDataTextStyle(t.data);var n=q0(this);n&&Bd(this.option,t,n);var s=td(this).sourceManager;s.dirty(),s.prepareSource();var u=this.getInitialData(t,i);rN(u,this),this.dataTask.dirty(),this.dataTask.context.data=u,td(this).dataBeforeProcessed=u,tN(this),this._initSelectedMapFromData(u)},e.prototype.fillDataTextStyle=function(t){if(t&&!us(t))for(var i=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&jp(t[n],"label",i)},e.prototype.getInitialData=function(t,i){},e.prototype.appendData=function(t){var i=this.getRawData();i.appendData(t.data)},e.prototype.getData=function(t){var i=DD(this);if(i){var n=i.context.data;return t==null?n:n.getLinkedData(t)}else return td(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var i=DD(this);if(i){var n=i.context;n.outputData=t,i!==this.dataTask&&(n.data=t)}td(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return Mr(t)},e.prototype.getSourceManager=function(){return td(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return td(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,i,n){return t7({series:this,dataIndex:t,multipleSeries:i})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(Fi.node&&!(t&&t.ssr))return!1;var i=this.getShallow("animation");return i&&this.getData().count()>this.getShallow("animationThreshold")&&(i=!1),!!i},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,i,n){var s=this.ecModel,u=JL.prototype.getColorFromPalette.call(this,t,i,n);return u||(u=s.getColorFromPalette(t,i,n)),u},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,i){this._innerSelect(this.getData(i),t)},e.prototype.unselect=function(t,i){var n=this.option.selectedMap;if(!!n){var s=this.option.selectedMode,u=this.getData(i);if(s==="series"||n==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var a=0;a<t.length;a++){var h=t[a],p=Qb(u,h);n[p]=!1,this._selectedDataIndicesMap[p]=-1}}},e.prototype.toggleSelect=function(t,i){for(var n=[],s=0;s<t.length;s++)n[0]=t[s],this.isSelected(t[s],i)?this.unselect(n,i):this.select(n,i)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,i=bi(t),n=[],s=0;s<i.length;s++){var u=t[i[s]];u>=0&&n.push(u)}return n},e.prototype.isSelected=function(t,i){var n=this.option.selectedMap;if(!n)return!1;var s=this.getData(i);return(n==="all"||n[Qb(s,t)])&&!s.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[tS])return!0;var t=this.option.universalTransition;return t?t===!0?!0:t&&t.enabled:!1},e.prototype._innerSelect=function(t,i){var n,s,u=this.option,a=u.selectedMode,h=i.length;if(!(!a||!h)){if(a==="series")u.selectedMap="all";else if(a==="multiple"){Br(u.selectedMap)||(u.selectedMap={});for(var p=u.selectedMap,m=0;m<h;m++){var v=i[m],x=Qb(t,v);p[x]=!0,this._selectedDataIndicesMap[x]=t.getRawIndex(v)}}else if(a==="single"||a===!0){var w=i[h-1],x=Qb(t,w);u.selectedMap=(n={},n[x]=!0,n),this._selectedDataIndicesMap=(s={},s[x]=t.getRawIndex(w),s)}}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var i=[];t.hasItemOption&&t.each(function(n){var s=t.getRawDataItem(n);s&&s.selected&&i.push(n)}),i.length>0&&this._innerSelect(t,i)}},e.registerClass=function(t){return Oi.registerClass(t)},e.protoInitialize=function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"}(),e}(Oi);pa(n2,rk);pa(n2,JL);uH(n2,Oi);function tN(r){var e=r.name;CL(r)||(r.name=x_e(r)||e)}function x_e(r){var e=r.getRawData(),t=e.mapDimensionsAll("seriesName"),i=[];return ue(t,function(n){var s=e.getDimensionInfo(n);s.displayName&&i.push(s.displayName)}),i.join(" ")}function b_e(r){return r.model.getRawData().count()}function w_e(r){var e=r.model;return e.setData(e.getRawData().cloneShallow()),S_e}function S_e(r,e){e.outputData&&r.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function rN(r,e){ue(_S(r.CHANGABLE_METHODS,r.DOWNSAMPLE_METHODS),function(t){r.wrapMethod(t,Qr(T_e,e))})}function T_e(r,e){var t=DD(r);return t&&t.setOutputEnd((e||this).count()),e}function DD(r){var e=(r.ecModel||{}).scheduler,t=e&&e.getPipeline(r.uid);if(t){var i=t.currentTask;if(i){var n=i.agentStubMap;n&&(i=n.get(r.uid))}return i}}var Gn=n2,nk=function(){function r(){this.group=new Vr,this.uid=kv("viewComponent")}return r.prototype.init=function(e,t){},r.prototype.render=function(e,t,i,n){},r.prototype.dispose=function(e,t){},r.prototype.updateView=function(e,t,i,n){},r.prototype.updateLayout=function(e,t,i,n){},r.prototype.updateVisual=function(e,t,i,n){},r.prototype.toggleBlurSeries=function(e,t,i){},r.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},r}();EL(nk);NT(nk);var Jn=nk;function Fv(){var r=ki();return function(e){var t=r(e),i=e.pipelineContext,n=!!t.large,s=!!t.progressiveRender,u=t.large=!!(i&&i.large),a=t.progressiveRender=!!(i&&i.progressiveRender);return(n!==u||s!==a)&&"reset"}}var r7=ki(),M_e=Fv(),ak=function(){function r(){this.group=new Vr,this.uid=kv("viewChart"),this.renderTask=w0({plan:A_e,reset:C_e}),this.renderTask.context={view:this}}return r.prototype.init=function(e,t){},r.prototype.render=function(e,t,i,n){},r.prototype.highlight=function(e,t,i,n){var s=e.getData(n&&n.dataType);!s||nN(s,n,"emphasis")},r.prototype.downplay=function(e,t,i,n){var s=e.getData(n&&n.dataType);!s||nN(s,n,"normal")},r.prototype.remove=function(e,t){this.group.removeAll()},r.prototype.dispose=function(e,t){},r.prototype.updateView=function(e,t,i,n){this.render(e,t,i,n)},r.prototype.updateLayout=function(e,t,i,n){this.render(e,t,i,n)},r.prototype.updateVisual=function(e,t,i,n){this.render(e,t,i,n)},r.prototype.eachRendered=function(e){Hd(this.group,e)},r.markUpdateMethod=function(e,t){r7(e).updateMethod=t},r.protoInitialize=function(){var e=r.prototype;e.type="chart"}(),r}();function iN(r,e,t){r&&j0(r)&&(e==="emphasis"?lh:uh)(r,t)}function nN(r,e,t){var i=Hp(r,e),n=e&&e.highlightKey!=null?Qme(e.highlightKey):null;i!=null?ue(hn(i),function(s){iN(r.getItemGraphicEl(s),t,n)}):r.eachItemGraphicEl(function(s){iN(s,t,n)})}EL(ak);NT(ak);function A_e(r){return M_e(r.model)}function C_e(r){var e=r.model,t=r.ecModel,i=r.api,n=r.payload,s=e.pipelineContext.progressiveRender,u=r.view,a=n&&r7(n).updateMethod,h=s?"incrementalPrepareRender":a&&u[a]?a:"render";return h!=="render"&&u[h](e,t,i,n),I_e[h]}var I_e={incrementalPrepareRender:{progress:function(r,e){e.view.incrementalRender(r,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(r,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},Cn=ak,RS="\0__throttleOriginMethod",aN="\0__throttleRate",oN="\0__throttleType";function ok(r,e,t){var i,n=0,s=0,u=null,a,h,p,m;e=e||0;function v(){s=new Date().getTime(),u=null,r.apply(h,p||[])}var x=function(){for(var w=[],T=0;T<arguments.length;T++)w[T]=arguments[T];i=new Date().getTime(),h=this,p=w;var C=m||e,I=m||t;m=null,a=i-(I?n:s)-C,clearTimeout(u),I?u=setTimeout(v,C):a>=0?v():u=setTimeout(v,-a),n=i};return x.clear=function(){u&&(clearTimeout(u),u=null)},x.debounceNextCall=function(w){m=w},x}function Nv(r,e,t,i){var n=r[e];if(!!n){var s=n[RS]||n,u=n[oN],a=n[aN];if(a!==t||u!==i){if(t==null||!i)return r[e]=s;n=r[e]=ok(s,t,i==="debounce"),n[RS]=s,n[oN]=i,n[aN]=t}return n}}function X0(r,e){var t=r[e];t&&t[RS]&&(t.clear&&t.clear(),r[e]=t[RS])}var sN=ki(),lN={itemStyle:Wp(oW,!0),lineStyle:Wp(aW,!0)},E_e={lineStyle:"stroke",itemStyle:"fill"};function i7(r,e){var t=r.visualStyleMapper||lN[e];return t||(console.warn("Unknown style type '"+e+"'."),lN.itemStyle)}function n7(r,e){var t=r.visualDrawType||E_e[e];return t||(console.warn("Unknown style type '"+e+"'."),"fill")}var D_e={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,e){var t=r.getData(),i=r.visualStyleAccessPath||"itemStyle",n=r.getModel(i),s=i7(r,i),u=s(n),a=n.getShallow("decal");a&&(t.setVisual("decal",a),a.dirty=!0);var h=n7(r,i),p=u[h],m=kr(p)?p:null,v=u.fill==="auto"||u.stroke==="auto";if(!u[h]||m||v){var x=r.getColorFromPalette(r.name,null,e.getSeriesCount());u[h]||(u[h]=x,t.setVisual("colorFromPalette",!0)),u.fill=u.fill==="auto"||kr(u.fill)?x:u.fill,u.stroke=u.stroke==="auto"||kr(u.stroke)?x:u.stroke}if(t.setVisual("style",u),t.setVisual("drawType",h),!e.isSeriesFiltered(r)&&m)return t.setVisual("colorFromPalette",!1),{dataEach:function(w,T){var C=r.getDataParams(T),I=kt({},u);I[h]=m(C),w.setItemVisual(T,"style",I)}}}},Ty=new An,P_e={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,e){if(!(r.ignoreStyleOnData||e.isSeriesFiltered(r))){var t=r.getData(),i=r.visualStyleAccessPath||"itemStyle",n=i7(r,i),s=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(u,a){var h=u.getRawDataItem(a);if(h&&h[i]){Ty.option=h[i];var p=n(Ty),m=u.ensureUniqueItemVisual(a,"style");kt(m,p),Ty.option.decal&&(u.setItemVisual(a,"decal",Ty.option.decal),Ty.option.decal.dirty=!0),s in p&&u.setItemVisual(a,"colorFromPalette",!1)}}:null}}}},L_e={performRawSeries:!0,overallReset:function(r){var e=Mr();r.eachSeries(function(t){var i=t.getColorBy();if(!t.isColorBySeries()){var n=t.type+"-"+i,s=e.get(n);s||(s={},e.set(n,s)),sN(t).scope=s}}),r.eachSeries(function(t){if(!(t.isColorBySeries()||r.isSeriesFiltered(t))){var i=t.getRawData(),n={},s=t.getData(),u=sN(t).scope,a=t.visualStyleAccessPath||"itemStyle",h=n7(t,a);s.each(function(p){var m=s.getRawIndex(p);n[m]=p}),i.each(function(p){var m=n[p],v=s.getItemVisual(m,"colorFromPalette");if(v){var x=s.ensureUniqueItemVisual(m,"style"),w=i.getName(p)||p+"",T=i.count();x[h]=t.getColorFromPalette(w,u,T)}})}})}},ew=Math.PI;function k_e(r,e){e=e||{},zr(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var t=new Vr,i=new Li({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});t.add(i);var n=new Ni({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),s=new Li({style:{fill:"none"},textContent:n,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});t.add(s);var u;return e.showSpinner&&(u=new NL({shape:{startAngle:-ew/2,endAngle:-ew/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),u.animateShape(!0).when(1e3,{endAngle:ew*3/2}).start("circularInOut"),u.animateShape(!0).when(1e3,{startAngle:ew*3/2}).delay(300).start("circularInOut"),t.add(u)),t.resize=function(){var a=n.getBoundingRect().width,h=e.showSpinner?e.spinnerRadius:0,p=(r.getWidth()-h*2-(e.showSpinner&&a?10:0)-a)/2-(e.showSpinner&&a?0:5+a/2)+(e.showSpinner?0:a/2)+(a?0:h),m=r.getHeight()/2;e.showSpinner&&u.setShape({cx:p,cy:m}),s.setShape({x:p-h,y:m-h,width:h*2,height:h*2}),i.setShape({x:0,y:0,width:r.getWidth(),height:r.getHeight()})},t.resize(),t}var R_e=function(){function r(e,t,i,n){this._stageTaskMap=Mr(),this.ecInstance=e,this.api=t,i=this._dataProcessorHandlers=i.slice(),n=this._visualHandlers=n.slice(),this._allHandlers=i.concat(n)}return r.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(i){var n=i.overallTask;n&&n.dirty()})},r.prototype.getPerformArgs=function(e,t){if(!!e.__pipeline){var i=this._pipelineMap.get(e.__pipeline.id),n=i.context,s=!t&&i.progressiveEnabled&&(!n||n.progressiveRender)&&e.__idxInPipeline>i.blockIndex,u=s?i.step:null,a=n&&n.modDataCount,h=a!=null?Math.ceil(a/u):null;return{step:u,modBy:h,modDataCount:a}}},r.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},r.prototype.updateStreamModes=function(e,t){var i=this._pipelineMap.get(e.uid),n=e.getData(),s=n.count(),u=i.progressiveEnabled&&t.incrementalPrepareRender&&s>=i.threshold,a=e.get("large")&&s>=e.get("largeThreshold"),h=e.get("progressiveChunkMode")==="mod"?s:null;e.pipelineContext=i.context={progressiveRender:u,modDataCount:h,large:a}},r.prototype.restorePipelines=function(e){var t=this,i=t._pipelineMap=Mr();e.eachSeries(function(n){var s=n.getProgressive(),u=n.uid;i.set(u,{id:u,head:null,tail:null,threshold:n.getProgressiveThreshold(),progressiveEnabled:s&&!(n.preventIncremental&&n.preventIncremental()),blockIndex:-1,step:Math.round(s||700),count:0}),t._pipe(n,n.dataTask)})},r.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),i=this.api;ue(this._allHandlers,function(n){var s=e.get(n.uid)||e.set(n.uid,{}),u="";Vo(!(n.reset&&n.overallReset),u),n.reset&&this._createSeriesStageTask(n,s,t,i),n.overallReset&&this._createOverallStageTask(n,s,t,i)},this)},r.prototype.prepareView=function(e,t,i,n){var s=e.renderTask,u=s.context;u.model=t,u.ecModel=i,u.api=n,s.__block=!e.incrementalPrepareRender,this._pipe(t,s)},r.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},r.prototype.performVisualTasks=function(e,t,i){this._performStageTasks(this._visualHandlers,e,t,i)},r.prototype._performStageTasks=function(e,t,i,n){n=n||{};var s=!1,u=this;ue(e,function(h,p){if(!(n.visualType&&n.visualType!==h.visualType)){var m=u._stageTaskMap.get(h.uid),v=m.seriesTaskMap,x=m.overallTask;if(x){var w,T=x.agentStubMap;T.each(function(I){a(n,I)&&(I.dirty(),w=!0)}),w&&x.dirty(),u.updatePayload(x,i);var C=u.getPerformArgs(x,n.block);T.each(function(I){I.perform(C)}),x.perform(C)&&(s=!0)}else v&&v.each(function(I,k){a(n,I)&&I.dirty();var R=u.getPerformArgs(I,n.block);R.skip=!h.performRawSeries&&t.isSeriesFiltered(I.context.model),u.updatePayload(I,i),I.perform(R)&&(s=!0)})}});function a(h,p){return h.setDirty&&(!h.dirtyMap||h.dirtyMap.get(p.__pipeline.id))}this.unfinished=s||this.unfinished},r.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(i){t=i.dataTask.perform()||t}),this.unfinished=t||this.unfinished},r.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},r.prototype.updatePayload=function(e,t){t!=="remain"&&(e.context.payload=t)},r.prototype._createSeriesStageTask=function(e,t,i,n){var s=this,u=t.seriesTaskMap,a=t.seriesTaskMap=Mr(),h=e.seriesType,p=e.getTargetSeries;e.createOnAllSeries?i.eachRawSeries(m):h?i.eachRawSeriesByType(h,m):p&&p(i,n).each(m);function m(v){var x=v.uid,w=a.set(x,u&&u.get(x)||w0({plan:N_e,reset:V_e,count:G_e}));w.context={model:v,ecModel:i,api:n,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:s},s._pipe(v,w)}},r.prototype._createOverallStageTask=function(e,t,i,n){var s=this,u=t.overallTask=t.overallTask||w0({reset:O_e});u.context={ecModel:i,api:n,overallReset:e.overallReset,scheduler:s};var a=u.agentStubMap,h=u.agentStubMap=Mr(),p=e.seriesType,m=e.getTargetSeries,v=!0,x=!1,w="";Vo(!e.createOnAllSeries,w),p?i.eachRawSeriesByType(p,T):m?m(i,n).each(T):(v=!1,ue(i.getSeries(),T));function T(C){var I=C.uid,k=h.set(I,a&&a.get(I)||(x=!0,w0({reset:z_e,onDirty:F_e})));k.context={model:C,overallProgress:v},k.agent=u,k.__block=v,s._pipe(C,k)}x&&u.dirty()},r.prototype._pipe=function(e,t){var i=e.uid,n=this._pipelineMap.get(i);!n.head&&(n.head=t),n.tail&&n.tail.pipe(t),n.tail=t,t.__idxInPipeline=n.count++,t.__pipeline=n},r.wrapStageHandler=function(e,t){return kr(e)&&(e={overallReset:e,seriesType:U_e(e)}),e.uid=kv("stageHandler"),t&&(e.visualType=t),e},r}();function O_e(r){r.overallReset(r.ecModel,r.api,r.payload)}function z_e(r){return r.overallProgress&&B_e}function B_e(){this.agent.dirty(),this.getDownstream().dirty()}function F_e(){this.agent&&this.agent.dirty()}function N_e(r){return r.plan?r.plan(r.model,r.ecModel,r.api,r.payload):null}function V_e(r){r.useClearVisual&&r.data.clearAllVisual();var e=r.resetDefines=hn(r.reset(r.model,r.ecModel,r.api,r.payload));return e.length>1?Ht(e,function(t,i){return a7(i)}):$_e}var $_e=a7(0);function a7(r){return function(e,t){var i=t.data,n=t.resetDefines[r];if(n&&n.dataEach)for(var s=e.start;s<e.end;s++)n.dataEach(i,s);else n&&n.progress&&n.progress(e,i)}}function G_e(r){return r.data.count()}function U_e(r){OS=null;try{r(Y0,o7)}catch{}return OS}var Y0={},o7={},OS;s7(Y0,PW);s7(o7,LW);Y0.eachSeriesByType=Y0.eachRawSeriesByType=function(r){OS=r};Y0.eachComponent=function(r){r.mainType==="series"&&r.subType&&(OS=r.subType)};function s7(r,e){for(var t in e.prototype)r[t]=aa}var l7=R_e,uN=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],j_e={color:uN,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],uN]},Lo="#B9B8CE",cN="#100C2A",tw=function(){return{axisLine:{lineStyle:{color:Lo}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},hN=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],u7={darkMode:!0,color:hN,backgroundColor:cN,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Lo}},textStyle:{color:Lo},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Lo}},dataZoom:{borderColor:"#71708A",textStyle:{color:Lo},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Lo}},timeline:{lineStyle:{color:Lo},label:{color:Lo},controlStyle:{color:Lo,borderColor:Lo}},calendar:{itemStyle:{color:cN},dayLabel:{color:Lo},monthLabel:{color:Lo},yearLabel:{color:Lo}},timeAxis:tw(),logAxis:tw(),valueAxis:tw(),categoryAxis:tw(),line:{symbol:"circle"},graph:{color:hN},gauge:{title:{color:Lo},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Lo},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};u7.categoryAxis.splitLine.show=!1;var H_e=u7,W_e=function(){function r(){}return r.prototype.normalizeQuery=function(e){var t={},i={},n={};if(gr(e)){var s=Zu(e);t.mainType=s.main||null,t.subType=s.sub||null}else{var u=["Index","Name","Id"],a={name:1,dataIndex:1,dataType:1};ue(e,function(h,p){for(var m=!1,v=0;v<u.length;v++){var x=u[v],w=p.lastIndexOf(x);if(w>0&&w===p.length-x.length){var T=p.slice(0,w);T!=="data"&&(t.mainType=T,t[x.toLowerCase()]=h,m=!0)}}a.hasOwnProperty(p)&&(i[p]=h,m=!0),m||(n[p]=h)})}return{cptQuery:t,dataQuery:i,otherQuery:n}},r.prototype.filter=function(e,t){var i=this.eventInfo;if(!i)return!0;var n=i.targetEl,s=i.packedEvent,u=i.model,a=i.view;if(!u||!a)return!0;var h=t.cptQuery,p=t.dataQuery;return m(h,u,"mainType")&&m(h,u,"subType")&&m(h,u,"index","componentIndex")&&m(h,u,"name")&&m(h,u,"id")&&m(p,s,"name")&&m(p,s,"dataIndex")&&m(p,s,"dataType")&&(!a.filterForExposedEvent||a.filterForExposedEvent(e,t.otherQuery,n,s));function m(v,x,w,T){return v[w]==null||x[T||w]===v[w]}},r.prototype.afterTrigger=function(){this.eventInfo=null},r}(),PD=["symbol","symbolSize","symbolRotate","symbolOffset"],dN=PD.concat(["symbolKeepAspect"]),q_e={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,e){var t=r.getData();if(r.legendIcon&&t.setVisual("legendIcon",r.legendIcon),!r.hasSymbolVisual)return;for(var i={},n={},s=!1,u=0;u<PD.length;u++){var a=PD[u],h=r.get(a);kr(h)?(s=!0,n[a]=h):i[a]=h}if(i.symbol=i.symbol||r.defaultSymbol,t.setVisual(kt({legendIcon:r.legendIcon||i.symbol,symbolKeepAspect:r.get("symbolKeepAspect")},i)),e.isSeriesFiltered(r))return;var p=bi(n);function m(v,x){for(var w=r.getRawValue(x),T=r.getDataParams(x),C=0;C<p.length;C++){var I=p[C];v.setItemVisual(x,I,n[I](w,T))}}return{dataEach:s?m:null}}},Z_e={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,e){if(!r.hasSymbolVisual||e.isSeriesFiltered(r))return;var t=r.getData();function i(n,s){for(var u=n.getItemModel(s),a=0;a<dN.length;a++){var h=dN[a],p=u.getShallow(h,!0);p!=null&&n.setItemVisual(s,h,p)}}return{dataEach:t.hasItemOption?i:null}}};function sk(r,e,t){switch(t){case"color":var i=r.getItemVisual(e,"style");return i[r.getVisual("drawType")];case"opacity":return r.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return r.getItemVisual(e,t)}}function xx(r,e){switch(e){case"color":var t=r.getVisual("style");return t[r.getVisual("drawType")];case"opacity":return r.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return r.getVisual(e)}}function c7(r,e,t,i){switch(t){case"color":var n=r.ensureUniqueItemVisual(e,"style");n[r.getVisual("drawType")]=i,r.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":r.ensureUniqueItemVisual(e,"style").opacity=i;break;case"symbol":case"symbolSize":case"liftZ":r.setItemVisual(e,t,i);break}}function h7(r,e){function t(i,n){var s=[];return i.eachComponent({mainType:"series",subType:r,query:n},function(u){s.push(u.seriesIndex)}),s}ue([[r+"ToggleSelect","toggleSelect"],[r+"Select","select"],[r+"UnSelect","unselect"]],function(i){e(i[0],function(n,s,u){n=kt({},n),u.dispatchAction(kt(n,{type:i[1],seriesIndex:t(s,n)}))})})}function vg(r,e,t,i,n){var s=r+e;t.isSilent(s)||i.eachComponent({mainType:"series",subType:"pie"},function(u){for(var a=u.seriesIndex,h=u.option.selectedMap,p=n.selected,m=0;m<p.length;m++)if(p[m].seriesIndex===a){var v=u.getData(),x=Hp(v,n.fromActionPayload);t.trigger(s,{type:s,seriesId:u.id,name:Nt(x)?v.getName(x[0]):v.getName(x),selected:gr(h)?h:kt({},h)})}})}function X_e(r,e,t){r.on("selectchanged",function(i){var n=t.getModel();i.isFromClick?(vg("map","selectchanged",e,n,i),vg("pie","selectchanged",e,n,i)):i.fromAction==="select"?(vg("map","selected",e,n,i),vg("pie","selected",e,n,i)):i.fromAction==="unselect"&&(vg("map","unselected",e,n,i),vg("pie","unselected",e,n,i))})}function Tp(r,e,t){for(var i;r&&!(e(r)&&(i=r,t));)r=r.__hostTarget||r.parent;return i}var Y_e=Math.round(Math.random()*9),K_e=typeof Object.defineProperty=="function",J_e=function(){function r(){this._id="__ec_inner_"+Y_e++}return r.prototype.get=function(e){return this._guard(e)[this._id]},r.prototype.set=function(e,t){var i=this._guard(e);return K_e?Object.defineProperty(i,this._id,{value:t,enumerable:!1,configurable:!0}):i[this._id]=t,this},r.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},r.prototype.has=function(e){return!!this._guard(e)[this._id]},r.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},r}(),Q_e=J_e,eye=_i.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(r,e){var t=e.cx,i=e.cy,n=e.width/2,s=e.height/2;r.moveTo(t,i-s),r.lineTo(t+n,i+s),r.lineTo(t-n,i+s),r.closePath()}}),tye=_i.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(r,e){var t=e.cx,i=e.cy,n=e.width/2,s=e.height/2;r.moveTo(t,i-s),r.lineTo(t+n,i),r.lineTo(t,i+s),r.lineTo(t-n,i),r.closePath()}}),rye=_i.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(r,e){var t=e.x,i=e.y,n=e.width/5*3,s=Math.max(n,e.height),u=n/2,a=u*u/(s-u),h=i-s+u+a,p=Math.asin(a/u),m=Math.cos(p)*u,v=Math.sin(p),x=Math.cos(p),w=u*.6,T=u*.7;r.moveTo(t-m,h+a),r.arc(t,h,u,Math.PI-p,Math.PI*2+p),r.bezierCurveTo(t+m-v*w,h+a+x*w,t,i-T,t,i),r.bezierCurveTo(t,i-T,t-m+v*w,h+a+x*w,t-m,h+a),r.closePath()}}),iye=_i.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(r,e){var t=e.height,i=e.width,n=e.x,s=e.y,u=i/3*2;r.moveTo(n,s),r.lineTo(n+u,s+t),r.lineTo(n,s+t/4*3),r.lineTo(n-u,s+t),r.lineTo(n,s),r.closePath()}}),nye={line:Ua,rect:Li,roundRect:Li,square:Li,circle:jd,diamond:tye,pin:rye,arrow:iye,triangle:eye},aye={line:function(r,e,t,i,n){n.x1=r,n.y1=e+i/2,n.x2=r+t,n.y2=e+i/2},rect:function(r,e,t,i,n){n.x=r,n.y=e,n.width=t,n.height=i},roundRect:function(r,e,t,i,n){n.x=r,n.y=e,n.width=t,n.height=i,n.r=Math.min(t,i)/4},square:function(r,e,t,i,n){var s=Math.min(t,i);n.x=r,n.y=e,n.width=s,n.height=s},circle:function(r,e,t,i,n){n.cx=r+t/2,n.cy=e+i/2,n.r=Math.min(t,i)/2},diamond:function(r,e,t,i,n){n.cx=r+t/2,n.cy=e+i/2,n.width=t,n.height=i},pin:function(r,e,t,i,n){n.x=r+t/2,n.y=e+i/2,n.width=t,n.height=i},arrow:function(r,e,t,i,n){n.x=r+t/2,n.y=e+i/2,n.width=t,n.height=i},triangle:function(r,e,t,i,n){n.cx=r+t/2,n.cy=e+i/2,n.width=t,n.height=i}},zS={};ue(nye,function(r,e){zS[e]=new r});var oye=_i.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(r,e,t){var i=MS(r,e,t),n=this.shape;return n&&n.symbolType==="pin"&&e.position==="inside"&&(i.y=t.y+t.height*.4),i},buildPath:function(r,e,t){var i=e.symbolType;if(i!=="none"){var n=zS[i];n||(i="rect",n=zS[i]),aye[i](e.x,e.y,e.width,e.height,n.shape),n.buildPath(r,n.shape,t)}}});function sye(r,e){if(this.type!=="image"){var t=this.style;this.__isEmptyBrush?(t.stroke=r,t.fill=e||"#fff",t.lineWidth=2):this.shape.symbolType==="line"?t.stroke=r:t.fill=r,this.markRedraw()}}function fa(r,e,t,i,n,s,u){var a=r.indexOf("empty")===0;a&&(r=r.substr(5,1).toLowerCase()+r.substr(6));var h;return r.indexOf("image://")===0?h=KH(r.slice(8),new ai(e,t,i,n),u?"center":"cover"):r.indexOf("path://")===0?h=qT(r.slice(7),{},new ai(e,t,i,n),u?"center":"cover"):h=new oye({shape:{symbolType:r,x:e,y:t,width:i,height:n}}),h.__isEmptyBrush=a,h.setColor=sye,s&&h.setColor(s),h}function Vv(r){return Nt(r)||(r=[+r,+r]),[r[0]||0,r[1]||0]}function rm(r,e){if(r!=null)return Nt(r)||(r=[r,r]),[sr(r[0],e[0])||0,sr(Yr(r[1],r[0]),e[1])||0]}function Mp(r){return isFinite(r)}function lye(r,e,t){var i=e.x==null?0:e.x,n=e.x2==null?1:e.x2,s=e.y==null?0:e.y,u=e.y2==null?0:e.y2;e.global||(i=i*t.width+t.x,n=n*t.width+t.x,s=s*t.height+t.y,u=u*t.height+t.y),i=Mp(i)?i:0,n=Mp(n)?n:1,s=Mp(s)?s:0,u=Mp(u)?u:0;var a=r.createLinearGradient(i,s,n,u);return a}function uye(r,e,t){var i=t.width,n=t.height,s=Math.min(i,n),u=e.x==null?.5:e.x,a=e.y==null?.5:e.y,h=e.r==null?.5:e.r;e.global||(u=u*i+t.x,a=a*n+t.y,h=h*s),u=Mp(u)?u:.5,a=Mp(a)?a:.5,h=h>=0&&Mp(h)?h:.5;var p=r.createRadialGradient(u,a,0,u,a,h);return p}function LD(r,e,t){for(var i=e.type==="radial"?uye(r,e,t):lye(r,e,t),n=e.colorStops,s=0;s<n.length;s++)i.addColorStop(n[s].offset,n[s].color);return i}function cye(r,e){if(r===e||!r&&!e)return!1;if(!r||!e||r.length!==e.length)return!0;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!0;return!1}function rw(r){return parseInt(r,10)}function Gg(r,e,t){var i=["width","height"][e],n=["clientWidth","clientHeight"][e],s=["paddingLeft","paddingTop"][e],u=["paddingRight","paddingBottom"][e];if(t[i]!=null&&t[i]!=="auto")return parseFloat(t[i]);var a=document.defaultView.getComputedStyle(r);return(r[n]||rw(a[i])||rw(r.style[i]))-(rw(a[s])||0)-(rw(a[u])||0)|0}function hye(r,e){return!r||r==="solid"||!(e>0)?null:r==="dashed"?[4*e,2*e]:r==="dotted"?[e]:Vi(r)?[r]:Nt(r)?r:null}function lk(r){var e=r.style,t=e.lineDash&&e.lineWidth>0&&hye(e.lineDash,e.lineWidth),i=e.lineDashOffset;if(t){var n=e.strokeNoScale&&r.getLineScale?r.getLineScale():1;n&&n!==1&&(t=Ht(t,function(s){return s/n}),i/=n)}return[t,i]}var dye=new sc(!0);function BS(r){var e=r.stroke;return!(e==null||e==="none"||!(r.lineWidth>0))}function fN(r){return typeof r=="string"&&r!=="none"}function FS(r){var e=r.fill;return e!=null&&e!=="none"}function pN(r,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var t=r.globalAlpha;r.globalAlpha=e.fillOpacity*e.opacity,r.fill(),r.globalAlpha=t}else r.fill()}function mN(r,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var t=r.globalAlpha;r.globalAlpha=e.strokeOpacity*e.opacity,r.stroke(),r.globalAlpha=t}else r.stroke()}function kD(r,e,t){var i=DL(e.image,e.__image,t);if(VT(i)){var n=r.createPattern(i,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&n&&n.setTransform){var s=new DOMMatrix;s.translateSelf(e.x||0,e.y||0),s.rotateSelf(0,0,(e.rotation||0)*$w),s.scaleSelf(e.scaleX||1,e.scaleY||1),n.setTransform(s)}return n}}function fye(r,e,t,i){var n,s=BS(t),u=FS(t),a=t.strokePercent,h=a<1,p=!e.path;(!e.silent||h)&&p&&e.createPathProxy();var m=e.path||dye,v=e.__dirty;if(!i){var x=t.fill,w=t.stroke,T=u&&!!x.colorStops,C=s&&!!w.colorStops,I=u&&!!x.image,k=s&&!!w.image,R=void 0,z=void 0,$=void 0,j=void 0,G=void 0;(T||C)&&(G=e.getBoundingRect()),T&&(R=v?LD(r,x,G):e.__canvasFillGradient,e.__canvasFillGradient=R),C&&(z=v?LD(r,w,G):e.__canvasStrokeGradient,e.__canvasStrokeGradient=z),I&&($=v||!e.__canvasFillPattern?kD(r,x,e):e.__canvasFillPattern,e.__canvasFillPattern=$),k&&(j=v||!e.__canvasStrokePattern?kD(r,w,e):e.__canvasStrokePattern,e.__canvasStrokePattern=$),T?r.fillStyle=R:I&&($?r.fillStyle=$:u=!1),C?r.strokeStyle=z:k&&(j?r.strokeStyle=j:s=!1)}var Y=e.getGlobalScale();m.setScale(Y[0],Y[1],e.segmentIgnoreThreshold);var Z,H;r.setLineDash&&t.lineDash&&(n=lk(e),Z=n[0],H=n[1]);var re=!0;(p||v&kg)&&(m.setDPR(r.dpr),h?m.setContext(null):(m.setContext(r),re=!1),m.reset(),e.buildPath(m,e.shape,i),m.toStatic(),e.pathUpdated()),re&&m.rebuildPath(r,h?a:1),Z&&(r.setLineDash(Z),r.lineDashOffset=H),i||(t.strokeFirst?(s&&mN(r,t),u&&pN(r,t)):(u&&pN(r,t),s&&mN(r,t))),Z&&r.setLineDash([])}function pye(r,e,t){var i=e.__image=DL(t.image,e.__image,e,e.onload);if(!(!i||!VT(i))){var n=t.x||0,s=t.y||0,u=e.getWidth(),a=e.getHeight(),h=i.width/i.height;if(u==null&&a!=null?u=a*h:a==null&&u!=null?a=u/h:u==null&&a==null&&(u=i.width,a=i.height),t.sWidth&&t.sHeight){var p=t.sx||0,m=t.sy||0;r.drawImage(i,p,m,t.sWidth,t.sHeight,n,s,u,a)}else if(t.sx&&t.sy){var p=t.sx,m=t.sy,v=u-p,x=a-m;r.drawImage(i,p,m,v,x,n,s,u,a)}else r.drawImage(i,n,s,u,a)}}function mye(r,e,t){var i,n=t.text;if(n!=null&&(n+=""),n){r.font=t.font||Rd,r.textAlign=t.textAlign,r.textBaseline=t.textBaseline;var s=void 0,u=void 0;r.setLineDash&&t.lineDash&&(i=lk(e),s=i[0],u=i[1]),s&&(r.setLineDash(s),r.lineDashOffset=u),t.strokeFirst?(BS(t)&&r.strokeText(n,t.x,t.y),FS(t)&&r.fillText(n,t.x,t.y)):(FS(t)&&r.fillText(n,t.x,t.y),BS(t)&&r.strokeText(n,t.x,t.y)),s&&r.setLineDash([])}}var gN=["shadowBlur","shadowOffsetX","shadowOffsetY"],vN=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function d7(r,e,t,i,n){var s=!1;if(!i&&(t=t||{},e===t))return!1;if(i||e.opacity!==t.opacity){ls(r,n),s=!0;var u=Math.max(Math.min(e.opacity,1),0);r.globalAlpha=isNaN(u)?Rp.opacity:u}(i||e.blend!==t.blend)&&(s||(ls(r,n),s=!0),r.globalCompositeOperation=e.blend||Rp.blend);for(var a=0;a<gN.length;a++){var h=gN[a];(i||e[h]!==t[h])&&(s||(ls(r,n),s=!0),r[h]=r.dpr*(e[h]||0))}return(i||e.shadowColor!==t.shadowColor)&&(s||(ls(r,n),s=!0),r.shadowColor=e.shadowColor||Rp.shadowColor),s}function _N(r,e,t,i,n){var s=K0(e,n.inHover),u=i?null:t&&K0(t,n.inHover)||{};if(s===u)return!1;var a=d7(r,s,u,i,n);if((i||s.fill!==u.fill)&&(a||(ls(r,n),a=!0),fN(s.fill)&&(r.fillStyle=s.fill)),(i||s.stroke!==u.stroke)&&(a||(ls(r,n),a=!0),fN(s.stroke)&&(r.strokeStyle=s.stroke)),(i||s.opacity!==u.opacity)&&(a||(ls(r,n),a=!0),r.globalAlpha=s.opacity==null?1:s.opacity),e.hasStroke()){var h=s.lineWidth,p=h/(s.strokeNoScale&&e.getLineScale?e.getLineScale():1);r.lineWidth!==p&&(a||(ls(r,n),a=!0),r.lineWidth=p)}for(var m=0;m<vN.length;m++){var v=vN[m],x=v[0];(i||s[x]!==u[x])&&(a||(ls(r,n),a=!0),r[x]=s[x]||v[1])}return a}function gye(r,e,t,i,n){return d7(r,K0(e,n.inHover),t&&K0(t,n.inHover),i,n)}function f7(r,e){var t=e.transform,i=r.dpr||1;t?r.setTransform(i*t[0],i*t[1],i*t[2],i*t[3],i*t[4],i*t[5]):r.setTransform(i,0,0,i,0,0)}function vye(r,e,t){for(var i=!1,n=0;n<r.length;n++){var s=r[n];i=i||s.isZeroArea(),f7(e,s),e.beginPath(),s.buildPath(e,s.shape),e.clip()}t.allClipped=i}function _ye(r,e){return r&&e?r[0]!==e[0]||r[1]!==e[1]||r[2]!==e[2]||r[3]!==e[3]||r[4]!==e[4]||r[5]!==e[5]:!(!r&&!e)}var yN=1,xN=2,bN=3,wN=4;function yye(r){var e=FS(r),t=BS(r);return!(r.lineDash||!(+e^+t)||e&&typeof r.fill!="string"||t&&typeof r.stroke!="string"||r.strokePercent<1||r.strokeOpacity<1||r.fillOpacity<1)}function ls(r,e){e.batchFill&&r.fill(),e.batchStroke&&r.stroke(),e.batchFill="",e.batchStroke=""}function K0(r,e){return e&&r.__hoverStyle||r.style}function p7(r,e){Ap(r,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Ap(r,e,t,i){var n=e.transform;if(!e.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1)){e.__dirty&=~Ps,e.__isRendered=!1;return}var s=e.__clipPaths,u=t.prevElClipPaths,a=!1,h=!1;if((!u||cye(s,u))&&(u&&u.length&&(ls(r,t),r.restore(),h=a=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),s&&s.length&&(ls(r,t),r.save(),vye(s,r,t),a=!0),t.prevElClipPaths=s),t.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var p=t.prevEl;p||(h=a=!0);var m=e instanceof _i&&e.autoBatch&&yye(e.style);a||_ye(n,p.transform)?(ls(r,t),f7(r,e)):m||ls(r,t);var v=K0(e,t.inHover);e instanceof _i?(t.lastDrawType!==yN&&(h=!0,t.lastDrawType=yN),_N(r,e,p,h,t),(!m||!t.batchFill&&!t.batchStroke)&&r.beginPath(),fye(r,e,v,m),m&&(t.batchFill=v.fill||"",t.batchStroke=v.stroke||"")):e instanceof G0?(t.lastDrawType!==bN&&(h=!0,t.lastDrawType=bN),_N(r,e,p,h,t),mye(r,e,v)):e instanceof io?(t.lastDrawType!==xN&&(h=!0,t.lastDrawType=xN),gye(r,e,p,h,t),pye(r,e,v)):e.getTemporalDisplayables&&(t.lastDrawType!==wN&&(h=!0,t.lastDrawType=wN),xye(r,e,t)),m&&i&&ls(r,t),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),t.prevEl=e,e.__dirty=0,e.__isRendered=!0}function xye(r,e,t){var i=e.getDisplayables(),n=e.getTemporalDisplayables();r.save();var s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover},u,a;for(u=e.getCursor(),a=i.length;u<a;u++){var h=i[u];h.beforeBrush&&h.beforeBrush(),h.innerBeforeBrush(),Ap(r,h,s,u===a-1),h.innerAfterBrush(),h.afterBrush&&h.afterBrush(),s.prevEl=h}for(var p=0,m=n.length;p<m;p++){var h=n[p];h.beforeBrush&&h.beforeBrush(),h.innerBeforeBrush(),Ap(r,h,s,p===m-1),h.innerAfterBrush(),h.afterBrush&&h.afterBrush(),s.prevEl=h}e.clearTemporalDisplayables(),e.notClear=!0,r.restore()}var NC=new Q_e,SN=new dx(100),TN=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function hv(r,e){if(r==="none")return null;var t=e.getDevicePixelRatio(),i=e.getZr(),n=i.painter.type==="svg";r.dirty&&NC.delete(r);var s=NC.get(r);if(s)return s;var u=zr(r,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});u.backgroundColor==="none"&&(u.backgroundColor=null);var a={repeat:"repeat"};return h(a),a.rotation=u.rotation,a.scaleX=a.scaleY=n?1:1/t,NC.set(r,a),r.dirty=!1,a;function h(p){for(var m=[t],v=!0,x=0;x<TN.length;++x){var w=u[TN[x]];if(w!=null&&!Nt(w)&&!gr(w)&&!Vi(w)&&typeof w!="boolean"){v=!1;break}m.push(w)}var T;if(v){T=m.join(",")+(n?"-svg":"");var C=SN.get(T);C&&(n?p.svgElement=C:p.image=C)}var I=g7(u.dashArrayX),k=bye(u.dashArrayY),R=m7(u.symbol),z=wye(I),$=v7(k),j=!n&&ah.createCanvas(),G=n&&{tag:"g",attrs:{},key:"dcl",children:[]},Y=H(),Z;j&&(j.width=Y.width*t,j.height=Y.height*t,Z=j.getContext("2d")),re(),v&&SN.put(T,j||G),p.image=j,p.svgElement=G,p.svgWidth=Y.width,p.svgHeight=Y.height;function H(){for(var ne=1,se=0,me=z.length;se<me;++se)ne=$5(ne,z[se]);for(var Se=1,se=0,me=R.length;se<me;++se)Se=$5(Se,R[se].length);ne*=Se;var Ie=$*z.length*R.length;return{width:Math.max(1,Math.min(ne,u.maxTileWidth)),height:Math.max(1,Math.min(Ie,u.maxTileHeight))}}function re(){Z&&(Z.clearRect(0,0,j.width,j.height),u.backgroundColor&&(Z.fillStyle=u.backgroundColor,Z.fillRect(0,0,j.width,j.height)));for(var ne=0,se=0;se<k.length;++se)ne+=k[se];if(ne<=0)return;for(var me=-$,Se=0,Ie=0,ke=0;me<Y.height;){if(Se%2===0){for(var Fe=Ie/2%R.length,Ce=0,We=0,gt=0;Ce<Y.width*2;){for(var St=0,se=0;se<I[ke].length;++se)St+=I[ke][se];if(St<=0)break;if(We%2===0){var et=(1-u.symbolSize)*.5,ht=Ce+I[ke][We]*et,$e=me+k[Se]*et,He=I[ke][We]*u.symbolSize,dt=k[Se]*u.symbolSize,nt=gt/2%R[Fe].length;vt(ht,$e,He,dt,R[Fe][nt])}Ce+=I[ke][We],++gt,++We,We===I[ke].length&&(We=0)}++ke,ke===I.length&&(ke=0)}me+=k[Se],++Ie,++Se,Se===k.length&&(Se=0)}function vt(Pt,jt,Et,Wt,Re){var Ve=n?1:t,Ue=fa(Re,Pt*Ve,jt*Ve,Et*Ve,Wt*Ve,u.color,u.symbolKeepAspect);if(n){var Be=i.painter.renderOneToVNode(Ue);Be&&G.children.push(Be)}else p7(Z,Ue)}}}}function m7(r){if(!r||r.length===0)return[["rect"]];if(gr(r))return[[r]];for(var e=!0,t=0;t<r.length;++t)if(!gr(r[t])){e=!1;break}if(e)return m7([r]);for(var i=[],t=0;t<r.length;++t)gr(r[t])?i.push([r[t]]):i.push(r[t]);return i}function g7(r){if(!r||r.length===0)return[[0,0]];if(Vi(r)){var e=Math.ceil(r);return[[e,e]]}for(var t=!0,i=0;i<r.length;++i)if(!Vi(r[i])){t=!1;break}if(t)return g7([r]);for(var n=[],i=0;i<r.length;++i)if(Vi(r[i])){var e=Math.ceil(r[i]);n.push([e,e])}else{var e=Ht(r[i],function(a){return Math.ceil(a)});e.length%2===1?n.push(e.concat(e)):n.push(e)}return n}function bye(r){if(!r||typeof r=="object"&&r.length===0)return[0,0];if(Vi(r)){var e=Math.ceil(r);return[e,e]}var t=Ht(r,function(i){return Math.ceil(i)});return r.length%2?t.concat(t):t}function wye(r){return Ht(r,function(e){return v7(e)})}function v7(r){for(var e=0,t=0;t<r.length;++t)e+=r[t];return r.length%2===1?e*2:e}function Sye(r,e){r.eachRawSeries(function(t){if(!r.isSeriesFiltered(t)){var i=t.getData();i.hasItemVisual()&&i.each(function(u){var a=i.getItemVisual(u,"decal");if(a){var h=i.ensureUniqueItemVisual(u,"style");h.decal=hv(a,e)}});var n=i.getVisual("decal");if(n){var s=i.getVisual("style");s.decal=hv(n,e)}}})}var Tye=new xl,Wl=Tye,_7={};function Mye(r,e){_7[r]=e}function Aye(r){return _7[r]}var Cye=1,Iye=800,Eye=900,Dye=1e3,Pye=2e3,Lye=5e3,y7=1e3,kye=1100,uk=2e3,x7=3e3,Rye=4e3,a2=4500,Oye=4600,zye=5e3,Bye=6e3,b7=7e3,Fye={PROCESSOR:{FILTER:Dye,SERIES_FILTER:Iye,STATISTIC:Lye},VISUAL:{LAYOUT:y7,PROGRESSIVE_LAYOUT:kye,GLOBAL:uk,CHART:x7,POST_CHART_LAYOUT:Oye,COMPONENT:Rye,BRUSH:zye,CHART_ITEM:a2,ARIA:Bye,DECAL:b7}},yo="__flagInMainProcess",rs="__pendingUpdate",VC="__needsUpdateStatus",MN=/^[a-zA-Z0-9_]+$/,$C="__connectUpdateStatus",AN=0,Nye=1,Vye=2;function w7(r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.isDisposed()){this.id;return}return T7(this,r,e)}}function S7(r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return T7(this,r,e)}}function T7(r,e,t){return t[0]=t[0]&&t[0].toLowerCase(),xl.prototype[e].apply(r,t)}var M7=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(xl),A7=M7.prototype;A7.on=S7("on");A7.off=S7("off");var _g,GC,iw,rd,UC,jC,HC,My,Ay,CN,IN,WC,EN,nw,DN,C7,tl,PN,I7=function(r){lt(e,r);function e(t,i,n){var s=r.call(this,new W_e)||this;s._chartsViews=[],s._chartsMap={},s._componentsViews=[],s._componentsMap={},s._pendingActions=[],n=n||{},gr(i)&&(i=E7[i]),s._dom=t;var u="canvas",a="auto",h=!1;n.ssr&&xpe(function(x){var w=Gr(x),T=w.dataIndex;if(T!=null){var C=Mr();return C.set("series_index",w.seriesIndex),C.set("data_index",T),w.ssrType&&C.set("ssr_type",w.ssrType),C}});var p=s._zr=B5(t,{renderer:n.renderer||u,devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height,ssr:n.ssr,useDirtyRect:Yr(n.useDirtyRect,h),useCoarsePointer:Yr(n.useCoarsePointer,a),pointerSize:n.pointerSize});s._ssr=n.ssr,s._throttledZrFlush=ok(xr(p.flush,p),17),i=Nr(i),i&&RW(i,!0),s._theme=i,s._locale=Qge(n.locale||sW),s._coordSysMgr=new yx;var m=s._api=DN(s);function v(x,w){return x.__prio-w.__prio}return jw(VS,v),jw(RD,v),s._scheduler=new l7(s,m,RD,VS),s._messageCenter=new M7,s._initEvents(),s.resize=xr(s.resize,s),p.animation.on("frame",s._onframe,s),CN(p,s),IN(p,s),vS(s),s}return e.prototype._onframe=function(){if(!this._disposed){PN(this);var t=this._scheduler;if(this[rs]){var i=this[rs].silent;this[yo]=!0;try{_g(this),rd.update.call(this,null,this[rs].updateParams)}catch(h){throw this[yo]=!1,this[rs]=null,h}this._zr.flush(),this[yo]=!1,this[rs]=null,My.call(this,i),Ay.call(this,i)}else if(t.unfinished){var n=Cye,s=this._model,u=this._api;t.unfinished=!1;do{var a=+new Date;t.performSeriesTasks(s),t.performDataProcessorTasks(s),jC(this,s),t.performVisualTasks(s),nw(this,this._model,u,"remain",{}),n-=+new Date-a}while(n>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,i,n){if(!this[yo]){if(this._disposed){this.id;return}var s,u,a;if(Br(i)&&(n=i.lazyUpdate,s=i.silent,u=i.replaceMerge,a=i.transition,i=i.notMerge),this[yo]=!0,!this._model||i){var h=new Pve(this._api),p=this._theme,m=this._model=new PW;m.scheduler=this._scheduler,m.ssr=this._ssr,m.init(null,null,null,p,this._locale,h)}this._model.setOption(t,{replaceMerge:u},OD);var v={seriesTransition:a,optionChanged:!0};if(n)this[rs]={silent:s,updateParams:v},this[yo]=!1,this.getZr().wakeUp();else{try{_g(this),rd.update.call(this,null,v)}catch(x){throw this[rs]=null,this[yo]=!1,x}this._ssr||this._zr.flush(),this[rs]=null,this[yo]=!1,My.call(this,s),Ay.call(this,s)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Fi.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){t=t||{};var i=this._zr.painter;return i.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){t=t||{};var i=this._zr.painter;return i.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){if(!!Fi.svgSupported){var t=this._zr,i=t.storage.getDisplayList();return ue(i,function(n){n.stopAnimation(null,!0)}),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}t=t||{};var i=t.excludeComponents,n=this._model,s=[],u=this;ue(i,function(h){n.eachComponent({mainType:h},function(p){var m=u._componentsMap[p.__viewId];m.group.ignore||(s.push(m),m.group.ignore=!0)})});var a=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return ue(s,function(h){h.group.ignore=!1}),a},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var i=t.type==="svg",n=this.group,s=Math.min,u=Math.max,a=1/0;if(LN[n]){var h=a,p=a,m=-a,v=-a,x=[],w=t&&t.pixelRatio||this.getDevicePixelRatio();ue(T0,function(z,$){if(z.group===n){var j=i?z.getZr().painter.getSvgDom().innerHTML:z.renderToCanvas(Nr(t)),G=z.getDom().getBoundingClientRect();h=s(G.left,h),p=s(G.top,p),m=u(G.right,m),v=u(G.bottom,v),x.push({dom:j,left:G.left,top:G.top})}}),h*=w,p*=w,m*=w,v*=w;var T=m-h,C=v-p,I=ah.createCanvas(),k=B5(I,{renderer:i?"svg":"canvas"});if(k.resize({width:T,height:C}),i){var R="";return ue(x,function(z){var $=z.left-h,j=z.top-p;R+='<g transform="translate('+$+","+j+')">'+z.dom+"</g>"}),k.painter.getSvgRoot().innerHTML=R,t.connectedBackgroundColor&&k.painter.setBackgroundColor(t.connectedBackgroundColor),k.refreshImmediately(),k.painter.toDataURL()}else return t.connectedBackgroundColor&&k.add(new Li({shape:{x:0,y:0,width:T,height:C},style:{fill:t.connectedBackgroundColor}})),ue(x,function(z){var $=new io({style:{x:z.left*w-h,y:z.top*w-p,image:z.dom}});k.add($)}),k.refreshImmediately(),I.toDataURL("image/"+(t&&t.type||"png"))}else return this.getDataURL(t)},e.prototype.convertToPixel=function(t,i){return UC(this,"convertToPixel",t,i)},e.prototype.convertFromPixel=function(t,i){return UC(this,"convertFromPixel",t,i)},e.prototype.containPixel=function(t,i){if(this._disposed){this.id;return}var n=this._model,s,u=v0(n,t);return ue(u,function(a,h){h.indexOf("Models")>=0&&ue(a,function(p){var m=p.coordinateSystem;if(m&&m.containPoint)s=s||!!m.containPoint(i);else if(h==="seriesModels"){var v=this._chartsMap[p.__viewId];v&&v.containPoint&&(s=s||v.containPoint(i,p))}},this)},this),!!s},e.prototype.getVisual=function(t,i){var n=this._model,s=v0(n,t,{defaultMainType:"series"}),u=s.seriesModel,a=u.getData(),h=s.hasOwnProperty("dataIndexInside")?s.dataIndexInside:s.hasOwnProperty("dataIndex")?a.indexOfRawIndex(s.dataIndex):null;return h!=null?sk(a,h,i):xx(a,i)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;ue($ye,function(i){var n=function(s){var u=t.getModel(),a=s.target,h,p=i==="globalout";if(p?h={}:a&&Tp(a,function(T){var C=Gr(T);if(C&&C.dataIndex!=null){var I=C.dataModel||u.getSeriesByIndex(C.seriesIndex);return h=I&&I.getDataParams(C.dataIndex,C.dataType,a)||{},!0}else if(C.eventData)return h=kt({},C.eventData),!0},!0),h){var m=h.componentType,v=h.componentIndex;(m==="markLine"||m==="markPoint"||m==="markArea")&&(m="series",v=h.seriesIndex);var x=m&&v!=null&&u.getComponent(m,v),w=x&&t[x.mainType==="series"?"_chartsMap":"_componentsMap"][x.__viewId];h.event=s,h.type=i,t._$eventProcessor.eventInfo={targetEl:a,packedEvent:h,model:x,view:w},t.trigger(i,h)}};n.zrEventfulCallAtLast=!0,t._zr.on(i,n,t)}),ue(S0,function(i,n){t._messageCenter.on(n,function(s){this.trigger(n,s)},t)}),ue(["selectchanged"],function(i){t._messageCenter.on(i,function(n){this.trigger(i,n)},t)}),X_e(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var t=this.getDom();t&&oH(this.getDom(),hk,"");var i=this,n=i._api,s=i._model;ue(i._componentsViews,function(u){u.dispose(s,n)}),ue(i._chartsViews,function(u){u.dispose(s,n)}),i._zr.dispose(),i._dom=i._model=i._chartsMap=i._componentsMap=i._chartsViews=i._componentsViews=i._scheduler=i._api=i._zr=i._throttledZrFlush=i._theme=i._coordSysMgr=i._messageCenter=null,delete T0[i.id]},e.prototype.resize=function(t){if(!this[yo]){if(this._disposed){this.id;return}this._zr.resize(t);var i=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!i){var n=i.resetOption("media"),s=t&&t.silent;this[rs]&&(s==null&&(s=this[rs].silent),n=!0,this[rs]=null),this[yo]=!0;try{n&&_g(this),rd.update.call(this,{type:"resize",animation:kt({duration:0},t&&t.animation)})}catch(u){throw this[yo]=!1,u}this[yo]=!1,My.call(this,s),Ay.call(this,s)}}},e.prototype.showLoading=function(t,i){if(this._disposed){this.id;return}if(Br(t)&&(i=t,t=""),t=t||"default",this.hideLoading(),!!zD[t]){var n=zD[t](this._api,i),s=this._zr;this._loadingFX=n,s.add(n)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var i=kt({},t);return i.type=S0[t.type],i},e.prototype.dispatchAction=function(t,i){if(this._disposed){this.id;return}if(Br(i)||(i={silent:!!i}),!!NS[t.type]&&!!this._model){if(this[yo]){this._pendingActions.push(t);return}var n=i.silent;HC.call(this,t,n);var s=i.flush;s?this._zr.flush():s!==!1&&Fi.browser.weChat&&this._throttledZrFlush(),My.call(this,n),Ay.call(this,n)}},e.prototype.updateLabelLayout=function(){Wl.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var i=t.seriesIndex,n=this.getModel(),s=n.getSeriesByIndex(i);s.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){_g=function(v){var x=v._scheduler;x.restorePipelines(v._model),x.prepareStageTasks(),GC(v,!0),GC(v,!1),x.plan()},GC=function(v,x){for(var w=v._model,T=v._scheduler,C=x?v._componentsViews:v._chartsViews,I=x?v._componentsMap:v._chartsMap,k=v._zr,R=v._api,z=0;z<C.length;z++)C[z].__alive=!1;x?w.eachComponent(function(G,Y){G!=="series"&&$(Y)}):w.eachSeries($);function $(G){var Y=G.__requireNewView;G.__requireNewView=!1;var Z="_ec_"+G.id+"_"+G.type,H=!Y&&I[Z];if(!H){var re=Zu(G.type),ne=x?Jn.getClass(re.main,re.sub):Cn.getClass(re.sub);H=new ne,H.init(w,R),I[Z]=H,C.push(H),k.add(H.group)}G.__viewId=H.__id=Z,H.__alive=!0,H.__model=G,H.group.__ecComponentInfo={mainType:G.mainType,index:G.componentIndex},!x&&T.prepareView(H,G,w,R)}for(var z=0;z<C.length;){var j=C[z];j.__alive?z++:(!x&&j.renderTask.dispose(),k.remove(j.group),j.dispose(w,R),C.splice(z,1),I[j.__id]===j&&delete I[j.__id],j.__id=j.group.__ecComponentInfo=null)}},iw=function(v,x,w,T,C){var I=v._model;if(I.setUpdatePayload(w),!T){ue([].concat(v._componentsViews).concat(v._chartsViews),j);return}var k={};k[T+"Id"]=w[T+"Id"],k[T+"Index"]=w[T+"Index"],k[T+"Name"]=w[T+"Name"];var R={mainType:T,query:k};C&&(R.subType=C);var z=w.excludeSeriesId,$;z!=null&&($=Mr(),ue(hn(z),function(G){var Y=ya(G,null);Y!=null&&$.set(Y,!0)})),I&&I.eachComponent(R,function(G){var Y=$&&$.get(G.id)!=null;if(!Y)if(f4(w))if(G instanceof Gn)w.type===Op&&!w.notBlur&&!G.get(["emphasis","disabled"])&&Hme(G,w,v._api);else{var Z=zL(G.mainType,G.componentIndex,w.name,v._api),H=Z.focusSelf,re=Z.dispatchers;w.type===Op&&H&&!w.notBlur&&gD(G.mainType,G.componentIndex,v._api),re&&ue(re,function(ne){w.type===Op?lh(ne):uh(ne)})}else _D(w)&&G instanceof Gn&&(Zme(G,w,v._api),h4(G),tl(v))},v),I&&I.eachComponent(R,function(G){var Y=$&&$.get(G.id)!=null;Y||j(v[T==="series"?"_chartsMap":"_componentsMap"][G.__viewId])},v);function j(G){G&&G.__alive&&G[x]&&G[x](G.__model,I,v._api,w)}},rd={prepareAndUpdate:function(v){_g(this),rd.update.call(this,v,{optionChanged:v.newOption!=null})},update:function(v,x){var w=this._model,T=this._api,C=this._zr,I=this._coordSysMgr,k=this._scheduler;if(!!w){w.setUpdatePayload(v),k.restoreData(w,v),k.performSeriesTasks(w),I.create(w,T),k.performDataProcessorTasks(w,v),jC(this,w),I.update(w,T),t(w),k.performVisualTasks(w,v),WC(this,w,T,v,x);var R=w.get("backgroundColor")||"transparent",z=w.get("darkMode");C.setBackgroundColor(R),z!=null&&z!=="auto"&&C.setDarkMode(z),Wl.trigger("afterupdate",w,T)}},updateTransform:function(v){var x=this,w=this._model,T=this._api;if(!!w){w.setUpdatePayload(v);var C=[];w.eachComponent(function(k,R){if(k!=="series"){var z=x.getViewOfComponentModel(R);if(z&&z.__alive)if(z.updateTransform){var $=z.updateTransform(R,w,T,v);$&&$.update&&C.push(z)}else C.push(z)}});var I=Mr();w.eachSeries(function(k){var R=x._chartsMap[k.__viewId];if(R.updateTransform){var z=R.updateTransform(k,w,T,v);z&&z.update&&I.set(k.uid,1)}else I.set(k.uid,1)}),t(w),this._scheduler.performVisualTasks(w,v,{setDirty:!0,dirtyMap:I}),nw(this,w,T,v,{},I),Wl.trigger("afterupdate",w,T)}},updateView:function(v){var x=this._model;!x||(x.setUpdatePayload(v),Cn.markUpdateMethod(v,"updateView"),t(x),this._scheduler.performVisualTasks(x,v,{setDirty:!0}),WC(this,x,this._api,v,{}),Wl.trigger("afterupdate",x,this._api))},updateVisual:function(v){var x=this,w=this._model;!w||(w.setUpdatePayload(v),w.eachSeries(function(T){T.getData().clearAllVisual()}),Cn.markUpdateMethod(v,"updateVisual"),t(w),this._scheduler.performVisualTasks(w,v,{visualType:"visual",setDirty:!0}),w.eachComponent(function(T,C){if(T!=="series"){var I=x.getViewOfComponentModel(C);I&&I.__alive&&I.updateVisual(C,w,x._api,v)}}),w.eachSeries(function(T){var C=x._chartsMap[T.__viewId];C.updateVisual(T,w,x._api,v)}),Wl.trigger("afterupdate",w,this._api))},updateLayout:function(v){rd.update.call(this,v)}},UC=function(v,x,w,T){if(v._disposed){v.id;return}for(var C=v._model,I=v._coordSysMgr.getCoordinateSystems(),k,R=v0(C,w),z=0;z<I.length;z++){var $=I[z];if($[x]&&(k=$[x](C,R,T))!=null)return k}},jC=function(v,x){var w=v._chartsMap,T=v._scheduler;x.eachSeries(function(C){T.updateStreamModes(C,w[C.__viewId])})},HC=function(v,x){var w=this,T=this.getModel(),C=v.type,I=v.escapeConnect,k=NS[C],R=k.actionInfo,z=(R.update||"update").split(":"),$=z.pop(),j=z[0]!=null&&Zu(z[0]);this[yo]=!0;var G=[v],Y=!1;v.batch&&(Y=!0,G=Ht(v.batch,function(Se){return Se=zr(kt({},Se),v),Se.batch=null,Se}));var Z=[],H,re=_D(v),ne=f4(v);if(ne&&PH(this._api),ue(G,function(Se){if(H=k.action(Se,w._model,w._api),H=H||kt({},Se),H.type=R.event||H.type,Z.push(H),ne){var Ie=IL(v),ke=Ie.queryOptionMap,Fe=Ie.mainTypeSpecified,Ce=Fe?ke.keys()[0]:"series";iw(w,$,Se,Ce),tl(w)}else re?(iw(w,$,Se,"series"),tl(w)):j&&iw(w,$,Se,j.main,j.sub)}),$!=="none"&&!ne&&!re&&!j)try{this[rs]?(_g(this),rd.update.call(this,v),this[rs]=null):rd[$].call(this,v)}catch(Se){throw this[yo]=!1,Se}if(Y?H={type:R.event||C,escapeConnect:I,batch:Z}:H=Z[0],this[yo]=!1,!x){var se=this._messageCenter;if(se.trigger(H.type,H),re){var me={type:"selectchanged",escapeConnect:I,selected:Xme(T),isFromClick:v.isFromClick||!1,fromAction:v.type,fromActionPayload:v};se.trigger(me.type,me)}}},My=function(v){for(var x=this._pendingActions;x.length;){var w=x.shift();HC.call(this,w,v)}},Ay=function(v){!v&&this.trigger("updated")},CN=function(v,x){v.on("rendered",function(w){x.trigger("rendered",w),v.animation.isFinished()&&!x[rs]&&!x._scheduler.unfinished&&!x._pendingActions.length&&x.trigger("finished")})},IN=function(v,x){v.on("mouseover",function(w){var T=w.target,C=Tp(T,j0);C&&(Wme(C,w,x._api),tl(x))}).on("mouseout",function(w){var T=w.target,C=Tp(T,j0);C&&(qme(C,w,x._api),tl(x))}).on("click",function(w){var T=w.target,C=Tp(T,function(R){return Gr(R).dataIndex!=null},!0);if(C){var I=C.selected?"unselect":"select",k=Gr(C);x._api.dispatchAction({type:I,dataType:k.dataType,dataIndexInside:k.dataIndex,seriesIndex:k.seriesIndex,isFromClick:!0})}})};function t(v){v.clearColorPalette(),v.eachSeries(function(x){x.clearColorPalette()})}function i(v){var x=[],w=[],T=!1;if(v.eachComponent(function(R,z){var $=z.get("zlevel")||0,j=z.get("z")||0,G=z.getZLevelKey();T=T||!!G,(R==="series"?w:x).push({zlevel:$,z:j,idx:z.componentIndex,type:R,key:G})}),T){var C=x.concat(w),I,k;jw(C,function(R,z){return R.zlevel===z.zlevel?R.z-z.z:R.zlevel-z.zlevel}),ue(C,function(R){var z=v.getComponent(R.type,R.idx),$=R.zlevel,j=R.key;I!=null&&($=Math.max(I,$)),j?($===I&&j!==k&&$++,k=j):k&&($===I&&$++,k=""),I=$,z.setZLevel($)})}}WC=function(v,x,w,T,C){i(x),EN(v,x,w,T,C),ue(v._chartsViews,function(I){I.__alive=!1}),nw(v,x,w,T,C),ue(v._chartsViews,function(I){I.__alive||I.remove(x,w)})},EN=function(v,x,w,T,C,I){ue(I||v._componentsViews,function(k){var R=k.__model;p(R,k),k.render(R,x,w,T),a(R,k),m(R,k)})},nw=function(v,x,w,T,C,I){var k=v._scheduler;C=kt(C||{},{updatedSeries:x.getSeries()}),Wl.trigger("series:beforeupdate",x,w,C);var R=!1;x.eachSeries(function(z){var $=v._chartsMap[z.__viewId];$.__alive=!0;var j=$.renderTask;k.updatePayload(j,T),p(z,$),I&&I.get(z.uid)&&j.dirty(),j.perform(k.getPerformArgs(j))&&(R=!0),$.group.silent=!!z.get("silent"),u(z,$),h4(z)}),k.unfinished=R||k.unfinished,Wl.trigger("series:layoutlabels",x,w,C),Wl.trigger("series:transition",x,w,C),x.eachSeries(function(z){var $=v._chartsMap[z.__viewId];a(z,$),m(z,$)}),s(v,x),Wl.trigger("series:afterupdate",x,w,C)},tl=function(v){v[VC]=!0,v.getZr().wakeUp()},PN=function(v){!v[VC]||(v.getZr().storage.traverse(function(x){qg(x)||n(x)}),v[VC]=!1)};function n(v){for(var x=[],w=v.currentStates,T=0;T<w.length;T++){var C=w[T];C==="emphasis"||C==="blur"||C==="select"||x.push(C)}v.selected&&v.states.select&&x.push("select"),v.hoverState===UT&&v.states.emphasis?x.push("emphasis"):v.hoverState===mx&&v.states.blur&&x.push("blur"),v.useStates(x)}function s(v,x){var w=v._zr,T=w.storage,C=0;T.traverse(function(I){I.isGroup||C++}),C>x.get("hoverLayerThreshold")&&!Fi.node&&!Fi.worker&&x.eachSeries(function(I){if(!I.preventUsingHoverLayer){var k=v._chartsMap[I.__viewId];k.__alive&&k.eachRendered(function(R){R.states.emphasis&&(R.states.emphasis.hoverLayer=!0)})}})}function u(v,x){var w=v.get("blendMode")||null;x.eachRendered(function(T){T.isGroup||(T.style.blend=w)})}function a(v,x){if(!v.preventAutoZ){var w=v.get("z")||0,T=v.get("zlevel")||0;x.eachRendered(function(C){return h(C,w,T,-1/0),!0})}}function h(v,x,w,T){var C=v.getTextContent(),I=v.getTextGuideLine(),k=v.isGroup;if(k)for(var R=v.childrenRef(),z=0;z<R.length;z++)T=Math.max(h(R[z],x,w,T),T);else v.z=x,v.zlevel=w,T=Math.max(v.z2,T);if(C&&(C.z=x,C.zlevel=w,isFinite(T)&&(C.z2=T+2)),I){var $=v.textGuideLineConfig;I.z=x,I.zlevel=w,isFinite(T)&&(I.z2=T+($&&$.showAbove?1:-1))}return T}function p(v,x){x.eachRendered(function(w){if(!qg(w)){var T=w.getTextContent(),C=w.getTextGuideLine();w.stateTransition&&(w.stateTransition=null),T&&T.stateTransition&&(T.stateTransition=null),C&&C.stateTransition&&(C.stateTransition=null),w.hasState()?(w.prevStates=w.currentStates,w.clearStates()):w.prevStates&&(w.prevStates=null)}})}function m(v,x){var w=v.getModel("stateAnimation"),T=v.isAnimationEnabled(),C=w.get("duration"),I=C>0?{duration:C,delay:w.get("delay"),easing:w.get("easing")}:null;x.eachRendered(function(k){if(k.states&&k.states.emphasis){if(qg(k))return;if(k instanceof _i&&ege(k),k.__dirty){var R=k.prevStates;R&&k.useStates(R)}if(T){k.stateTransition=I;var z=k.getTextContent(),$=k.getTextGuideLine();z&&(z.stateTransition=I),$&&($.stateTransition=I)}k.__dirty&&n(k)}})}DN=function(v){return new(function(x){lt(w,x);function w(){return x!==null&&x.apply(this,arguments)||this}return w.prototype.getCoordinateSystems=function(){return v._coordSysMgr.getCoordinateSystems()},w.prototype.getComponentByElement=function(T){for(;T;){var C=T.__ecComponentInfo;if(C!=null)return v._model.getComponent(C.mainType,C.index);T=T.parent}},w.prototype.enterEmphasis=function(T,C){lh(T,C),tl(v)},w.prototype.leaveEmphasis=function(T,C){uh(T,C),tl(v)},w.prototype.enterBlur=function(T){CH(T),tl(v)},w.prototype.leaveBlur=function(T){OL(T),tl(v)},w.prototype.enterSelect=function(T){IH(T),tl(v)},w.prototype.leaveSelect=function(T){EH(T),tl(v)},w.prototype.getModel=function(){return v.getModel()},w.prototype.getViewOfComponentModel=function(T){return v.getViewOfComponentModel(T)},w.prototype.getViewOfSeriesModel=function(T){return v.getViewOfSeriesModel(T)},w}(LW))(v)},C7=function(v){function x(w,T){for(var C=0;C<w.length;C++){var I=w[C];I[$C]=T}}ue(S0,function(w,T){v._messageCenter.on(T,function(C){if(LN[v.group]&&v[$C]!==AN){if(C&&C.escapeConnect)return;var I=v.makeActionFromEvent(C),k=[];ue(T0,function(R){R!==v&&R.group===v.group&&k.push(R)}),x(k,AN),ue(k,function(R){R[$C]!==Nye&&R.dispatchAction(I)}),x(k,Vye)}})})}}(),e}(xl),ck=I7.prototype;ck.on=w7("on");ck.off=w7("off");ck.one=function(r,e,t){var i=this;function n(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];e&&e.apply&&e.apply(this,s),i.off(r,n)}this.on.call(this,r,n,t)};var $ye=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var NS={},S0={},RD=[],OD=[],VS=[],E7={},zD={},T0={},LN={},Gye=+new Date-0,hk="_echarts_instance_";function Uye(r,e,t){var i=!(t&&t.ssr);if(i){var n=jye(r);if(n)return n}var s=new I7(r,e,t);return s.id="ec_"+Gye++,T0[s.id]=s,i&&oH(r,hk,s.id),C7(s),Wl.trigger("afterinit",s),s}function jye(r){return T0[Vpe(r,hk)]}function D7(r,e){E7[r]=e}function P7(r){di(OD,r)<0&&OD.push(r)}function L7(r,e){fk(RD,r,e,Pye)}function Hye(r){dk("afterinit",r)}function Wye(r){dk("afterupdate",r)}function dk(r,e){Wl.on(r,e)}function uc(r,e,t){kr(e)&&(t=e,e="");var i=Br(r)?r.type:[r,r={event:e}][0];r.event=(r.event||i).toLowerCase(),e=r.event,!S0[e]&&(Vo(MN.test(i)&&MN.test(e)),NS[i]||(NS[i]={action:t,actionInfo:r}),S0[e]=i)}function qye(r,e){yx.register(r,e)}function Zye(r,e){fk(VS,r,e,y7,"layout")}function im(r,e){fk(VS,r,e,x7,"visual")}var kN=[];function fk(r,e,t,i,n){if((kr(e)||Br(e))&&(t=e,e=i),!(di(kN,t)>=0)){kN.push(t);var s=l7.wrapStageHandler(t,n);s.__prio=e,s.__raw=t,r.push(s)}}function k7(r,e){zD[r]=e}function Xye(r,e,t){var i=Aye("registerMap");i&&i(r,e,t)}var Yye=a_e;im(uk,D_e);im(a2,P_e);im(a2,L_e);im(uk,q_e);im(a2,Z_e);im(b7,Sye);P7(RW);L7(Eye,Nve);k7("default",k_e);uc({type:Op,event:Op,update:Op},aa);uc({type:Yw,event:Yw,update:Yw},aa);uc({type:_0,event:_0,update:_0},aa);uc({type:Kw,event:Kw,update:Kw},aa);uc({type:y0,event:y0,update:y0},aa);D7("light",j_e);D7("dark",H_e);var RN=[],Kye={registerPreprocessor:P7,registerProcessor:L7,registerPostInit:Hye,registerPostUpdate:Wye,registerUpdateLifecycle:dk,registerAction:uc,registerCoordinateSystem:qye,registerLayout:Zye,registerVisual:im,registerTransform:Yye,registerLoading:k7,registerMap:Xye,registerImpl:Mye,PRIORITY:Fye,ComponentModel:Oi,ComponentView:Jn,SeriesModel:Gn,ChartView:Cn,registerComponentModel:function(r){Oi.registerClass(r)},registerComponentView:function(r){Jn.registerClass(r)},registerSeriesModel:function(r){Gn.registerClass(r)},registerChartView:function(r){Cn.registerClass(r)},registerSubTypeDefaulter:function(r,e){Oi.registerSubTypeDefaulter(r,e)},registerPainter:function(r,e){_pe(r,e)}};function gi(r){if(Nt(r)){ue(r,function(e){gi(e)});return}di(RN,r)>=0||(RN.push(r),kr(r)&&(r={install:r}),r.install(Kye))}function Cy(r){return r==null?0:r.length||1}function ON(r){return r}var Jye=function(){function r(e,t,i,n,s,u){this._old=e,this._new=t,this._oldKeyGetter=i||ON,this._newKeyGetter=n||ON,this.context=s,this._diffModeMultiple=u==="multiple"}return r.prototype.add=function(e){return this._add=e,this},r.prototype.update=function(e){return this._update=e,this},r.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},r.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},r.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},r.prototype.remove=function(e){return this._remove=e,this},r.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},r.prototype._executeOneToOne=function(){var e=this._old,t=this._new,i={},n=new Array(e.length),s=new Array(t.length);this._initIndexMap(e,null,n,"_oldKeyGetter"),this._initIndexMap(t,i,s,"_newKeyGetter");for(var u=0;u<e.length;u++){var a=n[u],h=i[a],p=Cy(h);if(p>1){var m=h.shift();h.length===1&&(i[a]=h[0]),this._update&&this._update(m,u)}else p===1?(i[a]=null,this._update&&this._update(h,u)):this._remove&&this._remove(u)}this._performRestAdd(s,i)},r.prototype._executeMultiple=function(){var e=this._old,t=this._new,i={},n={},s=[],u=[];this._initIndexMap(e,i,s,"_oldKeyGetter"),this._initIndexMap(t,n,u,"_newKeyGetter");for(var a=0;a<s.length;a++){var h=s[a],p=i[h],m=n[h],v=Cy(p),x=Cy(m);if(v>1&&x===1)this._updateManyToOne&&this._updateManyToOne(m,p),n[h]=null;else if(v===1&&x>1)this._updateOneToMany&&this._updateOneToMany(m,p),n[h]=null;else if(v===1&&x===1)this._update&&this._update(m,p),n[h]=null;else if(v>1&&x>1)this._updateManyToMany&&this._updateManyToMany(m,p),n[h]=null;else if(v>1)for(var w=0;w<v;w++)this._remove&&this._remove(p[w]);else this._remove&&this._remove(p)}this._performRestAdd(u,n)},r.prototype._performRestAdd=function(e,t){for(var i=0;i<e.length;i++){var n=e[i],s=t[n],u=Cy(s);if(u>1)for(var a=0;a<u;a++)this._add&&this._add(s[a]);else u===1&&this._add&&this._add(s);t[n]=null}},r.prototype._initIndexMap=function(e,t,i,n){for(var s=this._diffModeMultiple,u=0;u<e.length;u++){var a="_ec_"+this[n](e[u],u);if(s||(i[u]=a),!!t){var h=t[a],p=Cy(h);p===0?(t[a]=u,s&&i.push(a)):p===1?t[a]=[h,u]:h.push(u)}}},r}(),ch=Jye,Qye=function(){function r(e,t){this._encode=e,this._schema=t}return r.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},r.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},r}();function e0e(r,e){var t={},i=t.encode={},n=Mr(),s=[],u=[],a={};ue(r.dimensions,function(x){var w=r.getDimensionInfo(x),T=w.coordDim;if(T){var C=w.coordDimIndex;qC(i,T)[C]=x,w.isExtraCoord||(n.set(T,1),t0e(w.type)&&(s[0]=x),qC(a,T)[C]=r.getDimensionIndex(w.name)),w.defaultTooltip&&u.push(x)}SW.each(function(I,k){var R=qC(i,k),z=w.otherDims[k];z!=null&&z!==!1&&(R[z]=w.name)})});var h=[],p={};n.each(function(x,w){var T=i[w];p[w]=T[0],h=h.concat(T)}),t.dataDimsOnCoord=h,t.dataDimIndicesOnCoord=Ht(h,function(x){return r.getDimensionInfo(x).storeDimIndex}),t.encodeFirstDimNotExtra=p;var m=i.label;m&&m.length&&(s=m.slice());var v=i.tooltip;return v&&v.length?u=v.slice():u.length||(u=s.slice()),i.defaultedLabel=s,i.defaultedTooltip=u,t.userOutput=new Qye(a,e),t}function qC(r,e){return r.hasOwnProperty(e)||(r[e]=[]),r[e]}function $S(r){return r==="category"?"ordinal":r==="time"?"time":"float"}function t0e(r){return!(r==="ordinal"||r==="time")}var r0e=function(){function r(e){this.otherDims={},e!=null&&kt(this,e)}return r}(),rS=r0e,i0e=ki(),n0e={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},R7=function(){function r(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return r.prototype.isDimensionOmitted=function(){return this._dimOmitted},r.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=B7(this.source)))},r.prototype.getSourceDimensionIndex=function(e){return Yr(this._dimNameMap.get(e),-1)},r.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},r.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=zW(this.source),i=!F7(e),n="",s=[],u=0,a=0;u<e;u++){var h=void 0,p=void 0,m=void 0,v=this.dimensions[a];if(v&&v.storeDimIndex===u)h=t?v.name:null,p=v.type,m=v.ordinalMeta,a++;else{var x=this.getSourceDimension(u);x&&(h=t?x.name:null,p=x.type)}s.push({property:h,type:p,ordinalMeta:m}),t&&h!=null&&(!v||!v.isCalculationCoord)&&(n+=i?h.replace(/\`/g,"`1").replace(/\$/g,"`2"):h),n+="$",n+=n0e[p]||"f",m&&(n+=m.uid),n+="$"}var w=this.source,T=[w.seriesLayoutBy,w.startIndex,n].join("$$");return{dimensions:s,hash:T}},r.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,i=0;t<this._fullDimCount;t++){var n=void 0,s=this.dimensions[i];if(s&&s.storeDimIndex===t)s.isCalculationCoord||(n=s.name),i++;else{var u=this.getSourceDimension(t);u&&(n=u.name)}e.push(n)}return e},r.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},r}();function O7(r){return r instanceof R7}function z7(r){for(var e=Mr(),t=0;t<(r||[]).length;t++){var i=r[t],n=Br(i)?i.name:i;n!=null&&e.get(n)==null&&e.set(n,t)}return e}function B7(r){var e=i0e(r);return e.dimNameMap||(e.dimNameMap=z7(r.dimensionsDefine))}function F7(r){return r>30}var Iy=Br,id=Ht,a0e=typeof Int32Array=="undefined"?Array:Int32Array,o0e="e\0\0",zN=-1,s0e=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],l0e=["_approximateExtent"],BN,aw,Ey,Dy,ZC,ow,XC,u0e=function(){function r(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var i,n=!1;O7(e)?(i=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(n=!0,i=e),i=i||["x","y"];for(var s={},u=[],a={},h=!1,p={},m=0;m<i.length;m++){var v=i[m],x=gr(v)?new rS({name:v}):v instanceof rS?v:new rS(v),w=x.name;x.type=x.type||"float",x.coordDim||(x.coordDim=w,x.coordDimIndex=0);var T=x.otherDims=x.otherDims||{};u.push(w),s[w]=x,p[w]!=null&&(h=!0),x.createInvertedIndices&&(a[w]=[]),T.itemName===0&&(this._nameDimIdx=m),T.itemId===0&&(this._idDimIdx=m),n&&(x.storeDimIndex=m)}if(this.dimensions=u,this._dimInfos=s,this._initGetDimensionInfo(h),this.hostModel=t,this._invertedIndicesMap=a,this._dimOmitted){var C=this._dimIdxToName=Mr();ue(u,function(I){C.set(s[I].storeDimIndex,I)})}}return r.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var i=this._dimIdxToName.get(t);if(i!=null)return i;var n=this._schema.getSourceDimension(t);if(n)return n.name},r.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var i=this._getDimInfo(e);return i?i.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},r.prototype._recognizeDimIndex=function(e){if(Vi(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},r.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},r.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},r.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(i){return t.hasOwnProperty(i)?t[i]:void 0}:function(i){return t[i]}},r.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},r.prototype.mapDimension=function(e,t){var i=this._dimSummary;if(t==null)return i.encodeFirstDimNotExtra[e];var n=i.encode[e];return n?n[t]:null},r.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,i=t.encode[e];return(i||[]).slice()},r.prototype.getStore=function(){return this._store},r.prototype.initData=function(e,t,i){var n=this,s;if(e instanceof CD&&(s=e),!s){var u=this.dimensions,a=QL(e)||So(e)?new BW(e,u.length):e;s=new CD;var h=id(u,function(p){return{type:n._dimInfos[p].type,property:p}});s.initData(a,h,i)}this._store=s,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,s.count()),this._dimSummary=e0e(this,this._schema),this.userOutput=this._dimSummary.userOutput},r.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},r.prototype.appendValues=function(e,t){var i=this._store.appendValues(e,t.length),n=i.start,s=i.end,u=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var a=n;a<s;a++){var h=a-n;this._nameList[a]=t[h],u&&XC(this,a)}},r.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,i=0;i<t.length;i++){var n=this._dimInfos[t[i]];n.ordinalMeta&&e.collectOrdinalMeta(n.storeDimIndex,n.ordinalMeta)}},r.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==Id&&!e.fillStorage},r.prototype._doInit=function(e,t){if(!(e>=t)){var i=this._store,n=i.getProvider();this._updateOrdinalMeta();var s=this._nameList,u=this._idList,a=n.getSource().sourceFormat,h=a===bl;if(h&&!n.pure)for(var p=[],m=e;m<t;m++){var v=n.getItem(m,p);if(!this.hasItemOption&&Cpe(v)&&(this.hasItemOption=!0),v){var x=v.name;s[m]==null&&x!=null&&(s[m]=ya(x,null));var w=v.id;u[m]==null&&w!=null&&(u[m]=ya(w,null))}}if(this._shouldMakeIdFromName())for(var m=e;m<t;m++)XC(this,m);BN(this)}},r.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},r.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},r.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},r.prototype.setCalculationInfo=function(e,t){Iy(e)?kt(this._calculationInfo,e):this._calculationInfo[e]=t},r.prototype.getName=function(e){var t=this.getRawIndex(e),i=this._nameList[t];return i==null&&this._nameDimIdx!=null&&(i=Ey(this,this._nameDimIdx,t)),i==null&&(i=""),i},r.prototype._getCategory=function(e,t){var i=this._store.get(e,t),n=this._store.getOrdinalMeta(e);return n?n.categories[i]:i},r.prototype.getId=function(e){return aw(this,this.getRawIndex(e))},r.prototype.count=function(){return this._store.count()},r.prototype.get=function(e,t){var i=this._store,n=this._dimInfos[e];if(n)return i.get(n.storeDimIndex,t)},r.prototype.getByRawIndex=function(e,t){var i=this._store,n=this._dimInfos[e];if(n)return i.getByRawIndex(n.storeDimIndex,t)},r.prototype.getIndices=function(){return this._store.getIndices()},r.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},r.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},r.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},r.prototype.getValues=function(e,t){var i=this,n=this._store;return Nt(e)?n.getValues(id(e,function(s){return i._getStoreDimIndex(s)}),t):n.getValues(e)},r.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,i=0,n=t.length;i<n;i++)if(isNaN(this._store.get(t[i],e)))return!1;return!0},r.prototype.indexOfName=function(e){for(var t=0,i=this._store.count();t<i;t++)if(this.getName(t)===e)return t;return-1},r.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},r.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},r.prototype.rawIndexOf=function(e,t){var i=e&&this._invertedIndicesMap[e],n=i[t];return n==null||isNaN(n)?zN:n},r.prototype.indicesOfNearest=function(e,t,i){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,i)},r.prototype.each=function(e,t,i){kr(e)&&(i=t,t=e,e=[]);var n=i||this,s=id(Dy(e),this._getStoreDimIndex,this);this._store.each(s,n?xr(t,n):t)},r.prototype.filterSelf=function(e,t,i){kr(e)&&(i=t,t=e,e=[]);var n=i||this,s=id(Dy(e),this._getStoreDimIndex,this);return this._store=this._store.filter(s,n?xr(t,n):t),this},r.prototype.selectRange=function(e){var t=this,i={},n=bi(e);return ue(n,function(s){var u=t._getStoreDimIndex(s);i[u]=e[s]}),this._store=this._store.selectRange(i),this},r.prototype.mapArray=function(e,t,i){kr(e)&&(i=t,t=e,e=[]),i=i||this;var n=[];return this.each(e,function(){n.push(t&&t.apply(this,arguments))},i),n},r.prototype.map=function(e,t,i,n){var s=i||n||this,u=id(Dy(e),this._getStoreDimIndex,this),a=ow(this);return a._store=this._store.map(u,s?xr(t,s):t),a},r.prototype.modify=function(e,t,i,n){var s=i||n||this,u=id(Dy(e),this._getStoreDimIndex,this);this._store.modify(u,s?xr(t,s):t)},r.prototype.downSample=function(e,t,i,n){var s=ow(this);return s._store=this._store.downSample(this._getStoreDimIndex(e),t,i,n),s},r.prototype.lttbDownSample=function(e,t){var i=ow(this);return i._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),i},r.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},r.prototype.getItemModel=function(e){var t=this.hostModel,i=this.getRawDataItem(e);return new An(i,t,t&&t.ecModel)},r.prototype.diff=function(e){var t=this;return new ch(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(i){return aw(e,i)},function(i){return aw(t,i)})},r.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},r.prototype.setVisual=function(e,t){this._visual=this._visual||{},Iy(e)?kt(this._visual,e):this._visual[e]=t},r.prototype.getItemVisual=function(e,t){var i=this._itemVisuals[e],n=i&&i[t];return n==null?this.getVisual(t):n},r.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},r.prototype.ensureUniqueItemVisual=function(e,t){var i=this._itemVisuals,n=i[e];n||(n=i[e]={});var s=n[t];return s==null&&(s=this.getVisual(t),Nt(s)?s=s.slice():Iy(s)&&(s=kt({},s)),n[t]=s),s},r.prototype.setItemVisual=function(e,t,i){var n=this._itemVisuals[e]||{};this._itemVisuals[e]=n,Iy(t)?kt(n,t):n[t]=i},r.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},r.prototype.setLayout=function(e,t){Iy(e)?kt(this._layout,e):this._layout[e]=t},r.prototype.getLayout=function(e){return this._layout[e]},r.prototype.getItemLayout=function(e){return this._itemLayouts[e]},r.prototype.setItemLayout=function(e,t,i){this._itemLayouts[e]=i?kt(this._itemLayouts[e]||{},t):t},r.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},r.prototype.setItemGraphicEl=function(e,t){var i=this.hostModel&&this.hostModel.seriesIndex;pD(i,this.dataType,e,t),this._graphicEls[e]=t},r.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},r.prototype.eachItemGraphicEl=function(e,t){ue(this._graphicEls,function(i,n){i&&e&&e.call(t,i,n)})},r.prototype.cloneShallow=function(e){return e||(e=new r(this._schema?this._schema:id(this.dimensions,this._getDimInfo,this),this.hostModel)),ZC(e,this),e._store=this._store,e},r.prototype.wrapMethod=function(e,t){var i=this[e];!kr(i)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var n=i.apply(this,arguments);return t.apply(this,[n].concat(vL(arguments)))})},r.internalField=function(){BN=function(e){var t=e._invertedIndicesMap;ue(t,function(i,n){var s=e._dimInfos[n],u=s.ordinalMeta,a=e._store;if(u){i=t[n]=new a0e(u.categories.length);for(var h=0;h<i.length;h++)i[h]=zN;for(var h=0;h<a.count();h++)i[a.get(s.storeDimIndex,h)]=h}})},Ey=function(e,t,i){return ya(e._getCategory(t,i),null)},aw=function(e,t){var i=e._idList[t];return i==null&&e._idDimIdx!=null&&(i=Ey(e,e._idDimIdx,t)),i==null&&(i=o0e+t),i},Dy=function(e){return Nt(e)||(e=e!=null?[e]:[]),e},ow=function(e){var t=new r(e._schema?e._schema:id(e.dimensions,e._getDimInfo,e),e.hostModel);return ZC(t,e),t},ZC=function(e,t){ue(s0e.concat(t.__wrappedMethods||[]),function(i){t.hasOwnProperty(i)&&(e[i]=t[i])}),e.__wrappedMethods=t.__wrappedMethods,ue(l0e,function(i){e[i]=Nr(t[i])}),e._calculationInfo=kt({},t._calculationInfo)},XC=function(e,t){var i=e._nameList,n=e._idList,s=e._nameDimIdx,u=e._idDimIdx,a=i[t],h=n[t];if(a==null&&s!=null&&(i[t]=a=Ey(e,s,t)),h==null&&u!=null&&(n[t]=h=Ey(e,u,t)),h==null&&a!=null){var p=e._nameRepeatCount,m=p[a]=(p[a]||0)+1;h=a,m>1&&(h+="__ec__"+m),n[t]=h}}}(),r}(),No=u0e;function bx(r,e){QL(r)||(r=ek(r)),e=e||{};var t=e.coordDimensions||[],i=e.dimensionsDefine||r.dimensionsDefine||[],n=Mr(),s=[],u=h0e(r,t,i,e.dimensionsCount),a=e.canOmitUnusedDimensions&&F7(u),h=i===r.dimensionsDefine,p=h?B7(r):z7(i),m=e.encodeDefine;!m&&e.encodeDefaulter&&(m=e.encodeDefaulter(r,u));for(var v=Mr(m),x=new HW(u),w=0;w<x.length;w++)x[w]=-1;function T(H){var re=x[H];if(re<0){var ne=i[H],se=Br(ne)?ne:{name:ne},me=new rS,Se=se.name;Se!=null&&p.get(Se)!=null&&(me.name=me.displayName=Se),se.type!=null&&(me.type=se.type),se.displayName!=null&&(me.displayName=se.displayName);var Ie=s.length;return x[H]=Ie,me.storeDimIndex=H,s.push(me),me}return s[re]}if(!a)for(var w=0;w<u;w++)T(w);v.each(function(H,re){var ne=hn(H).slice();if(ne.length===1&&!gr(ne[0])&&ne[0]<0){v.set(re,!1);return}var se=v.set(re,[]);ue(ne,function(me,Se){var Ie=gr(me)?p.get(me):me;Ie!=null&&Ie<u&&(se[Se]=Ie,I(T(Ie),re,Se))})});var C=0;ue(t,function(H){var re,ne,se,me;if(gr(H))re=H,me={};else{me=H,re=me.name;var Se=me.ordinalMeta;me.ordinalMeta=null,me=kt({},me),me.ordinalMeta=Se,ne=me.dimsDef,se=me.otherDims,me.name=me.coordDim=me.coordDimIndex=me.dimsDef=me.otherDims=null}var Ie=v.get(re);if(Ie!==!1){if(Ie=hn(Ie),!Ie.length)for(var ke=0;ke<(ne&&ne.length||1);ke++){for(;C<u&&T(C).coordDim!=null;)C++;C<u&&Ie.push(C++)}ue(Ie,function(Fe,Ce){var We=T(Fe);if(h&&me.type!=null&&(We.type=me.type),I(zr(We,me),re,Ce),We.name==null&&ne){var gt=ne[Ce];!Br(gt)&&(gt={name:gt}),We.name=We.displayName=gt.name,We.defaultTooltip=gt.defaultTooltip}se&&zr(We.otherDims,se)})}});function I(H,re,ne){SW.get(re)!=null?H.otherDims[re]=ne:(H.coordDim=re,H.coordDimIndex=ne,n.set(re,!0))}var k=e.generateCoord,R=e.generateCoordCount,z=R!=null;R=k?R||1:0;var $=k||"value";function j(H){H.name==null&&(H.name=H.coordDim)}if(a)ue(s,function(H){j(H)}),s.sort(function(H,re){return H.storeDimIndex-re.storeDimIndex});else for(var G=0;G<u;G++){var Y=T(G),Z=Y.coordDim;Z==null&&(Y.coordDim=d0e($,n,z),Y.coordDimIndex=0,(!k||R<=0)&&(Y.isExtraCoord=!0),R--),j(Y),Y.type==null&&(CW(r,G)===Ka.Must||Y.isExtraCoord&&(Y.otherDims.itemName!=null||Y.otherDims.seriesName!=null))&&(Y.type="ordinal")}return c0e(s),new R7({source:r,dimensions:s,fullDimensionCount:u,dimensionOmitted:a})}function c0e(r){for(var e=Mr(),t=0;t<r.length;t++){var i=r[t],n=i.name,s=e.get(n)||0;s>0&&(i.name=n+(s-1)),s++,e.set(n,s)}}function h0e(r,e,t,i){var n=Math.max(r.dimensionsDetectedCount||1,e.length,t.length,i||0);return ue(e,function(s){var u;Br(s)&&(u=s.dimsDef)&&(n=Math.max(n,u.length))}),n}function d0e(r,e,t){if(t||e.hasKey(r)){for(var i=0;e.hasKey(r+i);)i++;r+=i}return e.set(r,!0),r}var f0e=function(){function r(e){this.coordSysDims=[],this.axisMap=Mr(),this.categoryAxisMap=Mr(),this.coordSysName=e}return r}();function p0e(r){var e=r.get("coordinateSystem"),t=new f0e(e),i=m0e[e];if(i)return i(r,t,t.axisMap,t.categoryAxisMap),t}var m0e={cartesian2d:function(r,e,t,i){var n=r.getReferringComponents("xAxis",da).models[0],s=r.getReferringComponents("yAxis",da).models[0];e.coordSysDims=["x","y"],t.set("x",n),t.set("y",s),yg(n)&&(i.set("x",n),e.firstCategoryDimIndex=0),yg(s)&&(i.set("y",s),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(r,e,t,i){var n=r.getReferringComponents("singleAxis",da).models[0];e.coordSysDims=["single"],t.set("single",n),yg(n)&&(i.set("single",n),e.firstCategoryDimIndex=0)},polar:function(r,e,t,i){var n=r.getReferringComponents("polar",da).models[0],s=n.findAxisModel("radiusAxis"),u=n.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",s),t.set("angle",u),yg(s)&&(i.set("radius",s),e.firstCategoryDimIndex=0),yg(u)&&(i.set("angle",u),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(r,e,t,i){e.coordSysDims=["lng","lat"]},parallel:function(r,e,t,i){var n=r.ecModel,s=n.getComponent("parallel",r.get("parallelIndex")),u=e.coordSysDims=s.dimensions.slice();ue(s.parallelAxisIndex,function(a,h){var p=n.getComponent("parallelAxis",a),m=u[h];t.set(m,p),yg(p)&&(i.set(m,p),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=h))})}};function yg(r){return r.get("type")==="category"}function g0e(r,e,t){t=t||{};var i=t.byIndex,n=t.stackedCoordDimension,s,u,a;v0e(e)?s=e:(u=e.schema,s=u.dimensions,a=e.store);var h=!!(r&&r.get("stack")),p,m,v,x;if(ue(s,function(R,z){gr(R)&&(s[z]=R={name:R}),h&&!R.isExtraCoord&&(!i&&!p&&R.ordinalMeta&&(p=R),!m&&R.type!=="ordinal"&&R.type!=="time"&&(!n||n===R.coordDim)&&(m=R))}),m&&!i&&!p&&(i=!0),m){v="__\0ecstackresult_"+r.id,x="__\0ecstackedover_"+r.id,p&&(p.createInvertedIndices=!0);var w=m.coordDim,T=m.type,C=0;ue(s,function(R){R.coordDim===w&&C++});var I={name:v,coordDim:w,coordDimIndex:C,type:T,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length},k={name:x,coordDim:x,coordDimIndex:C+1,type:T,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length+1};u?(a&&(I.storeDimIndex=a.ensureCalculationDimension(x,T),k.storeDimIndex=a.ensureCalculationDimension(v,T)),u.appendCalculationDimension(I),u.appendCalculationDimension(k)):(s.push(I),s.push(k))}return{stackedDimension:m&&m.name,stackedByDimension:p&&p.name,isStackedByIndex:i,stackedOverDimension:x,stackResultDimension:v}}function v0e(r){return!O7(r.schema)}function Fd(r,e){return!!e&&e===r.getCalculationInfo("stackedDimension")}function N7(r,e){return Fd(r,e)?r.getCalculationInfo("stackResultDimension"):e}function _0e(r,e){var t=r.get("coordinateSystem"),i=yx.get(t),n;return e&&e.coordSysDims&&(n=Ht(e.coordSysDims,function(s){var u={name:s},a=e.axisMap.get(s);if(a){var h=a.get("type");u.type=$S(h)}return u})),n||(n=i&&(i.getDimensionsInfo?i.getDimensionsInfo():i.dimensions.slice())||["x","y"]),n}function y0e(r,e,t){var i,n;return t&&ue(r,function(s,u){var a=s.coordDim,h=t.categoryAxisMap.get(a);h&&(i==null&&(i=u),s.ordinalMeta=h.getOrdinalMeta(),e&&(s.createInvertedIndices=!0)),s.otherDims.itemName!=null&&(n=!0)}),!n&&i!=null&&(r[i].otherDims.itemName=0),i}function gh(r,e,t){t=t||{};var i=e.getSourceManager(),n,s=!1;r?(s=!0,n=ek(r)):(n=i.getSource(),s=n.sourceFormat===bl);var u=p0e(e),a=_0e(e,u),h=t.useEncodeDefaulter,p=kr(h)?h:h?Qr(AW,a,e):null,m={coordDimensions:a,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:p,canOmitUnusedDimensions:!s},v=bx(n,m),x=y0e(v.dimensions,t.createInvertedIndices,u),w=s?null:i.getSharedDataStore(v),T=g0e(e,{schema:v,store:w}),C=new No(v,e);C.setCalculationInfo(T);var I=x!=null&&x0e(n)?function(k,R,z,$){return $===x?z:this.defaultDimValueGetter(k,R,z,$)}:null;return C.hasItemOption=!1,C.initData(s?n:w,null,I),C}function x0e(r){if(r.sourceFormat===bl){var e=b0e(r.data||[]);return!Nt(Iv(e))}}function b0e(r){for(var e=0;e<r.length&&r[e]==null;)e++;return r[e]}var V7=function(){function r(e){this._setting=e||{},this._extent=[1/0,-1/0]}return r.prototype.getSetting=function(e){return this._setting[e]},r.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},r.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.setExtent=function(e,t){var i=this._extent;isNaN(e)||(i[0]=e),isNaN(t)||(i[1]=t)},r.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},r.prototype.isBlank=function(){return this._isBlank},r.prototype.setBlank=function(e){this._isBlank=e},r}();NT(V7);var vh=V7,w0e=0,S0e=function(){function r(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++w0e}return r.createByAxisModel=function(e){var t=e.option,i=t.data,n=i&&Ht(i,T0e);return new r({categories:n,needCollect:!n,deduplication:t.dedplication!==!1})},r.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},r.prototype.parseAndCollect=function(e){var t,i=this._needCollect;if(!gr(e)&&!i)return e;if(i&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var n=this._getOrCreateMap();return t=n.get(e),t==null&&(i?(t=this.categories.length,this.categories[t]=e,n.set(e,t)):t=NaN),t},r.prototype._getOrCreateMap=function(){return this._map||(this._map=Mr(this.categories))},r}();function T0e(r){return Br(r)&&r.value!=null?r.value:r+""}var BD=S0e;function FD(r){return r.type==="interval"||r.type==="log"}function M0e(r,e,t,i){var n={},s=r[1]-r[0],u=n.interval=Jj(s/e,!0);t!=null&&u<t&&(u=n.interval=t),i!=null&&u>i&&(u=n.interval=i);var a=n.intervalPrecision=$7(u),h=n.niceTickExtent=[ra(Math.ceil(r[0]/u)*u,a),ra(Math.floor(r[1]/u)*u,a)];return A0e(h,r),n}function YC(r){var e=Math.pow(10,AL(r)),t=r/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,ra(t*e)}function $7(r){return qu(r)+2}function FN(r,e,t){r[e]=Math.max(Math.min(r[e],t[1]),t[0])}function A0e(r,e){!isFinite(r[0])&&(r[0]=e[0]),!isFinite(r[1])&&(r[1]=e[1]),FN(r,0,e),FN(r,1,e),r[0]>r[1]&&(r[0]=r[1])}function o2(r,e){return r>=e[0]&&r<=e[1]}function s2(r,e){return e[1]===e[0]?.5:(r-e[0])/(e[1]-e[0])}function l2(r,e){return r*(e[1]-e[0])+e[0]}var G7=function(r){lt(e,r);function e(t){var i=r.call(this,t)||this;i.type="ordinal";var n=i.getSetting("ordinalMeta");return n||(n=new BD({})),Nt(n)&&(n=new BD({categories:Ht(n,function(s){return Br(s)?s.value:s})})),i._ordinalMeta=n,i._extent=i.getSetting("extent")||[0,n.categories.length-1],i}return e.prototype.parse=function(t){return t==null?NaN:gr(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return t=this.parse(t),o2(t,this._extent)&&this._ordinalMeta.categories[t]!=null},e.prototype.normalize=function(t){return t=this._getTickNumber(this.parse(t)),s2(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(l2(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],i=this._extent,n=i[0];n<=i[1];)t.push({value:n}),n++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var i=t.ordinalNumbers,n=this._ordinalNumbersByTick=[],s=this._ticksByOrdinalNumber=[],u=0,a=this._ordinalMeta.categories.length,h=Math.min(a,i.length);u<h;++u){var p=i[u];n[u]=p,s[p]=u}for(var m=0;u<a;++u){for(;s[m]!=null;)m++;n.push(m),s[m]=u}},e.prototype._getTickNumber=function(t){var i=this._ticksByOrdinalNumber;return i&&t>=0&&t<i.length?i[t]:t},e.prototype.getRawOrdinalNumber=function(t){var i=this._ordinalNumbersByTick;return i&&t>=0&&t<i.length?i[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var i=this.getRawOrdinalNumber(t.value),n=this._ordinalMeta.categories[i];return n==null?"":n+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,i){this.unionExtent(t.getApproximateExtent(i))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(vh);vh.registerClass(G7);var pk=G7,Jf=ra,U7=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return o2(t,this._extent)},e.prototype.normalize=function(t){return s2(t,this._extent)},e.prototype.scale=function(t){return l2(t,this._extent)},e.prototype.setExtent=function(t,i){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(i)||(n[1]=parseFloat(i))},e.prototype.unionExtent=function(t){var i=this._extent;t[0]<i[0]&&(i[0]=t[0]),t[1]>i[1]&&(i[1]=t[1]),this.setExtent(i[0],i[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=$7(t)},e.prototype.getTicks=function(t){var i=this._interval,n=this._extent,s=this._niceExtent,u=this._intervalPrecision,a=[];if(!i)return a;var h=1e4;n[0]<s[0]&&(t?a.push({value:Jf(s[0]-i,u)}):a.push({value:n[0]}));for(var p=s[0];p<=s[1]&&(a.push({value:p}),p=Jf(p+i,u),p!==a[a.length-1].value);)if(a.length>h)return[];var m=a.length?a[a.length-1].value:s[1];return n[1]>m&&(t?a.push({value:Jf(m+i,u)}):a.push({value:n[1]})),a},e.prototype.getMinorTicks=function(t){for(var i=this.getTicks(!0),n=[],s=this.getExtent(),u=1;u<i.length;u++){for(var a=i[u],h=i[u-1],p=0,m=[],v=a.value-h.value,x=v/t;p<t-1;){var w=Jf(h.value+(p+1)*x);w>s[0]&&w<s[1]&&m.push(w),p++}n.push(m)}return n},e.prototype.getLabel=function(t,i){if(t==null)return"";var n=i&&i.precision;n==null?n=qu(t.value)||0:n==="auto"&&(n=this._intervalPrecision);var s=Jf(t.value,n,!0);return vW(s)},e.prototype.calcNiceTicks=function(t,i,n){t=t||5;var s=this._extent,u=s[1]-s[0];if(!!isFinite(u)){u<0&&(u=-u,s.reverse());var a=M0e(s,t,i,n);this._intervalPrecision=a.intervalPrecision,this._interval=a.interval,this._niceExtent=a.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var i=this._extent;if(i[0]===i[1])if(i[0]!==0){var n=Math.abs(i[0]);t.fixMax||(i[1]+=n/2),i[0]-=n/2}else i[1]=1;var s=i[1]-i[0];isFinite(s)||(i[0]=0,i[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var u=this._interval;t.fixMin||(i[0]=Jf(Math.floor(i[0]/u)*u)),t.fixMax||(i[1]=Jf(Math.ceil(i[1]/u)*u))},e.prototype.setNiceExtent=function(t,i){this._niceExtent=[t,i]},e.type="interval",e}(vh);vh.registerClass(U7);var Nd=U7,j7=typeof Float32Array!="undefined",C0e=j7?Float32Array:Array;function Xu(r){return Nt(r)?j7?new Float32Array(r):r:new C0e(r)}var ND="__ec_stack_";function mk(r){return r.get("stack")||ND+r.seriesIndex}function gk(r){return r.dim+r.index}function I0e(r){var e=[],t=r.axis,i="axis0";if(t.type==="category"){for(var n=t.getBandWidth(),s=0;s<r.count;s++)e.push(zr({bandWidth:n,axisKey:i,stackId:ND+s},r));for(var u=q7(e),a=[],s=0;s<r.count;s++){var h=u[i][ND+s];h.offsetCenter=h.offset+h.width/2,a.push(h)}return a}}function H7(r,e){var t=[];return e.eachSeriesByType(r,function(i){Y7(i)&&t.push(i)}),t}function E0e(r){var e={};ue(r,function(h){var p=h.coordinateSystem,m=p.getBaseAxis();if(!(m.type!=="time"&&m.type!=="value"))for(var v=h.getData(),x=m.dim+"_"+m.index,w=v.getDimensionIndex(v.mapDimension(m.dim)),T=v.getStore(),C=0,I=T.count();C<I;++C){var k=T.get(w,C);e[x]?e[x].push(k):e[x]=[k]}});var t={};for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];if(n){n.sort(function(h,p){return h-p});for(var s=null,u=1;u<n.length;++u){var a=n[u]-n[u-1];a>0&&(s=s===null?a:Math.min(s,a))}t[i]=s}}return t}function W7(r){var e=E0e(r),t=[];return ue(r,function(i){var n=i.coordinateSystem,s=n.getBaseAxis(),u=s.getExtent(),a;if(s.type==="category")a=s.getBandWidth();else if(s.type==="value"||s.type==="time"){var h=s.dim+"_"+s.index,p=e[h],m=Math.abs(u[1]-u[0]),v=s.scale.getExtent(),x=Math.abs(v[1]-v[0]);a=p?m/x*p:m}else{var w=i.getData();a=Math.abs(u[1]-u[0])/w.count()}var T=sr(i.get("barWidth"),a),C=sr(i.get("barMaxWidth"),a),I=sr(i.get("barMinWidth")||(K7(i)?.5:1),a),k=i.get("barGap"),R=i.get("barCategoryGap");t.push({bandWidth:a,barWidth:T,barMaxWidth:C,barMinWidth:I,barGap:k,barCategoryGap:R,axisKey:gk(s),stackId:mk(i)})}),q7(t)}function q7(r){var e={};ue(r,function(i,n){var s=i.axisKey,u=i.bandWidth,a=e[s]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},h=a.stacks;e[s]=a;var p=i.stackId;h[p]||a.autoWidthCount++,h[p]=h[p]||{width:0,maxWidth:0};var m=i.barWidth;m&&!h[p].width&&(h[p].width=m,m=Math.min(a.remainedWidth,m),a.remainedWidth-=m);var v=i.barMaxWidth;v&&(h[p].maxWidth=v);var x=i.barMinWidth;x&&(h[p].minWidth=x);var w=i.barGap;w!=null&&(a.gap=w);var T=i.barCategoryGap;T!=null&&(a.categoryGap=T)});var t={};return ue(e,function(i,n){t[n]={};var s=i.stacks,u=i.bandWidth,a=i.categoryGap;if(a==null){var h=bi(s).length;a=Math.max(35-h*4,15)+"%"}var p=sr(a,u),m=sr(i.gap,1),v=i.remainedWidth,x=i.autoWidthCount,w=(v-p)/(x+(x-1)*m);w=Math.max(w,0),ue(s,function(k){var R=k.maxWidth,z=k.minWidth;if(k.width){var $=k.width;R&&($=Math.min($,R)),z&&($=Math.max($,z)),k.width=$,v-=$+m*$,x--}else{var $=w;R&&R<$&&($=Math.min(R,v)),z&&z>$&&($=z),$!==w&&(k.width=$,v-=$+m*$,x--)}}),w=(v-p)/(x+(x-1)*m),w=Math.max(w,0);var T=0,C;ue(s,function(k,R){k.width||(k.width=w),C=k,T+=k.width*(1+m)}),C&&(T-=C.width*m);var I=-T/2;ue(s,function(k,R){t[n][R]=t[n][R]||{bandWidth:u,offset:I,width:k.width},I+=k.width*(1+m)})}),t}function D0e(r,e,t){if(r&&e){var i=r[gk(e)];return i!=null&&t!=null?i[mk(t)]:i}}function Z7(r,e){var t=H7(r,e),i=W7(t);ue(t,function(n){var s=n.getData(),u=n.coordinateSystem,a=u.getBaseAxis(),h=mk(n),p=i[gk(a)][h],m=p.offset,v=p.width;s.setLayout({bandWidth:p.bandWidth,offset:m,size:v})})}function X7(r){return{seriesType:r,plan:Fv(),reset:function(e){if(!!Y7(e)){var t=e.getData(),i=e.coordinateSystem,n=i.getBaseAxis(),s=i.getOtherAxis(n),u=t.getDimensionIndex(t.mapDimension(s.dim)),a=t.getDimensionIndex(t.mapDimension(n.dim)),h=e.get("showBackground",!0),p=t.mapDimension(s.dim),m=t.getCalculationInfo("stackResultDimension"),v=Fd(t,p)&&!!t.getCalculationInfo("stackedOnSeries"),x=s.isHorizontal(),w=P0e(n,s),T=K7(e),C=e.get("barMinHeight")||0,I=m&&t.getDimensionIndex(m),k=t.getLayout("size"),R=t.getLayout("offset");return{progress:function(z,$){for(var j=z.count,G=T&&Xu(j*3),Y=T&&h&&Xu(j*3),Z=T&&Xu(j),H=i.master.getRect(),re=x?H.width:H.height,ne,se=$.getStore(),me=0;(ne=z.next())!=null;){var Se=se.get(v?I:u,ne),Ie=se.get(a,ne),ke=w,Fe=void 0;v&&(Fe=+Se-se.get(u,ne));var Ce=void 0,We=void 0,gt=void 0,St=void 0;if(x){var et=i.dataToPoint([Se,Ie]);if(v){var ht=i.dataToPoint([Fe,Ie]);ke=ht[0]}Ce=ke,We=et[1]+R,gt=et[0]-ke,St=k,Math.abs(gt)<C&&(gt=(gt<0?-1:1)*C)}else{var et=i.dataToPoint([Ie,Se]);if(v){var ht=i.dataToPoint([Ie,Fe]);ke=ht[1]}Ce=et[0]+R,We=ke,gt=k,St=et[1]-ke,Math.abs(St)<C&&(St=(St<=0?-1:1)*C)}T?(G[me]=Ce,G[me+1]=We,G[me+2]=x?gt:St,Y&&(Y[me]=x?H.x:Ce,Y[me+1]=x?We:H.y,Y[me+2]=re),Z[ne]=ne):$.setItemLayout(ne,{x:Ce,y:We,width:gt,height:St}),me+=3}T&&$.setLayout({largePoints:G,largeDataIndices:Z,largeBackgroundPoints:Y,valueAxisHorizontal:x})}}}}}}function Y7(r){return r.coordinateSystem&&r.coordinateSystem.type==="cartesian2d"}function K7(r){return r.pipelineContext&&r.pipelineContext.large}function P0e(r,e){return e.toGlobalCoord(e.dataToCoord(e.type==="log"?1:0))}var L0e=function(r,e,t,i){for(;t<i;){var n=t+i>>>1;r[n][1]<e?t=n+1:i=n}return t},J7=function(r){lt(e,r);function e(t){var i=r.call(this,t)||this;return i.type="time",i}return e.prototype.getLabel=function(t){var i=this.getSetting("useUTC");return YT(t.value,I4[rve(Xg(this._minLevelUnit))]||I4.second,i,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,i,n){var s=this.getSetting("useUTC"),u=this.getSetting("locale");return ive(t,i,n,u,s)},e.prototype.getTicks=function(){var t=this._interval,i=this._extent,n=[];if(!t)return n;n.push({value:i[0],level:0});var s=this.getSetting("useUTC"),u=N0e(this._minLevelUnit,this._approxInterval,s,i);return n=n.concat(u),n.push({value:i[1],level:0}),n},e.prototype.calcNiceExtent=function(t){var i=this._extent;if(i[0]===i[1]&&(i[0]-=fl,i[1]+=fl),i[1]===-1/0&&i[0]===1/0){var n=new Date;i[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),i[0]=i[1]-fl}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,i,n){t=t||10;var s=this._extent,u=s[1]-s[0];this._approxInterval=u/t,i!=null&&this._approxInterval<i&&(this._approxInterval=i),n!=null&&this._approxInterval>n&&(this._approxInterval=n);var a=sw.length,h=Math.min(L0e(sw,this._approxInterval,0,a),a-1);this._interval=sw[h][1],this._minLevelUnit=sw[Math.max(h-1,0)][0]},e.prototype.parse=function(t){return Vi(t)?t:+oc(t)},e.prototype.contain=function(t){return o2(this.parse(t),this._extent)},e.prototype.normalize=function(t){return s2(this.parse(t),this._extent)},e.prototype.scale=function(t){return l2(t,this._extent)},e.type="time",e}(Nd),sw=[["second",WL],["minute",qL],["hour",b0],["quarter-day",b0*6],["half-day",b0*12],["day",fl*1.2],["half-week",fl*3.5],["week",fl*7],["month",fl*31],["quarter",fl*95],["half-year",C4/2],["year",C4]];function k0e(r,e,t,i){var n=oc(e),s=oc(t),u=function(T){return E4(n,T,i)===E4(s,T,i)},a=function(){return u("year")},h=function(){return a()&&u("month")},p=function(){return h()&&u("day")},m=function(){return p()&&u("hour")},v=function(){return m()&&u("minute")},x=function(){return v()&&u("second")},w=function(){return x()&&u("millisecond")};switch(r){case"year":return a();case"month":return h();case"day":return p();case"hour":return m();case"minute":return v();case"second":return x();case"millisecond":return w()}}function R0e(r,e){return r/=fl,r>16?16:r>7.5?7:r>3.5?4:r>1.5?2:1}function O0e(r){var e=30*fl;return r/=e,r>6?6:r>3?3:r>2?2:1}function z0e(r){return r/=b0,r>12?12:r>6?6:r>3.5?4:r>2?2:1}function NN(r,e){return r/=e?qL:WL,r>30?30:r>20?20:r>15?15:r>10?10:r>5?5:r>2?2:1}function B0e(r){return Jj(r,!0)}function F0e(r,e,t){var i=new Date(r);switch(Xg(e)){case"year":case"month":i[hW(t)](0);case"day":i[dW(t)](1);case"hour":i[fW(t)](0);case"minute":i[pW(t)](0);case"second":i[mW(t)](0),i[gW(t)](0)}return i.getTime()}function N0e(r,e,t,i){var n=1e4,s=uW,u=0;function a(re,ne,se,me,Se,Ie,ke){for(var Fe=new Date(ne),Ce=ne,We=Fe[me]();Ce<se&&Ce<=i[1];)ke.push({value:Ce}),We+=re,Fe[Se](We),Ce=Fe.getTime();ke.push({value:Ce,notAdd:!0})}function h(re,ne,se){var me=[],Se=!ne.length;if(!k0e(Xg(re),i[0],i[1],t)){Se&&(ne=[{value:F0e(new Date(i[0]),re,t)},{value:i[1]}]);for(var Ie=0;Ie<ne.length-1;Ie++){var ke=ne[Ie].value,Fe=ne[Ie+1].value;if(ke!==Fe){var Ce=void 0,We=void 0,gt=void 0,St=!1;switch(re){case"year":Ce=Math.max(1,Math.round(e/fl/365)),We=ZL(t),gt=nve(t);break;case"half-year":case"quarter":case"month":Ce=O0e(e),We=Yg(t),gt=hW(t);break;case"week":case"half-week":case"day":Ce=R0e(e),We=KT(t),gt=dW(t),St=!0;break;case"half-day":case"quarter-day":case"hour":Ce=z0e(e),We=W0(t),gt=fW(t);break;case"minute":Ce=NN(e,!0),We=JT(t),gt=pW(t);break;case"second":Ce=NN(e,!1),We=QT(t),gt=mW(t);break;case"millisecond":Ce=B0e(e),We=e2(t),gt=gW(t);break}a(Ce,ke,Fe,We,gt,St,me),re==="year"&&se.length>1&&Ie===0&&se.unshift({value:se[0].value-Ce})}}for(var Ie=0;Ie<me.length;Ie++)se.push(me[Ie]);return me}}for(var p=[],m=[],v=0,x=0,w=0;w<s.length&&u++<n;++w){var T=Xg(s[w]);if(!!tve(s[w])){h(s[w],p[p.length-1]||[],m);var C=s[w+1]?Xg(s[w+1]):null;if(T!==C){if(m.length){x=v,m.sort(function(re,ne){return re.value-ne.value});for(var I=[],k=0;k<m.length;++k){var R=m[k].value;(k===0||m[k-1].value!==R)&&(I.push(m[k]),R>=i[0]&&R<=i[1]&&v++)}var z=(i[1]-i[0])/e;if(v>z*1.5&&x>z/1.5||(p.push(I),v>z||r===s[w]))break}m=[]}}}for(var $=un(Ht(p,function(re){return un(re,function(ne){return ne.value>=i[0]&&ne.value<=i[1]&&!ne.notAdd})}),function(re){return re.length>0}),j=[],G=$.length-1,w=0;w<$.length;++w)for(var Y=$[w],Z=0;Z<Y.length;++Z)j.push({value:Y[Z].value,level:G-w});j.sort(function(re,ne){return re.value-ne.value});for(var H=[],w=0;w<j.length;++w)(w===0||j[w].value!==j[w-1].value)&&H.push(j[w]);return H}vh.registerClass(J7);var Q7=J7,VN=vh.prototype,M0=Nd.prototype,V0e=ra,$0e=Math.floor,G0e=Math.ceil,lw=Math.pow,Ul=Math.log,vk=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new Nd,t._interval=0,t}return e.prototype.getTicks=function(t){var i=this._originalScale,n=this._extent,s=i.getExtent(),u=M0.getTicks.call(this,t);return Ht(u,function(a){var h=a.value,p=ra(lw(this.base,h));return p=h===n[0]&&this._fixMin?uw(p,s[0]):p,p=h===n[1]&&this._fixMax?uw(p,s[1]):p,{value:p}},this)},e.prototype.setExtent=function(t,i){var n=Ul(this.base);t=Ul(Math.max(0,t))/n,i=Ul(Math.max(0,i))/n,M0.setExtent.call(this,t,i)},e.prototype.getExtent=function(){var t=this.base,i=VN.getExtent.call(this);i[0]=lw(t,i[0]),i[1]=lw(t,i[1]);var n=this._originalScale,s=n.getExtent();return this._fixMin&&(i[0]=uw(i[0],s[0])),this._fixMax&&(i[1]=uw(i[1],s[1])),i},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var i=this.base;t[0]=Ul(t[0])/Ul(i),t[1]=Ul(t[1])/Ul(i),VN.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,i){this.unionExtent(t.getApproximateExtent(i))},e.prototype.calcNiceTicks=function(t){t=t||10;var i=this._extent,n=i[1]-i[0];if(!(n===1/0||n<=0)){var s=Ape(n),u=t/n*s;for(u<=.5&&(s*=10);!isNaN(s)&&Math.abs(s)<1&&Math.abs(s)>0;)s*=10;var a=[ra(G0e(i[0]/s)*s),ra($0e(i[1]/s)*s)];this._interval=s,this._niceExtent=a}},e.prototype.calcNiceExtent=function(t){M0.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return t=Ul(t)/Ul(this.base),o2(t,this._extent)},e.prototype.normalize=function(t){return t=Ul(t)/Ul(this.base),s2(t,this._extent)},e.prototype.scale=function(t){return t=l2(t,this._extent),lw(this.base,t)},e.type="log",e}(vh),eq=vk.prototype;eq.getMinorTicks=M0.getMinorTicks;eq.getLabel=M0.getLabel;function uw(r,e){return V0e(r,qu(e))}vh.registerClass(vk);var U0e=vk,j0e=function(){function r(e,t,i){this._prepareParams(e,t,i)}return r.prototype._prepareParams=function(e,t,i){i[1]<i[0]&&(i=[NaN,NaN]),this._dataMin=i[0],this._dataMax=i[1];var n=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var s=this._modelMinRaw=t.get("min",!0);kr(s)?this._modelMinNum=cw(e,s({min:i[0],max:i[1]})):s!=="dataMin"&&(this._modelMinNum=cw(e,s));var u=this._modelMaxRaw=t.get("max",!0);if(kr(u)?this._modelMaxNum=cw(e,u({min:i[0],max:i[1]})):u!=="dataMax"&&(this._modelMaxNum=cw(e,u)),n)this._axisDataLen=t.getCategories().length;else{var a=t.get("boundaryGap"),h=Nt(a)?a:[a||0,a||0];typeof h[0]=="boolean"||typeof h[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[iu(h[0],1),iu(h[1],1)]}},r.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,i=this._dataMax,n=this._axisDataLen,s=this._boundaryGapInner,u=e?null:i-t||Math.abs(t),a=this._modelMinRaw==="dataMin"?t:this._modelMinNum,h=this._modelMaxRaw==="dataMax"?i:this._modelMaxNum,p=a!=null,m=h!=null;a==null&&(a=e?n?0:NaN:t-s[0]*u),h==null&&(h=e?n?n-1:NaN:i+s[1]*u),(a==null||!isFinite(a))&&(a=NaN),(h==null||!isFinite(h))&&(h=NaN);var v=z0(a)||z0(h)||e&&!n;this._needCrossZero&&(a>0&&h>0&&!p&&(a=0),a<0&&h<0&&!m&&(h=0));var x=this._determinedMin,w=this._determinedMax;return x!=null&&(a=x,p=!0),w!=null&&(h=w,m=!0),{min:a,max:h,minFixed:p,maxFixed:m,isBlank:v}},r.prototype.modifyDataMinMax=function(e,t){this[W0e[e]]=t},r.prototype.setDeterminedMinMax=function(e,t){var i=H0e[e];this[i]=t},r.prototype.freeze=function(){this.frozen=!0},r}(),H0e={min:"_determinedMin",max:"_determinedMax"},W0e={min:"_dataMin",max:"_dataMax"};function tq(r,e,t){var i=r.rawExtentInfo;return i||(i=new j0e(r,e,t),r.rawExtentInfo=i,i)}function cw(r,e){return e==null?null:z0(e)?NaN:r.parse(e)}function rq(r,e){var t=r.type,i=tq(r,e,r.getExtent()).calculate();r.setBlank(i.isBlank);var n=i.min,s=i.max,u=e.ecModel;if(u&&t==="time"){var a=H7("bar",u),h=!1;if(ue(a,function(v){h=h||v.getBaseAxis()===e.axis}),h){var p=W7(a),m=q0e(n,s,e,p);n=m.min,s=m.max}}return{extent:[n,s],fixMin:i.minFixed,fixMax:i.maxFixed}}function q0e(r,e,t,i){var n=t.axis.getExtent(),s=n[1]-n[0],u=D0e(i,t.axis);if(u===void 0)return{min:r,max:e};var a=1/0;ue(u,function(w){a=Math.min(w.offset,a)});var h=-1/0;ue(u,function(w){h=Math.max(w.offset+w.width,h)}),a=Math.abs(a),h=Math.abs(h);var p=a+h,m=e-r,v=1-(a+h)/s,x=m/v-m;return e+=x*(h/p),r-=x*(a/p),{min:r,max:e}}function dv(r,e){var t=e,i=rq(r,t),n=i.extent,s=t.get("splitNumber");r instanceof U0e&&(r.base=t.get("logBase"));var u=r.type,a=t.get("interval"),h=u==="interval"||u==="time";r.setExtent(n[0],n[1]),r.calcNiceExtent({splitNumber:s,fixMin:i.fixMin,fixMax:i.fixMax,minInterval:h?t.get("minInterval"):null,maxInterval:h?t.get("maxInterval"):null}),a!=null&&r.setInterval&&r.setInterval(a)}function u2(r,e){if(e=e||r.get("type"),e)switch(e){case"category":return new pk({ordinalMeta:r.getOrdinalMeta?r.getOrdinalMeta():r.getCategories(),extent:[1/0,-1/0]});case"time":return new Q7({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new(vh.getClass(e)||Nd)}}function Z0e(r){var e=r.scale.getExtent(),t=e[0],i=e[1];return!(t>0&&i>0||t<0&&i<0)}function Sx(r){var e=r.getLabelModel().get("formatter"),t=r.type==="category"?r.scale.getExtent()[0]:null;return r.scale.type==="time"?function(i){return function(n,s){return r.scale.getFormattedLabel(n,s,i)}}(e):gr(e)?function(i){return function(n){var s=r.scale.getLabel(n),u=i.replace("{value}",s!=null?s:"");return u}}(e):kr(e)?function(i){return function(n,s){return t!=null&&(s=n.value-t),i(_k(r,n),s,n.level!=null?{level:n.level}:null)}}(e):function(i){return r.scale.getLabel(i)}}function _k(r,e){return r.type==="category"?r.scale.getLabel(e):e.value}function X0e(r){var e=r.model,t=r.scale;if(!(!e.get(["axisLabel","show"])||t.isBlank())){var i,n,s=t.getExtent();t instanceof pk?n=t.count():(i=t.getTicks(),n=i.length);var u=r.getLabelModel(),a=Sx(r),h,p=1;n>40&&(p=Math.ceil(n/40));for(var m=0;m<n;m+=p){var v=i?i[m]:{value:s[0]+m},x=a(v,m),w=u.getTextRect(x),T=Y0e(w,u.get("rotate")||0);h?h.union(T):h=T}return h}}function Y0e(r,e){var t=e*Math.PI/180,i=r.width,n=r.height,s=i*Math.abs(Math.cos(t))+Math.abs(n*Math.sin(t)),u=i*Math.abs(Math.sin(t))+Math.abs(n*Math.cos(t)),a=new ai(r.x,r.y,s,u);return a}function yk(r){var e=r.get("interval");return e==null?"auto":e}function iq(r){return r.type==="category"&&yk(r.getLabelModel())===0}function GS(r,e){var t={};return ue(r.mapDimensionsAll(e),function(i){t[N7(r,i)]=!0}),bi(t)}function K0e(r,e,t){e&&ue(GS(e,t),function(i){var n=e.getApproximateExtent(i);n[0]<r[0]&&(r[0]=n[0]),n[1]>r[1]&&(r[1]=n[1])})}var Tx=function(){function r(){}return r.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},r.prototype.getCoordSysModel=function(){},r}(),J0e=1e-8;function $N(r,e){return Math.abs(r-e)<J0e}function gp(r,e,t){var i=0,n=r[0];if(!n)return!1;for(var s=1;s<r.length;s++){var u=r[s];i+=qc(n[0],n[1],u[0],u[1],e,t),n=u}var a=r[0];return(!$N(n[0],a[0])||!$N(n[1],a[1]))&&(i+=qc(n[0],n[1],a[0],a[1],e,t)),i!==0}var Q0e=[];function KC(r,e){for(var t=0;t<r.length;t++)Qa(r[t],r[t],e)}function GN(r,e,t,i){for(var n=0;n<r.length;n++){var s=r[n];i&&(s=i.project(s)),s&&isFinite(s[0])&&isFinite(s[1])&&(gd(e,e,s),vd(t,t,s))}}function exe(r){for(var e=0,t=0,i=0,n=r.length,s=r[n-1][0],u=r[n-1][1],a=0;a<n;a++){var h=r[a][0],p=r[a][1],m=s*p-h*u;e+=m,t+=(s+h)*m,i+=(u+p)*m,s=h,u=p}return e?[t/e/3,i/e/3,e]:[r[0][0]||0,r[0][1]||0]}var nq=function(){function r(e){this.name=e}return r.prototype.setCenter=function(e){this._center=e},r.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},r}(),UN=function(){function r(e,t){this.type="polygon",this.exterior=e,this.interiors=t}return r}(),jN=function(){function r(e){this.type="linestring",this.points=e}return r}(),aq=function(r){lt(e,r);function e(t,i,n){var s=r.call(this,t)||this;return s.type="geoJSON",s.geometries=i,s._center=n&&[n[0],n[1]],s}return e.prototype.calcCenter=function(){for(var t=this.geometries,i,n=0,s=0;s<t.length;s++){var u=t[s],a=u.exterior,h=a&&a.length;h>n&&(i=u,n=h)}if(i)return exe(i.exterior);var p=this.getBoundingRect();return[p.x+p.width/2,p.y+p.height/2]},e.prototype.getBoundingRect=function(t){var i=this._rect;if(i&&!t)return i;var n=[1/0,1/0],s=[-1/0,-1/0],u=this.geometries;return ue(u,function(a){a.type==="polygon"?GN(a.exterior,n,s,t):ue(a.points,function(h){GN(h,n,s,t)})}),isFinite(n[0])&&isFinite(n[1])&&isFinite(s[0])&&isFinite(s[1])||(n[0]=n[1]=s[0]=s[1]=0),i=new ai(n[0],n[1],s[0]-n[0],s[1]-n[1]),t||(this._rect=i),i},e.prototype.contain=function(t){var i=this.getBoundingRect(),n=this.geometries;if(!i.contain(t[0],t[1]))return!1;e:for(var s=0,u=n.length;s<u;s++){var a=n[s];if(a.type==="polygon"){var h=a.exterior,p=a.interiors;if(gp(h,t[0],t[1])){for(var m=0;m<(p?p.length:0);m++)if(gp(p[m],t[0],t[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(t,i,n,s){var u=this.getBoundingRect(),a=u.width/u.height;n?s||(s=n/a):n=a*s;for(var h=new ai(t,i,n,s),p=u.calculateTransform(h),m=this.geometries,v=0;v<m.length;v++){var x=m[v];x.type==="polygon"?(KC(x.exterior,p),ue(x.interiors,function(w){KC(w,p)})):ue(x.points,function(w){KC(w,p)})}u=this._rect,u.copy(h),this._center=[u.x+u.width/2,u.y+u.height/2]},e.prototype.cloneShallow=function(t){t==null&&(t=this.name);var i=new e(t,this.geometries,this._center);return i._rect=this._rect,i.transformTo=null,i},e}(nq),txe=function(r){lt(e,r);function e(t,i){var n=r.call(this,t)||this;return n.type="geoSVG",n._elOnlyForCalculate=i,n}return e.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,i=t.getBoundingRect(),n=[i.x+i.width/2,i.y+i.height/2],s=zT(Q0e),u=t;u&&!u.isGeoSVGGraphicRoot;)Qc(s,u.getLocalTransform(),s),u=u.parent;return Cv(s,s),Qa(n,n,s),n},e}(nq);function rxe(r){if(!r.UTF8Encoding)return r;var e=r,t=e.UTF8Scale;t==null&&(t=1024);var i=e.features;return ue(i,function(n){var s=n.geometry,u=s.encodeOffsets,a=s.coordinates;if(!!u)switch(s.type){case"LineString":s.coordinates=oq(a,u,t);break;case"Polygon":JC(a,u,t);break;case"MultiLineString":JC(a,u,t);break;case"MultiPolygon":ue(a,function(h,p){return JC(h,u[p],t)})}}),e.UTF8Encoding=!1,e}function JC(r,e,t){for(var i=0;i<r.length;i++)r[i]=oq(r[i],e[i],t)}function oq(r,e,t){for(var i=[],n=e[0],s=e[1],u=0;u<r.length;u+=2){var a=r.charCodeAt(u)-64,h=r.charCodeAt(u+1)-64;a=a>>1^-(a&1),h=h>>1^-(h&1),a+=n,h+=s,n=a,s=h,i.push([a/t,h/t])}return i}function ixe(r,e){return r=rxe(r),Ht(un(r.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var i=t.properties,n=t.geometry,s=[];switch(n.type){case"Polygon":var u=n.coordinates;s.push(new UN(u[0],u.slice(1)));break;case"MultiPolygon":ue(n.coordinates,function(h){h[0]&&s.push(new UN(h[0],h.slice(1)))});break;case"LineString":s.push(new jN([n.coordinates]));break;case"MultiLineString":s.push(new jN(n.coordinates))}var a=new aq(i[e||"name"],s,i.cp);return a.properties=i,a})}var J0=ki();function nxe(r){return r.type==="category"?oxe(r):lxe(r)}function axe(r,e){return r.type==="category"?sxe(r,e):{ticks:Ht(r.scale.getTicks(),function(t){return t.value})}}function oxe(r){var e=r.getLabelModel(),t=sq(r,e);return!e.get("show")||r.scale.isBlank()?{labels:[],labelCategoryInterval:t.labelCategoryInterval}:t}function sq(r,e){var t=lq(r,"labels"),i=yk(e),n=uq(t,i);if(n)return n;var s,u;return kr(i)?s=dq(r,i):(u=i==="auto"?uxe(r):i,s=hq(r,u)),cq(t,i,{labels:s,labelCategoryInterval:u})}function sxe(r,e){var t=lq(r,"ticks"),i=yk(e),n=uq(t,i);if(n)return n;var s,u;if((!e.get("show")||r.scale.isBlank())&&(s=[]),kr(i))s=dq(r,i,!0);else if(i==="auto"){var a=sq(r,r.getLabelModel());u=a.labelCategoryInterval,s=Ht(a.labels,function(h){return h.tickValue})}else u=i,s=hq(r,u,!0);return cq(t,i,{ticks:s,tickCategoryInterval:u})}function lxe(r){var e=r.scale.getTicks(),t=Sx(r);return{labels:Ht(e,function(i,n){return{level:i.level,formattedLabel:t(i,n),rawLabel:r.scale.getLabel(i),tickValue:i.value}})}}function lq(r,e){return J0(r)[e]||(J0(r)[e]=[])}function uq(r,e){for(var t=0;t<r.length;t++)if(r[t].key===e)return r[t].value}function cq(r,e,t){return r.push({key:e,value:t}),t}function uxe(r){var e=J0(r).autoInterval;return e!=null?e:J0(r).autoInterval=r.calculateCategoryInterval()}function cxe(r){var e=hxe(r),t=Sx(r),i=(e.axisRotate-e.labelRotate)/180*Math.PI,n=r.scale,s=n.getExtent(),u=n.count();if(s[1]-s[0]<1)return 0;var a=1;u>40&&(a=Math.max(1,Math.floor(u/40)));for(var h=s[0],p=r.dataToCoord(h+1)-r.dataToCoord(h),m=Math.abs(p*Math.cos(i)),v=Math.abs(p*Math.sin(i)),x=0,w=0;h<=s[1];h+=a){var T=0,C=0,I=fx(t({value:h}),e.font,"center","top");T=I.width*1.3,C=I.height*1.3,x=Math.max(x,T,7),w=Math.max(w,C,7)}var k=x/m,R=w/v;isNaN(k)&&(k=1/0),isNaN(R)&&(R=1/0);var z=Math.max(0,Math.floor(Math.min(k,R))),$=J0(r.model),j=r.getExtent(),G=$.lastAutoInterval,Y=$.lastTickCount;return G!=null&&Y!=null&&Math.abs(G-z)<=1&&Math.abs(Y-u)<=1&&G>z&&$.axisExtent0===j[0]&&$.axisExtent1===j[1]?z=G:($.lastTickCount=u,$.lastAutoInterval=z,$.axisExtent0=j[0],$.axisExtent1=j[1]),z}function hxe(r){var e=r.getLabelModel();return{axisRotate:r.getRotate?r.getRotate():r.isHorizontal&&!r.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function hq(r,e,t){var i=Sx(r),n=r.scale,s=n.getExtent(),u=r.getLabelModel(),a=[],h=Math.max((e||0)+1,1),p=s[0],m=n.count();p!==0&&h>1&&m/h>2&&(p=Math.round(Math.ceil(p/h)*h));var v=iq(r),x=u.get("showMinLabel")||v,w=u.get("showMaxLabel")||v;x&&p!==s[0]&&C(s[0]);for(var T=p;T<=s[1];T+=h)C(T);w&&T-h!==s[1]&&C(s[1]);function C(I){var k={value:I};a.push(t?I:{formattedLabel:i(k),rawLabel:n.getLabel(k),tickValue:I})}return a}function dq(r,e,t){var i=r.scale,n=Sx(r),s=[];return ue(i.getTicks(),function(u){var a=i.getLabel(u),h=u.value;e(u.value,a)&&s.push(t?h:{formattedLabel:n(u),rawLabel:a,tickValue:h})}),s}var HN=[0,1],dxe=function(){function r(e,t,i){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=i||[0,0]}return r.prototype.contain=function(e){var t=this._extent,i=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]);return e>=i&&e<=n},r.prototype.containData=function(e){return this.scale.contain(e)},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.getPixelPrecision=function(e){return Yj(e||this.scale.getExtent(),this._extent)},r.prototype.setExtent=function(e,t){var i=this._extent;i[0]=e,i[1]=t},r.prototype.dataToCoord=function(e,t){var i=this._extent,n=this.scale;return e=n.normalize(e),this.onBand&&n.type==="ordinal"&&(i=i.slice(),WN(i,n.count())),on(e,HN,i,t)},r.prototype.coordToData=function(e,t){var i=this._extent,n=this.scale;this.onBand&&n.type==="ordinal"&&(i=i.slice(),WN(i,n.count()));var s=on(e,i,HN,t);return this.scale.scale(s)},r.prototype.pointToData=function(e,t){},r.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),i=axe(this,t),n=i.ticks,s=Ht(n,function(a){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(a):a),tickValue:a}},this),u=t.get("alignWithLabel");return fxe(this,s,u,e.clamp),s},r.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var i=this.scale.getMinorTicks(t),n=Ht(i,function(s){return Ht(s,function(u){return{coord:this.dataToCoord(u),tickValue:u}},this)},this);return n},r.prototype.getViewLabels=function(){return nxe(this).labels},r.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},r.prototype.getTickModel=function(){return this.model.getModel("axisTick")},r.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),i=t[1]-t[0]+(this.onBand?1:0);i===0&&(i=1);var n=Math.abs(e[1]-e[0]);return Math.abs(n)/i},r.prototype.calculateCategoryInterval=function(){return cxe(this)},r}();function WN(r,e){var t=r[1]-r[0],i=e,n=t/i/2;r[0]+=n,r[1]-=n}function fxe(r,e,t,i){var n=e.length;if(!r.onBand||t||!n)return;var s=r.getExtent(),u,a;if(n===1)e[0].coord=s[0],u=e[1]={coord:s[1]};else{var h=e[n-1].tickValue-e[0].tickValue,p=(e[n-1].coord-e[0].coord)/h;ue(e,function(w){w.coord-=p/2});var m=r.scale.getExtent();a=1+m[1]-e[n-1].tickValue,u={coord:e[n-1].coord+p*a},e.push(u)}var v=s[0]>s[1];x(e[0].coord,s[0])&&(i?e[0].coord=s[0]:e.shift()),i&&x(s[0],e[0].coord)&&e.unshift({coord:s[0]}),x(s[1],u.coord)&&(i?u.coord=s[1]:e.pop()),i&&x(u.coord,s[1])&&e.push({coord:s[1]});function x(w,T){return w=ra(w),T=ra(T),v?w>T:w<T}}var lu=dxe,Py=Math.PI*2,Qf=sc.CMD,pxe=["top","right","bottom","left"];function mxe(r,e,t,i,n){var s=t.width,u=t.height;switch(r){case"top":i.set(t.x+s/2,t.y-e),n.set(0,-1);break;case"bottom":i.set(t.x+s/2,t.y+u+e),n.set(0,1);break;case"left":i.set(t.x-e,t.y+u/2),n.set(-1,0);break;case"right":i.set(t.x+s+e,t.y+u/2),n.set(1,0);break}}function gxe(r,e,t,i,n,s,u,a,h){u-=r,a-=e;var p=Math.sqrt(u*u+a*a);u/=p,a/=p;var m=u*t+r,v=a*t+e;if(Math.abs(i-n)%Py<1e-4)return h[0]=m,h[1]=v,p-t;if(s){var x=i;i=Ls(n),n=Ls(x)}else i=Ls(i),n=Ls(n);i>n&&(n+=Py);var w=Math.atan2(a,u);if(w<0&&(w+=Py),w>=i&&w<=n||w+Py>=i&&w+Py<=n)return h[0]=m,h[1]=v,p-t;var T=t*Math.cos(i)+r,C=t*Math.sin(i)+e,I=t*Math.cos(n)+r,k=t*Math.sin(n)+e,R=(T-u)*(T-u)+(C-a)*(C-a),z=(I-u)*(I-u)+(k-a)*(k-a);return R<z?(h[0]=T,h[1]=C,Math.sqrt(R)):(h[0]=I,h[1]=k,Math.sqrt(z))}function US(r,e,t,i,n,s,u,a){var h=n-r,p=s-e,m=t-r,v=i-e,x=Math.sqrt(m*m+v*v);m/=x,v/=x;var w=h*m+p*v,T=w/x;a&&(T=Math.min(Math.max(T,0),1)),T*=x;var C=u[0]=r+T*m,I=u[1]=e+T*v;return Math.sqrt((C-n)*(C-n)+(I-s)*(I-s))}function fq(r,e,t,i,n,s,u){t<0&&(r=r+t,t=-t),i<0&&(e=e+i,i=-i);var a=r+t,h=e+i,p=u[0]=Math.min(Math.max(n,r),a),m=u[1]=Math.min(Math.max(s,e),h);return Math.sqrt((p-n)*(p-n)+(m-s)*(m-s))}var ql=[];function vxe(r,e,t){var i=fq(e.x,e.y,e.width,e.height,r.x,r.y,ql);return t.set(ql[0],ql[1]),i}function _xe(r,e,t){for(var i=0,n=0,s=0,u=0,a,h,p=1/0,m=e.data,v=r.x,x=r.y,w=0;w<m.length;){var T=m[w++];w===1&&(i=m[w],n=m[w+1],s=i,u=n);var C=p;switch(T){case Qf.M:s=m[w++],u=m[w++],i=s,n=u;break;case Qf.L:C=US(i,n,m[w],m[w+1],v,x,ql,!0),i=m[w++],n=m[w++];break;case Qf.C:C=Dj(i,n,m[w++],m[w++],m[w++],m[w++],m[w],m[w+1],v,x,ql),i=m[w++],n=m[w++];break;case Qf.Q:C=Lj(i,n,m[w++],m[w++],m[w],m[w+1],v,x,ql),i=m[w++],n=m[w++];break;case Qf.A:var I=m[w++],k=m[w++],R=m[w++],z=m[w++],$=m[w++],j=m[w++];w+=1;var G=!!(1-m[w++]);a=Math.cos($)*R+I,h=Math.sin($)*z+k,w<=1&&(s=a,u=h);var Y=(v-I)*z/R+I;C=gxe(I,k,z,$,$+j,G,Y,x,ql),i=Math.cos($+j)*R+I,n=Math.sin($+j)*z+k;break;case Qf.R:s=i=m[w++],u=n=m[w++];var Z=m[w++],H=m[w++];C=fq(s,u,Z,H,v,x,ql);break;case Qf.Z:C=US(i,n,s,u,v,x,ql,!0),i=s,n=u;break}C<p&&(p=C,t.set(ql[0],ql[1]))}return p}var Jl=new ii,Tn=new ii,na=new ii,Yu=new ii,Wu=new ii;function qN(r,e){if(!!r){var t=r.getTextGuideLine(),i=r.getTextContent();if(!!(i&&t)){var n=r.textGuideLineConfig||{},s=[[0,0],[0,0],[0,0]],u=n.candidates||pxe,a=i.getBoundingRect().clone();a.applyTransform(i.getComputedTransform());var h=1/0,p=n.anchor,m=r.getComputedTransform(),v=m&&Cv([],m),x=e.get("length2")||0;p&&na.copy(p);for(var w=0;w<u.length;w++){var T=u[w];mxe(T,0,a,Jl,Yu),ii.scaleAndAdd(Tn,Jl,Yu,x),Tn.transform(v);var C=r.getBoundingRect(),I=p?p.distance(Tn):r instanceof _i?_xe(Tn,r.path,na):vxe(Tn,C,na);I<h&&(h=I,Tn.transform(m),na.transform(m),na.toArray(s[0]),Tn.toArray(s[1]),Jl.toArray(s[2]))}pq(s,e.get("minTurnAngle")),t.setShape({points:s})}}}var jS=[],Oo=new ii;function pq(r,e){if(e<=180&&e>0){e=e/180*Math.PI,Jl.fromArray(r[0]),Tn.fromArray(r[1]),na.fromArray(r[2]),ii.sub(Yu,Jl,Tn),ii.sub(Wu,na,Tn);var t=Yu.len(),i=Wu.len();if(!(t<.001||i<.001)){Yu.scale(1/t),Wu.scale(1/i);var n=Yu.dot(Wu),s=Math.cos(e);if(s<n){var u=US(Tn.x,Tn.y,na.x,na.y,Jl.x,Jl.y,jS,!1);Oo.fromArray(jS),Oo.scaleAndAdd(Wu,u/Math.tan(Math.PI-e));var a=na.x!==Tn.x?(Oo.x-Tn.x)/(na.x-Tn.x):(Oo.y-Tn.y)/(na.y-Tn.y);if(isNaN(a))return;a<0?ii.copy(Oo,Tn):a>1&&ii.copy(Oo,na),Oo.toArray(r[1])}}}}function yxe(r,e,t){if(t<=180&&t>0){t=t/180*Math.PI,Jl.fromArray(r[0]),Tn.fromArray(r[1]),na.fromArray(r[2]),ii.sub(Yu,Tn,Jl),ii.sub(Wu,na,Tn);var i=Yu.len(),n=Wu.len();if(!(i<.001||n<.001)){Yu.scale(1/i),Wu.scale(1/n);var s=Yu.dot(e),u=Math.cos(t);if(s<u){var a=US(Tn.x,Tn.y,na.x,na.y,Jl.x,Jl.y,jS,!1);Oo.fromArray(jS);var h=Math.PI/2,p=Math.acos(Wu.dot(e)),m=h+p-t;if(m>=h)ii.copy(Oo,na);else{Oo.scaleAndAdd(Wu,a/Math.tan(Math.PI/2-m));var v=na.x!==Tn.x?(Oo.x-Tn.x)/(na.x-Tn.x):(Oo.y-Tn.y)/(na.y-Tn.y);if(isNaN(v))return;v<0?ii.copy(Oo,Tn):v>1&&ii.copy(Oo,na)}Oo.toArray(r[1])}}}}function QC(r,e,t,i){var n=t==="normal",s=n?r:r.ensureState(t);s.ignore=e;var u=i.get("smooth");u&&u===!0&&(u=.3),s.shape=s.shape||{},u>0&&(s.shape.smooth=u);var a=i.getModel("lineStyle").getLineStyle();n?r.useStyle(a):s.style=a}function xxe(r,e){var t=e.smooth,i=e.points;if(!!i)if(r.moveTo(i[0][0],i[0][1]),t>0&&i.length>=3){var n=md(i[0],i[1]),s=md(i[1],i[2]);if(!n||!s){r.lineTo(i[1][0],i[1][1]),r.lineTo(i[2][0],i[2][1]);return}var u=Math.min(n,s)*t,a=Uw([],i[1],i[0],u/n),h=Uw([],i[1],i[2],u/s),p=Uw([],a,h,.5);r.bezierCurveTo(a[0],a[1],a[0],a[1],p[0],p[1]),r.bezierCurveTo(h[0],h[1],h[0],h[1],i[2][0],i[2][1])}else for(var m=1;m<i.length;m++)r.lineTo(i[m][0],i[m][1])}function xk(r,e,t){var i=r.getTextGuideLine(),n=r.getTextContent();if(!n){i&&r.removeTextGuideLine();return}for(var s=e.normal,u=s.get("show"),a=n.ignore,h=0;h<U0.length;h++){var p=U0[h],m=e[p],v=p==="normal";if(m){var x=m.get("show"),w=v?a:Yr(n.states[p]&&n.states[p].ignore,a);if(w||!Yr(x,u)){var T=v?i:i&&i.states[p];T&&(T.ignore=!0),i&&QC(i,!0,p,m);continue}i||(i=new ds,r.setTextGuideLine(i),!v&&(a||!u)&&QC(i,!0,"normal",e.normal),r.stateProxy&&(i.stateProxy=r.stateProxy)),QC(i,!1,p,m)}}if(i){zr(i.style,t),i.style.fill=null;var C=s.get("showAbove"),I=r.textGuideLineConfig=r.textGuideLineConfig||{};I.showAbove=C||!1,i.buildPath=xxe}}function bk(r,e){e=e||"labelLine";for(var t={normal:r.getModel(e)},i=0;i<$o.length;i++){var n=$o[i];t[n]=r.getModel([n,e])}return t}function mq(r){for(var e=[],t=0;t<r.length;t++){var i=r[t];if(!i.defaultAttr.ignore){var n=i.label,s=n.getComputedTransform(),u=n.getBoundingRect(),a=!s||s[1]<1e-5&&s[2]<1e-5,h=n.style.margin||0,p=u.clone();p.applyTransform(s),p.x-=h/2,p.y-=h/2,p.width+=h,p.height+=h;var m=a?new IS(u,s):null;e.push({label:n,labelLine:i.labelLine,rect:p,localRect:u,obb:m,priority:i.priority,defaultAttr:i.defaultAttr,layoutOption:i.computedLayoutOption,axisAligned:a,transform:s})}}return e}function gq(r,e,t,i,n,s){var u=r.length;if(u<2)return;r.sort(function(Z,H){return Z.rect[e]-H.rect[e]});for(var a=0,h,p=!1,m=0,v=0;v<u;v++){var x=r[v],w=x.rect;h=w[e]-a,h<0&&(w[e]-=h,x.label[e]-=h,p=!0);var T=Math.max(-h,0);m+=T,a=w[e]+w[t]}m>0&&s&&j(-m/u,0,u);var C=r[0],I=r[u-1],k,R;z(),k<0&&G(-k,.8),R<0&&G(R,.8),z(),$(k,R,1),$(R,k,-1),z(),k<0&&Y(-k),R<0&&Y(R);function z(){k=C.rect[e]-i,R=n-I.rect[e]-I.rect[t]}function $(Z,H,re){if(Z<0){var ne=Math.min(H,-Z);if(ne>0){j(ne*re,0,u);var se=ne+Z;se<0&&G(-se*re,1)}else G(-Z*re,1)}}function j(Z,H,re){Z!==0&&(p=!0);for(var ne=H;ne<re;ne++){var se=r[ne],me=se.rect;me[e]+=Z,se.label[e]+=Z}}function G(Z,H){for(var re=[],ne=0,se=1;se<u;se++){var me=r[se-1].rect,Se=Math.max(r[se].rect[e]-me[e]-me[t],0);re.push(Se),ne+=Se}if(!!ne){var Ie=Math.min(Math.abs(Z)/ne,H);if(Z>0)for(var se=0;se<u-1;se++){var ke=re[se]*Ie;j(ke,0,se+1)}else for(var se=u-1;se>0;se--){var ke=re[se-1]*Ie;j(-ke,se,u)}}}function Y(Z){var H=Z<0?-1:1;Z=Math.abs(Z);for(var re=Math.ceil(Z/(u-1)),ne=0;ne<u-1;ne++)if(H>0?j(re,0,ne+1):j(-re,u-ne-1,u),Z-=re,Z<=0)return}return p}function bxe(r,e,t,i){return gq(r,"x","width",e,t,i)}function vq(r,e,t,i){return gq(r,"y","height",e,t,i)}function _q(r){var e=[];r.sort(function(C,I){return I.priority-C.priority});var t=new ai(0,0,0,0);function i(C){if(!C.ignore){var I=C.ensureState("emphasis");I.ignore==null&&(I.ignore=!1)}C.ignore=!0}for(var n=0;n<r.length;n++){var s=r[n],u=s.axisAligned,a=s.localRect,h=s.transform,p=s.label,m=s.labelLine;t.copy(s.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var v=s.obb,x=!1,w=0;w<e.length;w++){var T=e[w];if(!!t.intersect(T.rect)){if(u&&T.axisAligned){x=!0;break}if(T.obb||(T.obb=new IS(T.localRect,T.transform)),v||(v=new IS(a,h)),v.intersect(T.obb)){x=!0;break}}}x?(i(p),m&&i(m)):(p.attr("ignore",s.defaultAttr.ignore),m&&m.attr("ignore",s.defaultAttr.labelGuideIgnore),e.push(s))}}function wxe(r){if(r){for(var e=[],t=0;t<r.length;t++)e.push(r[t].slice());return e}}function Sxe(r,e){var t=r.label,i=e&&e.getTextGuideLine();return{dataIndex:r.dataIndex,dataType:r.dataType,seriesIndex:r.seriesModel.seriesIndex,text:r.label.style.text,rect:r.hostRect,labelRect:r.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:wxe(i&&i.shape.points)}}var ZN=["align","verticalAlign","width","height","fontSize"],Do=new Xc,eI=ki(),Txe=ki();function hw(r,e,t){for(var i=0;i<t.length;i++){var n=t[i];e[n]!=null&&(r[n]=e[n])}}var dw=["x","y","rotation"],Mxe=function(){function r(){this._labelList=[],this._chartViewList=[]}return r.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},r.prototype._addLabel=function(e,t,i,n,s){var u=n.style,a=n.__hostTarget,h=a.textConfig||{},p=n.getComputedTransform(),m=n.getBoundingRect().plain();ai.applyTransform(m,m,p),p?Do.setLocalTransform(p):(Do.x=Do.y=Do.rotation=Do.originX=Do.originY=0,Do.scaleX=Do.scaleY=1),Do.rotation=Ls(Do.rotation);var v=n.__hostTarget,x;if(v){x=v.getBoundingRect().plain();var w=v.getComputedTransform();ai.applyTransform(x,x,w)}var T=x&&v.getTextGuideLine();this._labelList.push({label:n,labelLine:T,seriesModel:i,dataIndex:e,dataType:t,layoutOption:s,computedLayoutOption:null,rect:m,hostRect:x,priority:x?x.width*x.height:0,defaultAttr:{ignore:n.ignore,labelGuideIgnore:T&&T.ignore,x:Do.x,y:Do.y,scaleX:Do.scaleX,scaleY:Do.scaleY,rotation:Do.rotation,style:{x:u.x,y:u.y,align:u.align,verticalAlign:u.verticalAlign,width:u.width,height:u.height,fontSize:u.fontSize},cursor:n.cursor,attachedPos:h.position,attachedRot:h.rotation}})},r.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var i=e.__model,n=i.get("labelLayout");!(kr(n)||bi(n).length)||e.group.traverse(function(s){if(s.ignore)return!0;var u=s.getTextContent(),a=Gr(s);u&&!u.disableLabelLayout&&t._addLabel(a.dataIndex,a.dataType,i,u,n)})},r.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),i=e.getHeight();function n(z,$){return function(){qN(z,$)}}for(var s=0;s<this._labelList.length;s++){var u=this._labelList[s],a=u.label,h=a.__hostTarget,p=u.defaultAttr,m=void 0;kr(u.layoutOption)?m=u.layoutOption(Sxe(u,h)):m=u.layoutOption,m=m||{},u.computedLayoutOption=m;var v=Math.PI/180;h&&h.setTextConfig({local:!1,position:m.x!=null||m.y!=null?null:p.attachedPos,rotation:m.rotate!=null?m.rotate*v:p.attachedRot,offset:[m.dx||0,m.dy||0]});var x=!1;if(m.x!=null?(a.x=sr(m.x,t),a.setStyle("x",0),x=!0):(a.x=p.x,a.setStyle("x",p.style.x)),m.y!=null?(a.y=sr(m.y,i),a.setStyle("y",0),x=!0):(a.y=p.y,a.setStyle("y",p.style.y)),m.labelLinePoints){var w=h.getTextGuideLine();w&&(w.setShape({points:m.labelLinePoints}),x=!1)}var T=eI(a);T.needsUpdateLabelLine=x,a.rotation=m.rotate!=null?m.rotate*v:p.rotation,a.scaleX=p.scaleX,a.scaleY=p.scaleY;for(var C=0;C<ZN.length;C++){var I=ZN[C];a.setStyle(I,m[I]!=null?m[I]:p.style[I])}if(m.draggable){if(a.draggable=!0,a.cursor="move",h){var k=u.seriesModel;if(u.dataIndex!=null){var R=u.seriesModel.getData(u.dataType);k=R.getItemModel(u.dataIndex)}a.on("drag",n(h,k.getModel("labelLine")))}}else a.off("drag"),a.cursor=p.cursor}},r.prototype.layout=function(e){var t=e.getWidth(),i=e.getHeight(),n=mq(this._labelList),s=un(n,function(h){return h.layoutOption.moveOverlap==="shiftX"}),u=un(n,function(h){return h.layoutOption.moveOverlap==="shiftY"});bxe(s,0,t),vq(u,0,i);var a=un(n,function(h){return h.layoutOption.hideOverlap});_q(a)},r.prototype.processLabelsOverall=function(){var e=this;ue(this._chartViewList,function(t){var i=t.__model,n=t.ignoreLabelLineUpdate,s=i.isAnimationEnabled();t.group.traverse(function(u){if(u.ignore&&!u.forceLabelAnimation)return!0;var a=!n,h=u.getTextContent();!a&&h&&(a=eI(h).needsUpdateLabelLine),a&&e._updateLabelLine(u,i),s&&e._animateLabels(u,i)})})},r.prototype._updateLabelLine=function(e,t){var i=e.getTextContent(),n=Gr(e),s=n.dataIndex;if(i&&s!=null){var u=t.getData(n.dataType),a=u.getItemModel(s),h={},p=u.getItemVisual(s,"style");if(p){var m=u.getVisual("drawType");h.stroke=p[m]}var v=a.getModel("labelLine");xk(e,bk(a),h),qN(e,v)}},r.prototype._animateLabels=function(e,t){var i=e.getTextContent(),n=e.getTextGuideLine();if(i&&(e.forceLabelAnimation||!i.ignore&&!i.invisible&&!e.disableLabelAnimation&&!qg(e))){var s=eI(i),u=s.oldLayout,a=Gr(e),h=a.dataIndex,p={x:i.x,y:i.y,rotation:i.rotation},m=t.getData(a.dataType);if(u){i.attr(u);var x=e.prevStates;x&&(di(x,"select")>=0&&i.attr(s.oldLayoutSelect),di(x,"emphasis")>=0&&i.attr(s.oldLayoutEmphasis)),ji(i,p,t,h)}else if(i.attr(p),!Lv(i).valueAnimation){var v=Yr(i.style.opacity,1);i.style.opacity=0,Bn(i,{style:{opacity:v}},t,h)}if(s.oldLayout=p,i.states.select){var w=s.oldLayoutSelect={};hw(w,p,dw),hw(w,i.states.select,dw)}if(i.states.emphasis){var T=s.oldLayoutEmphasis={};hw(T,p,dw),hw(T,i.states.emphasis,dw)}nW(i,h,m,t,t)}if(n&&!n.ignore&&!n.invisible){var s=Txe(n),u=s.oldLayout,C={points:n.shape.points};u?(n.attr({shape:u}),ji(n,{shape:C},t)):(n.setShape(C),n.style.strokePercent=0,Bn(n,{style:{strokePercent:1}},t)),s.oldLayout=C}},r}(),Axe=Mxe,tI=ki();function Cxe(r){r.registerUpdateLifecycle("series:beforeupdate",function(e,t,i){var n=tI(t).labelManager;n||(n=tI(t).labelManager=new Axe),n.clearLabels()}),r.registerUpdateLifecycle("series:layoutlabels",function(e,t,i){var n=tI(t).labelManager;i.updatedSeries.forEach(function(s){n.addLabelsOfSeries(t.getViewOfSeriesModel(s))}),n.updateLayoutConfig(t),n.layout(t),n.processLabelsOverall()})}var rI=Math.sin,iI=Math.cos,yq=Math.PI,ep=Math.PI*2,Ixe=180/yq,Exe=function(){function r(){}return r.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},r.prototype.moveTo=function(e,t){this._add("M",e,t)},r.prototype.lineTo=function(e,t){this._add("L",e,t)},r.prototype.bezierCurveTo=function(e,t,i,n,s,u){this._add("C",e,t,i,n,s,u)},r.prototype.quadraticCurveTo=function(e,t,i,n){this._add("Q",e,t,i,n)},r.prototype.arc=function(e,t,i,n,s,u){this.ellipse(e,t,i,i,0,n,s,u)},r.prototype.ellipse=function(e,t,i,n,s,u,a,h){var p=a-u,m=!h,v=Math.abs(p),x=xd(v-ep)||(m?p>=ep:-p>=ep),w=p>0?p%ep:p%ep+ep,T=!1;x?T=!0:xd(v)?T=!1:T=w>=yq==!!m;var C=e+i*iI(u),I=t+n*rI(u);this._start&&this._add("M",C,I);var k=Math.round(s*Ixe);if(x){var R=1/this._p,z=(m?1:-1)*(ep-R);this._add("A",i,n,k,1,+m,e+i*iI(u+z),t+n*rI(u+z)),R>.01&&this._add("A",i,n,k,0,+m,C,I)}else{var $=e+i*iI(a),j=t+n*rI(a);this._add("A",i,n,k,+T,+m,$,j)}},r.prototype.rect=function(e,t,i,n){this._add("M",e,t),this._add("l",i,0),this._add("l",0,n),this._add("l",-i,0),this._add("Z")},r.prototype.closePath=function(){this._d.length>0&&this._add("Z")},r.prototype._add=function(e,t,i,n,s,u,a,h,p){for(var m=[],v=this._p,x=1;x<arguments.length;x++){var w=arguments[x];if(isNaN(w)){this._invalid=!0;return}m.push(Math.round(w*v)/v)}this._d.push(e+m.join(" ")),this._start=e==="Z"},r.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},r.prototype.getStr=function(){return this._str},r}(),xq=Exe,A0="none",Dxe=Math.round;function Pxe(r){var e=r.fill;return e!=null&&e!==A0}function Lxe(r){var e=r.stroke;return e!=null&&e!==A0}var VD=["lineCap","miterLimit","lineJoin"],kxe=Ht(VD,function(r){return"stroke-"+r.toLowerCase()});function Rxe(r,e,t,i){var n=e.opacity==null?1:e.opacity;if(t instanceof io){r("opacity",n);return}if(Pxe(e)){var s=N0(e.fill);r("fill",s.color);var u=e.fillOpacity!=null?e.fillOpacity*s.opacity*n:s.opacity*n;(i||u<1)&&r("fill-opacity",u)}else r("fill",A0);if(Lxe(e)){var a=N0(e.stroke);r("stroke",a.color);var h=e.strokeNoScale?t.getLineScale():1,p=h?(e.lineWidth||0)/h:0,m=e.strokeOpacity!=null?e.strokeOpacity*a.opacity*n:a.opacity*n,v=e.strokeFirst;if((i||p!==1)&&r("stroke-width",p),(i||v)&&r("paint-order",v?"stroke":"fill"),(i||m<1)&&r("stroke-opacity",m),e.lineDash){var x=lk(t),w=x[0],T=x[1];w&&(T=Dxe(T||0),r("stroke-dasharray",w.join(",")),(T||i)&&r("stroke-dashoffset",T))}else i&&r("stroke-dasharray",A0);for(var C=0;C<VD.length;C++){var I=VD[C];if(i||e[I]!==AS[I]){var k=e[I]||AS[I];k&&r(kxe[C],k)}}}else i&&r("stroke",A0)}var bq="http://www.w3.org/2000/svg",wq="http://www.w3.org/1999/xlink",Oxe="http://www.w3.org/2000/xmlns/",zxe="http://www.w3.org/XML/1998/namespace",XN="ecmeta_";function Sq(r){return document.createElementNS(bq,r)}function Pa(r,e,t,i,n){return{tag:r,attrs:t||{},children:i,text:n,key:e}}function Bxe(r,e){var t=[];if(e)for(var i in e){var n=e[i],s=i;n!==!1&&(n!==!0&&n!=null&&(s+='="'+n+'"'),t.push(s))}return"<"+r+" "+t.join(" ")+">"}function Fxe(r){return"</"+r+">"}function wk(r,e){e=e||{};var t=e.newline?`
`:"";function i(n){var s=n.children,u=n.tag,a=n.attrs,h=n.text;return Bxe(u,a)+(u!=="style"?as(h):h||"")+(s?""+t+Ht(s,function(p){return i(p)}).join(t)+t:"")+Fxe(u)}return i(r)}function Nxe(r,e,t){t=t||{};var i=t.newline?`
`:"",n=" {"+i,s=i+"}",u=Ht(bi(r),function(h){return h+n+Ht(bi(r[h]),function(p){return p+":"+r[h][p]+";"}).join(i)+s}).join(i),a=Ht(bi(e),function(h){return"@keyframes "+h+n+Ht(bi(e[h]),function(p){return p+n+Ht(bi(e[h][p]),function(m){var v=e[h][p][m];return m==="d"&&(v='path("'+v+'")'),m+":"+v+";"}).join(i)+s}).join(i)+s}).join(i);return!u&&!a?"":["<![CDATA[",u,a,"]]>"].join(i)}function $D(r){return{zrId:r,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function YN(r,e,t,i){return Pa("svg","root",{width:r,height:e,xmlns:bq,"xmlns:xlink":wq,version:"1.1",baseProfile:"full",viewBox:i?"0 0 "+r+" "+e:!1},t)}var Vxe=0;function Tq(){return Vxe++}var KN={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},sp="transform-origin";function $xe(r,e,t){var i=kt({},r.shape);kt(i,e),r.buildPath(t,i);var n=new xq;return n.reset(Nj(r)),t.rebuildPath(n,1),n.generateStr(),n.getStr()}function Gxe(r,e){var t=e.originX,i=e.originY;(t||i)&&(r[sp]=t+"px "+i+"px")}var Uxe={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Mq(r,e){var t=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[t]=r,t}function jxe(r,e,t){var i=r.shape.paths,n={},s,u;if(ue(i,function(h){var p=$D(t.zrId);p.animation=!0,c2(h,{},p,!0);var m=p.cssAnims,v=p.cssNodes,x=bi(m),w=x.length;if(!!w){u=x[w-1];var T=m[u];for(var C in T){var I=T[C];n[C]=n[C]||{d:""},n[C].d+=I.d||""}for(var k in v){var R=v[k].animation;R.indexOf(u)>=0&&(s=R)}}}),!!s){e.d=!1;var a=Mq(n,t);return s.replace(u,a)}}function JN(r){return gr(r)?KN[r]?"cubic-bezier("+KN[r]+")":wL(r)?r:"":""}function c2(r,e,t,i){var n=r.animators,s=n.length,u=[];if(r instanceof VL){var a=jxe(r,e,t);if(a)u.push(a);else if(!s)return}else if(!s)return;for(var h={},p=0;p<s;p++){var m=n[p],v=[m.getMaxTime()/1e3+"s"],x=JN(m.getClip().easing),w=m.getDelay();x?v.push(x):v.push("linear"),w&&v.push(w/1e3+"s"),m.getLoop()&&v.push("infinite");var T=v.join(" ");h[T]=h[T]||[T,[]],h[T][1].push(m)}function C(R){var z=R[1],$=z.length,j={},G={},Y={},Z="animation-timing-function";function H(vt,Pt,jt){for(var Et=vt.getTracks(),Wt=vt.getMaxTime(),Re=0;Re<Et.length;Re++){var Ve=Et[Re];if(Ve.needsAnimate()){var Ue=Ve.keyframes,Be=Ve.propName;if(jt&&(Be=jt(Be)),Be)for(var ce=0;ce<Ue.length;ce++){var ye=Ue[ce],De=Math.round(ye.time/Wt*100)+"%",qe=JN(ye.easing),Ze=ye.rawValue;(gr(Ze)||Vi(Ze))&&(Pt[De]=Pt[De]||{},Pt[De][Be]=ye.rawValue,qe&&(Pt[De][Z]=qe))}}}}for(var re=0;re<$;re++){var ne=z[re],se=ne.targetName;se?se==="shape"&&H(ne,G):!i&&H(ne,j)}for(var me in j){var Se={};jj(Se,r),kt(Se,j[me]);var Ie=Vj(Se),ke=j[me][Z];Y[me]=Ie?{transform:Ie}:{},Gxe(Y[me],Se),ke&&(Y[me][Z]=ke)}var Fe,Ce=!0;for(var me in G){Y[me]=Y[me]||{};var We=!Fe,ke=G[me][Z];We&&(Fe=new sc);var gt=Fe.len();Fe.reset(),Y[me].d=$xe(r,G[me],Fe);var St=Fe.len();if(!We&&gt!==St){Ce=!1;break}ke&&(Y[me][Z]=ke)}if(!Ce)for(var me in Y)delete Y[me].d;if(!i)for(var re=0;re<$;re++){var ne=z[re],se=ne.targetName;se==="style"&&H(ne,Y,function(Et){return Uxe[Et]})}for(var et=bi(Y),ht=!0,$e,re=1;re<et.length;re++){var He=et[re-1],dt=et[re];if(Y[He][sp]!==Y[dt][sp]){ht=!1;break}$e=Y[He][sp]}if(ht&&$e){for(var me in Y)Y[me][sp]&&delete Y[me][sp];e[sp]=$e}if(un(et,function(vt){return bi(Y[vt]).length>0}).length){var nt=Mq(Y,t);return nt+" "+R[0]+" both"}}for(var I in h){var a=C(h[I]);a&&u.push(a)}if(u.length){var k=t.zrId+"-cls-"+Tq();t.cssNodes["."+k]={animation:u.join(",")},e.class=k}}function Hxe(r,e,t){if(!r.ignore)if(r.isSilent()){var i={"pointer-events":"none"};QN(i,e,t,!0)}else{var n=r.states.emphasis&&r.states.emphasis.style?r.states.emphasis.style:{},s=n.fill;if(!s){var u=r.style&&r.style.fill,a=r.states.select&&r.states.select.style&&r.states.select.style.fill,h=r.currentStates.indexOf("select")>=0&&a||u;h&&(s=QE(h))}var p=n.lineWidth;if(p){var m=!n.strokeNoScale&&r.transform?r.transform[0]:1;p=p/m}var i={cursor:"pointer"};s&&(i.fill=s),n.stroke&&(i.stroke=n.stroke),p&&(i["stroke-width"]=p),QN(i,e,t,!0)}}function QN(r,e,t,i){var n=JSON.stringify(r),s=t.cssStyleCache[n];s||(s=t.zrId+"-cls-"+Tq(),t.cssStyleCache[n]=s,t.cssNodes["."+s+(i?":hover":"")]=r),e.class=e.class?e.class+" "+s:s}var Q0=Math.round;function Aq(r){return r&&gr(r.src)}function Cq(r){return r&&kr(r.toDataURL)}function Sk(r,e,t,i){Rxe(function(n,s){var u=n==="fill"||n==="stroke";u&&Fj(s)?Eq(e,r,n,i):u&&SL(s)?Dq(t,r,n,i):u&&s==="none"?r[n]="transparent":r[n]=s},e,t,!1),Jxe(t,r,i)}function Tk(r,e){var t=ype(e);t&&(t.each(function(i,n){i!=null&&(r[(XN+n).toLowerCase()]=i+"")}),e.isSilent()&&(r[XN+"silent"]="true"))}function eV(r){return xd(r[0]-1)&&xd(r[1])&&xd(r[2])&&xd(r[3]-1)}function Wxe(r){return xd(r[4])&&xd(r[5])}function Mk(r,e,t){if(e&&!(Wxe(e)&&eV(e))){var i=t?10:1e4;r.transform=eV(e)?"translate("+Q0(e[4]*i)/i+" "+Q0(e[5]*i)/i+")":Nfe(e)}}function tV(r,e,t){for(var i=r.points,n=[],s=0;s<i.length;s++)n.push(Q0(i[s][0]*t)/t),n.push(Q0(i[s][1]*t)/t);e.points=n.join(" ")}function rV(r){return!r.smooth}function qxe(r){var e=Ht(r,function(t){return typeof t=="string"?[t,t]:t});return function(t,i,n){for(var s=0;s<e.length;s++){var u=e[s],a=t[u[0]];a!=null&&(i[u[1]]=Q0(a*n)/n)}}}var Zxe={circle:[qxe(["cx","cy","r"])],polyline:[tV,rV],polygon:[tV,rV]};function Xxe(r){for(var e=r.animators,t=0;t<e.length;t++)if(e[t].targetName==="shape")return!0;return!1}function Iq(r,e){var t=r.style,i=r.shape,n=Zxe[r.type],s={},u=e.animation,a="path",h=r.style.strokePercent,p=e.compress&&Nj(r)||4;if(n&&!e.willUpdate&&!(n[1]&&!n[1](i))&&!(u&&Xxe(r))&&!(h<1)){a=r.type;var m=Math.pow(10,p);n[0](i,s,m)}else{var v=!r.path||r.shapeChanged();r.path||r.createPathProxy();var x=r.path;v&&(x.beginPath(),r.buildPath(x,r.shape),r.pathUpdated());var w=x.getVersion(),T=r,C=T.__svgPathBuilder;(T.__svgPathVersion!==w||!C||h!==T.__svgPathStrokePercent)&&(C||(C=T.__svgPathBuilder=new xq),C.reset(p),x.rebuildPath(C,h),C.generateStr(),T.__svgPathVersion=w,T.__svgPathStrokePercent=h),s.d=C.getStr()}return Mk(s,r.transform),Sk(s,t,r,e),Tk(s,r),e.animation&&c2(r,s,e),e.emphasis&&Hxe(r,s,e),Pa(a,r.id+"",s)}function Yxe(r,e){var t=r.style,i=t.image;if(i&&!gr(i)&&(Aq(i)?i=i.src:Cq(i)&&(i=i.toDataURL())),!!i){var n=t.x||0,s=t.y||0,u=t.width,a=t.height,h={href:i,width:u,height:a};return n&&(h.x=n),s&&(h.y=s),Mk(h,r.transform),Sk(h,t,r,e),Tk(h,r),e.animation&&c2(r,h,e),Pa("image",r.id+"",h)}}function Kxe(r,e){var t=r.style,i=t.text;if(i!=null&&(i+=""),!(!i||isNaN(t.x)||isNaN(t.y))){var n=t.font||Rd,s=t.x||0,u=$fe(t.y||0,FT(n),t.textBaseline),a=Vfe[t.textAlign]||t.textAlign,h={"dominant-baseline":"central","text-anchor":a};if(wH(t)){var p="",m=t.fontStyle,v=bH(t.fontSize);if(!parseFloat(v))return;var x=t.fontFamily||fj,w=t.fontWeight;p+="font-size:"+v+";font-family:"+x+";",m&&m!=="normal"&&(p+="font-style:"+m+";"),w&&w!=="normal"&&(p+="font-weight:"+w+";"),h.style=p}else h.style="font: "+n;return i.match(/\s/)&&(h["xml:space"]="preserve"),s&&(h.x=s),u&&(h.y=u),Mk(h,r.transform),Sk(h,t,r,e),Tk(h,r),e.animation&&c2(r,h,e),Pa("text",r.id+"",h,void 0,i)}}function iV(r,e){if(r instanceof _i)return Iq(r,e);if(r instanceof io)return Yxe(r,e);if(r instanceof G0)return Kxe(r,e)}function Jxe(r,e,t){var i=r.style;if(Gfe(i)){var n=Ufe(r),s=t.shadowCache,u=s[n];if(!u){var a=r.getGlobalScale(),h=a[0],p=a[1];if(!h||!p)return;var m=i.shadowOffsetX||0,v=i.shadowOffsetY||0,x=i.shadowBlur,w=N0(i.shadowColor),T=w.opacity,C=w.color,I=x/2/h,k=x/2/p,R=I+" "+k;u=t.zrId+"-s"+t.shadowIdx++,t.defs[u]=Pa("filter",u,{id:u,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Pa("feDropShadow","",{dx:m/h,dy:v/p,stdDeviation:R,"flood-color":C,"flood-opacity":T})]),s[n]=u}e.filter=BT(u)}}function Eq(r,e,t,i){var n=r[t],s,u={gradientUnits:n.global?"userSpaceOnUse":"objectBoundingBox"};if(zj(n))s="linearGradient",u.x1=n.x,u.y1=n.y,u.x2=n.x2,u.y2=n.y2;else if(Bj(n))s="radialGradient",u.cx=Yr(n.x,.5),u.cy=Yr(n.y,.5),u.r=Yr(n.r,.5);else return;for(var a=n.colorStops,h=[],p=0,m=a.length;p<m;++p){var v=eD(a[p].offset)*100+"%",x=a[p].color,w=N0(x),T=w.color,C=w.opacity,I={offset:v};I["stop-color"]=T,C<1&&(I["stop-opacity"]=C),h.push(Pa("stop",p+"",I))}var k=Pa(s,"",u,h),R=wk(k),z=i.gradientCache,$=z[R];$||($=i.zrId+"-g"+i.gradientIdx++,z[R]=$,u.id=$,i.defs[$]=Pa(s,$,u,h)),e[t]=BT($)}function Dq(r,e,t,i){var n=r.style[t],s=r.getBoundingRect(),u={},a=n.repeat,h=a==="no-repeat",p=a==="repeat-x",m=a==="repeat-y",v;if(Oj(n)){var x=n.imageWidth,w=n.imageHeight,T=void 0,C=n.image;if(gr(C)?T=C:Aq(C)?T=C.src:Cq(C)&&(T=C.toDataURL()),typeof Image=="undefined"){var I="Image width/height must been given explictly in svg-ssr renderer.";Vo(x,I),Vo(w,I)}else if(x==null||w==null){var k=function(re,ne){if(re){var se=re.elm,me=x||ne.width,Se=w||ne.height;re.tag==="pattern"&&(p?(Se=1,me/=s.width):m&&(me=1,Se/=s.height)),re.attrs.width=me,re.attrs.height=Se,se&&(se.setAttribute("width",me),se.setAttribute("height",Se))}},R=DL(T,null,r,function(re){h||k(G,re),k(v,re)});R&&R.width&&R.height&&(x=x||R.width,w=w||R.height)}v=Pa("image","img",{href:T,width:x,height:w}),u.width=x,u.height=w}else n.svgElement&&(v=Nr(n.svgElement),u.width=n.svgWidth,u.height=n.svgHeight);if(!!v){var z,$;h?z=$=1:p?($=1,z=u.width/s.width):m?(z=1,$=u.height/s.height):u.patternUnits="userSpaceOnUse",z!=null&&!isNaN(z)&&(u.width=z),$!=null&&!isNaN($)&&(u.height=$);var j=Vj(n);j&&(u.patternTransform=j);var G=Pa("pattern","",u,[v]),Y=wk(G),Z=i.patternCache,H=Z[Y];H||(H=i.zrId+"-p"+i.patternIdx++,Z[Y]=H,u.id=H,G=i.defs[H]=Pa("pattern",H,u,[v])),e[t]=BT(H)}}function Qxe(r,e,t){var i=t.clipPathCache,n=t.defs,s=i[r.id];if(!s){s=t.zrId+"-c"+t.clipPathIdx++;var u={id:s};i[r.id]=s,n[s]=Pa("clipPath",s,u,[Iq(r,t)])}e["clip-path"]=BT(s)}function nV(r){return document.createTextNode(r)}function vp(r,e,t){r.insertBefore(e,t)}function aV(r,e){r.removeChild(e)}function oV(r,e){r.appendChild(e)}function Pq(r){return r.parentNode}function Lq(r){return r.nextSibling}function nI(r,e){r.textContent=e}var sV=58,e1e=120,t1e=Pa("","");function GD(r){return r===void 0}function Uu(r){return r!==void 0}function r1e(r,e,t){for(var i={},n=e;n<=t;++n){var s=r[n].key;s!==void 0&&(i[s]=n)}return i}function Ky(r,e){var t=r.key===e.key,i=r.tag===e.tag;return i&&t}function ex(r){var e,t=r.children,i=r.tag;if(Uu(i)){var n=r.elm=Sq(i);if(Ak(t1e,r),Nt(t))for(e=0;e<t.length;++e){var s=t[e];s!=null&&oV(n,ex(s))}else Uu(r.text)&&!Br(r.text)&&oV(n,nV(r.text))}else r.elm=nV(r.text);return r.elm}function kq(r,e,t,i,n){for(;i<=n;++i){var s=t[i];s!=null&&vp(r,ex(s),e)}}function HS(r,e,t,i){for(;t<=i;++t){var n=e[t];if(n!=null)if(Uu(n.tag)){var s=Pq(n.elm);aV(s,n.elm)}else aV(r,n.elm)}}function Ak(r,e){var t,i=e.elm,n=r&&r.attrs||{},s=e.attrs||{};if(n!==s){for(t in s){var u=s[t],a=n[t];a!==u&&(u===!0?i.setAttribute(t,""):u===!1?i.removeAttribute(t):t==="style"?i.style.cssText=u:t.charCodeAt(0)!==e1e?i.setAttribute(t,u):t==="xmlns:xlink"||t==="xmlns"?i.setAttributeNS(Oxe,t,u):t.charCodeAt(3)===sV?i.setAttributeNS(zxe,t,u):t.charCodeAt(5)===sV?i.setAttributeNS(wq,t,u):i.setAttribute(t,u))}for(t in n)t in s||i.removeAttribute(t)}}function i1e(r,e,t){for(var i=0,n=0,s=e.length-1,u=e[0],a=e[s],h=t.length-1,p=t[0],m=t[h],v,x,w,T;i<=s&&n<=h;)u==null?u=e[++i]:a==null?a=e[--s]:p==null?p=t[++n]:m==null?m=t[--h]:Ky(u,p)?(Og(u,p),u=e[++i],p=t[++n]):Ky(a,m)?(Og(a,m),a=e[--s],m=t[--h]):Ky(u,m)?(Og(u,m),vp(r,u.elm,Lq(a.elm)),u=e[++i],m=t[--h]):Ky(a,p)?(Og(a,p),vp(r,a.elm,u.elm),a=e[--s],p=t[++n]):(GD(v)&&(v=r1e(e,i,s)),x=v[p.key],GD(x)?vp(r,ex(p),u.elm):(w=e[x],w.tag!==p.tag?vp(r,ex(p),u.elm):(Og(w,p),e[x]=void 0,vp(r,w.elm,u.elm))),p=t[++n]);(i<=s||n<=h)&&(i>s?(T=t[h+1]==null?null:t[h+1].elm,kq(r,T,t,n,h)):HS(r,e,i,s))}function Og(r,e){var t=e.elm=r.elm,i=r.children,n=e.children;r!==e&&(Ak(r,e),GD(e.text)?Uu(i)&&Uu(n)?i!==n&&i1e(t,i,n):Uu(n)?(Uu(r.text)&&nI(t,""),kq(t,null,n,0,n.length-1)):Uu(i)?HS(t,i,0,i.length-1):Uu(r.text)&&nI(t,""):r.text!==e.text&&(Uu(i)&&HS(t,i,0,i.length-1),nI(t,e.text)))}function n1e(r,e){if(Ky(r,e))Og(r,e);else{var t=r.elm,i=Pq(t);ex(e),i!==null&&(vp(i,e.elm,Lq(t)),HS(i,[r],0,0))}return e}var a1e=0,o1e=function(){function r(e,t,i){if(this.type="svg",this.refreshHover=lV(),this.configLayer=lV(),this.storage=t,this._opts=i=kt({},i),this.root=e,this._id="zr"+a1e++,this._oldVNode=YN(i.width,i.height),e&&!i.ssr){var n=this._viewport=document.createElement("div");n.style.cssText="position:relative;overflow:hidden";var s=this._svgDom=this._oldVNode.elm=Sq("svg");Ak(null,this._oldVNode),n.appendChild(s),e.appendChild(n)}this.resize(i.width,i.height)}return r.prototype.getType=function(){return this.type},r.prototype.getViewportRoot=function(){return this._viewport},r.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},r.prototype.getSvgDom=function(){return this._svgDom},r.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",n1e(this._oldVNode,e),this._oldVNode=e}},r.prototype.renderOneToVNode=function(e){return iV(e,$D(this._id))},r.prototype.renderToVNode=function(e){e=e||{};var t=this.storage.getDisplayList(!0),i=this._width,n=this._height,s=$D(this._id);s.animation=e.animation,s.willUpdate=e.willUpdate,s.compress=e.compress,s.emphasis=e.emphasis;var u=[],a=this._bgVNode=s1e(i,n,this._backgroundColor,s);a&&u.push(a);var h=e.compress?null:this._mainVNode=Pa("g","main",{},[]);this._paintList(t,s,h?h.children:u),h&&u.push(h);var p=Ht(bi(s.defs),function(x){return s.defs[x]});if(p.length&&u.push(Pa("defs","defs",{},p)),e.animation){var m=Nxe(s.cssNodes,s.cssAnims,{newline:!0});if(m){var v=Pa("style","stl",{},[],m);u.push(v)}}return YN(i,n,u,e.useViewBox)},r.prototype.renderToString=function(e){return e=e||{},wk(this.renderToVNode({animation:Yr(e.cssAnimation,!0),emphasis:Yr(e.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Yr(e.useViewBox,!0)}),{newline:!0})},r.prototype.setBackgroundColor=function(e){this._backgroundColor=e},r.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},r.prototype._paintList=function(e,t,i){for(var n=e.length,s=[],u=0,a,h,p=0,m=0;m<n;m++){var v=e[m];if(!v.invisible){var x=v.__clipPaths,w=x&&x.length||0,T=h&&h.length||0,C=void 0;for(C=Math.max(w-1,T-1);C>=0&&!(x&&h&&x[C]===h[C]);C--);for(var I=T-1;I>C;I--)u--,a=s[u-1];for(var k=C+1;k<w;k++){var R={};Qxe(x[k],R,t);var z=Pa("g","clip-g-"+p++,R,[]);(a?a.children:i).push(z),s[u++]=z,a=z}h=x;var $=iV(v,t);$&&(a?a.children:i).push($)}}},r.prototype.resize=function(e,t){var i=this._opts,n=this.root,s=this._viewport;if(e!=null&&(i.width=e),t!=null&&(i.height=t),n&&s&&(s.style.display="none",e=Gg(n,0,i),t=Gg(n,1,i),s.style.display=""),this._width!==e||this._height!==t){if(this._width=e,this._height=t,s){var u=s.style;u.width=e+"px",u.height=t+"px"}if(SL(this._backgroundColor))this.refresh();else{var a=this._svgDom;a&&(a.setAttribute("width",e),a.setAttribute("height",t));var h=this._bgVNode&&this._bgVNode.elm;h&&(h.setAttribute("width",e),h.setAttribute("height",t))}}},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},r.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},r.prototype.toDataURL=function(e){var t=this.renderToString(),i="data:image/svg+xml;";return e?(t=Hfe(t),t&&i+"base64,"+t):i+"charset=UTF-8,"+encodeURIComponent(t)},r}();function lV(r){return function(){}}function s1e(r,e,t,i){var n;if(t&&t!=="none")if(n=Pa("rect","bg",{width:r,height:e,x:"0",y:"0"}),Fj(t))Eq({fill:t},n.attrs,"fill",i);else if(SL(t))Dq({style:{fill:t},dirty:aa,getBoundingRect:function(){return{width:r,height:e}}},n.attrs,"fill",i);else{var s=N0(t),u=s.color,a=s.opacity;n.attrs.fill=u,a<1&&(n.attrs["fill-opacity"]=a)}return n}var l1e=o1e;function u1e(r){r.registerPainter("svg",l1e)}function uV(r,e,t){var i=ah.createCanvas(),n=e.getWidth(),s=e.getHeight(),u=i.style;return u&&(u.position="absolute",u.left="0",u.top="0",u.width=n+"px",u.height=s+"px",i.setAttribute("data-zr-dom-id",r)),i.width=n*t,i.height=s*t,i}var c1e=function(r){lt(e,r);function e(t,i,n){var s=r.call(this)||this;s.motionBlur=!1,s.lastFrameAlpha=.7,s.dpr=1,s.virtual=!1,s.config={},s.incremental=!1,s.zlevel=0,s.maxRepaintRectCount=5,s.__dirty=!0,s.__firstTimePaint=!0,s.__used=!1,s.__drawIndex=0,s.__startIndex=0,s.__endIndex=0,s.__prevStartIndex=null,s.__prevEndIndex=null;var u;n=n||TS,typeof t=="string"?u=uV(t,i,n):Br(t)&&(u=t,t=u.id),s.id=t,s.dom=u;var a=u.style;return a&&(yj(u),u.onselectstart=function(){return!1},a.padding="0",a.margin="0",a.borderWidth="0"),s.painter=i,s.dpr=n,s}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=uV("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,i,n,s){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var u=[],a=this.maxRepaintRectCount,h=!1,p=new ai(0,0,0,0);function m(R){if(!(!R.isFinite()||R.isZero()))if(u.length===0){var z=new ai(0,0,0,0);z.copy(R),u.push(z)}else{for(var $=!1,j=1/0,G=0,Y=0;Y<u.length;++Y){var Z=u[Y];if(Z.intersect(R)){var H=new ai(0,0,0,0);H.copy(Z),H.union(R),u[Y]=H,$=!0;break}else if(h){p.copy(R),p.union(Z);var re=R.width*R.height,ne=Z.width*Z.height,se=p.width*p.height,me=se-re-ne;me<j&&(j=me,G=Y)}}if(h&&(u[G].union(R),$=!0),!$){var z=new ai(0,0,0,0);z.copy(R),u.push(z)}h||(h=u.length>=a)}}for(var v=this.__startIndex;v<this.__endIndex;++v){var x=t[v];if(x){var w=x.shouldBePainted(n,s,!0,!0),T=x.__isRendered&&(x.__dirty&Ps||!w)?x.getPrevPaintRect():null;T&&m(T);var C=w&&(x.__dirty&Ps||!x.__isRendered)?x.getPaintRect():null;C&&m(C)}}for(var v=this.__prevStartIndex;v<this.__prevEndIndex;++v){var x=i[v],w=x&&x.shouldBePainted(n,s,!0,!0);if(x&&(!w||!x.__zr)&&x.__isRendered){var T=x.getPrevPaintRect();T&&m(T)}}var I;do{I=!1;for(var v=0;v<u.length;){if(u[v].isZero()){u.splice(v,1);continue}for(var k=v+1;k<u.length;)u[v].intersect(u[k])?(I=!0,u[v].union(u[k]),u.splice(k,1)):k++;v++}}while(I);return this._paintRects=u,u},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,i){var n=this.dpr,s=this.dom,u=s.style,a=this.domBack;u&&(u.width=t+"px",u.height=i+"px"),s.width=t*n,s.height=i*n,a&&(a.width=t*n,a.height=i*n,n!==1&&this.ctxBack.scale(n,n))},e.prototype.clear=function(t,i,n){var s=this.dom,u=this.ctx,a=s.width,h=s.height;i=i||this.clearColor;var p=this.motionBlur&&!t,m=this.lastFrameAlpha,v=this.dpr,x=this;p&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(s,0,0,a/v,h/v));var w=this.domBack;function T(C,I,k,R){if(u.clearRect(C,I,k,R),i&&i!=="transparent"){var z=void 0;if(RT(i)){var $=i.global||i.__width===k&&i.__height===R;z=$&&i.__canvasGradient||LD(u,i,{x:0,y:0,width:k,height:R}),i.__canvasGradient=z,i.__width=k,i.__height=R}else Hde(i)&&(i.scaleX=i.scaleX||v,i.scaleY=i.scaleY||v,z=kD(u,i,{dirty:function(){x.setUnpainted(),x.painter.refresh()}}));u.save(),u.fillStyle=z||i,u.fillRect(C,I,k,R),u.restore()}p&&(u.save(),u.globalAlpha=m,u.drawImage(w,C,I,k,R),u.restore())}!n||p?T(0,0,a,h):n.length&&ue(n,function(C){T(C.x*v,C.y*v,C.width*v,C.height*v)})},e}(xl),aI=c1e,cV=1e5,tp=314159,fw=.01,h1e=.001;function d1e(r){return r?r.__builtin__?!0:!(typeof r.resize!="function"||typeof r.refresh!="function"):!1}function f1e(r,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+r+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var p1e=function(){function r(e,t,i,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var s=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=i=kt({},i||{}),this.dpr=i.devicePixelRatio||TS,this._singleCanvas=s,this.root=e;var u=e.style;u&&(yj(e),e.innerHTML=""),this.storage=t;var a=this._zlevelList;this._prevDisplayList=[];var h=this._layers;if(s){var m=e,v=m.width,x=m.height;i.width!=null&&(v=i.width),i.height!=null&&(x=i.height),this.dpr=i.devicePixelRatio||1,m.width=v*this.dpr,m.height=x*this.dpr,this._width=v,this._height=x;var w=new aI(m,this,this.dpr);w.__builtin__=!0,w.initContext(),h[tp]=w,w.zlevel=tp,a.push(tp),this._domRoot=e}else{this._width=Gg(e,0,i),this._height=Gg(e,1,i);var p=this._domRoot=f1e(this._width,this._height);e.appendChild(p)}}return r.prototype.getType=function(){return"canvas"},r.prototype.isSingleCanvas=function(){return this._singleCanvas},r.prototype.getViewportRoot=function(){return this._domRoot},r.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},r.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),i=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,i,e,this._redrawId);for(var s=0;s<n.length;s++){var u=n[s],a=this._layers[u];if(!a.__builtin__&&a.refresh){var h=s===0?this._backgroundColor:null;a.refresh(h)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},r.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},r.prototype._paintHoverList=function(e){var t=e.length,i=this._hoverlayer;if(i&&i.clear(),!!t){for(var n={inHover:!0,viewWidth:this._width,viewHeight:this._height},s,u=0;u<t;u++){var a=e[u];a.__inHover&&(i||(i=this._hoverlayer=this.getLayer(cV)),s||(s=i.ctx,s.save()),Ap(s,a,n,u===t-1))}s&&s.restore()}},r.prototype.getHoverLayer=function(){return this.getLayer(cV)},r.prototype.paintOne=function(e,t){p7(e,t)},r.prototype._paintList=function(e,t,i,n){if(this._redrawId===n){i=i||!1,this._updateLayerStatus(e);var s=this._doPaintList(e,t,i),u=s.finished,a=s.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),a&&this._paintHoverList(e),u)this.eachLayer(function(p){p.afterBrush&&p.afterBrush()});else{var h=this;ZE(function(){h._paintList(e,t,i,n)})}}},r.prototype._compositeManually=function(){var e=this.getLayer(tp).ctx,t=this._domRoot.width,i=this._domRoot.height;e.clearRect(0,0,t,i),this.eachBuiltinLayer(function(n){n.virtual&&e.drawImage(n.dom,0,0,t,i)})},r.prototype._doPaintList=function(e,t,i){for(var n=this,s=[],u=this._opts.useDirtyRect,a=0;a<this._zlevelList.length;a++){var h=this._zlevelList[a],p=this._layers[h];p.__builtin__&&p!==this._hoverlayer&&(p.__dirty||i)&&s.push(p)}for(var m=!0,v=!1,x=function(C){var I=s[C],k=I.ctx,R=u&&I.createRepaintRects(e,t,w._width,w._height),z=i?I.__startIndex:I.__drawIndex,$=!i&&I.incremental&&Date.now,j=$&&Date.now(),G=I.zlevel===w._zlevelList[0]?w._backgroundColor:null;if(I.__startIndex===I.__endIndex)I.clear(!1,G,R);else if(z===I.__startIndex){var Y=e[z];(!Y.incremental||!Y.notClear||i)&&I.clear(!1,G,R)}z===-1&&(console.error("For some unknown reason. drawIndex is -1"),z=I.__startIndex);var Z,H=function(me){var Se={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(Z=z;Z<I.__endIndex;Z++){var Ie=e[Z];if(Ie.__inHover&&(v=!0),n._doPaintEl(Ie,I,u,me,Se,Z===I.__endIndex-1),$){var ke=Date.now()-j;if(ke>15)break}}Se.prevElClipPaths&&k.restore()};if(R)if(R.length===0)Z=I.__endIndex;else for(var re=w.dpr,ne=0;ne<R.length;++ne){var se=R[ne];k.save(),k.beginPath(),k.rect(se.x*re,se.y*re,se.width*re,se.height*re),k.clip(),H(se),k.restore()}else k.save(),H(),k.restore();I.__drawIndex=Z,I.__drawIndex<I.__endIndex&&(m=!1)},w=this,T=0;T<s.length;T++)x(T);return Fi.wxa&&ue(this._layers,function(C){C&&C.ctx&&C.ctx.draw&&C.ctx.draw()}),{finished:m,needsRefreshHover:v}},r.prototype._doPaintEl=function(e,t,i,n,s,u){var a=t.ctx;if(i){var h=e.getPaintRect();(!n||h&&h.intersect(n))&&(Ap(a,e,s,u),e.setPrevPaintRect(h))}else Ap(a,e,s,u)},r.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=tp);var i=this._layers[e];return i||(i=new aI("zr_"+e,this,this.dpr),i.zlevel=e,i.__builtin__=!0,this._layerConfig[e]?ni(i,this._layerConfig[e],!0):this._layerConfig[e-fw]&&ni(i,this._layerConfig[e-fw],!0),t&&(i.virtual=t),this.insertLayer(e,i),i.initContext()),i},r.prototype.insertLayer=function(e,t){var i=this._layers,n=this._zlevelList,s=n.length,u=this._domRoot,a=null,h=-1;if(!i[e]&&!!d1e(t)){if(s>0&&e>n[0]){for(h=0;h<s-1&&!(n[h]<e&&n[h+1]>e);h++);a=i[n[h]]}if(n.splice(h+1,0,e),i[e]=t,!t.virtual)if(a){var p=a.dom;p.nextSibling?u.insertBefore(t.dom,p.nextSibling):u.appendChild(t.dom)}else u.firstChild?u.insertBefore(t.dom,u.firstChild):u.appendChild(t.dom);t.painter||(t.painter=this)}},r.prototype.eachLayer=function(e,t){for(var i=this._zlevelList,n=0;n<i.length;n++){var s=i[n];e.call(t,this._layers[s],s)}},r.prototype.eachBuiltinLayer=function(e,t){for(var i=this._zlevelList,n=0;n<i.length;n++){var s=i[n],u=this._layers[s];u.__builtin__&&e.call(t,u,s)}},r.prototype.eachOtherLayer=function(e,t){for(var i=this._zlevelList,n=0;n<i.length;n++){var s=i[n],u=this._layers[s];u.__builtin__||e.call(t,u,s)}},r.prototype.getLayers=function(){return this._layers},r.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(v,x){v.__dirty=v.__used=!1});function t(v){s&&(s.__endIndex!==v&&(s.__dirty=!0),s.__endIndex=v)}if(this._singleCanvas)for(var i=1;i<e.length;i++){var n=e[i];if(n.zlevel!==e[i-1].zlevel||n.incremental){this._needsManuallyCompositing=!0;break}}var s=null,u=0,a,h;for(h=0;h<e.length;h++){var n=e[h],p=n.zlevel,m=void 0;a!==p&&(a=p,u=0),n.incremental?(m=this.getLayer(p+h1e,this._needsManuallyCompositing),m.incremental=!0,u=1):m=this.getLayer(p+(u>0?fw:0),this._needsManuallyCompositing),m.__builtin__||mL("ZLevel "+p+" has been used by unkown layer "+m.id),m!==s&&(m.__used=!0,m.__startIndex!==h&&(m.__dirty=!0),m.__startIndex=h,m.incremental?m.__drawIndex=-1:m.__drawIndex=h,t(h),s=m),n.__dirty&Ps&&!n.__inHover&&(m.__dirty=!0,m.incremental&&m.__drawIndex<0&&(m.__drawIndex=h))}t(h),this.eachBuiltinLayer(function(v,x){!v.__used&&v.getElementCount()>0&&(v.__dirty=!0,v.__startIndex=v.__endIndex=v.__drawIndex=0),v.__dirty&&v.__drawIndex<0&&(v.__drawIndex=v.__startIndex)})},r.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},r.prototype._clearLayer=function(e){e.clear()},r.prototype.setBackgroundColor=function(e){this._backgroundColor=e,ue(this._layers,function(t){t.setUnpainted()})},r.prototype.configLayer=function(e,t){if(t){var i=this._layerConfig;i[e]?ni(i[e],t,!0):i[e]=t;for(var n=0;n<this._zlevelList.length;n++){var s=this._zlevelList[n];if(s===e||s===e+fw){var u=this._layers[s];ni(u,i[e],!0)}}}},r.prototype.delLayer=function(e){var t=this._layers,i=this._zlevelList,n=t[e];!n||(n.dom.parentNode.removeChild(n.dom),delete t[e],i.splice(di(i,e),1))},r.prototype.resize=function(e,t){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var n=this._opts,s=this.root;if(e!=null&&(n.width=e),t!=null&&(n.height=t),e=Gg(s,0,n),t=Gg(s,1,n),i.style.display="",this._width!==e||t!==this._height){i.style.width=e+"px",i.style.height=t+"px";for(var u in this._layers)this._layers.hasOwnProperty(u)&&this._layers[u].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(tp).resize(e,t)}return this},r.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},r.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},r.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[tp].dom;var t=new aI("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var i=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var n=t.dom.width,s=t.dom.height;this.eachLayer(function(v){v.__builtin__?i.drawImage(v.dom,0,0,n,s):v.renderToCanvas&&(i.save(),v.renderToCanvas(i),i.restore())})}else for(var u={inHover:!1,viewWidth:this._width,viewHeight:this._height},a=this.storage.getDisplayList(!0),h=0,p=a.length;h<p;h++){var m=a[h];Ap(i,m,u,h===p-1)}return t.dom},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r}(),m1e=p1e;function g1e(r){r.registerPainter("canvas",m1e)}var v1e=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return gh(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var i=new Vr,n=fa("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);i.add(n),n.setStyle(t.lineStyle);var s=this.getData().getVisual("symbol"),u=this.getData().getVisual("symbolRotate"),a=s==="none"?"circle":s,h=t.itemHeight*.8,p=fa(a,(t.itemWidth-h)/2,(t.itemHeight-h)/2,h,h,t.itemStyle.fill);i.add(p),p.setStyle(t.itemStyle);var m=t.iconRotate==="inherit"?u:t.iconRotate||0;return p.rotation=m*Math.PI/180,p.setOrigin([t.itemWidth/2,t.itemHeight/2]),a.indexOf("empty")>-1&&(p.style.stroke=p.style.fill,p.style.fill="#fff",p.style.lineWidth=2),i},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(Gn),_1e=v1e;function fv(r,e){var t=r.mapDimensionsAll("defaultedLabel"),i=t.length;if(i===1){var n=cv(r,e,t[0]);return n!=null?n+"":null}else if(i){for(var s=[],u=0;u<t.length;u++)s.push(cv(r,e,t[u]));return s.join(" ")}}function Rq(r,e){var t=r.mapDimensionsAll("defaultedLabel");if(!Nt(e))return e+"";for(var i=[],n=0;n<t.length;n++){var s=r.getDimensionIndex(t[n]);s>=0&&i.push(e[s])}return i.join(" ")}var y1e=function(r){lt(e,r);function e(t,i,n,s){var u=r.call(this)||this;return u.updateData(t,i,n,s),u}return e.prototype._createSymbol=function(t,i,n,s,u){this.removeAll();var a=fa(t,-1,-1,2,2,null,u);a.attr({z2:100,culling:!0,scaleX:s[0]/2,scaleY:s[1]/2}),a.drift=x1e,this._symbolType=t,this.add(a)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){lh(this.childAt(0))},e.prototype.downplay=function(){uh(this.childAt(0))},e.prototype.setZ=function(t,i){var n=this.childAt(0);n.zlevel=t,n.z=i},e.prototype.setDraggable=function(t,i){var n=this.childAt(0);n.draggable=t,n.cursor=!i&&t?"move":n.cursor},e.prototype.updateData=function(t,i,n,s){this.silent=!1;var u=t.getItemVisual(i,"symbol")||"circle",a=t.hostModel,h=e.getSymbolSize(t,i),p=u!==this._symbolType,m=s&&s.disableAnimation;if(p){var v=t.getItemVisual(i,"symbolKeepAspect");this._createSymbol(u,t,i,h,v)}else{var x=this.childAt(0);x.silent=!1;var w={scaleX:h[0]/2,scaleY:h[1]/2};m?x.attr(w):ji(x,w,a,i),nu(x)}if(this._updateCommon(t,i,h,n,s),p){var x=this.childAt(0);if(!m){var w={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:x.style.opacity}};x.scaleX=x.scaleY=0,x.style.opacity=0,Bn(x,w,a,i)}}m&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,i,n,s,u){var a=this.childAt(0),h=t.hostModel,p,m,v,x,w,T,C,I,k;if(s&&(p=s.emphasisItemStyle,m=s.blurItemStyle,v=s.selectItemStyle,x=s.focus,w=s.blurScope,C=s.labelStatesModels,I=s.hoverScale,k=s.cursorStyle,T=s.emphasisDisabled),!s||t.hasItemOption){var R=s&&s.itemModel?s.itemModel:t.getItemModel(i),z=R.getModel("emphasis");p=z.getModel("itemStyle").getItemStyle(),v=R.getModel(["select","itemStyle"]).getItemStyle(),m=R.getModel(["blur","itemStyle"]).getItemStyle(),x=z.get("focus"),w=z.get("blurScope"),T=z.get("disabled"),C=Ra(R),I=z.getShallow("scale"),k=R.getShallow("cursor")}var $=t.getItemVisual(i,"symbolRotate");a.attr("rotation",($||0)*Math.PI/180||0);var j=rm(t.getItemVisual(i,"symbolOffset"),n);j&&(a.x=j[0],a.y=j[1]),k&&a.attr("cursor",k);var G=t.getItemVisual(i,"style"),Y=G.fill;if(a instanceof io){var Z=a.style;a.useStyle(kt({image:Z.image,x:Z.x,y:Z.y,width:Z.width,height:Z.height},G))}else a.__isEmptyBrush?a.useStyle(kt({},G)):a.useStyle(G),a.style.decal=null,a.setColor(Y,u&&u.symbolInnerColor),a.style.strokeNoScale=!0;var H=t.getItemVisual(i,"liftZ"),re=this._z2;H!=null?re==null&&(this._z2=a.z2,a.z2+=H):re!=null&&(a.z2=re,this._z2=null);var ne=u&&u.useNameLabel;ro(a,C,{labelFetcher:h,labelDataIndex:i,defaultText:se,inheritColor:Y,defaultOpacity:G.opacity});function se(Ie){return ne?t.getName(Ie):fv(t,Ie)}this._sizeX=n[0]/2,this._sizeY=n[1]/2;var me=a.ensureState("emphasis");me.style=p,a.ensureState("select").style=v,a.ensureState("blur").style=m;var Se=I==null||I===!0?Math.max(1.1,3/this._sizeY):isFinite(I)&&I>0?+I:1;me.scaleX=this._sizeX*Se,me.scaleY=this._sizeY*Se,this.setSymbolScale(1),Kn(this,x,w,T)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,i,n){var s=this.childAt(0),u=Gr(this).dataIndex,a=n&&n.animation;if(this.silent=s.silent=!0,n&&n.fadeLabel){var h=s.getTextContent();h&&zd(h,{style:{opacity:0}},i,{dataIndex:u,removeOpt:a,cb:function(){s.removeTextContent()}})}else s.removeTextContent();zd(s,{style:{opacity:0},scaleX:0,scaleY:0},i,{dataIndex:u,cb:t,removeOpt:a})},e.getSymbolSize=function(t,i){return Vv(t.getItemVisual(i,"symbolSize"))},e}(Vr);function x1e(r,e){this.parent.drift(r,e)}var Mx=y1e;function oI(r,e,t,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(i.isIgnore&&i.isIgnore(t))&&!(i.clipShape&&!i.clipShape.contain(e[0],e[1]))&&r.getItemVisual(t,"symbol")!=="none"}function hV(r){return r!=null&&!Br(r)&&(r={isIgnore:r}),r||{}}function dV(r){var e=r.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:Ra(e),cursorStyle:e.get("cursor")}}var b1e=function(){function r(e){this.group=new Vr,this._SymbolCtor=e||Mx}return r.prototype.updateData=function(e,t){this._progressiveEls=null,t=hV(t);var i=this.group,n=e.hostModel,s=this._data,u=this._SymbolCtor,a=t.disableAnimation,h=dV(e),p={disableAnimation:a},m=t.getSymbolPoint||function(v){return e.getItemLayout(v)};s||i.removeAll(),e.diff(s).add(function(v){var x=m(v);if(oI(e,x,v,t)){var w=new u(e,v,h,p);w.setPosition(x),e.setItemGraphicEl(v,w),i.add(w)}}).update(function(v,x){var w=s.getItemGraphicEl(x),T=m(v);if(!oI(e,T,v,t)){i.remove(w);return}var C=e.getItemVisual(v,"symbol")||"circle",I=w&&w.getSymbolType&&w.getSymbolType();if(!w||I&&I!==C)i.remove(w),w=new u(e,v,h,p),w.setPosition(T);else{w.updateData(e,v,h,p);var k={x:T[0],y:T[1]};a?w.attr(k):ji(w,k,n)}i.add(w),e.setItemGraphicEl(v,w)}).remove(function(v){var x=s.getItemGraphicEl(v);x&&x.fadeOut(function(){i.remove(x)},n)}).execute(),this._getSymbolPoint=m,this._data=e},r.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(i,n){var s=e._getSymbolPoint(n);i.setPosition(s),i.markRedraw()})},r.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=dV(e),this._data=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(e,t,i){this._progressiveEls=[],i=hV(i);function n(h){h.isGroup||(h.incremental=!0,h.ensureState("emphasis").hoverLayer=!0)}for(var s=e.start;s<e.end;s++){var u=t.getItemLayout(s);if(oI(t,u,s,i)){var a=new this._SymbolCtor(t,s,this._seriesScope);a.traverse(n),a.setPosition(u),this.group.add(a),t.setItemGraphicEl(s,a),this._progressiveEls.push(a)}}},r.prototype.eachRendered=function(e){Hd(this._progressiveEls||this.group,e)},r.prototype.remove=function(e){var t=this.group,i=this._data;i&&e?i.eachItemGraphicEl(function(n){n.fadeOut(function(){t.remove(n)},i.hostModel)}):t.removeAll()},r}(),Ax=b1e;function Oq(r,e,t){var i=r.getBaseAxis(),n=r.getOtherAxis(i),s=w1e(n,t),u=i.dim,a=n.dim,h=e.mapDimension(a),p=e.mapDimension(u),m=a==="x"||a==="radius"?1:0,v=Ht(r.dimensions,function(T){return e.mapDimension(T)}),x=!1,w=e.getCalculationInfo("stackResultDimension");return Fd(e,v[0])&&(x=!0,v[0]=w),Fd(e,v[1])&&(x=!0,v[1]=w),{dataDimsForPoint:v,valueStart:s,valueAxisDim:a,baseAxisDim:u,stacked:!!x,valueDim:h,baseDim:p,baseDataOffset:m,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function w1e(r,e){var t=0,i=r.scale.getExtent();return e==="start"?t=i[0]:e==="end"?t=i[1]:Vi(e)&&!isNaN(e)?t=e:i[0]>0?t=i[0]:i[1]<0&&(t=i[1]),t}function zq(r,e,t,i){var n=NaN;r.stacked&&(n=t.get(t.getCalculationInfo("stackedOverDimension"),i)),isNaN(n)&&(n=r.valueStart);var s=r.baseDataOffset,u=[];return u[s]=t.get(r.baseDim,i),u[1-s]=n,e.dataToPoint(u)}function S1e(r,e){var t=[];return e.diff(r).add(function(i){t.push({cmd:"+",idx:i})}).update(function(i,n){t.push({cmd:"=",idx:n,idx1:i})}).remove(function(i){t.push({cmd:"-",idx:i})}).execute(),t}function T1e(r,e,t,i,n,s,u,a){for(var h=S1e(r,e),p=[],m=[],v=[],x=[],w=[],T=[],C=[],I=Oq(n,e,u),k=r.getLayout("points")||[],R=e.getLayout("points")||[],z=0;z<h.length;z++){var $=h[z],j=!0,G=void 0,Y=void 0;switch($.cmd){case"=":G=$.idx*2,Y=$.idx1*2;var Z=k[G],H=k[G+1],re=R[Y],ne=R[Y+1];(isNaN(Z)||isNaN(H))&&(Z=re,H=ne),p.push(Z,H),m.push(re,ne),v.push(t[G],t[G+1]),x.push(i[Y],i[Y+1]),C.push(e.getRawIndex($.idx1));break;case"+":var se=$.idx,me=I.dataDimsForPoint,Se=n.dataToPoint([e.get(me[0],se),e.get(me[1],se)]);Y=se*2,p.push(Se[0],Se[1]),m.push(R[Y],R[Y+1]);var Ie=zq(I,n,e,se);v.push(Ie[0],Ie[1]),x.push(i[Y],i[Y+1]),C.push(e.getRawIndex(se));break;case"-":j=!1}j&&(w.push($),T.push(T.length))}T.sort(function(He,dt){return C[He]-C[dt]});for(var ke=p.length,Fe=Xu(ke),Ce=Xu(ke),We=Xu(ke),gt=Xu(ke),St=[],z=0;z<T.length;z++){var et=T[z],ht=z*2,$e=et*2;Fe[ht]=p[$e],Fe[ht+1]=p[$e+1],Ce[ht]=m[$e],Ce[ht+1]=m[$e+1],We[ht]=v[$e],We[ht+1]=v[$e+1],gt[ht]=x[$e],gt[ht+1]=x[$e+1],St[z]=w[et]}return{current:Fe,next:Ce,stackedOnCurrent:We,stackedOnNext:gt,status:St}}var nd=Math.min,ad=Math.max;function Np(r,e){return isNaN(r)||isNaN(e)}function UD(r,e,t,i,n,s,u,a,h){for(var p,m,v,x,w,T,C=t,I=0;I<i;I++){var k=e[C*2],R=e[C*2+1];if(C>=n||C<0)break;if(Np(k,R)){if(h){C+=s;continue}break}if(C===t)r[s>0?"moveTo":"lineTo"](k,R),v=k,x=R;else{var z=k-p,$=R-m;if(z*z+$*$<.5){C+=s;continue}if(u>0){for(var j=C+s,G=e[j*2],Y=e[j*2+1];G===k&&Y===R&&I<i;)I++,j+=s,C+=s,G=e[j*2],Y=e[j*2+1],k=e[C*2],R=e[C*2+1],z=k-p,$=R-m;var Z=I+1;if(h)for(;Np(G,Y)&&Z<i;)Z++,j+=s,G=e[j*2],Y=e[j*2+1];var H=.5,re=0,ne=0,se=void 0,me=void 0;if(Z>=i||Np(G,Y))w=k,T=R;else{re=G-p,ne=Y-m;var Se=k-p,Ie=G-k,ke=R-m,Fe=Y-R,Ce=void 0,We=void 0;if(a==="x"){Ce=Math.abs(Se),We=Math.abs(Ie);var gt=re>0?1:-1;w=k-gt*Ce*u,T=R,se=k+gt*We*u,me=R}else if(a==="y"){Ce=Math.abs(ke),We=Math.abs(Fe);var St=ne>0?1:-1;w=k,T=R-St*Ce*u,se=k,me=R+St*We*u}else Ce=Math.sqrt(Se*Se+ke*ke),We=Math.sqrt(Ie*Ie+Fe*Fe),H=We/(We+Ce),w=k-re*u*(1-H),T=R-ne*u*(1-H),se=k+re*u*H,me=R+ne*u*H,se=nd(se,ad(G,k)),me=nd(me,ad(Y,R)),se=ad(se,nd(G,k)),me=ad(me,nd(Y,R)),re=se-k,ne=me-R,w=k-re*Ce/We,T=R-ne*Ce/We,w=nd(w,ad(p,k)),T=nd(T,ad(m,R)),w=ad(w,nd(p,k)),T=ad(T,nd(m,R)),re=k-w,ne=R-T,se=k+re*We/Ce,me=R+ne*We/Ce}r.bezierCurveTo(v,x,w,T,k,R),v=se,x=me}else r.lineTo(k,R)}p=k,m=R,C+=s}return I}var Bq=function(){function r(){this.smooth=0,this.smoothConstraint=!0}return r}(),M1e=function(r){lt(e,r);function e(t){var i=r.call(this,t)||this;return i.type="ec-polyline",i}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Bq},e.prototype.buildPath=function(t,i){var n=i.points,s=0,u=n.length/2;if(i.connectNulls){for(;u>0&&Np(n[u*2-2],n[u*2-1]);u--);for(;s<u&&Np(n[s*2],n[s*2+1]);s++);}for(;s<u;)s+=UD(t,n,s,u,u,1,i.smooth,i.smoothMonotone,i.connectNulls)+1},e.prototype.getPointOn=function(t,i){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n=this.path,s=n.data,u=sc.CMD,a,h,p=i==="x",m=[],v=0;v<s.length;){var x=s[v++],w=void 0,T=void 0,C=void 0,I=void 0,k=void 0,R=void 0,z=void 0;switch(x){case u.M:a=s[v++],h=s[v++];break;case u.L:if(w=s[v++],T=s[v++],z=p?(t-a)/(w-a):(t-h)/(T-h),z<=1&&z>=0){var $=p?(T-h)*z+h:(w-a)*z+a;return p?[t,$]:[$,t]}a=w,h=T;break;case u.C:w=s[v++],T=s[v++],C=s[v++],I=s[v++],k=s[v++],R=s[v++];var j=p?xS(a,w,C,k,t,m):xS(h,T,I,R,t,m);if(j>0)for(var G=0;G<j;G++){var Y=m[G];if(Y<=1&&Y>=0){var $=p?Da(h,T,I,R,Y):Da(a,w,C,k,Y);return p?[t,$]:[$,t]}}a=k,h=R;break}}},e}(_i),A1e=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Bq),Fq=function(r){lt(e,r);function e(t){var i=r.call(this,t)||this;return i.type="ec-polygon",i}return e.prototype.getDefaultShape=function(){return new A1e},e.prototype.buildPath=function(t,i){var n=i.points,s=i.stackedOnPoints,u=0,a=n.length/2,h=i.smoothMonotone;if(i.connectNulls){for(;a>0&&Np(n[a*2-2],n[a*2-1]);a--);for(;u<a&&Np(n[u*2],n[u*2+1]);u++);}for(;u<a;){var p=UD(t,n,u,a,a,1,i.smooth,h,i.connectNulls);UD(t,s,u+p-1,p,a,-1,i.stackedOnSmooth,h,i.connectNulls),u+=p+1,t.closePath()}},e}(_i);function Nq(r,e,t,i,n){var s=r.getArea(),u=s.x,a=s.y,h=s.width,p=s.height,m=t.get(["lineStyle","width"])||2;u-=m/2,a-=m/2,h+=m,p+=m,h=Math.ceil(h),u!==Math.floor(u)&&(u=Math.floor(u),h++);var v=new Li({shape:{x:u,y:a,width:h,height:p}});if(e){var x=r.getBaseAxis(),w=x.isHorizontal(),T=x.inverse;w?(T&&(v.shape.x+=h),v.shape.width=0):(T||(v.shape.y+=p),v.shape.height=0);var C=kr(n)?function(I){n(I,v)}:null;Bn(v,{shape:{width:h,height:p,x:u,y:a}},t,null,i,C)}return v}function Vq(r,e,t){var i=r.getArea(),n=ra(i.r0,1),s=ra(i.r,1),u=new cs({shape:{cx:ra(r.cx,1),cy:ra(r.cy,1),r0:n,r:s,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});if(e){var a=r.getBaseAxis().dim==="angle";a?u.shape.endAngle=i.startAngle:u.shape.r=n,Bn(u,{shape:{endAngle:i.endAngle,r:s}},t)}return u}function Cx(r,e,t,i,n){if(r){if(r.type==="polar")return Vq(r,e,t);if(r.type==="cartesian2d")return Nq(r,e,t,i,n)}else return null;return null}function nm(r,e){return r.type===e}function fV(r,e){if(r.length===e.length){for(var t=0;t<r.length;t++)if(r[t]!==e[t])return;return!0}}function pV(r){for(var e=1/0,t=1/0,i=-1/0,n=-1/0,s=0;s<r.length;){var u=r[s++],a=r[s++];isNaN(u)||(e=Math.min(u,e),i=Math.max(u,i)),isNaN(a)||(t=Math.min(a,t),n=Math.max(a,n))}return[[e,t],[i,n]]}function mV(r,e){var t=pV(r),i=t[0],n=t[1],s=pV(e),u=s[0],a=s[1];return Math.max(Math.abs(i[0]-u[0]),Math.abs(i[1]-u[1]),Math.abs(n[0]-a[0]),Math.abs(n[1]-a[1]))}function gV(r){return Vi(r)?r:r?.5:0}function C1e(r,e,t){if(!t.valueDim)return[];for(var i=e.count(),n=Xu(i*2),s=0;s<i;s++){var u=zq(t,r,e,s);n[s*2]=u[0],n[s*2+1]=u[1]}return n}function od(r,e,t,i){var n=e.getBaseAxis(),s=n.dim==="x"||n.dim==="radius"?0:1,u=[],a=0,h=[],p=[],m=[],v=[];if(i){for(a=0;a<r.length;a+=2)!isNaN(r[a])&&!isNaN(r[a+1])&&v.push(r[a],r[a+1]);r=v}for(a=0;a<r.length-2;a+=2)switch(m[0]=r[a+2],m[1]=r[a+3],p[0]=r[a],p[1]=r[a+1],u.push(p[0],p[1]),t){case"end":h[s]=m[s],h[1-s]=p[1-s],u.push(h[0],h[1]);break;case"middle":var x=(p[s]+m[s])/2,w=[];h[s]=w[s]=x,h[1-s]=p[1-s],w[1-s]=m[1-s],u.push(h[0],h[1]),u.push(w[0],w[1]);break;default:h[s]=p[s],h[1-s]=m[1-s],u.push(h[0],h[1])}return u.push(r[a++],r[a++]),u}function I1e(r,e){var t=[],i=r.length,n,s;function u(m,v,x){var w=m.coord,T=(x-w)/(v.coord-w),C=Ffe(T,[m.color,v.color]);return{coord:x,color:C}}for(var a=0;a<i;a++){var h=r[a],p=h.coord;if(p<0)n=h;else if(p>e){s?t.push(u(s,h,e)):n&&t.push(u(n,h,0),u(n,h,e));break}else n&&(t.push(u(n,h,0)),n=null),t.push(h),s=h}return t}function E1e(r,e,t){var i=r.getVisual("visualMeta");if(!(!i||!i.length||!r.count())&&e.type==="cartesian2d"){for(var n,s,u=i.length-1;u>=0;u--){var a=r.getDimensionInfo(i[u].dimension);if(n=a&&a.coordDim,n==="x"||n==="y"){s=i[u];break}}if(!!s){var h=e.getAxis(n),p=Ht(s.stops,function(z){return{coord:h.toGlobalCoord(h.dataToCoord(z.value)),color:z.color}}),m=p.length,v=s.outerColors.slice();m&&p[0].coord>p[m-1].coord&&(p.reverse(),v.reverse());var x=I1e(p,n==="x"?t.getWidth():t.getHeight()),w=x.length;if(!w&&m)return p[0].coord<0?v[1]?v[1]:p[m-1].color:v[0]?v[0]:p[0].color;var T=10,C=x[0].coord-T,I=x[w-1].coord+T,k=I-C;if(k<.001)return"transparent";ue(x,function(z){z.offset=(z.coord-C)/k}),x.push({offset:w?x[w-1].offset:.5,color:v[1]||"transparent"}),x.unshift({offset:w?x[0].offset:.5,color:v[0]||"transparent"});var R=new gx(0,0,0,0,x,!0);return R[n]=C,R[n+"2"]=I,R}}}function D1e(r,e,t){var i=r.get("showAllSymbol"),n=i==="auto";if(!(i&&!n)){var s=t.getAxesByScale("ordinal")[0];if(!!s&&!(n&&P1e(s,e))){var u=e.mapDimension(s.dim),a={};return ue(s.getViewLabels(),function(h){var p=s.scale.getRawOrdinalNumber(h.tickValue);a[p]=1}),function(h){return!a.hasOwnProperty(e.get(u,h))}}}}function P1e(r,e){var t=r.getExtent(),i=Math.abs(t[1]-t[0])/r.scale.count();isNaN(i)&&(i=0);for(var n=e.count(),s=Math.max(1,Math.round(n/5)),u=0;u<n;u+=s)if(Mx.getSymbolSize(e,u)[r.isHorizontal()?1:0]*1.5>i)return!1;return!0}function L1e(r,e){return isNaN(r)||isNaN(e)}function k1e(r){for(var e=r.length/2;e>0&&L1e(r[e*2-2],r[e*2-1]);e--);return e-1}function vV(r,e){return[r[e*2],r[e*2+1]]}function R1e(r,e,t){for(var i=r.length/2,n=t==="x"?0:1,s,u,a=0,h=-1,p=0;p<i;p++)if(u=r[p*2+n],!(isNaN(u)||isNaN(r[p*2+1-n]))){if(p===0){s=u;continue}if(s<=e&&u>=e||s>=e&&u<=e){h=p;break}a=p,s=u}return{range:[a,h],t:(e-s)/(u-s)}}function $q(r){if(r.get(["endLabel","show"]))return!0;for(var e=0;e<$o.length;e++)if(r.get([$o[e],"endLabel","show"]))return!0;return!1}function sI(r,e,t,i){if(nm(e,"cartesian2d")){var n=i.getModel("endLabel"),s=n.get("valueAnimation"),u=i.getData(),a={lastFrameIndex:0},h=$q(i)?function(w,T){r._endLabelOnDuring(w,T,u,a,s,n,e)}:null,p=e.getBaseAxis().isHorizontal(),m=Nq(e,t,i,function(){var w=r._endLabel;w&&t&&a.originalX!=null&&w.attr({x:a.originalX,y:a.originalY})},h);if(!i.get("clip",!0)){var v=m.shape,x=Math.max(v.width,v.height);p?(v.y-=x,v.height+=x*2):(v.x-=x,v.width+=x*2)}return h&&h(1,m),m}else return Vq(e,t,i)}function O1e(r,e){var t=e.getBaseAxis(),i=t.isHorizontal(),n=t.inverse,s=i?n?"right":"left":"center",u=i?"middle":n?"top":"bottom";return{normal:{align:r.get("align")||s,verticalAlign:r.get("verticalAlign")||u}}}var z1e=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.init=function(){var t=new Vr,i=new Ax;this.group.add(i.group),this._symbolDraw=i,this._lineGroup=t},e.prototype.render=function(t,i,n){var s=this,u=t.coordinateSystem,a=this.group,h=t.getData(),p=t.getModel("lineStyle"),m=t.getModel("areaStyle"),v=h.getLayout("points")||[],x=u.type==="polar",w=this._coordSys,T=this._symbolDraw,C=this._polyline,I=this._polygon,k=this._lineGroup,R=!i.ssr&&t.get("animation"),z=!m.isEmpty(),$=m.get("origin"),j=Oq(u,h,$),G=z&&C1e(u,h,j),Y=t.get("showSymbol"),Z=t.get("connectNulls"),H=Y&&!x&&D1e(t,h,u),re=this._data;re&&re.eachItemGraphicEl(function(dt,nt){dt.__temp&&(a.remove(dt),re.setItemGraphicEl(nt,null))}),Y||T.remove(),a.add(k);var ne=x?!1:t.get("step"),se;u&&u.getArea&&t.get("clip",!0)&&(se=u.getArea(),se.width!=null?(se.x-=.1,se.y-=.1,se.width+=.2,se.height+=.2):se.r0&&(se.r0-=.5,se.r+=.5)),this._clipShapeForSymbol=se;var me=E1e(h,u,n)||h.getVisual("style")[h.getVisual("drawType")];if(!(C&&w.type===u.type&&ne===this._step))Y&&T.updateData(h,{isIgnore:H,clipShape:se,disableAnimation:!0,getSymbolPoint:function(dt){return[v[dt*2],v[dt*2+1]]}}),R&&this._initSymbolLabelAnimation(h,u,se),ne&&(v=od(v,u,ne,Z),G&&(G=od(G,u,ne,Z))),C=this._newPolyline(v),z?I=this._newPolygon(v,G):I&&(k.remove(I),I=this._polygon=null),x||this._initOrUpdateEndLabel(t,u,Zp(me)),k.setClipPath(sI(this,u,!0,t));else{z&&!I?I=this._newPolygon(v,G):I&&!z&&(k.remove(I),I=this._polygon=null),x||this._initOrUpdateEndLabel(t,u,Zp(me));var Se=k.getClipPath();if(Se){var Ie=sI(this,u,!1,t);Bn(Se,{shape:Ie.shape},t)}else k.setClipPath(sI(this,u,!0,t));Y&&T.updateData(h,{isIgnore:H,clipShape:se,disableAnimation:!0,getSymbolPoint:function(dt){return[v[dt*2],v[dt*2+1]]}}),(!fV(this._stackedOnPoints,G)||!fV(this._points,v))&&(R?this._doUpdateAnimation(h,G,u,n,ne,$,Z):(ne&&(v=od(v,u,ne,Z),G&&(G=od(G,u,ne,Z))),C.setShape({points:v}),I&&I.setShape({points:v,stackedOnPoints:G})))}var ke=t.getModel("emphasis"),Fe=ke.get("focus"),Ce=ke.get("blurScope"),We=ke.get("disabled");if(C.useStyle(zr(p.getLineStyle(),{fill:"none",stroke:me,lineJoin:"bevel"})),to(C,t,"lineStyle"),C.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var gt=C.getState("emphasis").style;gt.lineWidth=+C.style.lineWidth+1}Gr(C).seriesIndex=t.seriesIndex,Kn(C,Fe,Ce,We);var St=gV(t.get("smooth")),et=t.get("smoothMonotone");if(C.setShape({smooth:St,smoothMonotone:et,connectNulls:Z}),I){var ht=h.getCalculationInfo("stackedOnSeries"),$e=0;I.useStyle(zr(m.getAreaStyle(),{fill:me,opacity:.7,lineJoin:"bevel",decal:h.getVisual("style").decal})),ht&&($e=gV(ht.get("smooth"))),I.setShape({smooth:St,stackedOnSmooth:$e,smoothMonotone:et,connectNulls:Z}),to(I,t,"areaStyle"),Gr(I).seriesIndex=t.seriesIndex,Kn(I,Fe,Ce,We)}var He=function(dt){s._changePolyState(dt)};h.eachItemGraphicEl(function(dt){dt&&(dt.onHoverStateChange=He)}),this._polyline.onHoverStateChange=He,this._data=h,this._coordSys=u,this._stackedOnPoints=G,this._points=v,this._step=ne,this._valueOrigin=$,t.get("triggerLineEvent")&&(this.packEventData(t,C),I&&this.packEventData(t,I))},e.prototype.packEventData=function(t,i){Gr(i).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,i,n,s){var u=t.getData(),a=Hp(u,s);if(this._changePolyState("emphasis"),!(a instanceof Array)&&a!=null&&a>=0){var h=u.getLayout("points"),p=u.getItemGraphicEl(a);if(!p){var m=h[a*2],v=h[a*2+1];if(isNaN(m)||isNaN(v)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(m,v))return;var x=t.get("zlevel")||0,w=t.get("z")||0;p=new Mx(u,a),p.x=m,p.y=v,p.setZ(x,w);var T=p.getSymbolPath().getTextContent();T&&(T.zlevel=x,T.z=w,T.z2=this._polyline.z2+1),p.__temp=!0,u.setItemGraphicEl(a,p),p.stopSymbolAnimation(!0),this.group.add(p)}p.highlight()}else Cn.prototype.highlight.call(this,t,i,n,s)},e.prototype.downplay=function(t,i,n,s){var u=t.getData(),a=Hp(u,s);if(this._changePolyState("normal"),a!=null&&a>=0){var h=u.getItemGraphicEl(a);h&&(h.__temp?(u.setItemGraphicEl(a,null),this.group.remove(h)):h.downplay())}else Cn.prototype.downplay.call(this,t,i,n,s)},e.prototype._changePolyState=function(t){var i=this._polygon;CS(this._polyline,t),i&&CS(i,t)},e.prototype._newPolyline=function(t){var i=this._polyline;return i&&this._lineGroup.remove(i),i=new M1e({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(i),this._polyline=i,i},e.prototype._newPolygon=function(t,i){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new Fq({shape:{points:t,stackedOnPoints:i},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},e.prototype._initSymbolLabelAnimation=function(t,i,n){var s,u,a=i.getBaseAxis(),h=a.inverse;i.type==="cartesian2d"?(s=a.isHorizontal(),u=!1):i.type==="polar"&&(s=a.dim==="angle",u=!0);var p=t.hostModel,m=p.get("animationDuration");kr(m)&&(m=m(null));var v=p.get("animationDelay")||0,x=kr(v)?v(null):v;t.eachItemGraphicEl(function(w,T){var C=w;if(C){var I=[w.x,w.y],k=void 0,R=void 0,z=void 0;if(n)if(u){var $=n,j=i.pointToCoord(I);s?(k=$.startAngle,R=$.endAngle,z=-j[1]/180*Math.PI):(k=$.r0,R=$.r,z=j[0])}else{var G=n;s?(k=G.x,R=G.x+G.width,z=w.x):(k=G.y+G.height,R=G.y,z=w.y)}var Y=R===k?0:(z-k)/(R-k);h&&(Y=1-Y);var Z=kr(v)?v(T):m*Y+x,H=C.getSymbolPath(),re=H.getTextContent();C.attr({scaleX:0,scaleY:0}),C.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:Z}),re&&re.animateFrom({style:{opacity:0}},{duration:300,delay:Z}),H.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,i,n){var s=t.getModel("endLabel");if($q(t)){var u=t.getData(),a=this._polyline,h=u.getLayout("points");if(!h){a.removeTextContent(),this._endLabel=null;return}var p=this._endLabel;p||(p=this._endLabel=new Ni({z2:200}),p.ignoreClip=!0,a.setTextContent(this._endLabel),a.disableLabelAnimation=!0);var m=k1e(h);m>=0&&(ro(a,Ra(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:m,defaultText:function(v,x,w){return w!=null?Rq(u,w):fv(u,v)},enableTextSetter:!0},O1e(s,i)),a.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,i,n,s,u,a,h){var p=this._endLabel,m=this._polyline;if(p){t<1&&s.originalX==null&&(s.originalX=p.x,s.originalY=p.y);var v=n.getLayout("points"),x=n.hostModel,w=x.get("connectNulls"),T=a.get("precision"),C=a.get("distance")||0,I=h.getBaseAxis(),k=I.isHorizontal(),R=I.inverse,z=i.shape,$=R?k?z.x:z.y+z.height:k?z.x+z.width:z.y,j=(k?C:0)*(R?-1:1),G=(k?0:-C)*(R?-1:1),Y=k?"x":"y",Z=R1e(v,$,Y),H=Z.range,re=H[1]-H[0],ne=void 0;if(re>=1){if(re>1&&!w){var se=vV(v,H[0]);p.attr({x:se[0]+j,y:se[1]+G}),u&&(ne=x.getRawValue(H[0]))}else{var se=m.getPointOn($,Y);se&&p.attr({x:se[0]+j,y:se[1]+G});var me=x.getRawValue(H[0]),Se=x.getRawValue(H[1]);u&&(ne=sH(n,T,me,Se,Z.t))}s.lastFrameIndex=H[0]}else{var Ie=t===1||s.lastFrameIndex>0?H[0]:0,se=vV(v,Ie);u&&(ne=x.getRawValue(Ie)),p.attr({x:se[0]+j,y:se[1]+G})}if(u){var ke=Lv(p);typeof ke.setLabelText=="function"&&ke.setLabelText(ne)}}},e.prototype._doUpdateAnimation=function(t,i,n,s,u,a,h){var p=this._polyline,m=this._polygon,v=t.hostModel,x=T1e(this._data,t,this._stackedOnPoints,i,this._coordSys,n,this._valueOrigin),w=x.current,T=x.stackedOnCurrent,C=x.next,I=x.stackedOnNext;if(u&&(w=od(x.current,n,u,h),T=od(x.stackedOnCurrent,n,u,h),C=od(x.next,n,u,h),I=od(x.stackedOnNext,n,u,h)),mV(w,C)>3e3||m&&mV(T,I)>3e3){p.stopAnimation(),p.setShape({points:C}),m&&(m.stopAnimation(),m.setShape({points:C,stackedOnPoints:I}));return}p.shape.__points=x.current,p.shape.points=w;var k={shape:{points:C}};x.current!==w&&(k.shape.__points=x.next),p.stopAnimation(),ji(p,k,v),m&&(m.setShape({points:w,stackedOnPoints:T}),m.stopAnimation(),ji(m,{shape:{stackedOnPoints:I}},v),p.shape.points!==m.shape.points&&(m.shape.points=p.shape.points));for(var R=[],z=x.status,$=0;$<z.length;$++){var j=z[$].cmd;if(j==="="){var G=t.getItemGraphicEl(z[$].idx1);G&&R.push({el:G,ptIdx:$})}}p.animators&&p.animators.length&&p.animators[0].during(function(){m&&m.dirtyShape();for(var Y=p.shape.__points,Z=0;Z<R.length;Z++){var H=R[Z].el,re=R[Z].ptIdx*2;H.x=Y[re],H.y=Y[re+1],H.markRedraw()}})},e.prototype.remove=function(t){var i=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(s,u){s.__temp&&(i.remove(s),n.setItemGraphicEl(u,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(Cn),B1e=z1e;function Ix(r,e){return{seriesType:r,plan:Fv(),reset:function(t){var i=t.getData(),n=t.coordinateSystem,s=t.pipelineContext,u=e||s.large;if(!!n){var a=Ht(n.dimensions,function(w){return i.mapDimension(w)}).slice(0,2),h=a.length,p=i.getCalculationInfo("stackResultDimension");Fd(i,a[0])&&(a[0]=p),Fd(i,a[1])&&(a[1]=p);var m=i.getStore(),v=i.getDimensionIndex(a[0]),x=i.getDimensionIndex(a[1]);return h&&{progress:function(w,T){for(var C=w.end-w.start,I=u&&Xu(C*h),k=[],R=[],z=w.start,$=0;z<w.end;z++){var j=void 0;if(h===1){var G=m.get(v,z);j=n.dataToPoint(G,null,R)}else k[0]=m.get(v,z),k[1]=m.get(x,z),j=n.dataToPoint(k,null,R);u?(I[$++]=j[0],I[$++]=j[1]):T.setItemLayout(z,j.slice())}u&&T.setLayout("points",I)}}}}}}var F1e={average:function(r){for(var e=0,t=0,i=0;i<r.length;i++)isNaN(r[i])||(e+=r[i],t++);return t===0?NaN:e/t},sum:function(r){for(var e=0,t=0;t<r.length;t++)e+=r[t]||0;return e},max:function(r){for(var e=-1/0,t=0;t<r.length;t++)r[t]>e&&(e=r[t]);return isFinite(e)?e:NaN},min:function(r){for(var e=1/0,t=0;t<r.length;t++)r[t]<e&&(e=r[t]);return isFinite(e)?e:NaN},minmax:function(r){for(var e=-1/0,t=-1/0,i=0;i<r.length;i++){var n=r[i],s=Math.abs(n);s>e&&(e=s,t=n)}return isFinite(t)?t:NaN},nearest:function(r){return r[0]}},N1e=function(r){return Math.round(r.length/2)};function Gq(r){return{seriesType:r,reset:function(e,t,i){var n=e.getData(),s=e.get("sampling"),u=e.coordinateSystem,a=n.count();if(a>10&&u.type==="cartesian2d"&&s){var h=u.getBaseAxis(),p=u.getOtherAxis(h),m=h.getExtent(),v=i.getDevicePixelRatio(),x=Math.abs(m[1]-m[0])*(v||1),w=Math.round(a/x);if(isFinite(w)&&w>1){s==="lttb"&&e.setData(n.lttbDownSample(n.mapDimension(p.dim),1/w));var T=void 0;gr(s)?T=F1e[s]:kr(s)&&(T=s),T&&e.setData(n.downSample(n.mapDimension(p.dim),1/w,T,N1e))}}}}}function V1e(r){r.registerChartView(B1e),r.registerSeriesModel(_1e),r.registerLayout(Ix("line",!0)),r.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),i=e.getModel("lineStyle").getLineStyle();i&&!i.stroke&&(i.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",i)}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,Gq("line"))}var Uq=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,i){return gh(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,i,n){var s=this.coordinateSystem;if(s&&s.clampData){var u=s.clampData(t),a=s.dataToPoint(u);if(n)ue(s.getAxes(),function(x,w){if(x.type==="category"&&i!=null){var T=x.getTicksCoords(),C=x.getTickModel().get("alignWithLabel"),I=u[w],k=i[w]==="x1"||i[w]==="y1";if(k&&!C&&(I+=1),T.length<2)return;if(T.length===2){a[w]=x.toGlobalCoord(x.getExtent()[k?1:0]);return}for(var R=void 0,z=void 0,$=1,j=0;j<T.length;j++){var G=T[j].coord,Y=j===T.length-1?T[j-1].tickValue+$:T[j].tickValue;if(Y===I){z=G;break}else if(Y<I)R=G;else if(R!=null&&Y>I){z=(G+R)/2;break}j===1&&($=Y-T[0].tickValue)}z==null&&(R?R&&(z=T[T.length-1].coord):z=T[0].coord),a[w]=x.toGlobalCoord(z)}});else{var h=this.getData(),p=h.getLayout("offset"),m=h.getLayout("size"),v=s.getBaseAxis().isHorizontal()?0:1;a[v]+=p+m/2}return a}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(Gn);Gn.registerClass(Uq);var WS=Uq,$1e=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(){return gh(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),i=this.get("largeThreshold");return i>t&&(t=i),t},e.prototype.brushSelector=function(t,i,n){return n.rect(i.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Wd(WS.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(WS),G1e=$1e,U1e=function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r}(),j1e=function(r){lt(e,r);function e(t){var i=r.call(this,t)||this;return i.type="sausage",i}return e.prototype.getDefaultShape=function(){return new U1e},e.prototype.buildPath=function(t,i){var n=i.cx,s=i.cy,u=Math.max(i.r0||0,0),a=Math.max(i.r,0),h=(a-u)*.5,p=u+h,m=i.startAngle,v=i.endAngle,x=i.clockwise,w=Math.PI*2,T=x?v-m<w:m-v<w;T||(m=v-(x?w:-w));var C=Math.cos(m),I=Math.sin(m),k=Math.cos(v),R=Math.sin(v);T?(t.moveTo(C*u+n,I*u+s),t.arc(C*p+n,I*p+s,h,-Math.PI+m,m,!x)):t.moveTo(C*a+n,I*a+s),t.arc(n,s,a,m,v,!x),t.arc(k*p+n,R*p+s,h,v-Math.PI*2,v-Math.PI,!x),u!==0&&t.arc(n,s,u,v,m,x)},e}(_i),qS=j1e;function H1e(r,e){e=e||{};var t=e.isRoundCap;return function(i,n,s){var u=n.position;if(!u||u instanceof Array)return MS(i,n,s);var a=r(u),h=n.distance!=null?n.distance:5,p=this.shape,m=p.cx,v=p.cy,x=p.r,w=p.r0,T=(x+w)/2,C=p.startAngle,I=p.endAngle,k=(C+I)/2,R=t?Math.abs(x-w)/2:0,z=Math.cos,$=Math.sin,j=m+x*z(C),G=v+x*$(C),Y="left",Z="top";switch(a){case"startArc":j=m+(w-h)*z(k),G=v+(w-h)*$(k),Y="center",Z="top";break;case"insideStartArc":j=m+(w+h)*z(k),G=v+(w+h)*$(k),Y="center",Z="bottom";break;case"startAngle":j=m+T*z(C)+pw(C,h+R,!1),G=v+T*$(C)+mw(C,h+R,!1),Y="right",Z="middle";break;case"insideStartAngle":j=m+T*z(C)+pw(C,-h+R,!1),G=v+T*$(C)+mw(C,-h+R,!1),Y="left",Z="middle";break;case"middle":j=m+T*z(k),G=v+T*$(k),Y="center",Z="middle";break;case"endArc":j=m+(x+h)*z(k),G=v+(x+h)*$(k),Y="center",Z="bottom";break;case"insideEndArc":j=m+(x-h)*z(k),G=v+(x-h)*$(k),Y="center",Z="top";break;case"endAngle":j=m+T*z(I)+pw(I,h+R,!0),G=v+T*$(I)+mw(I,h+R,!0),Y="left",Z="middle";break;case"insideEndAngle":j=m+T*z(I)+pw(I,-h+R,!0),G=v+T*$(I)+mw(I,-h+R,!0),Y="right",Z="middle";break;default:return MS(i,n,s)}return i=i||{},i.x=j,i.y=G,i.align=Y,i.verticalAlign=Z,i}}function W1e(r,e,t,i){if(Vi(i)){r.setTextConfig({rotation:i});return}else if(Nt(e)){r.setTextConfig({rotation:0});return}var n=r.shape,s=n.clockwise?n.startAngle:n.endAngle,u=n.clockwise?n.endAngle:n.startAngle,a=(s+u)/2,h,p=t(e);switch(p){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":h=a;break;case"startAngle":case"insideStartAngle":h=s;break;case"endAngle":case"insideEndAngle":h=u;break;default:r.setTextConfig({rotation:0});return}var m=Math.PI*1.5-h;p==="middle"&&m>Math.PI/2&&m<Math.PI*1.5&&(m-=Math.PI),r.setTextConfig({rotation:m})}function pw(r,e,t){return e*Math.sin(r)*(t?-1:1)}function mw(r,e,t){return e*Math.cos(r)*(t?1:-1)}function Cp(r,e,t){var i=r.get("borderRadius");if(i==null)return t?{cornerRadius:0}:null;Nt(i)||(i=[i,i,i,i]);var n=Math.abs(e.r||0-e.r0||0);return{cornerRadius:Ht(i,function(s){return iu(s,n)})}}var lI=Math.max,uI=Math.min;function q1e(r,e){var t=r.getArea&&r.getArea();if(nm(r,"cartesian2d")){var i=r.getBaseAxis();if(i.type!=="category"||!i.onBand){var n=e.getLayout("bandWidth");i.isHorizontal()?(t.x-=n,t.width+=n*2):(t.y-=n,t.height+=n*2)}}return t}var Z1e=function(r){lt(e,r);function e(){var t=r.call(this)||this;return t.type=e.type,t._isFirstFrame=!0,t}return e.prototype.render=function(t,i,n,s){this._model=t,this._removeOnRenderedListener(n),this._updateDrawMode(t);var u=t.get("coordinateSystem");(u==="cartesian2d"||u==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,i,n):this._renderNormal(t,i,n,s))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,i){this._progressiveEls=[],this._incrementalRenderLarge(t,i)},e.prototype.eachRendered=function(t){Hd(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var i=t.pipelineContext.large;(this._isLargeDraw==null||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},e.prototype._renderNormal=function(t,i,n,s){var u=this.group,a=t.getData(),h=this._data,p=t.coordinateSystem,m=p.getBaseAxis(),v;p.type==="cartesian2d"?v=m.isHorizontal():p.type==="polar"&&(v=m.dim==="angle");var x=t.isAnimationEnabled()?t:null,w=X1e(t,p);w&&this._enableRealtimeSort(w,a,n);var T=t.get("clip",!0)||w,C=q1e(p,a);u.removeClipPath();var I=t.get("roundCap",!0),k=t.get("showBackground",!0),R=t.getModel("backgroundStyle"),z=R.get("borderRadius")||0,$=[],j=this._backgroundEls,G=s&&s.isInitSort,Y=s&&s.type==="changeAxisOrder";function Z(ne){var se=gw[p.type](a,ne),me=rbe(p,v,se);return me.useStyle(R.getItemStyle()),p.type==="cartesian2d"?me.setShape("r",z):me.setShape("cornerRadius",z),$[ne]=me,me}a.diff(h).add(function(ne){var se=a.getItemModel(ne),me=gw[p.type](a,ne,se);if(k&&Z(ne),!(!a.hasValue(ne)||!wV[p.type](me))){var Se=!1;T&&(Se=_V[p.type](C,me));var Ie=yV[p.type](t,a,ne,me,v,x,m.model,!1,I);w&&(Ie.forceLabelAnimation=!0),SV(Ie,a,ne,se,me,t,v,p.type==="polar"),G?Ie.attr({shape:me}):w?xV(w,x,Ie,me,ne,v,!1,!1):Bn(Ie,{shape:me},t,ne),a.setItemGraphicEl(ne,Ie),u.add(Ie),Ie.ignore=Se}}).update(function(ne,se){var me=a.getItemModel(ne),Se=gw[p.type](a,ne,me);if(k){var Ie=void 0;j.length===0?Ie=Z(se):(Ie=j[se],Ie.useStyle(R.getItemStyle()),p.type==="cartesian2d"?Ie.setShape("r",z):Ie.setShape("cornerRadius",z),$[ne]=Ie);var ke=gw[p.type](a,ne),Fe=Hq(v,ke,p);ji(Ie,{shape:Fe},x,ne)}var Ce=h.getItemGraphicEl(se);if(!a.hasValue(ne)||!wV[p.type](Se)){u.remove(Ce);return}var We=!1;if(T&&(We=_V[p.type](C,Se),We&&u.remove(Ce)),Ce?nu(Ce):Ce=yV[p.type](t,a,ne,Se,v,x,m.model,!!Ce,I),w&&(Ce.forceLabelAnimation=!0),Y){var gt=Ce.getTextContent();if(gt){var St=Lv(gt);St.prevValue!=null&&(St.prevValue=St.value)}}else SV(Ce,a,ne,me,Se,t,v,p.type==="polar");G?Ce.attr({shape:Se}):w?xV(w,x,Ce,Se,ne,v,!0,Y):ji(Ce,{shape:Se},t,ne,null),a.setItemGraphicEl(ne,Ce),Ce.ignore=We,u.add(Ce)}).remove(function(ne){var se=h.getItemGraphicEl(ne);se&&H0(se,t,ne)}).execute();var H=this._backgroundGroup||(this._backgroundGroup=new Vr);H.removeAll();for(var re=0;re<$.length;++re)H.add($[re]);u.add(H),this._backgroundEls=$,this._data=a},e.prototype._renderLarge=function(t,i,n){this._clear(),MV(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,i){this._removeBackground(),MV(i,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var i=t.get("clip",!0)&&Cx(t.coordinateSystem,!1,t),n=this.group;i?n.setClipPath(i):n.removeClipPath()},e.prototype._enableRealtimeSort=function(t,i,n){var s=this;if(!!i.count()){var u=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(i,t,n),this._isFirstFrame=!1;else{var a=function(h){var p=i.getItemGraphicEl(h),m=p&&p.shape;return m&&Math.abs(u.isHorizontal()?m.height:m.width)||0};this._onRendered=function(){s._updateSortWithinSameData(i,a,u,n)},n.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,i,n){var s=[];return t.each(t.mapDimension(i.dim),function(u,a){var h=n(a);h=h==null?NaN:h,s.push({dataIndex:a,mappedValue:h,ordinalNumber:u})}),s.sort(function(u,a){return a.mappedValue-u.mappedValue}),{ordinalNumbers:Ht(s,function(u){return u.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,i,n){for(var s=n.scale,u=t.mapDimension(n.dim),a=Number.MAX_VALUE,h=0,p=s.getOrdinalMeta().categories.length;h<p;++h){var m=t.rawIndexOf(u,s.getRawOrdinalNumber(h)),v=m<0?Number.MIN_VALUE:i(t.indexOfRawIndex(m));if(v>a)return!0;a=v}return!1},e.prototype._isOrderDifferentInView=function(t,i){for(var n=i.scale,s=n.getExtent(),u=Math.max(0,s[0]),a=Math.min(s[1],n.getOrdinalMeta().categories.length-1);u<=a;++u)if(t.ordinalNumbers[u]!==n.getRawOrdinalNumber(u))return!0},e.prototype._updateSortWithinSameData=function(t,i,n,s){if(!!this._isOrderChangedWithinSameData(t,i,n)){var u=this._dataSort(t,n,i);this._isOrderDifferentInView(u,n)&&(this._removeOnRenderedListener(s),s.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:u}))}},e.prototype._dispatchInitSort=function(t,i,n){var s=i.baseAxis,u=this._dataSort(t,s,function(a){return t.get(t.mapDimension(i.otherAxis.dim),a)});n.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",isInitSort:!0,axisId:s.index,sortInfo:u})},e.prototype.remove=function(t,i){this._clear(this._model),this._removeOnRenderedListener(i)},e.prototype.dispose=function(t,i){this._removeOnRenderedListener(i)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var i=this.group,n=this._data;t&&t.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(s){H0(s,t,Gr(s).dataIndex)})):i.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(Cn),_V={cartesian2d:function(r,e){var t=e.width<0?-1:1,i=e.height<0?-1:1;t<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height);var n=r.x+r.width,s=r.y+r.height,u=lI(e.x,r.x),a=uI(e.x+e.width,n),h=lI(e.y,r.y),p=uI(e.y+e.height,s),m=a<u,v=p<h;return e.x=m&&u>n?a:u,e.y=v&&h>s?p:h,e.width=m?0:a-u,e.height=v?0:p-h,t<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height),m||v},polar:function(r,e){var t=e.r0<=e.r?1:-1;if(t<0){var i=e.r;e.r=e.r0,e.r0=i}var n=uI(e.r,r.r),s=lI(e.r0,r.r0);e.r=n,e.r0=s;var u=n-s<0;if(t<0){var i=e.r;e.r=e.r0,e.r0=i}return u}},yV={cartesian2d:function(r,e,t,i,n,s,u,a,h){var p=new Li({shape:kt({},i),z2:1});if(p.__dataIndex=t,p.name="item",s){var m=p.shape,v=n?"height":"width";m[v]=0}return p},polar:function(r,e,t,i,n,s,u,a,h){var p=!n&&h?qS:cs,m=new p({shape:i,z2:1});m.name="item";var v=jq(n);if(m.calculateTextPosition=H1e(v,{isRoundCap:p===qS}),s){var x=m.shape,w=n?"r":"endAngle",T={};x[w]=n?i.r0:i.startAngle,T[w]=i[w],(a?ji:Bn)(m,{shape:T},s)}return m}};function X1e(r,e){var t=r.get("realtimeSort",!0),i=e.getBaseAxis();if(t&&i.type==="category"&&e.type==="cartesian2d")return{baseAxis:i,otherAxis:e.getOtherAxis(i)}}function xV(r,e,t,i,n,s,u,a){var h,p;s?(p={x:i.x,width:i.width},h={y:i.y,height:i.height}):(p={y:i.y,height:i.height},h={x:i.x,width:i.width}),a||(u?ji:Bn)(t,{shape:h},e,n,null);var m=e?r.baseAxis.model:null;(u?ji:Bn)(t,{shape:p},m,n)}function bV(r,e){for(var t=0;t<e.length;t++)if(!isFinite(r[e[t]]))return!0;return!1}var Y1e=["x","y","width","height"],K1e=["cx","cy","r","startAngle","endAngle"],wV={cartesian2d:function(r){return!bV(r,Y1e)},polar:function(r){return!bV(r,K1e)}},gw={cartesian2d:function(r,e,t){var i=r.getItemLayout(e),n=t?Q1e(t,i):0,s=i.width>0?1:-1,u=i.height>0?1:-1;return{x:i.x+s*n/2,y:i.y+u*n/2,width:i.width-s*n,height:i.height-u*n}},polar:function(r,e,t){var i=r.getItemLayout(e);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}}};function J1e(r){return r.startAngle!=null&&r.endAngle!=null&&r.startAngle===r.endAngle}function jq(r){return function(e){var t=e?"Arc":"Angle";return function(i){switch(i){case"start":case"insideStart":case"end":case"insideEnd":return i+t;default:return i}}}(r)}function SV(r,e,t,i,n,s,u,a){var h=e.getItemVisual(t,"style");if(a){if(!s.get("roundCap")){var m=r.shape,v=Cp(i.getModel("itemStyle"),m,!0);kt(m,v),r.setShape(m)}}else{var p=i.get(["itemStyle","borderRadius"])||0;r.setShape("r",p)}r.useStyle(h);var x=i.getShallow("cursor");x&&r.attr("cursor",x);var w=a?u?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":u?n.height>=0?"bottom":"top":n.width>=0?"right":"left",T=Ra(i);ro(r,T,{labelFetcher:s,labelDataIndex:t,defaultText:fv(s.getData(),t),inheritColor:h.fill,defaultOpacity:h.opacity,defaultOutsidePosition:w});var C=r.getTextContent();if(a&&C){var I=i.get(["label","position"]);r.textConfig.inside=I==="middle"?!0:null,W1e(r,I==="outside"?w:I,jq(u),i.get(["label","rotate"]))}iW(C,T,s.getRawValue(t),function(R){return Rq(e,R)});var k=i.getModel(["emphasis"]);Kn(r,k.get("focus"),k.get("blurScope"),k.get("disabled")),to(r,i),J1e(n)&&(r.style.fill="none",r.style.stroke="none",ue(r.states,function(R){R.style&&(R.style.fill=R.style.stroke="none")}))}function Q1e(r,e){var t=r.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var i=r.get(["itemStyle","borderWidth"])||0,n=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),s=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(i,n,s)}var ebe=function(){function r(){}return r}(),TV=function(r){lt(e,r);function e(t){var i=r.call(this,t)||this;return i.type="largeBar",i}return e.prototype.getDefaultShape=function(){return new ebe},e.prototype.buildPath=function(t,i){for(var n=i.points,s=this.baseDimIdx,u=1-this.baseDimIdx,a=[],h=[],p=this.barWidth,m=0;m<n.length;m+=3)h[s]=p,h[u]=n[m+2],a[s]=n[m+s],a[u]=n[m+u],t.rect(a[0],a[1],h[0],h[1])},e}(_i);function MV(r,e,t,i){var n=r.getData(),s=n.getLayout("valueAxisHorizontal")?1:0,u=n.getLayout("largeDataIndices"),a=n.getLayout("size"),h=r.getModel("backgroundStyle"),p=n.getLayout("largeBackgroundPoints");if(p){var m=new TV({shape:{points:p},incremental:!!i,silent:!0,z2:0});m.baseDimIdx=s,m.largeDataIndices=u,m.barWidth=a,m.useStyle(h.getItemStyle()),e.add(m),t&&t.push(m)}var v=new TV({shape:{points:n.getLayout("largePoints")},incremental:!!i,ignoreCoarsePointer:!0,z2:1});v.baseDimIdx=s,v.largeDataIndices=u,v.barWidth=a,e.add(v),v.useStyle(n.getVisual("style")),Gr(v).seriesIndex=r.seriesIndex,r.get("silent")||(v.on("mousedown",AV),v.on("mousemove",AV)),t&&t.push(v)}var AV=ok(function(r){var e=this,t=tbe(e,r.offsetX,r.offsetY);Gr(e).dataIndex=t>=0?t:null},30,!1);function tbe(r,e,t){for(var i=r.baseDimIdx,n=1-i,s=r.shape.points,u=r.largeDataIndices,a=[],h=[],p=r.barWidth,m=0,v=s.length/3;m<v;m++){var x=m*3;if(h[i]=p,h[n]=s[x+2],a[i]=s[x+i],a[n]=s[x+n],h[n]<0&&(a[n]+=h[n],h[n]=-h[n]),e>=a[0]&&e<=a[0]+h[0]&&t>=a[1]&&t<=a[1]+h[1])return u[m]}return-1}function Hq(r,e,t){if(nm(t,"cartesian2d")){var i=e,n=t.getArea();return{x:r?i.x:n.x,y:r?n.y:i.y,width:r?i.width:n.width,height:r?n.height:i.height}}else{var n=t.getArea(),s=e;return{cx:n.cx,cy:n.cy,r0:r?n.r0:s.r0,r:r?n.r:s.r,startAngle:r?s.startAngle:0,endAngle:r?s.endAngle:Math.PI*2}}}function rbe(r,e,t){var i=r.type==="polar"?cs:Li;return new i({shape:Hq(e,t,r),silent:!0,z2:0})}var ibe=Z1e;function nbe(r){r.registerChartView(ibe),r.registerSeriesModel(G1e),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,Qr(Z7,"bar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,X7("bar")),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,Gq("bar")),r.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var i=e.componentType||"series";t.eachComponent({mainType:i,query:e},function(n){e.sortInfo&&n.axis.setCategorySortInfo(e.sortInfo)})})}var CV=Math.PI*2,vw=Math.PI/180;function Wq(r,e){return xa(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function qq(r,e){var t=Wq(r,e),i=r.get("center"),n=r.get("radius");Nt(n)||(n=[0,n]);var s=sr(t.width,e.getWidth()),u=sr(t.height,e.getHeight()),a=Math.min(s,u),h=sr(n[0],a/2),p=sr(n[1],a/2),m,v,x=r.coordinateSystem;if(x){var w=x.dataToPoint(i);m=w[0]||0,v=w[1]||0}else Nt(i)||(i=[i,i]),m=sr(i[0],s)+t.x,v=sr(i[1],u)+t.y;return{cx:m,cy:v,r0:h,r:p}}function abe(r,e,t){e.eachSeriesByType(r,function(i){var n=i.getData(),s=n.mapDimension("value"),u=Wq(i,t),a=qq(i,t),h=a.cx,p=a.cy,m=a.r,v=a.r0,x=-i.get("startAngle")*vw,w=i.get("endAngle"),T=i.get("padAngle")*vw;w=w==="auto"?x-CV:-w*vw;var C=i.get("minAngle")*vw,I=C+T,k=0;n.each(s,function(ke){!isNaN(ke)&&k++});var R=n.getSum(s),z=Math.PI/(R||k)*2,$=i.get("clockwise"),j=i.get("roseType"),G=i.get("stillShowZeroSum"),Y=n.getDataExtent(s);Y[0]=0;var Z=$?1:-1,H=[x,w],re=Z*T/2;PL(H,!$),x=H[0],w=H[1];var ne=Math.abs(w-x),se=ne,me=0,Se=x;if(n.setLayout({viewRect:u,r:m}),n.each(s,function(ke,Fe){var Ce;if(isNaN(ke)){n.setItemLayout(Fe,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:$,cx:h,cy:p,r0:v,r:j?NaN:m});return}j!=="area"?Ce=R===0&&G?z:ke*z:Ce=ne/k,Ce<I?(Ce=I,se-=I):me+=ke;var We=Se+Z*Ce,gt=0,St=0;T>Ce?(gt=Se+Z*Ce/2,St=gt):(gt=Se+re,St=We-re),n.setItemLayout(Fe,{angle:Ce,startAngle:gt,endAngle:St,clockwise:$,cx:h,cy:p,r0:v,r:j?on(ke,Y,[v,m]):m}),Se=We}),se<CV&&k)if(se<=.001){var Ie=ne/k;n.each(s,function(ke,Fe){if(!isNaN(ke)){var Ce=n.getItemLayout(Fe);Ce.angle=Ie;var We=0,gt=0;Ie<T?(We=x+Z*(Fe+1/2)*Ie,gt=We):(We=x+Z*Fe*Ie+re,gt=x+Z*(Fe+1)*Ie-re),Ce.startAngle=We,Ce.endAngle=gt}})}else z=se/me,Se=x,n.each(s,function(ke,Fe){if(!isNaN(ke)){var Ce=n.getItemLayout(Fe),We=Ce.angle===I?I:ke*z,gt=0,St=0;We<T?(gt=Se+Z*We/2,St=gt):(gt=Se+re,St=Se+Z*We-re),Ce.startAngle=gt,Ce.endAngle=St,Se+=Z*We}})})}function Ex(r){return{seriesType:r,reset:function(e,t){var i=t.findComponents({mainType:"legend"});if(!(!i||!i.length)){var n=e.getData();n.filterSelf(function(s){for(var u=n.getName(s),a=0;a<i.length;a++)if(!i[a].isSelected(u))return!1;return!0})}}}}var obe=Math.PI/180;function IV(r,e,t,i,n,s,u,a,h,p){if(r.length<2)return;function m(C){for(var I=C.rB,k=I*I,R=0;R<C.list.length;R++){var z=C.list[R],$=Math.abs(z.label.y-t),j=i+z.len,G=j*j,Y=Math.sqrt((1-Math.abs($*$/k))*G),Z=e+(Y+z.len2)*n,H=Z-z.label.x,re=z.targetTextWidth-H*n;Zq(z,re,!0),z.label.x=Z}}function v(C){for(var I={list:[],maxY:0},k={list:[],maxY:0},R=0;R<C.length;R++)if(C[R].labelAlignTo==="none"){var z=C[R],$=z.label.y>t?k:I,j=Math.abs(z.label.y-t);if(j>=$.maxY){var G=z.label.x-e-z.len2*n,Y=i+z.len,Z=Math.abs(G)<Y?Math.sqrt(j*j/(1-G*G/Y/Y)):Y;$.rB=Z,$.maxY=j}$.list.push(z)}m(I),m(k)}for(var x=r.length,w=0;w<x;w++)if(r[w].position==="outer"&&r[w].labelAlignTo==="labelLine"){var T=r[w].label.x-p;r[w].linePoints[1][0]+=T,r[w].label.x=p}vq(r,h,h+u)&&v(r)}function sbe(r,e,t,i,n,s,u,a){for(var h=[],p=[],m=Number.MAX_VALUE,v=-Number.MAX_VALUE,x=0;x<r.length;x++){var w=r[x].label;cI(r[x])||(w.x<e?(m=Math.min(m,w.x),h.push(r[x])):(v=Math.max(v,w.x),p.push(r[x])))}for(var x=0;x<r.length;x++){var T=r[x];if(!cI(T)&&T.linePoints){if(T.labelStyleWidth!=null)continue;var w=T.label,C=T.linePoints,I=void 0;T.labelAlignTo==="edge"?w.x<e?I=C[2][0]-T.labelDistance-u-T.edgeDistance:I=u+n-T.edgeDistance-C[2][0]-T.labelDistance:T.labelAlignTo==="labelLine"?w.x<e?I=m-u-T.bleedMargin:I=u+n-v-T.bleedMargin:w.x<e?I=w.x-u-T.bleedMargin:I=u+n-w.x-T.bleedMargin,T.targetTextWidth=I,Zq(T,I)}}IV(p,e,t,i,1,n,s,u,a,v),IV(h,e,t,i,-1,n,s,u,a,m);for(var x=0;x<r.length;x++){var T=r[x];if(!cI(T)&&T.linePoints){var w=T.label,C=T.linePoints,k=T.labelAlignTo==="edge",R=w.style.padding,z=R?R[1]+R[3]:0,$=w.style.backgroundColor?0:z,j=T.rect.width+$,G=C[1][0]-C[2][0];k?w.x<e?C[2][0]=u+T.edgeDistance+j+T.labelDistance:C[2][0]=u+n-T.edgeDistance-j-T.labelDistance:(w.x<e?C[2][0]=w.x+T.labelDistance:C[2][0]=w.x-T.labelDistance,C[1][0]=C[2][0]+G),C[1][1]=C[2][1]=w.y}}}function Zq(r,e,t){if(t===void 0&&(t=!1),r.labelStyleWidth==null){var i=r.label,n=i.style,s=r.rect,u=n.backgroundColor,a=n.padding,h=a?a[1]+a[3]:0,p=n.overflow,m=s.width+(u?0:h);if(e<m||t){var v=s.height;if(p&&p.match("break")){i.setStyle("backgroundColor",null),i.setStyle("width",e-h);var x=i.getBoundingRect();i.setStyle("width",Math.ceil(x.width)),i.setStyle("backgroundColor",u)}else{var w=e-h,T=e<m?w:t?w>r.unconstrainedWidth?null:w:null;i.setStyle("width",T)}var C=i.getBoundingRect();s.width=C.width;var I=(i.style.margin||0)+2.1;s.height=C.height+I,s.y-=(s.height-v)/2}}}function cI(r){return r.position==="center"}function lbe(r){var e=r.getData(),t=[],i,n,s=!1,u=(r.get("minShowLabelAngle")||0)*obe,a=e.getLayout("viewRect"),h=e.getLayout("r"),p=a.width,m=a.x,v=a.y,x=a.height;function w(G){G.ignore=!0}function T(G){if(!G.ignore)return!0;for(var Y in G.states)if(G.states[Y].ignore===!1)return!0;return!1}e.each(function(G){var Y=e.getItemGraphicEl(G),Z=Y.shape,H=Y.getTextContent(),re=Y.getTextGuideLine(),ne=e.getItemModel(G),se=ne.getModel("label"),me=se.get("position")||ne.get(["emphasis","label","position"]),Se=se.get("distanceToLabelLine"),Ie=se.get("alignTo"),ke=sr(se.get("edgeDistance"),p),Fe=se.get("bleedMargin"),Ce=ne.getModel("labelLine"),We=Ce.get("length");We=sr(We,p);var gt=Ce.get("length2");if(gt=sr(gt,p),Math.abs(Z.endAngle-Z.startAngle)<u){ue(H.states,w),H.ignore=!0,re&&(ue(re.states,w),re.ignore=!0);return}if(!!T(H)){var St=(Z.startAngle+Z.endAngle)/2,et=Math.cos(St),ht=Math.sin(St),$e,He,dt,nt;i=Z.cx,n=Z.cy;var vt=me==="inside"||me==="inner";if(me==="center")$e=Z.cx,He=Z.cy,nt="center";else{var Pt=(vt?(Z.r+Z.r0)/2*et:Z.r*et)+i,jt=(vt?(Z.r+Z.r0)/2*ht:Z.r*ht)+n;if($e=Pt+et*3,He=jt+ht*3,!vt){var Et=Pt+et*(We+h-Z.r),Wt=jt+ht*(We+h-Z.r),Re=Et+(et<0?-1:1)*gt,Ve=Wt;Ie==="edge"?$e=et<0?m+ke:m+p-ke:$e=Re+(et<0?-Se:Se),He=Ve,dt=[[Pt,jt],[Et,Wt],[Re,Ve]]}nt=vt?"center":Ie==="edge"?et>0?"right":"left":et>0?"left":"right"}var Ue=Math.PI,Be=0,ce=se.get("rotate");if(Vi(ce))Be=ce*(Ue/180);else if(me==="center")Be=0;else if(ce==="radial"||ce===!0){var ye=et<0?-St+Ue:-St;Be=ye}else if(ce==="tangential"&&me!=="outside"&&me!=="outer"){var De=Math.atan2(et,ht);De<0&&(De=Ue*2+De);var qe=ht>0;qe&&(De=Ue+De),Be=De-Ue}if(s=!!Be,H.x=$e,H.y=He,H.rotation=Be,H.setStyle({verticalAlign:"middle"}),vt){H.setStyle({align:nt});var xt=H.states.select;xt&&(xt.x+=H.x,xt.y+=H.y)}else{var Ze=H.getBoundingRect().clone();Ze.applyTransform(H.getComputedTransform());var Je=(H.style.margin||0)+2.1;Ze.y-=Je/2,Ze.height+=Je,t.push({label:H,labelLine:re,position:me,len:We,len2:gt,minTurnAngle:Ce.get("minTurnAngle"),maxSurfaceAngle:Ce.get("maxSurfaceAngle"),surfaceNormal:new ii(et,ht),linePoints:dt,textAlign:nt,labelDistance:Se,labelAlignTo:Ie,edgeDistance:ke,bleedMargin:Fe,rect:Ze,unconstrainedWidth:Ze.width,labelStyleWidth:H.style.width})}Y.setTextConfig({inside:vt})}}),!s&&r.get("avoidLabelOverlap")&&sbe(t,i,n,h,p,x,m,v);for(var C=0;C<t.length;C++){var I=t[C],k=I.label,R=I.labelLine,z=isNaN(k.x)||isNaN(k.y);if(k){k.setStyle({align:I.textAlign}),z&&(ue(k.states,w),k.ignore=!0);var $=k.states.select;$&&($.x+=k.x,$.y+=k.y)}if(R){var j=I.linePoints;z||!j?(ue(R.states,w),R.ignore=!0):(pq(j,I.minTurnAngle),yxe(j,I.surfaceNormal,I.maxSurfaceAngle),R.setShape({points:j}),k.__hostTarget.textGuideLineConfig={anchor:new ii(j[0][0],j[0][1])})}}}var ube=function(r){lt(e,r);function e(t,i,n){var s=r.call(this)||this;s.z2=2;var u=new Ni;return s.setTextContent(u),s.updateData(t,i,n,!0),s}return e.prototype.updateData=function(t,i,n,s){var u=this,a=t.hostModel,h=t.getItemModel(i),p=h.getModel("emphasis"),m=t.getItemLayout(i),v=kt(Cp(h.getModel("itemStyle"),m,!0),m);if(isNaN(v.startAngle)){u.setShape(v);return}if(s){u.setShape(v);var x=a.getShallow("animationType");a.ecModel.ssr?(Bn(u,{scaleX:0,scaleY:0},a,{dataIndex:i,isFrom:!0}),u.originX=v.cx,u.originY=v.cy):x==="scale"?(u.shape.r=m.r0,Bn(u,{shape:{r:m.r}},a,i)):n!=null?(u.setShape({startAngle:n,endAngle:n}),Bn(u,{shape:{startAngle:m.startAngle,endAngle:m.endAngle}},a,i)):(u.shape.endAngle=m.startAngle,ji(u,{shape:{endAngle:m.endAngle}},a,i))}else nu(u),ji(u,{shape:v},a,i);u.useStyle(t.getItemVisual(i,"style")),to(u,h);var w=(m.startAngle+m.endAngle)/2,T=a.get("selectedOffset"),C=Math.cos(w)*T,I=Math.sin(w)*T,k=h.getShallow("cursor");k&&u.attr("cursor",k),this._updateLabel(a,t,i),u.ensureState("emphasis").shape=kt({r:m.r+(p.get("scale")&&p.get("scaleSize")||0)},Cp(p.getModel("itemStyle"),m)),kt(u.ensureState("select"),{x:C,y:I,shape:Cp(h.getModel(["select","itemStyle"]),m)}),kt(u.ensureState("blur"),{shape:Cp(h.getModel(["blur","itemStyle"]),m)});var R=u.getTextGuideLine(),z=u.getTextContent();R&&kt(R.ensureState("select"),{x:C,y:I}),kt(z.ensureState("select"),{x:C,y:I}),Kn(this,p.get("focus"),p.get("blurScope"),p.get("disabled"))},e.prototype._updateLabel=function(t,i,n){var s=this,u=i.getItemModel(n),a=u.getModel("labelLine"),h=i.getItemVisual(n,"style"),p=h&&h.fill,m=h&&h.opacity;ro(s,Ra(u),{labelFetcher:i.hostModel,labelDataIndex:n,inheritColor:p,defaultOpacity:m,defaultText:t.getFormattedLabel(n,"normal")||i.getName(n)});var v=s.getTextContent();s.setTextConfig({position:null,rotation:null}),v.attr({z2:10});var x=t.get(["label","position"]);if(x!=="outside"&&x!=="outer")s.removeTextGuideLine();else{var w=this.getTextGuideLine();w||(w=new ds,this.setTextGuideLine(w)),xk(this,bk(u),{stroke:p,opacity:Ju(a.get(["lineStyle","opacity"]),m,1)})}},e}(cs),cbe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,i,n,s){var u=t.getData(),a=this._data,h=this.group,p;if(!a&&u.count()>0){for(var m=u.getItemLayout(0),v=1;isNaN(m&&m.startAngle)&&v<u.count();++v)m=u.getItemLayout(v);m&&(p=m.startAngle)}if(this._emptyCircleSector&&h.remove(this._emptyCircleSector),u.count()===0&&t.get("showEmptyCircle")){var x=new cs({shape:qq(t,n)});x.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=x,h.add(x)}u.diff(a).add(function(w){var T=new ube(u,w,p);u.setItemGraphicEl(w,T),h.add(T)}).update(function(w,T){var C=a.getItemGraphicEl(T);C.updateData(u,w,p),C.off("click"),h.add(C),u.setItemGraphicEl(w,C)}).remove(function(w){var T=a.getItemGraphicEl(w);H0(T,t,w)}).execute(),lbe(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=u)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,i){var n=i.getData(),s=n.getItemLayout(0);if(s){var u=t[0]-s.cx,a=t[1]-s.cy,h=Math.sqrt(u*u+a*a);return h<=s.r&&h>=s.r0}},e.type="pie",e}(Cn),hbe=cbe;function $v(r,e,t){e=Nt(e)&&{coordDimensions:e}||kt({encodeDefine:r.getEncode()},e);var i=r.getSource(),n=bx(i,e).dimensions,s=new No(n,r);return s.initData(i,t),s}var dbe=function(){function r(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return r.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},r.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},r.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},r.prototype.getItemVisual=function(e,t){var i=this._getDataWithEncodedVisual();return i.getItemVisual(e,t)},r}(),Dx=dbe,fbe=ki(),pbe=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.init=function(t){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Dx(xr(this.getData,this),xr(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){r.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return $v(this,{coordDimensions:["value"],encodeDefaulter:Qr(YL,this)})},e.prototype.getDataParams=function(t){var i=this.getData(),n=fbe(i),s=n.seats;if(!s){var u=[];i.each(i.mapDimension("value"),function(h){u.push(h)}),s=n.seats=Spe(u,i.hostModel.get("percentPrecision"))}var a=r.prototype.getDataParams.call(this,t);return a.percent=s[t]||0,a.$vars.push("percent"),a},e.prototype._defaultLabelLine=function(t){jp(t,"labelLine",["show"]);var i=t.labelLine,n=t.emphasis.labelLine;i.show=i.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(Gn),mbe=pbe;function gbe(r){return{seriesType:r,reset:function(e,t){var i=e.getData();i.filterSelf(function(n){var s=i.mapDimension("value"),u=i.get(s,n);return!(Vi(u)&&!isNaN(u)&&u<0)})}}}function vbe(r){r.registerChartView(hbe),r.registerSeriesModel(mbe),h7("pie",r.registerAction),r.registerLayout(Qr(abe,"pie")),r.registerProcessor(Ex("pie")),r.registerProcessor(gbe("pie"))}var _be=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,i){return gh(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t==null?this.option.large?5e3:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t==null?this.option.large?1e4:this.get("progressiveThreshold"):t},e.prototype.brushSelector=function(t,i,n){return n.point(i.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(Gn),ybe=_be,Xq=4,xbe=function(){function r(){}return r}(),bbe=function(r){lt(e,r);function e(t){var i=r.call(this,t)||this;return i._off=0,i.hoverDataIdx=-1,i}return e.prototype.getDefaultShape=function(){return new xbe},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,i){var n=i.points,s=i.size,u=this.symbolProxy,a=u.shape,h=t.getContext?t.getContext():t,p=h&&s[0]<Xq,m=this.softClipShape,v;if(p){this._ctx=h;return}for(this._ctx=null,v=this._off;v<n.length;){var x=n[v++],w=n[v++];isNaN(x)||isNaN(w)||m&&!m.contain(x,w)||(a.x=x-s[0]/2,a.y=w-s[1]/2,a.width=s[0],a.height=s[1],u.buildPath(t,a,!0))}this.incremental&&(this._off=v,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,i=t.points,n=t.size,s=this._ctx,u=this.softClipShape,a;if(!!s){for(a=this._off;a<i.length;){var h=i[a++],p=i[a++];isNaN(h)||isNaN(p)||u&&!u.contain(h,p)||s.fillRect(h-n[0]/2,p-n[1]/2,n[0],n[1])}this.incremental&&(this._off=a,this.notClear=!0)}},e.prototype.findDataIndex=function(t,i){for(var n=this.shape,s=n.points,u=n.size,a=Math.max(u[0],4),h=Math.max(u[1],4),p=s.length/2-1;p>=0;p--){var m=p*2,v=s[m]-a/2,x=s[m+1]-h/2;if(t>=v&&i>=x&&t<=v+a&&i<=x+h)return p}return-1},e.prototype.contain=function(t,i){var n=this.transformCoordToLocal(t,i),s=this.getBoundingRect();if(t=n[0],i=n[1],s.contain(t,i)){var u=this.hoverDataIdx=this.findDataIndex(t,i);return u>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var i=this.shape,n=i.points,s=i.size,u=s[0],a=s[1],h=1/0,p=1/0,m=-1/0,v=-1/0,x=0;x<n.length;){var w=n[x++],T=n[x++];h=Math.min(w,h),m=Math.max(w,m),p=Math.min(T,p),v=Math.max(T,v)}t=this._rect=new ai(h-u/2,p-a/2,m-h+u,v-p+a)}return t},e}(_i),wbe=function(){function r(){this.group=new Vr}return r.prototype.updateData=function(e,t){this._clear();var i=this._create();i.setShape({points:e.getLayout("points")}),this._setCommon(i,e,t)},r.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(i){if(i.startIndex!=null){var n=(i.endIndex-i.startIndex)*2,s=i.startIndex*4*2;t=new Float32Array(t.buffer,s,n)}i.setShape("points",t),i.reset()})},r.prototype.incrementalPrepareUpdate=function(e){this._clear()},r.prototype.incrementalUpdate=function(e,t,i){var n=this._newAdded[0],s=t.getLayout("points"),u=n&&n.shape.points;if(u&&u.length<2e4){var a=u.length,h=new Float32Array(a+s.length);h.set(u),h.set(s,a),n.endIndex=e.end,n.setShape({points:h})}else{this._newAdded=[];var p=this._create();p.startIndex=e.start,p.endIndex=e.end,p.incremental=!0,p.setShape({points:s}),this._setCommon(p,t,i)}},r.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},r.prototype._create=function(){var e=new bbe({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},r.prototype._setCommon=function(e,t,i){var n=t.hostModel;i=i||{};var s=t.getVisual("symbolSize");e.setShape("size",s instanceof Array?s:[s,s]),e.softClipShape=i.clipShape||null,e.symbolProxy=fa(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var u=e.shape.size[0]<Xq;e.useStyle(n.getModel("itemStyle").getItemStyle(u?["color","shadowBlur","shadowColor"]:["color"]));var a=t.getVisual("style"),h=a&&a.fill;h&&e.setColor(h);var p=Gr(e);p.seriesIndex=n.seriesIndex,e.on("mousemove",function(m){p.dataIndex=null;var v=e.hoverDataIdx;v>=0&&(p.dataIndex=v+(e.startIndex||0))})},r.prototype.remove=function(){this._clear()},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}(),Sbe=wbe,Tbe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n){var s=t.getData(),u=this._updateSymbolDraw(s,t);u.updateData(s,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,i,n){var s=t.getData(),u=this._updateSymbolDraw(s,t);u.incrementalPrepareUpdate(s),this._finished=!1},e.prototype.incrementalRender=function(t,i,n){this._symbolDraw.incrementalUpdate(t,i.getData(),{clipShape:this._getClipShape(i)}),this._finished=t.end===i.getData().count()},e.prototype.updateTransform=function(t,i,n){var s=t.getData();if(this.group.dirty(),!this._finished||s.count()>1e4)return{update:!0};var u=Ix("").reset(t,i,n);u.progress&&u.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout(s)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){if(!!t.get("clip",!0)){var i=t.coordinateSystem;return i&&i.getArea&&i.getArea(.1)}},e.prototype._updateSymbolDraw=function(t,i){var n=this._symbolDraw,s=i.pipelineContext,u=s.large;return(!n||u!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=u?new Sbe:new Ax,this._isLargeDraw=u,this.group.removeAll()),this.group.add(n.group),n},e.prototype.remove=function(t,i){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(Cn),Mbe=Tbe,Abe=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(Oi),Cbe=Abe,jD=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",da).models[0]},e.type="cartesian2dAxis",e}(Oi);pa(jD,Tx);var Yq={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Ibe=ni({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Yq),Ck=ni({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},Yq),Ebe=ni({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},Ck),Dbe=zr({logBase:10},Ck),Kq={category:Ibe,value:Ck,time:Ebe,log:Dbe},Pbe={value:1,category:1,time:1,log:1};function pv(r,e,t,i){ue(Pbe,function(n,s){var u=ni(ni({},Kq[s],!0),i,!0),a=function(h){lt(p,h);function p(){var m=h!==null&&h.apply(this,arguments)||this;return m.type=e+"Axis."+s,m}return p.prototype.mergeDefaultAndTheme=function(m,v){var x=q0(this),w=x?Ov(m):{},T=v.getTheme();ni(m,T.get(s+"Axis")),ni(m,this.getDefaultOption()),m.type=EV(m),x&&Bd(m,w,x)},p.prototype.optionUpdated=function(){var m=this.option;m.type==="category"&&(this.__ordinalMeta=BD.createByAxisModel(this))},p.prototype.getCategories=function(m){var v=this.option;if(v.type==="category")return m?v.data:this.__ordinalMeta.categories},p.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},p.type=e+"Axis."+s,p.defaultOption=u,p}(t);r.registerComponentModel(a)}),r.registerSubTypeDefaulter(e+"Axis",EV)}function EV(r){return r.type||(r.data?"category":"value")}var Lbe=function(){function r(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return r.prototype.getAxis=function(e){return this._axes[e]},r.prototype.getAxes=function(){return Ht(this._dimList,function(e){return this._axes[e]},this)},r.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),un(this.getAxes(),function(t){return t.scale.type===e})},r.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},r}(),kbe=Lbe,HD=["x","y"];function DV(r){return r.type==="interval"||r.type==="time"}var Rbe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=HD,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,i=this.getAxis("y").scale;if(!(!DV(t)||!DV(i))){var n=t.getExtent(),s=i.getExtent(),u=this.dataToPoint([n[0],s[0]]),a=this.dataToPoint([n[1],s[1]]),h=n[1]-n[0],p=s[1]-s[0];if(!(!h||!p)){var m=(a[0]-u[0])/h,v=(a[1]-u[1])/p,x=u[0]-n[0]*m,w=u[1]-s[0]*v,T=this._transform=[m,0,0,v,x,w];this._invTransform=Cv([],T)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var i=this.getAxis("x"),n=this.getAxis("y");return i.contain(i.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,i){var n=this.dataToPoint(t),s=this.dataToPoint(i),u=this.getArea(),a=new ai(n[0],n[1],s[0]-n[0],s[1]-n[1]);return u.intersect(a)},e.prototype.dataToPoint=function(t,i,n){n=n||[];var s=t[0],u=t[1];if(this._transform&&s!=null&&isFinite(s)&&u!=null&&isFinite(u))return Qa(n,t,this._transform);var a=this.getAxis("x"),h=this.getAxis("y");return n[0]=a.toGlobalCoord(a.dataToCoord(s,i)),n[1]=h.toGlobalCoord(h.dataToCoord(u,i)),n},e.prototype.clampData=function(t,i){var n=this.getAxis("x").scale,s=this.getAxis("y").scale,u=n.getExtent(),a=s.getExtent(),h=n.parse(t[0]),p=s.parse(t[1]);return i=i||[],i[0]=Math.min(Math.max(Math.min(u[0],u[1]),h),Math.max(u[0],u[1])),i[1]=Math.min(Math.max(Math.min(a[0],a[1]),p),Math.max(a[0],a[1])),i},e.prototype.pointToData=function(t,i){var n=[];if(this._invTransform)return Qa(n,t,this._invTransform);var s=this.getAxis("x"),u=this.getAxis("y");return n[0]=s.coordToData(s.toLocalCoord(t[0]),i),n[1]=u.coordToData(u.toLocalCoord(t[1]),i),n},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(t){t=t||0;var i=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),s=Math.min(i[0],i[1])-t,u=Math.min(n[0],n[1])-t,a=Math.max(i[0],i[1])-s+t,h=Math.max(n[0],n[1])-u+t;return new ai(s,u,a,h)},e}(kbe),Obe=function(r){lt(e,r);function e(t,i,n,s,u){var a=r.call(this,t,i,n)||this;return a.index=0,a.type=s||"value",a.position=u||"bottom",a}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var i=this.getExtent();return i[0]=this.toGlobalCoord(i[0]),i[1]=this.toGlobalCoord(i[1]),t&&i[0]>i[1]&&i.reverse(),i},e.prototype.pointToData=function(t,i){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),i)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(lu),zbe=Obe;function WD(r,e,t){t=t||{};var i=r.coordinateSystem,n=e.axis,s={},u=n.getAxesOnZeroOf()[0],a=n.position,h=u?"onZero":a,p=n.dim,m=i.getRect(),v=[m.x,m.x+m.width,m.y,m.y+m.height],x={left:0,right:1,top:0,bottom:1,onZero:2},w=e.get("offset")||0,T=p==="x"?[v[2]-w,v[3]+w]:[v[0]-w,v[1]+w];if(u){var C=u.toGlobalCoord(u.dataToCoord(0));T[x.onZero]=Math.max(Math.min(C,T[1]),T[0])}s.position=[p==="y"?T[x[h]]:v[0],p==="x"?T[x[h]]:v[3]],s.rotation=Math.PI/2*(p==="x"?0:1);var I={top:-1,bottom:1,left:-1,right:1};s.labelDirection=s.tickDirection=s.nameDirection=I[a],s.labelOffset=u?T[x[a]]-T[x.onZero]:0,e.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),Ga(t.labelInside,e.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var k=e.get(["axisLabel","rotate"]);return s.labelRotate=h==="top"?-k:k,s.z2=1,s}function PV(r){return r.get("coordinateSystem")==="cartesian2d"}function LV(r){var e={xAxisModel:null,yAxisModel:null};return ue(e,function(t,i){var n=i.replace(/Model$/,""),s=r.getReferringComponents(n,da).models[0];e[i]=s}),e}var hI=Math.log;function Jq(r,e,t){var i=Nd.prototype,n=i.getTicks.call(t),s=i.getTicks.call(t,!0),u=n.length-1,a=i.getInterval.call(t),h=rq(r,e),p=h.extent,m=h.fixMin,v=h.fixMax;if(r.type==="log"){var x=hI(r.base);p=[hI(p[0])/x,hI(p[1])/x]}r.setExtent(p[0],p[1]),r.calcNiceExtent({splitNumber:u,fixMin:m,fixMax:v});var w=i.getExtent.call(r);m&&(p[0]=w[0]),v&&(p[1]=w[1]);var T=i.getInterval.call(r),C=p[0],I=p[1];if(m&&v)T=(I-C)/u;else if(m)for(I=p[0]+T*u;I<p[1]&&isFinite(I)&&isFinite(p[1]);)T=YC(T),I=p[0]+T*u;else if(v)for(C=p[1]-T*u;C>p[0]&&isFinite(C)&&isFinite(p[0]);)T=YC(T),C=p[1]-T*u;else{var k=r.getTicks().length-1;k>u&&(T=YC(T));var R=T*u;I=Math.ceil(p[1]/T)*T,C=ra(I-R),C<0&&p[0]>=0?(C=0,I=ra(R)):I>0&&p[1]<=0&&(I=0,C=-ra(R))}var z=(n[0].value-s[0].value)/a,$=(n[u].value-s[u].value)/a;i.setExtent.call(r,C+T*z,I+T*$),i.setInterval.call(r,T),(z||$)&&i.setNiceExtent.call(r,C+T,I-T)}var Bbe=function(){function r(e,t,i){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=HD,this._initCartesian(e,t,i),this.model=e}return r.prototype.getRect=function(){return this._rect},r.prototype.update=function(e,t){var i=this._axesMap;this._updateScale(e,this.model);function n(u){var a,h=bi(u),p=h.length;if(!!p){for(var m=[],v=p-1;v>=0;v--){var x=+h[v],w=u[x],T=w.model,C=w.scale;FD(C)&&T.get("alignTicks")&&T.get("interval")==null?m.push(w):(dv(C,T),FD(C)&&(a=w))}m.length&&(a||(a=m.pop(),dv(a.scale,a.model)),ue(m,function(I){Jq(I.scale,I.model,a.scale)}))}}n(i.x),n(i.y);var s={};ue(i.x,function(u){kV(i,"y",u,s)}),ue(i.y,function(u){kV(i,"x",u,s)}),this.resize(this.model,t)},r.prototype.resize=function(e,t,i){var n=e.getBoxLayoutParams(),s=!i&&e.get("containLabel"),u=xa(n,{width:t.getWidth(),height:t.getHeight()});this._rect=u;var a=this._axesList;h(),s&&(ue(a,function(p){if(!p.model.get(["axisLabel","inside"])){var m=X0e(p);if(m){var v=p.isHorizontal()?"height":"width",x=p.model.get(["axisLabel","margin"]);u[v]-=m[v]+x,p.position==="top"?u.y+=m.height+x:p.position==="left"&&(u.x+=m.width+x)}}}),h()),ue(this._coordsList,function(p){p.calcAffineTransform()});function h(){ue(a,function(p){var m=p.isHorizontal(),v=m?[0,u.width]:[0,u.height],x=p.inverse?1:0;p.setExtent(v[x],v[1-x]),Fbe(p,m?u.x:u.y)})}},r.prototype.getAxis=function(e,t){var i=this._axesMap[e];if(i!=null)return i[t||0]},r.prototype.getAxes=function(){return this._axesList.slice()},r.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var i="x"+e+"y"+t;return this._coordsMap[i]}Br(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var n=0,s=this._coordsList;n<s.length;n++)if(s[n].getAxis("x").index===e||s[n].getAxis("y").index===t)return s[n]},r.prototype.getCartesians=function(){return this._coordsList.slice()},r.prototype.convertToPixel=function(e,t,i){var n=this._findConvertTarget(t);return n.cartesian?n.cartesian.dataToPoint(i):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(i)):null},r.prototype.convertFromPixel=function(e,t,i){var n=this._findConvertTarget(t);return n.cartesian?n.cartesian.pointToData(i):n.axis?n.axis.coordToData(n.axis.toLocalCoord(i)):null},r.prototype._findConvertTarget=function(e){var t=e.seriesModel,i=e.xAxisModel||t&&t.getReferringComponents("xAxis",da).models[0],n=e.yAxisModel||t&&t.getReferringComponents("yAxis",da).models[0],s=e.gridModel,u=this._coordsList,a,h;if(t)a=t.coordinateSystem,di(u,a)<0&&(a=null);else if(i&&n)a=this.getCartesian(i.componentIndex,n.componentIndex);else if(i)h=this.getAxis("x",i.componentIndex);else if(n)h=this.getAxis("y",n.componentIndex);else if(s){var p=s.coordinateSystem;p===this&&(a=this._coordsList[0])}return{cartesian:a,axis:h}},r.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},r.prototype._initCartesian=function(e,t,i){var n=this,s=this,u={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},h={x:0,y:0};if(t.eachComponent("xAxis",p("x"),this),t.eachComponent("yAxis",p("y"),this),!h.x||!h.y){this._axesMap={},this._axesList=[];return}this._axesMap=a,ue(a.x,function(m,v){ue(a.y,function(x,w){var T="x"+v+"y"+w,C=new Rbe(T);C.master=n,C.model=e,n._coordsMap[T]=C,n._coordsList.push(C),C.addAxis(m),C.addAxis(x)})});function p(m){return function(v,x){if(!!dI(v,e)){var w=v.get("position");m==="x"?w!=="top"&&w!=="bottom"&&(w=u.bottom?"top":"bottom"):w!=="left"&&w!=="right"&&(w=u.left?"right":"left"),u[w]=!0;var T=new zbe(m,u2(v),[0,0],v.get("type"),w),C=T.type==="category";T.onBand=C&&v.get("boundaryGap"),T.inverse=v.get("inverse"),v.axis=T,T.model=v,T.grid=s,T.index=x,s._axesList.push(T),a[m][x]=T,h[m]++}}}},r.prototype._updateScale=function(e,t){ue(this._axesList,function(n){if(n.scale.setExtent(1/0,-1/0),n.type==="category"){var s=n.model.get("categorySortInfo");n.scale.setSortInfo(s)}}),e.eachSeries(function(n){if(PV(n)){var s=LV(n),u=s.xAxisModel,a=s.yAxisModel;if(!dI(u,t)||!dI(a,t))return;var h=this.getCartesian(u.componentIndex,a.componentIndex),p=n.getData(),m=h.getAxis("x"),v=h.getAxis("y");i(p,m),i(p,v)}},this);function i(n,s){ue(GS(n,s.dim),function(u){s.scale.unionExtentFromData(n,u)})}},r.prototype.getTooltipAxes=function(e){var t=[],i=[];return ue(this.getCartesians(),function(n){var s=e!=null&&e!=="auto"?n.getAxis(e):n.getBaseAxis(),u=n.getOtherAxis(s);di(t,s)<0&&t.push(s),di(i,u)<0&&i.push(u)}),{baseAxes:t,otherAxes:i}},r.create=function(e,t){var i=[];return e.eachComponent("grid",function(n,s){var u=new r(n,e,t);u.name="grid_"+s,u.resize(n,t,!0),n.coordinateSystem=u,i.push(u)}),e.eachSeries(function(n){if(!!PV(n)){var s=LV(n),u=s.xAxisModel,a=s.yAxisModel,h=u.getCoordSysModel(),p=h.coordinateSystem;n.coordinateSystem=p.getCartesian(u.componentIndex,a.componentIndex)}}),i},r.dimensions=HD,r}();function dI(r,e){return r.getCoordSysModel()===e}function kV(r,e,t,i){t.getAxesOnZeroOf=function(){return s?[s]:[]};var n=r[e],s,u=t.model,a=u.get(["axisLine","onZero"]),h=u.get(["axisLine","onZeroAxisIndex"]);if(!a)return;if(h!=null)RV(n[h])&&(s=n[h]);else for(var p in n)if(n.hasOwnProperty(p)&&RV(n[p])&&!i[m(n[p])]){s=n[p];break}s&&(i[m(s)]=!0);function m(v){return v.dim+"_"+v.index}}function RV(r){return r&&r.type!=="category"&&r.type!=="time"&&Z0e(r)}function Fbe(r,e){var t=r.getExtent(),i=t[0]+t[1];r.toGlobalCoord=r.dim==="x"?function(n){return n+e}:function(n){return i-n+e},r.toLocalCoord=r.dim==="x"?function(n){return n-e}:function(n){return i-n+e}}var Nbe=Bbe,bd=Math.PI,Vp=function(){function r(e,t){this.group=new Vr,this.opt=t,this.axisModel=e,zr(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var i=new Vr({x:t.position[0],y:t.position[1],rotation:t.rotation});i.updateTransform(),this._transformGroup=i}return r.prototype.hasBuilder=function(e){return!!OV[e]},r.prototype.add=function(e){OV[e](this.opt,this.axisModel,this.group,this._transformGroup)},r.prototype.getGroup=function(){return this.group},r.innerTextLayout=function(e,t,i){var n=Kj(t-e),s,u;return V0(n)?(u=i>0?"top":"bottom",s="center"):V0(n-bd)?(u=i>0?"bottom":"top",s="center"):(u="middle",n>0&&n<bd?s=i>0?"right":"left":s=i>0?"left":"right"),{rotation:n,textAlign:s,textVerticalAlign:u}},r.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},r.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},r}(),OV={axisLine:function(r,e,t,i){var n=e.get(["axisLine","show"]);if(n==="auto"&&r.handleAutoShown&&(n=r.handleAutoShown("axisLine")),!!n){var s=e.axis.getExtent(),u=i.transform,a=[s[0],0],h=[s[1],0],p=a[0]>h[0];u&&(Qa(a,a,u),Qa(h,h,u));var m=kt({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),v=new Ua({shape:{x1:a[0],y1:a[1],x2:h[0],y2:h[1]},style:m,strokeContainThreshold:r.strokeContainThreshold||5,silent:!0,z2:1});uv(v.shape,v.style.lineWidth),v.anid="line",t.add(v);var x=e.get(["axisLine","symbol"]);if(x!=null){var w=e.get(["axisLine","symbolSize"]);gr(x)&&(x=[x,x]),(gr(w)||Vi(w))&&(w=[w,w]);var T=rm(e.get(["axisLine","symbolOffset"])||0,w),C=w[0],I=w[1];ue([{rotate:r.rotation+Math.PI/2,offset:T[0],r:0},{rotate:r.rotation-Math.PI/2,offset:T[1],r:Math.sqrt((a[0]-h[0])*(a[0]-h[0])+(a[1]-h[1])*(a[1]-h[1]))}],function(k,R){if(x[R]!=="none"&&x[R]!=null){var z=fa(x[R],-C/2,-I/2,C,I,m.stroke,!0),$=k.r+k.offset,j=p?h:a;z.attr({rotation:k.rotate,x:j[0]+$*Math.cos(r.rotation),y:j[1]-$*Math.sin(r.rotation),silent:!0,z2:11}),t.add(z)}})}}},axisTickLabel:function(r,e,t,i){var n=Gbe(t,i,e,r),s=jbe(t,i,e,r);if($be(e,s,n),Ube(t,i,e,r.tickDirection),e.get(["axisLabel","hideOverlap"])){var u=mq(Ht(s,function(a){return{label:a,priority:a.z2,defaultAttr:{ignore:a.ignore}}}));_q(u)}},axisName:function(r,e,t,i){var n=Ga(r.axisName,e.get("name"));if(!!n){var s=e.get("nameLocation"),u=r.nameDirection,a=e.getModel("nameTextStyle"),h=e.get("nameGap")||0,p=e.axis.getExtent(),m=p[0]>p[1]?-1:1,v=[s==="start"?p[0]-m*h:s==="end"?p[1]+m*h:(p[0]+p[1])/2,BV(s)?r.labelOffset+u*h:0],x,w=e.get("nameRotate");w!=null&&(w=w*bd/180);var T;BV(s)?x=Vp.innerTextLayout(r.rotation,w!=null?w:r.rotation,u):(x=Vbe(r.rotation,s,w||0,p),T=r.axisNameAvailableWidth,T!=null&&(T=Math.abs(T/Math.sin(x.rotation)),!isFinite(T)&&(T=null)));var C=a.getFont(),I=e.get("nameTruncate",!0)||{},k=I.ellipsis,R=Ga(r.nameTruncateMaxWidth,I.maxWidth,T),z=new Ni({x:v[0],y:v[1],rotation:x.rotation,silent:Vp.isLabelSilent(e),style:Mn(a,{text:n,font:C,overflow:"truncate",width:R,ellipsis:k,fill:a.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:a.get("align")||x.textAlign,verticalAlign:a.get("verticalAlign")||x.textVerticalAlign}),z2:1});if(Pv({el:z,componentModel:e,itemName:n}),z.__fullText=n,z.anid="name",e.get("triggerEvent")){var $=Vp.makeAxisEventDataBase(e);$.targetType="axisName",$.name=n,Gr(z).eventData=$}i.add(z),z.updateTransform(),t.add(z),z.decomposeTransform()}}};function Vbe(r,e,t,i){var n=Kj(t-r),s,u,a=i[0]>i[1],h=e==="start"&&!a||e!=="start"&&a;return V0(n-bd/2)?(u=h?"bottom":"top",s="center"):V0(n-bd*1.5)?(u=h?"top":"bottom",s="center"):(u="middle",n<bd*1.5&&n>bd/2?s=h?"left":"right":s=h?"right":"left"),{rotation:n,textAlign:s,textVerticalAlign:u}}function $be(r,e,t){if(!iq(r.axis)){var i=r.get(["axisLabel","showMinLabel"]),n=r.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var s=e[0],u=e[1],a=e[e.length-1],h=e[e.length-2],p=t[0],m=t[1],v=t[t.length-1],x=t[t.length-2];i===!1?(rl(s),rl(p)):zV(s,u)&&(i?(rl(u),rl(m)):(rl(s),rl(p))),n===!1?(rl(a),rl(v)):zV(h,a)&&(n?(rl(h),rl(x)):(rl(a),rl(v)))}}function rl(r){r&&(r.ignore=!0)}function zV(r,e){var t=r&&r.getBoundingRect().clone(),i=e&&e.getBoundingRect().clone();if(!(!t||!i)){var n=zT([]);return Qp(n,n,-r.rotation),t.applyTransform(Qc([],n,r.getLocalTransform())),i.applyTransform(Qc([],n,e.getLocalTransform())),t.intersect(i)}}function BV(r){return r==="middle"||r==="center"}function Qq(r,e,t,i,n){for(var s=[],u=[],a=[],h=0;h<r.length;h++){var p=r[h].coord;u[0]=p,u[1]=0,a[0]=p,a[1]=t,e&&(Qa(u,u,e),Qa(a,a,e));var m=new Ua({shape:{x1:u[0],y1:u[1],x2:a[0],y2:a[1]},style:i,z2:2,autoBatch:!0,silent:!0});uv(m.shape,m.style.lineWidth),m.anid=n+"_"+r[h].tickValue,s.push(m)}return s}function Gbe(r,e,t,i){var n=t.axis,s=t.getModel("axisTick"),u=s.get("show");if(u==="auto"&&i.handleAutoShown&&(u=i.handleAutoShown("axisTick")),!(!u||n.scale.isBlank())){for(var a=s.getModel("lineStyle"),h=i.tickDirection*s.get("length"),p=n.getTicksCoords(),m=Qq(p,e.transform,h,zr(a.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),v=0;v<m.length;v++)r.add(m[v]);return m}}function Ube(r,e,t,i){var n=t.axis,s=t.getModel("minorTick");if(!(!s.get("show")||n.scale.isBlank())){var u=n.getMinorTicksCoords();if(!!u.length)for(var a=s.getModel("lineStyle"),h=i*s.get("length"),p=zr(a.getLineStyle(),zr(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),m=0;m<u.length;m++)for(var v=Qq(u[m],e.transform,h,p,"minorticks_"+m),x=0;x<v.length;x++)r.add(v[x])}}function jbe(r,e,t,i){var n=t.axis,s=Ga(i.axisLabelShow,t.get(["axisLabel","show"]));if(!(!s||n.scale.isBlank())){var u=t.getModel("axisLabel"),a=u.get("margin"),h=n.getViewLabels(),p=(Ga(i.labelRotate,u.get("rotate"))||0)*bd/180,m=Vp.innerTextLayout(i.rotation,p,i.labelDirection),v=t.getCategories&&t.getCategories(!0),x=[],w=Vp.isLabelSilent(t),T=t.get("triggerEvent");return ue(h,function(C,I){var k=n.scale.type==="ordinal"?n.scale.getRawOrdinalNumber(C.tickValue):C.tickValue,R=C.formattedLabel,z=C.rawLabel,$=u;if(v&&v[k]){var j=v[k];Br(j)&&j.textStyle&&($=new An(j.textStyle,u,t.ecModel))}var G=$.getTextColor()||t.get(["axisLine","lineStyle","color"]),Y=n.dataToCoord(k),Z=$.getShallow("align",!0)||m.textAlign,H=Yr($.getShallow("alignMinLabel",!0),Z),re=Yr($.getShallow("alignMaxLabel",!0),Z),ne=$.getShallow("verticalAlign",!0)||$.getShallow("baseline",!0)||m.textVerticalAlign,se=Yr($.getShallow("verticalAlignMinLabel",!0),ne),me=Yr($.getShallow("verticalAlignMaxLabel",!0),ne),Se=new Ni({x:Y,y:i.labelOffset+i.labelDirection*a,rotation:m.rotation,silent:w,z2:10+(C.level||0),style:Mn($,{text:R,align:I===0?H:I===h.length-1?re:Z,verticalAlign:I===0?se:I===h.length-1?me:ne,fill:kr(G)?G(n.type==="category"?z:n.type==="value"?k+"":k,I):G})});if(Se.anid="label_"+k,T){var Ie=Vp.makeAxisEventDataBase(t);Ie.targetType="axisLabel",Ie.value=z,Ie.tickIndex=I,n.type==="category"&&(Ie.dataIndex=k),Gr(Se).eventData=Ie}e.add(Se),Se.updateTransform(),x.push(Se),r.add(Se),Se.decomposeTransform()}),x}}var hh=Vp;function Hbe(r,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return Wbe(t,r,e),t.seriesInvolved&&Zbe(t,r),t}function Wbe(r,e,t){var i=e.getComponent("tooltip"),n=e.getComponent("axisPointer"),s=n.get("link",!0)||[],u=[];ue(t.getCoordinateSystems(),function(a){if(!a.axisPointerEnabled)return;var h=tx(a.model),p=r.coordSysAxesInfo[h]={};r.coordSysMap[h]=a;var m=a.model,v=m.getModel("tooltip",i);if(ue(a.getAxes(),Qr(C,!1,null)),a.getTooltipAxes&&i&&v.get("show")){var x=v.get("trigger")==="axis",w=v.get(["axisPointer","type"])==="cross",T=a.getTooltipAxes(v.get(["axisPointer","axis"]));(x||w)&&ue(T.baseAxes,Qr(C,w?"cross":!0,x)),w&&ue(T.otherAxes,Qr(C,"cross",!1))}function C(I,k,R){var z=R.model.getModel("axisPointer",n),$=z.get("show");if(!(!$||$==="auto"&&!I&&!qD(z))){k==null&&(k=z.get("triggerTooltip")),z=I?qbe(R,v,n,e,I,k):z;var j=z.get("snap"),G=z.get("triggerEmphasis"),Y=tx(R.model),Z=k||j||R.type==="category",H=r.axesInfo[Y]={key:Y,axis:R,coordSys:a,axisPointerModel:z,triggerTooltip:k,triggerEmphasis:G,involveSeries:Z,snap:j,useHandle:qD(z),seriesModels:[],linkGroup:null};p[Y]=H,r.seriesInvolved=r.seriesInvolved||Z;var re=Xbe(s,R);if(re!=null){var ne=u[re]||(u[re]={axesInfo:{}});ne.axesInfo[Y]=H,ne.mapper=s[re].mapper,H.linkGroup=ne}}}})}function qbe(r,e,t,i,n,s){var u=e.getModel("axisPointer"),a=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],h={};ue(a,function(x){h[x]=Nr(u.get(x))}),h.snap=r.type!=="category"&&!!s,u.get("type")==="cross"&&(h.type="line");var p=h.label||(h.label={});if(p.show==null&&(p.show=!1),n==="cross"){var m=u.get(["label","show"]);if(p.show=m!=null?m:!0,!s){var v=h.lineStyle=u.get("crossStyle");v&&zr(p,v.textStyle)}}return r.model.getModel("axisPointer",new An(h,t,i))}function Zbe(r,e){e.eachSeries(function(t){var i=t.coordinateSystem,n=t.get(["tooltip","trigger"],!0),s=t.get(["tooltip","show"],!0);!i||n==="none"||n===!1||n==="item"||s===!1||t.get(["axisPointer","show"],!0)===!1||ue(r.coordSysAxesInfo[tx(i.model)],function(u){var a=u.axis;i.getAxis(a.dim)===a&&(u.seriesModels.push(t),u.seriesDataCount==null&&(u.seriesDataCount=0),u.seriesDataCount+=t.getData().count())})})}function Xbe(r,e){for(var t=e.model,i=e.dim,n=0;n<r.length;n++){var s=r[n]||{};if(fI(s[i+"AxisId"],t.id)||fI(s[i+"AxisIndex"],t.componentIndex)||fI(s[i+"AxisName"],t.name))return n}}function fI(r,e){return r==="all"||Nt(r)&&di(r,e)>=0||r===e}function Ybe(r){var e=Ik(r);if(!!e){var t=e.axisPointerModel,i=e.axis.scale,n=t.option,s=t.get("status"),u=t.get("value");u!=null&&(u=i.parse(u));var a=qD(t);s==null&&(n.status=a?"show":"hide");var h=i.getExtent().slice();h[0]>h[1]&&h.reverse(),(u==null||u>h[1])&&(u=h[1]),u<h[0]&&(u=h[0]),n.value=u,a&&(n.status=e.axis.scale.isBlank()?"hide":"show")}}function Ik(r){var e=(r.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[tx(r)]}function Kbe(r){var e=Ik(r);return e&&e.axisPointerModel}function qD(r){return!!r.get(["handle","show"])}function tx(r){return r.type+"||"+r.id}var FV={},Jbe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n,s){this.axisPointerClass&&Ybe(t),r.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,n,!0)},e.prototype.updateAxisPointer=function(t,i,n,s){this._doUpdateAxisPointerClass(t,n,!1)},e.prototype.remove=function(t,i){var n=this._axisPointer;n&&n.remove(i)},e.prototype.dispose=function(t,i){this._disposeAxisPointer(i),r.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,i,n){var s=e.getAxisPointerClass(this.axisPointerClass);if(!!s){var u=Kbe(t);u?(this._axisPointer||(this._axisPointer=new s)).render(t,u,i,n):this._disposeAxisPointer(i)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,i){FV[t]=i},e.getAxisPointerClass=function(t){return t&&FV[t]},e.type="axis",e}(Jn),am=Jbe,ZD=ki();function e9(r,e,t,i){var n=t.axis;if(!n.scale.isBlank()){var s=t.getModel("splitArea"),u=s.getModel("areaStyle"),a=u.get("color"),h=i.coordinateSystem.getRect(),p=n.getTicksCoords({tickModel:s,clamp:!0});if(!!p.length){var m=a.length,v=ZD(r).splitAreaColors,x=Mr(),w=0;if(v)for(var T=0;T<p.length;T++){var C=v.get(p[T].tickValue);if(C!=null){w=(C+(m-1)*T)%m;break}}var I=n.toGlobalCoord(p[0].coord),k=u.getAreaStyle();a=Nt(a)?a:[a];for(var T=1;T<p.length;T++){var R=n.toGlobalCoord(p[T].coord),z=void 0,$=void 0,j=void 0,G=void 0;n.isHorizontal()?(z=I,$=h.y,j=R-z,G=h.height,I=z+j):(z=h.x,$=I,j=h.width,G=R-$,I=$+G);var Y=p[T-1].tickValue;Y!=null&&x.set(Y,w),e.add(new Li({anid:Y!=null?"area_"+Y:null,shape:{x:z,y:$,width:j,height:G},style:zr({fill:a[w]},k),autoBatch:!0,silent:!0})),w=(w+1)%m}ZD(r).splitAreaColors=x}}}function t9(r){ZD(r).splitAreaColors=null}var Qbe=["axisLine","axisTickLabel","axisName"],ewe=["splitArea","splitLine","minorSplitLine"],r9=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,i,n,s){this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new Vr,this.group.add(this._axisGroup),!!t.get("show")){var a=t.getCoordSysModel(),h=WD(a,t),p=new hh(t,kt({handleAutoShown:function(v){for(var x=a.coordinateSystem.getCartesians(),w=0;w<x.length;w++)if(FD(x[w].getOtherAxis(t.axis).scale))return!0;return!1}},h));ue(Qbe,p.add,p),this._axisGroup.add(p.getGroup()),ue(ewe,function(v){t.get([v,"show"])&&twe[v](this,this._axisGroup,t,a)},this);var m=s&&s.type==="changeAxisOrder"&&s.isInitSort;m||vx(u,this._axisGroup,t),r.prototype.render.call(this,t,i,n,s)}},e.prototype.remove=function(){t9(this)},e.type="cartesianAxis",e}(am),twe={splitLine:function(r,e,t,i){var n=t.axis;if(!n.scale.isBlank()){var s=t.getModel("splitLine"),u=s.getModel("lineStyle"),a=u.get("color");a=Nt(a)?a:[a];for(var h=i.coordinateSystem.getRect(),p=n.isHorizontal(),m=0,v=n.getTicksCoords({tickModel:s}),x=[],w=[],T=u.getLineStyle(),C=0;C<v.length;C++){var I=n.toGlobalCoord(v[C].coord);p?(x[0]=I,x[1]=h.y,w[0]=I,w[1]=h.y+h.height):(x[0]=h.x,x[1]=I,w[0]=h.x+h.width,w[1]=I);var k=m++%a.length,R=v[C].tickValue,z=new Ua({anid:R!=null?"line_"+v[C].tickValue:null,autoBatch:!0,shape:{x1:x[0],y1:x[1],x2:w[0],y2:w[1]},style:zr({stroke:a[k]},T),silent:!0});uv(z.shape,T.lineWidth),e.add(z)}}},minorSplitLine:function(r,e,t,i){var n=t.axis,s=t.getModel("minorSplitLine"),u=s.getModel("lineStyle"),a=i.coordinateSystem.getRect(),h=n.isHorizontal(),p=n.getMinorTicksCoords();if(!!p.length)for(var m=[],v=[],x=u.getLineStyle(),w=0;w<p.length;w++)for(var T=0;T<p[w].length;T++){var C=n.toGlobalCoord(p[w][T].coord);h?(m[0]=C,m[1]=a.y,v[0]=C,v[1]=a.y+a.height):(m[0]=a.x,m[1]=C,v[0]=a.x+a.width,v[1]=C);var I=new Ua({anid:"minor_line_"+p[w][T].tickValue,autoBatch:!0,shape:{x1:m[0],y1:m[1],x2:v[0],y2:v[1]},style:x,silent:!0});uv(I.shape,x.lineWidth),e.add(I)}},splitArea:function(r,e,t,i){e9(r,e,t,i)}},i9=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e}(r9),rwe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=i9.type,t}return e.type="yAxis",e}(r9),iwe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,i){this.group.removeAll(),t.get("show")&&this.group.add(new Li({shape:t.coordinateSystem.getRect(),style:zr({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(Jn),NV={offset:0};function n9(r){r.registerComponentView(iwe),r.registerComponentModel(Cbe),r.registerCoordinateSystem("cartesian2d",Nbe),pv(r,"x",jD,NV),pv(r,"y",jD,NV),r.registerComponentView(i9),r.registerComponentView(rwe),r.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function nwe(r){gi(n9),r.registerSeriesModel(ybe),r.registerChartView(Mbe),r.registerLayout(Ix("scatter"))}function awe(r){r.eachSeriesByType("radar",function(e){var t=e.getData(),i=[],n=e.coordinateSystem;if(!!n){var s=n.getIndicatorAxes();ue(s,function(u,a){t.each(t.mapDimension(s[a].dim),function(h,p){i[p]=i[p]||[];var m=n.dataToPoint(h,a);i[p][a]=VV(m)?m:$V(n)})}),t.each(function(u){var a=Ude(i[u],function(h){return VV(h)})||$V(n);i[u].push(a.slice()),t.setItemLayout(u,i[u])})}})}function VV(r){return!isNaN(r[0])&&!isNaN(r[1])}function $V(r){return[r.cx,r.cy]}function owe(r){var e=r.polar;if(e){Nt(e)||(e=[e]);var t=[];ue(e,function(i,n){i.indicator?(i.type&&!i.shape&&(i.shape=i.type),r.radar=r.radar||[],Nt(r.radar)||(r.radar=[r.radar]),r.radar.push(i)):t.push(i)}),r.polar=t}ue(r.series,function(i){i&&i.type==="radar"&&i.polarIndex&&(i.radarIndex=i.polarIndex)})}var swe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n){var s=t.coordinateSystem,u=this.group,a=t.getData(),h=this._data;function p(x,w){var T=x.getItemVisual(w,"symbol")||"circle";if(T!=="none"){var C=Vv(x.getItemVisual(w,"symbolSize")),I=fa(T,-1,-1,2,2),k=x.getItemVisual(w,"symbolRotate")||0;return I.attr({style:{strokeNoScale:!0},z2:100,scaleX:C[0]/2,scaleY:C[1]/2,rotation:k*Math.PI/180||0}),I}}function m(x,w,T,C,I,k){T.removeAll();for(var R=0;R<w.length-1;R++){var z=p(C,I);z&&(z.__dimIdx=R,x[R]?(z.setPosition(x[R]),em[k?"initProps":"updateProps"](z,{x:w[R][0],y:w[R][1]},t,I)):z.setPosition(w[R]),T.add(z))}}function v(x){return Ht(x,function(w){return[s.cx,s.cy]})}a.diff(h).add(function(x){var w=a.getItemLayout(x);if(!!w){var T=new hs,C=new ds,I={shape:{points:w}};T.shape.points=v(w),C.shape.points=v(w),Bn(T,I,t,x),Bn(C,I,t,x);var k=new Vr,R=new Vr;k.add(C),k.add(T),k.add(R),m(C.shape.points,w,R,a,x,!0),a.setItemGraphicEl(x,k)}}).update(function(x,w){var T=h.getItemGraphicEl(w),C=T.childAt(0),I=T.childAt(1),k=T.childAt(2),R={shape:{points:a.getItemLayout(x)}};!R.shape.points||(m(C.shape.points,R.shape.points,k,a,x,!1),nu(I),nu(C),ji(C,R,t),ji(I,R,t),a.setItemGraphicEl(x,T))}).remove(function(x){u.remove(h.getItemGraphicEl(x))}).execute(),a.eachItemGraphicEl(function(x,w){var T=a.getItemModel(w),C=x.childAt(0),I=x.childAt(1),k=x.childAt(2),R=a.getItemVisual(w,"style"),z=R.fill;u.add(x),C.useStyle(zr(T.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:z})),to(C,T,"lineStyle"),to(I,T,"areaStyle");var $=T.getModel("areaStyle"),j=$.isEmpty()&&$.parentModel.isEmpty();I.ignore=j,ue(["emphasis","select","blur"],function(Z){var H=T.getModel([Z,"areaStyle"]),re=H.isEmpty()&&H.parentModel.isEmpty();I.ensureState(Z).ignore=re&&j}),I.useStyle(zr($.getAreaStyle(),{fill:z,opacity:.7,decal:R.decal}));var G=T.getModel("emphasis"),Y=G.getModel("itemStyle").getItemStyle();k.eachChild(function(Z){if(Z instanceof io){var H=Z.style;Z.useStyle(kt({image:H.image,x:H.x,y:H.y,width:H.width,height:H.height},R))}else Z.useStyle(R),Z.setColor(z),Z.style.strokeNoScale=!0;var re=Z.ensureState("emphasis");re.style=Nr(Y);var ne=a.getStore().get(a.getDimensionIndex(Z.__dimIdx),w);(ne==null||isNaN(ne))&&(ne=""),ro(Z,Ra(T),{labelFetcher:a.hostModel,labelDataIndex:w,labelDimIndex:Z.__dimIdx,defaultText:ne,inheritColor:z,defaultOpacity:R.opacity})}),Kn(x,G.get("focus"),G.get("blurScope"),G.get("disabled"))}),this._data=a},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(Cn),lwe=swe,uwe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Dx(xr(this.getData,this),xr(this.getRawData,this))},e.prototype.getInitialData=function(t,i){return $v(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,i,n){var s=this.getData(),u=this.coordinateSystem,a=u.getIndicatorAxes(),h=this.getData().getName(t),p=h===""?this.name:h,m=QW(this,t);return Oa("section",{header:p,sortBlocks:!0,blocks:Ht(a,function(v){var x=s.get(s.mapDimension(v.dim),t);return Oa("nameValue",{markerType:"subItem",markerColor:m,name:v.name,value:x,sortParam:x})})})},e.prototype.getTooltipPosition=function(t){if(t!=null){for(var i=this.getData(),n=this.coordinateSystem,s=i.getValues(Ht(n.dimensions,function(p){return i.mapDimension(p)}),t),u=0,a=s.length;u<a;u++)if(!isNaN(s[u])){var h=n.getIndicatorAxes();return n.coordToPoint(h[u].dataToCoord(s[u]),u)}}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(Gn),cwe=uwe,Ly=Kq.value;function _w(r,e){return zr({show:e},r)}var hwe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),i=this.get("splitNumber"),n=this.get("scale"),s=this.get("axisLine"),u=this.get("axisTick"),a=this.get("axisLabel"),h=this.get("axisName"),p=this.get(["axisName","show"]),m=this.get(["axisName","formatter"]),v=this.get("axisNameGap"),x=this.get("triggerEvent"),w=Ht(this.get("indicator")||[],function(T){T.max!=null&&T.max>0&&!T.min?T.min=0:T.min!=null&&T.min<0&&!T.max&&(T.max=0);var C=h;T.color!=null&&(C=zr({color:T.color},h));var I=ni(Nr(T),{boundaryGap:t,splitNumber:i,scale:n,axisLine:s,axisTick:u,axisLabel:a,name:T.text,showName:p,nameLocation:"end",nameGap:v,nameTextStyle:C,triggerEvent:x},!1);if(gr(m)){var k=I.name;I.name=m.replace("{value}",k!=null?k:"")}else kr(m)&&(I.name=m(I.name,I));var R=new An(I,null,this.ecModel);return pa(R,Tx.prototype),R.mainType="radar",R.componentIndex=this.componentIndex,R},this);this._indicatorModels=w},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:ni({lineStyle:{color:"#bbb"}},Ly.axisLine),axisLabel:_w(Ly.axisLabel,!1),axisTick:_w(Ly.axisTick,!1),splitLine:_w(Ly.splitLine,!0),splitArea:_w(Ly.splitArea,!0),indicator:[]},e}(Oi),dwe=hwe,fwe=["axisLine","axisTickLabel","axisName"],pwe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n){var s=this.group;s.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var i=t.coordinateSystem,n=i.getIndicatorAxes(),s=Ht(n,function(u){var a=u.model.get("showName")?u.name:"",h=new hh(u.model,{axisName:a,position:[i.cx,i.cy],rotation:u.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return h});ue(s,function(u){ue(fwe,u.add,u),this.group.add(u.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(t){var i=t.coordinateSystem,n=i.getIndicatorAxes();if(!n.length)return;var s=t.get("shape"),u=t.getModel("splitLine"),a=t.getModel("splitArea"),h=u.getModel("lineStyle"),p=a.getModel("areaStyle"),m=u.get("show"),v=a.get("show"),x=h.get("color"),w=p.get("color"),T=Nt(x)?x:[x],C=Nt(w)?w:[w],I=[],k=[];function R(Ie,ke,Fe){var Ce=Fe%ke.length;return Ie[Ce]=Ie[Ce]||[],Ce}if(s==="circle")for(var z=n[0].getTicksCoords(),$=i.cx,j=i.cy,G=0;G<z.length;G++){if(m){var Y=R(I,T,G);I[Y].push(new jd({shape:{cx:$,cy:j,r:z[G].coord}}))}if(v&&G<z.length-1){var Y=R(k,C,G);k[Y].push(new HT({shape:{cx:$,cy:j,r0:z[G].coord,r:z[G+1].coord}}))}}else for(var Z,H=Ht(n,function(Ie,ke){var Fe=Ie.getTicksCoords();return Z=Z==null?Fe.length-1:Math.min(Fe.length-1,Z),Ht(Fe,function(Ce){return i.coordToPoint(Ce.coord,ke)})}),re=[],G=0;G<=Z;G++){for(var ne=[],se=0;se<n.length;se++)ne.push(H[se][G]);if(ne[0]&&ne.push(ne[0].slice()),m){var Y=R(I,T,G);I[Y].push(new ds({shape:{points:ne}}))}if(v&&re){var Y=R(k,C,G-1);k[Y].push(new hs({shape:{points:ne.concat(re)}}))}re=ne.slice().reverse()}var me=h.getLineStyle(),Se=p.getAreaStyle();ue(k,function(Ie,ke){this.group.add(dl(Ie,{style:zr({stroke:"none",fill:C[ke%C.length]},Se),silent:!0}))},this),ue(I,function(Ie,ke){this.group.add(dl(Ie,{style:zr({fill:"none",stroke:T[ke%T.length]},me),silent:!0}))},this)},e.type="radar",e}(Jn),mwe=pwe,gwe=function(r){lt(e,r);function e(t,i,n){var s=r.call(this,t,i,n)||this;return s.type="value",s.angle=0,s.name="",s}return e}(lu),vwe=gwe,_we=function(){function r(e,t,i){this.dimensions=[],this._model=e,this._indicatorAxes=Ht(e.getIndicatorModels(),function(n,s){var u="indicator_"+s,a=new vwe(u,new Nd);return a.name=n.get("name"),a.model=n,n.axis=a,this.dimensions.push(u),a},this),this.resize(e,i)}return r.prototype.getIndicatorAxes=function(){return this._indicatorAxes},r.prototype.dataToPoint=function(e,t){var i=this._indicatorAxes[t];return this.coordToPoint(i.dataToCoord(e),t)},r.prototype.coordToPoint=function(e,t){var i=this._indicatorAxes[t],n=i.angle,s=this.cx+e*Math.cos(n),u=this.cy-e*Math.sin(n);return[s,u]},r.prototype.pointToData=function(e){var t=e[0]-this.cx,i=e[1]-this.cy,n=Math.sqrt(t*t+i*i);t/=n,i/=n;for(var s=Math.atan2(-i,t),u=1/0,a,h=-1,p=0;p<this._indicatorAxes.length;p++){var m=this._indicatorAxes[p],v=Math.abs(s-m.angle);v<u&&(a=m,h=p,u=v)}return[h,+(a&&a.coordToData(n))]},r.prototype.resize=function(e,t){var i=e.get("center"),n=t.getWidth(),s=t.getHeight(),u=Math.min(n,s)/2;this.cx=sr(i[0],n),this.cy=sr(i[1],s),this.startAngle=e.get("startAngle")*Math.PI/180;var a=e.get("radius");(gr(a)||Vi(a))&&(a=[0,a]),this.r0=sr(a[0],u),this.r=sr(a[1],u),ue(this._indicatorAxes,function(h,p){h.setExtent(this.r0,this.r);var m=this.startAngle+p*Math.PI*2/this._indicatorAxes.length;m=Math.atan2(Math.sin(m),Math.cos(m)),h.angle=m},this)},r.prototype.update=function(e,t){var i=this._indicatorAxes,n=this._model;ue(i,function(a){a.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(a,h){if(!(a.get("coordinateSystem")!=="radar"||e.getComponent("radar",a.get("radarIndex"))!==n)){var p=a.getData();ue(i,function(m){m.scale.unionExtentFromData(p,p.mapDimension(m.dim))})}},this);var s=n.get("splitNumber"),u=new Nd;u.setExtent(0,s),u.setInterval(1),ue(i,function(a,h){Jq(a.scale,a.model,u)})},r.prototype.convertToPixel=function(e,t,i){return console.warn("Not implemented."),null},r.prototype.convertFromPixel=function(e,t,i){return console.warn("Not implemented."),null},r.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},r.create=function(e,t){var i=[];return e.eachComponent("radar",function(n){var s=new r(n,e,t);i.push(s),n.coordinateSystem=s}),e.eachSeriesByType("radar",function(n){n.get("coordinateSystem")==="radar"&&(n.coordinateSystem=i[n.get("radarIndex")||0])}),i},r.dimensions=[],r}(),ywe=_we;function xwe(r){r.registerCoordinateSystem("radar",ywe),r.registerComponentModel(dwe),r.registerComponentView(mwe),r.registerVisual({seriesType:"radar",reset:function(e){var t=e.getData();t.each(function(i){t.setItemVisual(i,"legendIcon","roundRect")}),t.setVisual("legendIcon","roundRect")}})}function bwe(r){gi(xwe),r.registerChartView(lwe),r.registerSeriesModel(cwe),r.registerLayout(awe),r.registerProcessor(Ex("radar")),r.registerPreprocessor(owe)}var GV="\0_ec_interaction_mutex";function wwe(r,e,t){var i=Ek(r);i[e]=t}function Swe(r,e,t){var i=Ek(r),n=i[e];n===t&&(i[e]=null)}function UV(r,e){return!!Ek(r)[e]}function Ek(r){return r[GV]||(r[GV]={})}uc({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},aa);var Twe=function(r){lt(e,r);function e(t){var i=r.call(this)||this;i._zr=t;var n=xr(i._mousedownHandler,i),s=xr(i._mousemoveHandler,i),u=xr(i._mouseupHandler,i),a=xr(i._mousewheelHandler,i),h=xr(i._pinchHandler,i);return i.enable=function(p,m){this.disable(),this._opt=zr(Nr(m)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),p==null&&(p=!0),(p===!0||p==="move"||p==="pan")&&(t.on("mousedown",n),t.on("mousemove",s),t.on("mouseup",u)),(p===!0||p==="scale"||p==="zoom")&&(t.on("mousewheel",a),t.on("pinch",h))},i.disable=function(){t.off("mousedown",n),t.off("mousemove",s),t.off("mouseup",u),t.off("mousewheel",a),t.off("pinch",h)},i}return e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!m5(t)){for(var i=t.target;i;){if(i.draggable)return;i=i.__hostTarget||i.parent}var n=t.offsetX,s=t.offsetY;this.pointerChecker&&this.pointerChecker(t,n,s)&&(this._x=n,this._y=s,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(!(!this._dragging||!iS("moveOnMouseMove",t,this._opt)||t.gestureEvent==="pinch"||UV(this._zr,"globalPan"))){var i=t.offsetX,n=t.offsetY,s=this._x,u=this._y,a=i-s,h=n-u;this._x=i,this._y=n,this._opt.preventDefaultMouseMove&&oh(t.event),a9(this,"pan","moveOnMouseMove",t,{dx:a,dy:h,oldX:s,oldY:u,newX:i,newY:n,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){m5(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var i=iS("zoomOnMouseWheel",t,this._opt),n=iS("moveOnMouseWheel",t,this._opt),s=t.wheelDelta,u=Math.abs(s),a=t.offsetX,h=t.offsetY;if(!(s===0||!i&&!n)){if(i){var p=u>3?1.4:u>1?1.2:1.1,m=s>0?p:1/p;pI(this,"zoom","zoomOnMouseWheel",t,{scale:m,originX:a,originY:h,isAvailableBehavior:null})}if(n){var v=Math.abs(s),x=(s>0?1:-1)*(v>3?.4:v>1?.15:.05);pI(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:x,originX:a,originY:h,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){if(!UV(this._zr,"globalPan")){var i=t.pinchScale>1?1.1:1/1.1;pI(this,"zoom",null,t,{scale:i,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},e}(xl);function pI(r,e,t,i,n){r.pointerChecker&&r.pointerChecker(i,n.originX,n.originY)&&(oh(i.event),a9(r,e,t,i,n))}function a9(r,e,t,i,n){n.isAvailableBehavior=xr(iS,null,t,i),r.trigger(e,n)}function iS(r,e,t){var i=t[r];return!r||i&&(!gr(i)||e.event[i+"Key"])}var Px=Twe;function Dk(r,e,t){var i=r.target;i.x+=e,i.y+=t,i.dirty()}function Pk(r,e,t,i){var n=r.target,s=r.zoomLimit,u=r.zoom=r.zoom||1;if(u*=e,s){var a=s.min||0,h=s.max||1/0;u=Math.max(Math.min(h,u),a)}var p=u/r.zoom;r.zoom=u,n.x-=(t-n.x)*(p-1),n.y-=(i-n.y)*(p-1),n.scaleX*=p,n.scaleY*=p,n.dirty()}var Mwe={axisPointer:1,tooltip:1,brush:1};function h2(r,e,t){var i=e.getComponentByElement(r.topTarget),n=i&&i.coordinateSystem;return i&&i!==t&&!Mwe.hasOwnProperty(i.mainType)&&n&&n.model!==t}function o9(r){if(gr(r)){var e=new DOMParser;r=e.parseFromString(r,"text/xml")}var t=r;for(t.nodeType===9&&(t=t.firstChild);t.nodeName.toLowerCase()!=="svg"||t.nodeType!==1;)t=t.nextSibling;return t}var mI,ZS={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},jV=bi(ZS),XS={"alignment-baseline":"textBaseline","stop-color":"stopColor"},HV=bi(XS),Awe=function(){function r(){this._defs={},this._root=null}return r.prototype.parse=function(e,t){t=t||{};var i=o9(e);this._defsUsePending=[];var n=new Vr;this._root=n;var s=[],u=i.getAttribute("viewBox")||"",a=parseFloat(i.getAttribute("width")||t.width),h=parseFloat(i.getAttribute("height")||t.height);isNaN(a)&&(a=null),isNaN(h)&&(h=null),Is(i,n,null,!0,!1);for(var p=i.firstChild;p;)this._parseNode(p,n,s,null,!1,!1),p=p.nextSibling;Ewe(this._defs,this._defsUsePending),this._defsUsePending=[];var m,v;if(u){var x=d2(u);x.length>=4&&(m={x:parseFloat(x[0]||0),y:parseFloat(x[1]||0),width:parseFloat(x[2]),height:parseFloat(x[3])})}if(m&&a!=null&&h!=null&&(v=l9(m,{x:0,y:0,width:a,height:h}),!t.ignoreViewBox)){var w=n;n=new Vr,n.add(w),w.scaleX=w.scaleY=v.scale,w.x=v.x,w.y=v.y}return!t.ignoreRootClip&&a!=null&&h!=null&&n.setClipPath(new Li({shape:{x:0,y:0,width:a,height:h}})),{root:n,width:a,height:h,viewBoxRect:m,viewBoxTransform:v,named:s}},r.prototype._parseNode=function(e,t,i,n,s,u){var a=e.nodeName.toLowerCase(),h,p=n;if(a==="defs"&&(s=!0),a==="text"&&(u=!0),a==="defs"||a==="switch")h=t;else{if(!s){var m=mI[a];if(m&&wr(mI,a)){h=m.call(this,e,t);var v=e.getAttribute("name");if(v){var x={name:v,namedFrom:null,svgNodeTagLower:a,el:h};i.push(x),a==="g"&&(p=x)}else n&&i.push({name:n.name,namedFrom:n,svgNodeTagLower:a,el:h});t.add(h)}}var w=WV[a];if(w&&wr(WV,a)){var T=w.call(this,e),C=e.getAttribute("id");C&&(this._defs[C]=T)}}if(h&&h.isGroup)for(var I=e.firstChild;I;)I.nodeType===1?this._parseNode(I,h,i,p,s,u):I.nodeType===3&&u&&this._parseText(I,h),I=I.nextSibling},r.prototype._parseText=function(e,t){var i=new G0({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});il(t,i),Is(e,i,this._defsUsePending,!1,!1),Cwe(i,t);var n=i.style,s=n.fontSize;s&&s<9&&(n.fontSize=9,i.scaleX*=s/9,i.scaleY*=s/9);var u=(n.fontSize||n.fontFamily)&&[n.fontStyle,n.fontWeight,(n.fontSize||12)+"px",n.fontFamily||"sans-serif"].join(" ");n.font=u;var a=i.getBoundingRect();return this._textX+=a.width,t.add(i),i},r.internalField=function(){mI={g:function(e,t){var i=new Vr;return il(t,i),Is(e,i,this._defsUsePending,!1,!1),i},rect:function(e,t){var i=new Li;return il(t,i),Is(e,i,this._defsUsePending,!1,!1),i.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),i.silent=!0,i},circle:function(e,t){var i=new jd;return il(t,i),Is(e,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),i.silent=!0,i},line:function(e,t){var i=new Ua;return il(t,i),Is(e,i,this._defsUsePending,!1,!1),i.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),i.silent=!0,i},ellipse:function(e,t){var i=new FL;return il(t,i),Is(e,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),i.silent=!0,i},polygon:function(e,t){var i=e.getAttribute("points"),n;i&&(n=XV(i));var s=new hs({shape:{points:n||[]},silent:!0});return il(t,s),Is(e,s,this._defsUsePending,!1,!1),s},polyline:function(e,t){var i=e.getAttribute("points"),n;i&&(n=XV(i));var s=new ds({shape:{points:n||[]},silent:!0});return il(t,s),Is(e,s,this._defsUsePending,!1,!1),s},image:function(e,t){var i=new io;return il(t,i),Is(e,i,this._defsUsePending,!1,!1),i.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),i.silent=!0,i},text:function(e,t){var i=e.getAttribute("x")||"0",n=e.getAttribute("y")||"0",s=e.getAttribute("dx")||"0",u=e.getAttribute("dy")||"0";this._textX=parseFloat(i)+parseFloat(s),this._textY=parseFloat(n)+parseFloat(u);var a=new Vr;return il(t,a),Is(e,a,this._defsUsePending,!1,!0),a},tspan:function(e,t){var i=e.getAttribute("x"),n=e.getAttribute("y");i!=null&&(this._textX=parseFloat(i)),n!=null&&(this._textY=parseFloat(n));var s=e.getAttribute("dx")||"0",u=e.getAttribute("dy")||"0",a=new Vr;return il(t,a),Is(e,a,this._defsUsePending,!1,!0),this._textX+=parseFloat(s),this._textY+=parseFloat(u),a},path:function(e,t){var i=e.getAttribute("d")||"",n=zH(i);return il(t,n),Is(e,n,this._defsUsePending,!1,!1),n.silent=!0,n}}}(),r}(),WV={lineargradient:function(r){var e=parseInt(r.getAttribute("x1")||"0",10),t=parseInt(r.getAttribute("y1")||"0",10),i=parseInt(r.getAttribute("x2")||"10",10),n=parseInt(r.getAttribute("y2")||"0",10),s=new gx(e,t,i,n);return qV(r,s),ZV(r,s),s},radialgradient:function(r){var e=parseInt(r.getAttribute("cx")||"0",10),t=parseInt(r.getAttribute("cy")||"0",10),i=parseInt(r.getAttribute("r")||"0",10),n=new XH(e,t,i);return qV(r,n),ZV(r,n),n}};function qV(r,e){var t=r.getAttribute("gradientUnits");t==="userSpaceOnUse"&&(e.global=!0)}function ZV(r,e){for(var t=r.firstChild;t;){if(t.nodeType===1&&t.nodeName.toLocaleLowerCase()==="stop"){var i=t.getAttribute("offset"),n=void 0;i&&i.indexOf("%")>0?n=parseInt(i,10)/100:i?n=parseFloat(i):n=0;var s={};s9(t,s,s);var u=s.stopColor||t.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:n,color:u})}t=t.nextSibling}}function il(r,e){r&&r.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),zr(e.__inheritedStyle,r.__inheritedStyle))}function XV(r){for(var e=d2(r),t=[],i=0;i<e.length;i+=2){var n=parseFloat(e[i]),s=parseFloat(e[i+1]);t.push([n,s])}return t}function Is(r,e,t,i,n){var s=e,u=s.__inheritedStyle=s.__inheritedStyle||{},a={};r.nodeType===1&&(Lwe(r,e),s9(r,u,a),i||kwe(r,u,a)),s.style=s.style||{},u.fill!=null&&(s.style.fill=YV(s,"fill",u.fill,t)),u.stroke!=null&&(s.style.stroke=YV(s,"stroke",u.stroke,t)),ue(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(h){u[h]!=null&&(s.style[h]=parseFloat(u[h]))}),ue(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(h){u[h]!=null&&(s.style[h]=u[h])}),n&&(s.__selfStyle=a),u.lineDash&&(s.style.lineDash=Ht(d2(u.lineDash),function(h){return parseFloat(h)})),(u.visibility==="hidden"||u.visibility==="collapse")&&(s.invisible=!0),u.display==="none"&&(s.ignore=!0)}function Cwe(r,e){var t=e.__selfStyle;if(t){var i=t.textBaseline,n=i;!i||i==="auto"||i==="baseline"?n="alphabetic":i==="before-edge"||i==="text-before-edge"?n="top":i==="after-edge"||i==="text-after-edge"?n="bottom":(i==="central"||i==="mathematical")&&(n="middle"),r.style.textBaseline=n}var s=e.__inheritedStyle;if(s){var u=s.textAlign,a=u;u&&(u==="middle"&&(a="center"),r.style.textAlign=a)}}var Iwe=/^url\(\s*#(.*?)\)/;function YV(r,e,t,i){var n=t&&t.match(Iwe);if(n){var s=Kl(n[1]);i.push([r,e,s]);return}return t==="none"&&(t=null),t}function Ewe(r,e){for(var t=0;t<e.length;t++){var i=e[t];i[0].style[i[1]]=r[i[2]]}}var Dwe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function d2(r){return r.match(Dwe)||[]}var Pwe=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,gI=Math.PI/180;function Lwe(r,e){var t=r.getAttribute("transform");if(t){t=t.replace(/,/g," ");var i=[],n=null;t.replace(Pwe,function(v,x,w){return i.push(x,w),""});for(var s=i.length-1;s>0;s-=2){var u=i[s],a=i[s-1],h=d2(u);switch(n=n||ks(),a){case"translate":nc(n,n,[parseFloat(h[0]),parseFloat(h[1]||"0")]);break;case"scale":bL(n,n,[parseFloat(h[0]),parseFloat(h[1]||h[0])]);break;case"rotate":Qp(n,n,-parseFloat(h[0])*gI,[parseFloat(h[1]||"0"),parseFloat(h[2]||"0")]);break;case"skewX":var p=Math.tan(parseFloat(h[0])*gI);Qc(n,[1,0,p,1,0,0],n);break;case"skewY":var m=Math.tan(parseFloat(h[0])*gI);Qc(n,[1,m,0,1,0,0],n);break;case"matrix":n[0]=parseFloat(h[0]),n[1]=parseFloat(h[1]),n[2]=parseFloat(h[2]),n[3]=parseFloat(h[3]),n[4]=parseFloat(h[4]),n[5]=parseFloat(h[5]);break}}e.setLocalTransform(n)}}var KV=/([^\s:;]+)\s*:\s*([^:;]+)/g;function s9(r,e,t){var i=r.getAttribute("style");if(!!i){KV.lastIndex=0;for(var n;(n=KV.exec(i))!=null;){var s=n[1],u=wr(ZS,s)?ZS[s]:null;u&&(e[u]=n[2]);var a=wr(XS,s)?XS[s]:null;a&&(t[a]=n[2])}}}function kwe(r,e,t){for(var i=0;i<jV.length;i++){var n=jV[i],s=r.getAttribute(n);s!=null&&(e[ZS[n]]=s)}for(var i=0;i<HV.length;i++){var n=HV[i],s=r.getAttribute(n);s!=null&&(t[XS[n]]=s)}}function l9(r,e){var t=e.width/r.width,i=e.height/r.height,n=Math.min(t,i);return{scale:n,x:-(r.x+r.width/2)*n+(e.x+e.width/2),y:-(r.y+r.height/2)*n+(e.y+e.height/2)}}function Rwe(r,e){var t=new Awe;return t.parse(r,e)}var Owe=Mr(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),zwe=function(){function r(e,t){this.type="geoSVG",this._usedGraphicMap=Mr(),this._freedGraphics=[],this._mapName=e,this._parsedXML=o9(t)}return r.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=Fwe(e.named),i=t.regions,n=t.regionsMap;this._regions=i,this._regionsMap=n}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},r.prototype._buildGraphic=function(e){var t,i;try{t=e&&Rwe(e,{ignoreViewBox:!0,ignoreRootClip:!0})||{},i=t.root,Vo(i!=null)}catch(I){throw new Error(`Invalid svg format
`+I.message)}var n=new Vr;n.add(i),n.isGeoSVGGraphicRoot=!0;var s=t.width,u=t.height,a=t.viewBoxRect,h=this._boundingRect;if(!h){var p=void 0,m=void 0,v=void 0,x=void 0;if(s!=null?(p=0,v=s):a&&(p=a.x,v=a.width),u!=null?(m=0,x=u):a&&(m=a.y,x=a.height),p==null||m==null){var w=i.getBoundingRect();p==null&&(p=w.x,v=w.width),m==null&&(m=w.y,x=w.height)}h=this._boundingRect=new ai(p,m,v,x)}if(a){var T=l9(a,h);i.scaleX=i.scaleY=T.scale,i.x=T.x,i.y=T.y}n.setClipPath(new Li({shape:h.plain()}));var C=[];return ue(t.named,function(I){Owe.get(I.svgNodeTagLower)!=null&&(C.push(I),Bwe(I.el))}),{root:n,boundingRect:h,named:C}},r.prototype.useGraphic=function(e){var t=this._usedGraphicMap,i=t.get(e);return i||(i=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,i),i)},r.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,i=t.get(e);i&&(t.removeKey(e),this._freedGraphics.push(i))},r}();function Bwe(r){r.silent=!1,r.isGroup&&r.traverse(function(e){e.silent=!1})}function Fwe(r){var e=[],t=Mr();return ue(r,function(i){if(i.namedFrom==null){var n=new txe(i.name,i.el);e.push(n),t.set(i.name,n)}}),{regions:e,regionsMap:t}}var XD=[126,25],JV="\u5357\u6D77\u8BF8\u5C9B",lp=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var rp=0;rp<lp.length;rp++)for(var xg=0;xg<lp[rp].length;xg++)lp[rp][xg][0]/=10.5,lp[rp][xg][1]/=-10.5/.75,lp[rp][xg][0]+=XD[0],lp[rp][xg][1]+=XD[1];function Nwe(r,e){if(r==="china"){for(var t=0;t<e.length;t++)if(e[t].name===JV)return;e.push(new aq(JV,Ht(lp,function(i){return{type:"polygon",exterior:i}}),XD))}}var Vwe={\u5357\u6D77\u8BF8\u5C9B:[32,80],\u5E7F\u4E1C:[0,-10],\u9999\u6E2F:[10,5],\u6FB3\u95E8:[-10,10],\u5929\u6D25:[5,5]};function $we(r,e){if(r==="china"){var t=Vwe[e.name];if(t){var i=e.getCenter();i[0]+=t[0]/10.5,i[1]+=-t[1]/(10.5/.75),e.setCenter(i)}}}var Gwe=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function Uwe(r,e){r==="china"&&e.name==="\u53F0\u6E7E"&&e.geometries.push({type:"polygon",exterior:Gwe[0]})}var jwe="name",Hwe=function(){function r(e,t,i){this.type="geoJSON",this._parsedMap=Mr(),this._mapName=e,this._specialAreas=i,this._geoJSON=qwe(t)}return r.prototype.load=function(e,t){t=t||jwe;var i=this._parsedMap.get(t);if(!i){var n=this._parseToRegions(t);i=this._parsedMap.set(t,{regions:n,boundingRect:Wwe(n)})}var s=Mr(),u=[];return ue(i.regions,function(a){var h=a.name;e&&wr(e,h)&&(a=a.cloneShallow(h=e[h])),u.push(a),s.set(h,a)}),{regions:u,boundingRect:i.boundingRect||new ai(0,0,0,0),regionsMap:s}},r.prototype._parseToRegions=function(e){var t=this._mapName,i=this._geoJSON,n;try{n=i?ixe(i,e):[]}catch(s){throw new Error(`Invalid geoJson format
`+s.message)}return Nwe(t,n),ue(n,function(s){var u=s.name;$we(t,s),Uwe(t,s);var a=this._specialAreas&&this._specialAreas[u];a&&s.transformTo(a.left,a.top,a.width,a.height)},this),n},r.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},r}();function Wwe(r){for(var e,t=0;t<r.length;t++){var i=r[t].getBoundingRect();e=e||i.clone(),e.union(i)}return e}function qwe(r){return gr(r)?typeof JSON!="undefined"&&JSON.parse?JSON.parse(r):new Function("return ("+r+");")():r}var ky=Mr(),dh={registerMap:function(r,e,t){if(e.svg){var i=new zwe(r,e.svg);ky.set(r,i)}else{var n=e.geoJson||e.geoJSON;n&&!e.features?t=e.specialAreas:n=e;var i=new Hwe(r,n,t);ky.set(r,i)}},getGeoResource:function(r){return ky.get(r)},getMapForUser:function(r){var e=ky.get(r);return e&&e.type==="geoJSON"&&e.getMapForUser()},load:function(r,e,t){var i=ky.get(r);if(!!i)return i.load(e,t)}},Lk=["rect","circle","line","ellipse","polygon","polyline","path"],Zwe=Mr(Lk),Xwe=Mr(Lk.concat(["g"])),Ywe=Mr(Lk.concat(["g"])),u9=ki();function yw(r){var e=r.getItemStyle(),t=r.get("areaColor");return t!=null&&(e.fill=t),e}function QV(r){var e=r.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var Kwe=function(){function r(e){var t=new Vr;this.uid=kv("ec_map_draw"),this._controller=new Px(e.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new Vr),t.add(this._svgGroup=new Vr)}return r.prototype.draw=function(e,t,i,n,s){var u=e.mainType==="geo",a=e.getData&&e.getData();u&&t.eachComponent({mainType:"series",subType:"map"},function(k){!a&&k.getHostGeoModel()===e&&(a=k.getData())});var h=e.coordinateSystem,p=this._regionsGroup,m=this.group,v=h.getTransformInfo(),x=v.raw,w=v.roam,T=!p.childAt(0)||s;T?(m.x=w.x,m.y=w.y,m.scaleX=w.scaleX,m.scaleY=w.scaleY,m.dirty()):ji(m,w,e);var C=a&&a.getVisual("visualMeta")&&a.getVisual("visualMeta").length>0,I={api:i,geo:h,mapOrGeoModel:e,data:a,isVisualEncodedByVisualMap:C,isGeo:u,transformInfoRaw:x};h.resourceType==="geoJSON"?this._buildGeoJSON(I):h.resourceType==="geoSVG"&&this._buildSVG(I),this._updateController(e,t,i),this._updateMapSelectHandler(e,p,i,n)},r.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=Mr(),i=Mr(),n=this._regionsGroup,s=e.transformInfoRaw,u=e.mapOrGeoModel,a=e.data,h=e.geo.projection,p=h&&h.stream;function m(w,T){return T&&(w=T(w)),w&&[w[0]*s.scaleX+s.x,w[1]*s.scaleY+s.y]}function v(w){for(var T=[],C=!p&&h&&h.project,I=0;I<w.length;++I){var k=m(w[I],C);k&&T.push(k)}return T}function x(w){return{shape:{points:v(w)}}}n.removeAll(),ue(e.geo.regions,function(w){var T=w.name,C=t.get(T),I=i.get(T)||{},k=I.dataIdx,R=I.regionModel;C||(C=t.set(T,new Vr),n.add(C),k=a?a.indexOfName(T):null,R=e.isGeo?u.getRegionModel(T):a?a.getItemModel(k):null,i.set(T,{dataIdx:k,regionModel:R}));var z=[],$=[];ue(w.geometries,function(Y){if(Y.type==="polygon"){var Z=[Y.exterior].concat(Y.interiors||[]);p&&(Z=a$(Z,p)),ue(Z,function(re){z.push(new hs(x(re)))})}else{var H=Y.points;p&&(H=a$(H,p,!0)),ue(H,function(re){$.push(new ds(x(re)))})}});var j=m(w.getCenter(),h&&h.project);function G(Y,Z){if(!!Y.length){var H=new VL({culling:!0,segmentIgnoreThreshold:1,shape:{paths:Y}});C.add(H),e$(e,H,k,R),t$(e,H,T,R,u,k,j),Z&&(QV(H),ue(H.states,QV))}}G(z),G($,!0)}),t.each(function(w,T){var C=i.get(T),I=C.dataIdx,k=C.regionModel;r$(e,w,T,k,u,I),i$(e,w,T,k,u),n$(e,w,T,k,u)},this)},r.prototype._buildSVG=function(e){var t=e.geo.map,i=e.transformInfoRaw;this._svgGroup.x=i.x,this._svgGroup.y=i.y,this._svgGroup.scaleX=i.scaleX,this._svgGroup.scaleY=i.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var n=this._svgDispatcherMap=Mr(),s=!1;ue(this._svgGraphicRecord.named,function(u){var a=u.name,h=e.mapOrGeoModel,p=e.data,m=u.svgNodeTagLower,v=u.el,x=p?p.indexOfName(a):null,w=h.getRegionModel(a);if(Zwe.get(m)!=null&&v instanceof yl&&e$(e,v,x,w),v instanceof yl&&(v.culling=!0),v.z2EmphasisLift=0,!u.namedFrom&&(Ywe.get(m)!=null&&t$(e,v,a,w,h,x,null),r$(e,v,a,w,h,x),i$(e,v,a,w,h),Xwe.get(m)!=null)){var T=n$(e,v,a,w,h);T==="self"&&(s=!0);var C=n.get(a)||n.set(a,[]);C.push(v)}},this),this._enableBlurEntireSVG(s,e)},r.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var i=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),n=i.opacity;this._svgGraphicRecord.root.traverse(function(s){if(!s.isGroup){qp(s);var u=s.ensureState("blur").style||{};u.opacity==null&&n!=null&&(u.opacity=n),s.ensureState("emphasis")}})}},r.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},r.prototype.findHighDownDispatchers=function(e,t){if(e==null)return[];var i=t.coordinateSystem;if(i.resourceType==="geoJSON"){var n=this._regionsGroupByName;if(n){var s=n.get(e);return s?[s]:[]}}else if(i.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},r.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},r.prototype._useSVG=function(e){var t=dh.getGeoResource(e);if(t&&t.type==="geoSVG"){var i=t.useGraphic(this.uid);this._svgGroup.add(i.root),this._svgGraphicRecord=i,this._svgMapName=e}},r.prototype._freeSVG=function(){var e=this._svgMapName;if(e!=null){var t=dh.getGeoResource(e);t&&t.type==="geoSVG"&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},r.prototype._updateController=function(e,t,i){var n=e.coordinateSystem,s=this._controller,u=this._controllerHost;u.zoomLimit=e.get("scaleLimit"),u.zoom=n.getZoom(),s.enable(e.get("roam")||!1);var a=e.mainType;function h(){var p={type:"geoRoam",componentType:a};return p[a+"Id"]=e.id,p}s.off("pan").on("pan",function(p){this._mouseDownFlag=!1,Dk(u,p.dx,p.dy),i.dispatchAction(kt(h(),{dx:p.dx,dy:p.dy,animation:{duration:0}}))},this),s.off("zoom").on("zoom",function(p){this._mouseDownFlag=!1,Pk(u,p.scale,p.originX,p.originY),i.dispatchAction(kt(h(),{zoom:p.scale,originX:p.originX,originY:p.originY,animation:{duration:0}}))},this),s.setPointerChecker(function(p,m,v){return n.containPoint([m,v])&&!h2(p,i,e)})},r.prototype.resetForLabelLayout=function(){this.group.traverse(function(e){var t=e.getTextContent();t&&(t.ignore=u9(t).ignore)})},r.prototype._updateMapSelectHandler=function(e,t,i,n){var s=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",function(){s._mouseDownFlag=!0}),t.on("click",function(u){!s._mouseDownFlag||(s._mouseDownFlag=!1)}))},r}();function e$(r,e,t,i){var n=i.getModel("itemStyle"),s=i.getModel(["emphasis","itemStyle"]),u=i.getModel(["blur","itemStyle"]),a=i.getModel(["select","itemStyle"]),h=yw(n),p=yw(s),m=yw(a),v=yw(u),x=r.data;if(x){var w=x.getItemVisual(t,"style"),T=x.getItemVisual(t,"decal");r.isVisualEncodedByVisualMap&&w.fill&&(h.fill=w.fill),T&&(h.decal=hv(T,r.api))}e.setStyle(h),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=p,e.ensureState("select").style=m,e.ensureState("blur").style=v,qp(e)}function t$(r,e,t,i,n,s,u){var a=r.data,h=r.isGeo,p=a&&isNaN(a.get(a.mapDimension("value"),s)),m=a&&a.getItemLayout(s);if(h||p||m&&m.showLabel){var v=h?t:s,x=void 0;(!a||s>=0)&&(x=n);var w=u?{normal:{align:"center",verticalAlign:"middle"}}:null;ro(e,Ra(i),{labelFetcher:x,labelDataIndex:v,defaultText:t},w);var T=e.getTextContent();if(T&&(u9(T).ignore=T.ignore,e.textConfig&&u)){var C=e.getBoundingRect().clone();e.textConfig.layoutRect=C,e.textConfig.position=[(u[0]-C.x)/C.width*100+"%",(u[1]-C.y)/C.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function r$(r,e,t,i,n,s){r.data?r.data.setItemGraphicEl(s,e):Gr(e).eventData={componentType:"geo",componentIndex:n.componentIndex,geoIndex:n.componentIndex,name:t,region:i&&i.option||{}}}function i$(r,e,t,i,n){r.data||Pv({el:e,componentModel:n,itemName:t,itemTooltipOption:i.get("tooltip")})}function n$(r,e,t,i,n){e.highDownSilentOnTouch=!!n.get("selectedMode");var s=i.getModel("emphasis"),u=s.get("focus");return Kn(e,u,s.get("blurScope"),s.get("disabled")),r.isGeo&&Jme(e,n,t),u}function a$(r,e,t){var i=[],n;function s(){n=[]}function u(){n.length&&(i.push(n),n=[])}var a=e({polygonStart:s,polygonEnd:u,lineStart:s,lineEnd:u,point:function(h,p){isFinite(h)&&isFinite(p)&&n.push([h,p])},sphere:function(){}});return!t&&a.polygonStart(),ue(r,function(h){a.lineStart();for(var p=0;p<h.length;p++)a.point(h[p][0],h[p][1]);a.lineEnd()}),!t&&a.polygonEnd(),i}var c9=Kwe,Jwe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n,s){if(!(s&&s.type==="mapToggleSelect"&&s.from===this.uid)){var u=this.group;if(u.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&s&&s.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),s&&s.type==="geoRoam"&&s.componentType==="series"&&s.seriesId===t.id){var a=this._mapDraw;a&&u.add(a.group)}else if(t.needsDrawMap){var a=this._mapDraw||new c9(n);u.add(a.group),a.draw(t,i,n,this,s),this._mapDraw=a}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&i.getComponent("legend")&&this._renderSymbols(t,i,n)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(t,i,n){var s=t.originalData,u=this.group;s.each(s.mapDimension("value"),function(a,h){if(!isNaN(a)){var p=s.getItemLayout(h);if(!(!p||!p.point)){var m=p.point,v=p.offset,x=new jd({style:{fill:t.getData().getVisual("style").fill},shape:{cx:m[0]+v*9,cy:m[1],r:3},silent:!0,z2:8+(v?0:Ev+1)});if(!v){var w=t.mainSeries.getData(),T=s.getName(h),C=w.indexOfName(T),I=s.getItemModel(h),k=I.getModel("label"),R=w.getItemGraphicEl(C);ro(x,Ra(I),{labelFetcher:{getFormattedLabel:function(z,$){return t.getFormattedLabel(C,$)}},defaultText:T}),x.disableLabelAnimation=!0,k.get("position")||x.setTextConfig({position:"bottom"}),R.onHoverStateChange=function(z){CS(x,z)}}u.add(x)}}})},e.type="map",e}(Cn),Qwe=Jwe,eSe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.needsDrawMap=!1,t.seriesGroup=[],t.getTooltipPosition=function(i){if(i!=null){var n=this.getData().getName(i),s=this.coordinateSystem,u=s.getRegion(n);return u&&s.dataToPoint(u.getCenter())}},t}return e.prototype.getInitialData=function(t){for(var i=$v(this,{coordDimensions:["value"],encodeDefaulter:Qr(YL,this)}),n=Mr(),s=[],u=0,a=i.count();u<a;u++){var h=i.getName(u);n.set(h,!0)}var p=dh.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return ue(p.regions,function(m){var v=m.name;n.get(v)||s.push(v)}),i.appendValues([],s),i},e.prototype.getHostGeoModel=function(){var t=this.option.geoIndex;return t!=null?this.ecModel.getComponent("geo",t):null},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(t){var i=this.getData();return i.get(i.mapDimension("value"),t)},e.prototype.getRegionModel=function(t){var i=this.getData();return i.getItemModel(i.indexOfName(t))},e.prototype.formatTooltip=function(t,i,n){for(var s=this.getData(),u=this.getRawValue(t),a=s.getName(t),h=this.seriesGroup,p=[],m=0;m<h.length;m++){var v=h[m].originalData.indexOfName(a),x=s.mapDimension("value");isNaN(h[m].originalData.get(x,v))||p.push(h[m].name)}return Oa("section",{header:p.join(", "),noHeader:!p.length,blocks:[Oa("nameValue",{name:a,value:u})]})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.getLegendIcon=function(t){var i=t.icon||"roundRect",n=fa(i,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return n.setStyle(t.itemStyle),n.style.stroke="none",i.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},e}(Gn),tSe=eSe;function rSe(r,e){var t={};return ue(r,function(i){i.each(i.mapDimension("value"),function(n,s){var u="ec-"+i.getName(s);t[u]=t[u]||[],isNaN(n)||t[u].push(n)})}),r[0].map(r[0].mapDimension("value"),function(i,n){for(var s="ec-"+r[0].getName(n),u=0,a=1/0,h=-1/0,p=t[s].length,m=0;m<p;m++)a=Math.min(a,t[s][m]),h=Math.max(h,t[s][m]),u+=t[s][m];var v;return e==="min"?v=a:e==="max"?v=h:e==="average"?v=u/p:v=u,p===0?NaN:v})}function iSe(r){var e={};r.eachSeriesByType("map",function(t){var i=t.getHostGeoModel(),n=i?"o"+i.id:"i"+t.getMapType();(e[n]=e[n]||[]).push(t)}),ue(e,function(t,i){for(var n=rSe(Ht(t,function(u){return u.getData()}),t[0].get("mapValueCalculation")),s=0;s<t.length;s++)t[s].originalData=t[s].getData();for(var s=0;s<t.length;s++)t[s].seriesGroup=t,t[s].needsDrawMap=s===0&&!t[s].getHostGeoModel(),t[s].setData(n.cloneShallow()),t[s].mainSeries=t[0]})}function nSe(r){var e={};r.eachSeriesByType("map",function(t){var i=t.getMapType();if(!(t.getHostGeoModel()||e[i])){var n={};ue(t.seriesGroup,function(u){var a=u.coordinateSystem,h=u.originalData;u.get("showLegendSymbol")&&r.getComponent("legend")&&h.each(h.mapDimension("value"),function(p,m){var v=h.getName(m),x=a.getRegion(v);if(!(!x||isNaN(p))){var w=n[v]||0,T=a.dataToPoint(x.getCenter());n[v]=w+1,h.setItemLayout(m,{point:T,offset:w})}})});var s=t.getData();s.each(function(u){var a=s.getName(u),h=s.getItemLayout(u)||{};h.showLabel=!n[a],s.setItemLayout(u,h)}),e[i]=!0}})}var o$=Qa,aSe=function(r){lt(e,r);function e(t){var i=r.call(this)||this;return i.type="view",i.dimensions=["x","y"],i._roamTransformable=new Xc,i._rawTransformable=new Xc,i.name=t,i}return e.prototype.setBoundingRect=function(t,i,n,s){return this._rect=new ai(t,i,n,s),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,i,n,s){this._transformTo(t,i,n,s),this._viewRect=new ai(t,i,n,s)},e.prototype._transformTo=function(t,i,n,s){var u=this.getBoundingRect(),a=this._rawTransformable;a.transform=u.calculateTransform(new ai(t,i,n,s));var h=a.parent;a.parent=null,a.decomposeTransform(),a.parent=h,this._updateTransform()},e.prototype.setCenter=function(t,i){!t||(this._center=[sr(t[0],i.getWidth()),sr(t[1],i.getHeight())],this._updateCenterAndZoom())},e.prototype.setZoom=function(t){t=t||1;var i=this.zoomLimit;i&&(i.max!=null&&(t=Math.min(i.max,t)),i.min!=null&&(t=Math.max(i.min,t))),this._zoom=t,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect(),i=t.x+t.width/2,n=t.y+t.height/2;return[i,n]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),i=this._roamTransformable,n=this.getDefaultCenter(),s=this.getCenter(),u=this.getZoom();s=Qa([],s,t),n=Qa([],n,t),i.originX=s[0],i.originY=s[1],i.x=n[0]-s[0],i.y=n[1]-s[1],i.scaleX=i.scaleY=u,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,i=this._rawTransformable;i.parent=t,t.updateTransform(),i.updateTransform(),xL(this.transform||(this.transform=[]),i.transform||ks()),this._rawTransform=i.getLocalTransform(),this.invTransform=this.invTransform||[],Cv(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,i=this._roamTransformable,n=new Xc;return n.transform=i.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,i,n){var s=i?this._rawTransform:this.transform;return n=n||[],s?o$(n,t,s):ko(n,t)},e.prototype.pointToData=function(t){var i=this.invTransform;return i?o$([],t,i):[t[0],t[1]]},e.prototype.convertToPixel=function(t,i,n){var s=s$(i);return s===this?s.dataToPoint(n):null},e.prototype.convertFromPixel=function(t,i,n){var s=s$(i);return s===this?s.pointToData(n):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e}(Xc);function s$(r){var e=r.seriesModel;return e?e.coordinateSystem:null}var Lx=aSe,oSe={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},h9=["lng","lat"],d9=function(r){lt(e,r);function e(t,i,n){var s=r.call(this,t)||this;s.dimensions=h9,s.type="geo",s._nameCoordMap=Mr(),s.map=i;var u=n.projection,a=dh.load(i,n.nameMap,n.nameProperty),h=dh.getGeoResource(i);s.resourceType=h?h.type:null;var p=s.regions=a.regions,m=oSe[h.type];s._regionsMap=a.regionsMap,s.regions=a.regions,s.projection=u;var v;if(u)for(var x=0;x<p.length;x++){var w=p[x].getBoundingRect(u);v=v||w.clone(),v.union(w)}else v=a.boundingRect;return s.setBoundingRect(v.x,v.y,v.width,v.height),s.aspectScale=u?1:Yr(n.aspectScale,m.aspectScale),s._invertLongitute=u?!1:m.invertLongitute,s}return e.prototype._transformTo=function(t,i,n,s){var u=this.getBoundingRect(),a=this._invertLongitute;u=u.clone(),a&&(u.y=-u.y-u.height);var h=this._rawTransformable;h.transform=u.calculateTransform(new ai(t,i,n,s));var p=h.parent;h.parent=null,h.decomposeTransform(),h.parent=p,a&&(h.scaleY=-h.scaleY),this._updateTransform()},e.prototype.getRegion=function(t){return this._regionsMap.get(t)},e.prototype.getRegionByCoord=function(t){for(var i=this.regions,n=0;n<i.length;n++){var s=i[n];if(s.type==="geoJSON"&&s.contain(t))return i[n]}},e.prototype.addGeoCoord=function(t,i){this._nameCoordMap.set(t,i)},e.prototype.getGeoCoord=function(t){var i=this._regionsMap.get(t);return this._nameCoordMap.get(t)||i&&i.getCenter()},e.prototype.dataToPoint=function(t,i,n){if(gr(t)&&(t=this.getGeoCoord(t)),t){var s=this.projection;return s&&(t=s.project(t)),t&&this.projectedToPoint(t,i,n)}},e.prototype.pointToData=function(t){var i=this.projection;return i&&(t=i.unproject(t)),t&&this.pointToProjected(t)},e.prototype.pointToProjected=function(t){return r.prototype.pointToData.call(this,t)},e.prototype.projectedToPoint=function(t,i,n){return r.prototype.dataToPoint.call(this,t,i,n)},e.prototype.convertToPixel=function(t,i,n){var s=l$(i);return s===this?s.dataToPoint(n):null},e.prototype.convertFromPixel=function(t,i,n){var s=l$(i);return s===this?s.pointToData(n):null},e}(Lx);pa(d9,Lx);function l$(r){var e=r.geoModel,t=r.seriesModel;return e?e.coordinateSystem:t?t.coordinateSystem||(t.getReferringComponents("geo",da).models[0]||{}).coordinateSystem:null}var u$=d9;function c$(r,e){var t=r.get("boundingCoords");if(t!=null){var i=t[0],n=t[1];if(isFinite(i[0])&&isFinite(i[1])&&isFinite(n[0])&&isFinite(n[1])){var s=this.projection;if(s){var u=i[0],a=i[1],h=n[0],p=n[1];i=[1/0,1/0],n=[-1/0,-1/0];var m=function(G,Y,Z,H){for(var re=Z-G,ne=H-Y,se=0;se<=100;se++){var me=se/100,Se=s.project([G+re*me,Y+ne*me]);gd(i,i,Se),vd(n,n,Se)}};m(u,a,h,a),m(h,a,h,p),m(h,p,u,p),m(u,p,h,a)}this.setBoundingRect(i[0],i[1],n[0]-i[0],n[1]-i[1])}}var v=this.getBoundingRect(),x=r.get("layoutCenter"),w=r.get("layoutSize"),T=e.getWidth(),C=e.getHeight(),I=v.width/v.height*this.aspectScale,k=!1,R,z;x&&w&&(R=[sr(x[0],T),sr(x[1],C)],z=sr(w,Math.min(T,C)),!isNaN(R[0])&&!isNaN(R[1])&&!isNaN(z)&&(k=!0));var $;if(k)$={},I>1?($.width=z,$.height=z/I):($.height=z,$.width=z*I),$.y=R[1]-$.height/2,$.x=R[0]-$.width/2;else{var j=r.getBoxLayoutParams();j.aspect=I,$=xa(j,{width:T,height:C})}this.setViewRect($.x,$.y,$.width,$.height),this.setCenter(r.get("center"),e),this.setZoom(r.get("zoom"))}function sSe(r,e){ue(e.get("geoCoord"),function(t,i){r.addGeoCoord(i,t)})}var lSe=function(){function r(){this.dimensions=h9}return r.prototype.create=function(e,t){var i=[];function n(u){return{nameProperty:u.get("nameProperty"),aspectScale:u.get("aspectScale"),projection:u.get("projection")}}e.eachComponent("geo",function(u,a){var h=u.get("map"),p=new u$(h+a,h,kt({nameMap:u.get("nameMap")},n(u)));p.zoomLimit=u.get("scaleLimit"),i.push(p),u.coordinateSystem=p,p.model=u,p.resize=c$,p.resize(u,t)}),e.eachSeries(function(u){var a=u.get("coordinateSystem");if(a==="geo"){var h=u.get("geoIndex")||0;u.coordinateSystem=i[h]}});var s={};return e.eachSeriesByType("map",function(u){if(!u.getHostGeoModel()){var a=u.getMapType();s[a]=s[a]||[],s[a].push(u)}}),ue(s,function(u,a){var h=Ht(u,function(m){return m.get("nameMap")}),p=new u$(a,a,kt({nameMap:gL(h)},n(u[0])));p.zoomLimit=Ga.apply(null,Ht(u,function(m){return m.get("scaleLimit")})),i.push(p),p.resize=c$,p.resize(u[0],t),ue(u,function(m){m.coordinateSystem=p,sSe(p,m)})}),i},r.prototype.getFilledRegions=function(e,t,i,n){for(var s=(e||[]).slice(),u=Mr(),a=0;a<s.length;a++)u.set(s[a].name,s[a]);var h=dh.load(t,i,n);return ue(h.regions,function(p){var m=p.name;!u.get(m)&&s.push({name:m})}),s},r}(),uSe=new lSe,f9=uSe,cSe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,i,n){var s=dh.getGeoResource(t.map);if(s&&s.type==="geoJSON"){var u=t.itemStyle=t.itemStyle||{};"color"in u||(u.color="#eee")}this.mergeDefaultAndTheme(t,n),jp(t,"label",["show"])},e.prototype.optionUpdated=function(){var t=this,i=this.option;i.regions=f9.getFilledRegions(i.regions,i.map,i.nameMap,i.nameProperty);var n={};this._optionModelMap=ic(i.regions||[],function(s,u){var a=u.name;return a&&(s.set(a,new An(u,t,t.ecModel)),u.selected&&(n[a]=!0)),s},Mr()),i.selectedMap||(i.selectedMap=n)},e.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new An(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(t,i){var n=this.getRegionModel(t),s=i==="normal"?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),u={name:t};if(kr(s))return u.status=i,s(u);if(gr(s))return s.replace("{a}",t!=null?t:"")},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.select=function(t){var i=this.option,n=i.selectedMode;if(!!n){n!=="multiple"&&(i.selectedMap=null);var s=i.selectedMap||(i.selectedMap={});s[t]=!0}},e.prototype.unSelect=function(t){var i=this.option.selectedMap;i&&(i[t]=!1)},e.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},e.prototype.isSelected=function(t){var i=this.option.selectedMap;return!!(i&&i[t])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},e}(Oi),hSe=cSe;function h$(r,e){return r.pointToProjected?r.pointToProjected(e):r.pointToData(e)}function kk(r,e,t,i){var n=r.getZoom(),s=r.getCenter(),u=e.zoom,a=r.projectedToPoint?r.projectedToPoint(s):r.dataToPoint(s);if(e.dx!=null&&e.dy!=null&&(a[0]-=e.dx,a[1]-=e.dy,r.setCenter(h$(r,a),i)),u!=null){if(t){var h=t.min||0,p=t.max||1/0;u=Math.max(Math.min(n*u,p),h)/n}r.scaleX*=u,r.scaleY*=u;var m=(e.originX-r.x)*(u-1),v=(e.originY-r.y)*(u-1);r.x-=m,r.y-=v,r.updateTransform(),r.setCenter(h$(r,a),i),r.setZoom(u*n)}return{center:r.getCenter(),zoom:r.getZoom()}}var dSe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.focusBlurEnabled=!0,t}return e.prototype.init=function(t,i){this._api=i},e.prototype.render=function(t,i,n,s){if(this._model=t,!t.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new c9(n));var u=this._mapDraw;u.draw(t,i,n,this,s),u.group.on("click",this._handleRegionClick,this),u.group.silent=t.get("silent"),this.group.add(u.group),this.updateSelectStatus(t,i,n)},e.prototype._handleRegionClick=function(t){var i;Tp(t.target,function(n){return(i=Gr(n).eventData)!=null},!0),i&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:i.name})},e.prototype.updateSelectStatus=function(t,i,n){var s=this;this._mapDraw.group.traverse(function(u){var a=Gr(u).eventData;if(a)return s._model.isSelected(a.name)?n.enterSelect(u):n.leaveSelect(u),!0})},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(Jn),fSe=dSe;function pSe(r,e,t){dh.registerMap(r,e,t)}function p9(r){r.registerCoordinateSystem("geo",f9),r.registerComponentModel(hSe),r.registerComponentView(fSe),r.registerImpl("registerMap",pSe),r.registerImpl("getMap",function(t){return dh.getMapForUser(t)});function e(t,i){i.update="geo:updateSelectStatus",r.registerAction(i,function(n,s){var u={},a=[];return s.eachComponent({mainType:"geo",query:n},function(h){h[t](n.name);var p=h.coordinateSystem;ue(p.regions,function(v){u[v.name]=h.isSelected(v.name)||!1});var m=[];ue(u,function(v,x){u[x]&&m.push(x)}),a.push({geoIndex:h.componentIndex,name:m})}),{selected:u,allSelected:a,name:n.name}})}e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),r.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,i,n){var s=t.componentType||"series";i.eachComponent({mainType:s,query:t},function(u){var a=u.coordinateSystem;if(a.type==="geo"){var h=kk(a,t,u.get("scaleLimit"),n);u.setCenter&&u.setCenter(h.center),u.setZoom&&u.setZoom(h.zoom),s==="series"&&ue(u.seriesGroup,function(p){p.setCenter(h.center),p.setZoom(h.zoom)})}})})}function mSe(r){gi(p9),r.registerChartView(Qwe),r.registerSeriesModel(tSe),r.registerLayout(nSe),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,iSe),h7("map",r.registerAction)}function gSe(r){var e=r;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t=[e],i,n;i=t.pop();)if(n=i.children,i.isExpand&&n.length)for(var s=n.length,u=s-1;u>=0;u--){var a=n[u];a.hierNode={defaultAncestor:null,ancestor:a,prelim:0,modifier:0,change:0,shift:0,i:u,thread:null},t.push(a)}}function vSe(r,e){var t=r.isExpand?r.children:[],i=r.parentNode.children,n=r.hierNode.i?i[r.hierNode.i-1]:null;if(t.length){xSe(r);var s=(t[0].hierNode.prelim+t[t.length-1].hierNode.prelim)/2;n?(r.hierNode.prelim=n.hierNode.prelim+e(r,n),r.hierNode.modifier=r.hierNode.prelim-s):r.hierNode.prelim=s}else n&&(r.hierNode.prelim=n.hierNode.prelim+e(r,n));r.parentNode.hierNode.defaultAncestor=bSe(r,n,r.parentNode.hierNode.defaultAncestor||i[0],e)}function _Se(r){var e=r.hierNode.prelim+r.parentNode.hierNode.modifier;r.setLayout({x:e},!0),r.hierNode.modifier+=r.parentNode.hierNode.modifier}function d$(r){return arguments.length?r:TSe}function Jy(r,e){return r-=Math.PI/2,{x:e*Math.cos(r),y:e*Math.sin(r)}}function ySe(r,e){return xa(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function xSe(r){for(var e=r.children,t=e.length,i=0,n=0;--t>=0;){var s=e[t];s.hierNode.prelim+=i,s.hierNode.modifier+=i,n+=s.hierNode.change,i+=s.hierNode.shift+n}}function bSe(r,e,t,i){if(e){for(var n=r,s=r,u=s.parentNode.children[0],a=e,h=n.hierNode.modifier,p=s.hierNode.modifier,m=u.hierNode.modifier,v=a.hierNode.modifier;a=vI(a),s=_I(s),a&&s;){n=vI(n),u=_I(u),n.hierNode.ancestor=r;var x=a.hierNode.prelim+v-s.hierNode.prelim-p+i(a,s);x>0&&(SSe(wSe(a,r,t),r,x),p+=x,h+=x),v+=a.hierNode.modifier,p+=s.hierNode.modifier,h+=n.hierNode.modifier,m+=u.hierNode.modifier}a&&!vI(n)&&(n.hierNode.thread=a,n.hierNode.modifier+=v-h),s&&!_I(u)&&(u.hierNode.thread=s,u.hierNode.modifier+=p-m,t=r)}return t}function vI(r){var e=r.children;return e.length&&r.isExpand?e[e.length-1]:r.hierNode.thread}function _I(r){var e=r.children;return e.length&&r.isExpand?e[0]:r.hierNode.thread}function wSe(r,e,t){return r.hierNode.ancestor.parentNode===e.parentNode?r.hierNode.ancestor:t}function SSe(r,e,t){var i=t/(e.hierNode.i-r.hierNode.i);e.hierNode.change-=i,e.hierNode.shift+=t,e.hierNode.modifier+=t,e.hierNode.prelim+=t,r.hierNode.change+=i}function TSe(r,e){return r.parentNode===e.parentNode?1:2}var MSe=function(){function r(){this.parentPoint=[],this.childPoints=[]}return r}(),ASe=function(r){lt(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new MSe},e.prototype.buildPath=function(t,i){var n=i.childPoints,s=n.length,u=i.parentPoint,a=n[0],h=n[s-1];if(s===1){t.moveTo(u[0],u[1]),t.lineTo(a[0],a[1]);return}var p=i.orient,m=p==="TB"||p==="BT"?0:1,v=1-m,x=sr(i.forkPosition,1),w=[];w[m]=u[m],w[v]=u[v]+(h[v]-u[v])*x,t.moveTo(u[0],u[1]),t.lineTo(w[0],w[1]),t.moveTo(a[0],a[1]),w[m]=a[m],t.lineTo(w[0],w[1]),w[m]=h[m],t.lineTo(w[0],w[1]),t.lineTo(h[0],h[1]);for(var T=1;T<s-1;T++){var C=n[T];t.moveTo(C[0],C[1]),w[m]=C[m],t.lineTo(w[0],w[1])}},e}(_i),CSe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._mainGroup=new Vr,t}return e.prototype.init=function(t,i){this._controller=new Px(i.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,i,n){var s=t.getData(),u=t.layoutInfo,a=this._mainGroup,h=t.get("layout");h==="radial"?(a.x=u.x+u.width/2,a.y=u.y+u.height/2):(a.x=u.x,a.y=u.y),this._updateViewCoordSys(t,n),this._updateController(t,i,n);var p=this._data;s.diff(p).add(function(m){f$(s,m)&&p$(s,m,null,a,t)}).update(function(m,v){var x=p.getItemGraphicEl(v);if(!f$(s,m)){x&&g$(p,v,x,a,t);return}p$(s,m,x,a,t)}).remove(function(m){var v=p.getItemGraphicEl(m);v&&g$(p,m,v,a,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),t.get("expandAndCollapse")===!0&&s.eachItemGraphicEl(function(m,v){m.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:v})})}),this._data=s},e.prototype._updateViewCoordSys=function(t,i){var n=t.getData(),s=[];n.each(function(v){var x=n.getItemLayout(v);x&&!isNaN(x.x)&&!isNaN(x.y)&&s.push([+x.x,+x.y])});var u=[],a=[];GT(s,u,a);var h=this._min,p=this._max;a[0]-u[0]===0&&(u[0]=h?h[0]:u[0]-1,a[0]=p?p[0]:a[0]+1),a[1]-u[1]===0&&(u[1]=h?h[1]:u[1]-1,a[1]=p?p[1]:a[1]+1);var m=t.coordinateSystem=new Lx;m.zoomLimit=t.get("scaleLimit"),m.setBoundingRect(u[0],u[1],a[0]-u[0],a[1]-u[1]),m.setCenter(t.get("center"),i),m.setZoom(t.get("zoom")),this.group.attr({x:m.x,y:m.y,scaleX:m.scaleX,scaleY:m.scaleY}),this._min=u,this._max=a},e.prototype._updateController=function(t,i,n){var s=this,u=this._controller,a=this._controllerHost,h=this.group;u.setPointerChecker(function(p,m,v){var x=h.getBoundingRect();return x.applyTransform(h.transform),x.contain(m,v)&&!h2(p,n,t)}),u.enable(t.get("roam")),a.zoomLimit=t.get("scaleLimit"),a.zoom=t.coordinateSystem.getZoom(),u.off("pan").off("zoom").on("pan",function(p){Dk(a,p.dx,p.dy),n.dispatchAction({seriesId:t.id,type:"treeRoam",dx:p.dx,dy:p.dy})}).on("zoom",function(p){Pk(a,p.scale,p.originX,p.originY),n.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:p.scale,originX:p.originX,originY:p.originY}),s._updateNodeAndLinkScale(t),n.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(t){var i=t.getData(),n=this._getNodeGlobalScale(t);i.eachItemGraphicEl(function(s,u){s.setSymbolScale(n)})},e.prototype._getNodeGlobalScale=function(t){var i=t.coordinateSystem;if(i.type!=="view")return 1;var n=this._nodeScaleRatio,s=i.scaleX||1,u=i.getZoom(),a=(u-1)*n+1;return a/s},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(Cn);function f$(r,e){var t=r.getItemLayout(e);return t&&!isNaN(t.x)&&!isNaN(t.y)}function p$(r,e,t,i,n){var s=!t,u=r.tree.getNodeByDataIndex(e),a=u.getModel(),h=u.getVisual("style").fill,p=u.isExpand===!1&&u.children.length!==0?h:"#fff",m=r.tree.root,v=u.parentNode===m?u:u.parentNode||u,x=r.getItemGraphicEl(v.dataIndex),w=v.getLayout(),T=x?{x:x.__oldX,y:x.__oldY,rawX:x.__radialOldRawX,rawY:x.__radialOldRawY}:w,C=u.getLayout();s?(t=new Mx(r,e,null,{symbolInnerColor:p,useNameLabel:!0}),t.x=T.x,t.y=T.y):t.updateData(r,e,null,{symbolInnerColor:p,useNameLabel:!0}),t.__radialOldRawX=t.__radialRawX,t.__radialOldRawY=t.__radialRawY,t.__radialRawX=C.rawX,t.__radialRawY=C.rawY,i.add(t),r.setItemGraphicEl(e,t),t.__oldX=t.x,t.__oldY=t.y,ji(t,{x:C.x,y:C.y},n);var I=t.getSymbolPath();if(n.get("layout")==="radial"){var k=m.children[0],R=k.getLayout(),z=k.children.length,$=void 0,j=void 0;if(C.x===R.x&&u.isExpand===!0&&k.children.length){var G={x:(k.children[0].getLayout().x+k.children[z-1].getLayout().x)/2,y:(k.children[0].getLayout().y+k.children[z-1].getLayout().y)/2};$=Math.atan2(G.y-R.y,G.x-R.x),$<0&&($=Math.PI*2+$),j=G.x<R.x,j&&($=$-Math.PI)}else $=Math.atan2(C.y-R.y,C.x-R.x),$<0&&($=Math.PI*2+$),u.children.length===0||u.children.length!==0&&u.isExpand===!1?(j=C.x<R.x,j&&($=$-Math.PI)):(j=C.x>R.x,j||($=$-Math.PI));var Y=j?"left":"right",Z=a.getModel("label"),H=Z.get("rotate"),re=H*(Math.PI/180),ne=I.getTextContent();ne&&(I.setTextConfig({position:Z.get("position")||Y,rotation:H==null?-$:re,origin:"center"}),ne.setStyle("verticalAlign","middle"))}var se=a.get(["emphasis","focus"]),me=se==="relative"?_S(u.getAncestorsIndices(),u.getDescendantIndices()):se==="ancestor"?u.getAncestorsIndices():se==="descendant"?u.getDescendantIndices():null;me&&(Gr(t).focus=me),ISe(n,u,m,t,T,w,C,i),t.__edge&&(t.onHoverStateChange=function(Se){if(Se!=="blur"){var Ie=u.parentNode&&r.getItemGraphicEl(u.parentNode.dataIndex);Ie&&Ie.hoverState===mx||CS(t.__edge,Se)}})}function ISe(r,e,t,i,n,s,u,a){var h=e.getModel(),p=r.get("edgeShape"),m=r.get("layout"),v=r.getOrient(),x=r.get(["lineStyle","curveness"]),w=r.get("edgeForkPosition"),T=h.getModel("lineStyle").getLineStyle(),C=i.__edge;if(p==="curve")e.parentNode&&e.parentNode!==t&&(C||(C=i.__edge=new WT({shape:YD(m,v,x,n,n)})),ji(C,{shape:YD(m,v,x,s,u)},r));else if(p==="polyline"&&m==="orthogonal"&&e!==t&&e.children&&e.children.length!==0&&e.isExpand===!0){for(var I=e.children,k=[],R=0;R<I.length;R++){var z=I[R].getLayout();k.push([z.x,z.y])}C||(C=i.__edge=new ASe({shape:{parentPoint:[u.x,u.y],childPoints:[[u.x,u.y]],orient:v,forkPosition:w}})),ji(C,{shape:{parentPoint:[u.x,u.y],childPoints:k}},r)}C&&!(p==="polyline"&&!e.isExpand)&&(C.useStyle(zr({strokeNoScale:!0,fill:null},T)),to(C,h,"lineStyle"),qp(C),a.add(C))}function m$(r,e,t,i,n){var s=e.tree.root,u=m9(s,r),a=u.source,h=u.sourceLayout,p=e.getItemGraphicEl(r.dataIndex);if(!!p){var m=e.getItemGraphicEl(a.dataIndex),v=m.__edge,x=p.__edge||(a.isExpand===!1||a.children.length===1?v:void 0),w=i.get("edgeShape"),T=i.get("layout"),C=i.get("orient"),I=i.get(["lineStyle","curveness"]);x&&(w==="curve"?zd(x,{shape:YD(T,C,I,h,h),style:{opacity:0}},i,{cb:function(){t.remove(x)},removeOpt:n}):w==="polyline"&&i.get("layout")==="orthogonal"&&zd(x,{shape:{parentPoint:[h.x,h.y],childPoints:[[h.x,h.y]]},style:{opacity:0}},i,{cb:function(){t.remove(x)},removeOpt:n}))}}function m9(r,e){for(var t=e.parentNode===r?e:e.parentNode||e,i;i=t.getLayout(),i==null;)t=t.parentNode===r?t:t.parentNode||t;return{source:t,sourceLayout:i}}function g$(r,e,t,i,n){var s=r.tree.getNodeByDataIndex(e),u=r.tree.root,a=m9(u,s).sourceLayout,h={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};zd(t,{x:a.x+1,y:a.y+1},n,{cb:function(){i.remove(t),r.setItemGraphicEl(e,null)},removeOpt:h}),t.fadeOut(null,r.hostModel,{fadeLabel:!0,animation:h}),s.children.forEach(function(p){m$(p,r,i,n,h)}),m$(s,r,i,n,h)}function YD(r,e,t,i,n){var s,u,a,h,p,m,v,x;if(r==="radial"){p=i.rawX,v=i.rawY,m=n.rawX,x=n.rawY;var w=Jy(p,v),T=Jy(p,v+(x-v)*t),C=Jy(m,x+(v-x)*t),I=Jy(m,x);return{x1:w.x||0,y1:w.y||0,x2:I.x||0,y2:I.y||0,cpx1:T.x||0,cpy1:T.y||0,cpx2:C.x||0,cpy2:C.y||0}}else p=i.x,v=i.y,m=n.x,x=n.y,(e==="LR"||e==="RL")&&(s=p+(m-p)*t,u=v,a=m+(p-m)*t,h=x),(e==="TB"||e==="BT")&&(s=p,u=v+(x-v)*t,a=m,h=x+(v-x)*t);return{x1:p,y1:v,x2:m,y2:x,cpx1:s,cpy1:u,cpx2:a,cpy2:h}}var ESe=CSe,_l=ki();function g9(r){var e=r.mainData,t=r.datas;t||(t={main:e},r.datasAttr={main:"data"}),r.datas=r.mainData=null,v9(e,t,r),ue(t,function(i){ue(e.TRANSFERABLE_METHODS,function(n){i.wrapMethod(n,Qr(DSe,r))})}),e.wrapMethod("cloneShallow",Qr(LSe,r)),ue(e.CHANGABLE_METHODS,function(i){e.wrapMethod(i,Qr(PSe,r))}),Vo(t[e.dataType]===e)}function DSe(r,e){if(OSe(this)){var t=kt({},_l(this).datas);t[this.dataType]=e,v9(e,t,r)}else Rk(e,this.dataType,_l(this).mainData,r);return e}function PSe(r,e){return r.struct&&r.struct.update(),e}function LSe(r,e){return ue(_l(e).datas,function(t,i){t!==e&&Rk(t.cloneShallow(),i,e,r)}),e}function kSe(r){var e=_l(this).mainData;return r==null||e==null?e:_l(e).datas[r]}function RSe(){var r=_l(this).mainData;return r==null?[{data:r}]:Ht(bi(_l(r).datas),function(e){return{type:e,data:_l(r).datas[e]}})}function OSe(r){return _l(r).mainData===r}function v9(r,e,t){_l(r).datas={},ue(e,function(i,n){Rk(i,n,r,t)})}function Rk(r,e,t,i){_l(t).datas[e]=r,_l(r).mainData=t,r.dataType=e,i.struct&&(r[i.structAttr]=i.struct,i.struct[i.datasAttr[e]]=r),r.getLinkedData=kSe,r.getLinkedDataAll=RSe}var zSe=function(){function r(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return r.prototype.isRemoved=function(){return this.dataIndex<0},r.prototype.eachNode=function(e,t,i){kr(e)&&(i=t,t=e,e=null),e=e||{},gr(e)&&(e={order:e});var n=e.order||"preorder",s=this[e.attr||"children"],u;n==="preorder"&&(u=t.call(i,this));for(var a=0;!u&&a<s.length;a++)s[a].eachNode(e,t,i);n==="postorder"&&t.call(i,this)},r.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var i=0;i<this.children.length;i++){var n=this.children[i];n.updateDepthAndHeight(e+1),n.height>t&&(t=n.height)}this.height=t+1},r.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,i=this.children,n=i.length;t<n;t++){var s=i[t].getNodeById(e);if(s)return s}},r.prototype.contains=function(e){if(e===this)return!0;for(var t=0,i=this.children,n=i.length;t<n;t++){var s=i[t].contains(e);if(s)return s}},r.prototype.getAncestors=function(e){for(var t=[],i=e?this:this.parentNode;i;)t.push(i),i=i.parentNode;return t.reverse(),t},r.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},r.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(t){e.push(t.dataIndex)}),e},r.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},r.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},r.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},r.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostTree,i=t.data.getItemModel(this.dataIndex);return i.getModel(e)}},r.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},r.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},r.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},r.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},r.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},r.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t;return-1}return-1},r.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},r.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},r}(),BSe=function(){function r(e){this.type="tree",this._nodes=[],this.hostModel=e}return r.prototype.eachNode=function(e,t,i){this.root.eachNode(e,t,i)},r.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},r.prototype.getNodeById=function(e){return this.root.getNodeById(e)},r.prototype.update=function(){for(var e=this.data,t=this._nodes,i=0,n=t.length;i<n;i++)t[i].dataIndex=-1;for(var i=0,n=e.count();i<n;i++)t[e.getRawIndex(i)].dataIndex=i},r.prototype.clearLayouts=function(){this.data.clearItemLayouts()},r.createTree=function(e,t,i){var n=new r(t),s=[],u=1;a(e);function a(m,v){var x=m.value;u=Math.max(u,Nt(x)?x.length:1),s.push(m);var w=new zSe(ya(m.name,""),n);v?FSe(w,v):n.root=w,n._nodes.push(w);var T=m.children;if(T)for(var C=0;C<T.length;C++)a(T[C],w)}n.root.updateDepthAndHeight(0);var h=bx(s,{coordDimensions:["value"],dimensionsCount:u}).dimensions,p=new No(h,t);return p.initData(s),i&&i(p),g9({mainData:p,struct:n,structAttr:"tree"}),n.update(),n},r}();function FSe(r,e){var t=e.children;r.parentNode!==e&&(t.push(r),r.parentNode=e)}var Ok=BSe;function rx(r,e,t){if(r&&di(e,r.type)>=0){var i=t.getData().tree.root,n=r.targetNode;if(gr(n)&&(n=i.getNodeById(n)),n&&i.contains(n))return{node:n};var s=r.targetNodeId;if(s!=null&&(n=i.getNodeById(s)))return{node:n}}}function _9(r){for(var e=[];r;)r=r.parentNode,r&&e.push(r);return e.reverse()}function zk(r,e){var t=_9(r);return di(t,e)>=0}function f2(r,e){for(var t=[];r;){var i=r.dataIndex;t.push({name:r.name,dataIndex:i,value:e.getRawValue(i)}),r=r.parentNode}return t.reverse(),t}var NSe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t){var i={name:t.name,children:t.data},n=t.leaves||{},s=new An(n,this,this.ecModel),u=Ok.createTree(i,this,a);function a(v){v.wrapMethod("getItemModel",function(x,w){var T=u.getNodeByDataIndex(w);return T&&T.children.length&&T.isExpand||(x.parentModel=s),x})}var h=0;u.eachNode("preorder",function(v){v.depth>h&&(h=v.depth)});var p=t.expandAndCollapse,m=p&&t.initialTreeDepth>=0?t.initialTreeDepth:h;return u.root.eachNode("preorder",function(v){var x=v.hostTree.data.getRawDataItem(v.dataIndex);v.isExpand=x&&x.collapsed!=null?!x.collapsed:v.depth<=m}),u.data},e.prototype.getOrient=function(){var t=this.get("orient");return t==="horizontal"?t="LR":t==="vertical"&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,i,n){for(var s=this.getData().tree,u=s.root.children[0],a=s.getNodeByDataIndex(t),h=a.getValue(),p=a.name;a&&a!==u;)p=a.parentNode.name+"."+p,a=a.parentNode;return Oa("nameValue",{name:p,value:h,noValue:isNaN(h)||h==null})},e.prototype.getDataParams=function(t){var i=r.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return i.treeAncestors=f2(n,this),i.collapsed=!n.isExpand,i},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(Gn),VSe=NSe;function $Se(r,e,t){for(var i=[r],n=[],s;s=i.pop();)if(n.push(s),s.isExpand){var u=s.children;if(u.length)for(var a=0;a<u.length;a++)i.push(u[a])}for(;s=n.pop();)e(s,t)}function Ry(r,e){for(var t=[r],i;i=t.pop();)if(e(i),i.isExpand){var n=i.children;if(n.length)for(var s=n.length-1;s>=0;s--)t.push(n[s])}}function GSe(r,e){r.eachSeriesByType("tree",function(t){USe(t,e)})}function USe(r,e){var t=ySe(r,e);r.layoutInfo=t;var i=r.get("layout"),n=0,s=0,u=null;i==="radial"?(n=2*Math.PI,s=Math.min(t.height,t.width)/2,u=d$(function(z,$){return(z.parentNode===$.parentNode?1:2)/z.depth})):(n=t.width,s=t.height,u=d$());var a=r.getData().tree.root,h=a.children[0];if(h){gSe(a),$Se(h,vSe,u),a.hierNode.modifier=-h.hierNode.prelim,Ry(h,_Se);var p=h,m=h,v=h;Ry(h,function(z){var $=z.getLayout().x;$<p.getLayout().x&&(p=z),$>m.getLayout().x&&(m=z),z.depth>v.depth&&(v=z)});var x=p===m?1:u(p,m)/2,w=x-p.getLayout().x,T=0,C=0,I=0,k=0;if(i==="radial")T=n/(m.getLayout().x+x+w),C=s/(v.depth-1||1),Ry(h,function(z){I=(z.getLayout().x+w)*T,k=(z.depth-1)*C;var $=Jy(I,k);z.setLayout({x:$.x,y:$.y,rawX:I,rawY:k},!0)});else{var R=r.getOrient();R==="RL"||R==="LR"?(C=s/(m.getLayout().x+x+w),T=n/(v.depth-1||1),Ry(h,function(z){k=(z.getLayout().x+w)*C,I=R==="LR"?(z.depth-1)*T:n-(z.depth-1)*T,z.setLayout({x:I,y:k},!0)})):(R==="TB"||R==="BT")&&(T=n/(m.getLayout().x+x+w),C=s/(v.depth-1||1),Ry(h,function(z){I=(z.getLayout().x+w)*T,k=R==="TB"?(z.depth-1)*C:s-(z.depth-1)*C,z.setLayout({x:I,y:k},!0)}))}}}function jSe(r){r.eachSeriesByType("tree",function(e){var t=e.getData(),i=t.tree;i.eachNode(function(n){var s=n.getModel(),u=s.getModel("itemStyle").getItemStyle(),a=t.ensureUniqueItemVisual(n.dataIndex,"style");kt(a,u)})})}function HSe(r){r.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(i){var n=e.dataIndex,s=i.getData().tree,u=s.getNodeByDataIndex(n);u.isExpand=!u.isExpand})}),r.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t,i){t.eachComponent({mainType:"series",subType:"tree",query:e},function(n){var s=n.coordinateSystem,u=kk(s,e,void 0,i);n.setCenter&&n.setCenter(u.center),n.setZoom&&n.setZoom(u.zoom)})})}function WSe(r){r.registerChartView(ESe),r.registerSeriesModel(VSe),r.registerLayout(GSe),r.registerVisual(jSe),HSe(r)}var v$=["treemapZoomToNode","treemapRender","treemapMove"];function qSe(r){for(var e=0;e<v$.length;e++)r.registerAction({type:v$[e],update:"updateView"},aa);r.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,i){i.eachComponent({mainType:"series",subType:"treemap",query:t},n);function n(s,u){var a=["treemapZoomToNode","treemapRootToNode"],h=rx(t,a,s);if(h){var p=s.getViewRoot();p&&(t.direction=zk(p,h.node)?"rollUp":"drillDown"),s.resetViewRoot(h.node)}}})}function y9(r){var e=r.getData(),t=e.tree,i={};t.eachNode(function(n){for(var s=n;s&&s.depth>1;)s=s.parentNode;var u=MD(r.ecModel,s.name||s.dataIndex+"",i);n.setVisual("decal",u)})}var ZSe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.preventUsingHoverLayer=!0,t}return e.prototype.getInitialData=function(t,i){var n={name:t.name,children:t.data};x9(n);var s=t.levels||[],u=this.designatedVisualItemStyle={},a=new An({itemStyle:u},this,i);s=t.levels=XSe(s,i);var h=Ht(s||[],function(v){return new An(v,a,i)},this),p=Ok.createTree(n,this,m);function m(v){v.wrapMethod("getItemModel",function(x,w){var T=p.getNodeByDataIndex(w),C=T?h[T.depth]:null;return x.parentModel=C||a,x})}return p.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,i,n){var s=this.getData(),u=this.getRawValue(t),a=s.getName(t);return Oa("nameValue",{name:a,value:u})},e.prototype.getDataParams=function(t){var i=r.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return i.treeAncestors=f2(n,this),i.treePathInfo=i.treeAncestors,i},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},kt(this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var i=this._idIndexMap;i||(i=this._idIndexMap=Mr(),this._idIndexMapCount=0);var n=i.get(t);return n==null&&i.set(t,n=this._idIndexMapCount++),n},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var i=this.getRawData().tree.root;(!t||t!==i&&!i.contains(t))&&(this._viewRoot=i)},e.prototype.enableAriaDecal=function(){y9(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25B6",zoomToNodeRatio:.32*.32,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(Gn);function x9(r){var e=0;ue(r.children,function(i){x9(i);var n=i.value;Nt(n)&&(n=n[0]),e+=n});var t=r.value;Nt(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),Nt(r.value)?r.value[0]=t:r.value=t}function XSe(r,e){var t=hn(e.get("color")),i=hn(e.get(["aria","decal","decals"]));if(!!t){r=r||[];var n,s;ue(r,function(a){var h=new An(a),p=h.get("color"),m=h.get("decal");(h.get(["itemStyle","color"])||p&&p!=="none")&&(n=!0),(h.get(["itemStyle","decal"])||m&&m!=="none")&&(s=!0)});var u=r[0]||(r[0]={});return n||(u.color=t.slice()),!s&&i&&(u.decal=i.slice()),r}}var YSe=ZSe,KSe=8,_$=8,yI=5,JSe=function(){function r(e){this.group=new Vr,e.add(this.group)}return r.prototype.render=function(e,t,i,n){var s=e.getModel("breadcrumb"),u=this.group;if(u.removeAll(),!(!s.get("show")||!i)){var a=s.getModel("itemStyle"),h=s.getModel("emphasis"),p=a.getModel("textStyle"),m=h.getModel(["itemStyle","textStyle"]),v={pos:{left:s.get("left"),right:s.get("right"),top:s.get("top"),bottom:s.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:s.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(i,v,p),this._renderContent(e,v,a,h,p,m,n),t2(u,v.pos,v.box)}},r.prototype._prepare=function(e,t,i){for(var n=e;n;n=n.parentNode){var s=ya(n.getModel().get("name"),""),u=i.getTextRect(s),a=Math.max(u.width+KSe*2,t.emptyItemWidth);t.totalWidth+=a+_$,t.renderList.push({node:n,text:s,width:a})}},r.prototype._renderContent=function(e,t,i,n,s,u,a){for(var h=0,p=t.emptyItemWidth,m=e.get(["breadcrumb","height"]),v=sve(t.pos,t.box),x=t.totalWidth,w=t.renderList,T=n.getModel("itemStyle").getItemStyle(),C=w.length-1;C>=0;C--){var I=w[C],k=I.node,R=I.width,z=I.text;x>v.width&&(x-=R-p,R=p,z=null);var $=new hs({shape:{points:QSe(h,0,R,m,C===w.length-1,C===0)},style:zr(i.getItemStyle(),{lineJoin:"bevel"}),textContent:new Ni({style:Mn(s,{text:z})}),textConfig:{position:"inside"},z2:Ev*1e4,onclick:Qr(a,k)});$.disableLabelAnimation=!0,$.getTextContent().ensureState("emphasis").style=Mn(u,{text:z}),$.ensureState("emphasis").style=T,Kn($,n.get("focus"),n.get("blurScope"),n.get("disabled")),this.group.add($),eTe($,e,k),h+=R+_$}},r.prototype.remove=function(){this.group.removeAll()},r}();function QSe(r,e,t,i,n,s){var u=[[n?r:r-yI,e],[r+t,e],[r+t,e+i],[n?r:r-yI,e+i]];return!s&&u.splice(2,0,[r+t+yI,e+i/2]),!n&&u.push([r,e+i/2]),u}function eTe(r,e,t){Gr(r).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:t&&t.dataIndex,name:t&&t.name},treePathInfo:t&&f2(t,e)}}var tTe=JSe,rTe=function(){function r(){this._storage=[],this._elExistsMap={}}return r.prototype.add=function(e,t,i,n,s){return this._elExistsMap[e.id]?!1:(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:i,delay:n,easing:s}),!0)},r.prototype.finished=function(e){return this._finishedCallback=e,this},r.prototype.start=function(){for(var e=this,t=this._storage.length,i=function(){t--,t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},n=0,s=this._storage.length;n<s;n++){var u=this._storage[n];u.el.animateTo(u.target,{duration:u.duration,delay:u.delay,easing:u.easing,setToFinal:!0,done:i,aborted:i})}return this},r}();function iTe(){return new rTe}var KD=Vr,y$=Li,x$=3,b$="label",w$="upperLabel",nTe=Ev*10,aTe=Ev*2,oTe=Ev*3,up=Wp([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),S$=function(r){var e=up(r);return e.stroke=e.fill=e.lineWidth=null,e},YS=ki(),sTe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._state="ready",t._storage=Oy(),t}return e.prototype.render=function(t,i,n,s){var u=i.findComponents({mainType:"series",subType:"treemap",query:s});if(!(di(u,t)<0)){this.seriesModel=t,this.api=n,this.ecModel=i;var a=["treemapZoomToNode","treemapRootToNode"],h=rx(s,a,t),p=s&&s.type,m=t.layoutInfo,v=!this._oldTree,x=this._storage,w=p==="treemapRootToNode"&&h&&x?{rootNodeGroup:x.nodeGroup[h.node.getRawIndex()],direction:s.direction}:null,T=this._giveContainerGroup(m),C=t.get("animation"),I=this._doRender(T,t,w);C&&!v&&(!p||p==="treemapZoomToNode"||p==="treemapRootToNode")?this._doAnimation(T,I,t,w):I.renderFinally(),this._resetController(n),this._renderBreadcrumb(t,n,h)}},e.prototype._giveContainerGroup=function(t){var i=this._containerGroup;return i||(i=this._containerGroup=new KD,this._initEvents(i),this.group.add(i)),i.x=t.x,i.y=t.y,i},e.prototype._doRender=function(t,i,n){var s=i.getData().tree,u=this._oldTree,a=Oy(),h=Oy(),p=this._storage,m=[];function v(I,k,R,z){return lTe(i,h,p,n,a,m,I,k,R,z)}w(s.root?[s.root]:[],u&&u.root?[u.root]:[],t,s===u||!u,0);var x=T(p);return this._oldTree=s,this._storage=h,{lastsForAnimation:a,willDeleteEls:x,renderFinally:C};function w(I,k,R,z,$){z?(k=I,ue(I,function(Y,Z){!Y.isRemoved()&&G(Z,Z)})):new ch(k,I,j,j).add(G).update(G).remove(Qr(G,null)).execute();function j(Y){return Y.getId()}function G(Y,Z){var H=Y!=null?I[Y]:null,re=Z!=null?k[Z]:null,ne=v(H,re,R,$);ne&&w(H&&H.viewChildren||[],re&&re.viewChildren||[],ne,z,$+1)}}function T(I){var k=Oy();return I&&ue(I,function(R,z){var $=k[z];ue(R,function(j){j&&($.push(j),YS(j).willDelete=!0)})}),k}function C(){ue(x,function(I){ue(I,function(k){k.parent&&k.parent.remove(k)})}),ue(m,function(I){I.invisible=!0,I.dirty()})}},e.prototype._doAnimation=function(t,i,n,s){var u=n.get("animationDurationUpdate"),a=n.get("animationEasing"),h=(kr(u)?0:u)||0,p=(kr(a)?null:a)||"cubicOut",m=iTe();ue(i.willDeleteEls,function(v,x){ue(v,function(w,T){if(!w.invisible){var C=w.parent,I,k=YS(C);if(s&&s.direction==="drillDown")I=C===s.rootNodeGroup?{shape:{x:0,y:0,width:k.nodeWidth,height:k.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var R=0,z=0;k.willDelete||(R=k.nodeWidth/2,z=k.nodeHeight/2),I=x==="nodeGroup"?{x:R,y:z,style:{opacity:0}}:{shape:{x:R,y:z,width:0,height:0},style:{opacity:0}}}I&&m.add(w,I,h,0,p)}})}),ue(this._storage,function(v,x){ue(v,function(w,T){var C=i.lastsForAnimation[x][T],I={};!C||(w instanceof Vr?C.oldX!=null&&(I.x=w.x,I.y=w.y,w.x=C.oldX,w.y=C.oldY):(C.oldShape&&(I.shape=kt({},w.shape),w.setShape(C.oldShape)),C.fadein?(w.setStyle("opacity",0),I.style={opacity:1}):w.style.opacity!==1&&(I.style={opacity:1})),m.add(w,I,h,0,p))})},this),this._state="animating",m.finished(xr(function(){this._state="ready",i.renderFinally()},this)).start()},e.prototype._resetController=function(t){var i=this._controller;i||(i=this._controller=new Px(t.getZr()),i.enable(this.seriesModel.get("roam")),i.on("pan",xr(this._onPan,this)),i.on("zoom",xr(this._onZoom,this)));var n=new ai(0,0,t.getWidth(),t.getHeight());i.setPointerChecker(function(s,u,a){return n.contain(u,a)})},e.prototype._clearController=function(){var t=this._controller;t&&(t.dispose(),t=null)},e.prototype._onPan=function(t){if(this._state!=="animating"&&(Math.abs(t.dx)>x$||Math.abs(t.dy)>x$)){var i=this.seriesModel.getData().tree.root;if(!i)return;var n=i.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+t.dx,y:n.y+t.dy,width:n.width,height:n.height}})}},e.prototype._onZoom=function(t){var i=t.originX,n=t.originY;if(this._state!=="animating"){var s=this.seriesModel.getData().tree.root;if(!s)return;var u=s.getLayout();if(!u)return;var a=new ai(u.x,u.y,u.width,u.height),h=this.seriesModel.layoutInfo;i-=h.x,n-=h.y;var p=ks();nc(p,p,[-i,-n]),bL(p,p,[t.scale,t.scale]),nc(p,p,[i,n]),a.applyTransform(p),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x,y:a.y,width:a.width,height:a.height}})}},e.prototype._initEvents=function(t){var i=this;t.on("click",function(n){if(i._state==="ready"){var s=i.seriesModel.get("nodeClick",!0);if(!!s){var u=i.findTarget(n.offsetX,n.offsetY);if(!!u){var a=u.node;if(a.getLayout().isLeafRoot)i._rootToNode(u);else if(s==="zoomToNode")i._zoomToNode(u);else if(s==="link"){var h=a.hostTree.data.getItemModel(a.dataIndex),p=h.get("link",!0),m=h.get("target",!0)||"blank";p&&kS(p,m)}}}}},this)},e.prototype._renderBreadcrumb=function(t,i,n){var s=this;n||(n=t.get("leafDepth",!0)!=null?{node:t.getViewRoot()}:this.findTarget(i.getWidth()/2,i.getHeight()/2),n||(n={node:t.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new tTe(this.group))).render(t,i,n.node,function(u){s._state!=="animating"&&(zk(t.getViewRoot(),u)?s._rootToNode({node:u}):s._zoomToNode({node:u}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=Oy(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype.findTarget=function(t,i){var n,s=this.seriesModel.getViewRoot();return s.eachNode({attr:"viewChildren",order:"preorder"},function(u){var a=this._storage.background[u.getRawIndex()];if(a){var h=a.transformCoordToLocal(t,i),p=a.shape;if(p.x<=h[0]&&h[0]<=p.x+p.width&&p.y<=h[1]&&h[1]<=p.y+p.height)n={node:u,offsetX:h[0],offsetY:h[1]};else return!1}},this),n},e.type="treemap",e}(Cn);function Oy(){return{nodeGroup:[],background:[],content:[]}}function lTe(r,e,t,i,n,s,u,a,h,p){if(!u)return;var m=u.getLayout(),v=r.getData(),x=u.getModel();if(v.setItemGraphicEl(u.dataIndex,null),!m||!m.isInView)return;var w=m.width,T=m.height,C=m.borderWidth,I=m.invisible,k=u.getRawIndex(),R=a&&a.getRawIndex(),z=u.viewChildren,$=m.upperHeight,j=z&&z.length,G=x.getModel("itemStyle"),Y=x.getModel(["emphasis","itemStyle"]),Z=x.getModel(["blur","itemStyle"]),H=x.getModel(["select","itemStyle"]),re=G.get("borderRadius")||0,ne=$e("nodeGroup",KD);if(!ne)return;if(h.add(ne),ne.x=m.x||0,ne.y=m.y||0,ne.markRedraw(),YS(ne).nodeWidth=w,YS(ne).nodeHeight=T,m.isAboveViewRoot)return ne;var se=$e("background",y$,p,aTe);se&&We(ne,se,j&&m.upperLabelHeight);var me=x.getModel("emphasis"),Se=me.get("focus"),Ie=me.get("blurScope"),ke=me.get("disabled"),Fe=Se==="ancestor"?u.getAncestorsIndices():Se==="descendant"?u.getDescendantIndices():Se;if(j)j0(ne)&&wp(ne,!1),se&&(wp(se,!ke),v.setItemGraphicEl(u.dataIndex,se),vD(se,Fe,Ie));else{var Ce=$e("content",y$,p,oTe);Ce&&gt(ne,Ce),se.disableMorphing=!0,se&&j0(se)&&wp(se,!1),wp(ne,!ke),v.setItemGraphicEl(u.dataIndex,ne),vD(ne,Fe,Ie)}return ne;function We(nt,vt,Pt){var jt=Gr(vt);if(jt.dataIndex=u.dataIndex,jt.seriesIndex=r.seriesIndex,vt.setShape({x:0,y:0,width:w,height:T,r:re}),I)St(vt);else{vt.invisible=!1;var Et=u.getVisual("style"),Wt=Et.stroke,Re=S$(G);Re.fill=Wt;var Ve=up(Y);Ve.fill=Y.get("borderColor");var Ue=up(Z);Ue.fill=Z.get("borderColor");var Be=up(H);if(Be.fill=H.get("borderColor"),Pt){var ce=w-2*C;et(vt,Wt,Et.opacity,{x:C,y:0,width:ce,height:$})}else vt.removeTextContent();vt.setStyle(Re),vt.ensureState("emphasis").style=Ve,vt.ensureState("blur").style=Ue,vt.ensureState("select").style=Be,qp(vt)}nt.add(vt)}function gt(nt,vt){var Pt=Gr(vt);Pt.dataIndex=u.dataIndex,Pt.seriesIndex=r.seriesIndex;var jt=Math.max(w-2*C,0),Et=Math.max(T-2*C,0);if(vt.culling=!0,vt.setShape({x:C,y:C,width:jt,height:Et,r:re}),I)St(vt);else{vt.invisible=!1;var Wt=u.getVisual("style"),Re=Wt.fill,Ve=S$(G);Ve.fill=Re,Ve.decal=Wt.decal;var Ue=up(Y),Be=up(Z),ce=up(H);et(vt,Re,Wt.opacity,null),vt.setStyle(Ve),vt.ensureState("emphasis").style=Ue,vt.ensureState("blur").style=Be,vt.ensureState("select").style=ce,qp(vt)}nt.add(vt)}function St(nt){!nt.invisible&&s.push(nt)}function et(nt,vt,Pt,jt){var Et=x.getModel(jt?w$:b$),Wt=ya(x.get("name"),null),Re=Et.getShallow("show");ro(nt,Ra(x,jt?w$:b$),{defaultText:Re?Wt:null,inheritColor:vt,defaultOpacity:Pt,labelFetcher:r,labelDataIndex:u.dataIndex});var Ve=nt.getTextContent();if(!!Ve){var Ue=Ve.style,Be=_L(Ue.padding||0);jt&&(nt.setTextConfig({layoutRect:jt}),Ve.disableLabelLayout=!0),Ve.beforeUpdate=function(){var ye=Math.max((jt?jt.width:nt.shape.width)-Be[1]-Be[3],0),De=Math.max((jt?jt.height:nt.shape.height)-Be[0]-Be[2],0);(Ue.width!==ye||Ue.height!==De)&&Ve.setStyle({width:ye,height:De})},Ue.truncateMinChar=2,Ue.lineOverflow="truncate",ht(Ue,jt,m);var ce=Ve.getState("emphasis");ht(ce?ce.style:null,jt,m)}}function ht(nt,vt,Pt){var jt=nt?nt.text:null;if(!vt&&Pt.isLeafRoot&&jt!=null){var Et=r.get("drillDownIcon",!0);nt.text=Et?Et+" "+jt:jt}}function $e(nt,vt,Pt,jt){var Et=R!=null&&t[nt][R],Wt=n[nt];return Et?(t[nt][R]=null,He(Wt,Et)):I||(Et=new vt,Et instanceof yl&&(Et.z2=uTe(Pt,jt)),dt(Wt,Et)),e[nt][k]=Et}function He(nt,vt){var Pt=nt[k]={};vt instanceof KD?(Pt.oldX=vt.x,Pt.oldY=vt.y):Pt.oldShape=kt({},vt.shape)}function dt(nt,vt){var Pt=nt[k]={},jt=u.parentNode,Et=vt instanceof Vr;if(jt&&(!i||i.direction==="drillDown")){var Wt=0,Re=0,Ve=n.background[jt.getRawIndex()];!i&&Ve&&Ve.oldShape&&(Wt=Ve.oldShape.width,Re=Ve.oldShape.height),Et?(Pt.oldX=0,Pt.oldY=Re):Pt.oldShape={x:Wt,y:Re,width:0,height:0}}Pt.fadein=!Et}}function uTe(r,e){return r*nTe+e}var cTe=sTe,ix=ue,hTe=Br,KS=-1,Bk=function(){function r(e){var t=e.mappingMethod,i=e.type,n=this.option=Nr(e);this.type=i,this.mappingMethod=t,this._normalizeData=pTe[t];var s=r.visualHandlers[i];this.applyVisual=s.applyVisual,this.getColorMapper=s.getColorMapper,this._normalizedToVisual=s._normalizedToVisual[t],t==="piecewise"?(xI(n),dTe(n)):t==="category"?n.categories?fTe(n):xI(n,!0):(Vo(t!=="linear"||n.dataExtent),xI(n))}return r.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},r.prototype.getNormalizer=function(){return xr(this._normalizeData,this)},r.listVisualTypes=function(){return bi(r.visualHandlers)},r.isValidType=function(e){return r.visualHandlers.hasOwnProperty(e)},r.eachVisual=function(e,t,i){Br(e)?ue(e,t,i):t.call(i,e)},r.mapVisual=function(e,t,i){var n,s=Nt(e)?[]:Br(e)?{}:(n=!0,null);return r.eachVisual(e,function(u,a){var h=t.call(i,u,a);n?s=h:s[a]=h}),s},r.retrieveVisuals=function(e){var t={},i;return e&&ix(r.visualHandlers,function(n,s){e.hasOwnProperty(s)&&(t[s]=e[s],i=!0)}),i?t:null},r.prepareVisualTypes=function(e){if(Nt(e))e=e.slice();else if(hTe(e)){var t=[];ix(e,function(i,n){t.push(n)}),e=t}else return[];return e.sort(function(i,n){return n==="color"&&i!=="color"&&i.indexOf("color")===0?1:-1}),e},r.dependsOn=function(e,t){return t==="color"?!!(e&&e.indexOf(t)===0):e===t},r.findPieceIndex=function(e,t,i){for(var n,s=1/0,u=0,a=t.length;u<a;u++){var h=t[u].value;if(h!=null){if(h===e||gr(h)&&h===e+"")return u;i&&x(h,u)}}for(var u=0,a=t.length;u<a;u++){var p=t[u],m=p.interval,v=p.close;if(m){if(m[0]===-1/0){if(bw(v[1],e,m[1]))return u}else if(m[1]===1/0){if(bw(v[0],m[0],e))return u}else if(bw(v[0],m[0],e)&&bw(v[1],e,m[1]))return u;i&&x(m[0],u),i&&x(m[1],u)}}if(i)return e===1/0?t.length-1:e===-1/0?0:n;function x(w,T){var C=Math.abs(w-e);C<s&&(s=C,n=T)}},r.visualHandlers={color:{applyVisual:zy("color"),getColorMapper:function(){var e=this.option;return xr(e.mappingMethod==="category"?function(t,i){return!i&&(t=this._normalizeData(t)),Qy.call(this,t)}:function(t,i,n){var s=!!n;return!i&&(t=this._normalizeData(t)),n=eC(t,e.parsedVisual,n),s?n:eh(n,"rgba")},this)},_normalizedToVisual:{linear:function(e){return eh(eC(e,this.option.parsedVisual),"rgba")},category:Qy,piecewise:function(e,t){var i=QD.call(this,t);return i==null&&(i=eh(eC(e,this.option.parsedVisual),"rgba")),i},fixed:cp}},colorHue:xw(function(e,t){return p0(e,t)}),colorSaturation:xw(function(e,t){return p0(e,null,t)}),colorLightness:xw(function(e,t){return p0(e,null,null,t)}),colorAlpha:xw(function(e,t){return bS(e,t)}),decal:{applyVisual:zy("decal"),_normalizedToVisual:{linear:null,category:Qy,piecewise:null,fixed:null}},opacity:{applyVisual:zy("opacity"),_normalizedToVisual:JD([0,1])},liftZ:{applyVisual:zy("liftZ"),_normalizedToVisual:{linear:cp,category:cp,piecewise:cp,fixed:cp}},symbol:{applyVisual:function(e,t,i){var n=this.mapValueToVisual(e);i("symbol",n)},_normalizedToVisual:{linear:T$,category:Qy,piecewise:function(e,t){var i=QD.call(this,t);return i==null&&(i=T$.call(this,e)),i},fixed:cp}},symbolSize:{applyVisual:zy("symbolSize"),_normalizedToVisual:JD([0,1])}},r}();function dTe(r){var e=r.pieceList;r.hasSpecialVisual=!1,ue(e,function(t,i){t.originIndex=i,t.visual!=null&&(r.hasSpecialVisual=!0)})}function fTe(r){var e=r.categories,t=r.categoryMap={},i=r.visual;if(ix(e,function(u,a){t[u]=a}),!Nt(i)){var n=[];Br(i)?ix(i,function(u,a){var h=t[a];n[h!=null?h:KS]=u}):n[KS]=i,i=b9(r,n)}for(var s=e.length-1;s>=0;s--)i[s]==null&&(delete t[e[s]],e.pop())}function xI(r,e){var t=r.visual,i=[];Br(t)?ix(t,function(s){i.push(s)}):t!=null&&i.push(t);var n={color:1,symbol:1};!e&&i.length===1&&!n.hasOwnProperty(r.type)&&(i[1]=i[0]),b9(r,i)}function xw(r){return{applyVisual:function(e,t,i){var n=this.mapValueToVisual(e);i("color",r(t("color"),n))},_normalizedToVisual:JD([0,1])}}function T$(r){var e=this.option.visual;return e[Math.round(on(r,[0,1],[0,e.length-1],!0))]||{}}function zy(r){return function(e,t,i){i(r,this.mapValueToVisual(e))}}function Qy(r){var e=this.option.visual;return e[this.option.loop&&r!==KS?r%e.length:r]}function cp(){return this.option.visual[0]}function JD(r){return{linear:function(e){return on(e,r,this.option.visual,!0)},category:Qy,piecewise:function(e,t){var i=QD.call(this,t);return i==null&&(i=on(e,r,this.option.visual,!0)),i},fixed:cp}}function QD(r){var e=this.option,t=e.pieceList;if(e.hasSpecialVisual){var i=Bk.findPieceIndex(r,t),n=t[i];if(n&&n.visual)return n.visual[this.type]}}function b9(r,e){return r.visual=e,r.type==="color"&&(r.parsedVisual=Ht(e,function(t){var i=Rs(t);return i||[0,0,0,1]})),e}var pTe={linear:function(r){return on(r,this.option.dataExtent,[0,1],!0)},piecewise:function(r){var e=this.option.pieceList,t=Bk.findPieceIndex(r,e,!0);if(t!=null)return on(t,[0,e.length-1],[0,1],!0)},category:function(r){var e=this.option.categories?this.option.categoryMap[r]:r;return e==null?KS:e},fixed:aa};function bw(r,e,t){return r?e<=t:e<t}var eo=Bk,mTe="itemStyle",w9=ki(),gTe={seriesType:"treemap",reset:function(r){var e=r.getData().tree,t=e.root;t.isRemoved()||S9(t,{},r.getViewRoot().getAncestors(),r)}};function S9(r,e,t,i){var n=r.getModel(),s=r.getLayout(),u=r.hostTree.data;if(!(!s||s.invisible||!s.isInView)){var a=n.getModel(mTe),h=vTe(a,e,i),p=u.ensureUniqueItemVisual(r.dataIndex,"style"),m=a.get("borderColor"),v=a.get("borderColorSaturation"),x;v!=null&&(x=M$(h),m=_Te(v,x)),p.stroke=m;var w=r.viewChildren;if(!w||!w.length)x=M$(h),p.fill=x;else{var T=yTe(r,n,s,a,h,w);ue(w,function(C,I){if(C.depth>=t.length||C===t[C.depth]){var k=xTe(n,h,C,I,T,i);S9(C,k,t,i)}})}}}function vTe(r,e,t){var i=kt({},e),n=t.designatedVisualItemStyle;return ue(["color","colorAlpha","colorSaturation"],function(s){n[s]=e[s];var u=r.get(s);n[s]=null,u!=null&&(i[s]=u)}),i}function M$(r){var e=bI(r,"color");if(e){var t=bI(r,"colorAlpha"),i=bI(r,"colorSaturation");return i&&(e=p0(e,null,null,i)),t&&(e=bS(e,t)),e}}function _Te(r,e){return e!=null?p0(e,null,null,r):null}function bI(r,e){var t=r[e];if(t!=null&&t!=="none")return t}function yTe(r,e,t,i,n,s){if(!(!s||!s.length)){var u=wI(e,"color")||n.color!=null&&n.color!=="none"&&(wI(e,"colorAlpha")||wI(e,"colorSaturation"));if(!!u){var a=e.get("visualMin"),h=e.get("visualMax"),p=t.dataExtent.slice();a!=null&&a<p[0]&&(p[0]=a),h!=null&&h>p[1]&&(p[1]=h);var m=e.get("colorMappingBy"),v={type:u.name,dataExtent:p,visual:u.range};v.type==="color"&&(m==="index"||m==="id")?(v.mappingMethod="category",v.loop=!0):v.mappingMethod="linear";var x=new eo(v);return w9(x).drColorMappingBy=m,x}}}function wI(r,e){var t=r.get(e);return Nt(t)&&t.length?{name:e,range:t}:null}function xTe(r,e,t,i,n,s){var u=kt({},e);if(n){var a=n.type,h=a==="color"&&w9(n).drColorMappingBy,p=h==="index"?i:h==="id"?s.mapIdToIndex(t.getId()):t.getValue(r.get("visualDimension"));u[a]=n.mapValueToVisual(p)}return u}var nx=Math.max,JS=Math.min,A$=Ga,Fk=ue,T9=["itemStyle","borderWidth"],bTe=["itemStyle","gapWidth"],wTe=["upperLabel","show"],STe=["upperLabel","height"],TTe={seriesType:"treemap",reset:function(r,e,t,i){var n=t.getWidth(),s=t.getHeight(),u=r.option,a=xa(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),h=u.size||[],p=sr(A$(a.width,h[0]),n),m=sr(A$(a.height,h[1]),s),v=i&&i.type,x=["treemapZoomToNode","treemapRootToNode"],w=rx(i,x,r),T=v==="treemapRender"||v==="treemapMove"?i.rootRect:null,C=r.getViewRoot(),I=_9(C);if(v!=="treemapMove"){var k=v==="treemapZoomToNode"?DTe(r,w,C,p,m):T?[T.width,T.height]:[p,m],R=u.sort;R&&R!=="asc"&&R!=="desc"&&(R="desc");var z={squareRatio:u.squareRatio,sort:R,leafDepth:u.leafDepth};C.hostTree.clearLayouts();var $={x:0,y:0,width:k[0],height:k[1],area:k[0]*k[1]};C.setLayout($),M9(C,z,!1,0),$=C.getLayout(),Fk(I,function(G,Y){var Z=(I[Y+1]||C).getValue();G.setLayout(kt({dataExtent:[Z,Z],borderWidth:0,upperHeight:0},$))})}var j=r.getData().tree.root;j.setLayout(PTe(a,T,w),!0),r.setLayoutInfo(a),A9(j,new ai(-a.x,-a.y,n,s),I,C,0)}};function M9(r,e,t,i){var n,s;if(!r.isRemoved()){var u=r.getLayout();n=u.width,s=u.height;var a=r.getModel(),h=a.get(T9),p=a.get(bTe)/2,m=C9(a),v=Math.max(h,m),x=h-p,w=v-p;r.setLayout({borderWidth:h,upperHeight:v,upperLabelHeight:m},!0),n=nx(n-2*x,0),s=nx(s-x-w,0);var T=n*s,C=MTe(r,a,T,e,t,i);if(!!C.length){var I={x,y:w,width:n,height:s},k=JS(n,s),R=1/0,z=[];z.area=0;for(var $=0,j=C.length;$<j;){var G=C[$];z.push(G),z.area+=G.getLayout().area;var Y=ETe(z,k,e.squareRatio);Y<=R?($++,R=Y):(z.area-=z.pop().getLayout().area,C$(z,k,I,p,!1),k=JS(I.width,I.height),z.length=z.area=0,R=1/0)}if(z.length&&C$(z,k,I,p,!0),!t){var Z=a.get("childrenVisibleMin");Z!=null&&T<Z&&(t=!0)}for(var $=0,j=C.length;$<j;$++)M9(C[$],e,t,i+1)}}}function MTe(r,e,t,i,n,s){var u=r.children||[],a=i.sort;a!=="asc"&&a!=="desc"&&(a=null);var h=i.leafDepth!=null&&i.leafDepth<=s;if(n&&!h)return r.viewChildren=[];u=un(u,function(w){return!w.isRemoved()}),CTe(u,a);var p=ITe(e,u,a);if(p.sum===0)return r.viewChildren=[];if(p.sum=ATe(e,t,p.sum,a,u),p.sum===0)return r.viewChildren=[];for(var m=0,v=u.length;m<v;m++){var x=u[m].getValue()/p.sum*t;u[m].setLayout({area:x})}return h&&(u.length&&r.setLayout({isLeafRoot:!0},!0),u.length=0),r.viewChildren=u,r.setLayout({dataExtent:p.dataExtent},!0),u}function ATe(r,e,t,i,n){if(!i)return t;for(var s=r.get("visibleMin"),u=n.length,a=u,h=u-1;h>=0;h--){var p=n[i==="asc"?u-h-1:h].getValue();p/t*e<s&&(a=h,t-=p)}return i==="asc"?n.splice(0,u-a):n.splice(a,u-a),t}function CTe(r,e){return e&&r.sort(function(t,i){var n=e==="asc"?t.getValue()-i.getValue():i.getValue()-t.getValue();return n===0?e==="asc"?t.dataIndex-i.dataIndex:i.dataIndex-t.dataIndex:n}),r}function ITe(r,e,t){for(var i=0,n=0,s=e.length;n<s;n++)i+=e[n].getValue();var u=r.get("visualDimension"),a;return!e||!e.length?a=[NaN,NaN]:u==="value"&&t?(a=[e[e.length-1].getValue(),e[0].getValue()],t==="asc"&&a.reverse()):(a=[1/0,-1/0],Fk(e,function(h){var p=h.getValue(u);p<a[0]&&(a[0]=p),p>a[1]&&(a[1]=p)})),{sum:i,dataExtent:a}}function ETe(r,e,t){for(var i=0,n=1/0,s=0,u=void 0,a=r.length;s<a;s++)u=r[s].getLayout().area,u&&(u<n&&(n=u),u>i&&(i=u));var h=r.area*r.area,p=e*e*t;return h?nx(p*i/h,h/(p*n)):1/0}function C$(r,e,t,i,n){var s=e===t.width?0:1,u=1-s,a=["x","y"],h=["width","height"],p=t[a[s]],m=e?r.area/e:0;(n||m>t[h[u]])&&(m=t[h[u]]);for(var v=0,x=r.length;v<x;v++){var w=r[v],T={},C=m?w.getLayout().area/m:0,I=T[h[u]]=nx(m-2*i,0),k=t[a[s]]+t[h[s]]-p,R=v===x-1||k<C?k:C,z=T[h[s]]=nx(R-2*i,0);T[a[u]]=t[a[u]]+JS(i,I/2),T[a[s]]=p+JS(i,z/2),p+=R,w.setLayout(T,!0)}t[a[u]]+=m,t[h[u]]-=m}function DTe(r,e,t,i,n){var s=(e||{}).node,u=[i,n];if(!s||s===t)return u;for(var a,h=i*n,p=h*r.option.zoomToNodeRatio;a=s.parentNode;){for(var m=0,v=a.children,x=0,w=v.length;x<w;x++)m+=v[x].getValue();var T=s.getValue();if(T===0)return u;p*=m/T;var C=a.getModel(),I=C.get(T9),k=Math.max(I,C9(C));p+=4*I*I+(3*I+k)*Math.pow(p,.5),p>N5&&(p=N5),s=a}p<h&&(p=h);var R=Math.pow(p/h,.5);return[i*R,n*R]}function PTe(r,e,t){if(e)return{x:e.x,y:e.y};var i={x:0,y:0};if(!t)return i;var n=t.node,s=n.getLayout();if(!s)return i;for(var u=[s.width/2,s.height/2],a=n;a;){var h=a.getLayout();u[0]+=h.x,u[1]+=h.y,a=a.parentNode}return{x:r.width/2-u[0],y:r.height/2-u[1]}}function A9(r,e,t,i,n){var s=r.getLayout(),u=t[n],a=u&&u===r;if(!(u&&!a||n===t.length&&r!==i)){r.setLayout({isInView:!0,invisible:!a&&!e.intersect(s),isAboveViewRoot:a},!0);var h=new ai(e.x-s.x,e.y-s.y,e.width,e.height);Fk(r.viewChildren||[],function(p){A9(p,h,t,i,n+1)})}}function C9(r){return r.get(wTe)?r.get(STe):0}function LTe(r){r.registerSeriesModel(YSe),r.registerChartView(cTe),r.registerVisual(gTe),r.registerLayout(TTe),qSe(r)}function kTe(r){var e=r.findComponents({mainType:"legend"});!e||!e.length||r.eachSeriesByType("graph",function(t){var i=t.getCategoriesData(),n=t.getGraph(),s=n.data,u=i.mapArray(i.getName);s.filterSelf(function(a){var h=s.getItemModel(a),p=h.getShallow("category");if(p!=null){Vi(p)&&(p=u[p]);for(var m=0;m<e.length;m++)if(!e[m].isSelected(p))return!1}return!0})})}function RTe(r){var e={};r.eachSeriesByType("graph",function(t){var i=t.getCategoriesData(),n=t.getData(),s={};i.each(function(u){var a=i.getName(u);s["ec-"+a]=u;var h=i.getItemModel(u),p=h.getModel("itemStyle").getItemStyle();p.fill||(p.fill=t.getColorFromPalette(a,e)),i.setItemVisual(u,"style",p);for(var m=["symbol","symbolSize","symbolKeepAspect"],v=0;v<m.length;v++){var x=h.getShallow(m[v],!0);x!=null&&i.setItemVisual(u,m[v],x)}}),i.count()&&n.each(function(u){var a=n.getItemModel(u),h=a.getShallow("category");if(h!=null){gr(h)&&(h=s["ec-"+h]);var p=i.getItemVisual(h,"style"),m=n.ensureUniqueItemVisual(u,"style");kt(m,p);for(var v=["symbol","symbolSize","symbolKeepAspect"],x=0;x<v.length;x++)n.setItemVisual(u,v[x],i.getItemVisual(h,v[x]))}})})}function ww(r){return r instanceof Array||(r=[r,r]),r}function OTe(r){r.eachSeriesByType("graph",function(e){var t=e.getGraph(),i=e.getEdgeData(),n=ww(e.get("edgeSymbol")),s=ww(e.get("edgeSymbolSize"));i.setVisual("fromSymbol",n&&n[0]),i.setVisual("toSymbol",n&&n[1]),i.setVisual("fromSymbolSize",s&&s[0]),i.setVisual("toSymbolSize",s&&s[1]),i.setVisual("style",e.getModel("lineStyle").getLineStyle()),i.each(function(u){var a=i.getItemModel(u),h=t.getEdgeByIndex(u),p=ww(a.getShallow("symbol",!0)),m=ww(a.getShallow("symbolSize",!0)),v=a.getModel("lineStyle").getLineStyle(),x=i.ensureUniqueItemVisual(u,"style");switch(kt(x,v),x.stroke){case"source":{var w=h.node1.getVisual("style");x.stroke=w&&w.fill;break}case"target":{var w=h.node2.getVisual("style");x.stroke=w&&w.fill;break}}p[0]&&h.setVisual("fromSymbol",p[0]),p[1]&&h.setVisual("toSymbol",p[1]),m[0]&&h.setVisual("fromSymbolSize",m[0]),m[1]&&h.setVisual("toSymbolSize",m[1])})})}var eP="-->",p2=function(r){return r.get("autoCurveness")||null},I9=function(r,e){var t=p2(r),i=20,n=[];if(Vi(t))i=t;else if(Nt(t)){r.__curvenessList=t;return}e>i&&(i=e);var s=i%2?i+2:i+3;n=[];for(var u=0;u<s;u++)n.push((u%2?u+1:u)/10*(u%2?-1:1));r.__curvenessList=n},ax=function(r,e,t){var i=[r.id,r.dataIndex].join("."),n=[e.id,e.dataIndex].join(".");return[t.uid,i,n].join(eP)},E9=function(r){var e=r.split(eP);return[e[0],e[2],e[1]].join(eP)},zTe=function(r,e){var t=ax(r.node1,r.node2,e);return e.__edgeMap[t]},BTe=function(r,e){var t=tP(ax(r.node1,r.node2,e),e),i=tP(ax(r.node2,r.node1,e),e);return t+i},tP=function(r,e){var t=e.__edgeMap;return t[r]?t[r].length:0};function FTe(r){!p2(r)||(r.__curvenessList=[],r.__edgeMap={},I9(r))}function NTe(r,e,t,i){if(!!p2(t)){var n=ax(r,e,t),s=t.__edgeMap,u=s[E9(n)];s[n]&&!u?s[n].isForward=!0:u&&s[n]&&(u.isForward=!0,s[n].isForward=!1),s[n]=s[n]||[],s[n].push(i)}}function Nk(r,e,t,i){var n=p2(e),s=Nt(n);if(!n)return null;var u=zTe(r,e);if(!u)return null;for(var a=-1,h=0;h<u.length;h++)if(u[h]===t){a=h;break}var p=BTe(r,e);I9(e,p),r.lineStyle=r.lineStyle||{};var m=ax(r.node1,r.node2,e),v=e.__curvenessList,x=s||p%2?0:1;if(u.isForward)return v[x+a];var w=E9(m),T=tP(w,e),C=v[a+T+x];return i?s?n&&n[0]===0?(T+x)%2?C:-C:((T%2?0:1)+x)%2?C:-C:(T+x)%2?C:-C:v[a+T+x]}function D9(r){var e=r.coordinateSystem;if(!(e&&e.type!=="view")){var t=r.getGraph();t.eachNode(function(i){var n=i.getModel();i.setLayout([+n.get("x"),+n.get("y")])}),Vk(t,r)}}function Vk(r,e){r.eachEdge(function(t,i){var n=Ju(t.getModel().get(["lineStyle","curveness"]),-Nk(t,e,i,!0),0),s=Jc(t.node1.getLayout()),u=Jc(t.node2.getLayout()),a=[s,u];+n&&a.push([(s[0]+u[0])/2-(s[1]-u[1])*n,(s[1]+u[1])/2-(u[0]-s[0])*n]),t.setLayout(a)})}function VTe(r,e){r.eachSeriesByType("graph",function(t){var i=t.get("layout"),n=t.coordinateSystem;if(n&&n.type!=="view"){var s=t.getData(),u=[];ue(n.dimensions,function(x){u=u.concat(s.mapDimensionsAll(x))});for(var a=0;a<s.count();a++){for(var h=[],p=!1,m=0;m<u.length;m++){var v=s.get(u[m],a);isNaN(v)||(p=!0),h.push(v)}p?s.setItemLayout(a,n.dataToPoint(h)):s.setItemLayout(a,[NaN,NaN])}Vk(s.graph,t)}else(!i||i==="none")&&D9(t)})}function e0(r){var e=r.coordinateSystem;if(e.type!=="view")return 1;var t=r.option.nodeScaleRatio,i=e.scaleX,n=e.getZoom(),s=(n-1)*t+1;return s/i}function t0(r){var e=r.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var I$=Math.PI,SI=[];function $k(r,e,t,i){var n=r.coordinateSystem;if(!(n&&n.type!=="view")){var s=n.getBoundingRect(),u=r.getData(),a=u.graph,h=s.width/2+s.x,p=s.height/2+s.y,m=Math.min(s.width,s.height)/2,v=u.count();if(u.setLayout({cx:h,cy:p}),!!v){if(t){var x=n.pointToData(i),w=x[0],T=x[1],C=[w-h,T-p];Av(C,C),Gw(C,C,m),t.setLayout([h+C[0],p+C[1]],!0);var I=r.get(["circular","rotateLabel"]);P9(t,I,h,p)}$Te[e](r,a,u,m,h,p,v),a.eachEdge(function(k,R){var z=Ju(k.getModel().get(["lineStyle","curveness"]),Nk(k,r,R),0),$=Jc(k.node1.getLayout()),j=Jc(k.node2.getLayout()),G,Y=($[0]+j[0])/2,Z=($[1]+j[1])/2;+z&&(z*=3,G=[h*z+Y*(1-z),p*z+Z*(1-z)]),k.setLayout([$,j,G])})}}}var $Te={value:function(r,e,t,i,n,s,u){var a=0,h=t.getSum("value"),p=Math.PI*2/(h||u);e.eachNode(function(m){var v=m.getValue("value"),x=p*(h?v:1)/2;a+=x,m.setLayout([i*Math.cos(a)+n,i*Math.sin(a)+s]),a+=x})},symbolSize:function(r,e,t,i,n,s,u){var a=0;SI.length=u;var h=e0(r);e.eachNode(function(v){var x=t0(v);isNaN(x)&&(x=2),x<0&&(x=0),x*=h;var w=Math.asin(x/2/i);isNaN(w)&&(w=I$/2),SI[v.dataIndex]=w,a+=w*2});var p=(2*I$-a)/u/2,m=0;e.eachNode(function(v){var x=p+SI[v.dataIndex];m+=x,(!v.getLayout()||!v.getLayout().fixed)&&v.setLayout([i*Math.cos(m)+n,i*Math.sin(m)+s]),m+=x})}};function P9(r,e,t,i){var n=r.getGraphicEl();if(!!n){var s=r.getModel(),u=s.get(["label","rotate"])||0,a=n.getSymbolPath();if(e){var h=r.getLayout(),p=Math.atan2(h[1]-i,h[0]-t);p<0&&(p=Math.PI*2+p);var m=h[0]<t;m&&(p=p-Math.PI);var v=m?"left":"right";a.setTextConfig({rotation:-p,position:v,origin:"center"});var x=a.ensureState("emphasis");kt(x.textConfig||(x.textConfig={}),{position:v})}else a.setTextConfig({rotation:u*=Math.PI/180})}}function GTe(r){r.eachSeriesByType("graph",function(e){e.get("layout")==="circular"&&$k(e,"symbolSize")})}var bg=$E;function UTe(r,e,t){for(var i=r,n=e,s=t.rect,u=s.width,a=s.height,h=[s.x+u/2,s.y+a/2],p=t.gravity==null?.1:t.gravity,m=0;m<i.length;m++){var v=i[m];v.p||(v.p=Jp(u*(Math.random()-.5)+h[0],a*(Math.random()-.5)+h[1])),v.pp=Jc(v.p),v.edges=null}var x=t.friction==null?.6:t.friction,w=x,T,C;return{warmUp:function(){w=x*.8},setFixed:function(I){i[I].fixed=!0},setUnfixed:function(I){i[I].fixed=!1},beforeStep:function(I){T=I},afterStep:function(I){C=I},step:function(I){T&&T(i,n);for(var k=[],R=i.length,z=0;z<n.length;z++){var $=n[z];if(!$.ignoreForceLayout){var j=$.n1,G=$.n2;xp(k,G.p,j.p);var Y=GE(k)-$.d,Z=G.w/(j.w+G.w);isNaN(Z)&&(Z=0),Av(k,k),!j.fixed&&bg(j.p,j.p,k,Z*Y*w),!G.fixed&&bg(G.p,G.p,k,-(1-Z)*Y*w)}}for(var z=0;z<R;z++){var H=i[z];H.fixed||(xp(k,h,H.p),bg(H.p,H.p,k,p*w))}for(var z=0;z<R;z++)for(var j=i[z],re=z+1;re<R;re++){var G=i[re];xp(k,G.p,j.p);var Y=GE(k);Y===0&&(Yde(k,Math.random()-.5,Math.random()-.5),Y=1);var ne=(j.rep+G.rep)/Y/Y;!j.fixed&&bg(j.pp,j.pp,k,ne),!G.fixed&&bg(G.pp,G.pp,k,-ne)}for(var se=[],z=0;z<R;z++){var H=i[z];H.fixed||(xp(se,H.p,H.pp),bg(H.p,H.p,se,w),ko(H.pp,H.p))}w=w*.992;var me=w<.01;C&&C(i,n,me),I&&I(me)}}}function jTe(r){r.eachSeriesByType("graph",function(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view"))if(e.get("layout")==="force"){var i=e.preservedPoints||{},n=e.getGraph(),s=n.data,u=n.edgeData,a=e.getModel("force"),h=a.get("initLayout");e.preservedPoints?s.each(function(z){var $=s.getId(z);s.setItemLayout(z,i[$]||[NaN,NaN])}):!h||h==="none"?D9(e):h==="circular"&&$k(e,"value");var p=s.getDataExtent("value"),m=u.getDataExtent("value"),v=a.get("repulsion"),x=a.get("edgeLength"),w=Nt(v)?v:[v,v],T=Nt(x)?x:[x,x];T=[T[1],T[0]];var C=s.mapArray("value",function(z,$){var j=s.getItemLayout($),G=on(z,p,w);return isNaN(G)&&(G=(w[0]+w[1])/2),{w:G,rep:G,fixed:s.getItemModel($).get("fixed"),p:!j||isNaN(j[0])||isNaN(j[1])?null:j}}),I=u.mapArray("value",function(z,$){var j=n.getEdgeByIndex($),G=on(z,m,T);isNaN(G)&&(G=(T[0]+T[1])/2);var Y=j.getModel(),Z=Ju(j.getModel().get(["lineStyle","curveness"]),-Nk(j,e,$,!0),0);return{n1:C[j.node1.dataIndex],n2:C[j.node2.dataIndex],d:G,curveness:Z,ignoreForceLayout:Y.get("ignoreForceLayout")}}),k=t.getBoundingRect(),R=UTe(C,I,{rect:k,gravity:a.get("gravity"),friction:a.get("friction")});R.beforeStep(function(z,$){for(var j=0,G=z.length;j<G;j++)z[j].fixed&&ko(z[j].p,n.getNodeByIndex(j).getLayout())}),R.afterStep(function(z,$,j){for(var G=0,Y=z.length;G<Y;G++)z[G].fixed||n.getNodeByIndex(G).setLayout(z[G].p),i[s.getId(G)]=z[G].p;for(var G=0,Y=$.length;G<Y;G++){var Z=$[G],H=n.getEdgeByIndex(G),re=Z.n1.p,ne=Z.n2.p,se=H.getLayout();se=se?se.slice():[],se[0]=se[0]||[],se[1]=se[1]||[],ko(se[0],re),ko(se[1],ne),+Z.curveness&&(se[2]=[(re[0]+ne[0])/2-(re[1]-ne[1])*Z.curveness,(re[1]+ne[1])/2-(ne[0]-re[0])*Z.curveness]),H.setLayout(se)}}),e.forceLayout=R,e.preservedPoints=i,R.step()}else e.forceLayout=null})}function HTe(r,e,t){var i=kt(r.getBoxLayoutParams(),{aspect:t});return xa(i,{width:e.getWidth(),height:e.getHeight()})}function WTe(r,e){var t=[];return r.eachSeriesByType("graph",function(i){var n=i.get("coordinateSystem");if(!n||n==="view"){var s=i.getData(),u=s.mapArray(function(I){var k=s.getItemModel(I);return[+k.get("x"),+k.get("y")]}),a=[],h=[];GT(u,a,h),h[0]-a[0]===0&&(h[0]+=1,a[0]-=1),h[1]-a[1]===0&&(h[1]+=1,a[1]-=1);var p=(h[0]-a[0])/(h[1]-a[1]),m=HTe(i,e,p);isNaN(p)&&(a=[m.x,m.y],h=[m.x+m.width,m.y+m.height]);var v=h[0]-a[0],x=h[1]-a[1],w=m.width,T=m.height,C=i.coordinateSystem=new Lx;C.zoomLimit=i.get("scaleLimit"),C.setBoundingRect(a[0],a[1],v,x),C.setViewRect(m.x,m.y,w,T),C.setCenter(i.get("center"),e),C.setZoom(i.get("zoom")),t.push(C)}}),t}var E$=Ua.prototype,TI=WT.prototype,L9=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return r}();(function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e})(L9);function MI(r){return isNaN(+r.cpx1)||isNaN(+r.cpy1)}var qTe=function(r){lt(e,r);function e(t){var i=r.call(this,t)||this;return i.type="ec-line",i}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new L9},e.prototype.buildPath=function(t,i){MI(i)?E$.buildPath.call(this,t,i):TI.buildPath.call(this,t,i)},e.prototype.pointAt=function(t){return MI(this.shape)?E$.pointAt.call(this,t):TI.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var i=this.shape,n=MI(i)?[i.x2-i.x1,i.y2-i.y1]:TI.tangentAt.call(this,t);return Av(n,n)},e}(_i),ZTe=qTe,AI=["fromSymbol","toSymbol"];function D$(r){return"_"+r+"Type"}function P$(r,e,t){var i=e.getItemVisual(t,r);if(!i||i==="none")return i;var n=e.getItemVisual(t,r+"Size"),s=e.getItemVisual(t,r+"Rotate"),u=e.getItemVisual(t,r+"Offset"),a=e.getItemVisual(t,r+"KeepAspect"),h=Vv(n),p=rm(u||0,h);return i+h+p+(s||"")+(a||"")}function L$(r,e,t){var i=e.getItemVisual(t,r);if(!(!i||i==="none")){var n=e.getItemVisual(t,r+"Size"),s=e.getItemVisual(t,r+"Rotate"),u=e.getItemVisual(t,r+"Offset"),a=e.getItemVisual(t,r+"KeepAspect"),h=Vv(n),p=rm(u||0,h),m=fa(i,-h[0]/2+p[0],-h[1]/2+p[1],h[0],h[1],null,a);return m.__specifiedRotation=s==null||isNaN(s)?void 0:+s*Math.PI/180||0,m.name=r,m}}function XTe(r){var e=new ZTe({name:"line",subPixelOptimize:!0});return rP(e.shape,r),e}function rP(r,e){r.x1=e[0][0],r.y1=e[0][1],r.x2=e[1][0],r.y2=e[1][1],r.percent=1;var t=e[2];t?(r.cpx1=t[0],r.cpy1=t[1]):(r.cpx1=NaN,r.cpy1=NaN)}var YTe=function(r){lt(e,r);function e(t,i,n){var s=r.call(this)||this;return s._createLine(t,i,n),s}return e.prototype._createLine=function(t,i,n){var s=t.hostModel,u=t.getItemLayout(i),a=XTe(u);a.shape.percent=0,Bn(a,{shape:{percent:1}},s,i),this.add(a),ue(AI,function(h){var p=L$(h,t,i);this.add(p),this[D$(h)]=P$(h,t,i)},this),this._updateCommonStl(t,i,n)},e.prototype.updateData=function(t,i,n){var s=t.hostModel,u=this.childOfName("line"),a=t.getItemLayout(i),h={shape:{}};rP(h.shape,a),ji(u,h,s,i),ue(AI,function(p){var m=P$(p,t,i),v=D$(p);if(this[v]!==m){this.remove(this.childOfName(p));var x=L$(p,t,i);this.add(x)}this[v]=m},this),this._updateCommonStl(t,i,n)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,i,n){var s=t.hostModel,u=this.childOfName("line"),a=n&&n.emphasisLineStyle,h=n&&n.blurLineStyle,p=n&&n.selectLineStyle,m=n&&n.labelStatesModels,v=n&&n.emphasisDisabled,x=n&&n.focus,w=n&&n.blurScope;if(!n||t.hasItemOption){var T=t.getItemModel(i),C=T.getModel("emphasis");a=C.getModel("lineStyle").getLineStyle(),h=T.getModel(["blur","lineStyle"]).getLineStyle(),p=T.getModel(["select","lineStyle"]).getLineStyle(),v=C.get("disabled"),x=C.get("focus"),w=C.get("blurScope"),m=Ra(T)}var I=t.getItemVisual(i,"style"),k=I.stroke;u.useStyle(I),u.style.fill=null,u.style.strokeNoScale=!0,u.ensureState("emphasis").style=a,u.ensureState("blur").style=h,u.ensureState("select").style=p,ue(AI,function(G){var Y=this.childOfName(G);if(Y){Y.setColor(k),Y.style.opacity=I.opacity;for(var Z=0;Z<$o.length;Z++){var H=$o[Z],re=u.getState(H);if(re){var ne=re.style||{},se=Y.ensureState(H),me=se.style||(se.style={});ne.stroke!=null&&(me[Y.__isEmptyBrush?"stroke":"fill"]=ne.stroke),ne.opacity!=null&&(me.opacity=ne.opacity)}}Y.markRedraw()}},this);var R=s.getRawValue(i);ro(this,m,{labelDataIndex:i,labelFetcher:{getFormattedLabel:function(G,Y){return s.getFormattedLabel(G,Y,t.dataType)}},inheritColor:k||"#000",defaultOpacity:I.opacity,defaultText:(R==null?t.getName(i):isFinite(R)?ra(R):R)+""});var z=this.getTextContent();if(z){var $=m.normal;z.__align=z.style.align,z.__verticalAlign=z.style.verticalAlign,z.__position=$.get("position")||"middle";var j=$.get("distance");Nt(j)||(j=[j,j]),z.__labelDistance=j}this.setTextConfig({position:null,local:!0,inside:!1}),Kn(this,x,w,v)},e.prototype.highlight=function(){lh(this)},e.prototype.downplay=function(){uh(this)},e.prototype.updateLayout=function(t,i){this.setLinePoints(t.getItemLayout(i))},e.prototype.setLinePoints=function(t){var i=this.childOfName("line");rP(i.shape,t),i.dirty()},e.prototype.beforeUpdate=function(){var t=this,i=t.childOfName("fromSymbol"),n=t.childOfName("toSymbol"),s=t.getTextContent();if(!i&&!n&&(!s||s.ignore))return;for(var u=1,a=this.parent;a;)a.scaleX&&(u/=a.scaleX),a=a.parent;var h=t.childOfName("line");if(!this.__dirty&&!h.__dirty)return;var p=h.shape.percent,m=h.pointAt(0),v=h.pointAt(p),x=xp([],v,m);Av(x,x);function w(re,ne){var se=re.__specifiedRotation;if(se==null){var me=h.tangentAt(ne);re.attr("rotation",(ne===1?-1:1)*Math.PI/2-Math.atan2(me[1],me[0]))}else re.attr("rotation",se)}if(i&&(i.setPosition(m),w(i,0),i.scaleX=i.scaleY=u*p,i.markRedraw()),n&&(n.setPosition(v),w(n,1),n.scaleX=n.scaleY=u*p,n.markRedraw()),s&&!s.ignore){s.x=s.y=0,s.originX=s.originY=0;var T=void 0,C=void 0,I=s.__labelDistance,k=I[0]*u,R=I[1]*u,z=p/2,$=h.tangentAt(z),j=[$[1],-$[0]],G=h.pointAt(z);j[1]>0&&(j[0]=-j[0],j[1]=-j[1]);var Y=$[0]<0?-1:1;if(s.__position!=="start"&&s.__position!=="end"){var Z=-Math.atan2($[1],$[0]);v[0]<m[0]&&(Z=Math.PI+Z),s.rotation=Z}var H=void 0;switch(s.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":H=-R,C="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":H=R,C="top";break;default:H=0,C="middle"}switch(s.__position){case"end":s.x=x[0]*k+v[0],s.y=x[1]*R+v[1],T=x[0]>.8?"left":x[0]<-.8?"right":"center",C=x[1]>.8?"top":x[1]<-.8?"bottom":"middle";break;case"start":s.x=-x[0]*k+m[0],s.y=-x[1]*R+m[1],T=x[0]>.8?"right":x[0]<-.8?"left":"center",C=x[1]>.8?"bottom":x[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":s.x=k*Y+m[0],s.y=m[1]+H,T=$[0]<0?"right":"left",s.originX=-k*Y,s.originY=-H;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":s.x=G[0],s.y=G[1]+H,T="center",s.originY=-H;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":s.x=-k*Y+v[0],s.y=v[1]+H,T=$[0]>=0?"right":"left",s.originX=k*Y,s.originY=-H;break}s.scaleX=s.scaleY=u,s.setStyle({verticalAlign:s.__verticalAlign||C,align:s.__align||T})}},e}(Vr),Gk=YTe,KTe=function(){function r(e){this.group=new Vr,this._LineCtor=e||Gk}return r.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var i=this,n=i.group,s=i._lineData;i._lineData=e,s||n.removeAll();var u=k$(e);e.diff(s).add(function(a){t._doAdd(e,a,u)}).update(function(a,h){t._doUpdate(s,e,h,a,u)}).remove(function(a){n.remove(s.getItemGraphicEl(a))}).execute()},r.prototype.updateLayout=function(){var e=this._lineData;!e||e.eachItemGraphicEl(function(t,i){t.updateLayout(e,i)},this)},r.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=k$(e),this._lineData=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(e,t){this._progressiveEls=[];function i(a){!a.isGroup&&!JTe(a)&&(a.incremental=!0,a.ensureState("emphasis").hoverLayer=!0)}for(var n=e.start;n<e.end;n++){var s=t.getItemLayout(n);if(CI(s)){var u=new this._LineCtor(t,n,this._seriesScope);u.traverse(i),this.group.add(u),t.setItemGraphicEl(n,u),this._progressiveEls.push(u)}}},r.prototype.remove=function(){this.group.removeAll()},r.prototype.eachRendered=function(e){Hd(this._progressiveEls||this.group,e)},r.prototype._doAdd=function(e,t,i){var n=e.getItemLayout(t);if(!!CI(n)){var s=new this._LineCtor(e,t,i);e.setItemGraphicEl(t,s),this.group.add(s)}},r.prototype._doUpdate=function(e,t,i,n,s){var u=e.getItemGraphicEl(i);if(!CI(t.getItemLayout(n))){this.group.remove(u);return}u?u.updateData(t,n,s):u=new this._LineCtor(t,n,s),t.setItemGraphicEl(n,u),this.group.add(u)},r}();function JTe(r){return r.animators&&r.animators.length>0}function k$(r){var e=r.hostModel,t=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:Ra(e)}}function R$(r){return isNaN(r[0])||isNaN(r[1])}function CI(r){return r&&!R$(r[0])&&!R$(r[1])}var Uk=KTe,II=[],EI=[],DI=[],wg=Va,PI=Lp,O$=Math.abs;function z$(r,e,t){for(var i=r[0],n=r[1],s=r[2],u=1/0,a,h=t*t,p=.1,m=.1;m<=.9;m+=.1){II[0]=wg(i[0],n[0],s[0],m),II[1]=wg(i[1],n[1],s[1],m);var v=O$(PI(II,e)-h);v<u&&(u=v,a=m)}for(var x=0;x<32;x++){var w=a+p;EI[0]=wg(i[0],n[0],s[0],a),EI[1]=wg(i[1],n[1],s[1],a),DI[0]=wg(i[0],n[0],s[0],w),DI[1]=wg(i[1],n[1],s[1],w);var v=PI(EI,e)-h;if(O$(v)<.01)break;var T=PI(DI,e)-h;p/=2,v<0?T>=0?a=a+p:a=a-p:T>=0?a=a-p:a=a+p}return a}function LI(r,e){var t=[],i=B0,n=[[],[],[]],s=[[],[]],u=[];e/=2,r.eachEdge(function(a,h){var p=a.getLayout(),m=a.getVisual("fromSymbol"),v=a.getVisual("toSymbol");p.__original||(p.__original=[Jc(p[0]),Jc(p[1])],p[2]&&p.__original.push(Jc(p[2])));var x=p.__original;if(p[2]!=null){if(ko(n[0],x[0]),ko(n[1],x[2]),ko(n[2],x[1]),m&&m!=="none"){var w=t0(a.node1),T=z$(n,x[0],w*e);i(n[0][0],n[1][0],n[2][0],T,t),n[0][0]=t[3],n[1][0]=t[4],i(n[0][1],n[1][1],n[2][1],T,t),n[0][1]=t[3],n[1][1]=t[4]}if(v&&v!=="none"){var w=t0(a.node2),T=z$(n,x[1],w*e);i(n[0][0],n[1][0],n[2][0],T,t),n[1][0]=t[1],n[2][0]=t[2],i(n[0][1],n[1][1],n[2][1],T,t),n[1][1]=t[1],n[2][1]=t[2]}ko(p[0],n[0]),ko(p[1],n[2]),ko(p[2],n[1])}else{if(ko(s[0],x[0]),ko(s[1],x[1]),xp(u,s[1],s[0]),Av(u,u),m&&m!=="none"){var w=t0(a.node1);$E(s[0],s[0],u,w*e)}if(v&&v!=="none"){var w=t0(a.node2);$E(s[1],s[1],u,-w*e)}ko(p[0],s[0]),ko(p[1],s[1])}})}function B$(r){return r.type==="view"}var QTe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,i){var n=new Ax,s=new Uk,u=this.group;this._controller=new Px(i.getZr()),this._controllerHost={target:u},u.add(n.group),u.add(s.group),this._symbolDraw=n,this._lineDraw=s,this._firstRender=!0},e.prototype.render=function(t,i,n){var s=this,u=t.coordinateSystem;this._model=t;var a=this._symbolDraw,h=this._lineDraw,p=this.group;if(B$(u)){var m={x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY};this._firstRender?p.attr(m):ji(p,m,t)}LI(t.getGraph(),e0(t));var v=t.getData();a.updateData(v);var x=t.getEdgeData();h.updateData(x),this._updateNodeAndLinkScale(),this._updateController(t,i,n),clearTimeout(this._layoutTimeout);var w=t.forceLayout,T=t.get(["force","layoutAnimation"]);w&&this._startForceLayoutIteration(w,T);var C=t.get("layout");v.graph.eachNode(function(z){var $=z.dataIndex,j=z.getGraphicEl(),G=z.getModel();if(!!j){j.off("drag").off("dragend");var Y=G.get("draggable");Y&&j.on("drag",function(H){switch(C){case"force":w.warmUp(),!s._layouting&&s._startForceLayoutIteration(w,T),w.setFixed($),v.setItemLayout($,[j.x,j.y]);break;case"circular":v.setItemLayout($,[j.x,j.y]),z.setLayout({fixed:!0},!0),$k(t,"symbolSize",z,[H.offsetX,H.offsetY]),s.updateLayout(t);break;case"none":default:v.setItemLayout($,[j.x,j.y]),Vk(t.getGraph(),t),s.updateLayout(t);break}}).on("dragend",function(){w&&w.setUnfixed($)}),j.setDraggable(Y,!!G.get("cursor"));var Z=G.get(["emphasis","focus"]);Z==="adjacency"&&(Gr(j).focus=z.getAdjacentDataIndices())}}),v.graph.eachEdge(function(z){var $=z.getGraphicEl(),j=z.getModel().get(["emphasis","focus"]);!$||j==="adjacency"&&(Gr($).focus={edge:[z.dataIndex],node:[z.node1.dataIndex,z.node2.dataIndex]})});var I=t.get("layout")==="circular"&&t.get(["circular","rotateLabel"]),k=v.getLayout("cx"),R=v.getLayout("cy");v.graph.eachNode(function(z){P9(z,I,k,R)}),this._firstRender=!1},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,i){var n=this;(function s(){t.step(function(u){n.updateLayout(n._model),(n._layouting=!u)&&(i?n._layoutTimeout=setTimeout(s,16):s())})})()},e.prototype._updateController=function(t,i,n){var s=this,u=this._controller,a=this._controllerHost,h=this.group;if(u.setPointerChecker(function(p,m,v){var x=h.getBoundingRect();return x.applyTransform(h.transform),x.contain(m,v)&&!h2(p,n,t)}),!B$(t.coordinateSystem)){u.disable();return}u.enable(t.get("roam")),a.zoomLimit=t.get("scaleLimit"),a.zoom=t.coordinateSystem.getZoom(),u.off("pan").off("zoom").on("pan",function(p){Dk(a,p.dx,p.dy),n.dispatchAction({seriesId:t.id,type:"graphRoam",dx:p.dx,dy:p.dy})}).on("zoom",function(p){Pk(a,p.scale,p.originX,p.originY),n.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:p.scale,originX:p.originX,originY:p.originY}),s._updateNodeAndLinkScale(),LI(t.getGraph(),e0(t)),s._lineDraw.updateLayout(),n.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,i=t.getData(),n=e0(t);i.eachItemGraphicEl(function(s,u){s&&s.setSymbolScale(n)})},e.prototype.updateLayout=function(t){LI(t.getGraph(),e0(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(Cn),e2e=QTe;function Sg(r){return"_EC_"+r}var t2e=function(){function r(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return r.prototype.isDirected=function(){return this._directed},r.prototype.addNode=function(e,t){e=e==null?""+t:""+e;var i=this._nodesMap;if(!i[Sg(e)]){var n=new hp(e,t);return n.hostGraph=this,this.nodes.push(n),i[Sg(e)]=n,n}},r.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},r.prototype.getNodeById=function(e){return this._nodesMap[Sg(e)]},r.prototype.addEdge=function(e,t,i){var n=this._nodesMap,s=this._edgesMap;if(Vi(e)&&(e=this.nodes[e]),Vi(t)&&(t=this.nodes[t]),e instanceof hp||(e=n[Sg(e)]),t instanceof hp||(t=n[Sg(t)]),!(!e||!t)){var u=e.id+"-"+t.id,a=new k9(e,t,i);return a.hostGraph=this,this._directed&&(e.outEdges.push(a),t.inEdges.push(a)),e.edges.push(a),e!==t&&t.edges.push(a),this.edges.push(a),s[u]=a,a}},r.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},r.prototype.getEdge=function(e,t){e instanceof hp&&(e=e.id),t instanceof hp&&(t=t.id);var i=this._edgesMap;return this._directed?i[e+"-"+t]:i[e+"-"+t]||i[t+"-"+e]},r.prototype.eachNode=function(e,t){for(var i=this.nodes,n=i.length,s=0;s<n;s++)i[s].dataIndex>=0&&e.call(t,i[s],s)},r.prototype.eachEdge=function(e,t){for(var i=this.edges,n=i.length,s=0;s<n;s++)i[s].dataIndex>=0&&i[s].node1.dataIndex>=0&&i[s].node2.dataIndex>=0&&e.call(t,i[s],s)},r.prototype.breadthFirstTraverse=function(e,t,i,n){if(t instanceof hp||(t=this._nodesMap[Sg(t)]),!!t){for(var s=i==="out"?"outEdges":i==="in"?"inEdges":"edges",u=0;u<this.nodes.length;u++)this.nodes[u].__visited=!1;if(!e.call(n,t,null))for(var a=[t];a.length;)for(var h=a.shift(),p=h[s],u=0;u<p.length;u++){var m=p[u],v=m.node1===h?m.node2:m.node1;if(!v.__visited){if(e.call(n,v,h))return;a.push(v),v.__visited=!0}}}},r.prototype.update=function(){for(var e=this.data,t=this.edgeData,i=this.nodes,n=this.edges,s=0,u=i.length;s<u;s++)i[s].dataIndex=-1;for(var s=0,u=e.count();s<u;s++)i[e.getRawIndex(s)].dataIndex=s;t.filterSelf(function(a){var h=n[t.getRawIndex(a)];return h.node1.dataIndex>=0&&h.node2.dataIndex>=0});for(var s=0,u=n.length;s<u;s++)n[s].dataIndex=-1;for(var s=0,u=t.count();s<u;s++)n[t.getRawIndex(s)].dataIndex=s},r.prototype.clone=function(){for(var e=new r(this._directed),t=this.nodes,i=this.edges,n=0;n<t.length;n++)e.addNode(t[n].id,t[n].dataIndex);for(var n=0;n<i.length;n++){var s=i[n];e.addEdge(s.node1.id,s.node2.id,s.dataIndex)}return e},r}(),hp=function(){function r(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e==null?"":e,this.dataIndex=t==null?-1:t}return r.prototype.degree=function(){return this.edges.length},r.prototype.inDegree=function(){return this.inEdges.length},r.prototype.outDegree=function(){return this.outEdges.length},r.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,i=t.data.getItemModel(this.dataIndex);return i.getModel(e)}},r.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var i=this.edges[t];i.dataIndex<0||(e.edge.push(i.dataIndex),e.node.push(i.node1.dataIndex,i.node2.dataIndex))}return e},r.prototype.getTrajectoryDataIndices=function(){for(var e=Mr(),t=Mr(),i=0;i<this.edges.length;i++){var n=this.edges[i];if(!(n.dataIndex<0)){e.set(n.dataIndex,!0);for(var s=[n.node1],u=[n.node2],a=0;a<s.length;){var h=s[a];a++,t.set(h.dataIndex,!0);for(var p=0;p<h.inEdges.length;p++)e.set(h.inEdges[p].dataIndex,!0),s.push(h.inEdges[p].node1)}for(a=0;a<u.length;){var m=u[a];a++,t.set(m.dataIndex,!0);for(var p=0;p<m.outEdges.length;p++)e.set(m.outEdges[p].dataIndex,!0),u.push(m.outEdges[p].node2)}}}return{edge:e.keys(),node:t.keys()}},r}(),k9=function(){function r(e,t,i){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=i==null?-1:i}return r.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,i=t.edgeData.getItemModel(this.dataIndex);return i.getModel(e)}},r.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},r.prototype.getTrajectoryDataIndices=function(){var e=Mr(),t=Mr();e.set(this.dataIndex,!0);for(var i=[this.node1],n=[this.node2],s=0;s<i.length;){var u=i[s];s++,t.set(u.dataIndex,!0);for(var a=0;a<u.inEdges.length;a++)e.set(u.inEdges[a].dataIndex,!0),i.push(u.inEdges[a].node1)}for(s=0;s<n.length;){var h=n[s];s++,t.set(h.dataIndex,!0);for(var a=0;a<h.outEdges.length;a++)e.set(h.outEdges[a].dataIndex,!0),n.push(h.outEdges[a].node2)}return{edge:e.keys(),node:t.keys()}},r}();function R9(r,e){return{getValue:function(t){var i=this[r][e];return i.getStore().get(i.getDimensionIndex(t||"value"),this.dataIndex)},setVisual:function(t,i){this.dataIndex>=0&&this[r][e].setItemVisual(this.dataIndex,t,i)},getVisual:function(t){return this[r][e].getItemVisual(this.dataIndex,t)},setLayout:function(t,i){this.dataIndex>=0&&this[r][e].setItemLayout(this.dataIndex,t,i)},getLayout:function(){return this[r][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[r][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[r][e].getRawIndex(this.dataIndex)}}}pa(hp,R9("hostGraph","data"));pa(k9,R9("hostGraph","edgeData"));var r2e=t2e;function O9(r,e,t,i,n){for(var s=new r2e(i),u=0;u<r.length;u++)s.addNode(Ga(r[u].id,r[u].name,u),u);for(var a=[],h=[],p=0,u=0;u<e.length;u++){var m=e[u],v=m.source,x=m.target;s.addEdge(v,x,p)&&(h.push(m),a.push(Ga(ya(m.id,null),v+" > "+x)),p++)}var w=t.get("coordinateSystem"),T;if(w==="cartesian2d"||w==="polar")T=gh(r,t);else{var C=yx.get(w),I=C?C.dimensions||[]:[];di(I,"value")<0&&I.concat(["value"]);var k=bx(r,{coordDimensions:I,encodeDefine:t.getEncode()}).dimensions;T=new No(k,t),T.initData(r)}var R=new No(["value"],t);return R.initData(h,a),n&&n(T,R),g9({mainData:T,struct:s,structAttr:"graph",datas:{node:T,edge:R},datasAttr:{node:"data",edge:"edgeData"}}),s.update(),s}var i2e=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){r.prototype.init.apply(this,arguments);var i=this;function n(){return i._categoriesData}this.legendVisualProvider=new Dx(n,n),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeOption=function(t){r.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(t){r.prototype.mergeDefaultAndTheme.apply(this,arguments),jp(t,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,i){var n=t.edges||t.links||[],s=t.data||t.nodes||[],u=this;if(s&&n){FTe(this);var a=O9(s,n,this,!0,h);return ue(a.edges,function(p){NTe(p.node1,p.node2,this,p.dataIndex)},this),a.data}function h(p,m){p.wrapMethod("getItemModel",function(T){var C=u._categoriesModels,I=T.getShallow("category"),k=C[I];return k&&(k.parentModel=T.parentModel,T.parentModel=k),T});var v=An.prototype.getModel;function x(T,C){var I=v.call(this,T,C);return I.resolveParentPath=w,I}m.wrapMethod("getItemModel",function(T){return T.resolveParentPath=w,T.getModel=x,T});function w(T){if(T&&(T[0]==="label"||T[1]==="label")){var C=T.slice();return T[0]==="label"?C[0]="edgeLabel":T[1]==="label"&&(C[1]="edgeLabel"),C}return T}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,i,n){if(n==="edge"){var s=this.getData(),u=this.getDataParams(t,n),a=s.graph.getEdgeByIndex(t),h=s.getName(a.node1.dataIndex),p=s.getName(a.node2.dataIndex),m=[];return h!=null&&m.push(h),p!=null&&m.push(p),Oa("nameValue",{name:m.join(" > "),value:u.value,noValue:u.value==null})}var v=t7({series:this,dataIndex:t,multipleSeries:i});return v},e.prototype._updateCategoriesData=function(){var t=Ht(this.option.categories||[],function(n){return n.value!=null?n:kt({value:0},n)}),i=new No(["value"],this);i.initData(t),this._categoriesData=i,this._categoriesModels=i.mapArray(function(n){return i.getItemModel(n)})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return r.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Gn),n2e=i2e,a2e={type:"graphRoam",event:"graphRoam",update:"none"};function o2e(r){r.registerChartView(e2e),r.registerSeriesModel(n2e),r.registerProcessor(kTe),r.registerVisual(RTe),r.registerVisual(OTe),r.registerLayout(VTe),r.registerLayout(r.PRIORITY.VISUAL.POST_CHART_LAYOUT,GTe),r.registerLayout(jTe),r.registerCoordinateSystem("graphView",{dimensions:Lx.dimensions,create:WTe}),r.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},aa),r.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},aa),r.registerAction(a2e,function(e,t,i){t.eachComponent({mainType:"series",query:e},function(n){var s=n.coordinateSystem,u=kk(s,e,void 0,i);n.setCenter&&n.setCenter(u.center),n.setZoom&&n.setZoom(u.zoom)})})}var s2e=function(){function r(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return r}(),l2e=function(r){lt(e,r);function e(t){var i=r.call(this,t)||this;return i.type="pointer",i}return e.prototype.getDefaultShape=function(){return new s2e},e.prototype.buildPath=function(t,i){var n=Math.cos,s=Math.sin,u=i.r,a=i.width,h=i.angle,p=i.x-n(h)*a*(a>=u/3?1:2),m=i.y-s(h)*a*(a>=u/3?1:2);h=i.angle-Math.PI/2,t.moveTo(p,m),t.lineTo(i.x+n(h)*a,i.y+s(h)*a),t.lineTo(i.x+n(i.angle)*u,i.y+s(i.angle)*u),t.lineTo(i.x-n(h)*a,i.y-s(h)*a),t.lineTo(p,m)},e}(_i),u2e=l2e;function c2e(r,e){var t=r.get("center"),i=e.getWidth(),n=e.getHeight(),s=Math.min(i,n),u=sr(t[0],e.getWidth()),a=sr(t[1],e.getHeight()),h=sr(r.get("radius"),s/2);return{cx:u,cy:a,r:h}}function Sw(r,e){var t=r==null?"":r+"";return e&&(gr(e)?t=e.replace("{value}",t):kr(e)&&(t=e(r))),t}var h2e=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n){this.group.removeAll();var s=t.get(["axisLine","lineStyle","color"]),u=c2e(t,n);this._renderMain(t,i,n,s,u),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,i,n,s,u){var a=this.group,h=t.get("clockwise"),p=-t.get("startAngle")/180*Math.PI,m=-t.get("endAngle")/180*Math.PI,v=t.getModel("axisLine"),x=v.get("roundCap"),w=x?qS:cs,T=v.get("show"),C=v.getModel("lineStyle"),I=C.get("width"),k=[p,m];PL(k,!h),p=k[0],m=k[1];for(var R=m-p,z=p,$=[],j=0;T&&j<s.length;j++){var G=Math.min(Math.max(s[j][0],0),1);m=p+R*G;var Y=new w({shape:{startAngle:z,endAngle:m,cx:u.cx,cy:u.cy,clockwise:h,r0:u.r-I,r:u.r},silent:!0});Y.setStyle({fill:s[j][1]}),Y.setStyle(C.getLineStyle(["color","width"])),$.push(Y),z=m}$.reverse(),ue($,function(H){return a.add(H)});var Z=function(H){if(H<=0)return s[0][1];var re;for(re=0;re<s.length;re++)if(s[re][0]>=H&&(re===0?0:s[re-1][0])<H)return s[re][1];return s[re-1][1]};this._renderTicks(t,i,n,Z,u,p,m,h,I),this._renderTitleAndDetail(t,i,n,Z,u),this._renderAnchor(t,u),this._renderPointer(t,i,n,Z,u,p,m,h,I)},e.prototype._renderTicks=function(t,i,n,s,u,a,h,p,m){for(var v=this.group,x=u.cx,w=u.cy,T=u.r,C=+t.get("min"),I=+t.get("max"),k=t.getModel("splitLine"),R=t.getModel("axisTick"),z=t.getModel("axisLabel"),$=t.get("splitNumber"),j=R.get("splitNumber"),G=sr(k.get("length"),T),Y=sr(R.get("length"),T),Z=a,H=(h-a)/$,re=H/j,ne=k.getModel("lineStyle").getLineStyle(),se=R.getModel("lineStyle").getLineStyle(),me=k.get("distance"),Se,Ie,ke=0;ke<=$;ke++){if(Se=Math.cos(Z),Ie=Math.sin(Z),k.get("show")){var Fe=me?me+m:m,Ce=new Ua({shape:{x1:Se*(T-Fe)+x,y1:Ie*(T-Fe)+w,x2:Se*(T-G-Fe)+x,y2:Ie*(T-G-Fe)+w},style:ne,silent:!0});ne.stroke==="auto"&&Ce.setStyle({stroke:s(ke/$)}),v.add(Ce)}if(z.get("show")){var Fe=z.get("distance")+me,We=Sw(ra(ke/$*(I-C)+C),z.get("formatter")),gt=s(ke/$),St=Se*(T-G-Fe)+x,et=Ie*(T-G-Fe)+w,ht=z.get("rotate"),$e=0;ht==="radial"?($e=-Z+2*Math.PI,$e>Math.PI/2&&($e+=Math.PI)):ht==="tangential"?$e=-Z-Math.PI/2:Vi(ht)&&($e=ht*Math.PI/180),$e===0?v.add(new Ni({style:Mn(z,{text:We,x:St,y:et,verticalAlign:Ie<-.8?"top":Ie>.8?"bottom":"middle",align:Se<-.4?"left":Se>.4?"right":"center"},{inheritColor:gt}),silent:!0})):v.add(new Ni({style:Mn(z,{text:We,x:St,y:et,verticalAlign:"middle",align:"center"},{inheritColor:gt}),silent:!0,originX:St,originY:et,rotation:$e}))}if(R.get("show")&&ke!==$){var Fe=R.get("distance");Fe=Fe?Fe+m:m;for(var He=0;He<=j;He++){Se=Math.cos(Z),Ie=Math.sin(Z);var dt=new Ua({shape:{x1:Se*(T-Fe)+x,y1:Ie*(T-Fe)+w,x2:Se*(T-Y-Fe)+x,y2:Ie*(T-Y-Fe)+w},silent:!0,style:se});se.stroke==="auto"&&dt.setStyle({stroke:s((ke+He/j)/$)}),v.add(dt),Z+=re}Z-=re}else Z+=H}},e.prototype._renderPointer=function(t,i,n,s,u,a,h,p,m){var v=this.group,x=this._data,w=this._progressEls,T=[],C=t.get(["pointer","show"]),I=t.getModel("progress"),k=I.get("show"),R=t.getData(),z=R.mapDimension("value"),$=+t.get("min"),j=+t.get("max"),G=[$,j],Y=[a,h];function Z(re,ne){var se=R.getItemModel(re),me=se.getModel("pointer"),Se=sr(me.get("width"),u.r),Ie=sr(me.get("length"),u.r),ke=t.get(["pointer","icon"]),Fe=me.get("offsetCenter"),Ce=sr(Fe[0],u.r),We=sr(Fe[1],u.r),gt=me.get("keepAspect"),St;return ke?St=fa(ke,Ce-Se/2,We-Ie,Se,Ie,null,gt):St=new u2e({shape:{angle:-Math.PI/2,width:Se,r:Ie,x:Ce,y:We}}),St.rotation=-(ne+Math.PI/2),St.x=u.cx,St.y=u.cy,St}function H(re,ne){var se=I.get("roundCap"),me=se?qS:cs,Se=I.get("overlap"),Ie=Se?I.get("width"):m/R.count(),ke=Se?u.r-Ie:u.r-(re+1)*Ie,Fe=Se?u.r:u.r-re*Ie,Ce=new me({shape:{startAngle:a,endAngle:ne,cx:u.cx,cy:u.cy,clockwise:p,r0:ke,r:Fe}});return Se&&(Ce.z2=j-R.get(z,re)%j),Ce}(k||C)&&(R.diff(x).add(function(re){var ne=R.get(z,re);if(C){var se=Z(re,a);Bn(se,{rotation:-((isNaN(+ne)?Y[0]:on(ne,G,Y,!0))+Math.PI/2)},t),v.add(se),R.setItemGraphicEl(re,se)}if(k){var me=H(re,a),Se=I.get("clip");Bn(me,{shape:{endAngle:on(ne,G,Y,Se)}},t),v.add(me),pD(t.seriesIndex,R.dataType,re,me),T[re]=me}}).update(function(re,ne){var se=R.get(z,re);if(C){var me=x.getItemGraphicEl(ne),Se=me?me.rotation:a,Ie=Z(re,Se);Ie.rotation=Se,ji(Ie,{rotation:-((isNaN(+se)?Y[0]:on(se,G,Y,!0))+Math.PI/2)},t),v.add(Ie),R.setItemGraphicEl(re,Ie)}if(k){var ke=w[ne],Fe=ke?ke.shape.endAngle:a,Ce=H(re,Fe),We=I.get("clip");ji(Ce,{shape:{endAngle:on(se,G,Y,We)}},t),v.add(Ce),pD(t.seriesIndex,R.dataType,re,Ce),T[re]=Ce}}).execute(),R.each(function(re){var ne=R.getItemModel(re),se=ne.getModel("emphasis"),me=se.get("focus"),Se=se.get("blurScope"),Ie=se.get("disabled");if(C){var ke=R.getItemGraphicEl(re),Fe=R.getItemVisual(re,"style"),Ce=Fe.fill;if(ke instanceof io){var We=ke.style;ke.useStyle(kt({image:We.image,x:We.x,y:We.y,width:We.width,height:We.height},Fe))}else ke.useStyle(Fe),ke.type!=="pointer"&&ke.setColor(Ce);ke.setStyle(ne.getModel(["pointer","itemStyle"]).getItemStyle()),ke.style.fill==="auto"&&ke.setStyle("fill",s(on(R.get(z,re),G,[0,1],!0))),ke.z2EmphasisLift=0,to(ke,ne),Kn(ke,me,Se,Ie)}if(k){var gt=T[re];gt.useStyle(R.getItemVisual(re,"style")),gt.setStyle(ne.getModel(["progress","itemStyle"]).getItemStyle()),gt.z2EmphasisLift=0,to(gt,ne),Kn(gt,me,Se,Ie)}}),this._progressEls=T)},e.prototype._renderAnchor=function(t,i){var n=t.getModel("anchor"),s=n.get("show");if(s){var u=n.get("size"),a=n.get("icon"),h=n.get("offsetCenter"),p=n.get("keepAspect"),m=fa(a,i.cx-u/2+sr(h[0],i.r),i.cy-u/2+sr(h[1],i.r),u,u,null,p);m.z2=n.get("showAbove")?1:0,m.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(m)}},e.prototype._renderTitleAndDetail=function(t,i,n,s,u){var a=this,h=t.getData(),p=h.mapDimension("value"),m=+t.get("min"),v=+t.get("max"),x=new Vr,w=[],T=[],C=t.isAnimationEnabled(),I=t.get(["pointer","showAbove"]);h.diff(this._data).add(function(k){w[k]=new Ni({silent:!0}),T[k]=new Ni({silent:!0})}).update(function(k,R){w[k]=a._titleEls[R],T[k]=a._detailEls[R]}).execute(),h.each(function(k){var R=h.getItemModel(k),z=h.get(p,k),$=new Vr,j=s(on(z,[m,v],[0,1],!0)),G=R.getModel("title");if(G.get("show")){var Y=G.get("offsetCenter"),Z=u.cx+sr(Y[0],u.r),H=u.cy+sr(Y[1],u.r),re=w[k];re.attr({z2:I?0:2,style:Mn(G,{x:Z,y:H,text:h.getName(k),align:"center",verticalAlign:"middle"},{inheritColor:j})}),$.add(re)}var ne=R.getModel("detail");if(ne.get("show")){var se=ne.get("offsetCenter"),me=u.cx+sr(se[0],u.r),Se=u.cy+sr(se[1],u.r),Ie=sr(ne.get("width"),u.r),ke=sr(ne.get("height"),u.r),Fe=t.get(["progress","show"])?h.getItemVisual(k,"style").fill:j,re=T[k],Ce=ne.get("formatter");re.attr({z2:I?0:2,style:Mn(ne,{x:me,y:Se,text:Sw(z,Ce),width:isNaN(Ie)?null:Ie,height:isNaN(ke)?null:ke,align:"center",verticalAlign:"middle"},{inheritColor:Fe})}),iW(re,{normal:ne},z,function(gt){return Sw(gt,Ce)}),C&&nW(re,k,h,t,{getFormattedLabel:function(gt,St,et,ht,$e,He){return Sw(He?He.interpolatedValue:z,Ce)}}),$.add(re)}x.add($)}),this.group.add(x),this._titleEls=w,this._detailEls=T},e.type="gauge",e}(Cn),d2e=h2e,f2e=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="itemStyle",t}return e.prototype.getInitialData=function(t,i){return $v(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(Gn),p2e=f2e;function m2e(r){r.registerChartView(d2e),r.registerSeriesModel(p2e)}var g2e=["itemStyle","opacity"],v2e=function(r){lt(e,r);function e(t,i){var n=r.call(this)||this,s=n,u=new ds,a=new Ni;return s.setTextContent(a),n.setTextGuideLine(u),n.updateData(t,i,!0),n}return e.prototype.updateData=function(t,i,n){var s=this,u=t.hostModel,a=t.getItemModel(i),h=t.getItemLayout(i),p=a.getModel("emphasis"),m=a.get(g2e);m=m==null?1:m,n||nu(s),s.useStyle(t.getItemVisual(i,"style")),s.style.lineJoin="round",n?(s.setShape({points:h.points}),s.style.opacity=0,Bn(s,{style:{opacity:m}},u,i)):ji(s,{style:{opacity:m},shape:{points:h.points}},u,i),to(s,a),this._updateLabel(t,i),Kn(this,p.get("focus"),p.get("blurScope"),p.get("disabled"))},e.prototype._updateLabel=function(t,i){var n=this,s=this.getTextGuideLine(),u=n.getTextContent(),a=t.hostModel,h=t.getItemModel(i),p=t.getItemLayout(i),m=p.label,v=t.getItemVisual(i,"style"),x=v.fill;ro(u,Ra(h),{labelFetcher:t.hostModel,labelDataIndex:i,defaultOpacity:v.opacity,defaultText:t.getName(i)},{normal:{align:m.textAlign,verticalAlign:m.verticalAlign}}),n.setTextConfig({local:!0,inside:!!m.inside,insideStroke:x,outsideFill:x});var w=m.linePoints;s.setShape({points:w}),n.textGuideLineConfig={anchor:w?new ii(w[0][0],w[0][1]):null},ji(u,{style:{x:m.x,y:m.y}},a,i),u.attr({rotation:m.rotation,originX:m.x,originY:m.y,z2:10}),xk(n,bk(h),{stroke:x})},e}(hs),_2e=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,i,n){var s=t.getData(),u=this._data,a=this.group;s.diff(u).add(function(h){var p=new v2e(s,h);s.setItemGraphicEl(h,p),a.add(p)}).update(function(h,p){var m=u.getItemGraphicEl(p);m.updateData(s,h),a.add(m),s.setItemGraphicEl(h,m)}).remove(function(h){var p=u.getItemGraphicEl(h);H0(p,t,h)}).execute(),this._data=s},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(Cn),y2e=_2e,x2e=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Dx(xr(this.getData,this),xr(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.getInitialData=function(t,i){return $v(this,{coordDimensions:["value"],encodeDefaulter:Qr(YL,this)})},e.prototype._defaultLabelLine=function(t){jp(t,"labelLine",["show"]);var i=t.labelLine,n=t.emphasis.labelLine;i.show=i.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.prototype.getDataParams=function(t){var i=this.getData(),n=r.prototype.getDataParams.call(this,t),s=i.mapDimension("value"),u=i.getSum(s);return n.percent=u?+(i.get(s,t)/u*100).toFixed(2):0,n.$vars.push("percent"),n},e.type="series.funnel",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Gn),b2e=x2e;function w2e(r,e){return xa(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function S2e(r,e){for(var t=r.mapDimension("value"),i=r.mapArray(t,function(h){return h}),n=[],s=e==="ascending",u=0,a=r.count();u<a;u++)n[u]=u;return kr(e)?n.sort(e):e!=="none"&&n.sort(function(h,p){return s?i[h]-i[p]:i[p]-i[h]}),n}function T2e(r){var e=r.hostModel,t=e.get("orient");r.each(function(i){var n=r.getItemModel(i),s=n.getModel("label"),u=s.get("position"),a=n.getModel("labelLine"),h=r.getItemLayout(i),p=h.points,m=u==="inner"||u==="inside"||u==="center"||u==="insideLeft"||u==="insideRight",v,x,w,T;if(m)u==="insideLeft"?(x=(p[0][0]+p[3][0])/2+5,w=(p[0][1]+p[3][1])/2,v="left"):u==="insideRight"?(x=(p[1][0]+p[2][0])/2-5,w=(p[1][1]+p[2][1])/2,v="right"):(x=(p[0][0]+p[1][0]+p[2][0]+p[3][0])/4,w=(p[0][1]+p[1][1]+p[2][1]+p[3][1])/4,v="center"),T=[[x,w],[x,w]];else{var C=void 0,I=void 0,k=void 0,R=void 0,z=a.get("length");u==="left"?(C=(p[3][0]+p[0][0])/2,I=(p[3][1]+p[0][1])/2,k=C-z,x=k-5,v="right"):u==="right"?(C=(p[1][0]+p[2][0])/2,I=(p[1][1]+p[2][1])/2,k=C+z,x=k+5,v="left"):u==="top"?(C=(p[3][0]+p[0][0])/2,I=(p[3][1]+p[0][1])/2,R=I-z,w=R-5,v="center"):u==="bottom"?(C=(p[1][0]+p[2][0])/2,I=(p[1][1]+p[2][1])/2,R=I+z,w=R+5,v="center"):u==="rightTop"?(C=t==="horizontal"?p[3][0]:p[1][0],I=t==="horizontal"?p[3][1]:p[1][1],t==="horizontal"?(R=I-z,w=R-5,v="center"):(k=C+z,x=k+5,v="top")):u==="rightBottom"?(C=p[2][0],I=p[2][1],t==="horizontal"?(R=I+z,w=R+5,v="center"):(k=C+z,x=k+5,v="bottom")):u==="leftTop"?(C=p[0][0],I=t==="horizontal"?p[0][1]:p[1][1],t==="horizontal"?(R=I-z,w=R-5,v="center"):(k=C-z,x=k-5,v="right")):u==="leftBottom"?(C=t==="horizontal"?p[1][0]:p[3][0],I=t==="horizontal"?p[1][1]:p[2][1],t==="horizontal"?(R=I+z,w=R+5,v="center"):(k=C-z,x=k-5,v="right")):(C=(p[1][0]+p[2][0])/2,I=(p[1][1]+p[2][1])/2,t==="horizontal"?(R=I+z,w=R+5,v="center"):(k=C+z,x=k+5,v="left")),t==="horizontal"?(k=C,x=k):(R=I,w=R),T=[[C,I],[k,R]]}h.label={linePoints:T,x,y:w,verticalAlign:"middle",textAlign:v,inside:m}})}function M2e(r,e){r.eachSeriesByType("funnel",function(t){var i=t.getData(),n=i.mapDimension("value"),s=t.get("sort"),u=w2e(t,e),a=t.get("orient"),h=u.width,p=u.height,m=S2e(i,s),v=u.x,x=u.y,w=a==="horizontal"?[sr(t.get("minSize"),p),sr(t.get("maxSize"),p)]:[sr(t.get("minSize"),h),sr(t.get("maxSize"),h)],T=i.getDataExtent(n),C=t.get("min"),I=t.get("max");C==null&&(C=Math.min(T[0],0)),I==null&&(I=T[1]);var k=t.get("funnelAlign"),R=t.get("gap"),z=a==="horizontal"?h:p,$=(z-R*(i.count()-1))/i.count(),j=function(Se,Ie){if(a==="horizontal"){var ke=i.get(n,Se)||0,Fe=on(ke,[C,I],w,!0),Ce=void 0;switch(k){case"top":Ce=x;break;case"center":Ce=x+(p-Fe)/2;break;case"bottom":Ce=x+(p-Fe);break}return[[Ie,Ce],[Ie,Ce+Fe]]}var We=i.get(n,Se)||0,gt=on(We,[C,I],w,!0),St;switch(k){case"left":St=v;break;case"center":St=v+(h-gt)/2;break;case"right":St=v+h-gt;break}return[[St,Ie],[St+gt,Ie]]};s==="ascending"&&($=-$,R=-R,a==="horizontal"?v+=h:x+=p,m=m.reverse());for(var G=0;G<m.length;G++){var Y=m[G],Z=m[G+1],H=i.getItemModel(Y);if(a==="horizontal"){var re=H.get(["itemStyle","width"]);re==null?re=$:(re=sr(re,h),s==="ascending"&&(re=-re));var ne=j(Y,v),se=j(Z,v+re);v+=re+R,i.setItemLayout(Y,{points:ne.concat(se.slice().reverse())})}else{var me=H.get(["itemStyle","height"]);me==null?me=$:(me=sr(me,p),s==="ascending"&&(me=-me));var ne=j(Y,x),se=j(Z,x+me);x+=me+R,i.setItemLayout(Y,{points:ne.concat(se.slice().reverse())})}}T2e(i)})}function A2e(r){r.registerChartView(y2e),r.registerSeriesModel(b2e),r.registerLayout(M2e),r.registerProcessor(Ex("funnel"))}var C2e=.3,I2e=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._dataGroup=new Vr,t._initialized=!1,t}return e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,i,n,s){this._progressiveEls=null;var u=this._dataGroup,a=t.getData(),h=this._data,p=t.coordinateSystem,m=p.dimensions,v=N$(t);a.diff(h).add(x).update(w).remove(T).execute();function x(I){var k=F$(a,u,I,m,p);kI(k,a,I,v)}function w(I,k){var R=h.getItemGraphicEl(k),z=z9(a,I,m,p);a.setItemGraphicEl(I,R),ji(R,{shape:{points:z}},t,I),nu(R),kI(R,a,I,v)}function T(I){var k=h.getItemGraphicEl(I);u.remove(k)}if(!this._initialized){this._initialized=!0;var C=E2e(p,t,function(){setTimeout(function(){u.removeClipPath()})});u.setClipPath(C)}this._data=a},e.prototype.incrementalPrepareRender=function(t,i,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,i,n){for(var s=i.getData(),u=i.coordinateSystem,a=u.dimensions,h=N$(i),p=this._progressiveEls=[],m=t.start;m<t.end;m++){var v=F$(s,this._dataGroup,m,a,u);v.incremental=!0,kI(v,s,m,h),p.push(v)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(Cn);function E2e(r,e,t){var i=r.model,n=r.getRect(),s=new Li({shape:{x:n.x,y:n.y,width:n.width,height:n.height}}),u=i.get("layout")==="horizontal"?"width":"height";return s.setShape(u,0),Bn(s,{shape:{width:n.width,height:n.height}},e,t),s}function z9(r,e,t,i){for(var n=[],s=0;s<t.length;s++){var u=t[s],a=r.get(r.mapDimension(u),e);D2e(a,i.getAxis(u).type)||n.push(i.dataToPoint(a,u))}return n}function F$(r,e,t,i,n){var s=z9(r,t,i,n),u=new ds({shape:{points:s},z2:10});return e.add(u),r.setItemGraphicEl(t,u),u}function N$(r){var e=r.get("smooth",!0);return e===!0&&(e=C2e),e=sh(e),z0(e)&&(e=0),{smooth:e}}function kI(r,e,t,i){r.useStyle(e.getItemVisual(t,"style")),r.style.fill=null,r.setShape("smooth",i.smooth);var n=e.getItemModel(t),s=n.getModel("emphasis");to(r,n,"lineStyle"),Kn(r,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function D2e(r,e){return e==="category"?r==null:r==null||isNaN(r)}var P2e=I2e,L2e=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.getInitialData=function(t,i){return gh(null,this,{useEncodeDefaulter:xr(k2e,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var i=this.coordinateSystem,n=this.getData(),s=[];return i.eachActiveState(n,function(u,a){t===u&&s.push(n.getRawIndex(a))}),s},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(Gn);function k2e(r){var e=r.ecModel.getComponent("parallel",r.get("parallelIndex"));if(!!e){var t={};return ue(e.dimensions,function(i){var n=R2e(i);t[i]=n}),t}}function R2e(r){return+r.replace("dim","")}var O2e=L2e,z2e=["lineStyle","opacity"],B2e={seriesType:"parallel",reset:function(r,e){var t=r.coordinateSystem,i={normal:r.get(["lineStyle","opacity"]),active:r.get("activeOpacity"),inactive:r.get("inactiveOpacity")};return{progress:function(n,s){t.eachActiveState(s,function(u,a){var h=i[u];if(u==="normal"&&s.hasItemOption){var p=s.getItemModel(a).get(z2e,!0);p!=null&&(h=p)}var m=s.ensureUniqueItemVisual(a,"style");m.opacity=h},n.start,n.end)}}}},F2e=B2e;function N2e(r){V2e(r),$2e(r)}function V2e(r){if(!r.parallel){var e=!1;ue(r.series,function(t){t&&t.type==="parallel"&&(e=!0)}),e&&(r.parallel=[{}])}}function $2e(r){var e=hn(r.parallelAxis);ue(e,function(t){if(!!Br(t)){var i=t.parallelIndex||0,n=hn(r.parallel)[i];n&&n.parallelAxisDefault&&ni(t,n.parallelAxisDefault,!1)}})}var G2e=5,U2e=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n){this._model=t,this._api=n,this._handlers||(this._handlers={},ue(j2e,function(s,u){n.getZr().on(u,this._handlers[u]=xr(s,this))},this)),Nv(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,i){X0(this,"_throttledDispatchExpand"),ue(this._handlers,function(n,s){i.getZr().off(s,n)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(kt({type:"parallelAxisExpand"},t))},e.type="parallel",e}(Jn),j2e={mousedown:function(r){RI(this,"click")&&(this._mouseDownPoint=[r.offsetX,r.offsetY])},mouseup:function(r){var e=this._mouseDownPoint;if(RI(this,"click")&&e){var t=[r.offsetX,r.offsetY],i=Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2);if(i>G2e)return;var n=this._model.coordinateSystem.getSlidedAxisExpandWindow([r.offsetX,r.offsetY]);n.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:n.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(r){if(!(this._mouseDownPoint||!RI(this,"mousemove"))){var e=this._model,t=e.coordinateSystem.getSlidedAxisExpandWindow([r.offsetX,r.offsetY]),i=t.behavior;i==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand(i==="none"?null:{axisExpandWindow:t.axisExpandWindow,animation:i==="jump"?null:{duration:0}})}}};function RI(r,e){var t=r._model;return t.get("axisExpandable")&&t.get("axisExpandTriggerOn")===e}var H2e=U2e,W2e=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){r.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var i=this.option;t&&ni(i,t,!0),this._initDimensions()},e.prototype.contains=function(t,i){var n=t.get("parallelIndex");return n!=null&&i.getComponent("parallel",n)===this},e.prototype.setAxisExpand=function(t){ue(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(i){t.hasOwnProperty(i)&&(this.option[i]=t[i])},this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],i=this.parallelAxisIndex=[],n=un(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(s){return(s.get("parallelIndex")||0)===this.componentIndex},this);ue(n,function(s){t.push("dim"+s.get("dim")),i.push(s.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(Oi),q2e=W2e,Z2e=function(r){lt(e,r);function e(t,i,n,s,u){var a=r.call(this,t,i,n)||this;return a.type=s||"value",a.axisIndex=u,a}return e.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},e}(lu),X2e=Z2e;function om(r,e,t,i,n,s){r=r||0;var u=t[1]-t[0];if(n!=null&&(n=Tg(n,[0,u])),s!=null&&(s=Math.max(s,n!=null?n:0)),i==="all"){var a=Math.abs(e[1]-e[0]);a=Tg(a,[0,u]),n=s=Tg(a,[n,s]),i=0}e[0]=Tg(e[0],t),e[1]=Tg(e[1],t);var h=OI(e,i);e[i]+=r;var p=n||0,m=t.slice();h.sign<0?m[0]+=p:m[1]-=p,e[i]=Tg(e[i],m);var v;return v=OI(e,i),n!=null&&(v.sign!==h.sign||v.span<n)&&(e[1-i]=e[i]+h.sign*n),v=OI(e,i),s!=null&&v.span>s&&(e[1-i]=e[i]+v.sign*s),e}function OI(r,e){var t=r[e]-r[1-e];return{span:Math.abs(t),sign:t>0?-1:t<0?1:e?-1:1}}function Tg(r,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,r))}var zI=ue,B9=Math.min,F9=Math.max,V$=Math.floor,Y2e=Math.ceil,$$=ra,K2e=Math.PI,J2e=function(){function r(e,t,i){this.type="parallel",this._axesMap=Mr(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,i)}return r.prototype._init=function(e,t,i){var n=e.dimensions,s=e.parallelAxisIndex;zI(n,function(u,a){var h=s[a],p=t.getComponent("parallelAxis",h),m=this._axesMap.set(u,new X2e(u,u2(p),[0,0],p.get("type"),h)),v=m.type==="category";m.onBand=v&&p.get("boundaryGap"),m.inverse=p.get("inverse"),p.axis=m,m.model=p,m.coordinateSystem=p.coordinateSystem=this},this)},r.prototype.update=function(e,t){this._updateAxesFromSeries(this._model,e)},r.prototype.containPoint=function(e){var t=this._makeLayoutInfo(),i=t.axisBase,n=t.layoutBase,s=t.pixelDimIndex,u=e[1-s],a=e[s];return u>=i&&u<=i+t.axisLength&&a>=n&&a<=n+t.layoutLength},r.prototype.getModel=function(){return this._model},r.prototype._updateAxesFromSeries=function(e,t){t.eachSeries(function(i){if(!!e.contains(i,t)){var n=i.getData();zI(this.dimensions,function(s){var u=this._axesMap.get(s);u.scale.unionExtentFromData(n,n.mapDimension(s)),dv(u.scale,u.model)},this)}},this)},r.prototype.resize=function(e,t){this._rect=xa(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},r.prototype.getRect=function(){return this._rect},r.prototype._makeLayoutInfo=function(){var e=this._model,t=this._rect,i=["x","y"],n=["width","height"],s=e.get("layout"),u=s==="horizontal"?0:1,a=t[n[u]],h=[0,a],p=this.dimensions.length,m=Tw(e.get("axisExpandWidth"),h),v=Tw(e.get("axisExpandCount")||0,[0,p]),x=e.get("axisExpandable")&&p>3&&p>v&&v>1&&m>0&&a>0,w=e.get("axisExpandWindow"),T;if(w)T=Tw(w[1]-w[0],h),w[1]=w[0]+T;else{T=Tw(m*(v-1),h);var C=e.get("axisExpandCenter")||V$(p/2);w=[m*C-T/2],w[1]=w[0]+T}var I=(a-T)/(p-v);I<3&&(I=0);var k=[V$($$(w[0]/m,1))+1,Y2e($$(w[1]/m,1))-1],R=I/m*w[0];return{layout:s,pixelDimIndex:u,layoutBase:t[i[u]],layoutLength:a,axisBase:t[i[1-u]],axisLength:t[n[1-u]],axisExpandable:x,axisExpandWidth:m,axisCollapseWidth:I,axisExpandWindow:w,axisCount:p,winInnerIndices:k,axisExpandWindow0Pos:R}},r.prototype._layoutAxes=function(){var e=this._rect,t=this._axesMap,i=this.dimensions,n=this._makeLayoutInfo(),s=n.layout;t.each(function(u){var a=[0,n.axisLength],h=u.inverse?1:0;u.setExtent(a[h],a[1-h])}),zI(i,function(u,a){var h=(n.axisExpandable?eMe:Q2e)(a,n),p={horizontal:{x:h.position,y:n.axisLength},vertical:{x:0,y:h.position}},m={horizontal:K2e/2,vertical:0},v=[p[s].x+e.x,p[s].y+e.y],x=m[s],w=ks();Qp(w,w,x),nc(w,w,v),this._axesLayout[u]={position:v,rotation:x,transform:w,axisNameAvailableWidth:h.axisNameAvailableWidth,axisLabelShow:h.axisLabelShow,nameTruncateMaxWidth:h.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},r.prototype.getAxis=function(e){return this._axesMap.get(e)},r.prototype.dataToPoint=function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},r.prototype.eachActiveState=function(e,t,i,n){i==null&&(i=0),n==null&&(n=e.count());var s=this._axesMap,u=this.dimensions,a=[],h=[];ue(u,function(I){a.push(e.mapDimension(I)),h.push(s.get(I).model)});for(var p=this.hasAxisBrushed(),m=i;m<n;m++){var v=void 0;if(!p)v="normal";else{v="active";for(var x=e.getValues(a,m),w=0,T=u.length;w<T;w++){var C=h[w].getActiveState(x[w]);if(C==="inactive"){v="inactive";break}}}t(v,m)}},r.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,t=this._axesMap,i=!1,n=0,s=e.length;n<s;n++)t.get(e[n]).model.getActiveState()!=="normal"&&(i=!0);return i},r.prototype.axisCoordToPoint=function(e,t){var i=this._axesLayout[t];return tu([e,0],i.transform)},r.prototype.getAxisLayout=function(e){return Nr(this._axesLayout[e])},r.prototype.getSlidedAxisExpandWindow=function(e){var t=this._makeLayoutInfo(),i=t.pixelDimIndex,n=t.axisExpandWindow.slice(),s=n[1]-n[0],u=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:n};var a=e[i]-t.layoutBase-t.axisExpandWindow0Pos,h,p="slide",m=t.axisCollapseWidth,v=this._model.get("axisExpandSlideTriggerArea"),x=v[0]!=null;if(m)x&&m&&a<s*v[0]?(p="jump",h=a-s*v[2]):x&&m&&a>s*(1-v[0])?(p="jump",h=a-s*(1-v[2])):(h=a-s*v[1])>=0&&(h=a-s*(1-v[1]))<=0&&(h=0),h*=t.axisExpandWidth/m,h?om(h,n,u,"all"):p="none";else{var w=n[1]-n[0],T=u[1]*a/w;n=[F9(0,T-w/2)],n[1]=B9(u[1],n[0]+w),n[0]=n[1]-w}return{axisExpandWindow:n,behavior:p}},r}();function Tw(r,e){return B9(F9(r,e[0]),e[1])}function Q2e(r,e){var t=e.layoutLength/(e.axisCount-1);return{position:t*r,axisNameAvailableWidth:t,axisLabelShow:!0}}function eMe(r,e){var t=e.layoutLength,i=e.axisExpandWidth,n=e.axisCount,s=e.axisCollapseWidth,u=e.winInnerIndices,a,h=s,p=!1,m;return r<u[0]?(a=r*s,m=s):r<=u[1]?(a=e.axisExpandWindow0Pos+r*i-e.axisExpandWindow[0],h=i,p=!0):(a=t-(n-1-r)*s,m=s),{position:a,axisNameAvailableWidth:h,axisLabelShow:p,nameTruncateMaxWidth:m}}var tMe=J2e;function rMe(r,e){var t=[];return r.eachComponent("parallel",function(i,n){var s=new tMe(i,r,e);s.name="parallel_"+n,s.resize(i,e),i.coordinateSystem=s,s.model=i,t.push(s)}),r.eachSeries(function(i){if(i.get("coordinateSystem")==="parallel"){var n=i.getReferringComponents("parallel",da).models[0];i.coordinateSystem=n.coordinateSystem}}),t}var iMe={create:rMe},nMe=iMe,N9=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.activeIntervals=[],t}return e.prototype.getAreaSelectStyle=function(){return Wp([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var i=this.activeIntervals=Nr(t);if(i)for(var n=i.length-1;n>=0;n--)pl(i[n])},e.prototype.getActiveState=function(t){var i=this.activeIntervals;if(!i.length)return"normal";if(t==null||isNaN(+t))return"inactive";if(i.length===1){var n=i[0];if(n[0]<=t&&t<=n[1])return"active"}else for(var s=0,u=i.length;s<u;s++)if(i[s][0]<=t&&t<=i[s][1])return"active";return"inactive"},e}(Oi);pa(N9,Tx);var G$=N9,Xp=!0,ox=Math.min,mv=Math.max,aMe=Math.pow,oMe=1e4,sMe=6,lMe=6,U$="globalPan",uMe={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},cMe={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},j$={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},hMe=0,dMe=function(r){lt(e,r);function e(t){var i=r.call(this)||this;return i._track=[],i._covers=[],i._handlers={},i._zr=t,i.group=new Vr,i._uid="brushController_"+hMe++,ue(yMe,function(n,s){this._handlers[s]=xr(n,this)},i),i}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var i=this._zr;this._enableGlobalPan||wwe(i,U$,this._uid),ue(this._handlers,function(n,s){i.on(s,n)}),this._brushType=t.brushType,this._brushOption=ni(Nr(j$),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;Swe(t,U$,this._uid),ue(this._handlers,function(i,n){t.off(n,i)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var i=this._panels={};ue(t,function(n){i[n.panelId]=Nr(n)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var i=this.group;return this._zr.add(i),i.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=i.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=Ht(t,function(x){return ni(Nr(j$),x,!0)});var i="\0-brush-index-",n=this._covers,s=this._covers=[],u=this,a=this._creatingCover;return new ch(n,t,p,h).add(m).update(m).remove(v).execute(),this;function h(x,w){return(x.id!=null?x.id:i+w)+"-"+x.brushType}function p(x,w){return h(x.__brushOption,w)}function m(x,w){var T=t[x];if(w!=null&&n[w]===a)s[x]=n[w];else{var C=s[x]=w!=null?(n[w].__brushOption=T,n[w]):$9(u,V9(u,T));jk(u,C)}}function v(x){n[x]!==a&&u.group.remove(n[x])}},e.prototype.unmount=function(){return this.enableBrush(!1),iP(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(xl);function V9(r,e){var t=m2[e.brushType].createCover(r,e);return t.__brushOption=e,U9(t,e),r.group.add(t),t}function $9(r,e){var t=Hk(e);return t.endCreating&&(t.endCreating(r,e),U9(e,e.__brushOption)),e}function G9(r,e){var t=e.__brushOption;Hk(e).updateCoverShape(r,e,t.range,t)}function U9(r,e){var t=e.z;t==null&&(t=oMe),r.traverse(function(i){i.z=t,i.z2=t})}function jk(r,e){Hk(e).updateCommon(r,e),G9(r,e)}function Hk(r){return m2[r.__brushOption.brushType]}function Wk(r,e,t){var i=r._panels;if(!i)return Xp;var n,s=r._transform;return ue(i,function(u){u.isTargetByCursor(e,t,s)&&(n=u)}),n}function j9(r,e){var t=r._panels;if(!t)return Xp;var i=e.__brushOption.panelId;return i!=null?t[i]:Xp}function iP(r){var e=r._covers,t=e.length;return ue(e,function(i){r.group.remove(i)},r),e.length=0,!!t}function Yp(r,e){var t=Ht(r._covers,function(i){var n=i.__brushOption,s=Nr(n.range);return{brushType:n.brushType,panelId:n.panelId,range:s}});r.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function fMe(r){var e=r._track;if(!e.length)return!1;var t=e[e.length-1],i=e[0],n=t[0]-i[0],s=t[1]-i[1],u=aMe(n*n+s*s,.5);return u>sMe}function H9(r){var e=r.length-1;return e<0&&(e=0),[r[0],r[e]]}function W9(r,e,t,i){var n=new Vr;return n.add(new Li({name:"main",style:qk(t),silent:!0,draggable:!0,cursor:"move",drift:Qr(H$,r,e,n,["n","s","w","e"]),ondragend:Qr(Yp,e,{isEnd:!0})})),ue(i,function(s){n.add(new Li({name:s.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Qr(H$,r,e,n,s),ondragend:Qr(Yp,e,{isEnd:!0})}))}),n}function q9(r,e,t,i){var n=i.brushStyle.lineWidth||0,s=mv(n,lMe),u=t[0][0],a=t[1][0],h=u-n/2,p=a-n/2,m=t[0][1],v=t[1][1],x=m-s+n/2,w=v-s+n/2,T=m-u,C=v-a,I=T+n,k=C+n;Uc(r,e,"main",u,a,T,C),i.transformable&&(Uc(r,e,"w",h,p,s,k),Uc(r,e,"e",x,p,s,k),Uc(r,e,"n",h,p,I,s),Uc(r,e,"s",h,w,I,s),Uc(r,e,"nw",h,p,s,s),Uc(r,e,"ne",x,p,s,s),Uc(r,e,"sw",h,w,s,s),Uc(r,e,"se",x,w,s,s))}function nP(r,e){var t=e.__brushOption,i=t.transformable,n=e.childAt(0);n.useStyle(qk(t)),n.attr({silent:!i,cursor:i?"move":"default"}),ue([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(s){var u=e.childOfName(s.join("")),a=s.length===1?aP(r,s[0]):mMe(r,s);u&&u.attr({silent:!i,invisible:!i,cursor:i?cMe[a]+"-resize":null})})}function Uc(r,e,t,i,n,s,u){var a=e.childOfName(t);a&&a.setShape(vMe(Zk(r,e,[[i,n],[i+s,n+u]])))}function qk(r){return zr({strokeNoScale:!0},r.brushStyle)}function Z9(r,e,t,i){var n=[ox(r,t),ox(e,i)],s=[mv(r,t),mv(e,i)];return[[n[0],s[0]],[n[1],s[1]]]}function pMe(r){return Bp(r.group)}function aP(r,e){var t={w:"left",e:"right",n:"top",s:"bottom"},i={left:"w",right:"e",top:"n",bottom:"s"},n=ZT(t[e],pMe(r));return i[n]}function mMe(r,e){var t=[aP(r,e[0]),aP(r,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function H$(r,e,t,i,n,s){var u=t.__brushOption,a=r.toRectRange(u.range),h=X9(e,n,s);ue(i,function(p){var m=uMe[p];a[m[0]][m[1]]+=h[m[0]]}),u.range=r.fromRectRange(Z9(a[0][0],a[1][0],a[0][1],a[1][1])),jk(e,t),Yp(e,{isEnd:!1})}function gMe(r,e,t,i){var n=e.__brushOption.range,s=X9(r,t,i);ue(n,function(u){u[0]+=s[0],u[1]+=s[1]}),jk(r,e),Yp(r,{isEnd:!1})}function X9(r,e,t){var i=r.group,n=i.transformCoordToLocal(e,t),s=i.transformCoordToLocal(0,0);return[n[0]-s[0],n[1]-s[1]]}function Zk(r,e,t){var i=j9(r,e);return i&&i!==Xp?i.clipPath(t,r._transform):Nr(t)}function vMe(r){var e=ox(r[0][0],r[1][0]),t=ox(r[0][1],r[1][1]),i=mv(r[0][0],r[1][0]),n=mv(r[0][1],r[1][1]);return{x:e,y:t,width:i-e,height:n-t}}function _Me(r,e,t){if(!(!r._brushType||xMe(r,e.offsetX,e.offsetY))){var i=r._zr,n=r._covers,s=Wk(r,e,t);if(!r._dragging)for(var u=0;u<n.length;u++){var a=n[u].__brushOption;if(s&&(s===Xp||a.panelId===s.panelId)&&m2[a.brushType].contain(n[u],t[0],t[1]))return}s&&i.setCursorStyle("crosshair")}}function oP(r){var e=r.event;e.preventDefault&&e.preventDefault()}function sP(r,e,t){return r.childOfName("main").contain(e,t)}function Y9(r,e,t,i){var n=r._creatingCover,s=r._creatingPanel,u=r._brushOption,a;if(r._track.push(t.slice()),fMe(r)||n){if(s&&!n){u.brushMode==="single"&&iP(r);var h=Nr(u);h.brushType=W$(h.brushType,s),h.panelId=s===Xp?null:s.panelId,n=r._creatingCover=V9(r,h),r._covers.push(n)}if(n){var p=m2[W$(r._brushType,s)],m=n.__brushOption;m.range=p.getCreatingRange(Zk(r,n,r._track)),i&&($9(r,n),p.updateCommon(r,n)),G9(r,n),a={isEnd:i}}}else i&&u.brushMode==="single"&&u.removeOnClick&&Wk(r,e,t)&&iP(r)&&(a={isEnd:i,removeOnClick:!0});return a}function W$(r,e){return r==="auto"?e.defaultBrushType:r}var yMe={mousedown:function(r){if(this._dragging)q$(this,r);else if(!r.target||!r.target.draggable){oP(r);var e=this.group.transformCoordToLocal(r.offsetX,r.offsetY);this._creatingCover=null;var t=this._creatingPanel=Wk(this,r,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(r){var e=r.offsetX,t=r.offsetY,i=this.group.transformCoordToLocal(e,t);if(_Me(this,r,i),this._dragging){oP(r);var n=Y9(this,r,i,!1);n&&Yp(this,n)}},mouseup:function(r){q$(this,r)}};function q$(r,e){if(r._dragging){oP(e);var t=e.offsetX,i=e.offsetY,n=r.group.transformCoordToLocal(t,i),s=Y9(r,e,n,!0);r._dragging=!1,r._track=[],r._creatingCover=null,s&&Yp(r,s)}}function xMe(r,e,t){var i=r._zr;return e<0||e>i.getWidth()||t<0||t>i.getHeight()}var m2={lineX:Z$(0),lineY:Z$(1),rect:{createCover:function(r,e){function t(i){return i}return W9({toRectRange:t,fromRectRange:t},r,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(r){var e=H9(r);return Z9(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(r,e,t,i){q9(r,e,t,i)},updateCommon:nP,contain:sP},polygon:{createCover:function(r,e){var t=new Vr;return t.add(new ds({name:"main",style:qk(e),silent:!0})),t},getCreatingRange:function(r){return r},endCreating:function(r,e){e.remove(e.childAt(0)),e.add(new hs({name:"main",draggable:!0,drift:Qr(gMe,r,e),ondragend:Qr(Yp,r,{isEnd:!0})}))},updateCoverShape:function(r,e,t,i){e.childAt(0).setShape({points:Zk(r,e,t)})},updateCommon:nP,contain:sP}};function Z$(r){return{createCover:function(e,t){return W9({toRectRange:function(i){var n=[i,[0,100]];return r&&n.reverse(),n},fromRectRange:function(i){return i[r]}},e,t,[[["w"],["e"]],[["n"],["s"]]][r])},getCreatingRange:function(e){var t=H9(e),i=ox(t[0][r],t[1][r]),n=mv(t[0][r],t[1][r]);return[i,n]},updateCoverShape:function(e,t,i,n){var s,u=j9(e,t);if(u!==Xp&&u.getLinearBrushOtherExtent)s=u.getLinearBrushOtherExtent(r);else{var a=e._zr;s=[0,[a.getWidth(),a.getHeight()][1-r]]}var h=[i,s];r&&h.reverse(),q9(e,t,h,n)},updateCommon:nP,contain:sP}}var Xk=dMe;function K9(r){return r=Yk(r),function(e){return eW(e,r)}}function J9(r,e){return r=Yk(r),function(t){var i=e!=null?e:t,n=i?r.width:r.height,s=i?r.x:r.y;return[s,s+(n||0)]}}function Q9(r,e,t){var i=Yk(r);return function(n,s){return i.contain(s[0],s[1])&&!h2(n,e,t)}}function Yk(r){return ai.create(r)}var bMe=["axisLine","axisTickLabel","axisName"],wMe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,i){r.prototype.init.apply(this,arguments),(this._brushController=new Xk(i.getZr())).on("brush",xr(this._onBrush,this))},e.prototype.render=function(t,i,n,s){if(!SMe(t,i,s)){this.axisModel=t,this.api=n,this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new Vr,this.group.add(this._axisGroup),!!t.get("show")){var a=MMe(t,i),h=a.coordinateSystem,p=t.getAreaSelectStyle(),m=p.width,v=t.axis.dim,x=h.getAxisLayout(v),w=kt({strokeContainThreshold:m},x),T=new hh(t,w);ue(bMe,T.add,T),this._axisGroup.add(T.getGroup()),this._refreshBrushController(w,p,t,a,m,n),vx(u,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,i,n,s,u,a){var h=n.axis.getExtent(),p=h[1]-h[0],m=Math.min(30,Math.abs(p)*.1),v=ai.create({x:h[0],y:-u/2,width:p,height:u});v.x-=m,v.width+=2*m,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:K9(v),isTargetByCursor:Q9(v,a,s),getLinearBrushOtherExtent:J9(v,0)}]).enableBrush({brushType:"lineX",brushStyle:i,removeOnClick:!0}).updateCovers(TMe(n))},e.prototype._onBrush=function(t){var i=t.areas,n=this.axisModel,s=n.axis,u=Ht(i,function(a){return[s.coordToData(a.range[0],!0),s.coordToData(a.range[1],!0)]});(!n.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:u})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(Jn);function SMe(r,e,t){return t&&t.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:t})[0]===r}function TMe(r){var e=r.axis;return Ht(r.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}function MMe(r,e){return e.getComponent("parallel",r.get("parallelIndex"))}var AMe=wMe,CMe={type:"axisAreaSelect",event:"axisAreaSelected"};function IMe(r){r.registerAction(CMe,function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(i){i.axis.model.setActiveIntervals(e.intervals)})}),r.registerAction("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(i){i.setAxisExpand(e)})})}var EMe={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function eZ(r){r.registerComponentView(H2e),r.registerComponentModel(q2e),r.registerCoordinateSystem("parallel",nMe),r.registerPreprocessor(N2e),r.registerComponentModel(G$),r.registerComponentView(AMe),pv(r,"parallel",G$,EMe),IMe(r)}function DMe(r){gi(eZ),r.registerChartView(P2e),r.registerSeriesModel(O2e),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,F2e)}var PMe=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return r}(),LMe=function(r){lt(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new PMe},e.prototype.buildPath=function(t,i){var n=i.extent;t.moveTo(i.x1,i.y1),t.bezierCurveTo(i.cpx1,i.cpy1,i.cpx2,i.cpy2,i.x2,i.y2),i.orient==="vertical"?(t.lineTo(i.x2+n,i.y2),t.bezierCurveTo(i.cpx2+n,i.cpy2,i.cpx1+n,i.cpy1,i.x1+n,i.y1)):(t.lineTo(i.x2,i.y2+n),t.bezierCurveTo(i.cpx2,i.cpy2+n,i.cpx1,i.cpy1+n,i.x1,i.y1+n)),t.closePath()},e.prototype.highlight=function(){lh(this)},e.prototype.downplay=function(){uh(this)},e}(_i),kMe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._focusAdjacencyDisabled=!1,t}return e.prototype.render=function(t,i,n){var s=this,u=t.getGraph(),a=this.group,h=t.layoutInfo,p=h.width,m=h.height,v=t.getData(),x=t.getData("edge"),w=t.get("orient");this._model=t,a.removeAll(),a.x=h.x,a.y=h.y,u.eachEdge(function(T){var C=new LMe,I=Gr(C);I.dataIndex=T.dataIndex,I.seriesIndex=t.seriesIndex,I.dataType="edge";var k=T.getModel(),R=k.getModel("lineStyle"),z=R.get("curveness"),$=T.node1.getLayout(),j=T.node1.getModel(),G=j.get("localX"),Y=j.get("localY"),Z=T.node2.getLayout(),H=T.node2.getModel(),re=H.get("localX"),ne=H.get("localY"),se=T.getLayout(),me,Se,Ie,ke,Fe,Ce,We,gt;C.shape.extent=Math.max(1,se.dy),C.shape.orient=w,w==="vertical"?(me=(G!=null?G*p:$.x)+se.sy,Se=(Y!=null?Y*m:$.y)+$.dy,Ie=(re!=null?re*p:Z.x)+se.ty,ke=ne!=null?ne*m:Z.y,Fe=me,Ce=Se*(1-z)+ke*z,We=Ie,gt=Se*z+ke*(1-z)):(me=(G!=null?G*p:$.x)+$.dx,Se=(Y!=null?Y*m:$.y)+se.sy,Ie=re!=null?re*p:Z.x,ke=(ne!=null?ne*m:Z.y)+se.ty,Fe=me*(1-z)+Ie*z,Ce=Se,We=me*z+Ie*(1-z),gt=ke),C.setShape({x1:me,y1:Se,x2:Ie,y2:ke,cpx1:Fe,cpy1:Ce,cpx2:We,cpy2:gt}),C.useStyle(R.getItemStyle()),X$(C.style,w,T);var St=""+k.get("value"),et=Ra(k,"edgeLabel");ro(C,et,{labelFetcher:{getFormattedLabel:function(He,dt,nt,vt,Pt,jt){return t.getFormattedLabel(He,dt,"edge",vt,Ju(Pt,et.normal&&et.normal.get("formatter"),St),jt)}},labelDataIndex:T.dataIndex,defaultText:St}),C.setTextConfig({position:"inside"});var ht=k.getModel("emphasis");to(C,k,"lineStyle",function(He){var dt=He.getItemStyle();return X$(dt,w,T),dt}),a.add(C),x.setItemGraphicEl(T.dataIndex,C);var $e=ht.get("focus");Kn(C,$e==="adjacency"?T.getAdjacentDataIndices():$e==="trajectory"?T.getTrajectoryDataIndices():$e,ht.get("blurScope"),ht.get("disabled"))}),u.eachNode(function(T){var C=T.getLayout(),I=T.getModel(),k=I.get("localX"),R=I.get("localY"),z=I.getModel("emphasis"),$=new Li({shape:{x:k!=null?k*p:C.x,y:R!=null?R*m:C.y,width:C.dx,height:C.dy},style:I.getModel("itemStyle").getItemStyle(),z2:10});ro($,Ra(I),{labelFetcher:{getFormattedLabel:function(G,Y){return t.getFormattedLabel(G,Y,"node")}},labelDataIndex:T.dataIndex,defaultText:T.id}),$.disableLabelAnimation=!0,$.setStyle("fill",T.getVisual("color")),$.setStyle("decal",T.getVisual("style").decal),to($,I),a.add($),v.setItemGraphicEl(T.dataIndex,$),Gr($).dataType="node";var j=z.get("focus");Kn($,j==="adjacency"?T.getAdjacentDataIndices():j==="trajectory"?T.getTrajectoryDataIndices():j,z.get("blurScope"),z.get("disabled"))}),v.eachItemGraphicEl(function(T,C){var I=v.getItemModel(C);I.get("draggable")&&(T.drift=function(k,R){s._focusAdjacencyDisabled=!0,this.shape.x+=k,this.shape.y+=R,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:v.getRawIndex(C),localX:this.shape.x/p,localY:this.shape.y/m})},T.ondragend=function(){s._focusAdjacencyDisabled=!1},T.draggable=!0,T.cursor="move")}),!this._data&&t.isAnimationEnabled()&&a.setClipPath(RMe(a.getBoundingRect(),t,function(){a.removeClipPath()})),this._data=t.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(Cn);function X$(r,e,t){switch(r.fill){case"source":r.fill=t.node1.getVisual("color"),r.decal=t.node1.getVisual("style").decal;break;case"target":r.fill=t.node2.getVisual("color"),r.decal=t.node2.getVisual("style").decal;break;case"gradient":var i=t.node1.getVisual("color"),n=t.node2.getVisual("color");gr(i)&&gr(n)&&(r.fill=new gx(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:i,offset:0},{color:n,offset:1}]))}}function RMe(r,e,t){var i=new Li({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return Bn(i,{shape:{width:r.width+20}},e,t),i}var OMe=kMe,zMe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,i){var n=t.edges||t.links,s=t.data||t.nodes,u=t.levels;this.levelModels=[];for(var a=this.levelModels,h=0;h<u.length;h++)u[h].depth!=null&&u[h].depth>=0&&(a[u[h].depth]=new An(u[h],this,i));if(s&&n){var p=O9(s,n,this,!0,m);return p.data}function m(v,x){v.wrapMethod("getItemModel",function(w,T){var C=w.parentModel,I=C.getData().getItemLayout(T);if(I){var k=I.depth,R=C.levelModels[k];R&&(w.parentModel=R)}return w}),x.wrapMethod("getItemModel",function(w,T){var C=w.parentModel,I=C.getGraph().getEdgeByIndex(T),k=I.node1.getLayout();if(k){var R=k.depth,z=C.levelModels[R];z&&(w.parentModel=z)}return w})}},e.prototype.setNodePosition=function(t,i){var n=this.option.data||this.option.nodes,s=n[t];s.localX=i[0],s.localY=i[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,i,n){function s(w){return isNaN(w)||w==null}if(n==="edge"){var u=this.getDataParams(t,n),a=u.data,h=u.value,p=a.source+" -- "+a.target;return Oa("nameValue",{name:p,value:h,noValue:s(h)})}else{var m=this.getGraph().getNodeByIndex(t),v=m.getLayout().value,x=this.getDataParams(t,n).data.name;return Oa("nameValue",{name:x!=null?x+"":null,value:v,noValue:s(v)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(t,i){var n=r.prototype.getDataParams.call(this,t,i);if(n.value==null&&i==="node"){var s=this.getGraph().getNodeByIndex(t),u=s.getLayout().value;n.value=u}return n},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(Gn),BMe=zMe;function FMe(r,e){r.eachSeriesByType("sankey",function(t){var i=t.get("nodeWidth"),n=t.get("nodeGap"),s=NMe(t,e);t.layoutInfo=s;var u=s.width,a=s.height,h=t.getGraph(),p=h.nodes,m=h.edges;$Me(p);var v=un(p,function(C){return C.getLayout().value===0}),x=v.length!==0?0:t.get("layoutIterations"),w=t.get("orient"),T=t.get("nodeAlign");VMe(p,m,i,n,u,a,x,w,T)})}function NMe(r,e){return xa(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function VMe(r,e,t,i,n,s,u,a,h){GMe(r,e,t,n,s,a,h),WMe(r,e,s,n,i,u,a),tAe(r,a)}function $Me(r){ue(r,function(e){var t=Dd(e.outEdges,QS),i=Dd(e.inEdges,QS),n=e.getValue()||0,s=Math.max(t,i,n);e.setLayout({value:s},!0)})}function GMe(r,e,t,i,n,s,u){for(var a=[],h=[],p=[],m=[],v=0,x=0;x<e.length;x++)a[x]=1;for(var x=0;x<r.length;x++)h[x]=r[x].inEdges.length,h[x]===0&&p.push(r[x]);for(var w=-1;p.length;){for(var T=0;T<p.length;T++){var C=p[T],I=C.hostGraph.data.getRawDataItem(C.dataIndex),k=I.depth!=null&&I.depth>=0;k&&I.depth>w&&(w=I.depth),C.setLayout({depth:k?I.depth:v},!0),s==="vertical"?C.setLayout({dy:t},!0):C.setLayout({dx:t},!0);for(var R=0;R<C.outEdges.length;R++){var z=C.outEdges[R],$=e.indexOf(z);a[$]=0;var j=z.node2,G=r.indexOf(j);--h[G]===0&&m.indexOf(j)<0&&m.push(j)}}++v,p=m,m=[]}for(var x=0;x<a.length;x++)if(a[x]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var Y=w>v-1?w:v-1;u&&u!=="left"&&UMe(r,u,s,Y);var Z=s==="vertical"?(n-t)/Y:(i-t)/Y;HMe(r,Z,s)}function tZ(r){var e=r.hostGraph.data.getRawDataItem(r.dataIndex);return e.depth!=null&&e.depth>=0}function UMe(r,e,t,i){if(e==="right"){for(var n=[],s=r,u=0;s.length;){for(var a=0;a<s.length;a++){var h=s[a];h.setLayout({skNodeHeight:u},!0);for(var p=0;p<h.inEdges.length;p++){var m=h.inEdges[p];n.indexOf(m.node1)<0&&n.push(m.node1)}}s=n,n=[],++u}ue(r,function(v){tZ(v)||v.setLayout({depth:Math.max(0,i-v.getLayout().skNodeHeight)},!0)})}else e==="justify"&&jMe(r,i)}function jMe(r,e){ue(r,function(t){!tZ(t)&&!t.outEdges.length&&t.setLayout({depth:e},!0)})}function HMe(r,e,t){ue(r,function(i){var n=i.getLayout().depth*e;t==="vertical"?i.setLayout({y:n},!0):i.setLayout({x:n},!0)})}function WMe(r,e,t,i,n,s,u){var a=qMe(r,u);ZMe(a,e,t,i,n,u),BI(a,n,t,i,u);for(var h=1;s>0;s--)h*=.99,XMe(a,h,u),BI(a,n,t,i,u),eAe(a,h,u),BI(a,n,t,i,u)}function qMe(r,e){var t=[],i=e==="vertical"?"y":"x",n=cD(r,function(s){return s.getLayout()[i]});return n.keys.sort(function(s,u){return s-u}),ue(n.keys,function(s){t.push(n.buckets.get(s))}),t}function ZMe(r,e,t,i,n,s){var u=1/0;ue(r,function(a){var h=a.length,p=0;ue(a,function(v){p+=v.getLayout().value});var m=s==="vertical"?(i-(h-1)*n)/p:(t-(h-1)*n)/p;m<u&&(u=m)}),ue(r,function(a){ue(a,function(h,p){var m=h.getLayout().value*u;s==="vertical"?(h.setLayout({x:p},!0),h.setLayout({dx:m},!0)):(h.setLayout({y:p},!0),h.setLayout({dy:m},!0))})}),ue(e,function(a){var h=+a.getValue()*u;a.setLayout({dy:h},!0)})}function BI(r,e,t,i,n){var s=n==="vertical"?"x":"y";ue(r,function(u){u.sort(function(C,I){return C.getLayout()[s]-I.getLayout()[s]});for(var a,h,p,m=0,v=u.length,x=n==="vertical"?"dx":"dy",w=0;w<v;w++)h=u[w],p=m-h.getLayout()[s],p>0&&(a=h.getLayout()[s]+p,n==="vertical"?h.setLayout({x:a},!0):h.setLayout({y:a},!0)),m=h.getLayout()[s]+h.getLayout()[x]+e;var T=n==="vertical"?i:t;if(p=m-e-T,p>0){a=h.getLayout()[s]-p,n==="vertical"?h.setLayout({x:a},!0):h.setLayout({y:a},!0),m=a;for(var w=v-2;w>=0;--w)h=u[w],p=h.getLayout()[s]+h.getLayout()[x]+e-m,p>0&&(a=h.getLayout()[s]-p,n==="vertical"?h.setLayout({x:a},!0):h.setLayout({y:a},!0)),m=h.getLayout()[s]}})}function XMe(r,e,t){ue(r.slice().reverse(),function(i){ue(i,function(n){if(n.outEdges.length){var s=Dd(n.outEdges,YMe,t)/Dd(n.outEdges,QS);if(isNaN(s)){var u=n.outEdges.length;s=u?Dd(n.outEdges,KMe,t)/u:0}if(t==="vertical"){var a=n.getLayout().x+(s-Vd(n,t))*e;n.setLayout({x:a},!0)}else{var h=n.getLayout().y+(s-Vd(n,t))*e;n.setLayout({y:h},!0)}}})})}function YMe(r,e){return Vd(r.node2,e)*r.getValue()}function KMe(r,e){return Vd(r.node2,e)}function JMe(r,e){return Vd(r.node1,e)*r.getValue()}function QMe(r,e){return Vd(r.node1,e)}function Vd(r,e){return e==="vertical"?r.getLayout().x+r.getLayout().dx/2:r.getLayout().y+r.getLayout().dy/2}function QS(r){return r.getValue()}function Dd(r,e,t){for(var i=0,n=r.length,s=-1;++s<n;){var u=+e(r[s],t);isNaN(u)||(i+=u)}return i}function eAe(r,e,t){ue(r,function(i){ue(i,function(n){if(n.inEdges.length){var s=Dd(n.inEdges,JMe,t)/Dd(n.inEdges,QS);if(isNaN(s)){var u=n.inEdges.length;s=u?Dd(n.inEdges,QMe,t)/u:0}if(t==="vertical"){var a=n.getLayout().x+(s-Vd(n,t))*e;n.setLayout({x:a},!0)}else{var h=n.getLayout().y+(s-Vd(n,t))*e;n.setLayout({y:h},!0)}}})})}function tAe(r,e){var t=e==="vertical"?"x":"y";ue(r,function(i){i.outEdges.sort(function(n,s){return n.node2.getLayout()[t]-s.node2.getLayout()[t]}),i.inEdges.sort(function(n,s){return n.node1.getLayout()[t]-s.node1.getLayout()[t]})}),ue(r,function(i){var n=0,s=0;ue(i.outEdges,function(u){u.setLayout({sy:n},!0),n+=u.getLayout().dy}),ue(i.inEdges,function(u){u.setLayout({ty:s},!0),s+=u.getLayout().dy})})}function rAe(r){r.eachSeriesByType("sankey",function(e){var t=e.getGraph(),i=t.nodes,n=t.edges;if(i.length){var s=1/0,u=-1/0;ue(i,function(a){var h=a.getLayout().value;h<s&&(s=h),h>u&&(u=h)}),ue(i,function(a){var h=new eo({type:"color",mappingMethod:"linear",dataExtent:[s,u],visual:e.get("color")}),p=h.mapValueToVisual(a.getLayout().value),m=a.getModel().get(["itemStyle","color"]);m!=null?(a.setVisual("color",m),a.setVisual("style",{fill:m})):(a.setVisual("color",p),a.setVisual("style",{fill:p}))})}n.length&&ue(n,function(a){var h=a.getModel().get("lineStyle");a.setVisual("style",h)})})}function iAe(r){r.registerChartView(OMe),r.registerSeriesModel(BMe),r.registerLayout(FMe),r.registerVisual(rAe),r.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(i){i.setNodePosition(e.dataIndex,[e.localX,e.localY])})})}var rZ=function(){function r(){}return r.prototype.getInitialData=function(e,t){var i,n=t.getComponent("xAxis",this.get("xAxisIndex")),s=t.getComponent("yAxis",this.get("yAxisIndex")),u=n.get("type"),a=s.get("type"),h;u==="category"?(e.layout="horizontal",i=n.getOrdinalMeta(),h=!0):a==="category"?(e.layout="vertical",i=s.getOrdinalMeta(),h=!0):e.layout=e.layout||"horizontal";var p=["x","y"],m=e.layout==="horizontal"?0:1,v=this._baseAxisDim=p[m],x=p[1-m],w=[n,s],T=w[m].get("type"),C=w[1-m].get("type"),I=e.data;if(I&&h){var k=[];ue(I,function($,j){var G;Nt($)?(G=$.slice(),$.unshift(j)):Nt($.value)?(G=kt({},$),G.value=G.value.slice(),$.value.unshift(j)):G=$,k.push(G)}),e.data=k}var R=this.defaultValueDimensions,z=[{name:v,type:$S(T),ordinalMeta:i,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:x,type:$S(C),dimsDef:R.slice()}];return $v(this,{coordDimensions:z,dimensionsCount:R.length+1,encodeDefaulter:Qr(AW,z,this)})},r.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},r}(),iZ=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],t.visualDrawType="stroke",t}return e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(Gn);pa(iZ,rZ,!0);var nAe=iZ,aAe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n){var s=t.getData(),u=this.group,a=this._data;this._data||u.removeAll();var h=t.get("layout")==="horizontal"?1:0;s.diff(a).add(function(p){if(s.hasValue(p)){var m=s.getItemLayout(p),v=Y$(m,s,p,h,!0);s.setItemGraphicEl(p,v),u.add(v)}}).update(function(p,m){var v=a.getItemGraphicEl(m);if(!s.hasValue(p)){u.remove(v);return}var x=s.getItemLayout(p);v?(nu(v),nZ(x,v,s,p)):v=Y$(x,s,p,h),u.add(v),s.setItemGraphicEl(p,v)}).remove(function(p){var m=a.getItemGraphicEl(p);m&&u.remove(m)}).execute(),this._data=s},e.prototype.remove=function(t){var i=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(s){s&&i.remove(s)})},e.type="boxplot",e}(Cn),oAe=function(){function r(){}return r}(),sAe=function(r){lt(e,r);function e(t){var i=r.call(this,t)||this;return i.type="boxplotBoxPath",i}return e.prototype.getDefaultShape=function(){return new oAe},e.prototype.buildPath=function(t,i){var n=i.points,s=0;for(t.moveTo(n[s][0],n[s][1]),s++;s<4;s++)t.lineTo(n[s][0],n[s][1]);for(t.closePath();s<n.length;s++)t.moveTo(n[s][0],n[s][1]),s++,t.lineTo(n[s][0],n[s][1])},e}(_i);function Y$(r,e,t,i,n){var s=r.ends,u=new sAe({shape:{points:n?lAe(s,i,r):s}});return nZ(r,u,e,t,n),u}function nZ(r,e,t,i,n){var s=t.hostModel,u=em[n?"initProps":"updateProps"];u(e,{shape:{points:r.ends}},s,i),e.useStyle(t.getItemVisual(i,"style")),e.style.strokeNoScale=!0,e.z2=100;var a=t.getItemModel(i),h=a.getModel("emphasis");to(e,a),Kn(e,h.get("focus"),h.get("blurScope"),h.get("disabled"))}function lAe(r,e,t){return Ht(r,function(i){return i=i.slice(),i[e]=t.initBaseline,i})}var uAe=aAe,C0=ue;function cAe(r){var e=hAe(r);C0(e,function(t){var i=t.seriesModels;!i.length||(dAe(t),C0(i,function(n,s){fAe(n,t.boxOffsetList[s],t.boxWidthList[s])}))})}function hAe(r){var e=[],t=[];return r.eachSeriesByType("boxplot",function(i){var n=i.getBaseAxis(),s=di(t,n);s<0&&(s=t.length,t[s]=n,e[s]={axis:n,seriesModels:[]}),e[s].seriesModels.push(i)}),e}function dAe(r){var e=r.axis,t=r.seriesModels,i=t.length,n=r.boxWidthList=[],s=r.boxOffsetList=[],u=[],a;if(e.type==="category")a=e.getBandWidth();else{var h=0;C0(t,function(T){h=Math.max(h,T.getData().count())});var p=e.getExtent();a=Math.abs(p[1]-p[0])/h}C0(t,function(T){var C=T.get("boxWidth");Nt(C)||(C=[C,C]),u.push([sr(C[0],a)||0,sr(C[1],a)||0])});var m=a*.8-2,v=m/i*.3,x=(m-v*(i-1))/i,w=x/2-m/2;C0(t,function(T,C){s.push(w),w+=v+x,n.push(Math.min(Math.max(x,u[C][0]),u[C][1]))})}function fAe(r,e,t){var i=r.coordinateSystem,n=r.getData(),s=t/2,u=r.get("layout")==="horizontal"?0:1,a=1-u,h=["x","y"],p=n.mapDimension(h[u]),m=n.mapDimensionsAll(h[a]);if(p==null||m.length<5)return;for(var v=0;v<n.count();v++){var x=n.get(p,v),w=z(x,m[2],v),T=z(x,m[0],v),C=z(x,m[1],v),I=z(x,m[3],v),k=z(x,m[4],v),R=[];$(R,C,!1),$(R,I,!0),R.push(T,C,k,I),j(R,T),j(R,k),j(R,w),n.setItemLayout(v,{initBaseline:w[a],ends:R})}function z(G,Y,Z){var H=n.get(Y,Z),re=[];re[u]=G,re[a]=H;var ne;return isNaN(G)||isNaN(H)?ne=[NaN,NaN]:(ne=i.dataToPoint(re),ne[u]+=e),ne}function $(G,Y,Z){var H=Y.slice(),re=Y.slice();H[u]+=s,re[u]-=s,Z?G.push(H,re):G.push(re,H)}function j(G,Y){var Z=Y.slice(),H=Y.slice();Z[u]-=s,H[u]+=s,G.push(Z,H)}}function pAe(r,e){e=e||{};for(var t=[],i=[],n=e.boundIQR,s=n==="none"||n===0,u=0;u<r.length;u++){var a=pl(r[u].slice()),h=dC(a,.25),p=dC(a,.5),m=dC(a,.75),v=a[0],x=a[a.length-1],w=(n==null?1.5:n)*(m-h),T=s?v:Math.max(v,h-w),C=s?x:Math.min(x,m+w),I=e.itemNameFormatter,k=kr(I)?I({value:u}):gr(I)?I.replace("{value}",u+""):u+"";t.push([k,T,h,p,m,C]);for(var R=0;R<a.length;R++){var z=a[R];if(z<T||z>C){var $=[k,z];i.push($)}}}return{boxData:t,outliers:i}}var mAe={type:"echarts:boxplot",transform:function(e){var t=e.upstream;if(t.sourceFormat!==To){var i="";Qi(i)}var n=pAe(t.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};function gAe(r){r.registerSeriesModel(nAe),r.registerChartView(uAe),r.registerLayout(cAe),r.registerTransform(mAe)}var vAe=["color","borderColor"],_Ae=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,i,n){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,i,n,s){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,i):this._incrementalRenderNormal(t,i)},e.prototype.eachRendered=function(t){Hd(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var i=t.pipelineContext.large;(this._isLargeDraw==null||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},e.prototype._renderNormal=function(t){var i=t.getData(),n=this._data,s=this.group,u=i.getLayout("isSimpleBox"),a=t.get("clip",!0),h=t.coordinateSystem,p=h.getArea&&h.getArea();this._data||s.removeAll(),i.diff(n).add(function(m){if(i.hasValue(m)){var v=i.getItemLayout(m);if(a&&K$(p,v))return;var x=FI(v,m,!0);Bn(x,{shape:{points:v.ends}},t,m),NI(x,i,m,u),s.add(x),i.setItemGraphicEl(m,x)}}).update(function(m,v){var x=n.getItemGraphicEl(v);if(!i.hasValue(m)){s.remove(x);return}var w=i.getItemLayout(m);if(a&&K$(p,w)){s.remove(x);return}x?(ji(x,{shape:{points:w.ends}},t,m),nu(x)):x=FI(w),NI(x,i,m,u),s.add(x),i.setItemGraphicEl(m,x)}).remove(function(m){var v=n.getItemGraphicEl(m);v&&s.remove(v)}).execute(),this._data=i},e.prototype._renderLarge=function(t){this._clear(),J$(t,this.group);var i=t.get("clip",!0)?Cx(t.coordinateSystem,!1,t):null;i?this.group.setClipPath(i):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,i){for(var n=i.getData(),s=n.getLayout("isSimpleBox"),u;(u=t.next())!=null;){var a=n.getItemLayout(u),h=FI(a);NI(h,n,u,s),h.incremental=!0,this.group.add(h),this._progressiveEls.push(h)}},e.prototype._incrementalRenderLarge=function(t,i){J$(i,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(Cn),yAe=function(){function r(){}return r}(),xAe=function(r){lt(e,r);function e(t){var i=r.call(this,t)||this;return i.type="normalCandlestickBox",i}return e.prototype.getDefaultShape=function(){return new yAe},e.prototype.buildPath=function(t,i){var n=i.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))},e}(_i);function FI(r,e,t){var i=r.ends;return new xAe({shape:{points:t?bAe(i,r):i},z2:100})}function K$(r,e){for(var t=!0,i=0;i<e.ends.length;i++)if(r.contain(e.ends[i][0],e.ends[i][1])){t=!1;break}return t}function NI(r,e,t,i){var n=e.getItemModel(t);r.useStyle(e.getItemVisual(t,"style")),r.style.strokeNoScale=!0,r.__simpleBox=i,to(r,n)}function bAe(r,e){return Ht(r,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}var wAe=function(){function r(){}return r}(),VI=function(r){lt(e,r);function e(t){var i=r.call(this,t)||this;return i.type="largeCandlestickBox",i}return e.prototype.getDefaultShape=function(){return new wAe},e.prototype.buildPath=function(t,i){for(var n=i.points,s=0;s<n.length;)if(this.__sign===n[s++]){var u=n[s++];t.moveTo(u,n[s++]),t.lineTo(u,n[s++])}else s+=3},e}(_i);function J$(r,e,t,i){var n=r.getData(),s=n.getLayout("largePoints"),u=new VI({shape:{points:s},__sign:1,ignoreCoarsePointer:!0});e.add(u);var a=new VI({shape:{points:s},__sign:-1,ignoreCoarsePointer:!0});e.add(a);var h=new VI({shape:{points:s},__sign:0,ignoreCoarsePointer:!0});e.add(h),$I(1,u,r),$I(-1,a,r),$I(0,h,r),i&&(u.incremental=!0,a.incremental=!0),t&&t.push(u,a)}function $I(r,e,t,i){var n=t.get(["itemStyle",r>0?"borderColor":"borderColor0"])||t.get(["itemStyle",r>0?"color":"color0"]);r===0&&(n=t.get(["itemStyle","borderColorDoji"]));var s=t.getModel("itemStyle").getItemStyle(vAe);e.useStyle(s),e.style.fill=null,e.style.stroke=n}var SAe=_Ae,aZ=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,i,n){var s=i.getItemLayout(t);return s&&n.rect(s.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(Gn);pa(aZ,rZ,!0);var TAe=aZ;function MAe(r){!r||!Nt(r.series)||ue(r.series,function(e){Br(e)&&e.type==="k"&&(e.type="candlestick")})}var AAe=["itemStyle","borderColor"],CAe=["itemStyle","borderColor0"],IAe=["itemStyle","borderColorDoji"],EAe=["itemStyle","color"],DAe=["itemStyle","color0"],PAe={seriesType:"candlestick",plan:Fv(),performRawSeries:!0,reset:function(r,e){function t(s,u){return u.get(s>0?EAe:DAe)}function i(s,u){return u.get(s===0?IAe:s>0?AAe:CAe)}if(!e.isSeriesFiltered(r)){var n=r.pipelineContext.large;return!n&&{progress:function(s,u){for(var a;(a=s.next())!=null;){var h=u.getItemModel(a),p=u.getItemLayout(a).sign,m=h.getItemStyle();m.fill=t(p,h),m.stroke=i(p,h)||m.fill;var v=u.ensureUniqueItemVisual(a,"style");kt(v,m)}}}}}},LAe=PAe,kAe={seriesType:"candlestick",plan:Fv(),reset:function(r){var e=r.coordinateSystem,t=r.getData(),i=RAe(r,t),n=0,s=1,u=["x","y"],a=t.getDimensionIndex(t.mapDimension(u[n])),h=Ht(t.mapDimensionsAll(u[s]),t.getDimensionIndex,t),p=h[0],m=h[1],v=h[2],x=h[3];if(t.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),a<0||h.length<4)return;return{progress:r.pipelineContext.large?T:w};function w(C,I){for(var k,R=I.getStore();(k=C.next())!=null;){var z=R.get(a,k),$=R.get(p,k),j=R.get(m,k),G=R.get(v,k),Y=R.get(x,k),Z=Math.min($,j),H=Math.max($,j),re=Fe(Z,z),ne=Fe(H,z),se=Fe(G,z),me=Fe(Y,z),Se=[];Ce(Se,ne,0),Ce(Se,re,1),Se.push(gt(me),gt(ne),gt(se),gt(re));var Ie=I.getItemModel(k),ke=!!Ie.get(["itemStyle","borderColorDoji"]);I.setItemLayout(k,{sign:Q$(R,k,$,j,m,ke),initBaseline:$>j?ne[s]:re[s],ends:Se,brushRect:We(G,Y,z)})}function Fe(St,et){var ht=[];return ht[n]=et,ht[s]=St,isNaN(et)||isNaN(St)?[NaN,NaN]:e.dataToPoint(ht)}function Ce(St,et,ht){var $e=et.slice(),He=et.slice();$e[n]=Jw($e[n]+i/2,1,!1),He[n]=Jw(He[n]-i/2,1,!0),ht?St.push($e,He):St.push(He,$e)}function We(St,et,ht){var $e=Fe(St,ht),He=Fe(et,ht);return $e[n]-=i/2,He[n]-=i/2,{x:$e[0],y:$e[1],width:i,height:He[1]-$e[1]}}function gt(St){return St[n]=Jw(St[n],1),St}}function T(C,I){for(var k=Xu(C.count*4),R=0,z,$=[],j=[],G,Y=I.getStore(),Z=!!r.get(["itemStyle","borderColorDoji"]);(G=C.next())!=null;){var H=Y.get(a,G),re=Y.get(p,G),ne=Y.get(m,G),se=Y.get(v,G),me=Y.get(x,G);if(isNaN(H)||isNaN(se)||isNaN(me)){k[R++]=NaN,R+=3;continue}k[R++]=Q$(Y,G,re,ne,m,Z),$[n]=H,$[s]=se,z=e.dataToPoint($,null,j),k[R++]=z?z[0]:NaN,k[R++]=z?z[1]:NaN,$[s]=me,z=e.dataToPoint($,null,j),k[R++]=z?z[1]:NaN}I.setLayout("largePoints",k)}}};function Q$(r,e,t,i,n,s){var u;return t>i?u=-1:t<i?u=1:u=s?0:e>0?r.get(n,e-1)<=i?1:-1:1,u}function RAe(r,e){var t=r.getBaseAxis(),i,n=t.type==="category"?t.getBandWidth():(i=t.getExtent(),Math.abs(i[1]-i[0])/e.count()),s=sr(Yr(r.get("barMaxWidth"),n),n),u=sr(Yr(r.get("barMinWidth"),1),n),a=r.get("barWidth");return a!=null?sr(a,n):Math.max(Math.min(n/2,s),u)}var OAe=kAe;function zAe(r){r.registerChartView(SAe),r.registerSeriesModel(TAe),r.registerPreprocessor(MAe),r.registerVisual(LAe),r.registerLayout(OAe)}function e6(r,e){var t=e.rippleEffectColor||e.color;r.eachChild(function(i){i.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?t:null,fill:e.brushType==="fill"?t:null}})})}var BAe=function(r){lt(e,r);function e(t,i){var n=r.call(this)||this,s=new Mx(t,i),u=new Vr;return n.add(s),n.add(u),n.updateData(t,i),n}return e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var i=t.symbolType,n=t.color,s=t.rippleNumber,u=this.childAt(1),a=0;a<s;a++){var h=fa(i,-1,-1,2,2,n);h.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var p=-a/s*t.period+t.effectOffset;h.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(p).start(),h.animateStyle(!0).when(t.period,{opacity:0}).delay(p).start(),u.add(h)}e6(u,t)},e.prototype.updateEffectAnimation=function(t){for(var i=this._effectCfg,n=this.childAt(1),s=["symbolType","period","rippleScale","rippleNumber"],u=0;u<s.length;u++){var a=s[u];if(i[a]!==t[a]){this.stopEffectAnimation(),this.startEffectAnimation(t);return}}e6(n,t)},e.prototype.highlight=function(){lh(this)},e.prototype.downplay=function(){uh(this)},e.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},e.prototype.updateData=function(t,i){var n=this,s=t.hostModel;this.childAt(0).updateData(t,i);var u=this.childAt(1),a=t.getItemModel(i),h=t.getItemVisual(i,"symbol"),p=Vv(t.getItemVisual(i,"symbolSize")),m=t.getItemVisual(i,"style"),v=m&&m.fill,x=a.getModel("emphasis");u.setScale(p),u.traverse(function(I){I.setStyle("fill",v)});var w=rm(t.getItemVisual(i,"symbolOffset"),p);w&&(u.x=w[0],u.y=w[1]);var T=t.getItemVisual(i,"symbolRotate");u.rotation=(T||0)*Math.PI/180||0;var C={};C.showEffectOn=s.get("showEffectOn"),C.rippleScale=a.get(["rippleEffect","scale"]),C.brushType=a.get(["rippleEffect","brushType"]),C.period=a.get(["rippleEffect","period"])*1e3,C.effectOffset=i/t.count(),C.z=s.getShallow("z")||0,C.zlevel=s.getShallow("zlevel")||0,C.symbolType=h,C.color=v,C.rippleEffectColor=a.get(["rippleEffect","color"]),C.rippleNumber=a.get(["rippleEffect","number"]),C.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(C):this.startEffectAnimation(C),this._effectCfg=C):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(I){I==="emphasis"?C.showEffectOn!=="render"&&n.startEffectAnimation(C):I==="normal"&&C.showEffectOn!=="render"&&n.stopEffectAnimation()}),this._effectCfg=C,Kn(this,x.get("focus"),x.get("blurScope"),x.get("disabled"))},e.prototype.fadeOut=function(t){t&&t()},e}(Vr),FAe=BAe,NAe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._symbolDraw=new Ax(FAe)},e.prototype.render=function(t,i,n){var s=t.getData(),u=this._symbolDraw;u.updateData(s,{clipShape:this._getClipShape(t)}),this.group.add(u.group)},e.prototype._getClipShape=function(t){var i=t.coordinateSystem,n=i&&i.getArea&&i.getArea();return t.get("clip",!0)?n:null},e.prototype.updateTransform=function(t,i,n){var s=t.getData();this.group.dirty();var u=Ix("").reset(t,i,n);u.progress&&u.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var i=t.coordinateSystem;i&&i.getRoamTransform&&(this.group.transform=pfe(i.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(t,i){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(Cn),VAe=NAe,$Ae=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,i){return gh(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,i,n){return n.point(i.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(Gn),GAe=$Ae;function UAe(r){r.registerChartView(VAe),r.registerSeriesModel(GAe),r.registerLayout(Ix("effectScatter"))}var jAe=function(r){lt(e,r);function e(t,i,n){var s=r.call(this)||this;return s.add(s.createLine(t,i,n)),s._updateEffectSymbol(t,i),s}return e.prototype.createLine=function(t,i,n){return new Gk(t,i,n)},e.prototype._updateEffectSymbol=function(t,i){var n=t.getItemModel(i),s=n.getModel("effect"),u=s.get("symbolSize"),a=s.get("symbol");Nt(u)||(u=[u,u]);var h=t.getItemVisual(i,"style"),p=s.get("color")||h&&h.stroke,m=this.childAt(1);this._symbolType!==a&&(this.remove(m),m=fa(a,-.5,-.5,1,1,p),m.z2=100,m.culling=!0,this.add(m)),m&&(m.setStyle("shadowColor",p),m.setStyle(s.getItemStyle(["color"])),m.scaleX=u[0],m.scaleY=u[1],m.setColor(p),this._symbolType=a,this._symbolScale=u,this._updateEffectAnimation(t,s,i))},e.prototype._updateEffectAnimation=function(t,i,n){var s=this.childAt(1);if(!!s){var u=t.getItemLayout(n),a=i.get("period")*1e3,h=i.get("loop"),p=i.get("roundTrip"),m=i.get("constantSpeed"),v=Ga(i.get("delay"),function(w){return w/t.count()*a/3});if(s.ignore=!0,this._updateAnimationPoints(s,u),m>0&&(a=this._getLineLength(s)/m*1e3),a!==this._period||h!==this._loop||p!==this._roundTrip){s.stopAnimation();var x=void 0;kr(v)?x=v(n):x=v,s.__t>0&&(x=-a*s.__t),this._animateSymbol(s,a,x,h,p)}this._period=a,this._loop=h,this._roundTrip=p}},e.prototype._animateSymbol=function(t,i,n,s,u){if(i>0){t.__t=0;var a=this,h=t.animate("",s).when(u?i*2:i,{__t:u?2:1}).delay(n).during(function(){a._updateSymbolPosition(t)});s||h.done(function(){a.remove(t)}),h.start()}},e.prototype._getLineLength=function(t){return md(t.__p1,t.__cp1)+md(t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,i){t.__p1=i[0],t.__p2=i[1],t.__cp1=i[2]||[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]},e.prototype.updateData=function(t,i,n){this.childAt(0).updateData(t,i,n),this._updateEffectSymbol(t,i)},e.prototype._updateSymbolPosition=function(t){var i=t.__p1,n=t.__p2,s=t.__cp1,u=t.__t<1?t.__t:2-t.__t,a=[t.x,t.y],h=a.slice(),p=Va,m=XE;a[0]=p(i[0],s[0],n[0],u),a[1]=p(i[1],s[1],n[1],u);var v=t.__t<1?m(i[0],s[0],n[0],u):m(n[0],s[0],i[0],1-u),x=t.__t<1?m(i[1],s[1],n[1],u):m(n[1],s[1],i[1],1-u);t.rotation=-Math.atan2(x,v)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(t.__lastT!==void 0&&t.__lastT<t.__t?(t.scaleY=md(h,a)*1.05,u===1&&(a[0]=h[0]+(a[0]-h[0])/2,a[1]=h[1]+(a[1]-h[1])/2)):t.__lastT===1?t.scaleY=2*md(i,a):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=a[0],t.y=a[1]},e.prototype.updateLayout=function(t,i){this.childAt(0).updateLayout(t,i);var n=t.getItemModel(i).getModel("effect");this._updateEffectAnimation(t,n,i)},e}(Vr),oZ=jAe,HAe=function(r){lt(e,r);function e(t,i,n){var s=r.call(this)||this;return s._createPolyline(t,i,n),s}return e.prototype._createPolyline=function(t,i,n){var s=t.getItemLayout(i),u=new ds({shape:{points:s}});this.add(u),this._updateCommonStl(t,i,n)},e.prototype.updateData=function(t,i,n){var s=t.hostModel,u=this.childAt(0),a={shape:{points:t.getItemLayout(i)}};ji(u,a,s,i),this._updateCommonStl(t,i,n)},e.prototype._updateCommonStl=function(t,i,n){var s=this.childAt(0),u=t.getItemModel(i),a=n&&n.emphasisLineStyle,h=n&&n.focus,p=n&&n.blurScope,m=n&&n.emphasisDisabled;if(!n||t.hasItemOption){var v=u.getModel("emphasis");a=v.getModel("lineStyle").getLineStyle(),m=v.get("disabled"),h=v.get("focus"),p=v.get("blurScope")}s.useStyle(t.getItemVisual(i,"style")),s.style.fill=null,s.style.strokeNoScale=!0;var x=s.ensureState("emphasis");x.style=a,Kn(this,h,p,m)},e.prototype.updateLayout=function(t,i){var n=this.childAt(0);n.setShape("points",t.getItemLayout(i))},e}(Vr),sZ=HAe,WAe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return e.prototype.createLine=function(t,i,n){return new sZ(t,i,n)},e.prototype._updateAnimationPoints=function(t,i){this._points=i;for(var n=[0],s=0,u=1;u<i.length;u++){var a=i[u-1],h=i[u];s+=md(a,h),n.push(s)}if(s===0){this._length=0;return}for(var u=0;u<n.length;u++)n[u]/=s;this._offsets=n,this._length=s},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var i=t.__t<1?t.__t:2-t.__t,n=this._points,s=this._offsets,u=n.length;if(!!s){var a=this._lastFrame,h;if(i<this._lastFramePercent){var p=Math.min(a+1,u-1);for(h=p;h>=0&&!(s[h]<=i);h--);h=Math.min(h,u-2)}else{for(h=a;h<u&&!(s[h]>i);h++);h=Math.min(h-1,u-2)}var m=(i-s[h])/(s[h+1]-s[h]),v=n[h],x=n[h+1];t.x=v[0]*(1-m)+m*x[0],t.y=v[1]*(1-m)+m*x[1];var w=t.__t<1?x[0]-v[0]:v[0]-x[0],T=t.__t<1?x[1]-v[1]:v[1]-x[1];t.rotation=-Math.atan2(T,w)-Math.PI/2,this._lastFrame=h,this._lastFramePercent=i,t.ignore=!1}},e}(oZ),qAe=WAe,ZAe=function(){function r(){this.polyline=!1,this.curveness=0,this.segs=[]}return r}(),XAe=function(r){lt(e,r);function e(t){var i=r.call(this,t)||this;return i._off=0,i.hoverDataIdx=-1,i}return e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new ZAe},e.prototype.buildPath=function(t,i){var n=i.segs,s=i.curveness,u;if(i.polyline)for(u=this._off;u<n.length;){var a=n[u++];if(a>0){t.moveTo(n[u++],n[u++]);for(var h=1;h<a;h++)t.lineTo(n[u++],n[u++])}}else for(u=this._off;u<n.length;){var p=n[u++],m=n[u++],v=n[u++],x=n[u++];if(t.moveTo(p,m),s>0){var w=(p+v)/2-(m-x)*s,T=(m+x)/2-(v-p)*s;t.quadraticCurveTo(w,T,v,x)}else t.lineTo(v,x)}this.incremental&&(this._off=u,this.notClear=!0)},e.prototype.findDataIndex=function(t,i){var n=this.shape,s=n.segs,u=n.curveness,a=this.style.lineWidth;if(n.polyline)for(var h=0,p=0;p<s.length;){var m=s[p++];if(m>0)for(var v=s[p++],x=s[p++],w=1;w<m;w++){var T=s[p++],C=s[p++];if(fd(v,x,T,C,a,t,i))return h}h++}else for(var h=0,p=0;p<s.length;){var v=s[p++],x=s[p++],T=s[p++],C=s[p++];if(u>0){var I=(v+T)/2-(x-C)*u,k=(x+C)/2-(T-v)*u;if(fH(v,x,I,k,T,C,a,t,i))return h}else if(fd(v,x,T,C,a,t,i))return h;h++}return-1},e.prototype.contain=function(t,i){var n=this.transformCoordToLocal(t,i),s=this.getBoundingRect();if(t=n[0],i=n[1],s.contain(t,i)){var u=this.hoverDataIdx=this.findDataIndex(t,i);return u>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var i=this.shape,n=i.segs,s=1/0,u=1/0,a=-1/0,h=-1/0,p=0;p<n.length;){var m=n[p++],v=n[p++];s=Math.min(m,s),a=Math.max(m,a),u=Math.min(v,u),h=Math.max(v,h)}t=this._rect=new ai(s,u,a,h)}return t},e}(_i),YAe=function(){function r(){this.group=new Vr}return r.prototype.updateData=function(e){this._clear();var t=this._create();t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e)},r.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},r.prototype.incrementalUpdate=function(e,t){var i=this._newAdded[0],n=t.getLayout("linesPoints"),s=i&&i.shape.segs;if(s&&s.length<2e4){var u=s.length,a=new Float32Array(u+n.length);a.set(s),a.set(n,u),i.setShape({segs:a})}else{this._newAdded=[];var h=this._create();h.incremental=!0,h.setShape({segs:n}),this._setCommon(h,t),h.__startIndex=e.start}},r.prototype.remove=function(){this._clear()},r.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},r.prototype._create=function(){var e=new XAe({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},r.prototype._setCommon=function(e,t,i){var n=t.hostModel;e.setShape({polyline:n.get("polyline"),curveness:n.get(["lineStyle","curveness"])}),e.useStyle(n.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var s=t.getVisual("style");s&&s.stroke&&e.setStyle("stroke",s.stroke),e.setStyle("fill",null);var u=Gr(e);u.seriesIndex=n.seriesIndex,e.on("mousemove",function(a){u.dataIndex=null;var h=e.hoverDataIdx;h>0&&(u.dataIndex=h+e.__startIndex)})},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}(),KAe=YAe,JAe={seriesType:"lines",plan:Fv(),reset:function(r){var e=r.coordinateSystem;if(!!e){var t=r.get("polyline"),i=r.pipelineContext.large;return{progress:function(n,s){var u=[];if(i){var a=void 0,h=n.end-n.start;if(t){for(var p=0,m=n.start;m<n.end;m++)p+=r.getLineCoordsCount(m);a=new Float32Array(h+p*2)}else a=new Float32Array(h*4);for(var v=0,x=[],m=n.start;m<n.end;m++){var w=r.getLineCoords(m,u);t&&(a[v++]=w);for(var T=0;T<w;T++)x=e.dataToPoint(u[T],!1,x),a[v++]=x[0],a[v++]=x[1]}s.setLayout("linesPoints",a)}else for(var m=n.start;m<n.end;m++){var C=s.getItemModel(m),w=r.getLineCoords(m,u),I=[];if(t)for(var k=0;k<w;k++)I.push(e.dataToPoint(u[k]));else{I[0]=e.dataToPoint(u[0]),I[1]=e.dataToPoint(u[1]);var R=C.get(["lineStyle","curveness"]);+R&&(I[2]=[(I[0][0]+I[1][0])/2-(I[0][1]-I[1][1])*R,(I[0][1]+I[1][1])/2-(I[1][0]-I[0][0])*R])}s.setItemLayout(m,I)}}}}}},lZ=JAe,QAe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n){var s=t.getData(),u=this._updateLineDraw(s,t),a=t.get("zlevel"),h=t.get(["effect","trailLength"]),p=n.getZr(),m=p.painter.getType()==="svg";m||p.painter.getLayer(a).clear(!0),this._lastZlevel!=null&&!m&&p.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&h>0&&(m||p.configLayer(a,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(h/10+.9,1),0)})),u.updateData(s);var v=t.get("clip",!0)&&Cx(t.coordinateSystem,!1,t);v?this.group.setClipPath(v):this.group.removeClipPath(),this._lastZlevel=a,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,i,n){var s=t.getData(),u=this._updateLineDraw(s,t);u.incrementalPrepareUpdate(s),this._clearLayer(n),this._finished=!1},e.prototype.incrementalRender=function(t,i,n){this._lineDraw.incrementalUpdate(t,i.getData()),this._finished=t.end===i.getData().count()},e.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},e.prototype.updateTransform=function(t,i,n){var s=t.getData(),u=t.pipelineContext;if(!this._finished||u.large||u.progressiveRender)return{update:!0};var a=lZ.reset(t,i,n);a.progress&&a.progress({start:0,end:s.count(),count:s.count()},s),this._lineDraw.updateLayout(),this._clearLayer(n)},e.prototype._updateLineDraw=function(t,i){var n=this._lineDraw,s=this._showEffect(i),u=!!i.get("polyline"),a=i.pipelineContext,h=a.large;return(!n||s!==this._hasEffet||u!==this._isPolyline||h!==this._isLargeDraw)&&(n&&n.remove(),n=this._lineDraw=h?new KAe:new Uk(u?s?qAe:sZ:s?oZ:Gk),this._hasEffet=s,this._isPolyline=u,this._isLargeDraw=h),this.group.add(n.group),n},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var i=t.getZr(),n=i.painter.getType()==="svg";!n&&this._lastZlevel!=null&&i.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,i){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(i)},e.prototype.dispose=function(t,i){this.remove(t,i)},e.type="lines",e}(Cn),eCe=QAe,tCe=typeof Uint32Array=="undefined"?Array:Uint32Array,rCe=typeof Float64Array=="undefined"?Array:Float64Array;function t6(r){var e=r.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(r.data=Ht(e,function(t){var i=[t[0].coord,t[1].coord],n={coords:i};return t[0].name&&(n.fromName=t[0].name),t[1].name&&(n.toName=t[1].name),gL([n,t[0],t[1]])}))}var iCe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.init=function(t){t.data=t.data||[],t6(t);var i=this._processFlatCoordsArray(t.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(t.data=new Float32Array(i.count)),r.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(t){if(t6(t),t.data){var i=this._processFlatCoordsArray(t.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(t.data=new Float32Array(i.count))}r.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var i=this._processFlatCoordsArray(t.data);i.flatCoords&&(this._flatCoords?(this._flatCoords=_S(this._flatCoords,i.flatCoords),this._flatCoordsOffset=_S(this._flatCoordsOffset,i.flatCoordsOffset)):(this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset),t.data=new Float32Array(i.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var i=this.getData().getItemModel(t),n=i.option instanceof Array?i.option:i.getShallow("coords");return n},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[t*2+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,i){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[t*2],s=this._flatCoordsOffset[t*2+1],u=0;u<s;u++)i[u]=i[u]||[],i[u][0]=this._flatCoords[n+u*2],i[u][1]=this._flatCoords[n+u*2+1];return s}else{for(var a=this._getCoordsFromItemModel(t),u=0;u<a.length;u++)i[u]=i[u]||[],i[u][0]=a[u][0],i[u][1]=a[u][1];return a.length}},e.prototype._processFlatCoordsArray=function(t){var i=0;if(this._flatCoords&&(i=this._flatCoords.length),Vi(t[0])){for(var n=t.length,s=new tCe(n),u=new rCe(n),a=0,h=0,p=0,m=0;m<n;){p++;var v=t[m++];s[h++]=a+i,s[h++]=v;for(var x=0;x<v;x++){var w=t[m++],T=t[m++];u[a++]=w,u[a++]=T}}return{flatCoordsOffset:new Uint32Array(s.buffer,0,h),flatCoords:u,count:p}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,i){var n=new No(["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],function(s,u,a,h){if(s instanceof Array)return NaN;n.hasItemOption=!0;var p=s.value;if(p!=null)return p instanceof Array?p[h]:p}),n},e.prototype.formatTooltip=function(t,i,n){var s=this.getData(),u=s.getItemModel(t),a=u.get("name");if(a)return a;var h=u.get("fromName"),p=u.get("toName"),m=[];return h!=null&&m.push(h),p!=null&&m.push(p),Oa("nameValue",{name:m.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return t==null?this.option.large?1e4:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t==null?this.option.large?2e4:this.get("progressiveThreshold"):t},e.prototype.getZLevelKey=function(){var t=this.getModel("effect"),i=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&i>0?i+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(Gn),nCe=iCe;function Mw(r){return r instanceof Array||(r=[r,r]),r}var aCe={seriesType:"lines",reset:function(r){var e=Mw(r.get("symbol")),t=Mw(r.get("symbolSize")),i=r.getData();i.setVisual("fromSymbol",e&&e[0]),i.setVisual("toSymbol",e&&e[1]),i.setVisual("fromSymbolSize",t&&t[0]),i.setVisual("toSymbolSize",t&&t[1]);function n(s,u){var a=s.getItemModel(u),h=Mw(a.getShallow("symbol",!0)),p=Mw(a.getShallow("symbolSize",!0));h[0]&&s.setItemVisual(u,"fromSymbol",h[0]),h[1]&&s.setItemVisual(u,"toSymbol",h[1]),p[0]&&s.setItemVisual(u,"fromSymbolSize",p[0]),p[1]&&s.setItemVisual(u,"toSymbolSize",p[1])}return{dataEach:i.hasItemOption?n:null}}},oCe=aCe;function sCe(r){r.registerChartView(eCe),r.registerSeriesModel(nCe),r.registerLayout(lZ),r.registerVisual(oCe)}var lCe=256,uCe=function(){function r(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=ah.createCanvas();this.canvas=e}return r.prototype.update=function(e,t,i,n,s,u){var a=this._getBrush(),h=this._getGradient(s,"inRange"),p=this._getGradient(s,"outOfRange"),m=this.pointSize+this.blurSize,v=this.canvas,x=v.getContext("2d"),w=e.length;v.width=t,v.height=i;for(var T=0;T<w;++T){var C=e[T],I=C[0],k=C[1],R=C[2],z=n(R);x.globalAlpha=z,x.drawImage(a,I-m,k-m)}if(!v.width||!v.height)return v;for(var $=x.getImageData(0,0,v.width,v.height),j=$.data,G=0,Y=j.length,Z=this.minOpacity,H=this.maxOpacity,re=H-Z;G<Y;){var z=j[G+3]/256,ne=Math.floor(z*(lCe-1))*4;if(z>0){var se=u(z)?h:p;z>0&&(z=z*re+Z),j[G++]=se[ne],j[G++]=se[ne+1],j[G++]=se[ne+2],j[G++]=se[ne+3]*z*256}else G+=4}return x.putImageData($,0,0),v},r.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=ah.createCanvas()),t=this.pointSize+this.blurSize,i=t*2;e.width=i,e.height=i;var n=e.getContext("2d");return n.clearRect(0,0,i,i),n.shadowOffsetX=i,n.shadowBlur=this.blurSize,n.shadowColor="#000",n.beginPath(),n.arc(-t,t,this.pointSize,0,Math.PI*2,!0),n.closePath(),n.fill(),e},r.prototype._getGradient=function(e,t){for(var i=this._gradientPixels,n=i[t]||(i[t]=new Uint8ClampedArray(256*4)),s=[0,0,0,0],u=0,a=0;a<256;a++)e[t](a/255,!0,s),n[u++]=s[0],n[u++]=s[1],n[u++]=s[2],n[u++]=s[3];return n},r}(),cCe=uCe;function hCe(r,e,t){var i=r[1]-r[0];e=Ht(e,function(u){return{interval:[(u.interval[0]-r[0])/i,(u.interval[1]-r[0])/i]}});var n=e.length,s=0;return function(u){var a;for(a=s;a<n;a++){var h=e[a].interval;if(h[0]<=u&&u<=h[1]){s=a;break}}if(a===n)for(a=s-1;a>=0;a--){var h=e[a].interval;if(h[0]<=u&&u<=h[1]){s=a;break}}return a>=0&&a<n&&t[a]}}function dCe(r,e){var t=r[1]-r[0];return e=[(e[0]-r[0])/t,(e[1]-r[0])/t],function(i){return i>=e[0]&&i<=e[1]}}function r6(r){var e=r.dimensions;return e[0]==="lng"&&e[1]==="lat"}var fCe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n){var s;i.eachComponent("visualMap",function(a){a.eachTargetSeries(function(h){h===t&&(s=a)})}),this._progressiveEls=null,this.group.removeAll();var u=t.coordinateSystem;u.type==="cartesian2d"||u.type==="calendar"?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):r6(u)&&this._renderOnGeo(u,t,s,n)},e.prototype.incrementalPrepareRender=function(t,i,n){this.group.removeAll()},e.prototype.incrementalRender=function(t,i,n,s){var u=i.coordinateSystem;u&&(r6(u)?this.render(i,n,s):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(i,s,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){Hd(this._progressiveEls||this.group,t)},e.prototype._renderOnCartesianAndCalendar=function(t,i,n,s,u){var a=t.coordinateSystem,h=nm(a,"cartesian2d"),p,m,v,x;if(h){var w=a.getAxis("x"),T=a.getAxis("y");p=w.getBandWidth()+.5,m=T.getBandWidth()+.5,v=w.scale.getExtent(),x=T.scale.getExtent()}for(var C=this.group,I=t.getData(),k=t.getModel(["emphasis","itemStyle"]).getItemStyle(),R=t.getModel(["blur","itemStyle"]).getItemStyle(),z=t.getModel(["select","itemStyle"]).getItemStyle(),$=t.get(["itemStyle","borderRadius"]),j=Ra(t),G=t.getModel("emphasis"),Y=G.get("focus"),Z=G.get("blurScope"),H=G.get("disabled"),re=h?[I.mapDimension("x"),I.mapDimension("y"),I.mapDimension("value")]:[I.mapDimension("time"),I.mapDimension("value")],ne=n;ne<s;ne++){var se=void 0,me=I.getItemVisual(ne,"style");if(h){var Se=I.get(re[0],ne),Ie=I.get(re[1],ne);if(isNaN(I.get(re[2],ne))||isNaN(Se)||isNaN(Ie)||Se<v[0]||Se>v[1]||Ie<x[0]||Ie>x[1])continue;var ke=a.dataToPoint([Se,Ie]);se=new Li({shape:{x:ke[0]-p/2,y:ke[1]-m/2,width:p,height:m},style:me})}else{if(isNaN(I.get(re[1],ne)))continue;se=new Li({z2:1,shape:a.dataToRect([I.get(re[0],ne)]).contentShape,style:me})}if(I.hasItemOption){var Fe=I.getItemModel(ne),Ce=Fe.getModel("emphasis");k=Ce.getModel("itemStyle").getItemStyle(),R=Fe.getModel(["blur","itemStyle"]).getItemStyle(),z=Fe.getModel(["select","itemStyle"]).getItemStyle(),$=Fe.get(["itemStyle","borderRadius"]),Y=Ce.get("focus"),Z=Ce.get("blurScope"),H=Ce.get("disabled"),j=Ra(Fe)}se.shape.r=$;var We=t.getRawValue(ne),gt="-";We&&We[2]!=null&&(gt=We[2]+""),ro(se,j,{labelFetcher:t,labelDataIndex:ne,defaultOpacity:me.opacity,defaultText:gt}),se.ensureState("emphasis").style=k,se.ensureState("blur").style=R,se.ensureState("select").style=z,Kn(se,Y,Z,H),se.incremental=u,u&&(se.states.emphasis.hoverLayer=!0),C.add(se),I.setItemGraphicEl(ne,se),this._progressiveEls&&this._progressiveEls.push(se)}},e.prototype._renderOnGeo=function(t,i,n,s){var u=n.targetVisuals.inRange,a=n.targetVisuals.outOfRange,h=i.getData(),p=this._hmLayer||this._hmLayer||new cCe;p.blurSize=i.get("blurSize"),p.pointSize=i.get("pointSize"),p.minOpacity=i.get("minOpacity"),p.maxOpacity=i.get("maxOpacity");var m=t.getViewRect().clone(),v=t.getRoamTransform();m.applyTransform(v);var x=Math.max(m.x,0),w=Math.max(m.y,0),T=Math.min(m.width+m.x,s.getWidth()),C=Math.min(m.height+m.y,s.getHeight()),I=T-x,k=C-w,R=[h.mapDimension("lng"),h.mapDimension("lat"),h.mapDimension("value")],z=h.mapArray(R,function(Y,Z,H){var re=t.dataToPoint([Y,Z]);return re[0]-=x,re[1]-=w,re.push(H),re}),$=n.getExtent(),j=n.type==="visualMap.continuous"?dCe($,n.option.range):hCe($,n.getPieceList(),n.option.selected);p.update(z,I,k,u.color.getNormalizer(),{inRange:u.color.getColorMapper(),outOfRange:a.color.getColorMapper()},j);var G=new io({style:{width:I,height:k,x,y:w,image:p.canvas},silent:!0});this.group.add(G)},e.type="heatmap",e}(Cn),pCe=fCe,mCe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,i){return gh(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=yx.get(this.get("coordinateSystem"));if(t&&t.dimensions)return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(Gn),gCe=mCe;function vCe(r){r.registerChartView(pCe),r.registerSeriesModel(gCe)}var _Ce=["itemStyle","borderWidth"],i6=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],GI=new jd,yCe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n){var s=this.group,u=t.getData(),a=this._data,h=t.coordinateSystem,p=h.getBaseAxis(),m=p.isHorizontal(),v=h.master.getRect(),x={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:t,coordSys:h,coordSysExtent:[[v.x,v.x+v.width],[v.y,v.y+v.height]],isHorizontal:m,valueDim:i6[+m],categoryDim:i6[1-+m]};u.diff(a).add(function(T){if(!!u.hasValue(T)){var C=a6(u,T),I=n6(u,T,C,x),k=o6(u,x,I);u.setItemGraphicEl(T,k),s.add(k),l6(k,x,I)}}).update(function(T,C){var I=a.getItemGraphicEl(C);if(!u.hasValue(T)){s.remove(I);return}var k=a6(u,T),R=n6(u,T,k,x),z=pZ(u,R);I&&z!==I.__pictorialShapeStr&&(s.remove(I),u.setItemGraphicEl(T,null),I=null),I?ACe(I,x,R):I=o6(u,x,R,!0),u.setItemGraphicEl(T,I),I.__pictorialSymbolMeta=R,s.add(I),l6(I,x,R)}).remove(function(T){var C=a.getItemGraphicEl(T);C&&s6(a,T,C.__pictorialSymbolMeta.animationModel,C)}).execute();var w=t.get("clip",!0)?Cx(t.coordinateSystem,!1,t):null;return w?s.setClipPath(w):s.removeClipPath(),this._data=u,this.group},e.prototype.remove=function(t,i){var n=this.group,s=this._data;t.get("animation")?s&&s.eachItemGraphicEl(function(u){s6(s,Gr(u).dataIndex,t,u)}):n.removeAll()},e.type="pictorialBar",e}(Cn);function n6(r,e,t,i){var n=r.getItemLayout(e),s=t.get("symbolRepeat"),u=t.get("symbolClip"),a=t.get("symbolPosition")||"start",h=t.get("symbolRotate"),p=(h||0)*Math.PI/180||0,m=t.get("symbolPatternSize")||2,v=t.isAnimationEnabled(),x={dataIndex:e,layout:n,itemModel:t,symbolType:r.getItemVisual(e,"symbol")||"circle",style:r.getItemVisual(e,"style"),symbolClip:u,symbolRepeat:s,symbolRepeatDirection:t.get("symbolRepeatDirection"),symbolPatternSize:m,rotation:p,animationModel:v?t:null,hoverScale:v&&t.get(["emphasis","scale"]),z2:t.getShallow("z",!0)||0};xCe(t,s,n,i,x),bCe(r,e,n,s,u,x.boundingLength,x.pxSign,m,i,x),wCe(t,x.symbolScale,p,i,x);var w=x.symbolSize,T=rm(t.get("symbolOffset"),w);return SCe(t,w,n,s,u,T,a,x.valueLineWidth,x.boundingLength,x.repeatCutLength,i,x),x}function xCe(r,e,t,i,n){var s=i.valueDim,u=r.get("symbolBoundingData"),a=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),h=a.toGlobalCoord(a.dataToCoord(0)),p=1-+(t[s.wh]<=0),m;if(Nt(u)){var v=[UI(a,u[0])-h,UI(a,u[1])-h];v[1]<v[0]&&v.reverse(),m=v[p]}else u!=null?m=UI(a,u)-h:e?m=i.coordSysExtent[s.index][p]-h:m=t[s.wh];n.boundingLength=m,e&&(n.repeatCutLength=t[s.wh]),n.pxSign=m>0?1:-1}function UI(r,e){return r.toGlobalCoord(r.dataToCoord(r.scale.parse(e)))}function bCe(r,e,t,i,n,s,u,a,h,p){var m=h.valueDim,v=h.categoryDim,x=Math.abs(t[v.wh]),w=r.getItemVisual(e,"symbolSize"),T;Nt(w)?T=w.slice():w==null?T=["100%","100%"]:T=[w,w],T[v.index]=sr(T[v.index],x),T[m.index]=sr(T[m.index],i?x:Math.abs(s)),p.symbolSize=T;var C=p.symbolScale=[T[0]/a,T[1]/a];C[m.index]*=(h.isHorizontal?-1:1)*u}function wCe(r,e,t,i,n){var s=r.get(_Ce)||0;s&&(GI.attr({scaleX:e[0],scaleY:e[1],rotation:t}),GI.updateTransform(),s/=GI.getLineScale(),s*=e[i.valueDim.index]),n.valueLineWidth=s||0}function SCe(r,e,t,i,n,s,u,a,h,p,m,v){var x=m.categoryDim,w=m.valueDim,T=v.pxSign,C=Math.max(e[w.index]+a,0),I=C;if(i){var k=Math.abs(h),R=Ga(r.get("symbolMargin"),"15%")+"",z=!1;R.lastIndexOf("!")===R.length-1&&(z=!0,R=R.slice(0,R.length-1));var $=sr(R,e[w.index]),j=Math.max(C+$*2,0),G=z?0:$*2,Y=Qj(i),Z=Y?i:u6((k+G)/j),H=k-Z*C;$=H/2/(z?Z:Math.max(Z-1,1)),j=C+$*2,G=z?0:$*2,!Y&&i!=="fixed"&&(Z=p?u6((Math.abs(p)+G)/j):0),I=Z*j-G,v.repeatTimes=Z,v.symbolMargin=$}var re=T*(I/2),ne=v.pathPosition=[];ne[x.index]=t[x.wh]/2,ne[w.index]=u==="start"?re:u==="end"?h-re:h/2,s&&(ne[0]+=s[0],ne[1]+=s[1]);var se=v.bundlePosition=[];se[x.index]=t[x.xy],se[w.index]=t[w.xy];var me=v.barRectShape=kt({},t);me[w.wh]=T*Math.max(Math.abs(t[w.wh]),Math.abs(ne[w.index]+re)),me[x.wh]=t[x.wh];var Se=v.clipShape={};Se[x.xy]=-t[x.xy],Se[x.wh]=m.ecSize[x.wh],Se[w.xy]=0,Se[w.wh]=t[w.wh]}function uZ(r){var e=r.symbolPatternSize,t=fa(r.symbolType,-e/2,-e/2,e,e);return t.attr({culling:!0}),t.type!=="image"&&t.setStyle({strokeNoScale:!0}),t}function cZ(r,e,t,i){var n=r.__pictorialBundle,s=t.symbolSize,u=t.valueLineWidth,a=t.pathPosition,h=e.valueDim,p=t.repeatTimes||0,m=0,v=s[e.valueDim.index]+u+t.symbolMargin*2;for(Kk(r,function(C){C.__pictorialAnimationIndex=m,C.__pictorialRepeatTimes=p,m<p?Kg(C,null,T(m),t,i):Kg(C,null,{scaleX:0,scaleY:0},t,i,function(){n.remove(C)}),m++});m<p;m++){var x=uZ(t);x.__pictorialAnimationIndex=m,x.__pictorialRepeatTimes=p,n.add(x);var w=T(m);Kg(x,{x:w.x,y:w.y,scaleX:0,scaleY:0},{scaleX:w.scaleX,scaleY:w.scaleY,rotation:w.rotation},t,i)}function T(C){var I=a.slice(),k=t.pxSign,R=C;return(t.symbolRepeatDirection==="start"?k>0:k<0)&&(R=p-1-C),I[h.index]=v*(R-p/2+.5)+a[h.index],{x:I[0],y:I[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation}}}function hZ(r,e,t,i){var n=r.__pictorialBundle,s=r.__pictorialMainPath;s?Kg(s,null,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation},t,i):(s=r.__pictorialMainPath=uZ(t),n.add(s),Kg(s,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:0,scaleY:0,rotation:t.rotation},{scaleX:t.symbolScale[0],scaleY:t.symbolScale[1]},t,i))}function dZ(r,e,t){var i=kt({},e.barRectShape),n=r.__pictorialBarRect;n?Kg(n,null,{shape:i},e,t):(n=r.__pictorialBarRect=new Li({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),n.disableMorphing=!0,r.add(n))}function fZ(r,e,t,i){if(t.symbolClip){var n=r.__pictorialClipPath,s=kt({},t.clipShape),u=e.valueDim,a=t.animationModel,h=t.dataIndex;if(n)ji(n,{shape:s},a,h);else{s[u.wh]=0,n=new Li({shape:s}),r.__pictorialBundle.setClipPath(n),r.__pictorialClipPath=n;var p={};p[u.wh]=t.clipShape[u.wh],em[i?"updateProps":"initProps"](n,{shape:p},a,h)}}}function a6(r,e){var t=r.getItemModel(e);return t.getAnimationDelayParams=TCe,t.isAnimationEnabled=MCe,t}function TCe(r){return{index:r.__pictorialAnimationIndex,count:r.__pictorialRepeatTimes}}function MCe(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function o6(r,e,t,i){var n=new Vr,s=new Vr;return n.add(s),n.__pictorialBundle=s,s.x=t.bundlePosition[0],s.y=t.bundlePosition[1],t.symbolRepeat?cZ(n,e,t):hZ(n,e,t),dZ(n,t,i),fZ(n,e,t,i),n.__pictorialShapeStr=pZ(r,t),n.__pictorialSymbolMeta=t,n}function ACe(r,e,t){var i=t.animationModel,n=t.dataIndex,s=r.__pictorialBundle;ji(s,{x:t.bundlePosition[0],y:t.bundlePosition[1]},i,n),t.symbolRepeat?cZ(r,e,t,!0):hZ(r,e,t,!0),dZ(r,t,!0),fZ(r,e,t,!0)}function s6(r,e,t,i){var n=i.__pictorialBarRect;n&&n.removeTextContent();var s=[];Kk(i,function(u){s.push(u)}),i.__pictorialMainPath&&s.push(i.__pictorialMainPath),i.__pictorialClipPath&&(t=null),ue(s,function(u){zd(u,{scaleX:0,scaleY:0},t,e,function(){i.parent&&i.parent.remove(i)})}),r.setItemGraphicEl(e,null)}function pZ(r,e){return[r.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function Kk(r,e,t){ue(r.__pictorialBundle.children(),function(i){i!==r.__pictorialBarRect&&e.call(t,i)})}function Kg(r,e,t,i,n,s){e&&r.attr(e),i.symbolClip&&!n?t&&r.attr(t):t&&em[n?"updateProps":"initProps"](r,t,i.animationModel,i.dataIndex,s)}function l6(r,e,t){var i=t.dataIndex,n=t.itemModel,s=n.getModel("emphasis"),u=s.getModel("itemStyle").getItemStyle(),a=n.getModel(["blur","itemStyle"]).getItemStyle(),h=n.getModel(["select","itemStyle"]).getItemStyle(),p=n.getShallow("cursor"),m=s.get("focus"),v=s.get("blurScope"),x=s.get("scale");Kk(r,function(C){if(C instanceof io){var I=C.style;C.useStyle(kt({image:I.image,x:I.x,y:I.y,width:I.width,height:I.height},t.style))}else C.useStyle(t.style);var k=C.ensureState("emphasis");k.style=u,x&&(k.scaleX=C.scaleX*1.1,k.scaleY=C.scaleY*1.1),C.ensureState("blur").style=a,C.ensureState("select").style=h,p&&(C.cursor=p),C.z2=t.z2});var w=e.valueDim.posDesc[+(t.boundingLength>0)],T=r.__pictorialBarRect;T.ignoreClip=!0,ro(T,Ra(n),{labelFetcher:e.seriesModel,labelDataIndex:i,defaultText:fv(e.seriesModel.getData(),i),inheritColor:t.style.fill,defaultOpacity:t.style.opacity,defaultOutsidePosition:w}),Kn(r,m,v,s.get("disabled"))}function u6(r){var e=Math.round(r);return Math.abs(r-e)<1e-4?e:Math.ceil(r)}var CCe=yCe,ICe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t.defaultSymbol="roundRect",t}return e.prototype.getInitialData=function(t){return t.stack=null,r.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=Wd(WS.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(WS),ECe=ICe;function DCe(r){r.registerChartView(CCe),r.registerSeriesModel(ECe),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,Qr(Z7,"pictorialBar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,X7("pictorialBar"))}var PCe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._layers=[],t}return e.prototype.render=function(t,i,n){var s=t.getData(),u=this,a=this.group,h=t.getLayerSeries(),p=s.getLayout("layoutInfo"),m=p.rect,v=p.boundaryGap;a.x=0,a.y=m.y+v[0];function x(I){return I.name}var w=new ch(this._layersSeries||[],h,x,x),T=[];w.add(xr(C,this,"add")).update(xr(C,this,"update")).remove(xr(C,this,"remove")).execute();function C(I,k,R){var z=u._layers;if(I==="remove"){a.remove(z[k]);return}for(var $=[],j=[],G,Y=h[k].indices,Z=0;Z<Y.length;Z++){var H=s.getItemLayout(Y[Z]),re=H.x,ne=H.y0,se=H.y;$.push(re,ne),j.push(re,ne+se),G=s.getItemVisual(Y[Z],"style")}var me,Se=s.getItemLayout(Y[0]),Ie=t.getModel("label"),ke=Ie.get("margin"),Fe=t.getModel("emphasis");if(I==="add"){var Ce=T[k]=new Vr;me=new Fq({shape:{points:$,stackedOnPoints:j,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),Ce.add(me),a.add(Ce),t.isAnimationEnabled()&&me.setClipPath(LCe(me.getBoundingRect(),t,function(){me.removeClipPath()}))}else{var Ce=z[R];me=Ce.childAt(0),a.add(Ce),T[k]=Ce,ji(me,{shape:{points:$,stackedOnPoints:j}},t),nu(me)}ro(me,Ra(t),{labelDataIndex:Y[Z-1],defaultText:s.getName(Y[Z-1]),inheritColor:G.fill},{normal:{verticalAlign:"middle"}}),me.setTextConfig({position:null,local:!0});var We=me.getTextContent();We&&(We.x=Se.x-ke,We.y=Se.y0+Se.y/2),me.useStyle(G),s.setItemGraphicEl(k,me),to(me,t),Kn(me,Fe.get("focus"),Fe.get("blurScope"),Fe.get("disabled"))}this._layersSeries=h,this._layers=T},e.type="themeRiver",e}(Cn);function LCe(r,e,t){var i=new Li({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return Bn(i,{shape:{x:r.x-50,width:r.width+100,height:r.height+20}},e,t),i}var kCe=PCe,jI=2,RCe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Dx(xr(this.getData,this),xr(this.getRawData,this))},e.prototype.fixData=function(t){var i=t.length,n={},s=cD(t,function(x){return n.hasOwnProperty(x[0]+"")||(n[x[0]+""]=-1),x[2]}),u=[];s.buckets.each(function(x,w){u.push({name:w,dataList:x})});for(var a=u.length,h=0;h<a;++h){for(var p=u[h].name,m=0;m<u[h].dataList.length;++m){var v=u[h].dataList[m][0]+"";n[v]=h}for(var v in n)n.hasOwnProperty(v)&&n[v]!==h&&(n[v]=h,t[i]=[v,0,p],i++)}return t},e.prototype.getInitialData=function(t,i){for(var n=this.getReferringComponents("singleAxis",da).models[0],s=n.get("type"),u=un(t.data,function(T){return T[2]!==void 0}),a=this.fixData(u||[]),h=[],p=this.nameMap=Mr(),m=0,v=0;v<a.length;++v)h.push(a[v][jI]),p.get(a[v][jI])||(p.set(a[v][jI],m),m++);var x=bx(a,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:$S(s)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,w=new No(x,this);return w.initData(a),w},e.prototype.getLayerSeries=function(){for(var t=this.getData(),i=t.count(),n=[],s=0;s<i;++s)n[s]=s;var u=t.mapDimension("single"),a=cD(n,function(p){return t.get("name",p)}),h=[];return a.buckets.each(function(p,m){p.sort(function(v,x){return t.get(u,v)-t.get(u,x)}),h.push({name:m,indices:p})}),h},e.prototype.getAxisTooltipData=function(t,i,n){Nt(t)||(t=t?[t]:[]);for(var s=this.getData(),u=this.getLayerSeries(),a=[],h=u.length,p,m=0;m<h;++m){for(var v=Number.MAX_VALUE,x=-1,w=u[m].indices.length,T=0;T<w;++T){var C=s.get(t[0],u[m].indices[T]),I=Math.abs(C-i);I<=v&&(p=C,v=I,x=u[m].indices[T])}a.push(x)}return{dataIndices:a,nestestValue:p}},e.prototype.formatTooltip=function(t,i,n){var s=this.getData(),u=s.getName(t),a=s.get(s.mapDimension("value"),t);return Oa("nameValue",{name:u,value:a})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(Gn),OCe=RCe;function zCe(r,e){r.eachSeriesByType("themeRiver",function(t){var i=t.getData(),n=t.coordinateSystem,s={},u=n.getRect();s.rect=u;var a=t.get("boundaryGap"),h=n.getAxis();if(s.boundaryGap=a,h.orient==="horizontal"){a[0]=sr(a[0],u.height),a[1]=sr(a[1],u.height);var p=u.height-a[0]-a[1];c6(i,t,p)}else{a[0]=sr(a[0],u.width),a[1]=sr(a[1],u.width);var m=u.width-a[0]-a[1];c6(i,t,m)}i.setLayout("layoutInfo",s)})}function c6(r,e,t){if(!!r.count())for(var i=e.coordinateSystem,n=e.getLayerSeries(),s=r.mapDimension("single"),u=r.mapDimension("value"),a=Ht(n,function(I){return Ht(I.indices,function(k){var R=i.dataToPoint(r.get(s,k));return R[1]=r.get(u,k),R})}),h=BCe(a),p=h.y0,m=t/h.max,v=n.length,x=n[0].indices.length,w,T=0;T<x;++T){w=p[T]*m,r.setItemLayout(n[0].indices[T],{layerIndex:0,x:a[0][T][0],y0:w,y:a[0][T][1]*m});for(var C=1;C<v;++C)w+=a[C-1][T][1]*m,r.setItemLayout(n[C].indices[T],{layerIndex:C,x:a[C][T][0],y0:w,y:a[C][T][1]*m})}}function BCe(r){for(var e=r.length,t=r[0].length,i=[],n=[],s=0,u=0;u<t;++u){for(var a=0,h=0;h<e;++h)a+=r[h][u][1];a>s&&(s=a),i.push(a)}for(var p=0;p<t;++p)n[p]=(s-i[p])/2;s=0;for(var m=0;m<t;++m){var v=i[m]+n[m];v>s&&(s=v)}return{y0:n,max:s}}function FCe(r){r.registerChartView(kCe),r.registerSeriesModel(OCe),r.registerLayout(zCe),r.registerProcessor(Ex("themeRiver"))}var NCe=2,VCe=4,$Ce=function(r){lt(e,r);function e(t,i,n,s){var u=r.call(this)||this;u.z2=NCe,u.textConfig={inside:!0},Gr(u).seriesIndex=i.seriesIndex;var a=new Ni({z2:VCe,silent:t.getModel().get(["label","silent"])});return u.setTextContent(a),u.updateData(!0,t,i,n,s),u}return e.prototype.updateData=function(t,i,n,s,u){this.node=i,i.piece=this,n=n||this._seriesModel,s=s||this._ecModel;var a=this;Gr(a).dataIndex=i.dataIndex;var h=i.getModel(),p=h.getModel("emphasis"),m=i.getLayout(),v=kt({},m);v.label=null;var x=i.getVisual("style");x.lineJoin="bevel";var w=i.getVisual("decal");w&&(x.decal=hv(w,u));var T=Cp(h.getModel("itemStyle"),v,!0);kt(v,T),ue($o,function(R){var z=a.ensureState(R),$=h.getModel([R,"itemStyle"]);z.style=$.getItemStyle();var j=Cp($,v);j&&(z.shape=j)}),t?(a.setShape(v),a.shape.r=m.r0,Bn(a,{shape:{r:m.r}},n,i.dataIndex)):(ji(a,{shape:v},n),nu(a)),a.useStyle(x),this._updateLabel(n);var C=h.getShallow("cursor");C&&a.attr("cursor",C),this._seriesModel=n||this._seriesModel,this._ecModel=s||this._ecModel;var I=p.get("focus"),k=I==="ancestor"?i.getAncestorsIndices():I==="descendant"?i.getDescendantIndices():I;Kn(this,k,p.get("blurScope"),p.get("disabled"))},e.prototype._updateLabel=function(t){var i=this,n=this.node.getModel(),s=n.getModel("label"),u=this.node.getLayout(),a=u.endAngle-u.startAngle,h=(u.startAngle+u.endAngle)/2,p=Math.cos(h),m=Math.sin(h),v=this,x=v.getTextContent(),w=this.node.dataIndex,T=s.get("minAngle")/180*Math.PI,C=s.get("show")&&!(T!=null&&Math.abs(a)<T);x.ignore=!C,ue(U0,function(k){var R=k==="normal"?n.getModel("label"):n.getModel([k,"label"]),z=k==="normal",$=z?x:x.ensureState(k),j=t.getFormattedLabel(w,k);z&&(j=j||i.node.name),$.style=Mn(R,{},null,k!=="normal",!0),j&&($.style.text=j);var G=R.get("show");G!=null&&!z&&($.ignore=!G);var Y=I(R,"position"),Z=z?v:v.states[k],H=Z.style.fill;Z.textConfig={outsideFill:R.get("color")==="inherit"?H:null,inside:Y!=="outside"};var re,ne=I(R,"distance")||0,se=I(R,"align"),me=I(R,"rotate"),Se=Math.PI*.5,Ie=Math.PI*1.5,ke=Ls(me==="tangential"?Math.PI/2-h:h),Fe=ke>Se&&!V0(ke-Se)&&ke<Ie;Y==="outside"?(re=u.r+ne,se=Fe?"right":"left"):!se||se==="center"?(a===2*Math.PI&&u.r0===0?re=0:re=(u.r+u.r0)/2,se="center"):se==="left"?(re=u.r0+ne,se=Fe?"right":"left"):se==="right"&&(re=u.r-ne,se=Fe?"left":"right"),$.style.align=se,$.style.verticalAlign=I(R,"verticalAlign")||"middle",$.x=re*p+u.cx,$.y=re*m+u.cy;var Ce=0;me==="radial"?Ce=Ls(-h)+(Fe?Math.PI:0):me==="tangential"?Ce=Ls(Math.PI/2-h)+(Fe?Math.PI:0):Vi(me)&&(Ce=me*Math.PI/180),$.rotation=Ls(Ce)});function I(k,R){var z=k.get(R);return z==null?s.get(R):z}x.dirtyStyle()},e}(cs),h6=$Ce,lP="sunburstRootToNode",d6="sunburstHighlight",GCe="sunburstUnhighlight";function UCe(r){r.registerAction({type:lP,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},i);function i(n,s){var u=rx(e,[lP],n);if(u){var a=n.getViewRoot();a&&(e.direction=zk(a,u.node)?"rollUp":"drillDown"),n.resetViewRoot(u.node)}}}),r.registerAction({type:d6,update:"none"},function(e,t,i){e=kt({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},n);function n(s){var u=rx(e,[d6],s);u&&(e.dataIndex=u.node.dataIndex)}i.dispatchAction(kt(e,{type:"highlight"}))}),r.registerAction({type:GCe,update:"updateView"},function(e,t,i){e=kt({},e),i.dispatchAction(kt(e,{type:"downplay"}))})}var jCe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n,s){var u=this;this.seriesModel=t,this.api=n,this.ecModel=i;var a=t.getData(),h=a.tree.root,p=t.getViewRoot(),m=this.group,v=t.get("renderLabelForZeroData"),x=[];p.eachNode(function(R){x.push(R)});var w=this._oldChildren||[];T(x,w),k(h,p),this._initEvents(),this._oldChildren=x;function T(R,z){if(R.length===0&&z.length===0)return;new ch(z,R,$,$).add(j).update(j).remove(Qr(j,null)).execute();function $(G){return G.getId()}function j(G,Y){var Z=G==null?null:R[G],H=Y==null?null:z[Y];C(Z,H)}}function C(R,z){if(!v&&R&&!R.getValue()&&(R=null),R!==h&&z!==h){if(z&&z.piece)R?(z.piece.updateData(!1,R,t,i,n),a.setItemGraphicEl(R.dataIndex,z.piece)):I(z);else if(R){var $=new h6(R,t,i,n);m.add($),a.setItemGraphicEl(R.dataIndex,$)}}}function I(R){!R||R.piece&&(m.remove(R.piece),R.piece=null)}function k(R,z){z.depth>0?(u.virtualPiece?u.virtualPiece.updateData(!1,R,t,i,n):(u.virtualPiece=new h6(R,t,i,n),m.add(u.virtualPiece)),z.piece.off("click"),u.virtualPiece.on("click",function($){u._rootToNode(z.parentNode)})):u.virtualPiece&&(m.remove(u.virtualPiece),u.virtualPiece=null)}},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(i){var n=!1,s=t.seriesModel.getViewRoot();s.eachNode(function(u){if(!n&&u.piece&&u.piece===i.target){var a=u.getModel().get("nodeClick");if(a==="rootToNode")t._rootToNode(u);else if(a==="link"){var h=u.getModel(),p=h.get("link");if(p){var m=h.get("target",!0)||"_blank";kS(p,m)}}n=!0}})})},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:lP,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,i){var n=i.getData(),s=n.getItemLayout(0);if(s){var u=t[0]-s.cx,a=t[1]-s.cy,h=Math.sqrt(u*u+a*a);return h<=s.r&&h>=s.r0}},e.type="sunburst",e}(Cn),HCe=jCe,WCe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t,i){var n={name:t.name,children:t.data};mZ(n);var s=this._levelModels=Ht(t.levels||[],function(h){return new An(h,this,i)},this),u=Ok.createTree(n,this,a);function a(h){h.wrapMethod("getItemModel",function(p,m){var v=u.getNodeByDataIndex(m),x=s[v.depth];return x&&(p.parentModel=x),p})}return u.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(t){var i=r.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return i.treePathInfo=f2(n,this),i},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var i=this.getRawData().tree.root;(!t||t!==i&&!i.contains(t))&&(this._viewRoot=i)},e.prototype.enableAriaDecal=function(){y9(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(Gn);function mZ(r){var e=0;ue(r.children,function(i){mZ(i);var n=i.value;Nt(n)&&(n=n[0]),e+=n});var t=r.value;Nt(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),Nt(r.value)?r.value[0]=t:r.value=t}var qCe=WCe,f6=Math.PI/180;function ZCe(r,e,t){e.eachSeriesByType(r,function(i){var n=i.get("center"),s=i.get("radius");Nt(s)||(s=[0,s]),Nt(n)||(n=[n,n]);var u=t.getWidth(),a=t.getHeight(),h=Math.min(u,a),p=sr(n[0],u),m=sr(n[1],a),v=sr(s[0],h/2),x=sr(s[1],h/2),w=-i.get("startAngle")*f6,T=i.get("minAngle")*f6,C=i.getData().tree.root,I=i.getViewRoot(),k=I.depth,R=i.get("sort");R!=null&&gZ(I,R);var z=0;ue(I.children,function(ke){!isNaN(ke.getValue())&&z++});var $=I.getValue(),j=Math.PI/($||z)*2,G=I.depth>0,Y=I.height-(G?-1:1),Z=(x-v)/(Y||1),H=i.get("clockwise"),re=i.get("stillShowZeroSum"),ne=H?1:-1,se=function(ke,Fe){if(!!ke){var Ce=Fe;if(ke!==C){var We=ke.getValue(),gt=$===0&&re?j:We*j;gt<T&&(gt=T),Ce=Fe+ne*gt;var St=ke.depth-k-(G?-1:1),et=v+Z*St,ht=v+Z*(St+1),$e=i.getLevelModel(ke);if($e){var He=$e.get("r0",!0),dt=$e.get("r",!0),nt=$e.get("radius",!0);nt!=null&&(He=nt[0],dt=nt[1]),He!=null&&(et=sr(He,h/2)),dt!=null&&(ht=sr(dt,h/2))}ke.setLayout({angle:gt,startAngle:Fe,endAngle:Ce,clockwise:H,cx:p,cy:m,r0:et,r:ht})}if(ke.children&&ke.children.length){var vt=0;ue(ke.children,function(Pt){vt+=se(Pt,Fe+vt)})}return Ce-Fe}};if(G){var me=v,Se=v+Z,Ie=Math.PI*2;C.setLayout({angle:Ie,startAngle:w,endAngle:w+Ie,clockwise:H,cx:p,cy:m,r0:me,r:Se})}se(I,w)})}function gZ(r,e){var t=r.children||[];r.children=XCe(t,e),t.length&&ue(r.children,function(i){gZ(i,e)})}function XCe(r,e){if(kr(e)){var t=Ht(r,function(n,s){var u=n.getValue();return{params:{depth:n.depth,height:n.height,dataIndex:n.dataIndex,getValue:function(){return u}},index:s}});return t.sort(function(n,s){return e(n.params,s.params)}),Ht(t,function(n){return r[n.index]})}else{var i=e==="asc";return r.sort(function(n,s){var u=(n.getValue()-s.getValue())*(i?1:-1);return u===0?(n.dataIndex-s.dataIndex)*(i?-1:1):u})}}function YCe(r){var e={};function t(i,n,s){for(var u=i;u&&u.depth>1;)u=u.parentNode;var a=n.getColorFromPalette(u.name||u.dataIndex+"",e);return i.depth>1&&gr(a)&&(a=JE(a,(i.depth-1)/(s-1)*.5)),a}r.eachSeriesByType("sunburst",function(i){var n=i.getData(),s=n.tree;s.eachNode(function(u){var a=u.getModel(),h=a.getModel("itemStyle").getItemStyle();h.fill||(h.fill=t(u,i,s.root.height));var p=n.ensureUniqueItemVisual(u.dataIndex,"style");kt(p,h)})})}function KCe(r){r.registerChartView(HCe),r.registerSeriesModel(qCe),r.registerLayout(Qr(ZCe,"sunburst")),r.registerProcessor(Qr(Ex,"sunburst")),r.registerVisual(YCe),UCe(r)}var p6={color:"fill",borderColor:"stroke"},JCe={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},th=ki(),QCe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,i){return gh(null,this)},e.prototype.getDataParams=function(t,i,n){var s=r.prototype.getDataParams.call(this,t,i);return n&&(s.info=th(n).info),s},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e}(Gn),eIe=QCe;function tIe(r,e){return e=e||[0,0],Ht(["x","y"],function(t,i){var n=this.getAxis(t),s=e[i],u=r[i]/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(s-u)-n.dataToCoord(s+u))},this)}function rIe(r){var e=r.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return r.dataToPoint(t)},size:xr(tIe,r)}}}function iIe(r,e){return e=e||[0,0],Ht([0,1],function(t){var i=e[t],n=r[t]/2,s=[],u=[];return s[t]=i-n,u[t]=i+n,s[1-t]=u[1-t]=e[1-t],Math.abs(this.dataToPoint(s)[t]-this.dataToPoint(u)[t])},this)}function nIe(r){var e=r.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:r.getZoom()},api:{coord:function(t){return r.dataToPoint(t)},size:xr(iIe,r)}}}function aIe(r,e){var t=this.getAxis(),i=e instanceof Array?e[0]:e,n=(r instanceof Array?r[0]:r)/2;return t.type==="category"?t.getBandWidth():Math.abs(t.dataToCoord(i-n)-t.dataToCoord(i+n))}function oIe(r){var e=r.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return r.dataToPoint(t)},size:xr(aIe,r)}}}function sIe(r,e){return e=e||[0,0],Ht(["Radius","Angle"],function(t,i){var n="get"+t+"Axis",s=this[n](),u=e[i],a=r[i]/2,h=s.type==="category"?s.getBandWidth():Math.abs(s.dataToCoord(u-a)-s.dataToCoord(u+a));return t==="Angle"&&(h=h*Math.PI/180),h},this)}function lIe(r){var e=r.getRadiusAxis(),t=r.getAngleAxis(),i=e.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:r.cx,cy:r.cy,r:i[1],r0:i[0]},api:{coord:function(n){var s=e.dataToRadius(n[0]),u=t.dataToAngle(n[1]),a=r.coordToPoint([s,u]);return a.push(s,u*Math.PI/180),a},size:xr(sIe,r)}}}function uIe(r){var e=r.getRect(),t=r.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:r.getCellWidth(),cellHeight:r.getCellHeight(),rangeInfo:{start:t.start,end:t.end,weeks:t.weeks,dayCount:t.allDay}},api:{coord:function(i,n){return r.dataToPoint(i,n)}}}}function vZ(r,e,t,i){return r&&(r.legacy||r.legacy!==!1&&!t&&!i&&e!=="tspan"&&(e==="text"||wr(r,"text")))}function _Z(r,e,t){var i=r,n,s,u;if(e==="text")u=i;else{u={},wr(i,"text")&&(u.text=i.text),wr(i,"rich")&&(u.rich=i.rich),wr(i,"textFill")&&(u.fill=i.textFill),wr(i,"textStroke")&&(u.stroke=i.textStroke),wr(i,"fontFamily")&&(u.fontFamily=i.fontFamily),wr(i,"fontSize")&&(u.fontSize=i.fontSize),wr(i,"fontStyle")&&(u.fontStyle=i.fontStyle),wr(i,"fontWeight")&&(u.fontWeight=i.fontWeight),s={type:"text",style:u,silent:!0},n={};var a=wr(i,"textPosition");t?n.position=a?i.textPosition:"inside":a&&(n.position=i.textPosition),wr(i,"textPosition")&&(n.position=i.textPosition),wr(i,"textOffset")&&(n.offset=i.textOffset),wr(i,"textRotation")&&(n.rotation=i.textRotation),wr(i,"textDistance")&&(n.distance=i.textDistance)}return m6(u,r),ue(u.rich,function(h){m6(h,h)}),{textConfig:n,textContent:s}}function m6(r,e){!e||(e.font=e.textFont||e.font,wr(e,"textStrokeWidth")&&(r.lineWidth=e.textStrokeWidth),wr(e,"textAlign")&&(r.align=e.textAlign),wr(e,"textVerticalAlign")&&(r.verticalAlign=e.textVerticalAlign),wr(e,"textLineHeight")&&(r.lineHeight=e.textLineHeight),wr(e,"textWidth")&&(r.width=e.textWidth),wr(e,"textHeight")&&(r.height=e.textHeight),wr(e,"textBackgroundColor")&&(r.backgroundColor=e.textBackgroundColor),wr(e,"textPadding")&&(r.padding=e.textPadding),wr(e,"textBorderColor")&&(r.borderColor=e.textBorderColor),wr(e,"textBorderWidth")&&(r.borderWidth=e.textBorderWidth),wr(e,"textBorderRadius")&&(r.borderRadius=e.textBorderRadius),wr(e,"textBoxShadowColor")&&(r.shadowColor=e.textBoxShadowColor),wr(e,"textBoxShadowBlur")&&(r.shadowBlur=e.textBoxShadowBlur),wr(e,"textBoxShadowOffsetX")&&(r.shadowOffsetX=e.textBoxShadowOffsetX),wr(e,"textBoxShadowOffsetY")&&(r.shadowOffsetY=e.textBoxShadowOffsetY))}function g6(r,e,t){var i=r;i.textPosition=i.textPosition||t.position||"inside",t.offset!=null&&(i.textOffset=t.offset),t.rotation!=null&&(i.textRotation=t.rotation),t.distance!=null&&(i.textDistance=t.distance);var n=i.textPosition.indexOf("inside")>=0,s=r.fill||"#000";v6(i,e);var u=i.textFill==null;return n?u&&(i.textFill=t.insideFill||"#fff",!i.textStroke&&t.insideStroke&&(i.textStroke=t.insideStroke),!i.textStroke&&(i.textStroke=s),i.textStrokeWidth==null&&(i.textStrokeWidth=2)):(u&&(i.textFill=r.fill||t.outsideFill||"#000"),!i.textStroke&&t.outsideStroke&&(i.textStroke=t.outsideStroke)),i.text=e.text,i.rich=e.rich,ue(e.rich,function(a){v6(a,a)}),i}function v6(r,e){!e||(wr(e,"fill")&&(r.textFill=e.fill),wr(e,"stroke")&&(r.textStroke=e.fill),wr(e,"lineWidth")&&(r.textStrokeWidth=e.lineWidth),wr(e,"font")&&(r.font=e.font),wr(e,"fontStyle")&&(r.fontStyle=e.fontStyle),wr(e,"fontWeight")&&(r.fontWeight=e.fontWeight),wr(e,"fontSize")&&(r.fontSize=e.fontSize),wr(e,"fontFamily")&&(r.fontFamily=e.fontFamily),wr(e,"align")&&(r.textAlign=e.align),wr(e,"verticalAlign")&&(r.textVerticalAlign=e.verticalAlign),wr(e,"lineHeight")&&(r.textLineHeight=e.lineHeight),wr(e,"width")&&(r.textWidth=e.width),wr(e,"height")&&(r.textHeight=e.height),wr(e,"backgroundColor")&&(r.textBackgroundColor=e.backgroundColor),wr(e,"padding")&&(r.textPadding=e.padding),wr(e,"borderColor")&&(r.textBorderColor=e.borderColor),wr(e,"borderWidth")&&(r.textBorderWidth=e.borderWidth),wr(e,"borderRadius")&&(r.textBorderRadius=e.borderRadius),wr(e,"shadowColor")&&(r.textBoxShadowColor=e.shadowColor),wr(e,"shadowBlur")&&(r.textBoxShadowBlur=e.shadowBlur),wr(e,"shadowOffsetX")&&(r.textBoxShadowOffsetX=e.shadowOffsetX),wr(e,"shadowOffsetY")&&(r.textBoxShadowOffsetY=e.shadowOffsetY),wr(e,"textShadowColor")&&(r.textShadowColor=e.textShadowColor),wr(e,"textShadowBlur")&&(r.textShadowBlur=e.textShadowBlur),wr(e,"textShadowOffsetX")&&(r.textShadowOffsetX=e.textShadowOffsetX),wr(e,"textShadowOffsetY")&&(r.textShadowOffsetY=e.textShadowOffsetY))}var yZ={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},_6=bi(yZ);ic(ac,function(r,e){return r[e]=1,r},{});ac.join(", ");var eT=["","style","shape","extra"],gv=ki();function Jk(r,e,t,i,n){var s=r+"Animation",u=Dv(r,i,n)||{},a=gv(e).userDuring;return u.duration>0&&(u.during=a?xr(pIe,{el:e,userDuring:a}):null,u.setToFinal=!0,u.scope=r),kt(u,t[s]),u}function nS(r,e,t,i){i=i||{};var n=i.dataIndex,s=i.isInit,u=i.clearStyle,a=t.isAnimationEnabled(),h=gv(r),p=e.style;h.userDuring=e.during;var m={},v={};if(gIe(r,e,v),x6("shape",e,v),x6("extra",e,v),!s&&a&&(mIe(r,e,m),y6("shape",r,e,m),y6("extra",r,e,m),vIe(r,e,p,m)),v.style=p,cIe(r,v,u),dIe(r,e),a)if(s){var x={};ue(eT,function(T){var C=T?e[T]:e;C&&C.enterFrom&&(T&&(x[T]=x[T]||{}),kt(T?x[T]:x,C.enterFrom))});var w=Jk("enter",r,e,t,n);w.duration>0&&r.animateFrom(x,w)}else hIe(r,e,n||0,t,m);xZ(r,e),p?r.dirty():r.markRedraw()}function xZ(r,e){for(var t=gv(r).leaveToProps,i=0;i<eT.length;i++){var n=eT[i],s=n?e[n]:e;s&&s.leaveTo&&(t||(t=gv(r).leaveToProps={}),n&&(t[n]=t[n]||{}),kt(n?t[n]:t,s.leaveTo))}}function g2(r,e,t,i){if(r){var n=r.parent,s=gv(r).leaveToProps;if(s){var u=Jk("update",r,e,t,0);u.done=function(){n.remove(r),i&&i()},r.animateTo(s,u)}else n.remove(r),i&&i()}}function $p(r){return r==="all"}function cIe(r,e,t){var i=e.style;if(!r.isGroup&&i){if(t){r.useStyle({});for(var n=r.animators,s=0;s<n.length;s++){var u=n[s];u.targetName==="style"&&u.changeTarget(r.style)}}r.setStyle(i)}e&&(e.style=null,e&&r.attr(e),e.style=i)}function hIe(r,e,t,i,n){if(n){var s=Jk("update",r,e,i,t);s.duration>0&&r.animateFrom(n,s)}}function dIe(r,e){wr(e,"silent")&&(r.silent=e.silent),wr(e,"ignore")&&(r.ignore=e.ignore),r instanceof yl&&wr(e,"invisible")&&(r.invisible=e.invisible),r instanceof _i&&wr(e,"autoBatch")&&(r.autoBatch=e.autoBatch)}var Nu={},fIe={setTransform:function(r,e){return Nu.el[r]=e,this},getTransform:function(r){return Nu.el[r]},setShape:function(r,e){var t=Nu.el,i=t.shape||(t.shape={});return i[r]=e,t.dirtyShape&&t.dirtyShape(),this},getShape:function(r){var e=Nu.el.shape;if(e)return e[r]},setStyle:function(r,e){var t=Nu.el,i=t.style;return i&&(i[r]=e,t.dirtyStyle&&t.dirtyStyle()),this},getStyle:function(r){var e=Nu.el.style;if(e)return e[r]},setExtra:function(r,e){var t=Nu.el.extra||(Nu.el.extra={});return t[r]=e,this},getExtra:function(r){var e=Nu.el.extra;if(e)return e[r]}};function pIe(){var r=this,e=r.el;if(!!e){var t=gv(e).userDuring,i=r.userDuring;if(t!==i){r.el=r.userDuring=null;return}Nu.el=e,i(fIe)}}function y6(r,e,t,i){var n=t[r];if(!!n){var s=e[r],u;if(s){var a=t.transition,h=n.transition;if(h)if(!u&&(u=i[r]={}),$p(h))kt(u,s);else for(var p=hn(h),m=0;m<p.length;m++){var v=p[m],x=s[v];u[v]=x}else if($p(a)||di(a,r)>=0){!u&&(u=i[r]={});for(var w=bi(s),m=0;m<w.length;m++){var v=w[m],x=s[v];_Ie(n[v],x)&&(u[v]=x)}}}}}function x6(r,e,t){var i=e[r];if(!!i)for(var n=t[r]={},s=bi(i),u=0;u<s.length;u++){var a=s[u];n[a]=m0(i[a])}}function mIe(r,e,t){for(var i=e.transition,n=$p(i)?ac:hn(i||[]),s=0;s<n.length;s++){var u=n[s];if(!(u==="style"||u==="shape"||u==="extra")){var a=r[u];t[u]=a}}}function gIe(r,e,t){for(var i=0;i<_6.length;i++){var n=_6[i],s=yZ[n],u=e[n];u&&(t[s[0]]=u[0],t[s[1]]=u[1])}for(var i=0;i<ac.length;i++){var a=ac[i];e[a]!=null&&(t[a]=e[a])}}function vIe(r,e,t,i){if(!!t){var n=r.style,s;if(n){var u=t.transition,a=e.transition;if(u&&!$p(u)){var h=hn(u);!s&&(s=i.style={});for(var p=0;p<h.length;p++){var m=h[p],v=n[m];s[m]=v}}else if(r.getAnimationStyleProps&&($p(a)||$p(u)||di(a,"style")>=0)){var x=r.getAnimationStyleProps(),w=x?x.style:null;if(w){!s&&(s=i.style={});for(var T=bi(t),p=0;p<T.length;p++){var m=T[p];if(w[m]){var v=n[m];s[m]=v}}}}}}}function _Ie(r,e){return So(r)?r!==e:r!=null&&isFinite(r)}var bZ=ki(),yIe=["percent","easing","shape","style","extra"];function wZ(r){r.stopAnimation("keyframe"),r.attr(bZ(r))}function tT(r,e,t){if(!(!t.isAnimationEnabled()||!e)){if(Nt(e)){ue(e,function(a){tT(r,a,t)});return}var i=e.keyframes,n=e.duration;if(t&&n==null){var s=Dv("enter",t,0);n=s&&s.duration}if(!(!i||!n)){var u=bZ(r);ue(eT,function(a){if(!(a&&!r[a])){var h;i.sort(function(p,m){return p.percent-m.percent}),ue(i,function(p){var m=r.animators,v=a?p[a]:p;if(!!v){var x=bi(v);if(a||(x=un(x,function(C){return di(yIe,C)<0})),!!x.length){h||(h=r.animate(a,e.loop,!0),h.scope="keyframe");for(var w=0;w<m.length;w++)m[w]!==h&&m[w].targetName===h.targetName&&m[w].stopTracks(x);a&&(u[a]=u[a]||{});var T=a?u[a]:u;ue(x,function(C){T[C]=((a?r[a]:r)||{})[C]}),h.whenWithKeys(n*p.percent,v,x,p.easing)}}}),h&&h.delay(e.delay||0).duration(n).start(e.easing)}})}}}var rh="emphasis",wd="normal",Qk="blur",eR="select",$d=[wd,rh,Qk,eR],HI={normal:["itemStyle"],emphasis:[rh,"itemStyle"],blur:[Qk,"itemStyle"],select:[eR,"itemStyle"]},WI={normal:["label"],emphasis:[rh,"label"],blur:[Qk,"label"],select:[eR,"label"]},xIe=["x","y"],bIe="e\0\0",nl={normal:{},emphasis:{},blur:{},select:{}},wIe={cartesian2d:rIe,geo:nIe,single:oIe,polar:lIe,calendar:uIe};function uP(r){return r instanceof _i}function cP(r){return r instanceof yl}function SIe(r,e){e.copyTransform(r),cP(e)&&cP(r)&&(e.setStyle(r.style),e.z=r.z,e.z2=r.z2,e.zlevel=r.zlevel,e.invisible=r.invisible,e.ignore=r.ignore,uP(e)&&uP(r)&&e.setShape(r.shape))}var TIe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n,s){this._progressiveEls=null;var u=this._data,a=t.getData(),h=this.group,p=b6(t,a,i,n);u||h.removeAll(),a.diff(u).add(function(v){qI(n,null,v,p(v,s),t,h,a)}).remove(function(v){var x=u.getItemGraphicEl(v);x&&g2(x,th(x).option,t)}).update(function(v,x){var w=u.getItemGraphicEl(x);qI(n,w,v,p(v,s),t,h,a)}).execute();var m=t.get("clip",!0)?Cx(t.coordinateSystem,!1,t):null;m?h.setClipPath(m):h.removeClipPath(),this._data=a},e.prototype.incrementalPrepareRender=function(t,i,n){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,i,n,s,u){var a=i.getData(),h=b6(i,a,n,s),p=this._progressiveEls=[];function m(w){w.isGroup||(w.incremental=!0,w.ensureState("emphasis").hoverLayer=!0)}for(var v=t.start;v<t.end;v++){var x=qI(null,null,v,h(v,u),i,this.group,a);x&&(x.traverse(m),p.push(x))}},e.prototype.eachRendered=function(t){Hd(this._progressiveEls||this.group,t)},e.prototype.filterForExposedEvent=function(t,i,n,s){var u=i.element;if(u==null||n.name===u)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===u)return!0;return!1},e.type="custom",e}(Cn),MIe=TIe;function tR(r){var e=r.type,t;if(e==="path"){var i=r.shape,n=i.width!=null&&i.height!=null?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,s=MZ(i);t=qT(s,null,n,i.layout||"center"),th(t).customPathData=s}else if(e==="image")t=new io({}),th(t).customImagePath=r.style.image;else if(e==="text")t=new Ni({});else if(e==="group")t=new Vr;else{if(e==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var u=GL(e);if(!u){var a="";Qi(a)}t=new u}return th(t).customGraphicType=e,t.name=r.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function rR(r,e,t,i,n,s,u){wZ(e);var a=n&&n.normal.cfg;a&&e.setTextConfig(a),i&&i.transition==null&&(i.transition=xIe);var h=i&&i.style;if(h){if(e.type==="text"){var p=h;wr(p,"textFill")&&(p.fill=p.textFill),wr(p,"textStroke")&&(p.stroke=p.textStroke)}var m=void 0,v=uP(e)?h.decal:null;r&&v&&(v.dirty=!0,m=hv(v,r)),h.__decalPattern=m}if(cP(e)&&h){var m=h.__decalPattern;m&&(h.decal=m)}nS(e,i,s,{dataIndex:t,isInit:u,clearStyle:!0}),tT(e,i.keyframeAnimation,s)}function SZ(r,e,t,i,n){var s=e.isGroup?null:e,u=n&&n[r].cfg;if(s){var a=s.ensureState(r);if(i===!1){var h=s.getState(r);h&&(h.style=null)}else a.style=i||null;u&&(a.textConfig=u),qp(s)}}function AIe(r,e,t){if(!r.isGroup){var i=r,n=t.currentZ,s=t.currentZLevel;i.z=n,i.zlevel=s;var u=e.z2;u!=null&&(i.z2=u||0);for(var a=0;a<$d.length;a++)CIe(i,e,$d[a])}}function CIe(r,e,t){var i=t===wd,n=i?e:rT(e,t),s=n?n.z2:null,u;s!=null&&(u=i?r:r.ensureState(t),u.z2=s||0)}function b6(r,e,t,i){var n=r.get("renderItem"),s=r.coordinateSystem,u={};s&&(u=s.prepareCustoms?s.prepareCustoms(s):wIe[s.type](s));for(var a=zr({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:$,style:G,ordinalRawValue:j,styleEmphasis:Y,visual:re,barLayout:ne,currentSeriesIndices:se,font:me},u.api||{}),h={context:{},seriesId:r.id,seriesName:r.name,seriesIndex:r.seriesIndex,coordSys:u.coordSys,dataInsideLength:e.count(),encode:IIe(r.getData())},p,m,v={},x={},w={},T={},C=0;C<$d.length;C++){var I=$d[C];w[I]=r.getModel(HI[I]),T[I]=r.getModel(WI[I])}function k(Se){return Se===p?m||(m=e.getItemModel(Se)):e.getItemModel(Se)}function R(Se,Ie){return e.hasItemOption?Se===p?v[Ie]||(v[Ie]=k(Se).getModel(HI[Ie])):k(Se).getModel(HI[Ie]):w[Ie]}function z(Se,Ie){return e.hasItemOption?Se===p?x[Ie]||(x[Ie]=k(Se).getModel(WI[Ie])):k(Se).getModel(WI[Ie]):T[Ie]}return function(Se,Ie){return p=Se,m=null,v={},x={},n&&n(zr({dataIndexInside:Se,dataIndex:e.getRawIndex(Se),actionType:Ie?Ie.type:null},h),a)};function $(Se,Ie){return Ie==null&&(Ie=p),e.getStore().get(e.getDimensionIndex(Se||0),Ie)}function j(Se,Ie){Ie==null&&(Ie=p),Se=Se||0;var ke=e.getDimensionInfo(Se);if(!ke){var Fe=e.getDimensionIndex(Se);return Fe>=0?e.getStore().get(Fe,Ie):void 0}var Ce=e.get(ke.name,Ie),We=ke&&ke.ordinalMeta;return We?We.categories[Ce]:Ce}function G(Se,Ie){Ie==null&&(Ie=p);var ke=e.getItemVisual(Ie,"style"),Fe=ke&&ke.fill,Ce=ke&&ke.opacity,We=R(Ie,wd).getItemStyle();Fe!=null&&(We.fill=Fe),Ce!=null&&(We.opacity=Ce);var gt={inheritColor:gr(Fe)?Fe:"#000"},St=z(Ie,wd),et=Mn(St,null,gt,!1,!0);et.text=St.getShallow("show")?Yr(r.getFormattedLabel(Ie,wd),fv(e,Ie)):null;var ht=PS(St,gt,!1);return H(Se,We),We=g6(We,et,ht),Se&&Z(We,Se),We.legacy=!0,We}function Y(Se,Ie){Ie==null&&(Ie=p);var ke=R(Ie,rh).getItemStyle(),Fe=z(Ie,rh),Ce=Mn(Fe,null,null,!0,!0);Ce.text=Fe.getShallow("show")?Ju(r.getFormattedLabel(Ie,rh),r.getFormattedLabel(Ie,wd),fv(e,Ie)):null;var We=PS(Fe,null,!0);return H(Se,ke),ke=g6(ke,Ce,We),Se&&Z(ke,Se),ke.legacy=!0,ke}function Z(Se,Ie){for(var ke in Ie)wr(Ie,ke)&&(Se[ke]=Ie[ke])}function H(Se,Ie){Se&&(Se.textFill&&(Ie.textFill=Se.textFill),Se.textPosition&&(Ie.textPosition=Se.textPosition))}function re(Se,Ie){if(Ie==null&&(Ie=p),wr(p6,Se)){var ke=e.getItemVisual(Ie,"style");return ke?ke[p6[Se]]:null}if(wr(JCe,Se))return e.getItemVisual(Ie,Se)}function ne(Se){if(s.type==="cartesian2d"){var Ie=s.getBaseAxis();return I0e(zr({axis:Ie},Se))}}function se(){return t.getCurrentSeriesIndices()}function me(Se){return UL(Se,t)}}function IIe(r){var e={};return ue(r.dimensions,function(t){var i=r.getDimensionInfo(t);if(!i.isExtraCoord){var n=i.coordDim,s=e[n]=e[n]||[];s[i.coordDimIndex]=r.getDimensionIndex(t)}}),e}function qI(r,e,t,i,n,s,u){if(!i){s.remove(e);return}var a=iR(r,e,t,i,n,s);return a&&u.setItemGraphicEl(t,a),a&&Kn(a,i.focus,i.blurScope,i.emphasisDisabled),a}function iR(r,e,t,i,n,s){var u=-1,a=e;e&&TZ(e,i,n)&&(u=di(s.childrenRef(),e),e=null);var h=!e,p=e;p?p.clearStates():(p=tR(i),a&&SIe(a,p)),i.morph===!1?p.disableMorphing=!0:p.disableMorphing&&(p.disableMorphing=!1),nl.normal.cfg=nl.normal.conOpt=nl.emphasis.cfg=nl.emphasis.conOpt=nl.blur.cfg=nl.blur.conOpt=nl.select.cfg=nl.select.conOpt=null,nl.isLegacy=!1,DIe(p,t,i,n,h,nl),EIe(p,t,i,n,h),rR(r,p,t,i,nl,n,h),wr(i,"info")&&(th(p).info=i.info);for(var m=0;m<$d.length;m++){var v=$d[m];if(v!==wd){var x=rT(i,v),w=nR(i,x,v);SZ(v,p,x,w,nl)}}return AIe(p,i,n),i.type==="group"&&PIe(r,p,t,i,n),u>=0?s.replaceAt(p,u):s.add(p),p}function TZ(r,e,t){var i=th(r),n=e.type,s=e.shape,u=e.style;return t.isUniversalTransitionEnabled()||n!=null&&n!==i.customGraphicType||n==="path"&&OIe(s)&&MZ(s)!==i.customPathData||n==="image"&&wr(u,"image")&&u.image!==i.customImagePath}function EIe(r,e,t,i,n){var s=t.clipPath;if(s===!1)r&&r.getClipPath()&&r.removeClipPath();else if(s){var u=r.getClipPath();u&&TZ(u,s,i)&&(u=null),u||(u=tR(s),r.setClipPath(u)),rR(null,u,e,s,null,i,n)}}function DIe(r,e,t,i,n,s){if(!r.isGroup){w6(t,null,s),w6(t,rh,s);var u=s.normal.conOpt,a=s.emphasis.conOpt,h=s.blur.conOpt,p=s.select.conOpt;if(u!=null||a!=null||p!=null||h!=null){var m=r.getTextContent();if(u===!1)m&&r.removeTextContent();else{u=s.normal.conOpt=u||{type:"text"},m?m.clearStates():(m=tR(u),r.setTextContent(m)),rR(null,m,e,u,null,i,n);for(var v=u&&u.style,x=0;x<$d.length;x++){var w=$d[x];if(w!==wd){var T=s[w].conOpt;SZ(w,m,T,nR(u,T,w),null)}}v?m.dirty():m.markRedraw()}}}}function w6(r,e,t){var i=e?rT(r,e):r,n=e?nR(r,i,rh):r.style,s=r.type,u=i?i.textConfig:null,a=r.textContent,h=a?e?rT(a,e):a:null;if(n&&(t.isLegacy||vZ(n,s,!!u,!!h))){t.isLegacy=!0;var p=_Z(n,s,!e);!u&&p.textConfig&&(u=p.textConfig),!h&&p.textContent&&(h=p.textContent)}if(!e&&h){var m=h;!m.type&&(m.type="text")}var v=e?t[e]:t.normal;v.cfg=u,v.conOpt=h}function rT(r,e){return e?r?r[e]:null:r}function nR(r,e,t){var i=e&&e.style;return i==null&&t===rh&&r&&(i=r.styleEmphasis),i}function PIe(r,e,t,i,n){var s=i.children,u=s?s.length:0,a=i.$mergeChildren,h=a==="byName"||i.diffChildrenByName,p=a===!1;if(!(!u&&!h&&!p)){if(h){kIe({api:r,oldChildren:e.children()||[],newChildren:s||[],dataIndex:t,seriesModel:n,group:e});return}p&&e.removeAll();for(var m=0;m<u;m++){var v=s[m],x=e.childAt(m);v?(v.ignore==null&&(v.ignore=!1),iR(r,x,t,v,n,e)):x.ignore=!0}for(var w=e.childCount()-1;w>=m;w--){var T=e.childAt(w);LIe(e,T,n)}}}function LIe(r,e,t){e&&g2(e,th(r).option,t)}function kIe(r){new ch(r.oldChildren,r.newChildren,S6,S6,r).add(T6).update(T6).remove(RIe).execute()}function S6(r,e){var t=r&&r.name;return t!=null?t:bIe+e}function T6(r,e){var t=this.context,i=r!=null?t.newChildren[r]:null,n=e!=null?t.oldChildren[e]:null;iR(t.api,n,t.dataIndex,i,t.seriesModel,t.group)}function RIe(r){var e=this.context,t=e.oldChildren[r];t&&g2(t,th(t).option,e.seriesModel)}function MZ(r){return r&&(r.pathData||r.d)}function OIe(r){return r&&(wr(r,"pathData")||wr(r,"d"))}function zIe(r){r.registerChartView(MIe),r.registerSeriesModel(eIe)}var _p=ki(),M6=Nr,ZI=xr,BIe=function(){function r(){this._dragging=!1,this.animationThreshold=15}return r.prototype.render=function(e,t,i,n){var s=t.get("value"),u=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=i,!(!n&&this._lastValue===s&&this._lastStatus===u)){this._lastValue=s,this._lastStatus=u;var a=this._group,h=this._handle;if(!u||u==="hide"){a&&a.hide(),h&&h.hide();return}a&&a.show(),h&&h.show();var p={};this.makeElOption(p,s,e,t,i);var m=p.graphicKey;m!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=m;var v=this._moveAnimation=this.determineAnimation(e,t);if(!a)a=this._group=new Vr,this.createPointerEl(a,p,e,t),this.createLabelEl(a,p,e,t),i.getZr().add(a);else{var x=Qr(A6,t,v);this.updatePointerEl(a,p,x),this.updateLabelEl(a,p,x,t)}I6(a,t,!0),this._renderHandle(s)}},r.prototype.remove=function(e){this.clear(e)},r.prototype.dispose=function(e){this.clear(e)},r.prototype.determineAnimation=function(e,t){var i=t.get("animation"),n=e.axis,s=n.type==="category",u=t.get("snap");if(!u&&!s)return!1;if(i==="auto"||i==null){var a=this.animationThreshold;if(s&&n.getBandWidth()>a)return!0;if(u){var h=Ik(e).seriesDataCount,p=n.getExtent();return Math.abs(p[0]-p[1])/h>a}return!1}return i===!0},r.prototype.makeElOption=function(e,t,i,n,s){},r.prototype.createPointerEl=function(e,t,i,n){var s=t.pointer;if(s){var u=_p(e).pointerEl=new em[s.type](M6(t.pointer));e.add(u)}},r.prototype.createLabelEl=function(e,t,i,n){if(t.label){var s=_p(e).labelEl=new Ni(M6(t.label));e.add(s),C6(s,n)}},r.prototype.updatePointerEl=function(e,t,i){var n=_p(e).pointerEl;n&&t.pointer&&(n.setStyle(t.pointer.style),i(n,{shape:t.pointer.shape}))},r.prototype.updateLabelEl=function(e,t,i,n){var s=_p(e).labelEl;s&&(s.setStyle(t.label.style),i(s,{x:t.label.x,y:t.label.y}),C6(s,n))},r.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,i=this._api.getZr(),n=this._handle,s=t.getModel("handle"),u=t.get("status");if(!s.get("show")||!u||u==="hide"){n&&i.remove(n),this._handle=null;return}var a;this._handle||(a=!0,n=this._handle=_x(s.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(p){oh(p.event)},onmousedown:ZI(this._onHandleDragMove,this,0,0),drift:ZI(this._onHandleDragMove,this),ondragend:ZI(this._onHandleDragEnd,this)}),i.add(n)),I6(n,t,!1),n.setStyle(s.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var h=s.get("size");Nt(h)||(h=[h,h]),n.scaleX=h[0]/2,n.scaleY=h[1]/2,Nv(this,"_doDispatchAxisPointer",s.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,a)}},r.prototype._moveHandleToValue=function(e,t){A6(this._axisPointerModel,!t&&this._moveAnimation,this._handle,XI(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},r.prototype._onHandleDragMove=function(e,t){var i=this._handle;if(!!i){this._dragging=!0;var n=this.updateHandleTransform(XI(i),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=n,i.stopAnimation(),i.attr(XI(n)),_p(i).lastProp=null,this._doDispatchAxisPointer()}},r.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(!!e){var t=this._payloadInfo,i=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:i.axis.dim,axisIndex:i.componentIndex}]})}},r.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(!!e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},r.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),i=this._group,n=this._handle;t&&i&&(this._lastGraphicKey=null,i&&t.remove(i),n&&t.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),X0(this,"_doDispatchAxisPointer")},r.prototype.doClear=function(){},r.prototype.buildLabel=function(e,t,i){return i=i||0,{x:e[i],y:e[1-i],width:t[i],height:t[1-i]}},r}();function A6(r,e,t,i){AZ(_p(t).lastProp,i)||(_p(t).lastProp=i,e?ji(t,i,r):(t.stopAnimation(),t.attr(i)))}function AZ(r,e){if(Br(r)&&Br(e)){var t=!0;return ue(e,function(i,n){t=t&&AZ(r[n],i)}),!!t}else return r===e}function C6(r,e){r[e.get(["label","show"])?"show":"hide"]()}function XI(r){return{x:r.x||0,y:r.y||0,rotation:r.rotation||0}}function I6(r,e,t){var i=e.get("z"),n=e.get("zlevel");r&&r.traverse(function(s){s.type!=="group"&&(i!=null&&(s.z=i),n!=null&&(s.zlevel=n),s.silent=t)})}var aR=BIe;function oR(r){var e=r.get("type"),t=r.getModel(e+"Style"),i;return e==="line"?(i=t.getLineStyle(),i.fill=null):e==="shadow"&&(i=t.getAreaStyle(),i.stroke=null),i}function CZ(r,e,t,i,n){var s=t.get("value"),u=IZ(s,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),a=t.getModel("label"),h=Rv(a.get("padding")||0),p=a.getFont(),m=fx(u,p),v=n.position,x=m.width+h[1]+h[3],w=m.height+h[0]+h[2],T=n.align;T==="right"&&(v[0]-=x),T==="center"&&(v[0]-=x/2);var C=n.verticalAlign;C==="bottom"&&(v[1]-=w),C==="middle"&&(v[1]-=w/2),FIe(v,x,w,i);var I=a.get("backgroundColor");(!I||I==="auto")&&(I=e.get(["axisLine","lineStyle","color"])),r.label={x:v[0],y:v[1],style:Mn(a,{text:u,font:p,fill:a.getTextColor(),padding:h,backgroundColor:I}),z2:10}}function FIe(r,e,t,i){var n=i.getWidth(),s=i.getHeight();r[0]=Math.min(r[0]+e,n)-e,r[1]=Math.min(r[1]+t,s)-t,r[0]=Math.max(r[0],0),r[1]=Math.max(r[1],0)}function IZ(r,e,t,i,n){r=e.scale.parse(r);var s=e.scale.getLabel({value:r},{precision:n.precision}),u=n.formatter;if(u){var a={value:_k(e,{value:r}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};ue(i,function(h){var p=t.getSeriesByIndex(h.seriesIndex),m=h.dataIndexInside,v=p&&p.getDataParams(m);v&&a.seriesData.push(v)}),gr(u)?s=u.replace("{value}",s):kr(u)&&(s=u(a))}return s}function sR(r,e,t){var i=ks();return Qp(i,i,t.rotation),nc(i,i,t.position),tu([r.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],i)}function EZ(r,e,t,i,n,s){var u=hh.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=n.get(["label","margin"]),CZ(e,i,n,s,{position:sR(i.axis,r,t),align:u.textAlign,verticalAlign:u.textVerticalAlign})}function lR(r,e,t){return t=t||0,{x1:r[t],y1:r[1-t],x2:e[t],y2:e[1-t]}}function DZ(r,e,t){return t=t||0,{x:r[t],y:r[1-t],width:e[t],height:e[1-t]}}function E6(r,e,t,i,n,s){return{cx:r,cy:e,r0:t,r:i,startAngle:n,endAngle:s,clockwise:!0}}var NIe=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,i,n,s,u){var a=n.axis,h=a.grid,p=s.get("type"),m=D6(h,a).getOtherAxis(a).getGlobalExtent(),v=a.toGlobalCoord(a.dataToCoord(i,!0));if(p&&p!=="none"){var x=oR(s),w=VIe[p](a,v,m);w.style=x,t.graphicKey=w.type,t.pointer=w}var T=WD(h.model,n);EZ(i,t,T,n,s,u)},e.prototype.getHandleTransform=function(t,i,n){var s=WD(i.axis.grid.model,i,{labelInside:!1});s.labelMargin=n.get(["handle","margin"]);var u=sR(i.axis,t,s);return{x:u[0],y:u[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,i,n,s){var u=n.axis,a=u.grid,h=u.getGlobalExtent(!0),p=D6(a,u).getOtherAxis(u).getGlobalExtent(),m=u.dim==="x"?0:1,v=[t.x,t.y];v[m]+=i[m],v[m]=Math.min(h[1],v[m]),v[m]=Math.max(h[0],v[m]);var x=(p[1]+p[0])/2,w=[x,x];w[m]=v[m];var T=[{verticalAlign:"middle"},{align:"center"}];return{x:v[0],y:v[1],rotation:t.rotation,cursorPoint:w,tooltipOption:T[m]}},e}(aR);function D6(r,e){var t={};return t[e.dim+"AxisIndex"]=e.index,r.getCartesian(t)}var VIe={line:function(r,e,t){var i=lR([e,t[0]],[e,t[1]],P6(r));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(r,e,t){var i=Math.max(1,r.getBandWidth()),n=t[1]-t[0];return{type:"Rect",shape:DZ([e-i/2,t[0]],[i,n],P6(r))}}};function P6(r){return r.dim==="x"?0:1}var $Ie=NIe,GIe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(Oi),UIe=GIe,Yc=ki(),jIe=ue;function PZ(r,e,t){if(!Fi.node){var i=e.getZr();Yc(i).records||(Yc(i).records={}),HIe(i,e);var n=Yc(i).records[r]||(Yc(i).records[r]={});n.handler=t}}function HIe(r,e){if(Yc(r).initialized)return;Yc(r).initialized=!0,t("click",Qr(L6,"click")),t("mousemove",Qr(L6,"mousemove")),t("globalout",qIe);function t(i,n){r.on(i,function(s){var u=ZIe(e);jIe(Yc(r).records,function(a){a&&n(a,s,u.dispatchAction)}),WIe(u.pendings,e)})}}function WIe(r,e){var t=r.showTip.length,i=r.hideTip.length,n;t?n=r.showTip[t-1]:i&&(n=r.hideTip[i-1]),n&&(n.dispatchAction=null,e.dispatchAction(n))}function qIe(r,e,t){r.handler("leave",null,t)}function L6(r,e,t,i){e.handler(r,t,i)}function ZIe(r){var e={showTip:[],hideTip:[]},t=function(i){var n=e[i.type];n?n.push(i):(i.dispatchAction=t,r.dispatchAction(i))};return{dispatchAction:t,pendings:e}}function hP(r,e){if(!Fi.node){var t=e.getZr(),i=(Yc(t).records||{})[r];i&&(Yc(t).records[r]=null)}}var XIe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n){var s=i.getComponent("tooltip"),u=t.get("triggerOn")||s&&s.get("triggerOn")||"mousemove|click";PZ("axisPointer",n,function(a,h,p){u!=="none"&&(a==="leave"||u.indexOf(a)>=0)&&p({type:"updateAxisPointer",currTrigger:a,x:h&&h.offsetX,y:h&&h.offsetY})})},e.prototype.remove=function(t,i){hP("axisPointer",i)},e.prototype.dispose=function(t,i){hP("axisPointer",i)},e.type="axisPointer",e}(Jn),YIe=XIe;function LZ(r,e){var t=[],i=r.seriesIndex,n;if(i==null||!(n=e.getSeriesByIndex(i)))return{point:[]};var s=n.getData(),u=Hp(s,r);if(u==null||u<0||Nt(u))return{point:[]};var a=s.getItemGraphicEl(u),h=n.coordinateSystem;if(n.getTooltipPosition)t=n.getTooltipPosition(u)||[];else if(h&&h.dataToPoint)if(r.isStacked){var p=h.getBaseAxis(),m=h.getOtherAxis(p),v=m.dim,x=p.dim,w=v==="x"||v==="radius"?1:0,T=s.mapDimension(x),C=[];C[w]=s.get(T,u),C[1-w]=s.get(s.getCalculationInfo("stackResultDimension"),u),t=h.dataToPoint(C)||[]}else t=h.dataToPoint(s.getValues(Ht(h.dimensions,function(k){return s.mapDimension(k)}),u))||[];else if(a){var I=a.getBoundingRect().clone();I.applyTransform(a.transform),t=[I.x+I.width/2,I.y+I.height/2]}return{point:t,el:a}}var k6=ki();function KIe(r,e,t){var i=r.currTrigger,n=[r.x,r.y],s=r,u=r.dispatchAction||xr(t.dispatchAction,t),a=e.getComponent("axisPointer").coordSysAxesInfo;if(!!a){aS(n)&&(n=LZ({seriesIndex:s.seriesIndex,dataIndex:s.dataIndex},e).point);var h=aS(n),p=s.axesInfo,m=a.axesInfo,v=i==="leave"||aS(n),x={},w={},T={list:[],map:{}},C={showPointer:Qr(QIe,w),showTooltip:Qr(eEe,T)};ue(a.coordSysMap,function(k,R){var z=h||k.containPoint(n);ue(a.coordSysAxesInfo[R],function($,j){var G=$.axis,Y=nEe(p,$);if(!v&&z&&(!p||Y)){var Z=Y&&Y.value;Z==null&&!h&&(Z=G.pointToData(n)),Z!=null&&R6($,Z,C,!1,x)}})});var I={};return ue(m,function(k,R){var z=k.linkGroup;z&&!w[R]&&ue(z.axesInfo,function($,j){var G=w[j];if($!==k&&G){var Y=G.value;z.mapper&&(Y=k.axis.scale.parse(z.mapper(Y,O6($),O6(k)))),I[k.key]=Y}})}),ue(I,function(k,R){R6(m[R],k,C,!0,x)}),tEe(w,m,x),rEe(T,n,r,u),iEe(m,u,t),x}}function R6(r,e,t,i,n){var s=r.axis;if(!(s.scale.isBlank()||!s.containData(e))){if(!r.involveSeries){t.showPointer(r,e);return}var u=JIe(e,r),a=u.payloadBatch,h=u.snapToValue;a[0]&&n.seriesIndex==null&&kt(n,a[0]),!i&&r.snap&&s.containData(h)&&h!=null&&(e=h),t.showPointer(r,e,a),t.showTooltip(r,u,h)}}function JIe(r,e){var t=e.axis,i=t.dim,n=r,s=[],u=Number.MAX_VALUE,a=-1;return ue(e.seriesModels,function(h,p){var m=h.getData().mapDimensionsAll(i),v,x;if(h.getAxisTooltipData){var w=h.getAxisTooltipData(m,r,t);x=w.dataIndices,v=w.nestestValue}else{if(x=h.getData().indicesOfNearest(m[0],r,t.type==="category"?.5:null),!x.length)return;v=h.getData().get(m[0],x[0])}if(!(v==null||!isFinite(v))){var T=r-v,C=Math.abs(T);C<=u&&((C<u||T>=0&&a<0)&&(u=C,a=T,n=v,s.length=0),ue(x,function(I){s.push({seriesIndex:h.seriesIndex,dataIndexInside:I,dataIndex:h.getData().getRawIndex(I)})}))}}),{payloadBatch:s,snapToValue:n}}function QIe(r,e,t,i){r[e.key]={value:t,payloadBatch:i}}function eEe(r,e,t,i){var n=t.payloadBatch,s=e.axis,u=s.model,a=e.axisPointerModel;if(!(!e.triggerTooltip||!n.length)){var h=e.coordSys.model,p=tx(h),m=r.map[p];m||(m=r.map[p]={coordSysId:h.id,coordSysIndex:h.componentIndex,coordSysType:h.type,coordSysMainType:h.mainType,dataByAxis:[]},r.list.push(m)),m.dataByAxis.push({axisDim:s.dim,axisIndex:u.componentIndex,axisType:u.type,axisId:u.id,value:i,valueLabelOpt:{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])},seriesDataIndices:n.slice()})}}function tEe(r,e,t){var i=t.axesInfo=[];ue(e,function(n,s){var u=n.axisPointerModel.option,a=r[s];a?(!n.useHandle&&(u.status="show"),u.value=a.value,u.seriesDataIndices=(a.payloadBatch||[]).slice()):!n.useHandle&&(u.status="hide"),u.status==="show"&&i.push({axisDim:n.axis.dim,axisIndex:n.axis.model.componentIndex,value:u.value})})}function rEe(r,e,t,i){if(aS(e)||!r.list.length){i({type:"hideTip"});return}var n=((r.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:n.dataIndexInside,dataIndex:n.dataIndex,seriesIndex:n.seriesIndex,dataByCoordSys:r.list})}function iEe(r,e,t){var i=t.getZr(),n="axisPointerLastHighlights",s=k6(i)[n]||{},u=k6(i)[n]={};ue(r,function(p,m){var v=p.axisPointerModel.option;v.status==="show"&&p.triggerEmphasis&&ue(v.seriesDataIndices,function(x){var w=x.seriesIndex+" | "+x.dataIndex;u[w]=x})});var a=[],h=[];ue(s,function(p,m){!u[m]&&h.push(p)}),ue(u,function(p,m){!s[m]&&a.push(p)}),h.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:h}),a.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:a})}function nEe(r,e){for(var t=0;t<(r||[]).length;t++){var i=r[t];if(e.axis.dim===i.axisDim&&e.axis.model.componentIndex===i.axisIndex)return i}}function O6(r){var e=r.axis.model,t={},i=t.axisDim=r.axis.dim;return t.axisIndex=t[i+"AxisIndex"]=e.componentIndex,t.axisName=t[i+"AxisName"]=e.name,t.axisId=t[i+"AxisId"]=e.id,t}function aS(r){return!r||r[0]==null||isNaN(r[0])||r[1]==null||isNaN(r[1])}function kx(r){am.registerAxisPointerClass("CartesianAxisPointer",$Ie),r.registerComponentModel(UIe),r.registerComponentView(YIe),r.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!Nt(t)&&(e.axisPointer.link=[t])}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=Hbe(e,t)}),r.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},KIe)}function aEe(r){gi(n9),gi(kx)}var oEe=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,i,n,s,u){var a=n.axis;a.dim==="angle"&&(this.animationThreshold=Math.PI/18);var h=a.polar,p=h.getOtherAxis(a),m=p.getExtent(),v=a.dataToCoord(i),x=s.get("type");if(x&&x!=="none"){var w=oR(s),T=lEe[x](a,h,v,m);T.style=w,t.graphicKey=T.type,t.pointer=T}var C=s.get(["label","margin"]),I=sEe(i,n,s,h,C);CZ(t,n,s,u,I)},e}(aR);function sEe(r,e,t,i,n){var s=e.axis,u=s.dataToCoord(r),a=i.getAngleAxis().getExtent()[0];a=a/180*Math.PI;var h=i.getRadiusAxis().getExtent(),p,m,v;if(s.dim==="radius"){var x=ks();Qp(x,x,a),nc(x,x,[i.cx,i.cy]),p=tu([u,-n],x);var w=e.getModel("axisLabel").get("rotate")||0,T=hh.innerTextLayout(a,w*Math.PI/180,-1);m=T.textAlign,v=T.textVerticalAlign}else{var C=h[1];p=i.coordToPoint([C+n,u]);var I=i.cx,k=i.cy;m=Math.abs(p[0]-I)/C<.3?"center":p[0]>I?"left":"right",v=Math.abs(p[1]-k)/C<.3?"middle":p[1]>k?"top":"bottom"}return{position:p,align:m,verticalAlign:v}}var lEe={line:function(r,e,t,i){return r.dim==="angle"?{type:"Line",shape:lR(e.coordToPoint([i[0],t]),e.coordToPoint([i[1],t]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:t}}},shadow:function(r,e,t,i){var n=Math.max(1,r.getBandWidth()),s=Math.PI/180;return r.dim==="angle"?{type:"Sector",shape:E6(e.cx,e.cy,i[0],i[1],(-t-n/2)*s,(-t+n/2)*s)}:{type:"Sector",shape:E6(e.cx,e.cy,t-n/2,t+n/2,0,Math.PI*2)}}},uEe=oEe,cEe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.findAxisModel=function(t){var i,n=this.ecModel;return n.eachComponent(t,function(s){s.getCoordSysModel()===this&&(i=s)},this),i},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e}(Oi),hEe=cEe,uR=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",da).models[0]},e.type="polarAxis",e}(Oi);pa(uR,Tx);var dEe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="angleAxis",e}(uR),fEe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="radiusAxis",e}(uR),cR=function(r){lt(e,r);function e(t,i){return r.call(this,"radius",t,i)||this}return e.prototype.pointToData=function(t,i){return this.polar.pointToData(t,i)[this.dim==="radius"?0:1]},e}(lu);cR.prototype.dataToRadius=lu.prototype.dataToCoord;cR.prototype.radiusToData=lu.prototype.coordToData;var pEe=cR,mEe=ki(),hR=function(r){lt(e,r);function e(t,i){return r.call(this,"angle",t,i||[0,360])||this}return e.prototype.pointToData=function(t,i){return this.polar.pointToData(t,i)[this.dim==="radius"?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,i=t.getLabelModel(),n=t.scale,s=n.getExtent(),u=n.count();if(s[1]-s[0]<1)return 0;var a=s[0],h=t.dataToCoord(a+1)-t.dataToCoord(a),p=Math.abs(h),m=fx(a==null?"":a+"",i.getFont(),"center","top"),v=Math.max(m.height,7),x=v/p;isNaN(x)&&(x=1/0);var w=Math.max(0,Math.floor(x)),T=mEe(t.model),C=T.lastAutoInterval,I=T.lastTickCount;return C!=null&&I!=null&&Math.abs(C-w)<=1&&Math.abs(I-u)<=1&&C>w?w=C:(T.lastTickCount=u,T.lastAutoInterval=w),w},e}(lu);hR.prototype.dataToAngle=lu.prototype.dataToCoord;hR.prototype.angleToData=lu.prototype.coordToData;var gEe=hR,kZ=["radius","angle"],vEe=function(){function r(e){this.dimensions=kZ,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new pEe,this._angleAxis=new gEe,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return r.prototype.containPoint=function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},r.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},r.prototype.getAxis=function(e){var t="_"+e+"Axis";return this[t]},r.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},r.prototype.getAxesByScale=function(e){var t=[],i=this._angleAxis,n=this._radiusAxis;return i.scale.type===e&&t.push(i),n.scale.type===e&&t.push(n),t},r.prototype.getAngleAxis=function(){return this._angleAxis},r.prototype.getRadiusAxis=function(){return this._radiusAxis},r.prototype.getOtherAxis=function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},r.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},r.prototype.getTooltipAxes=function(e){var t=e!=null&&e!=="auto"?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},r.prototype.dataToPoint=function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},r.prototype.pointToData=function(e,t){var i=this.pointToCoord(e);return[this._radiusAxis.radiusToData(i[0],t),this._angleAxis.angleToData(i[1],t)]},r.prototype.pointToCoord=function(e){var t=e[0]-this.cx,i=e[1]-this.cy,n=this.getAngleAxis(),s=n.getExtent(),u=Math.min(s[0],s[1]),a=Math.max(s[0],s[1]);n.inverse?u=a-360:a=u+360;var h=Math.sqrt(t*t+i*i);t/=h,i/=h;for(var p=Math.atan2(-i,t)/Math.PI*180,m=p<u?1:-1;p<u||p>a;)p+=m*360;return[h,p]},r.prototype.coordToPoint=function(e){var t=e[0],i=e[1]/180*Math.PI,n=Math.cos(i)*t+this.cx,s=-Math.sin(i)*t+this.cy;return[n,s]},r.prototype.getArea=function(){var e=this.getAngleAxis(),t=this.getRadiusAxis(),i=t.getExtent().slice();i[0]>i[1]&&i.reverse();var n=e.getExtent(),s=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:i[0],r:i[1],startAngle:-n[0]*s,endAngle:-n[1]*s,clockwise:e.inverse,contain:function(u,a){var h=u-this.cx,p=a-this.cy,m=h*h+p*p-1e-4,v=this.r,x=this.r0;return m<=v*v&&m>=x*x}}},r.prototype.convertToPixel=function(e,t,i){var n=z6(t);return n===this?this.dataToPoint(i):null},r.prototype.convertFromPixel=function(e,t,i){var n=z6(t);return n===this?this.pointToData(i):null},r}();function z6(r){var e=r.seriesModel,t=r.polarModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}var _Ee=vEe;function yEe(r,e,t){var i=e.get("center"),n=t.getWidth(),s=t.getHeight();r.cx=sr(i[0],n),r.cy=sr(i[1],s);var u=r.getRadiusAxis(),a=Math.min(n,s)/2,h=e.get("radius");h==null?h=[0,"100%"]:Nt(h)||(h=[0,h]);var p=[sr(h[0],a),sr(h[1],a)];u.inverse?u.setExtent(p[1],p[0]):u.setExtent(p[0],p[1])}function xEe(r,e){var t=this,i=t.getAngleAxis(),n=t.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),n.scale.setExtent(1/0,-1/0),r.eachSeries(function(a){if(a.coordinateSystem===t){var h=a.getData();ue(GS(h,"radius"),function(p){n.scale.unionExtentFromData(h,p)}),ue(GS(h,"angle"),function(p){i.scale.unionExtentFromData(h,p)})}}),dv(i.scale,i.model),dv(n.scale,n.model),i.type==="category"&&!i.onBand){var s=i.getExtent(),u=360/i.scale.count();i.inverse?s[1]+=u:s[1]-=u,i.setExtent(s[0],s[1])}}function bEe(r){return r.mainType==="angleAxis"}function B6(r,e){var t;if(r.type=e.get("type"),r.scale=u2(e),r.onBand=e.get("boundaryGap")&&r.type==="category",r.inverse=e.get("inverse"),bEe(e)){r.inverse=r.inverse!==e.get("clockwise");var i=e.get("startAngle"),n=(t=e.get("endAngle"))!==null&&t!==void 0?t:i+(r.inverse?-360:360);r.setExtent(i,n)}e.axis=r,r.model=e}var wEe={dimensions:kZ,create:function(r,e){var t=[];return r.eachComponent("polar",function(i,n){var s=new _Ee(n+"");s.update=xEe;var u=s.getRadiusAxis(),a=s.getAngleAxis(),h=i.findAxisModel("radiusAxis"),p=i.findAxisModel("angleAxis");B6(u,h),B6(a,p),yEe(s,i,e),t.push(s),i.coordinateSystem=s,s.model=i}),r.eachSeries(function(i){if(i.get("coordinateSystem")==="polar"){var n=i.getReferringComponents("polar",da).models[0];i.coordinateSystem=n.coordinateSystem}}),t}},SEe=wEe,TEe=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function Aw(r,e,t){e[1]>e[0]&&(e=e.slice().reverse());var i=r.coordToPoint([e[0],t]),n=r.coordToPoint([e[1],t]);return{x1:i[0],y1:i[1],x2:n[0],y2:n[1]}}function Cw(r){var e=r.getRadiusAxis();return e.inverse?0:1}function F6(r){var e=r[0],t=r[r.length-1];e&&t&&Math.abs(Math.abs(e.coord-t.coord)-360)<1e-4&&r.pop()}var MEe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,i){if(this.group.removeAll(),!!t.get("show")){var n=t.axis,s=n.polar,u=s.getRadiusAxis().getExtent(),a=n.getTicksCoords(),h=n.getMinorTicksCoords(),p=Ht(n.getViewLabels(),function(m){m=Nr(m);var v=n.scale,x=v.type==="ordinal"?v.getRawOrdinalNumber(m.tickValue):m.tickValue;return m.coord=n.dataToCoord(x),m});F6(p),F6(a),ue(TEe,function(m){t.get([m,"show"])&&(!n.scale.isBlank()||m==="axisLine")&&AEe[m](this.group,t,s,a,h,u,p)},this)}},e.type="angleAxis",e}(am),AEe={axisLine:function(r,e,t,i,n,s){var u=e.getModel(["axisLine","lineStyle"]),a=t.getAngleAxis(),h=Math.PI/180,p=a.getExtent(),m=Cw(t),v=m?0:1,x,w=Math.abs(p[1]-p[0])===360?"Circle":"Arc";s[v]===0?x=new em[w]({shape:{cx:t.cx,cy:t.cy,r:s[m],startAngle:-p[0]*h,endAngle:-p[1]*h,clockwise:a.inverse},style:u.getLineStyle(),z2:1,silent:!0}):x=new HT({shape:{cx:t.cx,cy:t.cy,r:s[m],r0:s[v]},style:u.getLineStyle(),z2:1,silent:!0}),x.style.fill=null,r.add(x)},axisTick:function(r,e,t,i,n,s){var u=e.getModel("axisTick"),a=(u.get("inside")?-1:1)*u.get("length"),h=s[Cw(t)],p=Ht(i,function(m){return new Ua({shape:Aw(t,[h,h+a],m.coord)})});r.add(dl(p,{style:zr(u.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(r,e,t,i,n,s){if(!!n.length){for(var u=e.getModel("axisTick"),a=e.getModel("minorTick"),h=(u.get("inside")?-1:1)*a.get("length"),p=s[Cw(t)],m=[],v=0;v<n.length;v++)for(var x=0;x<n[v].length;x++)m.push(new Ua({shape:Aw(t,[p,p+h],n[v][x].coord)}));r.add(dl(m,{style:zr(a.getModel("lineStyle").getLineStyle(),zr(u.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(r,e,t,i,n,s,u){var a=e.getCategories(!0),h=e.getModel("axisLabel"),p=h.get("margin"),m=e.get("triggerEvent");ue(u,function(v,x){var w=h,T=v.tickValue,C=s[Cw(t)],I=t.coordToPoint([C+p,v.coord]),k=t.cx,R=t.cy,z=Math.abs(I[0]-k)/C<.3?"center":I[0]>k?"left":"right",$=Math.abs(I[1]-R)/C<.3?"middle":I[1]>R?"top":"bottom";if(a&&a[T]){var j=a[T];Br(j)&&j.textStyle&&(w=new An(j.textStyle,h,h.ecModel))}var G=new Ni({silent:hh.isLabelSilent(e),style:Mn(w,{x:I[0],y:I[1],fill:w.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:v.formattedLabel,align:z,verticalAlign:$})});if(r.add(G),m){var Y=hh.makeAxisEventDataBase(e);Y.targetType="axisLabel",Y.value=v.rawLabel,Gr(G).eventData=Y}},this)},splitLine:function(r,e,t,i,n,s){var u=e.getModel("splitLine"),a=u.getModel("lineStyle"),h=a.get("color"),p=0;h=h instanceof Array?h:[h];for(var m=[],v=0;v<i.length;v++){var x=p++%h.length;m[x]=m[x]||[],m[x].push(new Ua({shape:Aw(t,s,i[v].coord)}))}for(var v=0;v<m.length;v++)r.add(dl(m[v],{style:zr({stroke:h[v%h.length]},a.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(r,e,t,i,n,s){if(!!n.length){for(var u=e.getModel("minorSplitLine"),a=u.getModel("lineStyle"),h=[],p=0;p<n.length;p++)for(var m=0;m<n[p].length;m++)h.push(new Ua({shape:Aw(t,s,n[p][m].coord)}));r.add(dl(h,{style:a.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(r,e,t,i,n,s){if(!!i.length){var u=e.getModel("splitArea"),a=u.getModel("areaStyle"),h=a.get("color"),p=0;h=h instanceof Array?h:[h];for(var m=[],v=Math.PI/180,x=-i[0].coord*v,w=Math.min(s[0],s[1]),T=Math.max(s[0],s[1]),C=e.get("clockwise"),I=1,k=i.length;I<=k;I++){var R=I===k?i[0].coord:i[I].coord,z=p++%h.length;m[z]=m[z]||[],m[z].push(new cs({shape:{cx:t.cx,cy:t.cy,r0:w,r:T,startAngle:x,endAngle:-R*v,clockwise:C},silent:!0})),x=-R*v}for(var I=0;I<m.length;I++)r.add(dl(m[I],{style:zr({fill:h[I%h.length]},a.getAreaStyle()),silent:!0}))}}},CEe=MEe,IEe=["axisLine","axisTickLabel","axisName"],EEe=["splitLine","splitArea","minorSplitLine"],DEe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,i){if(this.group.removeAll(),!!t.get("show")){var n=this._axisGroup,s=this._axisGroup=new Vr;this.group.add(s);var u=t.axis,a=u.polar,h=a.getAngleAxis(),p=u.getTicksCoords(),m=u.getMinorTicksCoords(),v=h.getExtent()[0],x=u.getExtent(),w=LEe(a,t,v),T=new hh(t,w);ue(IEe,T.add,T),s.add(T.getGroup()),vx(n,s,t),ue(EEe,function(C){t.get([C,"show"])&&!u.scale.isBlank()&&PEe[C](this.group,t,a,v,x,p,m)},this)}},e.type="radiusAxis",e}(am),PEe={splitLine:function(r,e,t,i,n,s){var u=e.getModel("splitLine"),a=u.getModel("lineStyle"),h=a.get("color"),p=0,m=t.getAngleAxis(),v=Math.PI/180,x=m.getExtent(),w=Math.abs(x[1]-x[0])===360?"Circle":"Arc";h=h instanceof Array?h:[h];for(var T=[],C=0;C<s.length;C++){var I=p++%h.length;T[I]=T[I]||[],T[I].push(new em[w]({shape:{cx:t.cx,cy:t.cy,r:Math.max(s[C].coord,0),startAngle:-x[0]*v,endAngle:-x[1]*v,clockwise:m.inverse}}))}for(var C=0;C<T.length;C++)r.add(dl(T[C],{style:zr({stroke:h[C%h.length],fill:null},a.getLineStyle()),silent:!0}))},minorSplitLine:function(r,e,t,i,n,s,u){if(!!u.length){for(var a=e.getModel("minorSplitLine"),h=a.getModel("lineStyle"),p=[],m=0;m<u.length;m++)for(var v=0;v<u[m].length;v++)p.push(new jd({shape:{cx:t.cx,cy:t.cy,r:u[m][v].coord}}));r.add(dl(p,{style:zr({fill:null},h.getLineStyle()),silent:!0}))}},splitArea:function(r,e,t,i,n,s){if(!!s.length){var u=e.getModel("splitArea"),a=u.getModel("areaStyle"),h=a.get("color"),p=0;h=h instanceof Array?h:[h];for(var m=[],v=s[0].coord,x=1;x<s.length;x++){var w=p++%h.length;m[w]=m[w]||[],m[w].push(new cs({shape:{cx:t.cx,cy:t.cy,r0:v,r:s[x].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),v=s[x].coord}for(var x=0;x<m.length;x++)r.add(dl(m[x],{style:zr({fill:h[x%h.length]},a.getAreaStyle()),silent:!0}))}}};function LEe(r,e,t){return{position:[r.cx,r.cy],rotation:t/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}var kEe=DEe;function RZ(r){return r.get("stack")||"__ec_stack_"+r.seriesIndex}function OZ(r,e){return e.dim+r.model.componentIndex}function REe(r,e,t){var i={},n=OEe(un(e.getSeriesByType(r),function(s){return!e.isSeriesFiltered(s)&&s.coordinateSystem&&s.coordinateSystem.type==="polar"}));e.eachSeriesByType(r,function(s){if(s.coordinateSystem.type==="polar"){var u=s.getData(),a=s.coordinateSystem,h=a.getBaseAxis(),p=OZ(a,h),m=RZ(s),v=n[p][m],x=v.offset,w=v.width,T=a.getOtherAxis(h),C=s.coordinateSystem.cx,I=s.coordinateSystem.cy,k=s.get("barMinHeight")||0,R=s.get("barMinAngle")||0;i[m]=i[m]||[];for(var z=u.mapDimension(T.dim),$=u.mapDimension(h.dim),j=Fd(u,z),G=h.dim!=="radius"||!s.get("roundCap",!0),Y=T.dataToCoord(0),Z=0,H=u.count();Z<H;Z++){var re=u.get(z,Z),ne=u.get($,Z),se=re>=0?"p":"n",me=Y;j&&(i[m][ne]||(i[m][ne]={p:Y,n:Y}),me=i[m][ne][se]);var Se=void 0,Ie=void 0,ke=void 0,Fe=void 0;if(T.dim==="radius"){var Ce=T.dataToCoord(re)-Y,We=h.dataToCoord(ne);Math.abs(Ce)<k&&(Ce=(Ce<0?-1:1)*k),Se=me,Ie=me+Ce,ke=We-x,Fe=ke-w,j&&(i[m][ne][se]=Ie)}else{var gt=T.dataToCoord(re,G)-Y,St=h.dataToCoord(ne);Math.abs(gt)<R&&(gt=(gt<0?-1:1)*R),Se=St+x,Ie=Se+w,ke=me,Fe=me+gt,j&&(i[m][ne][se]=Fe)}u.setItemLayout(Z,{cx:C,cy:I,r0:Se,r:Ie,startAngle:-ke*Math.PI/180,endAngle:-Fe*Math.PI/180,clockwise:ke>=Fe})}}})}function OEe(r){var e={};ue(r,function(i,n){var s=i.getData(),u=i.coordinateSystem,a=u.getBaseAxis(),h=OZ(u,a),p=a.getExtent(),m=a.type==="category"?a.getBandWidth():Math.abs(p[1]-p[0])/s.count(),v=e[h]||{bandWidth:m,remainedWidth:m,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},x=v.stacks;e[h]=v;var w=RZ(i);x[w]||v.autoWidthCount++,x[w]=x[w]||{width:0,maxWidth:0};var T=sr(i.get("barWidth"),m),C=sr(i.get("barMaxWidth"),m),I=i.get("barGap"),k=i.get("barCategoryGap");T&&!x[w].width&&(T=Math.min(v.remainedWidth,T),x[w].width=T,v.remainedWidth-=T),C&&(x[w].maxWidth=C),I!=null&&(v.gap=I),k!=null&&(v.categoryGap=k)});var t={};return ue(e,function(i,n){t[n]={};var s=i.stacks,u=i.bandWidth,a=sr(i.categoryGap,u),h=sr(i.gap,1),p=i.remainedWidth,m=i.autoWidthCount,v=(p-a)/(m+(m-1)*h);v=Math.max(v,0),ue(s,function(C,I){var k=C.maxWidth;k&&k<v&&(k=Math.min(k,p),C.width&&(k=Math.min(k,C.width)),p-=k,C.width=k,m--)}),v=(p-a)/(m+(m-1)*h),v=Math.max(v,0);var x=0,w;ue(s,function(C,I){C.width||(C.width=v),w=C,x+=C.width*(1+h)}),w&&(x-=w.width*h);var T=-x/2;ue(s,function(C,I){t[n][I]=t[n][I]||{offset:T,width:C.width},T+=C.width*(1+h)})}),t}var zEe={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},BEe={splitNumber:5},FEe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="polar",e}(Jn);function NEe(r){gi(kx),am.registerAxisPointerClass("PolarAxisPointer",uEe),r.registerCoordinateSystem("polar",SEe),r.registerComponentModel(hEe),r.registerComponentView(FEe),pv(r,"angle",dEe,zEe),pv(r,"radius",fEe,BEe),r.registerComponentView(CEe),r.registerComponentView(kEe),r.registerLayout(Qr(REe,"bar"))}function dP(r,e){e=e||{};var t=r.coordinateSystem,i=r.axis,n={},s=i.position,u=i.orient,a=t.getRect(),h=[a.x,a.x+a.width,a.y,a.y+a.height],p={horizontal:{top:h[2],bottom:h[3]},vertical:{left:h[0],right:h[1]}};n.position=[u==="vertical"?p.vertical[s]:h[0],u==="horizontal"?p.horizontal[s]:h[3]];var m={horizontal:0,vertical:1};n.rotation=Math.PI/2*m[u];var v={top:-1,bottom:1,right:1,left:-1};n.labelDirection=n.tickDirection=n.nameDirection=v[s],r.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),Ga(e.labelInside,r.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var x=e.rotate;return x==null&&(x=r.get(["axisLabel","rotate"])),n.labelRotation=s==="top"?-x:x,n.z2=1,n}var VEe=["axisLine","axisTickLabel","axisName"],$Ee=["splitArea","splitLine"],GEe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="SingleAxisPointer",t}return e.prototype.render=function(t,i,n,s){var u=this.group;u.removeAll();var a=this._axisGroup;this._axisGroup=new Vr;var h=dP(t),p=new hh(t,h);ue(VEe,p.add,p),u.add(this._axisGroup),u.add(p.getGroup()),ue($Ee,function(m){t.get([m,"show"])&&UEe[m](this,this.group,this._axisGroup,t)},this),vx(a,this._axisGroup,t),r.prototype.render.call(this,t,i,n,s)},e.prototype.remove=function(){t9(this)},e.type="singleAxis",e}(am),UEe={splitLine:function(r,e,t,i){var n=i.axis;if(!n.scale.isBlank()){var s=i.getModel("splitLine"),u=s.getModel("lineStyle"),a=u.get("color");a=a instanceof Array?a:[a];for(var h=u.get("width"),p=i.coordinateSystem.getRect(),m=n.isHorizontal(),v=[],x=0,w=n.getTicksCoords({tickModel:s}),T=[],C=[],I=0;I<w.length;++I){var k=n.toGlobalCoord(w[I].coord);m?(T[0]=k,T[1]=p.y,C[0]=k,C[1]=p.y+p.height):(T[0]=p.x,T[1]=k,C[0]=p.x+p.width,C[1]=k);var R=new Ua({shape:{x1:T[0],y1:T[1],x2:C[0],y2:C[1]},silent:!0});uv(R.shape,h);var z=x++%a.length;v[z]=v[z]||[],v[z].push(R)}for(var $=u.getLineStyle(["color"]),I=0;I<v.length;++I)e.add(dl(v[I],{style:zr({stroke:a[I%a.length]},$),silent:!0}))}},splitArea:function(r,e,t,i){e9(r,t,i,i)}},jEe=GEe,zZ=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(Oi);pa(zZ,Tx.prototype);var YI=zZ,HEe=function(r){lt(e,r);function e(t,i,n,s,u){var a=r.call(this,t,i,n)||this;return a.type=s||"value",a.position=u||"bottom",a}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.pointToData=function(t,i){return this.coordinateSystem.pointToData(t)[0]},e}(lu),WEe=HEe,BZ=["single"],qEe=function(){function r(e,t,i){this.type="single",this.dimension="single",this.dimensions=BZ,this.axisPointerEnabled=!0,this.model=e,this._init(e,t,i)}return r.prototype._init=function(e,t,i){var n=this.dimension,s=new WEe(n,u2(e),[0,0],e.get("type"),e.get("position")),u=s.type==="category";s.onBand=u&&e.get("boundaryGap"),s.inverse=e.get("inverse"),s.orient=e.get("orient"),e.axis=s,s.model=e,s.coordinateSystem=this,this._axis=s},r.prototype.update=function(e,t){e.eachSeries(function(i){if(i.coordinateSystem===this){var n=i.getData();ue(n.mapDimensionsAll(this.dimension),function(s){this._axis.scale.unionExtentFromData(n,s)},this),dv(this._axis.scale,this._axis.model)}},this)},r.prototype.resize=function(e,t){this._rect=xa({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},r.prototype.getRect=function(){return this._rect},r.prototype._adjustAxis=function(){var e=this._rect,t=this._axis,i=t.isHorizontal(),n=i?[0,e.width]:[0,e.height],s=t.inverse?1:0;t.setExtent(n[s],n[1-s]),this._updateAxisTransform(t,i?e.x:e.y)},r.prototype._updateAxisTransform=function(e,t){var i=e.getExtent(),n=i[0]+i[1],s=e.isHorizontal();e.toGlobalCoord=s?function(u){return u+t}:function(u){return n-u+t},e.toLocalCoord=s?function(u){return u-t}:function(u){return n-u+t}},r.prototype.getAxis=function(){return this._axis},r.prototype.getBaseAxis=function(){return this._axis},r.prototype.getAxes=function(){return[this._axis]},r.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},r.prototype.containPoint=function(e){var t=this.getRect(),i=this.getAxis(),n=i.orient;return n==="horizontal"?i.contain(i.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:i.contain(i.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},r.prototype.pointToData=function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e[t.orient==="horizontal"?0:1]))]},r.prototype.dataToPoint=function(e){var t=this.getAxis(),i=this.getRect(),n=[],s=t.orient==="horizontal"?0:1;return e instanceof Array&&(e=e[0]),n[s]=t.toGlobalCoord(t.dataToCoord(+e)),n[1-s]=s===0?i.y+i.height/2:i.x+i.width/2,n},r.prototype.convertToPixel=function(e,t,i){var n=N6(t);return n===this?this.dataToPoint(i):null},r.prototype.convertFromPixel=function(e,t,i){var n=N6(t);return n===this?this.pointToData(i):null},r}();function N6(r){var e=r.seriesModel,t=r.singleAxisModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function ZEe(r,e){var t=[];return r.eachComponent("singleAxis",function(i,n){var s=new qEe(i,r,e);s.name="single_"+n,s.resize(i,e),i.coordinateSystem=s,t.push(s)}),r.eachSeries(function(i){if(i.get("coordinateSystem")==="singleAxis"){var n=i.getReferringComponents("singleAxis",da).models[0];i.coordinateSystem=n&&n.coordinateSystem}}),t}var XEe={create:ZEe,dimensions:BZ},YEe=XEe,V6=["x","y"],KEe=["width","height"],JEe=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,i,n,s,u){var a=n.axis,h=a.coordinateSystem,p=KI(h,1-iT(a)),m=h.dataToPoint(i)[0],v=s.get("type");if(v&&v!=="none"){var x=oR(s),w=QEe[v](a,m,p);w.style=x,t.graphicKey=w.type,t.pointer=w}var T=dP(n);EZ(i,t,T,n,s,u)},e.prototype.getHandleTransform=function(t,i,n){var s=dP(i,{labelInside:!1});s.labelMargin=n.get(["handle","margin"]);var u=sR(i.axis,t,s);return{x:u[0],y:u[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,i,n,s){var u=n.axis,a=u.coordinateSystem,h=iT(u),p=KI(a,h),m=[t.x,t.y];m[h]+=i[h],m[h]=Math.min(p[1],m[h]),m[h]=Math.max(p[0],m[h]);var v=KI(a,1-h),x=(v[1]+v[0])/2,w=[x,x];return w[h]=m[h],{x:m[0],y:m[1],rotation:t.rotation,cursorPoint:w,tooltipOption:{verticalAlign:"middle"}}},e}(aR),QEe={line:function(r,e,t){var i=lR([e,t[0]],[e,t[1]],iT(r));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(r,e,t){var i=r.getBandWidth(),n=t[1]-t[0];return{type:"Rect",shape:DZ([e-i/2,t[0]],[i,n],iT(r))}}};function iT(r){return r.isHorizontal()?0:1}function KI(r,e){var t=r.getRect();return[t[V6[e]],t[V6[e]]+t[KEe[e]]]}var eDe=JEe,tDe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="single",e}(Jn);function rDe(r){gi(kx),am.registerAxisPointerClass("SingleAxisPointer",eDe),r.registerComponentView(tDe),r.registerComponentView(jEe),r.registerComponentModel(YI),pv(r,"single",YI,YI.defaultOption),r.registerCoordinateSystem("single",YEe)}var iDe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,i,n){var s=Ov(t);r.prototype.init.apply(this,arguments),$6(t,s)},e.prototype.mergeOption=function(t){r.prototype.mergeOption.apply(this,arguments),$6(this.option,t)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(Oi);function $6(r,e){var t=r.cellSize,i;Nt(t)?i=t:i=r.cellSize=[t,t],i.length===1&&(i[1]=i[0]);var n=Ht([0,1],function(s){return lve(e,s)&&(i[s]="auto"),i[s]!=null&&i[s]!=="auto"});Bd(r,e,{type:"box",ignoreSize:n})}var nDe=iDe,aDe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n){var s=this.group;s.removeAll();var u=t.coordinateSystem,a=u.getRangeInfo(),h=u.getOrient(),p=i.getLocaleModel();this._renderDayRect(t,a,s),this._renderLines(t,a,h,s),this._renderYearText(t,a,h,s),this._renderMonthText(t,p,h,s),this._renderWeekText(t,p,a,h,s)},e.prototype._renderDayRect=function(t,i,n){for(var s=t.coordinateSystem,u=t.getModel("itemStyle").getItemStyle(),a=s.getCellWidth(),h=s.getCellHeight(),p=i.start.time;p<=i.end.time;p=s.getNextNDay(p,1).time){var m=s.dataToRect([p],!1).tl,v=new Li({shape:{x:m[0],y:m[1],width:a,height:h},cursor:"default",style:u});n.add(v)}},e.prototype._renderLines=function(t,i,n,s){var u=this,a=t.coordinateSystem,h=t.getModel(["splitLine","lineStyle"]).getLineStyle(),p=t.get(["splitLine","show"]),m=h.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var v=i.start,x=0;v.time<=i.end.time;x++){T(v.formatedDate),x===0&&(v=a.getDateInfo(i.start.y+"-"+i.start.m));var w=v.date;w.setMonth(w.getMonth()+1),v=a.getDateInfo(w)}T(a.getNextNDay(i.end.time,1).formatedDate);function T(C){u._firstDayOfMonth.push(a.getDateInfo(C)),u._firstDayPoints.push(a.dataToRect([C],!1).tl);var I=u._getLinePointsOfOneWeek(t,C,n);u._tlpoints.push(I[0]),u._blpoints.push(I[I.length-1]),p&&u._drawSplitline(I,h,s)}p&&this._drawSplitline(u._getEdgesPoints(u._tlpoints,m,n),h,s),p&&this._drawSplitline(u._getEdgesPoints(u._blpoints,m,n),h,s)},e.prototype._getEdgesPoints=function(t,i,n){var s=[t[0].slice(),t[t.length-1].slice()],u=n==="horizontal"?0:1;return s[0][u]=s[0][u]-i/2,s[1][u]=s[1][u]+i/2,s},e.prototype._drawSplitline=function(t,i,n){var s=new ds({z2:20,shape:{points:t},style:i});n.add(s)},e.prototype._getLinePointsOfOneWeek=function(t,i,n){for(var s=t.coordinateSystem,u=s.getDateInfo(i),a=[],h=0;h<7;h++){var p=s.getNextNDay(u.time,h),m=s.dataToRect([p.time],!1);a[2*p.day]=m.tl,a[2*p.day+1]=m[n==="horizontal"?"bl":"tr"]}return a},e.prototype._formatterLabel=function(t,i){return gr(t)&&t?ave(t,i):kr(t)?t(i):i.nameMap},e.prototype._yearTextPositionControl=function(t,i,n,s,u){var a=i[0],h=i[1],p=["center","bottom"];s==="bottom"?(h+=u,p=["center","top"]):s==="left"?a-=u:s==="right"?(a+=u,p=["center","top"]):h-=u;var m=0;return(s==="left"||s==="right")&&(m=Math.PI/2),{rotation:m,x:a,y:h,style:{align:p[0],verticalAlign:p[1]}}},e.prototype._renderYearText=function(t,i,n,s){var u=t.getModel("yearLabel");if(!!u.get("show")){var a=u.get("margin"),h=u.get("position");h||(h=n!=="horizontal"?"top":"left");var p=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],m=(p[0][0]+p[1][0])/2,v=(p[0][1]+p[1][1])/2,x=n==="horizontal"?0:1,w={top:[m,p[x][1]],bottom:[m,p[1-x][1]],left:[p[1-x][0],v],right:[p[x][0],v]},T=i.start.y;+i.end.y>+i.start.y&&(T=T+"-"+i.end.y);var C=u.get("formatter"),I={start:i.start.y,end:i.end.y,nameMap:T},k=this._formatterLabel(C,I),R=new Ni({z2:30,style:Mn(u,{text:k})});R.attr(this._yearTextPositionControl(R,w[h],n,h,a)),s.add(R)}},e.prototype._monthTextPositionControl=function(t,i,n,s,u){var a="left",h="top",p=t[0],m=t[1];return n==="horizontal"?(m=m+u,i&&(a="center"),s==="start"&&(h="bottom")):(p=p+u,i&&(h="middle"),s==="start"&&(a="right")),{x:p,y:m,align:a,verticalAlign:h}},e.prototype._renderMonthText=function(t,i,n,s){var u=t.getModel("monthLabel");if(!!u.get("show")){var a=u.get("nameMap"),h=u.get("margin"),p=u.get("position"),m=u.get("align"),v=[this._tlpoints,this._blpoints];(!a||gr(a))&&(a&&(i=wD(a)||i),a=i.get(["time","monthAbbr"])||[]);var x=p==="start"?0:1,w=n==="horizontal"?0:1;h=p==="start"?-h:h;for(var T=m==="center",C=0;C<v[x].length-1;C++){var I=v[x][C].slice(),k=this._firstDayOfMonth[C];if(T){var R=this._firstDayPoints[C];I[w]=(R[w]+v[0][C+1][w])/2}var z=u.get("formatter"),$=a[+k.m-1],j={yyyy:k.y,yy:(k.y+"").slice(2),MM:k.m,M:+k.m,nameMap:$},G=this._formatterLabel(z,j),Y=new Ni({z2:30,style:kt(Mn(u,{text:G}),this._monthTextPositionControl(I,T,n,p,h))});s.add(Y)}}},e.prototype._weekTextPositionControl=function(t,i,n,s,u){var a="center",h="middle",p=t[0],m=t[1],v=n==="start";return i==="horizontal"?(p=p+s+(v?1:-1)*u[0]/2,a=v?"right":"left"):(m=m+s+(v?1:-1)*u[1]/2,h=v?"bottom":"top"),{x:p,y:m,align:a,verticalAlign:h}},e.prototype._renderWeekText=function(t,i,n,s,u){var a=t.getModel("dayLabel");if(!!a.get("show")){var h=t.coordinateSystem,p=a.get("position"),m=a.get("nameMap"),v=a.get("margin"),x=h.getFirstDayOfWeek();if(!m||gr(m)){m&&(i=wD(m)||i);var w=i.get(["time","dayOfWeekShort"]);m=w||Ht(i.get(["time","dayOfWeekAbbr"]),function(j){return j[0]})}var T=h.getNextNDay(n.end.time,7-n.lweek).time,C=[h.getCellWidth(),h.getCellHeight()];v=sr(v,Math.min(C[1],C[0])),p==="start"&&(T=h.getNextNDay(n.start.time,-(7+n.fweek)).time,v=-v);for(var I=0;I<7;I++){var k=h.getNextNDay(T,I),R=h.dataToRect([k.time],!1).center,z=I;z=Math.abs((I+x)%7);var $=new Ni({z2:30,style:kt(Mn(a,{text:m[z]}),this._weekTextPositionControl(R,s,p,v,C))});u.add($)}}},e.type="calendar",e}(Jn),oDe=aDe,JI=864e5,sDe=function(){function r(e,t,i){this.type="calendar",this.dimensions=r.dimensions,this.getDimensionsInfo=r.getDimensionsInfo,this._model=e}return r.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},r.prototype.getRangeInfo=function(){return this._rangeInfo},r.prototype.getModel=function(){return this._model},r.prototype.getRect=function(){return this._rect},r.prototype.getCellWidth=function(){return this._sw},r.prototype.getCellHeight=function(){return this._sh},r.prototype.getOrient=function(){return this._orient},r.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},r.prototype.getDateInfo=function(e){e=oc(e);var t=e.getFullYear(),i=e.getMonth()+1,n=i<10?"0"+i:""+i,s=e.getDate(),u=s<10?"0"+s:""+s,a=e.getDay();return a=Math.abs((a+7-this.getFirstDayOfWeek())%7),{y:t+"",m:n,d:u,day:a,time:e.getTime(),formatedDate:t+"-"+n+"-"+u,date:e}},r.prototype.getNextNDay=function(e,t){return t=t||0,t===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+t),this.getDateInfo(e))},r.prototype.update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var i=this._rangeInfo.weeks||1,n=["width","height"],s=this._model.getCellSize().slice(),u=this._model.getBoxLayoutParams(),a=this._orient==="horizontal"?[i,7]:[7,i];ue([0,1],function(v){m(s,v)&&(u[n[v]]=s[v]*a[v])});var h={width:t.getWidth(),height:t.getHeight()},p=this._rect=xa(u,h);ue([0,1],function(v){m(s,v)||(s[v]=p[n[v]]/a[v])});function m(v,x){return v[x]!=null&&v[x]!=="auto"}this._sw=s[0],this._sh=s[1]},r.prototype.dataToPoint=function(e,t){Nt(e)&&(e=e[0]),t==null&&(t=!0);var i=this.getDateInfo(e),n=this._rangeInfo,s=i.formatedDate;if(t&&!(i.time>=n.start.time&&i.time<n.end.time+JI))return[NaN,NaN];var u=i.day,a=this._getRangeInfo([n.start.time,s]).nthWeek;return this._orient==="vertical"?[this._rect.x+u*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]:[this._rect.x+a*this._sw+this._sw/2,this._rect.y+u*this._sh+this._sh/2]},r.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},r.prototype.dataToRect=function(e,t){var i=this.dataToPoint(e,t);return{contentShape:{x:i[0]-(this._sw-this._lineWidth)/2,y:i[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:i,tl:[i[0]-this._sw/2,i[1]-this._sh/2],tr:[i[0]+this._sw/2,i[1]-this._sh/2],br:[i[0]+this._sw/2,i[1]+this._sh/2],bl:[i[0]-this._sw/2,i[1]+this._sh/2]}},r.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,i=Math.floor((e[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(i,t-1,n):this._getDateByWeeksAndDay(t,i-1,n)},r.prototype.convertToPixel=function(e,t,i){var n=G6(t);return n===this?n.dataToPoint(i):null},r.prototype.convertFromPixel=function(e,t,i){var n=G6(t);return n===this?n.pointToData(i):null},r.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},r.prototype._initRangeOption=function(){var e=this._model.get("range"),t;if(Nt(e)&&e.length===1&&(e=e[0]),Nt(e))t=e;else{var i=e.toString();if(/^\d{4}$/.test(i)&&(t=[i+"-01-01",i+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(i)){var n=this.getDateInfo(i),s=n.date;s.setMonth(s.getMonth()+1);var u=this.getNextNDay(s,-1);t=[n.formatedDate,u.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(i)&&(t=[i,i])}if(!t)return e;var a=this._getRangeInfo(t);return a.start.time>a.end.time&&t.reverse(),t},r.prototype._getRangeInfo=function(e){var t=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],i;t[0].time>t[1].time&&(i=!0,t.reverse());var n=Math.floor(t[1].time/JI)-Math.floor(t[0].time/JI)+1,s=new Date(t[0].time),u=s.getDate(),a=t[1].date.getDate();s.setDate(u+n-1);var h=s.getDate();if(h!==a)for(var p=s.getTime()-t[1].time>0?1:-1;(h=s.getDate())!==a&&(s.getTime()-t[1].time)*p>0;)n-=p,s.setDate(h-p);var m=Math.floor((n+t[0].day+6)/7),v=i?-m+1:m-1;return i&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:n,weeks:m,nthWeek:v,fweek:t[0].day,lweek:t[1].day}},r.prototype._getDateByWeeksAndDay=function(e,t,i){var n=this._getRangeInfo(i);if(e>n.weeks||e===0&&t<n.fweek||e===n.weeks&&t>n.lweek)return null;var s=(e-1)*7-n.fweek+t,u=new Date(n.start.time);return u.setDate(+n.start.d+s),this.getDateInfo(u)},r.create=function(e,t){var i=[];return e.eachComponent("calendar",function(n){var s=new r(n);i.push(s),n.coordinateSystem=s}),e.eachSeries(function(n){n.get("coordinateSystem")==="calendar"&&(n.coordinateSystem=i[n.get("calendarIndex")||0])}),i},r.dimensions=["time","value"],r}();function G6(r){var e=r.calendarModel,t=r.seriesModel,i=e?e.coordinateSystem:t?t.coordinateSystem:null;return i}var lDe=sDe;function uDe(r){r.registerComponentModel(nDe),r.registerComponentView(oDe),r.registerCoordinateSystem("calendar",lDe)}function cDe(r,e){var t=r.existing;if(e.id=r.keyInfo.id,!e.type&&t&&(e.type=t.type),e.parentId==null){var i=e.parentOption;i?e.parentId=i.id:t&&(e.parentId=t.parentId)}e.parentOption=null}function U6(r,e){var t;return ue(e,function(i){r[i]!=null&&r[i]!=="auto"&&(t=!0)}),t}function hDe(r,e,t){var i=kt({},t),n=r[e],s=t.$action||"merge";s==="merge"?n?(ni(n,i,!0),Bd(n,i,{ignoreSize:!0}),bW(t,n),Iw(t,n),Iw(t,n,"shape"),Iw(t,n,"style"),Iw(t,n,"extra"),t.clipPath=n.clipPath):r[e]=i:s==="replace"?r[e]=i:s==="remove"&&n&&(r[e]=null)}var FZ=["transition","enterFrom","leaveTo"],dDe=FZ.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function Iw(r,e,t){if(t&&(!r[t]&&e[t]&&(r[t]={}),r=r[t],e=e[t]),!(!r||!e))for(var i=t?FZ:dDe,n=0;n<i.length;n++){var s=i[n];r[s]==null&&e[s]!=null&&(r[s]=e[s])}}function fDe(r,e){if(!!r&&(r.hv=e.hv=[U6(e,["left","right"]),U6(e,["top","bottom"])],r.type==="group")){var t=r,i=e;t.width==null&&(t.width=i.width=0),t.height==null&&(t.height=i.height=0)}}var pDe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.preventAutoZ=!0,t}return e.prototype.mergeOption=function(t,i){var n=this.option.elements;this.option.elements=null,r.prototype.mergeOption.call(this,t,i),this.option.elements=n},e.prototype.optionUpdated=function(t,i){var n=this.option,s=(i?n:t).elements,u=n.elements=i?[]:n.elements,a=[];this._flatten(s,a,null);var h=nH(u,a,"normalMerge"),p=this._elOptionsToUpdate=[];ue(h,function(m,v){var x=m.newOption;!x||(p.push(x),cDe(m,x),hDe(u,v,x),fDe(u[v],x))},this),n.elements=un(u,function(m){return m&&delete m.$action,m!=null})},e.prototype._flatten=function(t,i,n){ue(t,function(s){if(!!s){n&&(s.parentOption=n),i.push(s);var u=s.children;u&&u.length&&this._flatten(u,i,s),delete s.children}},this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e}(Oi),j6={path:null,compoundPath:null,group:Vr,image:io,text:Ni},ul=ki(),mDe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._elMap=Mr()},e.prototype.render=function(t,i,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,n)},e.prototype._updateElements=function(t){var i=t.useElOptionsToUpdate();if(!!i){var n=this._elMap,s=this.group,u=t.get("z"),a=t.get("zlevel");ue(i,function(h){var p=ya(h.id,null),m=p!=null?n.get(p):null,v=ya(h.parentId,null),x=v!=null?n.get(v):s,w=h.type,T=h.style;w==="text"&&T&&h.hv&&h.hv[1]&&(T.textVerticalAlign=T.textBaseline=T.verticalAlign=T.align=null);var C=h.textContent,I=h.textConfig;if(T&&vZ(T,w,!!I,!!C)){var k=_Z(T,w,!0);!I&&k.textConfig&&(I=h.textConfig=k.textConfig),!C&&k.textContent&&(C=k.textContent)}var R=gDe(h),z=h.$action||"merge",$=z==="merge",j=z==="replace";if($){var G=!m,Y=m;G?Y=H6(p,x,h.type,n):(Y&&(ul(Y).isNew=!1),wZ(Y)),Y&&(nS(Y,R,t,{isInit:G}),W6(Y,h,u,a))}else if(j){oS(m,h,n,t);var Z=H6(p,x,h.type,n);Z&&(nS(Z,R,t,{isInit:!0}),W6(Z,h,u,a))}else z==="remove"&&(xZ(m,h),oS(m,h,n,t));var H=n.get(p);if(H&&C)if($){var re=H.getTextContent();re?re.attr(C):H.setTextContent(new Ni(C))}else j&&H.setTextContent(new Ni(C));if(H){var ne=h.clipPath;if(ne){var se=ne.type,me=void 0,G=!1;if($){var Se=H.getClipPath();G=!Se||ul(Se).type!==se,me=G?fP(se):Se}else j&&(G=!0,me=fP(se));H.setClipPath(me),nS(me,ne,t,{isInit:G}),tT(me,ne.keyframeAnimation,t)}var Ie=ul(H);H.setTextConfig(I),Ie.option=h,vDe(H,t,h),Pv({el:H,componentModel:t,itemName:H.name,itemTooltipOption:h.tooltip}),tT(H,h.keyframeAnimation,t)}})}},e.prototype._relocate=function(t,i){for(var n=t.option.elements,s=this.group,u=this._elMap,a=i.getWidth(),h=i.getHeight(),p=["x","y"],m=0;m<n.length;m++){var v=n[m],x=ya(v.id,null),w=x!=null?u.get(x):null;if(!(!w||!w.isGroup)){var T=w.parent,C=T===s,I=ul(w),k=ul(T);I.width=sr(I.option.width,C?a:k.width)||0,I.height=sr(I.option.height,C?h:k.height)||0}}for(var m=n.length-1;m>=0;m--){var v=n[m],x=ya(v.id,null),w=x!=null?u.get(x):null;if(!!w){var T=w.parent,k=ul(T),R=T===s?{width:a,height:h}:{width:k.width,height:k.height},z={},$=t2(w,v,R,null,{hv:v.hv,boundingMode:v.bounding},z);if(!ul(w).isNew&&$){for(var j=v.transition,G={},Y=0;Y<p.length;Y++){var Z=p[Y],H=z[Z];j&&($p(j)||di(j,Z)>=0)?G[Z]=H:w[Z]=H}ji(w,G,t,0)}else w.attr(z)}}},e.prototype._clear=function(){var t=this,i=this._elMap;i.each(function(n){oS(n,ul(n).option,i,t._lastGraphicModel)}),this._elMap=Mr()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(Jn);function fP(r){var e=wr(j6,r)?j6[r]:GL(r),t=new e({});return ul(t).type=r,t}function H6(r,e,t,i){var n=fP(t);return e.add(n),i.set(r,n),ul(n).id=r,ul(n).isNew=!0,n}function oS(r,e,t,i){var n=r&&r.parent;n&&(r.type==="group"&&r.traverse(function(s){oS(s,e,t,i)}),g2(r,e,i),t.removeKey(ul(r).id))}function W6(r,e,t,i){r.isGroup||ue([["cursor",yl.prototype.cursor],["zlevel",i||0],["z",t||0],["z2",0]],function(n){var s=n[0];wr(e,s)?r[s]=Yr(e[s],n[1]):r[s]==null&&(r[s]=n[1])}),ue(bi(e),function(n){if(n.indexOf("on")===0){var s=e[n];r[n]=kr(s)?s:null}}),wr(e,"draggable")&&(r.draggable=e.draggable),e.name!=null&&(r.name=e.name),e.id!=null&&(r.id=e.id)}function gDe(r){return r=kt({},r),ue(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(xW),function(e){delete r[e]}),r}function vDe(r,e,t){var i=Gr(r).eventData;!r.silent&&!r.ignore&&!i&&(i=Gr(r).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:r.name}),i&&(i.info=t.info)}function _De(r){r.registerComponentModel(pDe),r.registerComponentView(mDe),r.registerPreprocessor(function(e){var t=e.graphic;Nt(t)?!t[0]||!t[0].elements?e.graphic=[{elements:t}]:e.graphic=[e.graphic[0]]:t&&!t.elements&&(e.graphic=[{elements:[t]}])})}var q6=["x","y","radius","angle","single"],yDe=["cartesian2d","polar","singleAxis"];function xDe(r){var e=r.get("coordinateSystem");return di(yDe,e)>=0}function Sd(r){return r+"Axis"}function bDe(r,e){var t=Mr(),i=[],n=Mr();r.eachComponent({mainType:"dataZoom",query:e},function(m){n.get(m.uid)||a(m)});var s;do s=!1,r.eachComponent("dataZoom",u);while(s);function u(m){!n.get(m.uid)&&h(m)&&(a(m),s=!0)}function a(m){n.set(m.uid,!0),i.push(m),p(m)}function h(m){var v=!1;return m.eachTargetAxis(function(x,w){var T=t.get(x);T&&T[w]&&(v=!0)}),v}function p(m){m.eachTargetAxis(function(v,x){(t.get(v)||t.set(v,[]))[x]=!0})}return i}function NZ(r){var e=r.ecModel,t={infoList:[],infoMap:Mr()};return r.eachTargetAxis(function(i,n){var s=e.getComponent(Sd(i),n);if(!!s){var u=s.getCoordSysModel();if(!!u){var a=u.uid,h=t.infoMap.get(a);h||(h={model:u,axisModels:[]},t.infoList.push(h),t.infoMap.set(a,h)),h.axisModels.push(s)}}}),t}var QI=function(){function r(){this.indexList=[],this.indexMap=[]}return r.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},r}(),wDe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return e.prototype.init=function(t,i,n){var s=Z6(t);this.settledOption=s,this.mergeDefaultAndTheme(t,n),this._doInit(s)},e.prototype.mergeOption=function(t){var i=Z6(t);ni(this.option,t,!0),ni(this.settledOption,i,!0),this._doInit(i)},e.prototype._doInit=function(t){var i=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var n=this.settledOption;ue([["start","startValue"],["end","endValue"]],function(s,u){this._rangePropMode[u]==="value"&&(i[s[0]]=n[s[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),i=this._targetAxisInfoMap=Mr(),n=this._fillSpecifiedTargetAxis(i);n?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(i,this._orient)),this._noTarget=!0,i.each(function(s){s.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var i=!1;return ue(q6,function(n){var s=this.getReferringComponents(Sd(n),Npe);if(!!s.specified){i=!0;var u=new QI;ue(s.models,function(a){u.add(a.componentIndex)}),t.set(n,u)}},this),i},e.prototype._fillAutoTargetAxisByOrient=function(t,i){var n=this.ecModel,s=!0;if(s){var u=i==="vertical"?"y":"x",a=n.findComponents({mainType:u+"Axis"});h(a,u)}if(s){var a=n.findComponents({mainType:"singleAxis",filter:function(m){return m.get("orient",!0)===i}});h(a,"single")}function h(p,m){var v=p[0];if(!!v){var x=new QI;if(x.add(v.componentIndex),t.set(m,x),s=!1,m==="x"||m==="y"){var w=v.getReferringComponents("grid",da).models[0];w&&ue(p,function(T){v.componentIndex!==T.componentIndex&&w===T.getReferringComponents("grid",da).models[0]&&x.add(T.componentIndex)})}}}s&&ue(q6,function(p){if(!!s){var m=n.findComponents({mainType:Sd(p),filter:function(x){return x.get("type",!0)==="category"}});if(m[0]){var v=new QI;v.add(m[0].componentIndex),t.set(p,v),s=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(i){!t&&(t=i)},this),t==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var i=this.ecModel.option;this.option.throttle=i.animation&&i.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var i=this._rangePropMode,n=this.get("rangeMode");ue([["start","startValue"],["end","endValue"]],function(s,u){var a=t[s[0]]!=null,h=t[s[1]]!=null;a&&!h?i[u]="percent":!a&&h?i[u]="value":n?i[u]=n[u]:a&&(i[u]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(i,n){t==null&&(t=this.ecModel.getComponent(Sd(i),n))},this),t},e.prototype.eachTargetAxis=function(t,i){this._targetAxisInfoMap.each(function(n,s){ue(n.indexList,function(u){t.call(i,s,u)})})},e.prototype.getAxisProxy=function(t,i){var n=this.getAxisModel(t,i);if(n)return n.__dzAxisProxy},e.prototype.getAxisModel=function(t,i){var n=this._targetAxisInfoMap.get(t);if(n&&n.indexMap[i])return this.ecModel.getComponent(Sd(t),i)},e.prototype.setRawRange=function(t){var i=this.option,n=this.settledOption;ue([["start","startValue"],["end","endValue"]],function(s){(t[s[0]]!=null||t[s[1]]!=null)&&(i[s[0]]=n[s[0]]=t[s[0]],i[s[1]]=n[s[1]]=t[s[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var i=this.option;ue(["start","startValue","end","endValue"],function(n){i[n]=t[n]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,i){if(t==null&&i==null){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataValueWindow()}else return this.getAxisProxy(t,i).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var i,n=this._targetAxisInfoMap.keys(),s=0;s<n.length;s++)for(var u=n[s],a=this._targetAxisInfoMap.get(u),h=0;h<a.indexList.length;h++){var p=this.getAxisProxy(u,a.indexList[h]);if(p.hostedBy(this))return p;i||(i=p)}return i},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(Oi);function Z6(r){var e={};return ue(["start","end","startValue","endValue","throttle"],function(t){r.hasOwnProperty(t)&&(e[t]=r[t])}),e}var sx=wDe,SDe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(sx),TDe=SDe,MDe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n,s){this.dataZoomModel=t,this.ecModel=i,this.api=n},e.type="dataZoom",e}(Jn),dR=MDe,ADe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(dR),CDe=ADe,zg=ue,X6=pl,IDe=function(){function r(e,t,i,n){this._dimName=e,this._axisIndex=t,this.ecModel=n,this._dataZoomModel=i}return r.prototype.hostedBy=function(e){return this._dataZoomModel===e},r.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},r.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},r.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(xDe(t)){var i=Sd(this._dimName),n=t.getReferringComponents(i,da).models[0];n&&this._axisIndex===n.componentIndex&&e.push(t)}},this),e},r.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},r.prototype.getMinMaxSpan=function(){return Nr(this._minMaxSpan)},r.prototype.calculateDataWindow=function(e){var t=this._dataExtent,i=this.getAxisModel(),n=i.axis.scale,s=this._dataZoomModel.getRangePropMode(),u=[0,100],a=[],h=[],p;zg(["start","end"],function(x,w){var T=e[x],C=e[x+"Value"];s[w]==="percent"?(T==null&&(T=u[w]),C=n.parse(on(T,u,t))):(p=!0,C=C==null?t[w]:n.parse(C),T=on(C,t,u)),h[w]=C==null||isNaN(C)?t[w]:C,a[w]=T==null||isNaN(T)?u[w]:T}),X6(h),X6(a);var m=this._minMaxSpan;p?v(h,a,t,u,!1):v(a,h,u,t,!0);function v(x,w,T,C,I){var k=I?"Span":"ValueSpan";om(0,x,T,"all",m["min"+k],m["max"+k]);for(var R=0;R<2;R++)w[R]=on(x[R],T,C,!0),I&&(w[R]=n.parse(w[R]))}return{valueWindow:h,percentWindow:a}},r.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=EDe(this,this._dimName,t),this._updateMinMaxSpan();var i=this.calculateDataWindow(e.settledOption);this._valueWindow=i.valueWindow,this._percentWindow=i.percentWindow,this._setAxisModel()}},r.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var i=this._dimName,n=this.getTargetSeriesModels(),s=e.get("filterMode"),u=this._valueWindow;if(s==="none")return;zg(n,function(h){var p=h.getData(),m=p.mapDimensionsAll(i);if(!!m.length){if(s==="weakFilter"){var v=p.getStore(),x=Ht(m,function(w){return p.getDimensionIndex(w)},p);p.filterSelf(function(w){for(var T,C,I,k=0;k<m.length;k++){var R=v.get(x[k],w),z=!isNaN(R),$=R<u[0],j=R>u[1];if(z&&!$&&!j)return!0;z&&(I=!0),$&&(T=!0),j&&(C=!0)}return I&&T&&C})}else zg(m,function(w){if(s==="empty")h.setData(p=p.map(w,function(C){return a(C)?C:NaN}));else{var T={};T[w]=u,p.selectRange(T)}});zg(m,function(w){p.setApproximateExtent(u,w)})}});function a(h){return h>=u[0]&&h<=u[1]}},r.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,i=this._dataExtent;zg(["min","max"],function(n){var s=t.get(n+"Span"),u=t.get(n+"ValueSpan");u!=null&&(u=this.getAxisModel().axis.scale.parse(u)),u!=null?s=on(i[0]+u,i,[0,100],!0):s!=null&&(u=on(s,[0,100],i,!0)-i[0]),e[n+"Span"]=s,e[n+"ValueSpan"]=u},this)},r.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,i=this._valueWindow;if(!!t){var n=Yj(i,[0,500]);n=Math.min(n,20);var s=e.axis.scale.rawExtentInfo;t[0]!==0&&s.setDeterminedMinMax("min",+i[0].toFixed(n)),t[1]!==100&&s.setDeterminedMinMax("max",+i[1].toFixed(n)),s.freeze()}},r}();function EDe(r,e,t){var i=[1/0,-1/0];zg(t,function(u){K0e(i,u.getData(),e)});var n=r.getAxisModel(),s=tq(n.axis.scale,n,i).calculate();return[s.min,s.max]}var DDe=IDe,PDe={getTargetSeries:function(r){function e(n){r.eachComponent("dataZoom",function(s){s.eachTargetAxis(function(u,a){var h=r.getComponent(Sd(u),a);n(u,a,h,s)})})}e(function(n,s,u,a){u.__dzAxisProxy=null});var t=[];e(function(n,s,u,a){u.__dzAxisProxy||(u.__dzAxisProxy=new DDe(n,s,a,r),t.push(u.__dzAxisProxy))});var i=Mr();return ue(t,function(n){ue(n.getTargetSeriesModels(),function(s){i.set(s.uid,s)})}),i},overallReset:function(r,e){r.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(i,n){t.getAxisProxy(i,n).reset(t)}),t.eachTargetAxis(function(i,n){t.getAxisProxy(i,n).filterData(t,e)})}),r.eachComponent("dataZoom",function(t){var i=t.findRepresentativeAxisProxy();if(i){var n=i.getDataPercentWindow(),s=i.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:s[0],endValue:s[1]})}})}},LDe=PDe;function kDe(r){r.registerAction("dataZoom",function(e,t){var i=bDe(t,e);ue(i,function(n){n.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var Y6=!1;function fR(r){Y6||(Y6=!0,r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,LDe),kDe(r),r.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function RDe(r){r.registerComponentModel(TDe),r.registerComponentView(CDe),fR(r)}var hl=function(){function r(){}return r}(),VZ={};function Bg(r,e){VZ[r]=e}function $Z(r){return VZ[r]}var ODe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){r.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;ue(this.option.feature,function(i,n){var s=$Z(n);s&&(s.getDefaultOption&&(s.defaultOption=s.getDefaultOption(t)),ni(i,s.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(Oi),zDe=ODe;function BDe(r,e,t){var i=e.getBoxLayoutParams(),n=e.get("padding"),s={width:t.getWidth(),height:t.getHeight()},u=xa(i,s,n);Fp(e.get("orient"),r,e.get("itemGap"),u.width,u.height),t2(r,i,s,n)}function GZ(r,e){var t=Rv(e.get("padding")),i=e.getItemStyle(["color","opacity"]);return i.fill=e.get("backgroundColor"),r=new Li({shape:{x:r.x-t[3],y:r.y-t[0],width:r.width+t[1]+t[3],height:r.height+t[0]+t[2],r:e.get("borderRadius")},style:i,silent:!0,z2:-1}),r}var FDe=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,i,n,s){var u=this.group;if(u.removeAll(),!t.get("show"))return;var a=+t.get("itemSize"),h=t.get("orient")==="vertical",p=t.get("feature")||{},m=this._features||(this._features={}),v=[];ue(p,function(T,C){v.push(C)}),new ch(this._featureNames||[],v).add(x).update(x).remove(Qr(x,null)).execute(),this._featureNames=v;function x(T,C){var I=v[T],k=v[C],R=p[I],z=new An(R,t,t.ecModel),$;if(s&&s.newTitle!=null&&s.featureName===I&&(R.title=s.newTitle),I&&!k){if(NDe(I))$={onclick:z.option.onclick,featureName:I};else{var j=$Z(I);if(!j)return;$=new j}m[I]=$}else if($=m[k],!$)return;$.uid=kv("toolbox-feature"),$.model=z,$.ecModel=i,$.api=n;var G=$ instanceof hl;if(!I&&k){G&&$.dispose&&$.dispose(i,n);return}if(!z.get("show")||G&&$.unusable){G&&$.remove&&$.remove(i,n);return}w(z,$,I),z.setIconStatus=function(Y,Z){var H=this.option,re=this.iconPaths;H.iconStatus=H.iconStatus||{},H.iconStatus[Y]=Z,re[Y]&&(Z==="emphasis"?lh:uh)(re[Y])},$ instanceof hl&&$.render&&$.render(z,i,n,s)}function w(T,C,I){var k=T.getModel("iconStyle"),R=T.getModel(["emphasis","iconStyle"]),z=C instanceof hl&&C.getIcons?C.getIcons():T.get("icon"),$=T.get("title")||{},j,G;gr(z)?(j={},j[I]=z):j=z,gr($)?(G={},G[I]=$):G=$;var Y=T.iconPaths={};ue(j,function(Z,H){var re=_x(Z,{},{x:-a/2,y:-a/2,width:a,height:a});re.setStyle(k.getItemStyle());var ne=re.ensureState("emphasis");ne.style=R.getItemStyle();var se=new Ni({style:{text:G[H],align:R.get("textAlign"),borderRadius:R.get("textBorderRadius"),padding:R.get("textPadding"),fill:null,font:UL({fontStyle:R.get("textFontStyle"),fontFamily:R.get("textFontFamily"),fontSize:R.get("textFontSize"),fontWeight:R.get("textFontWeight")},i)},ignore:!0});re.setTextContent(se),Pv({el:re,componentModel:t,itemName:H,formatterParamsExtra:{title:G[H]}}),re.__title=G[H],re.on("mouseover",function(){var me=R.getItemStyle(),Se=h?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";se.setStyle({fill:R.get("textFill")||me.fill||me.stroke||"#000",backgroundColor:R.get("textBackgroundColor")}),re.setTextConfig({position:R.get("textPosition")||Se}),se.ignore=!t.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){T.get(["iconStatus",H])!=="emphasis"&&n.leaveEmphasis(this),se.hide()}),(T.get(["iconStatus",H])==="emphasis"?lh:uh)(re),u.add(re),re.on("click",xr(C.onclick,C,i,n,H)),Y[H]=re})}BDe(u,t,n),u.add(GZ(u.getBoundingRect(),t)),h||u.eachChild(function(T){var C=T.__title,I=T.ensureState("emphasis"),k=I.textConfig||(I.textConfig={}),R=T.getTextContent(),z=R&&R.ensureState("emphasis");if(z&&!kr(z)&&C){var $=z.style||(z.style={}),j=fx(C,Ni.makeFont($)),G=T.x+u.x,Y=T.y+u.y+a,Z=!1;Y+j.height>n.getHeight()&&(k.position="top",Z=!0);var H=Z?-5-j.height:a+10;G+j.width/2>n.getWidth()?(k.position=["100%",H],$.align="right"):G-j.width/2<0&&(k.position=[0,H],$.align="left")}})},e.prototype.updateView=function(t,i,n,s){ue(this._features,function(u){u instanceof hl&&u.updateView&&u.updateView(u.model,i,n,s)})},e.prototype.remove=function(t,i){ue(this._features,function(n){n instanceof hl&&n.remove&&n.remove(t,i)}),this.group.removeAll()},e.prototype.dispose=function(t,i){ue(this._features,function(n){n instanceof hl&&n.dispose&&n.dispose(t,i)})},e.type="toolbox",e}(Jn);function NDe(r){return r.indexOf("my")===0}var VDe=FDe,$De=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onclick=function(t,i){var n=this.model,s=n.get("name")||t.get("title.0.text")||"echarts",u=i.getZr().painter.getType()==="svg",a=u?"svg":n.get("type",!0)||"png",h=i.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),p=Fi.browser;if(kr(MouseEvent)&&(p.newEdge||!p.ie&&!p.edge)){var m=document.createElement("a");m.download=s+"."+a,m.target="_blank",m.href=h;var v=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});m.dispatchEvent(v)}else if(window.navigator.msSaveOrOpenBlob||u){var x=h.split(","),w=x[0].indexOf("base64")>-1,T=u?decodeURIComponent(x[1]):x[1];w&&(T=window.atob(T));var C=s+"."+a;if(window.navigator.msSaveOrOpenBlob){for(var I=T.length,k=new Uint8Array(I);I--;)k[I]=T.charCodeAt(I);var R=new Blob([k]);window.navigator.msSaveOrOpenBlob(R,C)}else{var z=document.createElement("iframe");document.body.appendChild(z);var $=z.contentWindow,j=$.document;j.open("image/svg+xml","replace"),j.write(T),j.close(),$.focus(),j.execCommand("SaveAs",!0,C),document.body.removeChild(z)}}else{var G=n.get("lang"),Y='<body style="margin:0;"><img src="'+h+'" style="max-width:100%;" title="'+(G&&G[0]||"")+'" /></body>',Z=window.open();Z.document.write(Y),Z.document.title=s}},e.getDefaultOption=function(t){var i={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return i},e}(hl),GDe=$De,K6="__ec_magicType_stack__",UDe=[["line","bar"],["stack"]],jDe=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,i=t.get("icon"),n={};return ue(t.get("type"),function(s){i[s]&&(n[s]=i[s])}),n},e.getDefaultOption=function(t){var i={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return i},e.prototype.onclick=function(t,i,n){var s=this.model,u=s.get(["seriesIndex",n]);if(!!J6[n]){var a={series:[]},h=function(v){var x=v.subType,w=v.id,T=J6[n](x,w,v,s);T&&(zr(T,v.option),a.series.push(T));var C=v.coordinateSystem;if(C&&C.type==="cartesian2d"&&(n==="line"||n==="bar")){var I=C.getAxesByScale("ordinal")[0];if(I){var k=I.dim,R=k+"Axis",z=v.getReferringComponents(R,da).models[0],$=z.componentIndex;a[R]=a[R]||[];for(var j=0;j<=$;j++)a[R][$]=a[R][$]||{};a[R][$].boundaryGap=n==="bar"}}};ue(UDe,function(v){di(v,n)>=0&&ue(v,function(x){s.setIconStatus(x,"normal")})}),s.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:u==null?null:{seriesIndex:u}},h);var p,m=n;n==="stack"&&(p=ni({stack:s.option.title.tiled,tiled:s.option.title.stack},s.option.title),s.get(["iconStatus",n])!=="emphasis"&&(m="tiled")),i.dispatchAction({type:"changeMagicType",currentType:m,newOption:a,newTitle:p,featureName:"magicType"})}},e}(hl),J6={line:function(r,e,t,i){if(r==="bar")return ni({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},i.get(["option","line"])||{},!0)},bar:function(r,e,t,i){if(r==="line")return ni({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},i.get(["option","bar"])||{},!0)},stack:function(r,e,t,i){var n=t.get("stack")===K6;if(r==="line"||r==="bar")return i.setIconStatus("stack",n?"normal":"emphasis"),ni({id:e,stack:n?"":K6},i.get(["option","stack"])||{},!0)}};uc({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(r,e){e.mergeOption(r.newOption)});var HDe=jDe,v2=new Array(60).join("-"),vv="	";function WDe(r){var e={},t=[],i=[];return r.eachRawSeries(function(n){var s=n.coordinateSystem;if(s&&(s.type==="cartesian2d"||s.type==="polar")){var u=s.getBaseAxis();if(u.type==="category"){var a=u.dim+"_"+u.index;e[a]||(e[a]={categoryAxis:u,valueAxis:s.getOtherAxis(u),series:[]},i.push({axisDim:u.dim,axisIndex:u.index})),e[a].series.push(n)}else t.push(n)}else t.push(n)}),{seriesGroupByCategoryAxis:e,other:t,meta:i}}function qDe(r){var e=[];return ue(r,function(t,i){var n=t.categoryAxis,s=t.valueAxis,u=s.dim,a=[" "].concat(Ht(t.series,function(w){return w.name})),h=[n.model.getCategories()];ue(t.series,function(w){var T=w.getRawData();h.push(w.getRawData().mapArray(T.mapDimension(u),function(C){return C}))});for(var p=[a.join(vv)],m=0;m<h[0].length;m++){for(var v=[],x=0;x<h.length;x++)v.push(h[x][m]);p.push(v.join(vv))}e.push(p.join(`
`))}),e.join(`

`+v2+`

`)}function ZDe(r){return Ht(r,function(e){var t=e.getRawData(),i=[e.name],n=[];return t.each(t.dimensions,function(){for(var s=arguments.length,u=arguments[s-1],a=t.getName(u),h=0;h<s-1;h++)n[h]=arguments[h];i.push((a?a+vv:"")+n.join(vv))}),i.join(`
`)}).join(`

`+v2+`

`)}function XDe(r){var e=WDe(r);return{value:un([qDe(e.seriesGroupByCategoryAxis),ZDe(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+v2+`

`),meta:e.meta}}function nT(r){return r.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function YDe(r){var e=r.slice(0,r.indexOf(`
`));if(e.indexOf(vv)>=0)return!0}var pP=new RegExp("["+vv+"]+","g");function KDe(r){for(var e=r.split(/\n+/g),t=nT(e.shift()).split(pP),i=[],n=Ht(t,function(h){return{name:h,data:[]}}),s=0;s<e.length;s++){var u=nT(e[s]).split(pP);i.push(u.shift());for(var a=0;a<u.length;a++)n[a]&&(n[a].data[s]=u[a])}return{series:n,categories:i}}function JDe(r){for(var e=r.split(/\n+/g),t=nT(e.shift()),i=[],n=0;n<e.length;n++){var s=nT(e[n]);if(!!s){var u=s.split(pP),a="",h=void 0,p=!1;isNaN(u[0])?(p=!0,a=u[0],u=u.slice(1),i[n]={name:a,value:[]},h=i[n].value):h=i[n]=[];for(var m=0;m<u.length;m++)h.push(+u[m]);h.length===1&&(p?i[n].value=h[0]:i[n]=h[0])}}return{name:t,data:i}}function QDe(r,e){var t=r.split(new RegExp(`
*`+v2+`
*`,"g")),i={series:[]};return ue(t,function(n,s){if(YDe(n)){var u=KDe(n),a=e[s],h=a.axisDim+"Axis";a&&(i[h]=i[h]||[],i[h][a.axisIndex]={data:u.categories},i.series=i.series.concat(u.series))}else{var u=JDe(n);i.series.push(u)}}),i}var ePe=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onclick=function(t,i){setTimeout(function(){i.dispatchAction({type:"hideTip"})});var n=i.getDom(),s=this.model;this._dom&&n.removeChild(this._dom);var u=document.createElement("div");u.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",u.style.backgroundColor=s.get("backgroundColor")||"#fff";var a=document.createElement("h4"),h=s.get("lang")||[];a.innerHTML=h[0]||s.get("title"),a.style.cssText="margin:10px 20px",a.style.color=s.get("textColor");var p=document.createElement("div"),m=document.createElement("textarea");p.style.cssText="overflow:auto";var v=s.get("optionToContent"),x=s.get("contentToOption"),w=XDe(t);if(kr(v)){var T=v(i.getOption());gr(T)?p.innerHTML=T:lv(T)&&p.appendChild(T)}else{m.readOnly=s.get("readOnly");var C=m.style;C.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",C.color=s.get("textColor"),C.borderColor=s.get("textareaBorderColor"),C.backgroundColor=s.get("textareaColor"),m.value=w.value,p.appendChild(m)}var I=w.meta,k=document.createElement("div");k.style.cssText="position:absolute;bottom:5px;left:0;right:0";var R="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",z=document.createElement("div"),$=document.createElement("div");R+=";background-color:"+s.get("buttonColor"),R+=";color:"+s.get("buttonTextColor");var j=this;function G(){n.removeChild(u),j._dom=null}qE(z,"click",G),qE($,"click",function(){if(x==null&&v!=null||x!=null&&v==null){G();return}var Y;try{kr(x)?Y=x(p,i.getOption()):Y=QDe(m.value,I)}catch(Z){throw G(),new Error("Data view format error "+Z)}Y&&i.dispatchAction({type:"changeDataView",newOption:Y}),G()}),z.innerHTML=h[1],$.innerHTML=h[2],$.style.cssText=z.style.cssText=R,!s.get("readOnly")&&k.appendChild($),k.appendChild(z),u.appendChild(a),u.appendChild(p),u.appendChild(k),p.style.height=n.clientHeight-80+"px",n.appendChild(u),this._dom=u},e.prototype.remove=function(t,i){this._dom&&i.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,i){this.remove(t,i)},e.getDefaultOption=function(t){var i={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return i},e}(hl);function tPe(r,e){return Ht(r,function(t,i){var n=e&&e[i];if(Br(n)&&!Nt(n)){var s=Br(t)&&!Nt(t);s||(t={value:t});var u=n.name!=null&&t.name==null;return t=zr(t,n),u&&delete t.name,t}else return t})}uc({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(r,e){var t=[];ue(r.newOption.series,function(i){var n=e.getSeriesByName(i.name)[0];if(!n)t.push(kt({type:"scatter"},i));else{var s=n.get("data");t.push({name:i.name,data:tPe(i.data,s)})}}),e.mergeOption(zr({series:t},r.newOption))});var rPe=ePe,UZ=ue,jZ=ki();function iPe(r,e){var t=pR(r);UZ(e,function(i,n){for(var s=t.length-1;s>=0;s--){var u=t[s];if(u[n])break}if(s<0){var a=r.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(a){var h=a.getPercentRange();t[0][n]={dataZoomId:n,start:h[0],end:h[1]}}}}),t.push(e)}function nPe(r){var e=pR(r),t=e[e.length-1];e.length>1&&e.pop();var i={};return UZ(t,function(n,s){for(var u=e.length-1;u>=0;u--)if(n=e[u][s],n){i[s]=n;break}}),i}function aPe(r){jZ(r).snapshots=null}function oPe(r){return pR(r).length}function pR(r){var e=jZ(r);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var sPe=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onclick=function(t,i){aPe(t),i.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var i={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return i},e}(hl);uc({type:"restore",event:"restore",update:"prepareAndUpdate"},function(r,e){e.resetOption("recreate")});var lPe=sPe,uPe=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],cPe=function(){function r(e,t,i){var n=this;this._targetInfoList=[];var s=Q6(t,e);ue(hPe,function(u,a){(!i||!i.include||di(i.include,a)>=0)&&u(s,n._targetInfoList)})}return r.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(i,n,s){if((i.coordRanges||(i.coordRanges=[])).push(n),!i.coordRange){i.coordRange=n;var u=eE[i.brushType](0,s,n);i.__rangeOffset={offset:iG[i.brushType](u.values,i.range,[1,1]),xyMinMax:u.xyMinMax}}}),e},r.prototype.matchOutputRanges=function(e,t,i){ue(e,function(n){var s=this.findTargetInfo(n,t);s&&s!==!0&&ue(s.coordSyses,function(u){var a=eE[n.brushType](1,u,n.range,!0);i(n,a.values,u,t)})},this)},r.prototype.setInputRanges=function(e,t){ue(e,function(i){var n=this.findTargetInfo(i,t);if(i.range=i.range||[],n&&n!==!0){i.panelId=n.panelId;var s=eE[i.brushType](0,n.coordSys,i.coordRange),u=i.__rangeOffset;i.range=u?iG[i.brushType](s.values,u.offset,dPe(s.xyMinMax,u.xyMinMax)):s.values}},this)},r.prototype.makePanelOpts=function(e,t){return Ht(this._targetInfoList,function(i){var n=i.getPanelRect();return{panelId:i.panelId,defaultBrushType:t?t(i):null,clipPath:K9(n),isTargetByCursor:Q9(n,e,i.coordSysModel),getLinearBrushOtherExtent:J9(n)}})},r.prototype.controlSeries=function(e,t,i){var n=this.findTargetInfo(e,i);return n===!0||n&&di(n.coordSyses,t.coordinateSystem)>=0},r.prototype.findTargetInfo=function(e,t){for(var i=this._targetInfoList,n=Q6(t,e),s=0;s<i.length;s++){var u=i[s],a=e.panelId;if(a){if(u.panelId===a)return u}else for(var h=0;h<eG.length;h++)if(eG[h](n,u))return u}return!0},r}();function mP(r){return r[0]>r[1]&&r.reverse(),r}function Q6(r,e){return v0(r,e,{includeMainTypes:uPe})}var hPe={grid:function(r,e){var t=r.xAxisModels,i=r.yAxisModels,n=r.gridModels,s=Mr(),u={},a={};!t&&!i&&!n||(ue(t,function(h){var p=h.axis.grid.model;s.set(p.id,p),u[p.id]=!0}),ue(i,function(h){var p=h.axis.grid.model;s.set(p.id,p),a[p.id]=!0}),ue(n,function(h){s.set(h.id,h),u[h.id]=!0,a[h.id]=!0}),s.each(function(h){var p=h.coordinateSystem,m=[];ue(p.getCartesians(),function(v,x){(di(t,v.getAxis("x").model)>=0||di(i,v.getAxis("y").model)>=0)&&m.push(v)}),e.push({panelId:"grid--"+h.id,gridModel:h,coordSysModel:h,coordSys:m[0],coordSyses:m,getPanelRect:tG.grid,xAxisDeclared:u[h.id],yAxisDeclared:a[h.id]})}))},geo:function(r,e){ue(r.geoModels,function(t){var i=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:i,coordSyses:[i],getPanelRect:tG.geo})})}},eG=[function(r,e){var t=r.xAxisModel,i=r.yAxisModel,n=r.gridModel;return!n&&t&&(n=t.axis.grid.model),!n&&i&&(n=i.axis.grid.model),n&&n===e.gridModel},function(r,e){var t=r.geoModel;return t&&t===e.geoModel}],tG={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var r=this.coordSys,e=r.getBoundingRect().clone();return e.applyTransform(Bp(r)),e}},eE={lineX:Qr(rG,0),lineY:Qr(rG,1),rect:function(r,e,t,i){var n=r?e.pointToData([t[0][0],t[1][0]],i):e.dataToPoint([t[0][0],t[1][0]],i),s=r?e.pointToData([t[0][1],t[1][1]],i):e.dataToPoint([t[0][1],t[1][1]],i),u=[mP([n[0],s[0]]),mP([n[1],s[1]])];return{values:u,xyMinMax:u}},polygon:function(r,e,t,i){var n=[[1/0,-1/0],[1/0,-1/0]],s=Ht(t,function(u){var a=r?e.pointToData(u,i):e.dataToPoint(u,i);return n[0][0]=Math.min(n[0][0],a[0]),n[1][0]=Math.min(n[1][0],a[1]),n[0][1]=Math.max(n[0][1],a[0]),n[1][1]=Math.max(n[1][1],a[1]),a});return{values:s,xyMinMax:n}}};function rG(r,e,t,i){var n=t.getAxis(["x","y"][r]),s=mP(Ht([0,1],function(a){return e?n.coordToData(n.toLocalCoord(i[a]),!0):n.toGlobalCoord(n.dataToCoord(i[a]))})),u=[];return u[r]=s,u[1-r]=[NaN,NaN],{values:s,xyMinMax:u}}var iG={lineX:Qr(nG,0),lineY:Qr(nG,1),rect:function(r,e,t){return[[r[0][0]-t[0]*e[0][0],r[0][1]-t[0]*e[0][1]],[r[1][0]-t[1]*e[1][0],r[1][1]-t[1]*e[1][1]]]},polygon:function(r,e,t){return Ht(r,function(i,n){return[i[0]-t[0]*e[n][0],i[1]-t[1]*e[n][1]]})}};function nG(r,e,t,i){return[e[0]-i[r]*t[0],e[1]-i[r]*t[1]]}function dPe(r,e){var t=aG(r),i=aG(e),n=[t[0]/i[0],t[1]/i[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function aG(r){return r?[r[0][1]-r[0][0],r[1][1]-r[1][0]]:[NaN,NaN]}var mR=cPe,gP=ue,fPe=Rpe("toolbox-dataZoom_"),pPe=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,i,n,s){this._brushController||(this._brushController=new Xk(n.getZr()),this._brushController.on("brush",xr(this._onBrush,this)).mount()),vPe(t,i,this,s,n),gPe(t,i)},e.prototype.onclick=function(t,i,n){mPe[n].call(this)},e.prototype.remove=function(t,i){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,i){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var i=t.areas;if(!t.isEnd||!i.length)return;var n={},s=this.ecModel;this._brushController.updateCovers([]);var u=new mR(gR(this.model),s,{include:["grid"]});u.matchOutputRanges(i,s,function(p,m,v){if(v.type==="cartesian2d"){var x=p.brushType;x==="rect"?(a("x",v,m[0]),a("y",v,m[1])):a({lineX:"x",lineY:"y"}[x],v,m)}}),iPe(s,n),this._dispatchZoomAction(n);function a(p,m,v){var x=m.getAxis(p),w=x.model,T=h(p,w,s),C=T.findRepresentativeAxisProxy(w).getMinMaxSpan();(C.minValueSpan!=null||C.maxValueSpan!=null)&&(v=om(0,v.slice(),x.scale.getExtent(),0,C.minValueSpan,C.maxValueSpan)),T&&(n[T.id]={dataZoomId:T.id,startValue:v[0],endValue:v[1]})}function h(p,m,v){var x;return v.eachComponent({mainType:"dataZoom",subType:"select"},function(w){var T=w.getAxisModel(p,m.componentIndex);T&&(x=w)}),x}},e.prototype._dispatchZoomAction=function(t){var i=[];gP(t,function(n,s){i.push(Nr(n))}),i.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:i})},e.getDefaultOption=function(t){var i={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return i},e}(hl),mPe={zoom:function(){var r=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:r})},back:function(){this._dispatchZoomAction(nPe(this.ecModel))}};function gR(r){var e={xAxisIndex:r.get("xAxisIndex",!0),yAxisIndex:r.get("yAxisIndex",!0),xAxisId:r.get("xAxisId",!0),yAxisId:r.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function gPe(r,e){r.setIconStatus("back",oPe(e)>1?"emphasis":"normal")}function vPe(r,e,t,i,n){var s=t._isZoomActive;i&&i.type==="takeGlobalCursor"&&(s=i.key==="dataZoomSelect"?i.dataZoomSelectActive:!1),t._isZoomActive=s,r.setIconStatus("zoom",s?"emphasis":"normal");var u=new mR(gR(r),e,{include:["grid"]}),a=u.makePanelOpts(n,function(h){return h.xAxisDeclared&&!h.yAxisDeclared?"lineX":!h.xAxisDeclared&&h.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(a).enableBrush(s&&a.length?{brushType:"auto",brushStyle:r.getModel("brushStyle").getItemStyle()}:!1)}pve("dataZoom",function(r){var e=r.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var i=e.getModel(t),n=[],s=gR(i),u=v0(r,s);gP(u.xAxisModels,function(h){return a(h,"xAxis","xAxisIndex")}),gP(u.yAxisModels,function(h){return a(h,"yAxis","yAxisIndex")});function a(h,p,m){var v=h.componentIndex,x={type:"select",$fromToolbox:!0,filterMode:i.get("filterMode",!0)||"filter",id:fPe+p+v};x[m]=v,n.push(x)}return n});var _Pe=pPe;function yPe(r){r.registerComponentModel(zDe),r.registerComponentView(VDe),Bg("saveAsImage",GDe),Bg("magicType",HDe),Bg("dataView",rPe),Bg("dataZoom",_Pe),Bg("restore",lPe),gi(RDe)}var xPe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(Oi),bPe=xPe;function HZ(r){var e=r.get("confine");return e!=null?!!e:r.get("renderMode")==="richText"}function WZ(r){if(!!Fi.domSupported){for(var e=document.documentElement.style,t=0,i=r.length;t<i;t++)if(r[t]in e)return r[t]}}var qZ=WZ(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),wPe=WZ(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function ZZ(r,e){if(!r)return e;e=_W(e,!0);var t=r.indexOf(e);return r=t===-1?e:"-"+r.slice(0,t)+"-"+e,r.toLowerCase()}function SPe(r,e){var t=r.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(r);return t?e?t[e]:t:null}var TPe=ZZ(wPe,"transition"),vR=ZZ(qZ,"transform"),MPe="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Fi.transform3dSupported?"will-change:transform;":"");function APe(r){return r=r==="left"?"right":r==="right"?"left":r==="top"?"bottom":"top",r}function CPe(r,e,t){if(!gr(t)||t==="inside")return"";var i=r.get("backgroundColor"),n=r.get("borderWidth");e=Zp(e);var s=APe(t),u=Math.max(Math.round(n)*1.5,6),a="",h=vR+":",p;di(["left","right"],s)>-1?(a+="top:50%",h+="translateY(-50%) rotate("+(p=s==="left"?-225:-45)+"deg)"):(a+="left:50%",h+="translateX(-50%) rotate("+(p=s==="top"?225:45)+"deg)");var m=p*Math.PI/180,v=u+n,x=v*Math.abs(Math.cos(m))+v*Math.abs(Math.sin(m)),w=Math.round(((x-Math.SQRT2*n)/2+Math.SQRT2*n-(x-v)/2)*100)/100;a+=";"+s+":-"+w+"px";var T=e+" solid "+n+"px;",C=["position:absolute;width:"+u+"px;height:"+u+"px;z-index:-1;",a+";"+h+";","border-bottom:"+T,"border-right:"+T,"background-color:"+i+";"];return'<div style="'+C.join("")+'"></div>'}function IPe(r,e){var t="cubic-bezier(0.23,1,0.32,1)",i=" "+r/2+"s "+t,n="opacity"+i+",visibility"+i;return e||(i=" "+r+"s "+t,n+=Fi.transformSupported?","+vR+i:",left"+i+",top"+i),TPe+":"+n}function oG(r,e,t){var i=r.toFixed(0)+"px",n=e.toFixed(0)+"px";if(!Fi.transformSupported)return t?"top:"+n+";left:"+i+";":[["top",n],["left",i]];var s=Fi.transform3dSupported,u="translate"+(s?"3d":"")+"("+i+","+n+(s?",0":"")+")";return t?"top:0;left:0;"+vR+":"+u+";":[["top",0],["left",0],[qZ,u]]}function EPe(r){var e=[],t=r.get("fontSize"),i=r.getTextColor();i&&e.push("color:"+i),e.push("font:"+r.getFont()),t&&e.push("line-height:"+Math.round(t*3/2)+"px");var n=r.get("textShadowColor"),s=r.get("textShadowBlur")||0,u=r.get("textShadowOffsetX")||0,a=r.get("textShadowOffsetY")||0;return n&&s&&e.push("text-shadow:"+u+"px "+a+"px "+s+"px "+n),ue(["decoration","align"],function(h){var p=r.get(h);p&&e.push("text-"+h+":"+p)}),e.join(";")}function DPe(r,e,t){var i=[],n=r.get("transitionDuration"),s=r.get("backgroundColor"),u=r.get("shadowBlur"),a=r.get("shadowColor"),h=r.get("shadowOffsetX"),p=r.get("shadowOffsetY"),m=r.getModel("textStyle"),v=e7(r,"html"),x=h+"px "+p+"px "+u+"px "+a;return i.push("box-shadow:"+x),e&&n&&i.push(IPe(n,t)),s&&i.push("background-color:"+s),ue(["width","color","radius"],function(w){var T="border-"+w,C=_W(T),I=r.get(C);I!=null&&i.push(T+":"+I+(w==="color"?"":"px"))}),i.push(EPe(m)),v!=null&&i.push("padding:"+Rv(v).join("px ")+"px"),i.join(";")+";"}function sG(r,e,t,i,n){var s=e&&e.painter;if(t){var u=s&&s.getViewportRoot();u&&ife(r,u,t,i,n)}else{r[0]=i,r[1]=n;var a=s&&s.getViewportRootOffset();a&&(r[0]+=a.offsetLeft,r[1]+=a.offsetTop)}r[2]=r[0]/e.getWidth(),r[3]=r[1]/e.getHeight()}var PPe=function(){function r(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,Fi.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var n=this._zr=e.getZr(),s=t.appendTo,u=s&&(gr(s)?document.querySelector(s):lv(s)?s:kr(s)&&s(e.getDom()));sG(this._styleCoord,n,u,e.getWidth()/2,e.getHeight()/2),(u||e.getDom()).appendChild(i),this._api=e,this._container=u;var a=this;i.onmouseenter=function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0},i.onmousemove=function(h){if(h=h||window.event,!a._enterable){var p=n.handler,m=n.painter.getViewportRoot();ol(m,h,!0),p.dispatch("mousemove",h)}},i.onmouseleave=function(){a._inContent=!1,a._enterable&&a._show&&a.hideLater(a._hideDelay)}}return r.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),i=SPe(t,"position"),n=t.style;n.position!=="absolute"&&i!=="absolute"&&(n.position="relative")}var s=e.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this.el.className=e.get("className")||""},r.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i=this.el,n=i.style,s=this._styleCoord;i.innerHTML?n.cssText=MPe+DPe(e,!this._firstShow,this._longHide)+oG(s[0],s[1],!0)+("border-color:"+Zp(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):n.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},r.prototype.setContent=function(e,t,i,n,s){var u=this.el;if(e==null){u.innerHTML="";return}var a="";if(gr(s)&&i.get("trigger")==="item"&&!HZ(i)&&(a=CPe(i,n,s)),gr(e))u.innerHTML=e+a;else if(e){u.innerHTML="",Nt(e)||(e=[e]);for(var h=0;h<e.length;h++)lv(e[h])&&e[h].parentNode!==u&&u.appendChild(e[h]);if(a&&u.childNodes.length){var p=document.createElement("div");p.innerHTML=a,u.appendChild(p)}}},r.prototype.setEnterable=function(e){this._enterable=e},r.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},r.prototype.moveTo=function(e,t){var i=this._styleCoord;if(sG(i,this._zr,this._container,e,t),i[0]!=null&&i[1]!=null){var n=this.el.style,s=oG(i[0],i[1]);ue(s,function(u){n[u[0]]=u[1]})}},r.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},r.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",Fi.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},r.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(xr(this.hide,this),e)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},r}(),LPe=PPe,kPe=function(){function r(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),uG(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return r.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},r.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},r.prototype.setContent=function(e,t,i,n,s){var u=this;Br(e)&&Qi(""),this.el&&this._zr.remove(this.el);var a=i.getModel("textStyle");this.el=new Ni({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:n,textShadowColor:a.get("textShadowColor"),fill:i.get(["textStyle","color"]),padding:e7(i,"richText"),verticalAlign:"top",align:"left"},z:i.get("z")}),ue(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(p){u.el.style[p]=i.get(p)}),ue(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(p){u.el.style[p]=a.get(p)||0}),this._zr.add(this.el);var h=this;this.el.on("mouseover",function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0}),this.el.on("mouseout",function(){h._enterable&&h._show&&h.hideLater(h._hideDelay),h._inContent=!1})},r.prototype.setEnterable=function(e){this._enterable=e},r.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),i=lG(e.style);return[t.width+i.left+i.right,t.height+i.top+i.bottom]},r.prototype.moveTo=function(e,t){var i=this.el;if(i){var n=this._styleCoord;uG(n,this._zr,e,t),e=n[0],t=n[1];var s=i.style,u=cd(s.borderWidth||0),a=lG(s);i.x=e+u+a.left,i.y=t+u+a.top,i.markRedraw()}},r.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},r.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},r.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(xr(this.hide,this),e)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){this._zr.remove(this.el)},r}();function cd(r){return Math.max(0,r)}function lG(r){var e=cd(r.shadowBlur||0),t=cd(r.shadowOffsetX||0),i=cd(r.shadowOffsetY||0);return{left:cd(e-t),right:cd(e+t),top:cd(e-i),bottom:cd(e+i)}}function uG(r,e,t,i){r[0]=t,r[1]=i,r[2]=r[0]/e.getWidth(),r[3]=r[1]/e.getHeight()}var RPe=kPe,OPe=new Li({shape:{x:-1,y:-1,width:2,height:2}}),zPe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,i){if(!(Fi.node||!i.getDom())){var n=t.getComponent("tooltip"),s=this._renderMode=$pe(n.get("renderMode"));this._tooltipContent=s==="richText"?new RPe(i):new LPe(i,{appendTo:n.get("appendToBody",!0)?"body":n.get("appendTo",!0)})}},e.prototype.render=function(t,i,n){if(!(Fi.node||!n.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=i,this._api=n;var s=this._tooltipContent;s.update(t),s.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?Nv(this,"_updatePosition",50,"fixRate"):X0(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,i=t.get("triggerOn");PZ("itemTooltip",this._api,xr(function(n,s,u){i!=="none"&&(i.indexOf(n)>=0?this._tryShow(s,u):n==="leave"&&this._hide(u))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,i=this._ecModel,n=this._api,s=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&s!=="none"&&s!=="click"){var u=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&u.manuallyShowTip(t,i,n,{x:u._lastX,y:u._lastY,dataByCoordSys:u._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,i,n,s){if(!(s.from===this.uid||Fi.node||!n.getDom())){var u=cG(s,n);this._ticket="";var a=s.dataByCoordSys,h=VPe(s,i,n);if(h){var p=h.el.getBoundingRect().clone();p.applyTransform(h.el.transform),this._tryShow({offsetX:p.x+p.width/2,offsetY:p.y+p.height/2,target:h.el,position:s.position,positionDefault:"bottom"},u)}else if(s.tooltip&&s.x!=null&&s.y!=null){var m=OPe;m.x=s.x,m.y=s.y,m.update(),Gr(m).tooltipConfig={name:null,option:s.tooltip},this._tryShow({offsetX:s.x,offsetY:s.y,target:m},u)}else if(a)this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,dataByCoordSys:a,tooltipOption:s.tooltipOption},u);else if(s.seriesIndex!=null){if(this._manuallyAxisShowTip(t,i,n,s))return;var v=LZ(s,i),x=v.point[0],w=v.point[1];x!=null&&w!=null&&this._tryShow({offsetX:x,offsetY:w,target:v.el,position:s.position,positionDefault:"bottom"},u)}else s.x!=null&&s.y!=null&&(n.dispatchAction({type:"updateAxisPointer",x:s.x,y:s.y}),this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,target:n.getZr().findHover(s.x,s.y).target},u))}},e.prototype.manuallyHideTip=function(t,i,n,s){var u=this._tooltipContent;this._tooltipModel&&u.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,s.from!==this.uid&&this._hide(cG(s,n))},e.prototype._manuallyAxisShowTip=function(t,i,n,s){var u=s.seriesIndex,a=s.dataIndex,h=i.getComponent("axisPointer").coordSysAxesInfo;if(!(u==null||a==null||h==null)){var p=i.getSeriesByIndex(u);if(!!p){var m=p.getData(),v=By([m.getItemModel(a),p,(p.coordinateSystem||{}).model],this._tooltipModel);if(v.get("trigger")==="axis")return n.dispatchAction({type:"updateAxisPointer",seriesIndex:u,dataIndex:a,position:s.position}),!0}}},e.prototype._tryShow=function(t,i){var n=t.target,s=this._tooltipModel;if(!!s){this._lastX=t.offsetX,this._lastY=t.offsetY;var u=t.dataByCoordSys;if(u&&u.length)this._showAxisTooltip(u,t);else if(n){var a=Gr(n);if(a.ssrType==="legend")return;this._lastDataByCoordSys=null;var h,p;Tp(n,function(m){if(Gr(m).dataIndex!=null)return h=m,!0;if(Gr(m).tooltipConfig!=null)return p=m,!0},!0),h?this._showSeriesItemTooltip(t,h,i):p?this._showComponentItemTooltip(t,p,i):this._hide(i)}else this._lastDataByCoordSys=null,this._hide(i)}},e.prototype._showOrMove=function(t,i){var n=t.get("showDelay");i=xr(i,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(i,n):i()},e.prototype._showAxisTooltip=function(t,i){var n=this._ecModel,s=this._tooltipModel,u=[i.offsetX,i.offsetY],a=By([i.tooltipOption],s),h=this._renderMode,p=[],m=Oa("section",{blocks:[],noHeader:!0}),v=[],x=new FC;ue(t,function(R){ue(R.dataByAxis,function(z){var $=n.getComponent(z.axisDim+"Axis",z.axisIndex),j=z.value;if(!(!$||j==null)){var G=IZ(j,$.axis,n,z.seriesDataIndices,z.valueLabelOpt),Y=Oa("section",{header:G,noHeader:!Kl(G),sortBlocks:!0,blocks:[]});m.blocks.push(Y),ue(z.seriesDataIndices,function(Z){var H=n.getSeriesByIndex(Z.seriesIndex),re=Z.dataIndexInside,ne=H.getDataParams(re);if(!(ne.dataIndex<0)){ne.axisDim=z.axisDim,ne.axisIndex=z.axisIndex,ne.axisType=z.axisType,ne.axisId=z.axisId,ne.axisValue=_k($.axis,{value:j}),ne.axisValueLabel=G,ne.marker=x.makeTooltipMarker("item",Zp(ne.color),h);var se=Z4(H.formatTooltip(re,!0,null)),me=se.frag;if(me){var Se=By([H],s).get("valueFormatter");Y.blocks.push(Se?kt({valueFormatter:Se},me):me)}se.text&&v.push(se.text),p.push(ne)}})}})}),m.blocks.reverse(),v.reverse();var w=i.position,T=a.get("order"),C=eN(m,x,h,T,n.get("useUTC"),a.get("textStyle"));C&&v.unshift(C);var I=h==="richText"?`

`:"<br/>",k=v.join(I);this._showOrMove(a,function(){this._updateContentNotChangedOnAxis(t,p)?this._updatePosition(a,w,u[0],u[1],this._tooltipContent,p):this._showTooltipContent(a,k,p,Math.random()+"",u[0],u[1],w,null,x)})},e.prototype._showSeriesItemTooltip=function(t,i,n){var s=this._ecModel,u=Gr(i),a=u.seriesIndex,h=s.getSeriesByIndex(a),p=u.dataModel||h,m=u.dataIndex,v=u.dataType,x=p.getData(v),w=this._renderMode,T=t.positionDefault,C=By([x.getItemModel(m),p,h&&(h.coordinateSystem||{}).model],this._tooltipModel,T?{position:T}:null),I=C.get("trigger");if(!(I!=null&&I!=="item")){var k=p.getDataParams(m,v),R=new FC;k.marker=R.makeTooltipMarker("item",Zp(k.color),w);var z=Z4(p.formatTooltip(m,!1,v)),$=C.get("order"),j=C.get("valueFormatter"),G=z.frag,Y=G?eN(j?kt({valueFormatter:j},G):G,R,w,$,s.get("useUTC"),C.get("textStyle")):z.text,Z="item_"+p.name+"_"+m;this._showOrMove(C,function(){this._showTooltipContent(C,Y,k,Z,t.offsetX,t.offsetY,t.position,t.target,R)}),n({type:"showTip",dataIndexInside:m,dataIndex:x.getRawIndex(m),seriesIndex:a,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,i,n){var s=Gr(i),u=s.tooltipConfig,a=u.option||{};if(gr(a)){var h=a;a={content:h,formatter:h}}var p=[a],m=this._ecModel.getComponent(s.componentMainType,s.componentIndex);m&&p.push(m),p.push({formatter:a.content});var v=t.positionDefault,x=By(p,this._tooltipModel,v?{position:v}:null),w=x.get("content"),T=Math.random()+"",C=new FC;this._showOrMove(x,function(){var I=Nr(x.get("formatterParams")||{});this._showTooltipContent(x,w,I,T,t.offsetX,t.offsetY,t.position,i,C)}),n({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,i,n,s,u,a,h,p,m){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var v=this._tooltipContent;v.setEnterable(t.get("enterable"));var x=t.get("formatter");h=h||t.get("position");var w=i,T=this._getNearestPoint([u,a],n,t.get("trigger"),t.get("borderColor")),C=T.color;if(x)if(gr(x)){var I=t.ecModel.get("useUTC"),k=Nt(n)?n[0]:n,R=k&&k.axisType&&k.axisType.indexOf("time")>=0;w=x,R&&(w=YT(k.axisValue,w,I)),w=yW(w,n,!0)}else if(kr(x)){var z=xr(function($,j){$===this._ticket&&(v.setContent(j,m,t,C,h),this._updatePosition(t,h,u,a,v,n,p))},this);this._ticket=s,w=x(n,s,z)}else w=x;v.setContent(w,m,t,C,h),v.show(t,C),this._updatePosition(t,h,u,a,v,n,p)}},e.prototype._getNearestPoint=function(t,i,n,s){if(n==="axis"||Nt(i))return{color:s||(this._renderMode==="html"?"#fff":"none")};if(!Nt(i))return{color:s||i.color||i.borderColor}},e.prototype._updatePosition=function(t,i,n,s,u,a,h){var p=this._api.getWidth(),m=this._api.getHeight();i=i||t.get("position");var v=u.getSize(),x=t.get("align"),w=t.get("verticalAlign"),T=h&&h.getBoundingRect().clone();if(h&&T.applyTransform(h.transform),kr(i)&&(i=i([n,s],a,u.el,T,{viewSize:[p,m],contentSize:v.slice()})),Nt(i))n=sr(i[0],p),s=sr(i[1],m);else if(Br(i)){var C=i;C.width=v[0],C.height=v[1];var I=xa(C,{width:p,height:m});n=I.x,s=I.y,x=null,w=null}else if(gr(i)&&h){var k=NPe(i,T,v,t.get("borderWidth"));n=k[0],s=k[1]}else{var k=BPe(n,s,u,p,m,x?null:20,w?null:20);n=k[0],s=k[1]}if(x&&(n-=hG(x)?v[0]/2:x==="right"?v[0]:0),w&&(s-=hG(w)?v[1]/2:w==="bottom"?v[1]:0),HZ(t)){var k=FPe(n,s,u,p,m);n=k[0],s=k[1]}u.moveTo(n,s)},e.prototype._updateContentNotChangedOnAxis=function(t,i){var n=this._lastDataByCoordSys,s=this._cbParamsList,u=!!n&&n.length===t.length;return u&&ue(n,function(a,h){var p=a.dataByAxis||[],m=t[h]||{},v=m.dataByAxis||[];u=u&&p.length===v.length,u&&ue(p,function(x,w){var T=v[w]||{},C=x.seriesDataIndices||[],I=T.seriesDataIndices||[];u=u&&x.value===T.value&&x.axisType===T.axisType&&x.axisId===T.axisId&&C.length===I.length,u&&ue(C,function(k,R){var z=I[R];u=u&&k.seriesIndex===z.seriesIndex&&k.dataIndex===z.dataIndex}),s&&ue(x.seriesDataIndices,function(k){var R=k.seriesIndex,z=i[R],$=s[R];z&&$&&$.data!==z.data&&(u=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=i,!!u},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,i){Fi.node||!i.getDom()||(X0(this,"_updatePosition"),this._tooltipContent.dispose(),hP("itemTooltip",i))},e.type="tooltip",e}(Jn);function By(r,e,t){var i=e.ecModel,n;t?(n=new An(t,i,i),n=new An(e.option,n,i)):n=e;for(var s=r.length-1;s>=0;s--){var u=r[s];u&&(u instanceof An&&(u=u.get("tooltip",!0)),gr(u)&&(u={formatter:u}),u&&(n=new An(u,n,i)))}return n}function cG(r,e){return r.dispatchAction||xr(e.dispatchAction,e)}function BPe(r,e,t,i,n,s,u){var a=t.getSize(),h=a[0],p=a[1];return s!=null&&(r+h+s+2>i?r-=h+s:r+=s),u!=null&&(e+p+u>n?e-=p+u:e+=u),[r,e]}function FPe(r,e,t,i,n){var s=t.getSize(),u=s[0],a=s[1];return r=Math.min(r+u,i)-u,e=Math.min(e+a,n)-a,r=Math.max(r,0),e=Math.max(e,0),[r,e]}function NPe(r,e,t,i){var n=t[0],s=t[1],u=Math.ceil(Math.SQRT2*i)+8,a=0,h=0,p=e.width,m=e.height;switch(r){case"inside":a=e.x+p/2-n/2,h=e.y+m/2-s/2;break;case"top":a=e.x+p/2-n/2,h=e.y-s-u;break;case"bottom":a=e.x+p/2-n/2,h=e.y+m+u;break;case"left":a=e.x-n-u,h=e.y+m/2-s/2;break;case"right":a=e.x+p+u,h=e.y+m/2-s/2}return[a,h]}function hG(r){return r==="center"||r==="middle"}function VPe(r,e,t){var i=IL(r).queryOptionMap,n=i.keys()[0];if(!(!n||n==="series")){var s=px(e,n,i.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}),u=s.models[0];if(!!u){var a=t.getViewOfComponentModel(u),h;if(a.group.traverse(function(p){var m=Gr(p).tooltipConfig;if(m&&m.name===r.name)return h=p,!0}),h)return{componentMainType:n,componentIndex:u.componentIndex,el:h}}}}var $Pe=zPe;function GPe(r){gi(kx),r.registerComponentModel(bPe),r.registerComponentView($Pe),r.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},aa),r.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},aa)}var UPe=["rect","polygon","keep","clear"];function jPe(r,e){var t=hn(r?r.brush:[]);if(!!t.length){var i=[];ue(t,function(h){var p=h.hasOwnProperty("toolbox")?h.toolbox:[];p instanceof Array&&(i=i.concat(p))});var n=r&&r.toolbox;Nt(n)&&(n=n[0]),n||(n={feature:{}},r.toolbox=[n]);var s=n.feature||(n.feature={}),u=s.brush||(s.brush={}),a=u.type||(u.type=[]);a.push.apply(a,i),HPe(a),e&&!a.length&&a.push.apply(a,UPe)}}function HPe(r){var e={};ue(r,function(t){e[t]=1}),r.length=0,ue(e,function(t,i){r.push(i)})}var dG=ue;function fG(r){if(r){for(var e in r)if(r.hasOwnProperty(e))return!0}}function vP(r,e,t){var i={};return dG(e,function(s){var u=i[s]=n();dG(r[s],function(a,h){if(!!eo.isValidType(h)){var p={type:h,visual:a};t&&t(p,s),u[h]=new eo(p),h==="opacity"&&(p=Nr(p),p.type="colorAlpha",u.__hidden.__alphaForOpacity=new eo(p))}})}),i;function n(){var s=function(){};s.prototype.__hidden=s.prototype;var u=new s;return u}}function XZ(r,e,t){var i;ue(t,function(n){e.hasOwnProperty(n)&&fG(e[n])&&(i=!0)}),i&&ue(t,function(n){e.hasOwnProperty(n)&&fG(e[n])?r[n]=Nr(e[n]):delete r[n]})}function WPe(r,e,t,i,n,s){var u={};ue(r,function(v){var x=eo.prepareVisualTypes(e[v]);u[v]=x});var a;function h(v){return sk(t,a,v)}function p(v,x){c7(t,a,v,x)}s==null?t.each(m):t.each([s],m);function m(v,x){a=s==null?v:x;var w=t.getRawDataItem(a);if(!(w&&w.visualMap===!1))for(var T=i.call(n,v),C=e[T],I=u[T],k=0,R=I.length;k<R;k++){var z=I[k];C[z]&&C[z].applyVisual(v,h,p)}}}function qPe(r,e,t,i){var n={};return ue(r,function(s){var u=eo.prepareVisualTypes(e[s]);n[s]=u}),{progress:function(u,a){var h;i!=null&&(h=a.getDimensionIndex(i));function p(j){return sk(a,v,j)}function m(j,G){c7(a,v,j,G)}for(var v,x=a.getStore();(v=u.next())!=null;){var w=a.getRawDataItem(v);if(!(w&&w.visualMap===!1))for(var T=i!=null?x.get(h,v):v,C=t(T),I=e[C],k=n[C],R=0,z=k.length;R<z;R++){var $=k[R];I[$]&&I[$].applyVisual(T,p,m)}}}}}function ZPe(r){var e=r.brushType,t={point:function(i){return pG[e].point(i,t,r)},rect:function(i){return pG[e].rect(i,t,r)}};return t}var pG={lineX:mG(0),lineY:mG(1),rect:{point:function(r,e,t){return r&&t.boundingRect.contain(r[0],r[1])},rect:function(r,e,t){return r&&t.boundingRect.intersect(r)}},polygon:{point:function(r,e,t){return r&&t.boundingRect.contain(r[0],r[1])&&gp(t.range,r[0],r[1])},rect:function(r,e,t){var i=t.range;if(!r||i.length<=1)return!1;var n=r.x,s=r.y,u=r.width,a=r.height,h=i[0];if(gp(i,n,s)||gp(i,n+u,s)||gp(i,n,s+a)||gp(i,n+u,s+a)||ai.create(r).contain(h[0],h[1])||Zy(n,s,n+u,s,i)||Zy(n,s,n,s+a,i)||Zy(n+u,s,n+u,s+a,i)||Zy(n,s+a,n+u,s+a,i))return!0}}};function mG(r){var e=["x","y"],t=["width","height"];return{point:function(i,n,s){if(i){var u=s.range,a=i[r];return Fy(a,u)}},rect:function(i,n,s){if(i){var u=s.range,a=[i[e[r]],i[e[r]]+i[t[r]]];return a[1]<a[0]&&a.reverse(),Fy(a[0],u)||Fy(a[1],u)||Fy(u[0],a)||Fy(u[1],a)}}}}function Fy(r,e){return e[0]<=r&&r<=e[1]}var gG=["inBrush","outOfBrush"],tE="__ecBrushSelect",_P="__ecInBrushSelectEvent";function YZ(r){r.eachComponent({mainType:"brush"},function(e){var t=e.brushTargetManager=new mR(e.option,r);t.setInputRanges(e.areas,r)})}function XPe(r,e,t){var i=[],n,s;r.eachComponent({mainType:"brush"},function(u){t&&t.type==="takeGlobalCursor"&&u.setBrushOption(t.key==="brush"?t.brushOption:{brushType:!1})}),YZ(r),r.eachComponent({mainType:"brush"},function(u,a){var h={brushId:u.id,brushIndex:a,brushName:u.name,areas:Nr(u.areas),selected:[]};i.push(h);var p=u.option,m=p.brushLink,v=[],x=[],w=[],T=!1;a||(n=p.throttleType,s=p.throttleDelay);var C=Ht(u.areas,function(j){var G=QPe[j.brushType],Y=zr({boundingRect:G?G(j):void 0},j);return Y.selectors=ZPe(Y),Y}),I=vP(u.option,gG,function(j){j.mappingMethod="fixed"});Nt(m)&&ue(m,function(j){v[j]=1});function k(j){return m==="all"||!!v[j]}function R(j){return!!j.length}r.eachSeries(function(j,G){var Y=w[G]=[];j.subType==="parallel"?z(j,G):$(j,G,Y)});function z(j,G){var Y=j.coordinateSystem;T=T||Y.hasAxisBrushed(),k(G)&&Y.eachActiveState(j.getData(),function(Z,H){Z==="active"&&(x[H]=1)})}function $(j,G,Y){if(!(!j.brushSelector||JPe(u,G))&&(ue(C,function(H){u.brushTargetManager.controlSeries(H,j,r)&&Y.push(H),T=T||R(Y)}),k(G)&&R(Y))){var Z=j.getData();Z.each(function(H){vG(j,Y,Z,H)&&(x[H]=1)})}}r.eachSeries(function(j,G){var Y={seriesId:j.id,seriesIndex:G,seriesName:j.name,dataIndex:[]};h.selected.push(Y);var Z=w[G],H=j.getData(),re=k(G)?function(ne){return x[ne]?(Y.dataIndex.push(H.getRawIndex(ne)),"inBrush"):"outOfBrush"}:function(ne){return vG(j,Z,H,ne)?(Y.dataIndex.push(H.getRawIndex(ne)),"inBrush"):"outOfBrush"};(k(G)?T:R(Z))&&WPe(gG,I,H,re)})}),YPe(e,n,s,i,t)}function YPe(r,e,t,i,n){if(!!n){var s=r.getZr();if(!s[_P]){s[tE]||(s[tE]=KPe);var u=Nv(s,tE,t,e);u(r,i)}}}function KPe(r,e){if(!r.isDisposed()){var t=r.getZr();t[_P]=!0,r.dispatchAction({type:"brushSelect",batch:e}),t[_P]=!1}}function vG(r,e,t,i){for(var n=0,s=e.length;n<s;n++){var u=e[n];if(r.brushSelector(i,t,u.selectors,u))return!0}}function JPe(r,e){var t=r.option.seriesIndex;return t!=null&&t!=="all"&&(Nt(t)?di(t,e)<0:e!==t)}var QPe={rect:function(r){return _G(r.range)},polygon:function(r){for(var e,t=r.range,i=0,n=t.length;i<n;i++){e=e||[[1/0,-1/0],[1/0,-1/0]];var s=t[i];s[0]<e[0][0]&&(e[0][0]=s[0]),s[0]>e[0][1]&&(e[0][1]=s[0]),s[1]<e[1][0]&&(e[1][0]=s[1]),s[1]>e[1][1]&&(e[1][1]=s[1])}return e&&_G(e)}};function _G(r){return new ai(r[0][0],r[1][0],r[0][1]-r[0][0],r[1][1]-r[1][0])}var eLe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,i){this.ecModel=t,this.api=i,this.model,(this._brushController=new Xk(i.getZr())).on("brush",xr(this._onBrush,this)).mount()},e.prototype.render=function(t,i,n,s){this.model=t,this._updateController(t,i,n,s)},e.prototype.updateTransform=function(t,i,n,s){YZ(i),this._updateController(t,i,n,s)},e.prototype.updateVisual=function(t,i,n,s){this.updateTransform(t,i,n,s)},e.prototype.updateView=function(t,i,n,s){this._updateController(t,i,n,s)},e.prototype._updateController=function(t,i,n,s){(!s||s.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var i=this.model.id,n=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:i,areas:Nr(n),$from:i}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:i,areas:Nr(n),$from:i})},e.type="brush",e}(Jn),tLe=eLe,rLe="#ddd",iLe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.areas=[],t.brushOption={},t}return e.prototype.optionUpdated=function(t,i){var n=this.option;!i&&XZ(n,t,["inBrush","outOfBrush"]);var s=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:rLe},s.hasOwnProperty("liftZ")||(s.liftZ=5)},e.prototype.setAreas=function(t){!t||(this.areas=Ht(t,function(i){return yG(this.option,i)},this))},e.prototype.setBrushOption=function(t){this.brushOption=yG(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(Oi);function yG(r,e){return ni({brushType:r.brushType,brushMode:r.brushMode,transformable:r.transformable,brushStyle:new An(r.brushStyle).getItemStyle(),removeOnClick:r.removeOnClick,z:r.z},e,!0)}var nLe=iLe,aLe=["rect","polygon","lineX","lineY","keep","clear"],oLe=function(r){lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,i,n){var s,u,a;i.eachComponent({mainType:"brush"},function(h){s=h.brushType,u=h.brushOption.brushMode||"single",a=a||!!h.areas.length}),this._brushType=s,this._brushMode=u,ue(t.get("type",!0),function(h){t.setIconStatus(h,(h==="keep"?u==="multiple":h==="clear"?a:h===s)?"emphasis":"normal")})},e.prototype.updateView=function(t,i,n){this.render(t,i,n)},e.prototype.getIcons=function(){var t=this.model,i=t.get("icon",!0),n={};return ue(t.get("type",!0),function(s){i[s]&&(n[s]=i[s])}),n},e.prototype.onclick=function(t,i,n){var s=this._brushType,u=this._brushMode;n==="clear"?(i.dispatchAction({type:"axisAreaSelect",intervals:[]}),i.dispatchAction({type:"brush",command:"clear",areas:[]})):i.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:n==="keep"?s:s===n?!1:n,brushMode:n==="keep"?u==="multiple"?"single":"multiple":u}})},e.getDefaultOption=function(t){var i={show:!0,type:aLe.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])};return i},e}(hl),sLe=oLe;function lLe(r){r.registerComponentView(tLe),r.registerComponentModel(nLe),r.registerPreprocessor(jPe),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,XPe),r.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(i){i.setAreas(e.areas)})}),r.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},aa),r.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},aa),Bg("brush",sLe)}var uLe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(Oi),cLe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,n){if(this.group.removeAll(),!!t.get("show")){var s=this.group,u=t.getModel("textStyle"),a=t.getModel("subtextStyle"),h=t.get("textAlign"),p=Yr(t.get("textBaseline"),t.get("textVerticalAlign")),m=new Ni({style:Mn(u,{text:t.get("text"),fill:u.getTextColor()},{disableBox:!0}),z2:10}),v=m.getBoundingRect(),x=t.get("subtext"),w=new Ni({style:Mn(a,{text:x,fill:a.getTextColor(),y:v.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),T=t.get("link"),C=t.get("sublink"),I=t.get("triggerEvent",!0);m.silent=!T&&!I,w.silent=!C&&!I,T&&m.on("click",function(){kS(T,"_"+t.get("target"))}),C&&w.on("click",function(){kS(C,"_"+t.get("subtarget"))}),Gr(m).eventData=Gr(w).eventData=I?{componentType:"title",componentIndex:t.componentIndex}:null,s.add(m),x&&s.add(w);var k=s.getBoundingRect(),R=t.getBoxLayoutParams();R.width=k.width,R.height=k.height;var z=xa(R,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));h||(h=t.get("left")||t.get("right"),h==="middle"&&(h="center"),h==="right"?z.x+=z.width:h==="center"&&(z.x+=z.width/2)),p||(p=t.get("top")||t.get("bottom"),p==="center"&&(p="middle"),p==="bottom"?z.y+=z.height:p==="middle"&&(z.y+=z.height/2),p=p||"top"),s.x=z.x,s.y=z.y,s.markRedraw();var $={align:h,verticalAlign:p};m.setStyle($),w.setStyle($),k=s.getBoundingRect();var j=z.margin,G=t.getItemStyle(["color","opacity"]);G.fill=t.get("backgroundColor");var Y=new Li({shape:{x:k.x-j[3],y:k.y-j[0],width:k.width+j[1]+j[3],height:k.height+j[0]+j[2],r:t.get("borderRadius")},style:G,subPixelOptimize:!0,silent:!0});s.add(Y)}},e.type="title",e}(Jn);function hLe(r){r.registerComponentModel(uLe),r.registerComponentView(cLe)}var dLe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.layoutMode="box",t}return e.prototype.init=function(t,i,n){this.mergeDefaultAndTheme(t,n),this._initData()},e.prototype.mergeOption=function(t){r.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var i=this._data.count();this.option.loop?t=(t%i+i)%i:(t>=i&&(t=i-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t=this.option,i=t.data||[],n=t.axisType,s=this._names=[],u;n==="category"?(u=[],ue(i,function(p,m){var v=ya(Iv(p),""),x;Br(p)?(x=Nr(p),x.value=m):x=m,u.push(x),s.push(v)})):u=i;var a={category:"ordinal",time:"time",value:"number"}[n]||"number",h=this._data=new No([{name:"value",type:a}],this);h.initData(u,s)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(Oi),xG=dLe,KZ=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline.slider",e.defaultOption=Wd(xG.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(xG);pa(KZ,rk.prototype);var fLe=KZ,pLe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline",e}(Jn),mLe=pLe,gLe=function(r){lt(e,r);function e(t,i,n,s){var u=r.call(this,t,i,n)||this;return u.type=s||"value",u}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(lu),vLe=gLe,rE=Math.PI,bG=ki(),_Le=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,i){this.api=i},e.prototype.render=function(t,i,n){if(this.model=t,this.api=n,this.ecModel=i,this.group.removeAll(),t.get("show",!0)){var s=this._layout(t,n),u=this._createGroup("_mainGroup"),a=this._createGroup("_labelGroup"),h=this._axis=this._createAxis(s,t);t.formatTooltip=function(p){var m=h.scale.getLabel({value:p});return Oa("nameValue",{noName:!0,value:m})},ue(["AxisLine","AxisTick","Control","CurrentPointer"],function(p){this["_render"+p](s,u,h,t)},this),this._renderAxisLabel(s,a,h,t),this._position(s,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,i){var n=t.get(["label","position"]),s=t.get("orient"),u=xLe(t,i),a;n==null||n==="auto"?a=s==="horizontal"?u.y+u.height/2<i.getHeight()/2?"-":"+":u.x+u.width/2<i.getWidth()/2?"+":"-":gr(n)?a={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[s][n]:a=n;var h={horizontal:"center",vertical:a>=0||a==="+"?"left":"right"},p={horizontal:a>=0||a==="+"?"top":"bottom",vertical:"middle"},m={horizontal:0,vertical:rE/2},v=s==="vertical"?u.height:u.width,x=t.getModel("controlStyle"),w=x.get("show",!0),T=w?x.get("itemSize"):0,C=w?x.get("itemGap"):0,I=T+C,k=t.get(["label","rotate"])||0;k=k*rE/180;var R,z,$,j=x.get("position",!0),G=w&&x.get("showPlayBtn",!0),Y=w&&x.get("showPrevBtn",!0),Z=w&&x.get("showNextBtn",!0),H=0,re=v;j==="left"||j==="bottom"?(G&&(R=[0,0],H+=I),Y&&(z=[H,0],H+=I),Z&&($=[re-T,0],re-=I)):(G&&(R=[re-T,0],re-=I),Y&&(z=[0,0],H+=I),Z&&($=[re-T,0],re-=I));var ne=[H,re];return t.get("inverse")&&ne.reverse(),{viewRect:u,mainLength:v,orient:s,rotation:m[s],labelRotation:k,labelPosOpt:a,labelAlign:t.get(["label","align"])||h[s],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||p[s],playPosition:R,prevBtnPosition:z,nextBtnPosition:$,axisExtent:ne,controlSize:T,controlGap:C}},e.prototype._position=function(t,i){var n=this._mainGroup,s=this._labelGroup,u=t.viewRect;if(t.orient==="vertical"){var a=ks(),h=u.x,p=u.y+u.height;nc(a,a,[-h,-p]),Qp(a,a,-rE/2),nc(a,a,[h,p]),u=u.clone(),u.applyTransform(a)}var m=R(u),v=R(n.getBoundingRect()),x=R(s.getBoundingRect()),w=[n.x,n.y],T=[s.x,s.y];T[0]=w[0]=m[0][0];var C=t.labelPosOpt;if(C==null||gr(C)){var I=C==="+"?0:1;z(w,v,m,1,I),z(T,x,m,1,1-I)}else{var I=C>=0?0:1;z(w,v,m,1,I),T[1]=w[1]+C}n.setPosition(w),s.setPosition(T),n.rotation=s.rotation=t.rotation,k(n),k(s);function k($){$.originX=m[0][0]-$.x,$.originY=m[1][0]-$.y}function R($){return[[$.x,$.x+$.width],[$.y,$.y+$.height]]}function z($,j,G,Y,Z){$[Y]+=G[Y][Z]-j[Y][Z]}},e.prototype._createAxis=function(t,i){var n=i.getData(),s=i.get("axisType"),u=yLe(i,s);u.getTicks=function(){return n.mapArray(["value"],function(p){return{value:p}})};var a=n.getDataExtent("value");u.setExtent(a[0],a[1]),u.calcNiceTicks();var h=new vLe("value",u,t.axisExtent,s);return h.model=i,h},e.prototype._createGroup=function(t){var i=this[t]=new Vr;return this.group.add(i),i},e.prototype._renderAxisLine=function(t,i,n,s){var u=n.getExtent();if(!!s.get(["lineStyle","show"])){var a=new Ua({shape:{x1:u[0],y1:0,x2:u[1],y2:0},style:kt({lineCap:"round"},s.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});i.add(a);var h=this._progressLine=new Ua({shape:{x1:u[0],x2:this._currentPointer?this._currentPointer.x:u[0],y1:0,y2:0},style:zr({lineCap:"round",lineWidth:a.style.lineWidth},s.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});i.add(h)}},e.prototype._renderAxisTick=function(t,i,n,s){var u=this,a=s.getData(),h=n.scale.getTicks();this._tickSymbols=[],ue(h,function(p){var m=n.dataToCoord(p.value),v=a.getItemModel(p.value),x=v.getModel("itemStyle"),w=v.getModel(["emphasis","itemStyle"]),T=v.getModel(["progress","itemStyle"]),C={x:m,y:0,onclick:xr(u._changeTimeline,u,p.value)},I=wG(v,x,i,C);I.ensureState("emphasis").style=w.getItemStyle(),I.ensureState("progress").style=T.getItemStyle(),zp(I);var k=Gr(I);v.get("tooltip")?(k.dataIndex=p.value,k.dataModel=s):k.dataIndex=k.dataModel=null,u._tickSymbols.push(I)})},e.prototype._renderAxisLabel=function(t,i,n,s){var u=this,a=n.getLabelModel();if(!!a.get("show")){var h=s.getData(),p=n.getViewLabels();this._tickLabels=[],ue(p,function(m){var v=m.tickValue,x=h.getItemModel(v),w=x.getModel("label"),T=x.getModel(["emphasis","label"]),C=x.getModel(["progress","label"]),I=n.dataToCoord(m.tickValue),k=new Ni({x:I,y:0,rotation:t.labelRotation-t.rotation,onclick:xr(u._changeTimeline,u,v),silent:!1,style:Mn(w,{text:m.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});k.ensureState("emphasis").style=Mn(T),k.ensureState("progress").style=Mn(C),i.add(k),zp(k),bG(k).dataIndex=v,u._tickLabels.push(k)})}},e.prototype._renderControl=function(t,i,n,s){var u=t.controlSize,a=t.rotation,h=s.getModel("controlStyle").getItemStyle(),p=s.getModel(["emphasis","controlStyle"]).getItemStyle(),m=s.getPlayState(),v=s.get("inverse",!0);x(t.nextBtnPosition,"next",xr(this._changeTimeline,this,v?"-":"+")),x(t.prevBtnPosition,"prev",xr(this._changeTimeline,this,v?"+":"-")),x(t.playPosition,m?"stop":"play",xr(this._handlePlayClick,this,!m),!0);function x(w,T,C,I){if(!!w){var k=iu(Yr(s.get(["controlStyle",T+"BtnSize"]),u),u),R=[0,-k/2,k,k],z=bLe(s,T+"Icon",R,{x:w[0],y:w[1],originX:u/2,originY:0,rotation:I?-a:0,rectHover:!0,style:h,onclick:C});z.ensureState("emphasis").style=p,i.add(z),zp(z)}}},e.prototype._renderCurrentPointer=function(t,i,n,s){var u=s.getData(),a=s.getCurrentIndex(),h=u.getItemModel(a).getModel("checkpointStyle"),p=this,m={onCreate:function(v){v.draggable=!0,v.drift=xr(p._handlePointerDrag,p),v.ondragend=xr(p._handlePointerDragend,p),SG(v,p._progressLine,a,n,s,!0)},onUpdate:function(v){SG(v,p._progressLine,a,n,s)}};this._currentPointer=wG(h,h,this._mainGroup,{},this._currentPointer,m)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,i,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,i){var n=this._toAxisCoord(t)[0],s=this._axis,u=pl(s.getExtent().slice());n>u[1]&&(n=u[1]),n<u[0]&&(n=u[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var a=this._progressLine;a&&(a.shape.x2=n,a.dirty());var h=this._findNearestTick(n),p=this.model;(i||h!==p.getCurrentIndex()&&p.get("realtime"))&&this._changeTimeline(h)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var i=t.model;t._changeTimeline(i.getCurrentIndex()+(i.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var i=this._mainGroup.getLocalTransform();return tu(t,i,!0)},e.prototype._findNearestTick=function(t){var i=this.model.getData(),n=1/0,s,u=this._axis;return i.each(["value"],function(a,h){var p=u.dataToCoord(a),m=Math.abs(p-t);m<n&&(n=m,s=h)}),s},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var i=this.model.getCurrentIndex();t==="+"?t=i+1:t==="-"&&(t=i-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),i=this._tickSymbols,n=this._tickLabels;if(i)for(var s=0;s<i.length;s++)i&&i[s]&&i[s].toggleState("progress",s<t);if(n)for(var s=0;s<n.length;s++)n&&n[s]&&n[s].toggleState("progress",bG(n[s]).dataIndex<=t)},e.type="timeline.slider",e}(mLe);function yLe(r,e){if(e=e||r.get("type"),e)switch(e){case"category":return new pk({ordinalMeta:r.getCategories(),extent:[1/0,-1/0]});case"time":return new Q7({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new Nd}}function xLe(r,e){return xa(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},r.get("padding"))}function bLe(r,e,t,i){var n=i.style,s=_x(r.get(["controlStyle",e]),i||{},new ai(t[0],t[1],t[2],t[3]));return n&&s.setStyle(n),s}function wG(r,e,t,i,n,s){var u=e.get("color");if(n)n.setColor(u),t.add(n),s&&s.onUpdate(n);else{var a=r.get("symbol");n=fa(a,-1,-1,2,2,u),n.setStyle("strokeNoScale",!0),t.add(n),s&&s.onCreate(n)}var h=e.getItemStyle(["color"]);n.setStyle(h),i=ni({rectHover:!0,z2:100},i,!0);var p=Vv(r.get("symbolSize"));i.scaleX=p[0]/2,i.scaleY=p[1]/2;var m=rm(r.get("symbolOffset"),p);m&&(i.x=(i.x||0)+m[0],i.y=(i.y||0)+m[1]);var v=r.get("symbolRotate");return i.rotation=(v||0)*Math.PI/180||0,n.attr(i),n.updateTransform(),n}function SG(r,e,t,i,n,s){if(!r.dragging){var u=n.getModel("checkpointStyle"),a=i.dataToCoord(n.getData().get("value",t));if(s||!u.get("animation",!0))r.attr({x:a,y:0}),e&&e.attr({shape:{x2:a}});else{var h={duration:u.get("animationDuration",!0),easing:u.get("animationEasing",!0)};r.stopAnimation(null,!0),r.animateTo({x:a,y:0},h),e&&e.animateTo({shape:{x2:a}},h)}}}var wLe=_Le;function SLe(r){r.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t,i){var n=t.getComponent("timeline");return n&&e.currentIndex!=null&&(n.setCurrentIndex(e.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),i.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),t.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),zr({currentIndex:n.option.currentIndex},e)}),r.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var i=t.getComponent("timeline");i&&e.playState!=null&&i.setPlayState(e.playState)})}function TLe(r){var e=r&&r.timeline;Nt(e)||(e=e?[e]:[]),ue(e,function(t){!t||MLe(t)})}function MLe(r){var e=r.type,t={number:"value",time:"time"};if(t[e]&&(r.axisType=t[e],delete r.type),TG(r),yp(r,"controlPosition")){var i=r.controlStyle||(r.controlStyle={});yp(i,"position")||(i.position=r.controlPosition),i.position==="none"&&!yp(i,"show")&&(i.show=!1,delete i.position),delete r.controlPosition}ue(r.data||[],function(n){Br(n)&&!Nt(n)&&(!yp(n,"value")&&yp(n,"name")&&(n.value=n.name),TG(n))})}function TG(r){var e=r.itemStyle||(r.itemStyle={}),t=e.emphasis||(e.emphasis={}),i=r.label||r.label||{},n=i.normal||(i.normal={}),s={normal:1,emphasis:1};ue(i,function(u,a){!s[a]&&!yp(n,a)&&(n[a]=u)}),t.label&&!yp(i,"emphasis")&&(i.emphasis=t.label,delete t.label)}function yp(r,e){return r.hasOwnProperty(e)}function ALe(r){r.registerComponentModel(fLe),r.registerComponentView(wLe),r.registerSubTypeDefaulter("timeline",function(){return"slider"}),SLe(r),r.registerPreprocessor(TLe)}function _R(r,e){if(!r)return!1;for(var t=Nt(r)?r:[r],i=0;i<t.length;i++)if(t[i]&&t[i][e])return!0;return!1}function Ew(r){jp(r,"label",["show"])}var Dw=ki(),JZ=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.createdBySelf=!1,t}return e.prototype.init=function(t,i,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if(Fi.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,i){this._mergeOption(t,i,!1,!1)},e.prototype._mergeOption=function(t,i,n,s){var u=this.mainType;n||i.eachSeries(function(a){var h=a.get(this.mainType,!0),p=Dw(a)[u];if(!h||!h.data){Dw(a)[u]=null;return}p?p._mergeOption(h,i,!0):(s&&Ew(h),ue(h.data,function(m){m instanceof Array?(Ew(m[0]),Ew(m[1])):Ew(m)}),p=this.createMarkerModelFromSeries(h,this,i),kt(p,{mainType:this.mainType,seriesIndex:a.seriesIndex,name:a.name,createdBySelf:!0}),p.__hostSeries=a),Dw(a)[u]=p},this)},e.prototype.formatTooltip=function(t,i,n){var s=this.getData(),u=this.getRawValue(t),a=s.getName(t);return Oa("section",{header:this.name,blocks:[Oa("nameValue",{name:a,value:u,noName:!a,noValue:u==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.getMarkerModelFromSeries=function(t,i){return Dw(t)[i]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(Oi);pa(JZ,rk.prototype);var Gd=JZ,CLe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,i,n){return new e(t,i,n)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(Gd),ILe=CLe;function yP(r){return!(isNaN(parseFloat(r.x))&&isNaN(parseFloat(r.y)))}function ELe(r){return!isNaN(parseFloat(r.x))&&!isNaN(parseFloat(r.y))}function Pw(r,e,t,i,n,s){var u=[],a=Fd(e,i),h=a?e.getCalculationInfo("stackResultDimension"):i,p=yR(e,h,r),m=e.indicesOfNearest(h,p)[0];u[n]=e.get(t,m),u[s]=e.get(h,m);var v=e.get(i,m),x=qu(e.get(i,m));return x=Math.min(x,20),x>=0&&(u[s]=+u[s].toFixed(x)),[u,v]}var iE={min:Qr(Pw,"min"),max:Qr(Pw,"max"),average:Qr(Pw,"average"),median:Qr(Pw,"median")};function lx(r,e){if(!!e){var t=r.getData(),i=r.coordinateSystem,n=i&&i.dimensions;if(!ELe(e)&&!Nt(e.coord)&&Nt(n)){var s=QZ(e,t,i,r);if(e=Nr(e),e.type&&iE[e.type]&&s.baseAxis&&s.valueAxis){var u=di(n,s.baseAxis.dim),a=di(n,s.valueAxis.dim),h=iE[e.type](t,s.baseDataDim,s.valueDataDim,u,a);e.coord=h[0],e.value=h[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!Nt(n))e.coord=[];else for(var p=e.coord,m=0;m<2;m++)iE[p[m]]&&(p[m]=yR(t,t.mapDimension(n[m]),p[m]));return e}}function QZ(r,e,t,i){var n={};return r.valueIndex!=null||r.valueDim!=null?(n.valueDataDim=r.valueIndex!=null?e.getDimension(r.valueIndex):r.valueDim,n.valueAxis=t.getAxis(DLe(i,n.valueDataDim)),n.baseAxis=t.getOtherAxis(n.valueAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim)):(n.baseAxis=i.getBaseAxis(),n.valueAxis=t.getOtherAxis(n.baseAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim),n.valueDataDim=e.mapDimension(n.valueAxis.dim)),n}function DLe(r,e){var t=r.getData().getDimensionInfo(e);return t&&t.coordDim}function ux(r,e){return r&&r.containData&&e.coord&&!yP(e)?r.containData(e.coord):!0}function PLe(r,e,t){return r&&r.containZone&&e.coord&&t.coord&&!yP(e)&&!yP(t)?r.containZone(e.coord,t.coord):!0}function eX(r,e){return r?function(t,i,n,s){var u=s<2?t.coord&&t.coord[s]:t.value;return Ed(u,e[s])}:function(t,i,n,s){return Ed(t.value,e[s])}}function yR(r,e,t){if(t==="average"){var i=0,n=0;return r.each(e,function(s,u){isNaN(s)||(i+=s,n++)}),i/n}else return t==="median"?r.getMedian(e):r.getDataExtent(e)[t==="max"?1:0]}var nE=ki(),LLe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this.markerGroupMap=Mr()},e.prototype.render=function(t,i,n){var s=this,u=this.markerGroupMap;u.each(function(a){nE(a).keep=!1}),i.eachSeries(function(a){var h=Gd.getMarkerModelFromSeries(a,s.type);h&&s.renderSeries(a,h,i,n)}),u.each(function(a){!nE(a).keep&&s.group.remove(a.group)})},e.prototype.markKeep=function(t){nE(t).keep=!0},e.prototype.toggleBlurSeries=function(t,i){var n=this;ue(t,function(s){var u=Gd.getMarkerModelFromSeries(s,n.type);if(u){var a=u.getData();a.eachItemGraphicEl(function(h){h&&(i?CH(h):OL(h))})}})},e.type="marker",e}(Jn),xR=LLe;function MG(r,e,t){var i=e.coordinateSystem;r.each(function(n){var s=r.getItemModel(n),u,a=sr(s.get("x"),t.getWidth()),h=sr(s.get("y"),t.getHeight());if(!isNaN(a)&&!isNaN(h))u=[a,h];else if(e.getMarkerPosition)u=e.getMarkerPosition(r.getValues(r.dimensions,n));else if(i){var p=r.get(i.dimensions[0],n),m=r.get(i.dimensions[1],n);u=i.dataToPoint([p,m])}isNaN(a)||(u[0]=a),isNaN(h)||(u[1]=h),r.setItemLayout(n,u)})}var kLe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,i,n){i.eachSeries(function(s){var u=Gd.getMarkerModelFromSeries(s,"markPoint");u&&(MG(u.getData(),s,n),this.markerGroupMap.get(s.id).updateLayout())},this)},e.prototype.renderSeries=function(t,i,n,s){var u=t.coordinateSystem,a=t.id,h=t.getData(),p=this.markerGroupMap,m=p.get(a)||p.set(a,new Ax),v=RLe(u,t,i);i.setData(v),MG(i.getData(),t,s),v.each(function(x){var w=v.getItemModel(x),T=w.getShallow("symbol"),C=w.getShallow("symbolSize"),I=w.getShallow("symbolRotate"),k=w.getShallow("symbolOffset"),R=w.getShallow("symbolKeepAspect");if(kr(T)||kr(C)||kr(I)||kr(k)){var z=i.getRawValue(x),$=i.getDataParams(x);kr(T)&&(T=T(z,$)),kr(C)&&(C=C(z,$)),kr(I)&&(I=I(z,$)),kr(k)&&(k=k(z,$))}var j=w.getModel("itemStyle").getItemStyle(),G=xx(h,"color");j.fill||(j.fill=G),v.setItemVisual(x,{symbol:T,symbolSize:C,symbolRotate:I,symbolOffset:k,symbolKeepAspect:R,style:j})}),m.updateData(v),this.group.add(m.group),v.eachItemGraphicEl(function(x){x.traverse(function(w){Gr(w).dataModel=i})}),this.markKeep(m),m.group.silent=i.get("silent")||t.get("silent")},e.type="markPoint",e}(xR);function RLe(r,e,t){var i;r?i=Ht(r&&r.dimensions,function(a){var h=e.getData().getDimensionInfo(e.getData().mapDimension(a))||{};return kt(kt({},h),{name:a,ordinalMeta:null})}):i=[{name:"value",type:"float"}];var n=new No(i,t),s=Ht(t.get("data"),Qr(lx,e));r&&(s=un(s,Qr(ux,r)));var u=eX(!!r,i);return n.initData(s,null,u),n}var OLe=kLe;function zLe(r){r.registerComponentModel(ILe),r.registerComponentView(OLe),r.registerPreprocessor(function(e){_R(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}var BLe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,i,n){return new e(t,i,n)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(Gd),FLe=BLe,Lw=ki(),NLe=function(r,e,t,i){var n=r.getData(),s;if(Nt(i))s=i;else{var u=i.type;if(u==="min"||u==="max"||u==="average"||u==="median"||i.xAxis!=null||i.yAxis!=null){var a=void 0,h=void 0;if(i.yAxis!=null||i.xAxis!=null)a=e.getAxis(i.yAxis!=null?"y":"x"),h=Ga(i.yAxis,i.xAxis);else{var p=QZ(i,n,e,r);a=p.valueAxis;var m=N7(n,p.valueDataDim);h=yR(n,m,u)}var v=a.dim==="x"?0:1,x=1-v,w=Nr(i),T={coord:[]};w.type=null,w.coord=[],w.coord[x]=-1/0,T.coord[x]=1/0;var C=t.get("precision");C>=0&&Vi(h)&&(h=+h.toFixed(Math.min(C,20))),w.coord[v]=T.coord[v]=h,s=[w,T,{type:u,valueIndex:i.valueIndex,value:h}]}else s=[]}var I=[lx(r,s[0]),lx(r,s[1]),kt({},s[2])];return I[2].type=I[2].type||null,ni(I[2],I[0]),ni(I[2],I[1]),I};function aT(r){return!isNaN(r)&&!isFinite(r)}function AG(r,e,t,i){var n=1-r,s=i.dimensions[r];return aT(e[n])&&aT(t[n])&&e[r]===t[r]&&i.getAxis(s).containData(e[r])}function VLe(r,e){if(r.type==="cartesian2d"){var t=e[0].coord,i=e[1].coord;if(t&&i&&(AG(1,t,i,r)||AG(0,t,i,r)))return!0}return ux(r,e[0])&&ux(r,e[1])}function aE(r,e,t,i,n){var s=i.coordinateSystem,u=r.getItemModel(e),a,h=sr(u.get("x"),n.getWidth()),p=sr(u.get("y"),n.getHeight());if(!isNaN(h)&&!isNaN(p))a=[h,p];else{if(i.getMarkerPosition)a=i.getMarkerPosition(r.getValues(r.dimensions,e));else{var m=s.dimensions,v=r.get(m[0],e),x=r.get(m[1],e);a=s.dataToPoint([v,x])}if(nm(s,"cartesian2d")){var w=s.getAxis("x"),T=s.getAxis("y"),m=s.dimensions;aT(r.get(m[0],e))?a[0]=w.toGlobalCoord(w.getExtent()[t?0:1]):aT(r.get(m[1],e))&&(a[1]=T.toGlobalCoord(T.getExtent()[t?0:1]))}isNaN(h)||(a[0]=h),isNaN(p)||(a[1]=p)}r.setItemLayout(e,a)}var $Le=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,i,n){i.eachSeries(function(s){var u=Gd.getMarkerModelFromSeries(s,"markLine");if(u){var a=u.getData(),h=Lw(u).from,p=Lw(u).to;h.each(function(m){aE(h,m,!0,s,n),aE(p,m,!1,s,n)}),a.each(function(m){a.setItemLayout(m,[h.getItemLayout(m),p.getItemLayout(m)])}),this.markerGroupMap.get(s.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,i,n,s){var u=t.coordinateSystem,a=t.id,h=t.getData(),p=this.markerGroupMap,m=p.get(a)||p.set(a,new Uk);this.group.add(m.group);var v=GLe(u,t,i),x=v.from,w=v.to,T=v.line;Lw(i).from=x,Lw(i).to=w,i.setData(T);var C=i.get("symbol"),I=i.get("symbolSize"),k=i.get("symbolRotate"),R=i.get("symbolOffset");Nt(C)||(C=[C,C]),Nt(I)||(I=[I,I]),Nt(k)||(k=[k,k]),Nt(R)||(R=[R,R]),v.from.each(function($){z(x,$,!0),z(w,$,!1)}),T.each(function($){var j=T.getItemModel($).getModel("lineStyle").getLineStyle();T.setItemLayout($,[x.getItemLayout($),w.getItemLayout($)]),j.stroke==null&&(j.stroke=x.getItemVisual($,"style").fill),T.setItemVisual($,{fromSymbolKeepAspect:x.getItemVisual($,"symbolKeepAspect"),fromSymbolOffset:x.getItemVisual($,"symbolOffset"),fromSymbolRotate:x.getItemVisual($,"symbolRotate"),fromSymbolSize:x.getItemVisual($,"symbolSize"),fromSymbol:x.getItemVisual($,"symbol"),toSymbolKeepAspect:w.getItemVisual($,"symbolKeepAspect"),toSymbolOffset:w.getItemVisual($,"symbolOffset"),toSymbolRotate:w.getItemVisual($,"symbolRotate"),toSymbolSize:w.getItemVisual($,"symbolSize"),toSymbol:w.getItemVisual($,"symbol"),style:j})}),m.updateData(T),v.line.eachItemGraphicEl(function($){Gr($).dataModel=i,$.traverse(function(j){Gr(j).dataModel=i})});function z($,j,G){var Y=$.getItemModel(j);aE($,j,G,t,s);var Z=Y.getModel("itemStyle").getItemStyle();Z.fill==null&&(Z.fill=xx(h,"color")),$.setItemVisual(j,{symbolKeepAspect:Y.get("symbolKeepAspect"),symbolOffset:Yr(Y.get("symbolOffset",!0),R[G?0:1]),symbolRotate:Yr(Y.get("symbolRotate",!0),k[G?0:1]),symbolSize:Yr(Y.get("symbolSize"),I[G?0:1]),symbol:Yr(Y.get("symbol",!0),C[G?0:1]),style:Z})}this.markKeep(m),m.group.silent=i.get("silent")||t.get("silent")},e.type="markLine",e}(xR);function GLe(r,e,t){var i;r?i=Ht(r&&r.dimensions,function(p){var m=e.getData().getDimensionInfo(e.getData().mapDimension(p))||{};return kt(kt({},m),{name:p,ordinalMeta:null})}):i=[{name:"value",type:"float"}];var n=new No(i,t),s=new No(i,t),u=new No([],t),a=Ht(t.get("data"),Qr(NLe,e,r,t));r&&(a=un(a,Qr(VLe,r)));var h=eX(!!r,i);return n.initData(Ht(a,function(p){return p[0]}),null,h),s.initData(Ht(a,function(p){return p[1]}),null,h),u.initData(Ht(a,function(p){return p[2]})),u.hasItemOption=!0,{from:n,to:s,line:u}}var ULe=$Le;function jLe(r){r.registerComponentModel(FLe),r.registerComponentView(ULe),r.registerPreprocessor(function(e){_R(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var HLe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,i,n){return new e(t,i,n)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(Gd),WLe=HLe,kw=ki(),qLe=function(r,e,t,i){var n=i[0],s=i[1];if(!(!n||!s)){var u=lx(r,n),a=lx(r,s),h=u.coord,p=a.coord;h[0]=Ga(h[0],-1/0),h[1]=Ga(h[1],-1/0),p[0]=Ga(p[0],1/0),p[1]=Ga(p[1],1/0);var m=gL([{},u,a]);return m.coord=[u.coord,a.coord],m.x0=u.x,m.y0=u.y,m.x1=a.x,m.y1=a.y,m}};function oT(r){return!isNaN(r)&&!isFinite(r)}function CG(r,e,t,i){var n=1-r;return oT(e[n])&&oT(t[n])}function ZLe(r,e){var t=e.coord[0],i=e.coord[1],n={coord:t,x:e.x0,y:e.y0},s={coord:i,x:e.x1,y:e.y1};return nm(r,"cartesian2d")?t&&i&&(CG(1,t,i)||CG(0,t,i))?!0:PLe(r,n,s):ux(r,n)||ux(r,s)}function IG(r,e,t,i,n){var s=i.coordinateSystem,u=r.getItemModel(e),a,h=sr(u.get(t[0]),n.getWidth()),p=sr(u.get(t[1]),n.getHeight());if(!isNaN(h)&&!isNaN(p))a=[h,p];else{if(i.getMarkerPosition){var m=r.getValues(["x0","y0"],e),v=r.getValues(["x1","y1"],e),x=s.clampData(m),w=s.clampData(v),T=[];t[0]==="x0"?T[0]=x[0]>w[0]?v[0]:m[0]:T[0]=x[0]>w[0]?m[0]:v[0],t[1]==="y0"?T[1]=x[1]>w[1]?v[1]:m[1]:T[1]=x[1]>w[1]?m[1]:v[1],a=i.getMarkerPosition(T,t,!0)}else{var C=r.get(t[0],e),I=r.get(t[1],e),k=[C,I];s.clampData&&s.clampData(k,k),a=s.dataToPoint(k,!0)}if(nm(s,"cartesian2d")){var R=s.getAxis("x"),z=s.getAxis("y"),C=r.get(t[0],e),I=r.get(t[1],e);oT(C)?a[0]=R.toGlobalCoord(R.getExtent()[t[0]==="x0"?0:1]):oT(I)&&(a[1]=z.toGlobalCoord(z.getExtent()[t[1]==="y0"?0:1]))}isNaN(h)||(a[0]=h),isNaN(p)||(a[1]=p)}return a}var EG=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],XLe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,i,n){i.eachSeries(function(s){var u=Gd.getMarkerModelFromSeries(s,"markArea");if(u){var a=u.getData();a.each(function(h){var p=Ht(EG,function(v){return IG(a,h,v,s,n)});a.setItemLayout(h,p);var m=a.getItemGraphicEl(h);m.setShape("points",p)})}},this)},e.prototype.renderSeries=function(t,i,n,s){var u=t.coordinateSystem,a=t.id,h=t.getData(),p=this.markerGroupMap,m=p.get(a)||p.set(a,{group:new Vr});this.group.add(m.group),this.markKeep(m);var v=YLe(u,t,i);i.setData(v),v.each(function(x){var w=Ht(EG,function(Z){return IG(v,x,Z,t,s)}),T=u.getAxis("x").scale,C=u.getAxis("y").scale,I=T.getExtent(),k=C.getExtent(),R=[T.parse(v.get("x0",x)),T.parse(v.get("x1",x))],z=[C.parse(v.get("y0",x)),C.parse(v.get("y1",x))];pl(R),pl(z);var $=!(I[0]>R[1]||I[1]<R[0]||k[0]>z[1]||k[1]<z[0]),j=!$;v.setItemLayout(x,{points:w,allClipped:j});var G=v.getItemModel(x).getModel("itemStyle").getItemStyle(),Y=xx(h,"color");G.fill||(G.fill=Y,gr(G.fill)&&(G.fill=bS(G.fill,.4))),G.stroke||(G.stroke=Y),v.setItemVisual(x,"style",G)}),v.diff(kw(m).data).add(function(x){var w=v.getItemLayout(x);if(!w.allClipped){var T=new hs({shape:{points:w.points}});v.setItemGraphicEl(x,T),m.group.add(T)}}).update(function(x,w){var T=kw(m).data.getItemGraphicEl(w),C=v.getItemLayout(x);C.allClipped?T&&m.group.remove(T):(T?ji(T,{shape:{points:C.points}},i,x):T=new hs({shape:{points:C.points}}),v.setItemGraphicEl(x,T),m.group.add(T))}).remove(function(x){var w=kw(m).data.getItemGraphicEl(x);m.group.remove(w)}).execute(),v.eachItemGraphicEl(function(x,w){var T=v.getItemModel(w),C=v.getItemVisual(w,"style");x.useStyle(v.getItemVisual(w,"style")),ro(x,Ra(T),{labelFetcher:i,labelDataIndex:w,defaultText:v.getName(w)||"",inheritColor:gr(C.fill)?bS(C.fill,1):"#000"}),to(x,T),Kn(x,null,null,T.get(["emphasis","disabled"])),Gr(x).dataModel=i}),kw(m).data=v,m.group.silent=i.get("silent")||t.get("silent")},e.type="markArea",e}(xR);function YLe(r,e,t){var i,n,s=["x0","y0","x1","y1"];if(r){var u=Ht(r&&r.dimensions,function(p){var m=e.getData(),v=m.getDimensionInfo(m.mapDimension(p))||{};return kt(kt({},v),{name:p,ordinalMeta:null})});n=Ht(s,function(p,m){return{name:p,type:u[m%2].type}}),i=new No(n,t)}else n=[{name:"value",type:"float"}],i=new No(n,t);var a=Ht(t.get("data"),Qr(qLe,e,r,t));r&&(a=un(a,Qr(ZLe,r)));var h=r?function(p,m,v,x){var w=p.coord[Math.floor(x/2)][x%2];return Ed(w,n[x])}:function(p,m,v,x){return Ed(p.value,n[x])};return i.initData(a,null,h),i.hasItemOption=!0,i}var KLe=XLe;function JLe(r){r.registerComponentModel(WLe),r.registerComponentView(KLe),r.registerPreprocessor(function(e){_R(e.series,"markArea")&&(e.markArea=e.markArea||{})})}var QLe=function(r,e){if(e==="all")return{type:"all",title:r.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:r.getLocaleModel().get(["legend","selector","inverse"])}},eke=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,i,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,i){r.prototype.mergeOption.call(this,t,i),this._updateSelector(t)},e.prototype._updateSelector=function(t){var i=t.selector,n=this.ecModel;i===!0&&(i=t.selector=["all","inverse"]),Nt(i)&&ue(i,function(s,u){gr(s)&&(s={type:s}),i[u]=ni(s,QLe(n,s.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var i=!1,n=0;n<t.length;n++){var s=t[n].get("name");if(this.isSelected(s)){this.select(s),i=!0;break}}!i&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var i=[],n=[];t.eachRawSeries(function(h){var p=h.name;n.push(p);var m;if(h.legendVisualProvider){var v=h.legendVisualProvider,x=v.getAllNames();t.isSeriesFiltered(h)||(n=n.concat(x)),x.length?i=i.concat(x):m=!0}else m=!0;m&&CL(h)&&i.push(h.name)}),this._availableNames=n;var s=this.get("data")||i,u=Mr(),a=Ht(s,function(h){return(gr(h)||Vi(h))&&(h={name:h}),u.get(h.name)?null:(u.set(h.name,!0),new An(h,this,this.ecModel))},this);this._data=un(a,function(h){return!!h})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var i=this.option.selected,n=this.get("selectedMode");if(n==="single"){var s=this._data;ue(s,function(u){i[u.get("name")]=!1})}i[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var i=this.option.selected;i.hasOwnProperty(t)||(i[t]=!0),this[i[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,i=this.option.selected;ue(t,function(n){i[n.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,i=this.option.selected;ue(t,function(n){var s=n.get("name",!0);i.hasOwnProperty(s)||(i[s]=!0),i[s]=!i[s]})},e.prototype.isSelected=function(t){var i=this.option.selected;return!(i.hasOwnProperty(t)&&!i[t])&&di(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(Oi),xP=eke,Mg=Qr,bP=ue,Rw=Vr,tke=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new Rw),this.group.add(this._selectorGroup=new Rw),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,i,n){var s=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var u=t.get("align"),a=t.get("orient");(!u||u==="auto")&&(u=t.get("left")==="right"&&a==="vertical"?"right":"left");var h=t.get("selector",!0),p=t.get("selectorPosition",!0);h&&(!p||p==="auto")&&(p=a==="horizontal"?"end":"start"),this.renderInner(u,t,i,n,h,a,p);var m=t.getBoxLayoutParams(),v={width:n.getWidth(),height:n.getHeight()},x=t.get("padding"),w=xa(m,v,x),T=this.layoutInner(t,u,w,s,h,p),C=xa(zr({width:T.width,height:T.height},m),v,x);this.group.x=C.x-T.x,this.group.y=C.y-T.y,this.group.markRedraw(),this.group.add(this._backgroundEl=GZ(T,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,i,n,s,u,a,h){var p=this.getContentGroup(),m=Mr(),v=i.get("selectedMode"),x=[];n.eachRawSeries(function(w){!w.get("legendHoverLink")&&x.push(w.id)}),bP(i.getData(),function(w,T){var C=w.get("name");if(!this.newlineDisabled&&(C===""||C===`
`)){var I=new Rw;I.newline=!0,p.add(I);return}var k=n.getSeriesByName(C)[0];if(!m.get(C))if(k){var R=k.getData(),z=R.getVisual("legendLineStyle")||{},$=R.getVisual("legendIcon"),j=R.getVisual("style"),G=this._createItem(k,C,T,w,i,t,z,j,$,v,s);G.on("click",Mg(DG,C,null,s,x)).on("mouseover",Mg(wP,k.name,null,s,x)).on("mouseout",Mg(SP,k.name,null,s,x)),n.ssr&&G.eachChild(function(Y){var Z=Gr(Y);Z.seriesIndex=k.seriesIndex,Z.dataIndex=T,Z.ssrType="legend"}),m.set(C,!0)}else n.eachRawSeries(function(Y){if(!m.get(C)&&Y.legendVisualProvider){var Z=Y.legendVisualProvider;if(!Z.containName(C))return;var H=Z.indexOfName(C),re=Z.getItemVisual(H,"style"),ne=Z.getItemVisual(H,"legendIcon"),se=Rs(re.fill);se&&se[3]===0&&(se[3]=.2,re=kt(kt({},re),{fill:eh(se,"rgba")}));var me=this._createItem(Y,C,T,w,i,t,{},re,ne,v,s);me.on("click",Mg(DG,null,C,s,x)).on("mouseover",Mg(wP,null,C,s,x)).on("mouseout",Mg(SP,null,C,s,x)),n.ssr&&me.eachChild(function(Se){var Ie=Gr(Se);Ie.seriesIndex=Y.seriesIndex,Ie.dataIndex=T,Ie.ssrType="legend"}),m.set(C,!0)}},this)},this),u&&this._createSelector(u,i,s,a,h)},e.prototype._createSelector=function(t,i,n,s,u){var a=this.getSelectorGroup();bP(t,function(p){var m=p.type,v=new Ni({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:m==="all"?"legendAllSelect":"legendInverseSelect"})}});a.add(v);var x=i.getModel("selectorLabel"),w=i.getModel(["emphasis","selectorLabel"]);ro(v,{normal:x,emphasis:w},{defaultText:p.title}),zp(v)})},e.prototype._createItem=function(t,i,n,s,u,a,h,p,m,v,x){var w=t.visualDrawType,T=u.get("itemWidth"),C=u.get("itemHeight"),I=u.isSelected(i),k=s.get("symbolRotate"),R=s.get("symbolKeepAspect"),z=s.get("icon");m=z||m||"roundRect";var $=rke(m,s,h,p,w,I,x),j=new Rw,G=s.getModel("textStyle");if(kr(t.getLegendIcon)&&(!z||z==="inherit"))j.add(t.getLegendIcon({itemWidth:T,itemHeight:C,icon:m,iconRotate:k,itemStyle:$.itemStyle,lineStyle:$.lineStyle,symbolKeepAspect:R}));else{var Y=z==="inherit"&&t.getData().getVisual("symbol")?k==="inherit"?t.getData().getVisual("symbolRotate"):k:0;j.add(ike({itemWidth:T,itemHeight:C,icon:m,iconRotate:Y,itemStyle:$.itemStyle,lineStyle:$.lineStyle,symbolKeepAspect:R}))}var Z=a==="left"?T+5:-5,H=a,re=u.get("formatter"),ne=i;gr(re)&&re?ne=re.replace("{name}",i!=null?i:""):kr(re)&&(ne=re(i));var se=I?G.getTextColor():s.get("inactiveColor");j.add(new Ni({style:Mn(G,{text:ne,x:Z,y:C/2,fill:se,align:H,verticalAlign:"middle"},{inheritColor:se})}));var me=new Li({shape:j.getBoundingRect(),style:{fill:"transparent"}}),Se=s.getModel("tooltip");return Se.get("show")&&Pv({el:me,componentModel:u,itemName:i,itemTooltipOption:Se.option}),j.add(me),j.eachChild(function(Ie){Ie.silent=!0}),me.silent=!v,this.getContentGroup().add(j),zp(j),j.__legendDataIndex=n,j},e.prototype.layoutInner=function(t,i,n,s,u,a){var h=this.getContentGroup(),p=this.getSelectorGroup();Fp(t.get("orient"),h,t.get("itemGap"),n.width,n.height);var m=h.getBoundingRect(),v=[-m.x,-m.y];if(p.markRedraw(),h.markRedraw(),u){Fp("horizontal",p,t.get("selectorItemGap",!0));var x=p.getBoundingRect(),w=[-x.x,-x.y],T=t.get("selectorButtonGap",!0),C=t.getOrient().index,I=C===0?"width":"height",k=C===0?"height":"width",R=C===0?"y":"x";a==="end"?w[C]+=m[I]+T:v[C]+=x[I]+T,w[1-C]+=m[k]/2-x[k]/2,p.x=w[0],p.y=w[1],h.x=v[0],h.y=v[1];var z={x:0,y:0};return z[I]=m[I]+T+x[I],z[k]=Math.max(m[k],x[k]),z[R]=Math.min(0,x[R]+w[1-C]),z}else return h.x=v[0],h.y=v[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(Jn);function rke(r,e,t,i,n,s,u){function a(I,k){I.lineWidth==="auto"&&(I.lineWidth=k.lineWidth>0?2:0),bP(I,function(R,z){I[z]==="inherit"&&(I[z]=k[z])})}var h=e.getModel("itemStyle"),p=h.getItemStyle(),m=r.lastIndexOf("empty",0)===0?"fill":"stroke",v=h.getShallow("decal");p.decal=!v||v==="inherit"?i.decal:hv(v,u),p.fill==="inherit"&&(p.fill=i[n]),p.stroke==="inherit"&&(p.stroke=i[m]),p.opacity==="inherit"&&(p.opacity=(n==="fill"?i:t).opacity),a(p,i);var x=e.getModel("lineStyle"),w=x.getLineStyle();if(a(w,t),p.fill==="auto"&&(p.fill=i.fill),p.stroke==="auto"&&(p.stroke=i.fill),w.stroke==="auto"&&(w.stroke=i.fill),!s){var T=e.get("inactiveBorderWidth"),C=p[m];p.lineWidth=T==="auto"?i.lineWidth>0&&C?2:0:p.lineWidth,p.fill=e.get("inactiveColor"),p.stroke=e.get("inactiveBorderColor"),w.stroke=x.get("inactiveColor"),w.lineWidth=x.get("inactiveWidth")}return{itemStyle:p,lineStyle:w}}function ike(r){var e=r.icon||"roundRect",t=fa(e,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill,r.symbolKeepAspect);return t.setStyle(r.itemStyle),t.rotation=(r.iconRotate||0)*Math.PI/180,t.setOrigin([r.itemWidth/2,r.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function DG(r,e,t,i){SP(r,e,t,i),t.dispatchAction({type:"legendToggleSelect",name:r!=null?r:e}),wP(r,e,t,i)}function tX(r){for(var e=r.getZr().storage.getDisplayList(),t,i=0,n=e.length;i<n&&!(t=e[i].states.emphasis);)i++;return t&&t.hoverLayer}function wP(r,e,t,i){tX(t)||t.dispatchAction({type:"highlight",seriesName:r,name:e,excludeSeriesId:i})}function SP(r,e,t,i){tX(t)||t.dispatchAction({type:"downplay",seriesName:r,name:e,excludeSeriesId:i})}var rX=tke;function nke(r){var e=r.findComponents({mainType:"legend"});e&&e.length&&r.filterSeries(function(t){for(var i=0;i<e.length;i++)if(!e[i].isSelected(t.name))return!1;return!0})}function Ny(r,e,t){var i={},n=r==="toggleSelected",s;return t.eachComponent("legend",function(u){n&&s!=null?u[s?"select":"unSelect"](e.name):r==="allSelect"||r==="inverseSelect"?u[r]():(u[r](e.name),s=u.isSelected(e.name));var a=u.getData();ue(a,function(h){var p=h.get("name");if(!(p===`
`||p==="")){var m=u.isSelected(p);i.hasOwnProperty(p)?i[p]=i[p]&&m:i[p]=m}})}),r==="allSelect"||r==="inverseSelect"?{selected:i}:{name:e.name,selected:i}}function ake(r){r.registerAction("legendToggleSelect","legendselectchanged",Qr(Ny,"toggleSelected")),r.registerAction("legendAllSelect","legendselectall",Qr(Ny,"allSelect")),r.registerAction("legendInverseSelect","legendinverseselect",Qr(Ny,"inverseSelect")),r.registerAction("legendSelect","legendselected",Qr(Ny,"select")),r.registerAction("legendUnSelect","legendunselected",Qr(Ny,"unSelect"))}function iX(r){r.registerComponentModel(xP),r.registerComponentView(rX),r.registerProcessor(r.PRIORITY.PROCESSOR.SERIES_FILTER,nke),r.registerSubTypeDefaulter("legend",function(){return"plain"}),ake(r)}var oke=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,i,n){var s=Ov(t);r.prototype.init.call(this,t,i,n),PG(this,t,s)},e.prototype.mergeOption=function(t,i){r.prototype.mergeOption.call(this,t,i),PG(this,this.option,t)},e.type="legend.scroll",e.defaultOption=Wd(xP.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(xP);function PG(r,e,t){var i=r.getOrient(),n=[1,1];n[i.index]=0,Bd(e,t,{type:"box",ignoreSize:!!n})}var ske=oke,LG=Vr,oE=["width","height"],sE=["x","y"],lke=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){r.prototype.init.call(this),this.group.add(this._containerGroup=new LG),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new LG)},e.prototype.resetInner=function(){r.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,i,n,s,u,a,h){var p=this;r.prototype.renderInner.call(this,t,i,n,s,u,a,h);var m=this._controllerGroup,v=i.get("pageIconSize",!0),x=Nt(v)?v:[v,v];T("pagePrev",0);var w=i.getModel("pageTextStyle");m.add(new Ni({name:"pageText",style:{text:"xx/xx",fill:w.getTextColor(),font:w.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),T("pageNext",1);function T(C,I){var k=C+"DataIndex",R=_x(i.get("pageIcons",!0)[i.getOrient().name][I],{onclick:xr(p._pageGo,p,k,i,s)},{x:-x[0]/2,y:-x[1]/2,width:x[0],height:x[1]});R.name=C,m.add(R)}},e.prototype.layoutInner=function(t,i,n,s,u,a){var h=this.getSelectorGroup(),p=t.getOrient().index,m=oE[p],v=sE[p],x=oE[1-p],w=sE[1-p];u&&Fp("horizontal",h,t.get("selectorItemGap",!0));var T=t.get("selectorButtonGap",!0),C=h.getBoundingRect(),I=[-C.x,-C.y],k=Nr(n);u&&(k[m]=n[m]-C[m]-T);var R=this._layoutContentAndController(t,s,k,p,m,x,w,v);if(u){if(a==="end")I[p]+=R[m]+T;else{var z=C[m]+T;I[p]-=z,R[v]-=z}R[m]+=C[m]+T,I[1-p]+=R[w]+R[x]/2-C[x]/2,R[x]=Math.max(R[x],C[x]),R[w]=Math.min(R[w],C[w]+I[1-p]),h.x=I[0],h.y=I[1],h.markRedraw()}return R},e.prototype._layoutContentAndController=function(t,i,n,s,u,a,h,p){var m=this.getContentGroup(),v=this._containerGroup,x=this._controllerGroup;Fp(t.get("orient"),m,t.get("itemGap"),s?n.width:null,s?null:n.height),Fp("horizontal",x,t.get("pageButtonItemGap",!0));var w=m.getBoundingRect(),T=x.getBoundingRect(),C=this._showController=w[u]>n[u],I=[-w.x,-w.y];i||(I[s]=m[p]);var k=[0,0],R=[-T.x,-T.y],z=Yr(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(C){var $=t.get("pageButtonPosition",!0);$==="end"?R[s]+=n[u]-T[u]:k[s]+=T[u]+z}R[1-s]+=w[a]/2-T[a]/2,m.setPosition(I),v.setPosition(k),x.setPosition(R);var j={x:0,y:0};if(j[u]=C?n[u]:w[u],j[a]=Math.max(w[a],T[a]),j[h]=Math.min(0,T[h]+R[1-s]),v.__rectSize=n[u],C){var G={x:0,y:0};G[u]=Math.max(n[u]-T[u]-z,0),G[a]=j[a],v.setClipPath(new Li({shape:G})),v.__rectSize=G[u]}else x.eachChild(function(Z){Z.attr({invisible:!0,silent:!0})});var Y=this._getPageInfo(t);return Y.pageIndex!=null&&ji(m,{x:Y.contentPosition[0],y:Y.contentPosition[1]},C?t:null),this._updatePageInfoView(t,Y),j},e.prototype._pageGo=function(t,i,n){var s=this._getPageInfo(i)[t];s!=null&&n.dispatchAction({type:"legendScroll",scrollDataIndex:s,legendId:i.id})},e.prototype._updatePageInfoView=function(t,i){var n=this._controllerGroup;ue(["pagePrev","pageNext"],function(m){var v=m+"DataIndex",x=i[v]!=null,w=n.childOfName(m);w&&(w.setStyle("fill",x?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),w.cursor=x?"pointer":"default")});var s=n.childOfName("pageText"),u=t.get("pageFormatter"),a=i.pageIndex,h=a!=null?a+1:0,p=i.pageCount;s&&u&&s.setStyle("text",gr(u)?u.replace("{current}",h==null?"":h+"").replace("{total}",p==null?"":p+""):u({current:h,total:p}))},e.prototype._getPageInfo=function(t){var i=t.get("scrollDataIndex",!0),n=this.getContentGroup(),s=this._containerGroup.__rectSize,u=t.getOrient().index,a=oE[u],h=sE[u],p=this._findTargetItemIndex(i),m=n.children(),v=m[p],x=m.length,w=x?1:0,T={contentPosition:[n.x,n.y],pageCount:w,pageIndex:w-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!v)return T;var C=$(v);T.contentPosition[u]=-C.s;for(var I=p+1,k=C,R=C,z=null;I<=x;++I)z=$(m[I]),(!z&&R.e>k.s+s||z&&!j(z,k.s))&&(R.i>k.i?k=R:k=z,k&&(T.pageNextDataIndex==null&&(T.pageNextDataIndex=k.i),++T.pageCount)),R=z;for(var I=p-1,k=C,R=C,z=null;I>=-1;--I)z=$(m[I]),(!z||!j(R,z.s))&&k.i<R.i&&(R=k,T.pagePrevDataIndex==null&&(T.pagePrevDataIndex=k.i),++T.pageCount,++T.pageIndex),k=z;return T;function $(G){if(G){var Y=G.getBoundingRect(),Z=Y[h]+G[h];return{s:Z,e:Z+Y[a],i:G.__legendDataIndex}}}function j(G,Y){return G.e>=Y&&G.s<=Y+s}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var i,n=this.getContentGroup(),s;return n.eachChild(function(u,a){var h=u.__legendDataIndex;s==null&&h!=null&&(s=a),h===t&&(i=a)}),i!=null?i:s},e.type="legend.scroll",e}(rX),uke=lke;function cke(r){r.registerAction("legendScroll","legendscroll",function(e,t){var i=e.scrollDataIndex;i!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(n){n.setScrollDataIndex(i)})})}function hke(r){gi(iX),r.registerComponentModel(ske),r.registerComponentView(uke),cke(r)}function dke(r){gi(iX),gi(hke)}var fke=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.inside",e.defaultOption=Wd(sx.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(sx),pke=fke,bR=ki();function mke(r,e,t){bR(r).coordSysRecordMap.each(function(i){var n=i.dataZoomInfoMap.get(e.uid);n&&(n.getRange=t)})}function gke(r,e){for(var t=bR(r).coordSysRecordMap,i=t.keys(),n=0;n<i.length;n++){var s=i[n],u=t.get(s),a=u.dataZoomInfoMap;if(a){var h=e.uid,p=a.get(h);p&&(a.removeKey(h),a.keys().length||nX(t,u))}}}function nX(r,e){if(e){r.removeKey(e.model.uid);var t=e.controller;t&&t.dispose()}}function vke(r,e){var t={model:e,containsPoint:Qr(yke,e),dispatchAction:Qr(_ke,r),dataZoomInfoMap:null,controller:null},i=t.controller=new Px(r.getZr());return ue(["pan","zoom","scrollMove"],function(n){i.on(n,function(s){var u=[];t.dataZoomInfoMap.each(function(a){if(!!s.isAvailableBehavior(a.model.option)){var h=(a.getRange||{})[n],p=h&&h(a.dzReferCoordSysInfo,t.model.mainType,t.controller,s);!a.model.get("disabled",!0)&&p&&u.push({dataZoomId:a.model.id,start:p[0],end:p[1]})}}),u.length&&t.dispatchAction(u)})}),t}function _ke(r,e){r.isDisposed()||r.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function yke(r,e,t,i){return r.coordinateSystem.containPoint([t,i])}function xke(r){var e,t="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},n=!0;return r.each(function(s){var u=s.model,a=u.get("disabled",!0)?!1:u.get("zoomLock",!0)?"move":!0;i[t+a]>i[t+e]&&(e=a),n=n&&u.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!n}}}function bke(r){r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,function(e,t){var i=bR(t),n=i.coordSysRecordMap||(i.coordSysRecordMap=Mr());n.each(function(s){s.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(s){var u=NZ(s);ue(u.infoList,function(a){var h=a.model.uid,p=n.get(h)||n.set(h,vke(t,a.model)),m=p.dataZoomInfoMap||(p.dataZoomInfoMap=Mr());m.set(s.uid,{dzReferCoordSysInfo:a,model:s,getRange:null})})}),n.each(function(s){var u=s.controller,a,h=s.dataZoomInfoMap;if(h){var p=h.keys()[0];p!=null&&(a=h.get(p))}if(!a){nX(n,s);return}var m=xke(h);u.enable(m.controlType,m.opt),u.setPointerChecker(s.containsPoint),Nv(s,"dispatchAction",a.model.get("throttle",!0),"fixRate")})})}var wke=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return e.prototype.render=function(t,i,n){if(r.prototype.render.apply(this,arguments),t.noTarget()){this._clear();return}this.range=t.getPercentRange(),mke(n,t,{pan:xr(lE.pan,this),zoom:xr(lE.zoom,this),scrollMove:xr(lE.scrollMove,this)})},e.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){gke(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(dR),lE={zoom:function(r,e,t,i){var n=this.range,s=n.slice(),u=r.axisModels[0];if(!!u){var a=uE[e](null,[i.originX,i.originY],u,t,r),h=(a.signal>0?a.pixelStart+a.pixelLength-a.pixel:a.pixel-a.pixelStart)/a.pixelLength*(s[1]-s[0])+s[0],p=Math.max(1/i.scale,0);s[0]=(s[0]-h)*p+h,s[1]=(s[1]-h)*p+h;var m=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(om(0,s,[0,100],0,m.minSpan,m.maxSpan),this.range=s,n[0]!==s[0]||n[1]!==s[1])return s}},pan:kG(function(r,e,t,i,n,s){var u=uE[i]([s.oldX,s.oldY],[s.newX,s.newY],e,n,t);return u.signal*(r[1]-r[0])*u.pixel/u.pixelLength}),scrollMove:kG(function(r,e,t,i,n,s){var u=uE[i]([0,0],[s.scrollDelta,s.scrollDelta],e,n,t);return u.signal*(r[1]-r[0])*s.scrollDelta})};function kG(r){return function(e,t,i,n){var s=this.range,u=s.slice(),a=e.axisModels[0];if(!!a){var h=r(u,a,e,t,i,n);if(om(h,u,[0,100],"all"),this.range=u,s[0]!==u[0]||s[1]!==u[1])return u}}}var uE={grid:function(r,e,t,i,n){var s=t.axis,u={},a=n.model.coordinateSystem.getRect();return r=r||[0,0],s.dim==="x"?(u.pixel=e[0]-r[0],u.pixelLength=a.width,u.pixelStart=a.x,u.signal=s.inverse?1:-1):(u.pixel=e[1]-r[1],u.pixelLength=a.height,u.pixelStart=a.y,u.signal=s.inverse?-1:1),u},polar:function(r,e,t,i,n){var s=t.axis,u={},a=n.model.coordinateSystem,h=a.getRadiusAxis().getExtent(),p=a.getAngleAxis().getExtent();return r=r?a.pointToCoord(r):[0,0],e=a.pointToCoord(e),t.mainType==="radiusAxis"?(u.pixel=e[0]-r[0],u.pixelLength=h[1]-h[0],u.pixelStart=h[0],u.signal=s.inverse?1:-1):(u.pixel=e[1]-r[1],u.pixelLength=p[1]-p[0],u.pixelStart=p[0],u.signal=s.inverse?-1:1),u},singleAxis:function(r,e,t,i,n){var s=t.axis,u=n.model.coordinateSystem.getRect(),a={};return r=r||[0,0],s.orient==="horizontal"?(a.pixel=e[0]-r[0],a.pixelLength=u.width,a.pixelStart=u.x,a.signal=s.inverse?1:-1):(a.pixel=e[1]-r[1],a.pixelLength=u.height,a.pixelStart=u.y,a.signal=s.inverse?-1:1),a}},Ske=wke;function aX(r){fR(r),r.registerComponentModel(pke),r.registerComponentView(Ske),bke(r)}var Tke=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Wd(sx.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(sx),Mke=Tke,Vy=Li,RG=7,Ake=1,cE=30,Cke=7,$y="horizontal",OG="vertical",Ike=5,Eke=["line","bar","candlestick","scatter"],Dke={easing:"cubicOut",duration:100,delay:0},Pke=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._displayables={},t}return e.prototype.init=function(t,i){this.api=i,this._onBrush=xr(this._onBrush,this),this._onBrushEnd=xr(this._onBrushEnd,this)},e.prototype.render=function(t,i,n,s){if(r.prototype.render.apply(this,arguments),Nv(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),t.get("show")===!1){this.group.removeAll();return}if(t.noTarget()){this._clear(),this.group.removeAll();return}(!s||s.type!=="dataZoom"||s.from!==this.uid)&&this._buildView(),this._updateView()},e.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){X0(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var i=this._displayables.sliderGroup=new Vr;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(i),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,i=this.api,n=t.get("brushSelect"),s=n?Cke:0,u=this._findCoordRect(),a={width:i.getWidth(),height:i.getHeight()},h=this._orient===$y?{right:a.width-u.x-u.width,top:a.height-cE-RG-s,width:u.width,height:cE}:{right:RG,top:u.y,width:cE,height:u.height},p=Ov(t.option);ue(["right","top","width","height"],function(v){p[v]==="ph"&&(p[v]=h[v])});var m=xa(p,a);this._location={x:m.x,y:m.y},this._size=[m.width,m.height],this._orient===OG&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,i=this._location,n=this._orient,s=this.dataZoomModel.getFirstTargetAxisModel(),u=s&&s.get("inverse"),a=this._displayables.sliderGroup,h=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(n===$y&&!u?{scaleY:h?1:-1,scaleX:1}:n===$y&&u?{scaleY:h?1:-1,scaleX:-1}:n===OG&&!u?{scaleY:h?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:h?-1:1,scaleX:-1,rotation:Math.PI/2});var p=t.getBoundingRect([a]);t.x=i.x-p.x,t.y=i.y-p.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,i=this._size,n=this._displayables.sliderGroup,s=t.get("brushSelect");n.add(new Vy({silent:!0,shape:{x:0,y:0,width:i[0],height:i[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var u=new Vy({shape:{x:0,y:0,width:i[0],height:i[1]},style:{fill:"transparent"},z2:0,onclick:xr(this._onClickPanel,this)}),a=this.api.getZr();s?(u.on("mousedown",this._onBrushStart,this),u.cursor="crosshair",a.on("mousemove",this._onBrush),a.on("mouseup",this._onBrushEnd)):(a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)),n.add(u)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!t)return;var i=this._size,n=this._shadowSize||[],s=t.series,u=s.getRawData(),a=s.getShadowDim&&s.getShadowDim(),h=a&&u.getDimensionInfo(a)?s.getShadowDim():t.otherDim;if(h==null)return;var p=this._shadowPolygonPts,m=this._shadowPolylinePts;if(u!==this._shadowData||h!==this._shadowDim||i[0]!==n[0]||i[1]!==n[1]){var v=u.getDataExtent(h),x=(v[1]-v[0])*.3;v=[v[0]-x,v[1]+x];var w=[0,i[1]],T=[0,i[0]],C=[[i[0],0],[0,0]],I=[],k=T[1]/(u.count()-1),R=0,z=Math.round(u.count()/i[0]),$;u.each([h],function(H,re){if(z>0&&re%z){R+=k;return}var ne=H==null||isNaN(H)||H==="",se=ne?0:on(H,v,w,!0);ne&&!$&&re?(C.push([C[C.length-1][0],0]),I.push([I[I.length-1][0],0])):!ne&&$&&(C.push([R,0]),I.push([R,0])),C.push([R,se]),I.push([R,se]),R+=k,$=ne}),p=this._shadowPolygonPts=C,m=this._shadowPolylinePts=I}this._shadowData=u,this._shadowDim=h,this._shadowSize=[i[0],i[1]];var j=this.dataZoomModel;function G(H){var re=j.getModel(H?"selectedDataBackground":"dataBackground"),ne=new Vr,se=new hs({shape:{points:p},segmentIgnoreThreshold:1,style:re.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),me=new ds({shape:{points:m},segmentIgnoreThreshold:1,style:re.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return ne.add(se),ne.add(me),ne}for(var Y=0;Y<3;Y++){var Z=G(Y===1);this._displayables.sliderGroup.add(Z),this._displayables.dataShadowSegs.push(Z)}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,i=t.get("showDataShadow");if(i!==!1){var n,s=this.ecModel;return t.eachTargetAxis(function(u,a){var h=t.getAxisProxy(u,a).getTargetSeriesModels();ue(h,function(p){if(!n&&!(i!==!0&&di(Eke,p.get("type"))<0)){var m=s.getComponent(Sd(u),a).axis,v=Lke(u),x,w=p.coordinateSystem;v!=null&&w.getOtherAxis&&(x=w.getOtherAxis(m).inverse),v=p.getData().mapDimension(v),n={thisAxis:m,series:p,thisDim:u,otherDim:v,otherAxisInverse:x}}},this)},this),n}},e.prototype._renderHandle=function(){var t=this.group,i=this._displayables,n=i.handles=[null,null],s=i.handleLabels=[null,null],u=this._displayables.sliderGroup,a=this._size,h=this.dataZoomModel,p=this.api,m=h.get("borderRadius")||0,v=h.get("brushSelect"),x=i.filler=new Vy({silent:v,style:{fill:h.get("fillerColor")},textConfig:{position:"inside"}});u.add(x),u.add(new Vy({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:a[0],height:a[1],r:m},style:{stroke:h.get("dataBackgroundColor")||h.get("borderColor"),lineWidth:Ake,fill:"rgba(0,0,0,0)"}})),ue([0,1],function(z){var $=h.get("handleIcon");!zS[$]&&$.indexOf("path://")<0&&$.indexOf("image://")<0&&($="path://"+$);var j=fa($,-1,0,2,2,null,!0);j.attr({cursor:zG(this._orient),draggable:!0,drift:xr(this._onDragMove,this,z),ondragend:xr(this._onDragEnd,this),onmouseover:xr(this._showDataInfo,this,!0),onmouseout:xr(this._showDataInfo,this,!1),z2:5});var G=j.getBoundingRect(),Y=h.get("handleSize");this._handleHeight=sr(Y,this._size[1]),this._handleWidth=G.width/G.height*this._handleHeight,j.setStyle(h.getModel("handleStyle").getItemStyle()),j.style.strokeNoScale=!0,j.rectHover=!0,j.ensureState("emphasis").style=h.getModel(["emphasis","handleStyle"]).getItemStyle(),zp(j);var Z=h.get("handleColor");Z!=null&&(j.style.fill=Z),u.add(n[z]=j);var H=h.getModel("textStyle");t.add(s[z]=new Ni({silent:!0,invisible:!0,style:Mn(H,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:H.getTextColor(),font:H.getFont()}),z2:10}))},this);var w=x;if(v){var T=sr(h.get("moveHandleSize"),a[1]),C=i.moveHandle=new Li({style:h.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:a[1]-.5,height:T}}),I=T*.8,k=i.moveHandleIcon=fa(h.get("moveHandleIcon"),-I/2,-I/2,I,I,"#fff",!0);k.silent=!0,k.y=a[1]+T/2-.5,C.ensureState("emphasis").style=h.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var R=Math.min(a[1]/2,Math.max(T,10));w=i.moveZone=new Li({invisible:!0,shape:{y:a[1]-R,height:T+R}}),w.on("mouseover",function(){p.enterEmphasis(C)}).on("mouseout",function(){p.leaveEmphasis(C)}),u.add(C),u.add(k),u.add(w)}w.attr({draggable:!0,cursor:zG(this._orient),drift:xr(this._onDragMove,this,"all"),ondragstart:xr(this._showDataInfo,this,!0),ondragend:xr(this._onDragEnd,this),onmouseover:xr(this._showDataInfo,this,!0),onmouseout:xr(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),i=this._getViewExtent();this._handleEnds=[on(t[0],[0,100],i,!0),on(t[1],[0,100],i,!0)]},e.prototype._updateInterval=function(t,i){var n=this.dataZoomModel,s=this._handleEnds,u=this._getViewExtent(),a=n.findRepresentativeAxisProxy().getMinMaxSpan(),h=[0,100];om(i,s,u,n.get("zoomLock")?"all":t,a.minSpan!=null?on(a.minSpan,h,u,!0):null,a.maxSpan!=null?on(a.maxSpan,h,u,!0):null);var p=this._range,m=this._range=pl([on(s[0],u,h,!0),on(s[1],u,h,!0)]);return!p||p[0]!==m[0]||p[1]!==m[1]},e.prototype._updateView=function(t){var i=this._displayables,n=this._handleEnds,s=pl(n.slice()),u=this._size;ue([0,1],function(w){var T=i.handles[w],C=this._handleHeight;T.attr({scaleX:C/2,scaleY:C/2,x:n[w]+(w?-1:1),y:u[1]/2-C/2})},this),i.filler.setShape({x:s[0],y:0,width:s[1]-s[0],height:u[1]});var a={x:s[0],width:s[1]-s[0]};i.moveHandle&&(i.moveHandle.setShape(a),i.moveZone.setShape(a),i.moveZone.getBoundingRect(),i.moveHandleIcon&&i.moveHandleIcon.attr("x",a.x+a.width/2));for(var h=i.dataShadowSegs,p=[0,s[0],s[1],u[0]],m=0;m<h.length;m++){var v=h[m],x=v.getClipPath();x||(x=new Li,v.setClipPath(x)),x.setShape({x:p[m],y:0,width:p[m+1]-p[m],height:u[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var i=this.dataZoomModel,n=this._displayables,s=n.handleLabels,u=this._orient,a=["",""];if(i.get("showDetail")){var h=i.findRepresentativeAxisProxy();if(h){var p=h.getAxisModel().axis,m=this._range,v=t?h.calculateDataWindow({start:m[0],end:m[1]}).valueWindow:h.getDataValueWindow();a=[this._formatLabel(v[0],p),this._formatLabel(v[1],p)]}}var x=pl(this._handleEnds.slice());w.call(this,0),w.call(this,1);function w(T){var C=Bp(n.handles[T].parent,this.group),I=ZT(T===0?"right":"left",C),k=this._handleWidth/2+Ike,R=tu([x[T]+(T===0?-k:k),this._size[1]/2],C);s[T].setStyle({x:R[0],y:R[1],verticalAlign:u===$y?"middle":I,align:u===$y?I:"center",text:a[T]})}},e.prototype._formatLabel=function(t,i){var n=this.dataZoomModel,s=n.get("labelFormatter"),u=n.get("labelPrecision");(u==null||u==="auto")&&(u=i.getPixelPrecision());var a=t==null||isNaN(t)?"":i.type==="category"||i.type==="time"?i.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(u,20));return kr(s)?s(t,a):gr(s)?s.replace("{value}",a):a},e.prototype._showDataInfo=function(t){t=this._dragging||t;var i=this._displayables,n=i.handleLabels;n[0].attr("invisible",!t),n[1].attr("invisible",!t),i.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](i.moveHandle,1)},e.prototype._onDragMove=function(t,i,n,s){this._dragging=!0,oh(s.event);var u=this._displayables.sliderGroup.getLocalTransform(),a=tu([i,n],u,!0),h=this._updateInterval(t,a[0]),p=this.dataZoomModel.get("realtime");this._updateView(!p),h&&p&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var i=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>i[0]||n[1]<0||n[1]>i[1])){var s=this._handleEnds,u=(s[0]+s[1])/2,a=this._updateInterval("all",n[0]-u);this._updateView(),a&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var i=t.offsetX,n=t.offsetY;this._brushStart=new ii(i,n),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(!!this._brushing){var i=this._displayables.brushRect;if(this._brushing=!1,!!i){i.attr("ignore",!0);var n=i.shape,s=+new Date;if(!(s-this._brushStartTime<200&&Math.abs(n.width)<5)){var u=this._getViewExtent(),a=[0,100];this._range=pl([on(n.x,u,a,!0),on(n.x+n.width,u,a,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(oh(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,i){var n=this._displayables,s=this.dataZoomModel,u=n.brushRect;u||(u=n.brushRect=new Vy({silent:!0,style:s.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(u)),u.attr("ignore",!1);var a=this._brushStart,h=this._displayables.sliderGroup,p=h.transformCoordToLocal(t,i),m=h.transformCoordToLocal(a.x,a.y),v=this._size;p[0]=Math.max(Math.min(v[0],p[0]),0),u.setShape({x:m[0],y:0,width:p[0]-m[0],height:v[1]})},e.prototype._dispatchZoomAction=function(t){var i=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?Dke:null,start:i[0],end:i[1]})},e.prototype._findCoordRect=function(){var t,i=NZ(this.dataZoomModel).infoList;if(!t&&i.length){var n=i[0].model.coordinateSystem;t=n.getRect&&n.getRect()}if(!t){var s=this.api.getWidth(),u=this.api.getHeight();t={x:s*.2,y:u*.2,width:s*.6,height:u*.6}}return t},e.type="dataZoom.slider",e}(dR);function Lke(r){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[r]}function zG(r){return r==="vertical"?"ns-resize":"ew-resize"}var kke=Pke;function oX(r){r.registerComponentModel(Mke),r.registerComponentView(kke),fR(r)}function Rke(r){gi(aX),gi(oX)}var Oke={get:function(r,e,t){var i=Nr((zke[r]||{})[e]);return t&&Nt(i)?i[i.length-1]:i}},zke={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},sX=Oke,BG=eo.mapVisual,Bke=eo.eachVisual,Fke=Nt,FG=ue,Nke=pl,Vke=on,$ke=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return e.prototype.init=function(t,i,n){this.mergeDefaultAndTheme(t,n)},e.prototype.optionUpdated=function(t,i){var n=this.option;!i&&XZ(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var i=this.stateList;t=xr(t,this),this.controllerVisuals=vP(this.option.controller,i,t),this.targetVisuals=vP(this.option.target,i,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,i=[];return t==null||t==="all"?this.ecModel.eachSeries(function(n,s){i.push(s)}):i=hn(t),i},e.prototype.eachTargetSeries=function(t,i){ue(this.getTargetSeriesIndices(),function(n){var s=this.ecModel.getSeriesByIndex(n);s&&t.call(i,s)},this)},e.prototype.isTargetSeries=function(t){var i=!1;return this.eachTargetSeries(function(n){n===t&&(i=!0)}),i},e.prototype.formatValueText=function(t,i,n){var s=this.option,u=s.precision,a=this.dataBound,h=s.formatter,p;n=n||["<",">"],Nt(t)&&(t=t.slice(),p=!0);var m=i?t:p?[v(t[0]),v(t[1])]:v(t);if(gr(h))return h.replace("{value}",p?m[0]:m).replace("{value2}",p?m[1]:m);if(kr(h))return p?h(t[0],t[1]):h(t);if(p)return t[0]===a[0]?n[0]+" "+m[1]:t[1]===a[1]?n[1]+" "+m[0]:m[0]+" - "+m[1];return m;function v(x){return x===a[0]?"min":x===a[1]?"max":(+x).toFixed(Math.min(u,20))}},e.prototype.resetExtent=function(){var t=this.option,i=Nke([t.min,t.max]);this._dataExtent=i},e.prototype.getDataDimensionIndex=function(t){var i=this.option.dimension;if(i!=null)return t.getDimensionIndex(i);for(var n=t.dimensions,s=n.length-1;s>=0;s--){var u=n[s],a=t.getDimensionInfo(u);if(!a.isCalculationCoord)return a.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,i=this.option,n={inRange:i.inRange,outOfRange:i.outOfRange},s=i.target||(i.target={}),u=i.controller||(i.controller={});ni(s,n),ni(u,n);var a=this.isCategory();h.call(this,s),h.call(this,u),p.call(this,s,"inRange","outOfRange"),m.call(this,u);function h(v){Fke(i.color)&&!v.inRange&&(v.inRange={color:i.color.slice().reverse()}),v.inRange=v.inRange||{color:t.get("gradientColor")}}function p(v,x,w){var T=v[x],C=v[w];T&&!C&&(C=v[w]={},FG(T,function(I,k){if(!!eo.isValidType(k)){var R=sX.get(k,"inactive",a);R!=null&&(C[k]=R,k==="color"&&!C.hasOwnProperty("opacity")&&!C.hasOwnProperty("colorAlpha")&&(C.opacity=[0,0]))}}))}function m(v){var x=(v.inRange||{}).symbol||(v.outOfRange||{}).symbol,w=(v.inRange||{}).symbolSize||(v.outOfRange||{}).symbolSize,T=this.get("inactiveColor"),C=this.getItemSymbol(),I=C||"roundRect";FG(this.stateList,function(k){var R=this.itemSize,z=v[k];z||(z=v[k]={color:a?T:[T]}),z.symbol==null&&(z.symbol=x&&Nr(x)||(a?I:[I])),z.symbolSize==null&&(z.symbolSize=w&&Nr(w)||(a?R[0]:[R[0],R[0]])),z.symbol=BG(z.symbol,function(G){return G==="none"?I:G});var $=z.symbolSize;if($!=null){var j=-1/0;Bke($,function(G){G>j&&(j=G)}),z.symbolSize=BG($,function(G){return Vke(G,[0,j],[0,R[0]],!0)})}},this)}},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(Oi),sT=$ke,NG=[20,140],Gke=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(t,i){r.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){r.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(t[0]==null||isNaN(t[0]))&&(t[0]=NG[0]),(t[1]==null||isNaN(t[1]))&&(t[1]=NG[1])},e.prototype._resetRange=function(){var t=this.getExtent(),i=this.option.range;!i||i.auto?(t.auto=1,this.option.range=t):Nt(i)&&(i[0]>i[1]&&i.reverse(),i[0]=Math.max(i[0],t[0]),i[1]=Math.min(i[1],t[1]))},e.prototype.completeVisualOption=function(){r.prototype.completeVisualOption.apply(this,arguments),ue(this.stateList,function(t){var i=this.option.controller[t].symbolSize;i&&i[0]!==i[1]&&(i[0]=i[1]/3)},this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),i=pl((this.get("range")||[]).slice());return i[0]>t[1]&&(i[0]=t[1]),i[1]>t[1]&&(i[1]=t[1]),i[0]<t[0]&&(i[0]=t[0]),i[1]<t[0]&&(i[1]=t[0]),i},e.prototype.getValueState=function(t){var i=this.option.range,n=this.getExtent();return(i[0]<=n[0]||i[0]<=t)&&(i[1]>=n[1]||t<=i[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var i=[];return this.eachTargetSeries(function(n){var s=[],u=n.getData();u.each(this.getDataDimensionIndex(u),function(a,h){t[0]<=a&&a<=t[1]&&s.push(h)},this),i.push({seriesId:n.id,dataIndex:s})},this),i},e.prototype.getVisualMeta=function(t){var i=VG(this,"outOfRange",this.getExtent()),n=VG(this,"inRange",this.option.range.slice()),s=[];function u(w,T){s.push({value:w,color:t(w,T)})}for(var a=0,h=0,p=n.length,m=i.length;h<m&&(!n.length||i[h]<=n[0]);h++)i[h]<n[a]&&u(i[h],"outOfRange");for(var v=1;a<p;a++,v=0)v&&s.length&&u(n[a],"outOfRange"),u(n[a],"inRange");for(var v=1;h<m;h++)(!n.length||n[n.length-1]<i[h])&&(v&&(s.length&&u(s[s.length-1].value,"outOfRange"),v=0),u(i[h],"outOfRange"));var x=s.length;return{stops:s,outerColors:[x?s[0].color:"transparent",x?s[x-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Wd(sT.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(sT);function VG(r,e,t){if(t[0]===t[1])return t.slice();for(var i=200,n=(t[1]-t[0])/i,s=t[0],u=[],a=0;a<=i&&s<t[1];a++)u.push(s),s+=n;return u.push(t[1]),u}var Uke=Gke,jke=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return e.prototype.init=function(t,i){this.ecModel=t,this.api=i},e.prototype.render=function(t,i,n,s){if(this.visualMapModel=t,t.get("show")===!1){this.group.removeAll();return}this.doRender(t,i,n,s)},e.prototype.renderBackground=function(t){var i=this.visualMapModel,n=Rv(i.get("padding")||0),s=t.getBoundingRect();t.add(new Li({z2:-1,silent:!0,shape:{x:s.x-n[3],y:s.y-n[0],width:s.width+n[3]+n[1],height:s.height+n[0]+n[2]},style:{fill:i.get("backgroundColor"),stroke:i.get("borderColor"),lineWidth:i.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,i,n){n=n||{};var s=n.forceState,u=this.visualMapModel,a={};if(i==="color"){var h=u.get("contentColor");a.color=h}function p(w){return a[w]}function m(w,T){a[w]=T}var v=u.controllerVisuals[s||u.getValueState(t)],x=eo.prepareVisualTypes(v);return ue(x,function(w){var T=v[w];n.convertOpacityToAlpha&&w==="opacity"&&(w="colorAlpha",T=v.__alphaForOpacity),eo.dependsOn(w,i)&&T&&T.applyVisual(t,p,m)}),a[i]},e.prototype.positionGroup=function(t){var i=this.visualMapModel,n=this.api;t2(t,i.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},e.prototype.doRender=function(t,i,n,s){},e.type="visualMap",e}(Jn),lX=jke,$G=[["left","right","width"],["top","bottom","height"]];function uX(r,e,t){var i=r.option,n=i.align;if(n!=null&&n!=="auto")return n;for(var s={width:e.getWidth(),height:e.getHeight()},u=i.orient==="horizontal"?1:0,a=$G[u],h=[0,null,10],p={},m=0;m<3;m++)p[$G[1-u][m]]=h[m],p[a[m]]=m===2?t[0]:i[a[m]];var v=[["x","width",3],["y","height",0]][u],x=xa(p,s,i.padding);return a[(x.margin[v[2]]||0)+x[v[0]]+x[v[1]]*.5<s[v[1]]*.5?0:1]}function sS(r,e){return ue(r||[],function(t){t.dataIndex!=null&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),r}var Vu=on,Hke=ue,GG=Math.min,hE=Math.max,Wke=12,qke=6,Zke=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return e.prototype.init=function(t,i){r.prototype.init.call(this,t,i),this._hoverLinkFromSeriesMouseOver=xr(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=xr(this._hideIndicator,this)},e.prototype.doRender=function(t,i,n,s){(!s||s.type!=="selectDataRange"||s.from!==this.uid)&&this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,i=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(i);var n=t.get("text");this._renderEndsText(i,n,0),this._renderEndsText(i,n,1),this._updateView(!0),this.renderBackground(i),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(i)},e.prototype._renderEndsText=function(t,i,n){if(!!i){var s=i[1-n];s=s!=null?s+"":"";var u=this.visualMapModel,a=u.get("textGap"),h=u.itemSize,p=this._shapes.mainGroup,m=this._applyTransform([h[0]/2,n===0?-a:h[1]+a],p),v=this._applyTransform(n===0?"bottom":"top",p),x=this._orient,w=this.visualMapModel.textStyleModel;this.group.add(new Ni({style:Mn(w,{x:m[0],y:m[1],verticalAlign:x==="horizontal"?"middle":v,align:x==="horizontal"?v:"center",text:s})}))}},e.prototype._renderBar=function(t){var i=this.visualMapModel,n=this._shapes,s=i.itemSize,u=this._orient,a=this._useHandle,h=uX(i,this.api,s),p=n.mainGroup=this._createBarGroup(h),m=new Vr;p.add(m),m.add(n.outOfRange=UG()),m.add(n.inRange=UG(null,a?HG(this._orient):null,xr(this._dragHandle,this,"all",!1),xr(this._dragHandle,this,"all",!0))),m.setClipPath(new Li({shape:{x:0,y:0,width:s[0],height:s[1],r:3}}));var v=i.textStyleModel.getTextRect("\u56FD"),x=hE(v.width,v.height);a&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(i,p,0,s,x,u),this._createHandle(i,p,1,s,x,u)),this._createIndicator(i,p,s,x,u),t.add(p)},e.prototype._createHandle=function(t,i,n,s,u,a){var h=xr(this._dragHandle,this,n,!1),p=xr(this._dragHandle,this,n,!0),m=iu(t.get("handleSize"),s[0]),v=fa(t.get("handleIcon"),-m/2,-m/2,m,m,null,!0),x=HG(this._orient);v.attr({cursor:x,draggable:!0,drift:h,ondragend:p,onmousemove:function(k){oh(k.event)}}),v.x=s[0]/2,v.useStyle(t.getModel("handleStyle").getItemStyle()),v.setStyle({strokeNoScale:!0,strokeFirst:!0}),v.style.lineWidth*=2,v.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),wp(v,!0),i.add(v);var w=this.visualMapModel.textStyleModel,T=new Ni({cursor:x,draggable:!0,drift:h,onmousemove:function(k){oh(k.event)},ondragend:p,style:Mn(w,{x:0,y:0,text:""})});T.ensureState("blur").style={opacity:.1},T.stateTransition={duration:200},this.group.add(T);var C=[m,0],I=this._shapes;I.handleThumbs[n]=v,I.handleLabelPoints[n]=C,I.handleLabels[n]=T},e.prototype._createIndicator=function(t,i,n,s,u){var a=iu(t.get("indicatorSize"),n[0]),h=fa(t.get("indicatorIcon"),-a/2,-a/2,a,a,null,!0);h.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var p=t.getModel("indicatorStyle").getItemStyle();if(h instanceof io){var m=h.style;h.useStyle(kt({image:m.image,x:m.x,y:m.y,width:m.width,height:m.height},p))}else h.useStyle(p);i.add(h);var v=this.visualMapModel.textStyleModel,x=new Ni({silent:!0,invisible:!0,style:Mn(v,{x:0,y:0,text:""})});this.group.add(x);var w=[(u==="horizontal"?s/2:qke)+n[0]/2,0],T=this._shapes;T.indicator=h,T.indicatorLabel=x,T.indicatorLabelPoint=w,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,i,n,s){if(!!this._useHandle){if(this._dragging=!i,!i){var u=this._applyTransform([n,s],this._shapes.mainGroup,!0);this._updateInterval(t,u[1]),this._hideIndicator(),this._updateView()}i===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),i?!this._hovering&&this._clearHoverLinkToSeries():jG(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,i=this._dataInterval=t.getSelected(),n=t.getExtent(),s=[0,t.itemSize[1]];this._handleEnds=[Vu(i[0],n,s,!0),Vu(i[1],n,s,!0)]},e.prototype._updateInterval=function(t,i){i=i||0;var n=this.visualMapModel,s=this._handleEnds,u=[0,n.itemSize[1]];om(i,s,u,t,0);var a=n.getExtent();this._dataInterval=[Vu(s[0],u,a,!0),Vu(s[1],u,a,!0)]},e.prototype._updateView=function(t){var i=this.visualMapModel,n=i.getExtent(),s=this._shapes,u=[0,i.itemSize[1]],a=t?u:this._handleEnds,h=this._createBarVisual(this._dataInterval,n,a,"inRange"),p=this._createBarVisual(n,n,u,"outOfRange");s.inRange.setStyle({fill:h.barColor}).setShape("points",h.barPoints),s.outOfRange.setStyle({fill:p.barColor}).setShape("points",p.barPoints),this._updateHandle(a,h)},e.prototype._createBarVisual=function(t,i,n,s){var u={forceState:s,convertOpacityToAlpha:!0},a=this._makeColorGradient(t,u),h=[this.getControllerVisual(t[0],"symbolSize",u),this.getControllerVisual(t[1],"symbolSize",u)],p=this._createBarPoints(n,h);return{barColor:new gx(0,0,0,1,a),barPoints:p,handlesColor:[a[0].color,a[a.length-1].color]}},e.prototype._makeColorGradient=function(t,i){var n=100,s=[],u=(t[1]-t[0])/n;s.push({color:this.getControllerVisual(t[0],"color",i),offset:0});for(var a=1;a<n;a++){var h=t[0]+u*a;if(h>t[1])break;s.push({color:this.getControllerVisual(h,"color",i),offset:a/n})}return s.push({color:this.getControllerVisual(t[1],"color",i),offset:1}),s},e.prototype._createBarPoints=function(t,i){var n=this.visualMapModel.itemSize;return[[n[0]-i[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-i[1],t[1]]]},e.prototype._createBarGroup=function(t){var i=this._orient,n=this.visualMapModel.get("inverse");return new Vr(i==="horizontal"&&!n?{scaleX:t==="bottom"?1:-1,rotation:Math.PI/2}:i==="horizontal"&&n?{scaleX:t==="bottom"?-1:1,rotation:-Math.PI/2}:i==="vertical"&&!n?{scaleX:t==="left"?1:-1,scaleY:-1}:{scaleX:t==="left"?1:-1})},e.prototype._updateHandle=function(t,i){if(!!this._useHandle){var n=this._shapes,s=this.visualMapModel,u=n.handleThumbs,a=n.handleLabels,h=s.itemSize,p=s.getExtent();Hke([0,1],function(m){var v=u[m];v.setStyle("fill",i.handlesColor[m]),v.y=t[m];var x=Vu(t[m],[0,h[1]],p,!0),w=this.getControllerVisual(x,"symbolSize");v.scaleX=v.scaleY=w/h[0],v.x=h[0]-w/2;var T=tu(n.handleLabelPoints[m],Bp(v,this.group));a[m].setStyle({x:T[0],y:T[1],text:s.formatValueText(this._dataInterval[m]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",n.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(t,i,n,s){var u=this.visualMapModel,a=u.getExtent(),h=u.itemSize,p=[0,h[1]],m=this._shapes,v=m.indicator;if(!!v){v.attr("invisible",!1);var x={convertOpacityToAlpha:!0},w=this.getControllerVisual(t,"color",x),T=this.getControllerVisual(t,"symbolSize"),C=Vu(t,a,p,!0),I=h[0]-T/2,k={x:v.x,y:v.y};v.y=C,v.x=I;var R=tu(m.indicatorLabelPoint,Bp(v,this.group)),z=m.indicatorLabel;z.attr("invisible",!1);var $=this._applyTransform("left",m.mainGroup),j=this._orient,G=j==="horizontal";z.setStyle({text:(n||"")+u.formatValueText(i),verticalAlign:G?$:"middle",align:G?"center":$});var Y={x:I,y:C,style:{fill:w}},Z={style:{x:R[0],y:R[1]}};if(u.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var H={duration:100,easing:"cubicInOut",additive:!0};v.x=k.x,v.y=k.y,v.animateTo(Y,H),z.animateTo(Z,H)}else v.attr(Y),z.attr(Z);this._firstShowIndicator=!1;var re=this._shapes.handleLabels;if(re)for(var ne=0;ne<re.length;ne++)this.api.enterBlur(re[ne])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(i){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,s=t._applyTransform([i.offsetX,i.offsetY],t._shapes.mainGroup,!0,!0);s[1]=GG(hE(0,s[1]),n[1]),t._doHoverLinkToSeries(s[1],0<=s[0]&&s[0]<=n[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,i){var n=this.visualMapModel,s=n.itemSize;if(!!n.option.hoverLink){var u=[0,s[1]],a=n.getExtent();t=GG(hE(u[0],t),u[1]);var h=Xke(n,a,u),p=[t-h,t+h],m=Vu(t,u,a,!0),v=[Vu(p[0],u,a,!0),Vu(p[1],u,a,!0)];p[0]<u[0]&&(v[0]=-1/0),p[1]>u[1]&&(v[1]=1/0),i&&(v[0]===-1/0?this._showIndicator(m,v[1],"< ",h):v[1]===1/0?this._showIndicator(m,v[0],"> ",h):this._showIndicator(m,m,"\u2248 ",h));var x=this._hoverLinkDataIndices,w=[];(i||jG(n))&&(w=this._hoverLinkDataIndices=n.findTargetDataIndices(v));var T=Bpe(x,w);this._dispatchHighDown("downplay",sS(T[0],n)),this._dispatchHighDown("highlight",sS(T[1],n))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var i;if(Tp(t.target,function(h){var p=Gr(h);if(p.dataIndex!=null)return i=p,!0},!0),!!i){var n=this.ecModel.getSeriesByIndex(i.seriesIndex),s=this.visualMapModel;if(!!s.isTargetSeries(n)){var u=n.getData(i.dataType),a=u.getStore().get(s.getDataDimensionIndex(u),i.dataIndex);isNaN(a)||this._showIndicator(a,a)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var i=this._shapes.handleLabels;if(i)for(var n=0;n<i.length;n++)this.api.leaveBlur(i[n])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",sS(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,i,n,s){var u=Bp(i,s?null:this.group);return Nt(t)?tu(t,u,n):ZT(t,u,n)},e.prototype._dispatchHighDown=function(t,i){i&&i.length&&this.api.dispatchAction({type:t,batch:i})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(lX);function UG(r,e,t,i){return new hs({shape:{points:r},draggable:!!t,cursor:e,drift:t,onmousemove:function(n){oh(n.event)},ondragend:i})}function Xke(r,e,t){var i=Wke/2,n=r.get("hoverLinkDataSize");return n&&(i=Vu(n,e,t,!0)/2),i}function jG(r){var e=r.get("hoverLinkOnHandle");return!!(e==null?r.get("realtime"):e)}function HG(r){return r==="vertical"?"ns-resize":"ew-resize"}var Yke=Zke,Kke={type:"selectDataRange",event:"dataRangeSelected",update:"update"},Jke=function(r,e){e.eachComponent({mainType:"visualMap",query:r},function(t){t.setSelected(r.selected)})},Qke=[{createOnAllSeries:!0,reset:function(r,e){var t=[];return e.eachComponent("visualMap",function(i){var n=r.pipelineContext;!i.isTargetSeries(r)||n&&n.large||t.push(qPe(i.stateList,i.targetVisuals,xr(i.getValueState,i),i.getDataDimensionIndex(r.getData())))}),t}},{createOnAllSeries:!0,reset:function(r,e){var t=r.getData(),i=[];e.eachComponent("visualMap",function(n){if(n.isTargetSeries(r)){var s=n.getVisualMeta(xr(eRe,null,r,n))||{stops:[],outerColors:[]},u=n.getDataDimensionIndex(t);u>=0&&(s.dimension=u,i.push(s))}}),r.getData().setVisual("visualMeta",i)}}];function eRe(r,e,t,i){for(var n=e.targetVisuals[i],s=eo.prepareVisualTypes(n),u={color:xx(r.getData(),"color")},a=0,h=s.length;a<h;a++){var p=s[a],m=n[p==="opacity"?"__alphaForOpacity":p];m&&m.applyVisual(t,v,x)}return u.color;function v(w){return u[w]}function x(w,T){u[w]=T}}var WG=ue;function tRe(r){var e=r&&r.visualMap;Nt(e)||(e=e?[e]:[]),WG(e,function(t){if(!!t){Ag(t,"splitList")&&!Ag(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var i=t.pieces;i&&Nt(i)&&WG(i,function(n){Br(n)&&(Ag(n,"start")&&!Ag(n,"min")&&(n.min=n.start),Ag(n,"end")&&!Ag(n,"max")&&(n.max=n.end))})}})}function Ag(r,e){return r&&r.hasOwnProperty&&r.hasOwnProperty(e)}var qG=!1;function cX(r){qG||(qG=!0,r.registerSubTypeDefaulter("visualMap",function(e){return!e.categories&&(!(e.pieces?e.pieces.length>0:e.splitNumber>0)||e.calculable)?"continuous":"piecewise"}),r.registerAction(Kke,Jke),ue(Qke,function(e){r.registerVisual(r.PRIORITY.VISUAL.COMPONENT,e)}),r.registerPreprocessor(tRe))}function hX(r){r.registerComponentModel(Uke),r.registerComponentView(Yke),cX(r)}var rRe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._pieceList=[],t}return e.prototype.optionUpdated=function(t,i){r.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var n=this._mode=this._determineMode();this._pieceList=[],iRe[this._mode].call(this,this._pieceList),this._resetSelected(t,i);var s=this.option.categories;this.resetVisual(function(u,a){n==="categories"?(u.mappingMethod="category",u.categories=Nr(s)):(u.dataExtent=this.getExtent(),u.mappingMethod="piecewise",u.pieceList=Ht(this._pieceList,function(h){return h=Nr(h),a!=="inRange"&&(h.visual=null),h}))})},e.prototype.completeVisualOption=function(){var t=this.option,i={},n=eo.listVisualTypes(),s=this.isCategory();ue(t.pieces,function(a){ue(n,function(h){a.hasOwnProperty(h)&&(i[h]=1)})}),ue(i,function(a,h){var p=!1;ue(this.stateList,function(m){p=p||u(t,m,h)||u(t.target,m,h)},this),!p&&ue(this.stateList,function(m){(t[m]||(t[m]={}))[h]=sX.get(h,m==="inRange"?"active":"inactive",s)})},this);function u(a,h,p){return a&&a[h]&&a[h].hasOwnProperty(p)}r.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,i){var n=this.option,s=this._pieceList,u=(i?n:t).selected||{};if(n.selected=u,ue(s,function(h,p){var m=this.getSelectedMapKey(h);u.hasOwnProperty(m)||(u[m]=!0)},this),n.selectedMode==="single"){var a=!1;ue(s,function(h,p){var m=this.getSelectedMapKey(h);u[m]&&(a?u[m]=!1:a=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return this._mode==="categories"?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=Nr(t)},e.prototype.getValueState=function(t){var i=eo.findPieceIndex(t,this._pieceList);return i!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[i])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var i=[],n=this._pieceList;return this.eachTargetSeries(function(s){var u=[],a=s.getData();a.each(this.getDataDimensionIndex(a),function(h,p){var m=eo.findPieceIndex(h,n);m===t&&u.push(p)},this),i.push({seriesId:s.id,dataIndex:u})},this),i},e.prototype.getRepresentValue=function(t){var i;if(this.isCategory())i=t.value;else if(t.value!=null)i=t.value;else{var n=t.interval||[];i=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return i},e.prototype.getVisualMeta=function(t){if(this.isCategory())return;var i=[],n=["",""],s=this;function u(m,v){var x=s.getRepresentValue({interval:m});v||(v=s.getValueState(x));var w=t(x,v);m[0]===-1/0?n[0]=w:m[1]===1/0?n[1]=w:i.push({value:m[0],color:w},{value:m[1],color:w})}var a=this._pieceList.slice();if(!a.length)a.push({interval:[-1/0,1/0]});else{var h=a[0].interval[0];h!==-1/0&&a.unshift({interval:[-1/0,h]}),h=a[a.length-1].interval[1],h!==1/0&&a.push({interval:[h,1/0]})}var p=-1/0;return ue(a,function(m){var v=m.interval;v&&(v[0]>p&&u([p,v[0]],"outOfRange"),u(v.slice()),p=v[1])},this),{stops:i,outerColors:n}},e.type="visualMap.piecewise",e.defaultOption=Wd(sT.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(sT),iRe={splitNumber:function(r){var e=this.option,t=Math.min(e.precision,20),i=this.getExtent(),n=e.splitNumber;n=Math.max(parseInt(n,10),1),e.splitNumber=n;for(var s=(i[1]-i[0])/n;+s.toFixed(t)!==s&&t<5;)t++;e.precision=t,s=+s.toFixed(t),e.minOpen&&r.push({interval:[-1/0,i[0]],close:[0,0]});for(var u=0,a=i[0];u<n;a+=s,u++){var h=u===n-1?i[1]:a+s;r.push({interval:[a,h],close:[1,1]})}e.maxOpen&&r.push({interval:[i[1],1/0],close:[0,0]}),V5(r),ue(r,function(p,m){p.index=m,p.text=this.formatValueText(p.interval)},this)},categories:function(r){var e=this.option;ue(e.categories,function(t){r.push({text:this.formatValueText(t,!0),value:t})},this),ZG(e,r)},pieces:function(r){var e=this.option;ue(e.pieces,function(t,i){Br(t)||(t={value:t});var n={text:"",index:i};if(t.label!=null&&(n.text=t.label),t.hasOwnProperty("value")){var s=n.value=t.value;n.interval=[s,s],n.close=[1,1]}else{for(var u=n.interval=[],a=n.close=[0,0],h=[1,0,1],p=[-1/0,1/0],m=[],v=0;v<2;v++){for(var x=[["gte","gt","min"],["lte","lt","max"]][v],w=0;w<3&&u[v]==null;w++)u[v]=t[x[w]],a[v]=h[w],m[v]=w===2;u[v]==null&&(u[v]=p[v])}m[0]&&u[1]===1/0&&(a[0]=0),m[1]&&u[0]===-1/0&&(a[1]=0),u[0]===u[1]&&a[0]&&a[1]&&(n.value=u[0])}n.visual=eo.retrieveVisuals(t),r.push(n)},this),ZG(e,r),V5(r),ue(r,function(t){var i=t.close,n=[["<","\u2264"][i[1]],[">","\u2265"][i[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,!1,n)},this)}};function ZG(r,e){var t=r.inverse;(r.orient==="vertical"?!t:t)&&e.reverse()}var nRe=rRe,aRe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.doRender=function(){var t=this.group;t.removeAll();var i=this.visualMapModel,n=i.get("textGap"),s=i.textStyleModel,u=s.getFont(),a=s.getTextColor(),h=this._getItemAlign(),p=i.itemSize,m=this._getViewData(),v=m.endsText,x=Ga(i.get("showLabel",!0),!v);v&&this._renderEndsText(t,v[0],p,x,h),ue(m.viewPieceList,function(w){var T=w.piece,C=new Vr;C.onclick=xr(this._onItemClick,this,T),this._enableHoverLink(C,w.indexInModelPieceList);var I=i.getRepresentValue(T);if(this._createItemSymbol(C,I,[0,0,p[0],p[1]]),x){var k=this.visualMapModel.getValueState(I);C.add(new Ni({style:{x:h==="right"?-n:p[0]+n,y:p[1]/2,text:T.text,verticalAlign:"middle",align:h,font:u,fill:a,opacity:k==="outOfRange"?.5:1}}))}t.add(C)},this),v&&this._renderEndsText(t,v[1],p,x,h),Fp(i.get("orient"),t,i.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,i){var n=this;t.on("mouseover",function(){return s("highlight")}).on("mouseout",function(){return s("downplay")});var s=function(u){var a=n.visualMapModel;a.option.hoverLink&&n.api.dispatchAction({type:u,batch:sS(a.findTargetDataIndices(i),a)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,i=t.option;if(i.orient==="vertical")return uX(t,this.api,t.itemSize);var n=i.align;return(!n||n==="auto")&&(n="left"),n},e.prototype._renderEndsText=function(t,i,n,s,u){if(!!i){var a=new Vr,h=this.visualMapModel.textStyleModel;a.add(new Ni({style:Mn(h,{x:s?u==="right"?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:s?u:"center",text:i})})),t.add(a)}},e.prototype._getViewData=function(){var t=this.visualMapModel,i=Ht(t.getPieceList(),function(a,h){return{piece:a,indexInModelPieceList:h}}),n=t.get("text"),s=t.get("orient"),u=t.get("inverse");return(s==="horizontal"?u:!u)?i.reverse():n&&(n=n.slice().reverse()),{viewPieceList:i,endsText:n}},e.prototype._createItemSymbol=function(t,i,n){t.add(fa(this.getControllerVisual(i,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(i,"color")))},e.prototype._onItemClick=function(t){var i=this.visualMapModel,n=i.option,s=n.selectedMode;if(!!s){var u=Nr(n.selected),a=i.getSelectedMapKey(t);s==="single"||s===!0?(u[a]=!0,ue(u,function(h,p){u[p]=p===a})):u[a]=!u[a],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:u})}},e.type="visualMap.piecewise",e}(lX),oRe=aRe;function dX(r){r.registerComponentModel(nRe),r.registerComponentView(oRe),cX(r)}function sRe(r){gi(hX),gi(dX)}var lRe={label:{enabled:!0},decal:{show:!1}},XG=ki(),uRe={};function cRe(r,e){var t=r.getModel("aria");if(!t.get("enabled"))return;var i=Nr(lRe);ni(i.label,r.getLocaleModel().get("aria"),!1),ni(t.option,i,!1),n(),s();function n(){var p=t.getModel("decal"),m=p.get("show");if(m){var v=Mr();r.eachSeries(function(x){if(!x.isColorBySeries()){var w=v.get(x.type);w||(w={},v.set(x.type,w)),XG(x).scope=w}}),r.eachRawSeries(function(x){if(r.isSeriesFiltered(x))return;if(kr(x.enableAriaDecal)){x.enableAriaDecal();return}var w=x.getData();if(x.isColorBySeries()){var R=MD(x.ecModel,x.name,uRe,r.getSeriesCount()),z=w.getVisual("decal");w.setVisual("decal",$(z,R))}else{var T=x.getRawData(),C={},I=XG(x).scope;w.each(function(j){var G=w.getRawIndex(j);C[G]=j});var k=T.count();T.each(function(j){var G=C[j],Y=T.getName(j)||j+"",Z=MD(x.ecModel,Y,I,k),H=w.getItemVisual(G,"decal");w.setItemVisual(G,"decal",$(H,Z))})}function $(j,G){var Y=j?kt(kt({},G),j):G;return Y.dirty=!0,Y}})}}function s(){var p=r.getLocaleModel().get("aria"),m=t.getModel("label");if(m.option=zr(m.option,p),!!m.get("enabled")){var v=e.getZr().dom;if(m.get("description")){v.setAttribute("aria-label",m.get("description"));return}var x=r.getSeriesCount(),w=m.get(["data","maxCount"])||10,T=m.get(["series","maxCount"])||10,C=Math.min(x,T),I;if(!(x<1)){var k=a();if(k){var R=m.get(["general","withTitle"]);I=u(R,{title:k})}else I=m.get(["general","withoutTitle"]);var z=[],$=x>1?m.get(["series","multiple","prefix"]):m.get(["series","single","prefix"]);I+=u($,{seriesCount:x}),r.eachSeries(function(Z,H){if(H<C){var re=void 0,ne=Z.get("name"),se=ne?"withName":"withoutName";re=x>1?m.get(["series","multiple",se]):m.get(["series","single",se]),re=u(re,{seriesId:Z.seriesIndex,seriesName:Z.get("name"),seriesType:h(Z.subType)});var me=Z.getData();if(me.count()>w){var Se=m.get(["data","partialData"]);re+=u(Se,{displayCnt:w})}else re+=m.get(["data","allData"]);for(var Ie=m.get(["data","separator","middle"]),ke=m.get(["data","separator","end"]),Fe=[],Ce=0;Ce<me.count();Ce++)if(Ce<w){var We=me.getName(Ce),gt=me.getValues(Ce),St=m.get(["data",We?"withName":"withoutName"]);Fe.push(u(St,{name:We,value:gt.join(Ie)}))}re+=Fe.join(Ie)+ke,z.push(re)}});var j=m.getModel(["series","multiple","separator"]),G=j.get("middle"),Y=j.get("end");I+=z.join(G)+Y,v.setAttribute("aria-label",I)}}}function u(p,m){if(!gr(p))return p;var v=p;return ue(m,function(x,w){v=v.replace(new RegExp("\\{\\s*"+w+"\\s*\\}","g"),x)}),v}function a(){var p=r.get("title");return p&&p.length&&(p=p[0]),p&&p.text}function h(p){var m=r.getLocaleModel().get(["series","typeNames"]);return m[p]||m.chart}}function hRe(r){if(!(!r||!r.aria)){var e=r.aria;e.show!=null&&(e.enabled=e.show),e.label=e.label||{},ue(["description","general","series","data"],function(t){e[t]!=null&&(e.label[t]=e[t])})}}function dRe(r){r.registerPreprocessor(hRe),r.registerVisual(r.PRIORITY.VISUAL.ARIA,cRe)}var YG={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},fRe=function(){function r(e){var t=this._condVal=gr(e)?new RegExp(e):Wde(e)?e:null;if(t==null){var i="";Qi(i)}}return r.prototype.evaluate=function(e){var t=typeof e;return gr(t)?this._condVal.test(e):Vi(t)?this._condVal.test(e+""):!1},r}(),pRe=function(){function r(){}return r.prototype.evaluate=function(){return this.value},r}(),mRe=function(){function r(){}return r.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},r}(),gRe=function(){function r(){}return r.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},r}(),vRe=function(){function r(){}return r.prototype.evaluate=function(){return!this.child.evaluate()},r}(),_Re=function(){function r(){}return r.prototype.evaluate=function(){for(var e=!!this.valueParser,t=this.getValue,i=t(this.valueGetterParam),n=e?this.valueParser(i):null,s=0;s<this.subCondList.length;s++)if(!this.subCondList[s].evaluate(e?n:i))return!1;return!0},r}();function wR(r,e){if(r===!0||r===!1){var t=new pRe;return t.value=r,t}var i="";return fX(r)||Qi(i),r.and?KG("and",r,e):r.or?KG("or",r,e):r.not?yRe(r,e):xRe(r,e)}function KG(r,e,t){var i=e[r],n="";Nt(i)||Qi(n),i.length||Qi(n);var s=r==="and"?new mRe:new gRe;return s.children=Ht(i,function(u){return wR(u,t)}),s.children.length||Qi(n),s}function yRe(r,e){var t=r.not,i="";fX(t)||Qi(i);var n=new vRe;return n.child=wR(t,e),n.child||Qi(i),n}function xRe(r,e){for(var t="",i=e.prepareGetValue(r),n=[],s=bi(r),u=r.parser,a=u?$W(u):null,h=0;h<s.length;h++){var p=s[h];if(!(p==="parser"||e.valueGetterAttrMap.get(p))){var m=wr(YG,p)?YG[p]:p,v=r[p],x=a?a(v):v,w=Jve(m,x)||m==="reg"&&new fRe(x);w||Qi(t),n.push(w)}}n.length||Qi(t);var T=new _Re;return T.valueGetterParam=i,T.valueParser=a,T.getValue=e.getValue,T.subCondList=n,T}function fX(r){return Br(r)&&!So(r)}var bRe=function(){function r(e,t){this._cond=wR(e,t)}return r.prototype.evaluate=function(){return this._cond.evaluate()},r}();function wRe(r,e){return new bRe(r,e)}var SRe={type:"echarts:filter",transform:function(r){for(var e=r.upstream,t,i=wRe(r.config,{valueGetterAttrMap:Mr({dimension:!0}),prepareGetValue:function(a){var h="",p=a.dimension;wr(a,"dimension")||Qi(h);var m=e.getDimensionInfo(p);return m||Qi(h),{dimIdx:m.index}},getValue:function(a){return e.retrieveValueFromItem(t,a.dimIdx)}}),n=[],s=0,u=e.count();s<u;s++)t=e.getRawDataItem(s),i.evaluate()&&n.push(t);return{data:n}}},TRe={type:"echarts:sort",transform:function(r){var e=r.upstream,t=r.config,i="",n=hn(t);n.length||Qi(i);var s=[];ue(n,function(m){var v=m.dimension,x=m.order,w=m.parser,T=m.incomparable;if(v==null&&Qi(i),x!=="asc"&&x!=="desc"&&Qi(i),T&&T!=="min"&&T!=="max"){var C="";Qi(C)}if(x!=="asc"&&x!=="desc"){var I="";Qi(I)}var k=e.getDimensionInfo(v);k||Qi(i);var R=w?$W(w):null;w&&!R&&Qi(i),s.push({dimIdx:k.index,parser:R,comparator:new UW(x,T)})});var u=e.sourceFormat;u!==To&&u!==wl&&Qi(i);for(var a=[],h=0,p=e.count();h<p;h++)a.push(e.getRawDataItem(h));return a.sort(function(m,v){for(var x=0;x<s.length;x++){var w=s[x],T=e.retrieveValueFromItem(m,w.dimIdx),C=e.retrieveValueFromItem(v,w.dimIdx);w.parser&&(T=w.parser(T),C=w.parser(C));var I=w.comparator.evaluate(T,C);if(I!==0)return I}return 0}),{data:a}}};function MRe(r){r.registerTransform(SRe),r.registerTransform(TRe)}var ARe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dataset",t}return e.prototype.init=function(t,i,n){r.prototype.init.call(this,t,i,n),this._sourceManager=new qW(this),J4(this)},e.prototype.mergeOption=function(t,i){r.prototype.mergeOption.call(this,t,i),J4(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:Qu},e}(Oi),CRe=function(r){lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dataset",t}return e.type="dataset",e}(Jn);function IRe(r){r.registerComponentModel(ARe),r.registerComponentView(CRe)}var Bu=sc.CMD;function Ug(r,e){return Math.abs(r-e)<1e-5}function TP(r){var e=r.data,t=r.len(),i=[],n,s=0,u=0,a=0,h=0;function p(me,Se){n&&n.length>2&&i.push(n),n=[me,Se]}function m(me,Se,Ie,ke){Ug(me,Ie)&&Ug(Se,ke)||n.push(me,Se,Ie,ke,Ie,ke)}function v(me,Se,Ie,ke,Fe,Ce){var We=Math.abs(Se-me),gt=Math.tan(We/4)*4/3,St=Se<me?-1:1,et=Math.cos(me),ht=Math.sin(me),$e=Math.cos(Se),He=Math.sin(Se),dt=et*Fe+Ie,nt=ht*Ce+ke,vt=$e*Fe+Ie,Pt=He*Ce+ke,jt=Fe*gt*St,Et=Ce*gt*St;n.push(dt-jt*ht,nt+Et*et,vt+jt*He,Pt-Et*$e,vt,Pt)}for(var x,w,T,C,I=0;I<t;){var k=e[I++],R=I===1;switch(R&&(s=e[I],u=e[I+1],a=s,h=u,(k===Bu.L||k===Bu.C||k===Bu.Q)&&(n=[a,h])),k){case Bu.M:s=a=e[I++],u=h=e[I++],p(a,h);break;case Bu.L:x=e[I++],w=e[I++],m(s,u,x,w),s=x,u=w;break;case Bu.C:n.push(e[I++],e[I++],e[I++],e[I++],s=e[I++],u=e[I++]);break;case Bu.Q:x=e[I++],w=e[I++],T=e[I++],C=e[I++],n.push(s+2/3*(x-s),u+2/3*(w-u),T+2/3*(x-T),C+2/3*(w-C),T,C),s=T,u=C;break;case Bu.A:var z=e[I++],$=e[I++],j=e[I++],G=e[I++],Y=e[I++],Z=e[I++]+Y;I+=1;var H=!e[I++];x=Math.cos(Y)*j+z,w=Math.sin(Y)*G+$,R?(a=x,h=w,p(a,h)):m(s,u,x,w),s=Math.cos(Z)*j+z,u=Math.sin(Z)*G+$;for(var re=(H?-1:1)*Math.PI/2,ne=Y;H?ne>Z:ne<Z;ne+=re){var se=H?Math.max(ne+re,Z):Math.min(ne+re,Z);v(ne,se,z,$,j,G)}break;case Bu.R:a=s=e[I++],h=u=e[I++],x=a+e[I++],w=h+e[I++],p(x,h),m(x,h,x,w),m(x,w,a,w),m(a,w,a,h),m(a,h,x,h);break;case Bu.Z:n&&m(s,u,a,h),s=a,u=h;break}}return n&&n.length>2&&i.push(n),i}function MP(r,e,t,i,n,s,u,a,h,p){if(Ug(r,t)&&Ug(e,i)&&Ug(n,u)&&Ug(s,a)){h.push(u,a);return}var m=2/p,v=m*m,x=u-r,w=a-e,T=Math.sqrt(x*x+w*w);x/=T,w/=T;var C=t-r,I=i-e,k=n-u,R=s-a,z=C*C+I*I,$=k*k+R*R;if(z<v&&$<v){h.push(u,a);return}var j=x*C+w*I,G=-x*k-w*R,Y=z-j*j,Z=$-G*G;if(Y<v&&j>=0&&Z<v&&G>=0){h.push(u,a);return}var H=[],re=[];Od(r,t,n,u,.5,H),Od(e,i,s,a,.5,re),MP(H[0],re[0],H[1],re[1],H[2],re[2],H[3],re[3],h,p),MP(H[4],re[4],H[5],re[5],H[6],re[6],H[7],re[7],h,p)}function ERe(r,e){var t=TP(r),i=[];e=e||1;for(var n=0;n<t.length;n++){var s=t[n],u=[],a=s[0],h=s[1];u.push(a,h);for(var p=2;p<s.length;){var m=s[p++],v=s[p++],x=s[p++],w=s[p++],T=s[p++],C=s[p++];MP(a,h,m,v,x,w,T,C,u,e),a=T,h=C}i.push(u)}return i}function pX(r,e,t){var i=r[e],n=r[1-e],s=Math.abs(i/n),u=Math.ceil(Math.sqrt(s*t)),a=Math.floor(t/u);a===0&&(a=1,u=t);for(var h=[],p=0;p<u;p++)h.push(a);var m=u*a,v=t-m;if(v>0)for(var p=0;p<v;p++)h[p%u]+=1;return h}function JG(r,e,t){for(var i=r.r0,n=r.r,s=r.startAngle,u=r.endAngle,a=Math.abs(u-s),h=a*n,p=n-i,m=h>Math.abs(p),v=pX([h,p],m?0:1,e),x=(m?a:p)/v.length,w=0;w<v.length;w++)for(var T=(m?p:a)/v[w],C=0;C<v[w];C++){var I={};m?(I.startAngle=s+x*w,I.endAngle=s+x*(w+1),I.r0=i+T*C,I.r=i+T*(C+1)):(I.startAngle=s+T*C,I.endAngle=s+T*(C+1),I.r0=i+x*w,I.r=i+x*(w+1)),I.clockwise=r.clockwise,I.cx=r.cx,I.cy=r.cy,t.push(I)}}function DRe(r,e,t){for(var i=r.width,n=r.height,s=i>n,u=pX([i,n],s?0:1,e),a=s?"width":"height",h=s?"height":"width",p=s?"x":"y",m=s?"y":"x",v=r[a]/u.length,x=0;x<u.length;x++)for(var w=r[h]/u[x],T=0;T<u[x];T++){var C={};C[p]=x*v,C[m]=T*w,C[a]=v,C[h]=w,C.x+=r.x,C.y+=r.y,t.push(C)}}function QG(r,e,t,i){return r*i-t*e}function PRe(r,e,t,i,n,s,u,a){var h=t-r,p=i-e,m=u-n,v=a-s,x=QG(m,v,h,p);if(Math.abs(x)<1e-6)return null;var w=r-n,T=e-s,C=QG(w,T,m,v)/x;return C<0||C>1?null:new ii(C*h+r,C*p+e)}function LRe(r,e,t){var i=new ii;ii.sub(i,t,e),i.normalize();var n=new ii;ii.sub(n,r,e);var s=n.dot(i);return s}function Cg(r,e){var t=r[r.length-1];t&&t[0]===e[0]&&t[1]===e[1]||r.push(e)}function kRe(r,e,t){for(var i=r.length,n=[],s=0;s<i;s++){var u=r[s],a=r[(s+1)%i],h=PRe(u[0],u[1],a[0],a[1],e.x,e.y,t.x,t.y);h&&n.push({projPt:LRe(h,e,t),pt:h,idx:s})}if(n.length<2)return[{points:r},{points:r}];n.sort(function(I,k){return I.projPt-k.projPt});var p=n[0],m=n[n.length-1];if(m.idx<p.idx){var v=p;p=m,m=v}for(var x=[p.pt.x,p.pt.y],w=[m.pt.x,m.pt.y],T=[x],C=[w],s=p.idx+1;s<=m.idx;s++)Cg(T,r[s].slice());Cg(T,w),Cg(T,x);for(var s=m.idx+1;s<=p.idx+i;s++)Cg(C,r[s%i].slice());return Cg(C,x),Cg(C,w),[{points:T},{points:C}]}function eU(r){var e=r.points,t=[],i=[];GT(e,t,i);var n=new ai(t[0],t[1],i[0]-t[0],i[1]-t[1]),s=n.width,u=n.height,a=n.x,h=n.y,p=new ii,m=new ii;return s>u?(p.x=m.x=a+s/2,p.y=h,m.y=h+u):(p.y=m.y=h+u/2,p.x=a,m.x=a+s),kRe(e,p,m)}function lT(r,e,t,i){if(t===1)i.push(e);else{var n=Math.floor(t/2),s=r(e);lT(r,s[0],n,i),lT(r,s[1],t-n,i)}return i}function RRe(r,e){for(var t=[],i=0;i<e;i++)t.push(BL(r));return t}function ORe(r,e){e.setStyle(r.style),e.z=r.z,e.z2=r.z2,e.zlevel=r.zlevel}function zRe(r){for(var e=[],t=0;t<r.length;)e.push([r[t++],r[t++]]);return e}function BRe(r,e){var t=[],i=r.shape,n;switch(r.type){case"rect":DRe(i,e,t),n=Li;break;case"sector":JG(i,e,t),n=cs;break;case"circle":JG({r0:0,r:i.r,startAngle:0,endAngle:Math.PI*2,cx:i.cx,cy:i.cy},e,t),n=cs;break;default:var s=r.getComputedTransform(),u=s?Math.sqrt(Math.max(s[0]*s[0]+s[1]*s[1],s[2]*s[2]+s[3]*s[3])):1,a=Ht(ERe(r.getUpdatedPathProxy(),u),function(k){return zRe(k)}),h=a.length;if(h===0)lT(eU,{points:a[0]},e,t);else if(h===e)for(var p=0;p<h;p++)t.push({points:a[p]});else{var m=0,v=Ht(a,function(k){var R=[],z=[];GT(k,R,z);var $=(z[1]-R[1])*(z[0]-R[0]);return m+=$,{poly:k,area:$}});v.sort(function(k,R){return R.area-k.area});for(var x=e,p=0;p<h;p++){var w=v[p];if(x<=0)break;var T=p===h-1?x:Math.ceil(w.area/m*e);T<0||(lT(eU,{points:w.poly},T,t),x-=T)}}n=hs;break}if(!n)return RRe(r,e);for(var C=[],p=0;p<t.length;p++){var I=new n;I.setShape(t[p]),ORe(r,I),C.push(I)}return C}function FRe(r,e){var t=r.length,i=e.length;if(t===i)return[r,e];for(var n=[],s=[],u=t<i?r:e,a=Math.min(t,i),h=Math.abs(i-t)/6,p=(a-2)/6,m=Math.ceil(h/p)+1,v=[u[0],u[1]],x=h,w=2;w<a;){var T=u[w-2],C=u[w-1],I=u[w++],k=u[w++],R=u[w++],z=u[w++],$=u[w++],j=u[w++];if(x<=0){v.push(I,k,R,z,$,j);continue}for(var G=Math.min(x,m-1)+1,Y=1;Y<=G;Y++){var Z=Y/G;Od(T,I,R,$,Z,n),Od(C,k,z,j,Z,s),T=n[3],C=s[3],v.push(n[1],s[1],n[2],s[2],T,C),I=n[5],k=s[5],R=n[6],z=s[6]}x-=G-1}return u===r?[v,e]:[r,v]}function tU(r,e){for(var t=r.length,i=r[t-2],n=r[t-1],s=[],u=0;u<e.length;)s[u++]=i,s[u++]=n;return s}function NRe(r,e){for(var t,i,n,s=[],u=[],a=0;a<Math.max(r.length,e.length);a++){var h=r[a],p=e[a],m=void 0,v=void 0;h?p?(t=FRe(h,p),m=t[0],v=t[1],i=m,n=v):(v=tU(n||h,h),m=h):(m=tU(i||p,p),v=p),s.push(m),u.push(v)}return[s,u]}function rU(r){for(var e=0,t=0,i=0,n=r.length,s=0,u=n-2;s<n;u=s,s+=2){var a=r[u],h=r[u+1],p=r[s],m=r[s+1],v=a*m-p*h;e+=v,t+=(a+p)*v,i+=(h+m)*v}return e===0?[r[0]||0,r[1]||0]:[t/e/3,i/e/3,e]}function VRe(r,e,t,i){for(var n=(r.length-2)/6,s=1/0,u=0,a=r.length,h=a-2,p=0;p<n;p++){for(var m=p*6,v=0,x=0;x<a;x+=2){var w=x===0?m:(m+x-2)%h+2,T=r[w]-t[0],C=r[w+1]-t[1],I=e[x]-i[0],k=e[x+1]-i[1],R=I-T,z=k-C;v+=R*R+z*z}v<s&&(s=v,u=p)}return u}function $Re(r){for(var e=[],t=r.length,i=0;i<t;i+=2)e[i]=r[t-i-2],e[i+1]=r[t-i-1];return e}function GRe(r,e,t,i){for(var n=[],s,u=0;u<r.length;u++){var a=r[u],h=e[u],p=rU(a),m=rU(h);s==null&&(s=p[2]<0!=m[2]<0);var v=[],x=[],w=0,T=1/0,C=[],I=a.length;s&&(a=$Re(a));for(var k=VRe(a,h,p,m)*6,R=I-2,z=0;z<R;z+=2){var $=(k+z)%R+2;v[z+2]=a[$]-p[0],v[z+3]=a[$+1]-p[1]}if(v[0]=a[k]-p[0],v[1]=a[k+1]-p[1],t>0)for(var j=i/t,G=-i/2;G<=i/2;G+=j){for(var Y=Math.sin(G),Z=Math.cos(G),H=0,z=0;z<a.length;z+=2){var re=v[z],ne=v[z+1],se=h[z]-m[0],me=h[z+1]-m[1],Se=se*Z-me*Y,Ie=se*Y+me*Z;C[z]=Se,C[z+1]=Ie;var ke=Se-re,Fe=Ie-ne;H+=ke*ke+Fe*Fe}if(H<T){T=H,w=G;for(var Ce=0;Ce<C.length;Ce++)x[Ce]=C[Ce]}}else for(var We=0;We<I;We+=2)x[We]=h[We]-m[0],x[We+1]=h[We+1]-m[1];n.push({from:v,to:x,fromCp:p,toCp:m,rotation:-w})}return n}function uT(r){return r.__isCombineMorphing}var mX="__mOriginal_";function cT(r,e,t){var i=mX+e,n=r[i]||r[e];r[i]||(r[i]=r[e]);var s=t.replace,u=t.after,a=t.before;r[e]=function(){var h=arguments,p;return a&&a.apply(this,h),s?p=s.apply(this,h):p=n.apply(this,h),u&&u.apply(this,h),p}}function I0(r,e){var t=mX+e;r[t]&&(r[e]=r[t],r[t]=null)}function iU(r,e){for(var t=0;t<r.length;t++)for(var i=r[t],n=0;n<i.length;){var s=i[n],u=i[n+1];i[n++]=e[0]*s+e[2]*u+e[4],i[n++]=e[1]*s+e[3]*u+e[5]}}function gX(r,e){var t=r.getUpdatedPathProxy(),i=e.getUpdatedPathProxy(),n=NRe(TP(t),TP(i)),s=n[0],u=n[1],a=r.getComputedTransform(),h=e.getComputedTransform();function p(){this.transform=null}a&&iU(s,a),h&&iU(u,h),cT(e,"updateTransform",{replace:p}),e.transform=null;var m=GRe(s,u,10,Math.PI),v=[];cT(e,"buildPath",{replace:function(x){for(var w=e.__morphT,T=1-w,C=[],I=0;I<m.length;I++){var k=m[I],R=k.from,z=k.to,$=k.rotation*w,j=k.fromCp,G=k.toCp,Y=Math.sin($),Z=Math.cos($);Uw(C,j,G,w);for(var H=0;H<R.length;H+=2){var re=R[H],ne=R[H+1],se=z[H],me=z[H+1],Se=re*T+se*w,Ie=ne*T+me*w;v[H]=Se*Z-Ie*Y+C[0],v[H+1]=Se*Y+Ie*Z+C[1]}var ke=v[0],Fe=v[1];x.moveTo(ke,Fe);for(var H=2;H<R.length;){var se=v[H++],me=v[H++],Ce=v[H++],We=v[H++],gt=v[H++],St=v[H++];ke===se&&Fe===me&&Ce===gt&&We===St?x.lineTo(gt,St):x.bezierCurveTo(se,me,Ce,We,gt,St),ke=gt,Fe=St}}}})}function SR(r,e,t){if(!r||!e)return e;var i=t.done,n=t.during;gX(r,e),e.__morphT=0;function s(){I0(e,"buildPath"),I0(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},zr({during:function(u){e.dirtyShape(),n&&n(u)},done:function(){s(),i&&i()}},t)),e}function URe(r,e,t,i,n,s){var u=16;r=n===t?0:Math.round(32767*(r-t)/(n-t)),e=s===i?0:Math.round(32767*(e-i)/(s-i));for(var a=0,h,p=(1<<u)/2;p>0;p/=2){var m=0,v=0;(r&p)>0&&(m=1),(e&p)>0&&(v=1),a+=p*p*(3*m^v),v===0&&(m===1&&(r=p-1-r,e=p-1-e),h=r,r=e,e=h)}return a}function hT(r){var e=1/0,t=1/0,i=-1/0,n=-1/0,s=Ht(r,function(a){var h=a.getBoundingRect(),p=a.getComputedTransform(),m=h.x+h.width/2+(p?p[4]:0),v=h.y+h.height/2+(p?p[5]:0);return e=Math.min(m,e),t=Math.min(v,t),i=Math.max(m,i),n=Math.max(v,n),[m,v]}),u=Ht(s,function(a,h){return{cp:a,z:URe(a[0],a[1],e,t,i,n),path:r[h]}});return u.sort(function(a,h){return a.z-h.z}).map(function(a){return a.path})}function vX(r){return BRe(r.path,r.count)}function AP(){return{fromIndividuals:[],toIndividuals:[],count:0}}function jRe(r,e,t){var i=[];function n(j){for(var G=0;G<j.length;G++){var Y=j[G];uT(Y)?n(Y.childrenRef()):Y instanceof _i&&i.push(Y)}}n(r);var s=i.length;if(!s)return AP();var u=t.dividePath||vX,a=u({path:e,count:s});if(a.length!==s)return console.error("Invalid morphing: unmatched splitted path"),AP();i=hT(i),a=hT(a);for(var h=t.done,p=t.during,m=t.individualDelay,v=new Xc,x=0;x<s;x++){var w=i[x],T=a[x];T.parent=e,T.copyTransform(v),m||gX(w,T)}e.__isCombineMorphing=!0,e.childrenRef=function(){return a};function C(j){for(var G=0;G<a.length;G++)a[G].addSelfToZr(j)}cT(e,"addSelfToZr",{after:function(j){C(j)}}),cT(e,"removeSelfFromZr",{after:function(j){for(var G=0;G<a.length;G++)a[G].removeSelfFromZr(j)}});function I(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,I0(e,"addSelfToZr"),I0(e,"removeSelfFromZr")}var k=a.length;if(m)for(var R=k,z=function(){R--,R===0&&(I(),h&&h())},x=0;x<k;x++){var $=m?zr({delay:(t.delay||0)+m(x,k,i[x],a[x]),done:z},t):t;SR(i[x],a[x],$)}else e.__morphT=0,e.animateTo({__morphT:1},zr({during:function(j){for(var G=0;G<k;G++){var Y=a[G];Y.__morphT=e.__morphT,Y.dirtyShape()}p&&p(j)},done:function(){I();for(var j=0;j<r.length;j++)I0(r[j],"updateTransform");h&&h()}},t));return e.__zr&&C(e.__zr),{fromIndividuals:i,toIndividuals:a,count:k}}function HRe(r,e,t){var i=e.length,n=[],s=t.dividePath||vX;function u(w){for(var T=0;T<w.length;T++){var C=w[T];uT(C)?u(C.childrenRef()):C instanceof _i&&n.push(C)}}if(uT(r)){u(r.childrenRef());var a=n.length;if(a<i)for(var h=0,p=a;p<i;p++)n.push(BL(n[h++%a]));n.length=i}else{n=s({path:r,count:i});for(var m=r.getComputedTransform(),p=0;p<n.length;p++)n[p].setLocalTransform(m);if(n.length!==i)return console.error("Invalid morphing: unmatched splitted path"),AP()}n=hT(n),e=hT(e);for(var v=t.individualDelay,p=0;p<i;p++){var x=v?zr({delay:(t.delay||0)+v(p,i,n[p],e[p])},t):t;SR(n[p],e[p],x)}return{fromIndividuals:n,toIndividuals:e,count:e.length}}function nU(r){return Nt(r[0])}function aU(r,e){for(var t=[],i=r.length,n=0;n<i;n++)t.push({one:r[n],many:[]});for(var n=0;n<e.length;n++){var s=e[n].length,u=void 0;for(u=0;u<s;u++)t[u%i].many.push(e[n][u])}for(var a=0,n=i-1;n>=0;n--)if(!t[n].many.length){var h=t[a].many;if(h.length<=1)if(a)a=0;else return t;var s=h.length,p=Math.ceil(s/2);t[n].many=h.slice(p,s),t[a].many=h.slice(0,p),a++}return t}var WRe={clone:function(r){for(var e=[],t=1-Math.pow(1-r.path.style.opacity,1/r.count),i=0;i<r.count;i++){var n=BL(r.path);n.setStyle("opacity",t),e.push(n)}return e},split:null};function dE(r,e,t,i,n,s){if(!r.length||!e.length)return;var u=Dv("update",i,n);if(!(u&&u.duration>0))return;var a=i.getModel("universalTransition").get("delay"),h=Object.assign({setToFinal:!0},u),p,m;nU(r)&&(p=r,m=e),nU(e)&&(p=e,m=r);function v(k,R,z,$,j){var G=k.many,Y=k.one;if(G.length===1&&!j){var Z=R?G[0]:Y,H=R?Y:G[0];if(uT(Z))v({many:[Z],one:H},!0,z,$,!0);else{var re=a?zr({delay:a(z,$)},h):h;SR(Z,H,re),s(Z,H,Z,H,re)}}else for(var ne=zr({dividePath:WRe[t],individualDelay:a&&function(Fe,Ce,We,gt){return a(Fe+z,$)}},h),se=R?jRe(G,Y,ne):HRe(Y,G,ne),me=se.fromIndividuals,Se=se.toIndividuals,Ie=me.length,ke=0;ke<Ie;ke++){var re=a?zr({delay:a(ke,Ie)},h):h;s(me[ke],Se[ke],R?G[ke]:k.one,R?k.one:G[ke],re)}}for(var x=p?p===r:r.length>e.length,w=p?aU(m,p):aU(x?e:r,[x?r:e]),T=0,C=0;C<w.length;C++)T+=w[C].many.length;for(var I=0,C=0;C<w.length;C++)v(w[C],x,I,T),I+=w[C].many.length}function dp(r){if(!r)return[];if(Nt(r)){for(var e=[],t=0;t<r.length;t++)e.push(dp(r[t]));return e}var i=[];return r.traverse(function(n){n instanceof _i&&!n.disableMorphing&&!n.invisible&&!n.ignore&&i.push(n)}),i}var _X=1e4,qRe=0,oU=1,sU=2,ZRe=ki();function XRe(r,e){for(var t=r.dimensions,i=0;i<t.length;i++){var n=r.getDimensionInfo(t[i]);if(n&&n.otherDims[e]===0)return t[i]}}function YRe(r,e,t){var i=r.getDimensionInfo(t),n=i&&i.ordinalMeta;if(i){var s=r.get(i.name,e);return n&&n.categories[s]||s+""}}function lU(r,e,t,i){var n=i?"itemChildGroupId":"itemGroupId",s=XRe(r,n);if(s){var u=YRe(r,e,s);return u}var a=r.getRawDataItem(e),h=i?"childGroupId":"groupId";if(a&&a[h])return a[h]+"";if(!i)return t||r.getId(e)}function uU(r){var e=[];return ue(r,function(t){var i=t.data,n=t.dataGroupId;if(!(i.count()>_X))for(var s=i.getIndices(),u=0;u<s.length;u++)e.push({data:i,groupId:lU(i,u,n,!1),childGroupId:lU(i,u,n,!0),divide:t.divide,dataIndex:u})}),e}function fE(r,e,t){r.traverse(function(i){i instanceof _i&&Bn(i,{style:{opacity:0}},e,{dataIndex:t,isFrom:!0})})}function pE(r){if(r.parent){var e=r.getComputedTransform();r.setLocalTransform(e),r.parent.remove(r)}}function Ig(r){r.stopAnimation(),r.isGroup&&r.traverse(function(e){e.stopAnimation()})}function KRe(r,e,t){var i=Dv("update",t,e);i&&r.traverse(function(n){if(n instanceof yl){var s=Pge(n);s&&n.animateFrom({style:s},i)}})}function JRe(r,e){var t=r.length;if(t!==e.length)return!1;for(var i=0;i<t;i++){var n=r[i],s=e[i];if(n.data.getId(n.dataIndex)!==s.data.getId(s.dataIndex))return!1}return!0}function yX(r,e,t){var i=uU(r),n=uU(e);function s(z,$,j,G,Y){(j||z)&&$.animateFrom({style:j&&j!==z?kt(kt({},j.style),z.style):z.style},Y)}var u=!1,a=qRe,h=Mr(),p=Mr();i.forEach(function(z){z.groupId&&h.set(z.groupId,!0),z.childGroupId&&p.set(z.childGroupId,!0)});for(var m=0;m<n.length;m++){var v=n[m].groupId;if(p.get(v)){a=oU;break}var x=n[m].childGroupId;if(x&&h.get(x)){a=sU;break}}function w(z,$){return function(j){var G=j.data,Y=j.dataIndex;return $?G.getId(Y):z?a===oU?j.childGroupId:j.groupId:a===sU?j.childGroupId:j.groupId}}var T=JRe(i,n),C={};if(!T)for(var m=0;m<n.length;m++){var I=n[m],k=I.data.getItemGraphicEl(I.dataIndex);k&&(C[k.id]=!0)}function R(z,$){var j=i[$],G=n[z],Y=G.data.hostModel,Z=j.data.getItemGraphicEl(j.dataIndex),H=G.data.getItemGraphicEl(G.dataIndex);if(Z===H){H&&KRe(H,G.dataIndex,Y);return}Z&&C[Z.id]||H&&(Ig(H),Z?(Ig(Z),pE(Z),u=!0,dE(dp(Z),dp(H),G.divide,Y,z,s)):fE(H,Y,z))}new ch(i,n,w(!0,T),w(!1,T),null,"multiple").update(R).updateManyToOne(function(z,$){var j=n[z],G=j.data,Y=G.hostModel,Z=G.getItemGraphicEl(j.dataIndex),H=un(Ht($,function(re){return i[re].data.getItemGraphicEl(i[re].dataIndex)}),function(re){return re&&re!==Z&&!C[re.id]});Z&&(Ig(Z),H.length?(ue(H,function(re){Ig(re),pE(re)}),u=!0,dE(dp(H),dp(Z),j.divide,Y,z,s)):fE(Z,Y,j.dataIndex))}).updateOneToMany(function(z,$){var j=i[$],G=j.data.getItemGraphicEl(j.dataIndex);if(!(G&&C[G.id])){var Y=un(Ht(z,function(H){return n[H].data.getItemGraphicEl(n[H].dataIndex)}),function(H){return H&&H!==G}),Z=n[z[0]].data.hostModel;Y.length&&(ue(Y,function(H){return Ig(H)}),G?(Ig(G),pE(G),u=!0,dE(dp(G),dp(Y),j.divide,Z,z[0],s)):ue(Y,function(H){return fE(H,Z,z[0])}))}}).updateManyToMany(function(z,$){new ch($,z,function(j){return i[j].data.getId(i[j].dataIndex)},function(j){return n[j].data.getId(n[j].dataIndex)}).update(function(j,G){R(z[j],$[G])}).execute()}).execute(),u&&ue(e,function(z){var $=z.data,j=$.hostModel,G=j&&t.getViewOfSeriesModel(j),Y=Dv("update",j,0);G&&j.isAnimationEnabled()&&Y&&Y.duration>0&&G.group.traverse(function(Z){Z instanceof _i&&!Z.animators.length&&Z.animateFrom({style:{opacity:0}},Y)})})}function cU(r){var e=r.getModel("universalTransition").get("seriesKey");return e||r.id}function hU(r){return Nt(r)?r.sort().join(","):r}function pd(r){if(r.hostModel)return r.hostModel.getModel("universalTransition").get("divideShape")}function QRe(r,e){var t=Mr(),i=Mr(),n=Mr();return ue(r.oldSeries,function(s,u){var a=r.oldDataGroupIds[u],h=r.oldData[u],p=cU(s),m=hU(p);i.set(m,{dataGroupId:a,data:h}),Nt(p)&&ue(p,function(v){n.set(v,{key:m,dataGroupId:a,data:h})})}),ue(e.updatedSeries,function(s){if(s.isUniversalTransitionEnabled()&&s.isAnimationEnabled()){var u=s.get("dataGroupId"),a=s.getData(),h=cU(s),p=hU(h),m=i.get(p);if(m)t.set(p,{oldSeries:[{dataGroupId:m.dataGroupId,divide:pd(m.data),data:m.data}],newSeries:[{dataGroupId:u,divide:pd(a),data:a}]});else if(Nt(h)){var v=[];ue(h,function(T){var C=i.get(T);C.data&&v.push({dataGroupId:C.dataGroupId,divide:pd(C.data),data:C.data})}),v.length&&t.set(p,{oldSeries:v,newSeries:[{dataGroupId:u,data:a,divide:pd(a)}]})}else{var x=n.get(h);if(x){var w=t.get(x.key);w||(w={oldSeries:[{dataGroupId:x.dataGroupId,data:x.data,divide:pd(x.data)}],newSeries:[]},t.set(x.key,w)),w.newSeries.push({dataGroupId:u,data:a,divide:pd(a)})}}}}),t}function dU(r,e){for(var t=0;t<r.length;t++){var i=e.seriesIndex!=null&&e.seriesIndex===r[t].seriesIndex||e.seriesId!=null&&e.seriesId===r[t].id;if(i)return t}}function e3e(r,e,t,i){var n=[],s=[];ue(hn(r.from),function(u){var a=dU(e.oldSeries,u);a>=0&&n.push({dataGroupId:e.oldDataGroupIds[a],data:e.oldData[a],divide:pd(e.oldData[a]),groupIdDim:u.dimension})}),ue(hn(r.to),function(u){var a=dU(t.updatedSeries,u);if(a>=0){var h=t.updatedSeries[a].getData();s.push({dataGroupId:e.oldDataGroupIds[a],data:h,divide:pd(h),groupIdDim:u.dimension})}}),n.length>0&&s.length>0&&yX(n,s,i)}function t3e(r){r.registerUpdateLifecycle("series:beforeupdate",function(e,t,i){ue(hn(i.seriesTransition),function(n){ue(hn(n.to),function(s){for(var u=i.updatedSeries,a=0;a<u.length;a++)(s.seriesIndex!=null&&s.seriesIndex===u[a].seriesIndex||s.seriesId!=null&&s.seriesId===u[a].id)&&(u[a][tS]=!0)})})}),r.registerUpdateLifecycle("series:transition",function(e,t,i){var n=ZRe(t);if(n.oldSeries&&i.updatedSeries&&i.optionChanged){var s=i.seriesTransition;if(s)ue(hn(s),function(w){e3e(w,n,i,t)});else{var u=QRe(n,i);ue(u.keys(),function(w){var T=u.get(w);yX(T.oldSeries,T.newSeries,t)})}ue(i.updatedSeries,function(w){w[tS]&&(w[tS]=!1)})}for(var a=e.getSeries(),h=n.oldSeries=[],p=n.oldDataGroupIds=[],m=n.oldData=[],v=0;v<a.length;v++){var x=a[v].getData();x.count()<_X&&(h.push(a[v]),p.push(a[v].get("dataGroupId")),m.push(x))}})}gi([g1e]);gi([u1e]);gi([V1e,nbe,vbe,nwe,bwe,mSe,WSe,LTe,o2e,m2e,A2e,DMe,iAe,gAe,zAe,UAe,sCe,vCe,DCe,FCe,KCe,zIe]);gi(aEe);gi(NEe);gi(p9);gi(rDe);gi(eZ);gi(uDe);gi(_De);gi(yPe);gi(GPe);gi(kx);gi(lLe);gi(hLe);gi(ALe);gi(zLe);gi(jLe);gi(JLe);gi(dke);gi(Rke);gi(aX);gi(oX);gi(sRe);gi(hX);gi(dX);gi(dRe);gi(MRe);gi(IRe);gi(t3e);gi(Cxe);var xX={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(r,e){(function(t,i){r.exports=i()})(Gp,function t(){var i=typeof self!="undefined"?self:typeof window!="undefined"?window:i!==void 0?i:{},n=!i.document&&!!i.postMessage,s=i.IS_PAPA_WORKER||!1,u={},a=0,h={parse:function(Z,H){var re=(H=H||{}).dynamicTyping||!1;if(Y(re)&&(H.dynamicTypingFunction=re,re={}),H.dynamicTyping=re,H.transform=!!Y(H.transform)&&H.transform,H.worker&&h.WORKERS_SUPPORTED){var ne=function(){if(!h.WORKERS_SUPPORTED)return!1;var me=(Ie=i.URL||i.webkitURL||null,ke=t.toString(),h.BLOB_URL||(h.BLOB_URL=Ie.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ke,")();"],{type:"text/javascript"})))),Se=new i.Worker(me),Ie,ke;return Se.onmessage=R,Se.id=a++,u[Se.id]=Se}();return ne.userStep=H.step,ne.userChunk=H.chunk,ne.userComplete=H.complete,ne.userError=H.error,H.step=Y(H.step),H.chunk=Y(H.chunk),H.complete=Y(H.complete),H.error=Y(H.error),delete H.worker,void ne.postMessage({input:Z,config:H,workerId:ne.id})}var se=null;return h.NODE_STREAM_INPUT,typeof Z=="string"?(Z=function(me){return me.charCodeAt(0)===65279?me.slice(1):me}(Z),se=H.download?new v(H):new w(H)):Z.readable===!0&&Y(Z.read)&&Y(Z.on)?se=new T(H):(i.File&&Z instanceof File||Z instanceof Object)&&(se=new x(H)),se.stream(Z)},unparse:function(Z,H){var re=!1,ne=!0,se=",",me=`\r
`,Se='"',Ie=Se+Se,ke=!1,Fe=null,Ce=!1;(function(){if(typeof H=="object"){if(typeof H.delimiter!="string"||h.BAD_DELIMITERS.filter(function(et){return H.delimiter.indexOf(et)!==-1}).length||(se=H.delimiter),(typeof H.quotes=="boolean"||typeof H.quotes=="function"||Array.isArray(H.quotes))&&(re=H.quotes),typeof H.skipEmptyLines!="boolean"&&typeof H.skipEmptyLines!="string"||(ke=H.skipEmptyLines),typeof H.newline=="string"&&(me=H.newline),typeof H.quoteChar=="string"&&(Se=H.quoteChar),typeof H.header=="boolean"&&(ne=H.header),Array.isArray(H.columns)){if(H.columns.length===0)throw new Error("Option columns is empty");Fe=H.columns}H.escapeChar!==void 0&&(Ie=H.escapeChar+Se),(typeof H.escapeFormulae=="boolean"||H.escapeFormulae instanceof RegExp)&&(Ce=H.escapeFormulae instanceof RegExp?H.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var We=new RegExp(I(Se),"g");if(typeof Z=="string"&&(Z=JSON.parse(Z)),Array.isArray(Z)){if(!Z.length||Array.isArray(Z[0]))return gt(null,Z,ke);if(typeof Z[0]=="object")return gt(Fe||Object.keys(Z[0]),Z,ke)}else if(typeof Z=="object")return typeof Z.data=="string"&&(Z.data=JSON.parse(Z.data)),Array.isArray(Z.data)&&(Z.fields||(Z.fields=Z.meta&&Z.meta.fields||Fe),Z.fields||(Z.fields=Array.isArray(Z.data[0])?Z.fields:typeof Z.data[0]=="object"?Object.keys(Z.data[0]):[]),Array.isArray(Z.data[0])||typeof Z.data[0]=="object"||(Z.data=[Z.data])),gt(Z.fields||[],Z.data||[],ke);throw new Error("Unable to serialize unrecognized input");function gt(et,ht,$e){var He="";typeof et=="string"&&(et=JSON.parse(et)),typeof ht=="string"&&(ht=JSON.parse(ht));var dt=Array.isArray(et)&&0<et.length,nt=!Array.isArray(ht[0]);if(dt&&ne){for(var vt=0;vt<et.length;vt++)0<vt&&(He+=se),He+=St(et[vt],vt);0<ht.length&&(He+=me)}for(var Pt=0;Pt<ht.length;Pt++){var jt=dt?et.length:ht[Pt].length,Et=!1,Wt=dt?Object.keys(ht[Pt]).length===0:ht[Pt].length===0;if($e&&!dt&&(Et=$e==="greedy"?ht[Pt].join("").trim()==="":ht[Pt].length===1&&ht[Pt][0].length===0),$e==="greedy"&&dt){for(var Re=[],Ve=0;Ve<jt;Ve++){var Ue=nt?et[Ve]:Ve;Re.push(ht[Pt][Ue])}Et=Re.join("").trim()===""}if(!Et){for(var Be=0;Be<jt;Be++){0<Be&&!Wt&&(He+=se);var ce=dt&&nt?et[Be]:Be;He+=St(ht[Pt][ce],Be)}Pt<ht.length-1&&(!$e||0<jt&&!Wt)&&(He+=me)}}return He}function St(et,ht){if(et==null)return"";if(et.constructor===Date)return JSON.stringify(et).slice(1,25);var $e=!1;Ce&&typeof et=="string"&&Ce.test(et)&&(et="'"+et,$e=!0);var He=et.toString().replace(We,Ie);return($e=$e||re===!0||typeof re=="function"&&re(et,ht)||Array.isArray(re)&&re[ht]||function(dt,nt){for(var vt=0;vt<nt.length;vt++)if(-1<dt.indexOf(nt[vt]))return!0;return!1}(He,h.BAD_DELIMITERS)||-1<He.indexOf(se)||He.charAt(0)===" "||He.charAt(He.length-1)===" ")?Se+He+Se:He}}};if(h.RECORD_SEP=String.fromCharCode(30),h.UNIT_SEP=String.fromCharCode(31),h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!n&&!!i.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=k,h.ParserHandle=C,h.NetworkStreamer=v,h.FileStreamer=x,h.StringStreamer=w,h.ReadableStreamStreamer=T,i.jQuery){var p=i.jQuery;p.fn.parse=function(Z){var H=Z.config||{},re=[];return this.each(function(me){if(!(p(this).prop("tagName").toUpperCase()==="INPUT"&&p(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var Se=0;Se<this.files.length;Se++)re.push({file:this.files[Se],inputElem:this,instanceConfig:p.extend({},H)})}),ne(),this;function ne(){if(re.length!==0){var me,Se,Ie,ke,Fe=re[0];if(Y(Z.before)){var Ce=Z.before(Fe.file,Fe.inputElem);if(typeof Ce=="object"){if(Ce.action==="abort")return me="AbortError",Se=Fe.file,Ie=Fe.inputElem,ke=Ce.reason,void(Y(Z.error)&&Z.error({name:me},Se,Ie,ke));if(Ce.action==="skip")return void se();typeof Ce.config=="object"&&(Fe.instanceConfig=p.extend(Fe.instanceConfig,Ce.config))}else if(Ce==="skip")return void se()}var We=Fe.instanceConfig.complete;Fe.instanceConfig.complete=function(gt){Y(We)&&We(gt,Fe.file,Fe.inputElem),se()},h.parse(Fe.file,Fe.instanceConfig)}else Y(Z.complete)&&Z.complete()}function se(){re.splice(0,1),ne()}}}function m(Z){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(H){var re=j(H);re.chunkSize=parseInt(re.chunkSize),H.step||H.chunk||(re.chunkSize=null),this._handle=new C(re),(this._handle.streamer=this)._config=re}.call(this,Z),this.parseChunk=function(H,re){if(this.isFirstChunk&&Y(this._config.beforeFirstChunk)){var ne=this._config.beforeFirstChunk(H);ne!==void 0&&(H=ne)}this.isFirstChunk=!1,this._halted=!1;var se=this._partialLine+H;this._partialLine="";var me=this._handle.parse(se,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var Se=me.meta.cursor;this._finished||(this._partialLine=se.substring(Se-this._baseIndex),this._baseIndex=Se),me&&me.data&&(this._rowCount+=me.data.length);var Ie=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)i.postMessage({results:me,workerId:h.WORKER_ID,finished:Ie});else if(Y(this._config.chunk)&&!re){if(this._config.chunk(me,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);me=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(me.data),this._completeResults.errors=this._completeResults.errors.concat(me.errors),this._completeResults.meta=me.meta),this._completed||!Ie||!Y(this._config.complete)||me&&me.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Ie||me&&me.meta.paused||this._nextChunk(),me}this._halted=!0},this._sendError=function(H){Y(this._config.error)?this._config.error(H):s&&this._config.error&&i.postMessage({workerId:h.WORKER_ID,error:H,finished:!1})}}function v(Z){var H;(Z=Z||{}).chunkSize||(Z.chunkSize=h.RemoteChunkSize),m.call(this,Z),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(re){this._input=re,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(H=new XMLHttpRequest,this._config.withCredentials&&(H.withCredentials=this._config.withCredentials),n||(H.onload=G(this._chunkLoaded,this),H.onerror=G(this._chunkError,this)),H.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var re=this._config.downloadRequestHeaders;for(var ne in re)H.setRequestHeader(ne,re[ne])}if(this._config.chunkSize){var se=this._start+this._config.chunkSize-1;H.setRequestHeader("Range","bytes="+this._start+"-"+se)}try{H.send(this._config.downloadRequestBody)}catch(me){this._chunkError(me.message)}n&&H.status===0&&this._chunkError()}},this._chunkLoaded=function(){H.readyState===4&&(H.status<200||400<=H.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:H.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(re){var ne=re.getResponseHeader("Content-Range");return ne===null?-1:parseInt(ne.substring(ne.lastIndexOf("/")+1))}(H),this.parseChunk(H.responseText)))},this._chunkError=function(re){var ne=H.statusText||re;this._sendError(new Error(ne))}}function x(Z){var H,re;(Z=Z||{}).chunkSize||(Z.chunkSize=h.LocalChunkSize),m.call(this,Z);var ne=typeof FileReader!="undefined";this.stream=function(se){this._input=se,re=se.slice||se.webkitSlice||se.mozSlice,ne?((H=new FileReader).onload=G(this._chunkLoaded,this),H.onerror=G(this._chunkError,this)):H=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var se=this._input;if(this._config.chunkSize){var me=Math.min(this._start+this._config.chunkSize,this._input.size);se=re.call(se,this._start,me)}var Se=H.readAsText(se,this._config.encoding);ne||this._chunkLoaded({target:{result:Se}})},this._chunkLoaded=function(se){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(se.target.result)},this._chunkError=function(){this._sendError(H.error)}}function w(Z){var H;m.call(this,Z=Z||{}),this.stream=function(re){return H=re,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var re,ne=this._config.chunkSize;return ne?(re=H.substring(0,ne),H=H.substring(ne)):(re=H,H=""),this._finished=!H,this.parseChunk(re)}}}function T(Z){m.call(this,Z=Z||{});var H=[],re=!0,ne=!1;this.pause=function(){m.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){m.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(se){this._input=se,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ne&&H.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),H.length?this.parseChunk(H.shift()):re=!0},this._streamData=G(function(se){try{H.push(typeof se=="string"?se:se.toString(this._config.encoding)),re&&(re=!1,this._checkIsFinished(),this.parseChunk(H.shift()))}catch(me){this._streamError(me)}},this),this._streamError=G(function(se){this._streamCleanUp(),this._sendError(se)},this),this._streamEnd=G(function(){this._streamCleanUp(),ne=!0,this._streamData("")},this),this._streamCleanUp=G(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function C(Z){var H,re,ne,se=Math.pow(2,53),me=-se,Se=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Ie=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ke=this,Fe=0,Ce=0,We=!1,gt=!1,St=[],et={data:[],errors:[],meta:{}};if(Y(Z.step)){var ht=Z.step;Z.step=function(Pt){if(et=Pt,dt())He();else{if(He(),et.data.length===0)return;Fe+=Pt.data.length,Z.preview&&Fe>Z.preview?re.abort():(et.data=et.data[0],ht(et,ke))}}}function $e(Pt){return Z.skipEmptyLines==="greedy"?Pt.join("").trim()==="":Pt.length===1&&Pt[0].length===0}function He(){return et&&ne&&(vt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),ne=!1),Z.skipEmptyLines&&(et.data=et.data.filter(function(Pt){return!$e(Pt)})),dt()&&function(){if(!et)return;function Pt(Et,Wt){Y(Z.transformHeader)&&(Et=Z.transformHeader(Et,Wt)),St.push(Et)}if(Array.isArray(et.data[0])){for(var jt=0;dt()&&jt<et.data.length;jt++)et.data[jt].forEach(Pt);et.data.splice(0,1)}else et.data.forEach(Pt)}(),function(){if(!et||!Z.header&&!Z.dynamicTyping&&!Z.transform)return et;function Pt(Et,Wt){var Re,Ve=Z.header?{}:[];for(Re=0;Re<Et.length;Re++){var Ue=Re,Be=Et[Re];Z.header&&(Ue=Re>=St.length?"__parsed_extra":St[Re]),Z.transform&&(Be=Z.transform(Be,Ue)),Be=nt(Ue,Be),Ue==="__parsed_extra"?(Ve[Ue]=Ve[Ue]||[],Ve[Ue].push(Be)):Ve[Ue]=Be}return Z.header&&(Re>St.length?vt("FieldMismatch","TooManyFields","Too many fields: expected "+St.length+" fields but parsed "+Re,Ce+Wt):Re<St.length&&vt("FieldMismatch","TooFewFields","Too few fields: expected "+St.length+" fields but parsed "+Re,Ce+Wt)),Ve}var jt=1;return!et.data.length||Array.isArray(et.data[0])?(et.data=et.data.map(Pt),jt=et.data.length):et.data=Pt(et.data,0),Z.header&&et.meta&&(et.meta.fields=St),Ce+=jt,et}()}function dt(){return Z.header&&St.length===0}function nt(Pt,jt){return Et=Pt,Z.dynamicTypingFunction&&Z.dynamicTyping[Et]===void 0&&(Z.dynamicTyping[Et]=Z.dynamicTypingFunction(Et)),(Z.dynamicTyping[Et]||Z.dynamicTyping)===!0?jt==="true"||jt==="TRUE"||jt!=="false"&&jt!=="FALSE"&&(function(Wt){if(Se.test(Wt)){var Re=parseFloat(Wt);if(me<Re&&Re<se)return!0}return!1}(jt)?parseFloat(jt):Ie.test(jt)?new Date(jt):jt===""?null:jt):jt;var Et}function vt(Pt,jt,Et,Wt){var Re={type:Pt,code:jt,message:Et};Wt!==void 0&&(Re.row=Wt),et.errors.push(Re)}this.parse=function(Pt,jt,Et){var Wt=Z.quoteChar||'"';if(Z.newline||(Z.newline=function(Ue,Be){Ue=Ue.substring(0,1048576);var ce=new RegExp(I(Be)+"([^]*?)"+I(Be),"gm"),ye=(Ue=Ue.replace(ce,"")).split("\r"),De=Ue.split(`
`),qe=1<De.length&&De[0].length<ye[0].length;if(ye.length===1||qe)return`
`;for(var Ze=0,Je=0;Je<ye.length;Je++)ye[Je][0]===`
`&&Ze++;return Ze>=ye.length/2?`\r
`:"\r"}(Pt,Wt)),ne=!1,Z.delimiter)Y(Z.delimiter)&&(Z.delimiter=Z.delimiter(Pt),et.meta.delimiter=Z.delimiter);else{var Re=function(Ue,Be,ce,ye,De){var qe,Ze,Je,xt;De=De||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var ot=0;ot<De.length;ot++){var bt=De[ot],qt=0,Kt=0,Cr=0;Je=void 0;for(var Rr=new k({comments:ye,delimiter:bt,newline:Be,preview:10}).parse(Ue),Ur=0;Ur<Rr.data.length;Ur++)if(ce&&$e(Rr.data[Ur]))Cr++;else{var Kr=Rr.data[Ur].length;Kt+=Kr,Je!==void 0?0<Kr&&(qt+=Math.abs(Kr-Je),Je=Kr):Je=Kr}0<Rr.data.length&&(Kt/=Rr.data.length-Cr),(Ze===void 0||qt<=Ze)&&(xt===void 0||xt<Kt)&&1.99<Kt&&(Ze=qt,qe=bt,xt=Kt)}return{successful:!!(Z.delimiter=qe),bestDelimiter:qe}}(Pt,Z.newline,Z.skipEmptyLines,Z.comments,Z.delimitersToGuess);Re.successful?Z.delimiter=Re.bestDelimiter:(ne=!0,Z.delimiter=h.DefaultDelimiter),et.meta.delimiter=Z.delimiter}var Ve=j(Z);return Z.preview&&Z.header&&Ve.preview++,H=Pt,re=new k(Ve),et=re.parse(H,jt,Et),He(),We?{meta:{paused:!0}}:et||{meta:{paused:!1}}},this.paused=function(){return We},this.pause=function(){We=!0,re.abort(),H=Y(Z.chunk)?"":H.substring(re.getCharIndex())},this.resume=function(){ke.streamer._halted?(We=!1,ke.streamer.parseChunk(H,!0)):setTimeout(ke.resume,3)},this.aborted=function(){return gt},this.abort=function(){gt=!0,re.abort(),et.meta.aborted=!0,Y(Z.complete)&&Z.complete(et),H=""}}function I(Z){return Z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function k(Z){var H,re=(Z=Z||{}).delimiter,ne=Z.newline,se=Z.comments,me=Z.step,Se=Z.preview,Ie=Z.fastMode,ke=H=Z.quoteChar===void 0||Z.quoteChar===null?'"':Z.quoteChar;if(Z.escapeChar!==void 0&&(ke=Z.escapeChar),(typeof re!="string"||-1<h.BAD_DELIMITERS.indexOf(re))&&(re=","),se===re)throw new Error("Comment character same as delimiter");se===!0?se="#":(typeof se!="string"||-1<h.BAD_DELIMITERS.indexOf(se))&&(se=!1),ne!==`
`&&ne!=="\r"&&ne!==`\r
`&&(ne=`
`);var Fe=0,Ce=!1;this.parse=function(We,gt,St){if(typeof We!="string")throw new Error("Input must be a string");var et=We.length,ht=re.length,$e=ne.length,He=se.length,dt=Y(me),nt=[],vt=[],Pt=[],jt=Fe=0;if(!We)return ei();if(Z.header&&!gt){var Et=We.split(ne)[0].split(re),Wt=[],Re={},Ve=!1;for(var Ue in Et){var Be=Et[Ue];Y(Z.transformHeader)&&(Be=Z.transformHeader(Be,Ue));var ce=Be,ye=Re[Be]||0;for(0<ye&&(Ve=!0,ce=Be+"_"+ye),Re[Be]=ye+1;Wt.includes(ce);)ce=ce+"_"+ye;Wt.push(ce)}if(Ve){var De=We.split(ne);De[0]=Wt.join(re),We=De.join(ne)}}if(Ie||Ie!==!1&&We.indexOf(H)===-1){for(var qe=We.split(ne),Ze=0;Ze<qe.length;Ze++){if(Pt=qe[Ze],Fe+=Pt.length,Ze!==qe.length-1)Fe+=ne.length;else if(St)return ei();if(!se||Pt.substring(0,He)!==se){if(dt){if(nt=[],Cr(Pt.split(re)),fi(),Ce)return ei()}else Cr(Pt.split(re));if(Se&&Se<=Ze)return nt=nt.slice(0,Se),ei(!0)}}return ei()}for(var Je=We.indexOf(re,Fe),xt=We.indexOf(ne,Fe),ot=new RegExp(I(ke)+I(H),"g"),bt=We.indexOf(H,Fe);;)if(We[Fe]!==H)if(se&&Pt.length===0&&We.substring(Fe,Fe+He)===se){if(xt===-1)return ei();Fe=xt+$e,xt=We.indexOf(ne,Fe),Je=We.indexOf(re,Fe)}else if(Je!==-1&&(Je<xt||xt===-1))Pt.push(We.substring(Fe,Je)),Fe=Je+ht,Je=We.indexOf(re,Fe);else{if(xt===-1)break;if(Pt.push(We.substring(Fe,xt)),Kr(xt+$e),dt&&(fi(),Ce))return ei();if(Se&&nt.length>=Se)return ei(!0)}else for(bt=Fe,Fe++;;){if((bt=We.indexOf(H,bt+1))===-1)return St||vt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:nt.length,index:Fe}),Ur();if(bt===et-1)return Ur(We.substring(Fe,bt).replace(ot,H));if(H!==ke||We[bt+1]!==ke){if(H===ke||bt===0||We[bt-1]!==ke){Je!==-1&&Je<bt+1&&(Je=We.indexOf(re,bt+1)),xt!==-1&&xt<bt+1&&(xt=We.indexOf(ne,bt+1));var qt=Rr(xt===-1?Je:Math.min(Je,xt));if(We.substr(bt+1+qt,ht)===re){Pt.push(We.substring(Fe,bt).replace(ot,H)),We[Fe=bt+1+qt+ht]!==H&&(bt=We.indexOf(H,Fe)),Je=We.indexOf(re,Fe),xt=We.indexOf(ne,Fe);break}var Kt=Rr(xt);if(We.substring(bt+1+Kt,bt+1+Kt+$e)===ne){if(Pt.push(We.substring(Fe,bt).replace(ot,H)),Kr(bt+1+Kt+$e),Je=We.indexOf(re,Fe),bt=We.indexOf(H,Fe),dt&&(fi(),Ce))return ei();if(Se&&nt.length>=Se)return ei(!0);break}vt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:nt.length,index:Fe}),bt++}}else bt++}return Ur();function Cr(Ti){nt.push(Ti),jt=Fe}function Rr(Ti){var wn=0;if(Ti!==-1){var Ki=We.substring(bt+1,Ti);Ki&&Ki.trim()===""&&(wn=Ki.length)}return wn}function Ur(Ti){return St||(Ti===void 0&&(Ti=We.substring(Fe)),Pt.push(Ti),Fe=et,Cr(Pt),dt&&fi()),ei()}function Kr(Ti){Fe=Ti,Cr(Pt),Pt=[],xt=We.indexOf(ne,Fe)}function ei(Ti){return{data:nt,errors:vt,meta:{delimiter:re,linebreak:ne,aborted:Ce,truncated:!!Ti,cursor:jt+(gt||0)}}}function fi(){me(ei()),nt=[],vt=[]}},this.abort=function(){Ce=!0},this.getCharIndex=function(){return Fe}}function R(Z){var H=Z.data,re=u[H.workerId],ne=!1;if(H.error)re.userError(H.error,H.file);else if(H.results&&H.results.data){var se={abort:function(){ne=!0,z(H.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:$,resume:$};if(Y(re.userStep)){for(var me=0;me<H.results.data.length&&(re.userStep({data:H.results.data[me],errors:H.results.errors,meta:H.results.meta},se),!ne);me++);delete H.results}else Y(re.userChunk)&&(re.userChunk(H.results,se,H.file),delete H.results)}H.finished&&!ne&&z(H.workerId,H.results)}function z(Z,H){var re=u[Z];Y(re.userComplete)&&re.userComplete(H),re.terminate(),delete u[Z]}function $(){throw new Error("Not implemented.")}function j(Z){if(typeof Z!="object"||Z===null)return Z;var H=Array.isArray(Z)?[]:{};for(var re in Z)H[re]=j(Z[re]);return H}function G(Z,H){return function(){Z.apply(H,arguments)}}function Y(Z){return typeof Z=="function"}return s&&(i.onmessage=function(Z){var H=Z.data;if(h.WORKER_ID===void 0&&H&&(h.WORKER_ID=H.workerId),typeof H.input=="string")i.postMessage({workerId:h.WORKER_ID,results:h.parse(H.input,H.config),finished:!0});else if(i.File&&H.input instanceof File||H.input instanceof Object){var re=h.parse(H.input,H.config);re&&i.postMessage({workerId:h.WORKER_ID,results:re,finished:!0})}}),(v.prototype=Object.create(m.prototype)).constructor=v,(x.prototype=Object.create(m.prototype)).constructor=x,(w.prototype=Object.create(w.prototype)).constructor=w,(T.prototype=Object.create(m.prototype)).constructor=T,h})})(xX);var r3e=xX.exports;const i3e={name:"EChartsComponent",props:{chartType:{type:String,required:!0},dataUrl:{type:String,required:!0},xColumn:{type:String,required:!0},yColumn:{type:String,required:!0},width:{type:[String,Number],required:!0},height:{type:[String,Number],required:!0}},data(){return{chartInstance:null}},watch:{dataUrl:{immediate:!0,handler(r){this.loadData(r)}}},mounted(){this.chartInstance=Uye(this.$refs.chart)},beforeUnmount(){this.chartInstance&&this.chartInstance.dispose()},methods:{async loadData(r){try{const t=await(await fetch(r)).text();r3e.parse(t,{header:!0,dynamicTyping:!0,complete:i=>{this.createChart(i.data)}})}catch(e){console.error("Error loading data:",e)}},createChart(r){const e=r.filter(u=>{const a=String(u[this.xColumn]).toLowerCase(),h=String(u.HTDD).toLowerCase(),p=String(u[this.yColumn]).toLowerCase();return a!=="undefined"&&p!=="null"&&h!=="null"}),t=e.map(u=>u[this.xColumn]),i=e.map(u=>{const a=parseFloat(u.HTDD);return isNaN(a)?null:a}),n=e.map(u=>{const a=parseFloat(u[this.yColumn]);return isNaN(a)?null:a}),s={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:["Monthly HDD","Temperature"]},xAxis:[{type:"category",data:t,axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"HDD (Millimeters)",min:0,max:6e3,interval:600,axisLabel:{formatter:"{value} m"}},{type:"value",name:"Temperature",min:0,max:25,interval:5,axisLabel:{formatter:"{value} \xB0C"}}],series:[{name:"Monthly HDD",type:"bar",data:i},{name:"Temperature",type:"line",yAxisIndex:1,data:n}]};this.chartInstance.setOption(s)}}};function n3e(r,e,t,i,n,s){return Yt(),lr("div",{ref:"chart",style:bo({width:t.width+"px",height:t.height+"px"})},null,4)}var a3e=ph(i3e,[["render",n3e],["__scopeId","data-v-697057e2"]]);function o3e(r,e){for(let t=0;t<r.length;t++){const i=r[t];if(i.coordinates[0]===e[0]&&i.coordinates[1]===e[1])return!0}return!1}const TR=r=>(ree("data-v-d0b176cc"),r=r(),iee(),r),s3e={id:"map-container"},l3e=TR(()=>ie("div",{id:"map"},null,-1)),u3e={class:"container text-center"},c3e=TR(()=>ie("div",{class:"title"},"5 Day Weather Forecast",-1)),h3e={class:"text-list"},d3e={class:"weather-info"},f3e=["src"],p3e=TR(()=>ie("br",null,null,-1)),m3e={name:"StationTemp",setup(r){const e=Kp({map:null,markers:[],addedMarkers:[],isFloatWindowVisible:!1,chartType:"line",dataUrl:["../../data/uk_climate/UK000000000.csv","../../data/uk_climate/UK000003005.csv","../../data/uk_climate/UK000003026.csv","../../data/uk_climate/UK000003162.csv","../../data/uk_climate/UK000003302.csv","../../data/uk_climate/UK000003377.csv"],ColumnNameForX:"DATE",ColumnNameForY:"TAVG",chartWidth:800,chartHeight:300,openWeatherAPI:"51a4229e709d79b1b3f625724a2a8a25",forecastGroupedByDate:[]}),t={};en(()=>{n(),window.addEventListener("resize",m)}),GP(()=>{window.removeEventListener("resize",m)});function i(I){e.isFloatWindowVisible=I}function n(){hy.accessToken="pk.eyJ1IjoieDBsZW0iLCJhIjoiY2xyaHA2ejVkMDFsejJrcG43MDA3bjBsaiJ9.Q5hsTi_sqF2QKkZjsII_Ag",e.map=new hy.Map({container:"map",style:"mapbox://styles/mapbox/dark-v10",center:[-4.83,54.42],zoom:5.1}),e.map.scrollZoom.disable(),e.map.dragRotate.disable(),e.map.touchZoomRotate.disableRotation(),e.map.addControl(new hy.NavigationControl),e.map.on("load",()=>{s(e.map)})}function s(){u(),e.dataUrl.forEach(I=>{a(I)})}function u(){fetch("../../data/uk-counties_1682.geojson").then(I=>I.json()).then(I=>{e.map.addSource("gbp-data",{type:"geojson",data:I}),e.map.addLayer({id:"gbp-layer",type:"fill",source:"gbp-data",layout:{},paint:{"fill-color":"#E1FFFF","fill-opacity":.6}})}).catch(I=>console.error("Error loading the boundary layer:",I))}function a(I){Ade(I).then(k=>{e.markers=k.map(R=>{const z=k.map(Z=>+Z.TMAX),$=k.map(Z=>+Z.EMNT),j=mde(z),G=gde($),Y=`chart-${R.STATION}`;return{coordinates:[parseFloat(R.LONGITUDE),parseFloat(R.LATITUDE)],popupContent:`<div class="popup-content"><h3>All-time low temperature: ${G}\xB0C<br/>All-time high temperature: ${j}\xB0C</h3><p>Historical average annual temperature</p><div id="${Y}"></div></div>`,id:R.DATE,chartContainerId:Y,dataUrl:I}}),h()}).catch(k=>console.error("Error loading CSV data:",k))}function h(){e.markers.forEach(I=>{if(!o3e(e.addedMarkers,I.coordinates)){const k=document.createElement("div"),R=document.createElement("img");R.src="../../img/station.png",R.style.width="50px",R.style.height="50px",k.appendChild(R);const z=new hy.Popup({maxWidth:"1920px"}).setHTML(I.popupContent);new hy.Marker(k).setLngLat(I.coordinates).setPopup(z).addTo(e.map),e.addedMarkers.push(I),z.on("open",()=>{p(I.chartContainerId,I.dataUrl)}),k.addEventListener("click",()=>{T(I.coordinates[1],I.coordinates[0])})}})}function p(I,k){const R=document.getElementById(I);if(R&&!t[I]){const z=f8(a3e,{chartType:e.chartType,dataUrl:k,xColumn:e.ColumnNameForX,yColumn:e.ColumnNameForY,width:e.chartWidth,height:e.chartHeight});t[I]=z,z.mount(R)}}function m(){e.chartWidth=window.innerWidth/2.5,e.chartHeight=window.innerHeight/4}function v(I){return new Date(I*1e3).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"})}function x(I){const k={};return I.forEach(R=>{const z=v(R.dt);k[z]||(k[z]=R)}),k}function w(I){const k=[];return Object.keys(I).forEach(R=>{const z=I[R],$=z.main.feels_like.toFixed(2)+"\xB0C",j=z.weather[0].description;k.push(`${R} : ${$} : ${j}`)}),k}function T(I,k){const R=`https://api.openweathermap.org/data/2.5/forecast?lat=${I}&lon=${k}&appid=${e.openWeatherAPI}&units=metric`;fetch(R).then(z=>{if(!z.ok)throw new Error(`HTTP error! status: ${z.status}`);return z.json()}).then(z=>{const $=x(z.list);e.forecastGroupedByDate=w($)}).catch(z=>{console.error("Failed to fetch weather data:",z)})}function C(I){return{"scattered ":"../../img/weather_icons/sun_rain.png","light rain":"../../img/weather_icons/rain.png","overcast clouds":"../../img/weather_icons/going_rain.png","clear sky":"../../img/weather_icons/sun.png","few clouds":"../../img/weather_icons/few_clouds.png"}[I]||"../../img/weather_icons/going_rain.png"}return(I,k)=>(Yt(),lr("div",s3e,[l3e,Me(Ede,{initialVisible:e.isFloatWindowVisible,"onUpdate:visible":i},null,8,["initialVisible"]),ie("div",{class:$r(["left-float-window",{hidden:!e.isFloatWindowVisible}])},[ie("div",u3e,[c3e,ie("div",h3e,[(Yt(!0),lr(Hn,null,a0(e.forecastGroupedByDate,(R,z)=>(Yt(),lr("div",{key:z,class:"date-group"},[ie("div",d3e,Pi(R),1),ie("img",{src:C(R.split(" : ")[2]),alt:"Weather Image",class:"weather-image"},null,8,f3e),p3e]))),128))])])],2)]))}};var g3e=ph(m3e,[["__scopeId","data-v-d0b176cc"]]);const v3e=`<script setup>
import { onMounted } from "vue";

// Sections components
import BaseLayout from "../../components/BaseLayout.vue";
import View from "../../components/View.vue";

import IndMap from "./components/StationTemp.vue"
// Headers page components codes
import { header1Code } from "./components/codes";

// nav-pills
import setNavPills from "@/assets/js/nav-pills.js";

// hook
onMounted(() => {
  setNavPills();
});
<\/script>

<template>
  <BaseLayout
    title="Station temperature overview"
    :breadcrumb="[
      { label: 'Pages', route: '/' },
      { label: 'UK Stations' },
    ]"
  >
    <View title="View" :code="header1Code" id="header-1">
      <IndMap />
    </View>
  </BaseLayout>
</template>
`,_3e={name:"TestMap",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Station temperature overview",breadcrumb:[{label:"Pages",route:"/"},{label:"UK Stations"}]},{default:Xe(()=>[Me(zi,{title:"View",code:zt(v3e),id:"header-1"},{default:Xe(()=>[Me(g3e)]),_:1},8,["code"])]),_:1}))}},y3e={class:"p-3 info-horizontal d-flex align-items-center"},x3e={class:"description ps-3"},b3e=["innerHTML"],mE={name:"AboutUsOption",props:{variant:{type:String,default:"gradient"},color:{type:String,default:"success"},size:{type:String,default:"md"},icon:{type:[String,Object],required:!0,component:String,color:String},content:{type:String,required:!0}},setup(r){function e(t,i){let n;return t==="gradient"?n="bg-gradient-"+i:t==="contained"&&(n="bg-"+i),n}return(t,i)=>(Yt(),lr("div",y3e,[ie("div",{class:$r(["icon icon-shape text-center border-radius-xl",`icon-${r.size} ${e(r.variant,r.color)} shadow-${r.color}`])},[ie("i",{class:$r(["material-icons opacity-10",typeof r.icon=="object"?r.icon.color:""])},Pi(typeof r.icon=="string"?r.icon:r.icon.component),3)],2),ie("div",x3e,[ie("p",{class:"mb-0",innerHTML:r.content},null,8,b3e)])]))}},w3e={class:"py-9"},S3e={class:"container"},T3e={class:"row"},M3e=ie("div",{class:"col-lg-6 my-auto"},[ie("h3",null,"Read More About Us"),ie("p",{class:"pe-5"}," Pain is what we go through as we become older. We get insulted by others, lose trust for those others. We get back stabbed by friends. It becomes harder for us to give others a hand. "),ie("a",{href:"javascript:;",class:"text-success icon-move-right"},[mt("More about us "),ie("i",{class:"fas fa-arrow-right text-sm ms-1"})])],-1),A3e={class:"col-lg-6 mt-lg-0 mt-5 ps-lg-0 ps-0"},C3e={name:"FeatureOne",setup(r){return(e,t)=>(Yt(),lr("section",w3e,[ie("div",S3e,[ie("div",T3e,[M3e,ie("div",A3e,[Me(mE,{icon:"mediation",content:`It becomes harder for us to give others a hand.<br />\r
            We get our heart broken by people we love.`}),Me(mE,{icon:"settings_overscan",content:`As we live, our hearts turn colder.<br />\r
            Cause pain is what we go through as we become older.`}),Me(mE,{icon:"token",content:`When we lose family over\r
            time. <br />\r
            What else could rust the heart more over time? Blackgold.`})])])])]))}},I3e=`<script setup>
import AboutUsOption from "@/views/LandingPages/Components/AboutUsOption.vue";
<\/script>
<template>
  <section class="py-9">
    <div class="container">
      <div class="row">
        <div class="col-lg-6 my-auto">
          <h3>Read More About Us</h3>
          <p class="pe-5">
            Pain is what we go through as we become older. We get insulted by
            others, lose trust for those others. We get back stabbed by friends.
            It becomes harder for us to give others a hand.
          </p>
          <a href="javascript:;" class="text-success icon-move-right"
            >More about us
            <i class="fas fa-arrow-right text-sm ms-1"></i>
          </a>
        </div>
        <div class="col-lg-6 mt-lg-0 mt-5 ps-lg-0 ps-0">
          <AboutUsOption
            icon="mediation"
            content="It becomes harder for us to give others a hand.<br />
            We get our heart broken by people we love."
          />
          <AboutUsOption
            icon="settings_overscan"
            content="As we live, our hearts turn colder.<br />
            Cause pain is what we go through as we become older."
          />

          <AboutUsOption
            icon="token"
            content="When we lose family over
            time. <br />
            What else could rust the heart more over time? Blackgold."
          />
        </div>
      </div>
    </div>
  </section>
</template>
`,E3e={name:"FeaturesView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Features",breadcrumb:[{label:"Page Sections",route:"/sections/page-sections/page-headers"},{label:"Features"}]},{default:Xe(()=>[Me(zi,{title:"Features 1",code:zt(I3e),id:"feature-1"},{default:Xe(()=>[Me(C3e)]),_:1},8,["code"])]),_:1}))}},D3e={name:"NavbarDark",setup(r){return(e,t)=>(Yt(),Wn(cx,{dark:"",transparent:""}))}},P3e=`<script setup>
// example component
import NavbarDefault from "@/examples/navbars/NavbarDefault.vue";
<\/script>
<template>
  <NavbarDefault dark transparent />
</template>
`,L3e={name:"NavbarsView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Navbars",breadcrumb:[{label:"Navigation",route:"#"},{label:"Navbars"}]},{default:Xe(()=>[Me(zi,{title:"Navbar dark",code:zt(P3e),id:"navbar-dark",height:"300  position-relative"},{default:Xe(()=>[Me(D3e)]),_:1},8,["code"])]),_:1}))}},k3e={},R3e={class:"py-7"},O3e=ie("div",{class:"container"},[ie("div",{class:"row"},[ie("div",{class:"col-lg-4 mx-auto"},[ie("div",{class:"nav-wrapper position-relative end-0"},[ie("ul",{class:"nav nav-pills nav-fill p-1",role:"tablist"},[ie("li",{class:"nav-item"},[ie("a",{class:"nav-link mb-0 px-0 py-1 active","data-bs-toggle":"tab",href:"#profile-tabs-simple",role:"tab","aria-controls":"profile","aria-selected":"true"}," My Profile ")]),ie("li",{class:"nav-item"},[ie("a",{class:"nav-link mb-0 px-0 py-1","data-bs-toggle":"tab",href:"#dashboard-tabs-simple",role:"tab","aria-controls":"dashboard","aria-selected":"false"}," Dashboard ")])])])])])],-1),z3e=[O3e];function B3e(r,e){return Yt(),lr("section",R3e,z3e)}var F3e=ph(k3e,[["render",B3e]]);const N3e=`<script setup>
import { onMounted } from "vue";

// nav-pill
import setNavPills from "@/assets/js/nav-pills.js";

onMounted(() => {
  setNavPills();
});
<\/script>
<template>
  <section class="py-7">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 mx-auto">
          <div class="nav-wrapper position-relative end-0">
            <ul class="nav nav-pills nav-fill p-1" role="tablist">
              <li class="nav-item">
                <a
                  class="nav-link mb-0 px-0 py-1 active"
                  data-bs-toggle="tab"
                  href="#profile-tabs-simple"
                  role="tab"
                  aria-controls="profile"
                  aria-selected="true"
                >
                  My Profile
                </a>
              </li>
              <li class="nav-item">
                <a
                  class="nav-link mb-0 px-0 py-1"
                  data-bs-toggle="tab"
                  href="#dashboard-tabs-simple"
                  role="tab"
                  aria-controls="dashboard"
                  aria-selected="false"
                >
                  Dashboard
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>
</template>
`,V3e={name:"NavTabsView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Nav Tabs",breadcrumb:[{label:"Navigation",route:"#"},{label:"Nav Tabs"}]},{default:Xe(()=>[Me(zi,{title:"Tabs Simple",code:zt(N3e),id:"tabs-simple"},{default:Xe(()=>[Me(F3e)]),_:1},8,["code"])]),_:1}))}},$3e={name:"MaterialPagination",props:{color:{type:String,default:"success"},size:{type:String,default:""}},setup(r){function e(t,i){let n,s;return n=t&&`pagination-${t}`,s=i&&`pagination-${i}`,`${n} ${s}`}return(t,i)=>(Yt(),lr("ul",{class:$r(["pagination",e(r.color,r.size)])},[ru(t.$slots,"default")],2))}},G3e={class:"page-link",href:"javascript:;"},U3e={key:0,class:"fa fa-angle-double-left"},j3e={key:1,class:"fa fa-angle-double-right"},ip={name:"MaterialPaginationItem",props:{label:{type:String,default:""},active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},prev:{type:Boolean,default:!1},next:{type:Boolean,default:!1}},setup(r){function e(t,i){let n,s;return n=t&&"active",s=i&&"disabled",`${n} ${s}`}return(t,i)=>(Yt(),lr("li",{class:$r(["page-item",e(r.active,r.disabled)])},[ie("a",G3e,[ie("span",{"aria-hidden":"true",class:$r(r.active?"text-white":"")},[mt(Pi(r.prev||r.next?null:r.label)+" ",1),r.prev?(Yt(),lr("i",U3e)):kd("",!0),r.next?(Yt(),lr("i",j3e)):kd("",!0)],2)])],2))}},H3e={class:"py-5"},W3e={class:"container"},q3e={class:"row"},Z3e={class:"col-lg-4 mx-auto"},X3e={name:"PaginationSimple",setup(r){return(e,t)=>(Yt(),lr("section",H3e,[ie("div",W3e,[ie("div",q3e,[ie("div",Z3e,[Me($3e,{style:{marginLeft:"80px"}},{default:Xe(()=>[Me(ip,{prev:""}),Me(ip,{label:"1"}),Me(ip,{label:"2",active:""}),Me(ip,{label:"3"}),Me(ip,{label:"4"}),Me(ip,{label:"5"}),Me(ip,{next:""})]),_:1})])])])]))}},Y3e=`<script setup>
//Vue Material Kit 2 components
import MaterialPagination from "@/components/MaterialPagination.vue";
import MaterialPaginationItem from "@/components/MaterialPaginationItem.vue";
<\/script>
<template>
  <section class="py-7">
    <div class="container">
      <div class="row justify-space-between py-2">
        <div class="col-lg-4 mx-auto">
          <MaterialPagination>
            <MaterialPaginationItem prev class="ms-auto" />
            <MaterialPaginationItem label="1" />
            <MaterialPaginationItem label="2" active />
            <MaterialPaginationItem label="3" />
            <MaterialPaginationItem label="4" />
            <MaterialPaginationItem label="5" />
            <MaterialPaginationItem next />
          </MaterialPagination>
        </div>
      </div>
    </div>
  </section>
</template>
`,K3e={name:"PaginationView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Pagination",breadcrumb:[{label:"Navigation",route:"#"},{label:"Pagination"}]},{default:Xe(()=>[Me(zi,{title:"Pagination Simple",code:zt(Y3e),id:"pagination-simple"},{default:Xe(()=>[Me(X3e)]),_:1},8,["code"])]),_:1}))}},J3e={class:"py-7"},Q3e={class:"container"},eOe={class:"row justify-space-between py-2"},tOe={class:"col-lg-4 mx-auto"},rOe={name:"InputStatic",setup(r){return(e,t)=>(Yt(),lr("section",J3e,[ie("div",Q3e,[ie("div",eOe,[ie("div",tOe,[Me(Ja,{class:"input-group-static mb-4",label:"First Name",type:"text",placeholder:"eg. Thomas Shelby"})])])])]))}},iOe={class:"py-7"},nOe={class:"container"},aOe={class:"row justify-space-between py-2"},oOe={class:"col-lg-4 mx-auto"},sOe={name:"InputDynamic",setup(r){return(e,t)=>(Yt(),lr("section",iOe,[ie("div",nOe,[ie("div",aOe,[ie("div",oOe,[Me(Ja,{class:"input-group-dynamic",label:{text:"Regular",class:"form-label"},type:"text"})])])])]))}},lOe={class:"py-7"},uOe={class:"container"},cOe={class:"row justify-space-between py-2"},hOe={class:"col-lg-4 mx-auto"},dOe={name:"InputOutlined",setup(r){return(e,t)=>(Yt(),lr("section",lOe,[ie("div",uOe,[ie("div",cOe,[ie("div",hOe,[Me(Ja,{class:"input-group-outline mb-4",label:{text:"Outline",class:"form-label"},type:"text"})])])])]))}},fOe={class:"py-7"},pOe={class:"container"},mOe={class:"row justify-space-between py-2"},gOe={class:"col-lg-4 mx-auto"},vOe={name:"InputIcon",setup(r){return(e,t)=>(Yt(),lr("section",fOe,[ie("div",pOe,[ie("div",mOe,[ie("div",gOe,[Me(Ja,{class:"input-group-dynamic mb-4",icon:"search",type:"text",placeholder:"Search"})])])])]))}},_Oe={class:"py-7"},yOe={class:"container"},xOe={class:"row justify-space-between py-2"},bOe={class:"col-lg-4 mx-auto"},wOe={name:"InputSuccess",setup(r){return(e,t)=>(Yt(),lr("section",_Oe,[ie("div",yOe,[ie("div",xOe,[ie("div",bOe,[Me(Ja,{type:"text",placeholder:"Success",success:""})])])])]))}},SOe={class:"py-7"},TOe={class:"container"},MOe={class:"row justify-space-between py-2"},AOe={class:"col-lg-4 mx-auto"},COe={name:"InputError",setup(r){return(e,t)=>(Yt(),lr("section",SOe,[ie("div",TOe,[ie("div",MOe,[ie("div",AOe,[Me(Ja,{type:"text",placeholder:"Error",error:""})])])])]))}},IOe={class:"py-7"},EOe={class:"container"},DOe={class:"row justify-space-between py-2"},POe={class:"col-lg-4 mx-auto"},LOe={name:"InputDisabled",setup(r){return(e,t)=>(Yt(),lr("section",IOe,[ie("div",EOe,[ie("div",DOe,[ie("div",POe,[Me(Ja,{type:"text",placeholder:"Disabled",isDisabled:""})])])])]))}},kOe=`<script setup>
//Vue Material Kit 2 components
import MaterialInput from "@/components/MaterialInput.vue";
<\/script>
<template>
  <section class="py-7">
    <div class="container">
      <div class="row justify-space-between py-2">
        <div class="col-lg-4 mx-auto">
          <MaterialInput
            class="input-group-static mb-4"
            label="First Name"
            type="text"
            placeholder="eg. Thomas Shelby"
          />
        </div>
      </div>
    </div>
  </section>
</template>
`,ROe=`<script setup>
//Vue Material Kit 2 components
import MaterialInput from "@/components/MaterialInput.vue";
<\/script>
<template>
  <section class="py-7">
    <div class="container">
      <div class="row justify-space-between py-2">
        <div class="col-lg-4 mx-auto">
          <MaterialInput
            class="input-group-dynamic"
            :label="{ text: 'Regular', class: 'form-label' }"
            type="text"
          />
        </div>
      </div>
    </div>
  </section>
</template>
`,OOe=`<script setup>
//Vue Material Kit 2 components
import MaterialInput from "@/components/MaterialInput.vue";
<\/script>
<template>
  <section class="py-7">
    <div class="container">
      <div class="row justify-space-between py-2">
        <div class="col-lg-4 mx-auto">
          <MaterialInput
            class="input-group-outline mb-4"
            :label="{ text: 'Outline', class: 'form-label' }"
            type="text"
          />
        </div>
      </div>
    </div>
  </section>
</template>
`,zOe=`<script setup>
//Vue Material Kit 2 components
import MaterialInput from "@/components/MaterialInput.vue";
<\/script>
<template>
  <section class="py-7">
    <div class="container">
      <div class="row justify-space-between py-2">
        <div class="col-lg-4 mx-auto">
          <MaterialInput
            class="input-group-dynamic mb-4"
            icon="search"
            type="text"
            placeholder="Search"
          />
        </div>
      </div>
    </div>
  </section>
</template>
`,BOe=`<script setup>
//Vue Material Kit 2 components
import MaterialInput from "@/components/MaterialInput.vue";
<\/script>
<template>
  <section class="py-7">
    <div class="container">
      <div class="row justify-space-between py-2">
        <div class="col-lg-4 mx-auto">
          <MaterialInput
            class="input-group-static mb-4"
            label="First Name"
            type="text"
            placeholder="eg. Thomas Shelby"
          />
        </div>
      </div>
    </div>
  </section>
</template>
`,FOe=`<script setup>
//Vue Material Kit 2 components
import MaterialInput from "@/components/MaterialInput.vue";
<\/script>
<template>
  <section class="py-7">
    <div class="container">
      <div class="row justify-space-between py-2">
        <div class="col-lg-4 mx-auto">
          <MaterialInput type="text" placeholder="Error" error />
        </div>
      </div>
    </div>
  </section>
</template>
`,NOe=`<script setup>
//Vue Material Kit 2 components
import MaterialInput from "@/components/MaterialInput.vue";
<\/script>
<template>
  <section class="py-7">
    <div class="container">
      <div class="row justify-space-between py-2">
        <div class="col-lg-4 mx-auto">
          <MaterialInput type="text" placeholder="Disabled" isDisabled />
        </div>
      </div>
    </div>
  </section>
</template>
`,VOe={name:"InputsView",setup(r){return en(()=>{wa(),Sv()}),(e,t)=>(Yt(),Wn(ba,{title:"Inputs",breadcrumb:[{label:"Input Areas",route:"#"},{label:"Inputs"}]},{default:Xe(()=>[Me(zi,{title:"Input dynamic",code:zt(ROe),id:"input-dynamic"},{default:Xe(()=>[Me(sOe)]),_:1},8,["code"]),Me(zi,{title:"Input static",code:zt(kOe),id:"input-static"},{default:Xe(()=>[Me(rOe)]),_:1},8,["code"]),Me(zi,{title:"Input outline",code:zt(OOe),id:"input-outlined"},{default:Xe(()=>[Me(dOe)]),_:1},8,["code"]),Me(zi,{title:"Input with icon",code:zt(zOe),id:"input-with-icon"},{default:Xe(()=>[Me(vOe)]),_:1},8,["code"]),Me(zi,{title:"Input success",code:zt(BOe),id:"input-success"},{default:Xe(()=>[Me(wOe)]),_:1},8,["code"]),Me(zi,{title:"Input error",code:zt(FOe),id:"input-error"},{default:Xe(()=>[Me(COe)]),_:1},8,["code"]),Me(zi,{title:"Input disabled",code:zt(NOe),id:"input-disabled"},{default:Xe(()=>[Me(LOe)]),_:1},8,["code"])]),_:1}))}},$Oe={class:"container py-7"},GOe={class:"row"},UOe={class:"col-lg-7 mx-auto d-flex justify-content-center flex-column"},jOe=ie("h3",{class:"text-center"},"Contact us",-1),HOe={role:"form",id:"contact-form",method:"post",autocomplete:"off"},WOe={class:"card-body"},qOe={class:"row"},ZOe={class:"col-md-6"},XOe={class:"col-md-6 ps-2"},YOe={class:"mb-4"},KOe=mt("Your message"),JOe={class:"row"},QOe={class:"col-md-12"},eze=mt(" I agree to the "),tze=ie("a",{href:"javascript:;",class:"text-dark"},[ie("u",null,"Terms and Conditions")],-1),rze=mt(". "),ize={class:"col-md-12"},nze=mt("Send Message"),aze={name:"FormSimple",setup(r){return en(()=>{Sv()}),(e,t)=>(Yt(),lr("section",null,[ie("div",$Oe,[ie("div",GOe,[ie("div",UOe,[jOe,ie("form",HOe,[ie("div",WOe,[ie("div",qOe,[ie("div",ZOe,[Me(Ja,{class:"input-group-dynamic mb-4",label:{text:"First Name",class:"form-label"},type:"text"})]),ie("div",XOe,[Me(Ja,{class:"input-group-dynamic",label:{text:"Last Name",class:"form-label"},type:"text"})])]),ie("div",YOe,[Me(Ja,{class:"input-group-dynamic",label:{text:"Email Address",class:"form-label"},type:"email"})]),Me(JP,{class:"input-group-static mb-4",id:"message",rows:4},{default:Xe(()=>[KOe]),_:1})]),ie("div",JOe,[ie("div",QOe,[Me(LT,{class:"mb-4 d-flex align-items-center",id:"flexSwitchCheckDefault",checked:"",labelClass:"ms-3 mb-0"},{default:Xe(()=>[eze,tze,rze]),_:1}),ie("div",ize,[Me(Lr,{type:"submit",variant:"gradient",color:"dark",fullWidth:""},{default:Xe(()=>[nze]),_:1})])])])])])])])]))}},oze=`<script setup>
//Vue Material Kit 2 components
import MaterialInput from "@/components/MaterialInput.vue";
import MaterialTextArea from "@/components/MaterialTextArea.vue";
import MaterialButton from "@/components/MaterialButton.vue";
import MaterialSwitch from "@/components/MaterialSwitch.vue";
<\/script>
<template>
  <section>
    <div class="container py-4">
      <div class="row">
        <div class="col-lg-7 mx-auto d-flex justify-content-center flex-column">
          <h3 class="text-center">Contact us</h3>
          <form role="form" id="contact-form" method="post" autocomplete="off">
            <div class="card-body">
              <div class="row">
                <div class="col-md-6">
                  <MaterialInput
                    class="input-group-dynamic mb-4"
                    :label="{ text: 'First Name', class: 'form-label' }"
                    type="text"
                  />
                </div>
                <div class="col-md-6 ps-2">
                  <MaterialInput
                    class="input-group-dynamic"
                    :label="{ text: 'Last Name', class: 'form-label' }"
                    type="text"
                  />
                </div>
              </div>
              <div class="mb-4">
                <MaterialInput
                  class="input-group-dynamic"
                  :label="{ text: 'Email Address', class: 'form-label' }"
                  type="email"
                />
              </div>
              <MaterialTextArea
                class="input-group-static mb-4"
                id="message"
                :rows="4"
                >Your message</MaterialTextArea
              >
            </div>
            <div class="row">
              <div class="col-md-12">
                <MaterialSwitch
                  class="mb-4 d-flex align-items-center"
                  id="flexSwitchCheckDefault"
                  checked
                  labelClass="ms-3 mb-0"
                >
                  I agree to the
                  <a href="javascript:;" class="text-dark"
                    ><u>Terms and Conditions</u></a
                  >.
                </MaterialSwitch>

                <div class="col-md-12">
                  <MaterialButton
                    type="submit"
                    variant="gradient"
                    color="dark"
                    fullWidth
                    >Send Message</MaterialButton
                  >
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
</template>
`,sze={name:"FormsView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Forms",breadcrumb:[{label:"Input Areas",route:"#"},{label:"Forms"}]},{default:Xe(()=>[Me(zi,{title:"Form simple",code:zt(oze),id:"form-simple",height:"600"},{default:Xe(()=>[Me(aze)]),_:1},8,["code"])]),_:1}))}},lze=mt(" \xA0 "),uze={key:0,type:"button",class:"btn-close text-lg py-3 opacity-10","data-bs-dismiss":"alert","aria-label":"Close"},cze=ie("span",{"aria-hidden":"true",class:"text-lg font-weight-bold"},"\xD7",-1),hze=[cze],sd={name:"MaterialAlert",props:{color:{type:String,default:"success"},dismissible:{type:Boolean,default:!1},fontWeight:{type:String,default:""}},setup(r){function e(t,i,n){let s,u,a;return s=t&&`alert-${t}`,u=i&&"alert-dismissible fade show",a=n&&`font-weight-${n}`,`${s} ${u} ${a}`}return(t,i)=>(Yt(),lr("div",{class:$r(["alert text-white",e(r.color,r.dismissible,r.fontWeight)]),role:"alert"},[lze,ru(t.$slots,"default"),r.dismissible?(Yt(),lr("button",uze,hze)):kd("",!0)],2))}},dze={class:"container py-5"},fze={class:"row"},pze=mt("A simple success alert\u2014check it out!"),mze=mt("A simple primary alert\u2014check it out!"),gze=mt("A simple secondary alert\u2014check it out!"),vze=mt("A simple danger alert\u2014check it out!"),_ze=mt("A simple warning alert\u2014check it out!"),yze=mt("A simple info alert\u2014check it out!"),xze=mt("A simple light alert\u2014check it out!"),bze=mt("A simple dark alert\u2014check it out!"),wze={name:"SimpleAlerts",setup(r){return(e,t)=>(Yt(),lr("div",dze,[ie("div",fze,[Me(sd,{color:"success",fontWeight:"bold"},{default:Xe(()=>[pze]),_:1}),Me(sd,{color:"primary",fontWeight:"bold"},{default:Xe(()=>[mze]),_:1}),Me(sd,{color:"secondary",fontWeight:"bold"},{default:Xe(()=>[gze]),_:1}),Me(sd,{color:"danger",fontWeight:"bold"},{default:Xe(()=>[vze]),_:1}),Me(sd,{color:"warning",fontWeight:"bold"},{default:Xe(()=>[_ze]),_:1}),Me(sd,{color:"info",fontWeight:"bold"},{default:Xe(()=>[yze]),_:1}),Me(sd,{color:"light",fontWeight:"bold"},{default:Xe(()=>[xze]),_:1}),Me(sd,{color:"dark",fontWeight:"bold"},{default:Xe(()=>[bze]),_:1})])]))}},Sze=`<script setup>
//Vue Material Kit 2 components
import MaterialAlert from "@/components/MaterialAlert.vue";
<\/script>
<template>
  <div class="container py-5">
    <div class="row">
      <MaterialAlert color="success" fontWeight="bold"
        >A simple success alert\u2014check it out!</MaterialAlert
      >
      <MaterialAlert color="primary" fontWeight="bold"
        >A simple primary alert\u2014check it out!</MaterialAlert
      >
      <MaterialAlert color="secondary" fontWeight="bold"
        >A simple secondary alert\u2014check it out!</MaterialAlert
      >
      <MaterialAlert color="danger" fontWeight="bold"
        >A simple danger alert\u2014check it out!</MaterialAlert
      >
      <MaterialAlert color="warning" fontWeight="bold"
        >A simple warning alert\u2014check it out!</MaterialAlert
      >
      <MaterialAlert color="info" fontWeight="bold"
        >A simple info alert\u2014check it out!</MaterialAlert
      >
      <MaterialAlert color="light" fontWeight="bold"
        >A simple light alert\u2014check it out!</MaterialAlert
      >
      <MaterialAlert color="dark" fontWeight="bold"
        >A simple dark alert\u2014check it out!</MaterialAlert
      >
    </div>
  </div>
</template>
`,Tze={name:"AlertsView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Alerts",breadcrumb:[{label:"Attention Catchers",route:"#"},{label:"Alerts"}]},{default:Xe(()=>[Me(zi,{title:"Simple Alerts",code:zt(Sze),id:"simple-alerts",height:"600"},{default:Xe(()=>[Me(wze)]),_:1},8,["code"])]),_:1}))}},Mze={class:"container py-7"},Aze={class:"row mt-2 flex justify-content-center"},Cze={class:"col-sm-3 col-6 ms-8"},Ize=mt(" Launch demo modal "),Eze={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Dze={class:"modal-dialog"},Pze={class:"modal-content"},Lze={class:"modal-header"},kze=ie("h5",{class:"modal-title",id:"exampleModalLabel"}," Your modal title ",-1),Rze=ie("div",{class:"modal-body"},[mt(" Society has put up so many boundaries, so many limitations on what\u2019s right and wrong that it\u2019s almost impossible to get a pure thought out. "),ie("br"),ie("br"),mt(" It\u2019s like a little kid, a little boy, looking at colors, and no one told him what colors are good, before somebody tells you you shouldn\u2019t like pink because that\u2019s for girls, or you\u2019d instantly become a gay two-year-old. ")],-1),Oze={class:"modal-footer justify-content-between"},zze=mt(" Close "),Bze=mt(" Save changes "),Fze={name:"SimpleModal",setup(r){return(e,t)=>(Yt(),lr("div",Mze,[ie("div",Aze,[ie("div",Cze,[Me(Lr,{variant:"gradient",color:"success","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},{default:Xe(()=>[Ize]),_:1}),ie("div",Eze,[ie("div",Dze,[ie("div",Pze,[ie("div",Lze,[kze,Me(Lr,{color:"none",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),Rze,ie("div",Oze,[Me(Lr,{variant:"gradient",color:"dark","data-bs-dismiss":"modal"},{default:Xe(()=>[zze]),_:1}),Me(Lr,{variant:"gradient",color:"success",class:"mb-0"},{default:Xe(()=>[Bze]),_:1})])])])])])])]))}},Nze=`<script setup>
//Vue Material Kit 2 components
import MaterialButton from "@/components/MaterialButton.vue";
<\/script>
<template>
  <div class="container py-7">
    <div class="row mt-5">
      <div class="col-sm-3 col-6 mx-auto">
        <!-- Button trigger modal -->
        <MaterialButton
          variant="gradient"
          color="success"
          data-bs-toggle="modal"
          data-bs-target="#exampleModal">
          Launch demo modal
        </MaterialButton>

        <!-- Modal -->
        <div
          class="modal fade"
          id="exampleModal"
          tabindex="-1"
          aria-labelledby="exampleModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">
                  Your modal title
                </h5>
                <MaterialButton
                  color="none"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close">
                </MaterialButton>
              </div>
              <div class="modal-body">
                Society has put up so many boundaries, so many limitations on
                what\u2019s right and wrong that it\u2019s almost impossible to get a pure
                thought out.
                <br /><br />
                It\u2019s like a little kid, a little boy, looking at colors, and no
                one told him what colors are good, before somebody tells you you
                shouldn\u2019t like pink because that\u2019s for girls, or you\u2019d instantly
                become a gay two-year-old.
              </div>
              <div class="modal-footer justify-content-between">
                <MaterialButton
                  variant="gradient"
                  color="dark"
                  data-bs-dismiss="modal">
                  Close
                </MaterialButton>
                <MaterialButton variant="gradient" color="success" class="mb-0">
                  Save changes
                </MaterialButton>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
`,Vze={name:"ModalsView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Modals",breadcrumb:[{label:"Attention Catchers",route:"#"},{label:"Modals"}]},{default:Xe(()=>[Me(zi,{title:"Simple Modal",code:zt(Nze),id:"simple-modal"},{default:Xe(()=>[Me(Fze)]),_:1},8,["code"])]),_:1}))}};function $ze(r){[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map(function(t){return new r.Popover(t)})}const Gze={class:"container"},Uze={class:"row py-7 text-center"},jze=mt(" Popover on top "),Hze=mt(" Popover on right "),Wze=mt(" Popover on bottom "),qze=mt(" Popover on left "),Zze={name:"Popovers",setup(r){const e=PT();return en(()=>{$ze(e.bootstrap)}),(t,i)=>(Yt(),lr("div",Gze,[ie("div",Uze,[ie("div",null,[Me(Lr,{variant:"gradient",color:"success","data-bs-container":"body","data-bs-toggle":"popover","data-bs-placement":"top","data-bs-content":"That\u2019s the main thing people are controlled by! Thoughts- their perception of themselves!"},{default:Xe(()=>[jze]),_:1}),Me(Lr,{class:"mx-2",variant:"gradient",color:"success","data-bs-container":"body","data-bs-toggle":"popover","data-bs-placement":"right","data-bs-content":"We\u2019re not always in the position that we want to be at."},{default:Xe(()=>[Hze]),_:1}),Me(Lr,{variant:"gradient",color:"success","data-bs-container":"body","data-bs-toggle":"popover","data-bs-placement":"bottom","data-bs-content":"A lot of people don\u2019t appreciate the moment until it\u2019s passed."},{default:Xe(()=>[Wze]),_:1}),Me(Lr,{class:"ms-2",variant:"gradient",color:"success","data-bs-container":"body","data-bs-toggle":"popover","data-bs-placement":"left","data-bs-content":"It really matters and then like it really doesn\u2019t matter. What matters is the people who are sparked by it."},{default:Xe(()=>[qze]),_:1})])])]))}},Xze={class:"container"},Yze={class:"row py-8 text-center"},Kze=mt(" Tooltip on top "),Jze=mt(" Tooltip on right "),Qze=mt(" Tooltip on bottom "),eBe=mt(" Tooltip on left "),tBe={name:"Tooltips",setup(r){const e=PT();return en(()=>{QP(e.bootstrap)}),(t,i)=>(Yt(),lr("div",Xze,[ie("div",Yze,[ie("div",null,[Me(Lr,{variant:"gradient",color:"success","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Tooltip on top"},{default:Xe(()=>[Kze]),_:1}),Me(Lr,{class:"mx-2",variant:"gradient",color:"success","data-bs-toggle":"tooltip","data-bs-placement":"right",title:"Tooltip on right"},{default:Xe(()=>[Jze]),_:1}),Me(Lr,{variant:"gradient",color:"success","data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"Tooltip on bottom"},{default:Xe(()=>[Qze]),_:1}),Me(Lr,{class:"ms-2",variant:"gradient",color:"success","data-bs-toggle":"tooltip","data-bs-placement":"left",title:"Tooltip on left"},{default:Xe(()=>[eBe]),_:1})])])]))}},rBe=`<script setup>
import { onMounted } from "vue";
//Vue Material Kit 2 components
import MaterialButton from "@/components/MaterialButton.vue";

// popover
import setPopover from "@/assets/js/popover";

// store
import { useAppStore } from "@/stores";
const store = useAppStore();

// hook
onMounted(() => {
  setPopover(store.bootstrap);
});
<\/script>
<template>
  <div class="container">
    <div class="row py-7 text-center">
      <div>
        <MaterialButton
          variant="gradient"
          color="success"
          data-bs-container="body"
          data-bs-toggle="popover"
          data-bs-placement="top"
          data-bs-content="That\u2019s the main thing people are controlled by! Thoughts- their perception of themselves!">
          Popover on top
        </MaterialButton>
        
        <MaterialButton
          class="mx-2"
          variant="gradient"
          color="success"
          data-bs-container="body"
          data-bs-toggle="popover"
          data-bs-placement="right"
          data-bs-content="We\u2019re not always in the position that we want to be at.">
          Popover on right
        </MaterialButton>

        <MaterialButton
          variant="gradient"
          color="success"
          data-bs-container="body"
          data-bs-toggle="popover"
          data-bs-placement="bottom"
          data-bs-content="A lot of people don\u2019t appreciate the moment until it\u2019s passed.">
          Popover on bottom
        </MaterialButton>

        <MaterialButton
          class="ms-2"
          variant="gradient"
          color="success"
          data-bs-container="body"
          data-bs-toggle="popover"
          data-bs-placement="left"
          data-bs-content="It really matters and then like it really doesn\u2019t matter. What matters is the people who are sparked by it.">
          Popover on left
        </MaterialButton>
      </div>
    </div>
  </div>
</template>
`,iBe=`<script setup>
import { onMounted } from "vue";
//Vue Material Kit 2 components
import MaterialButton from "@/components/MaterialButton.vue";

// popover
import setTooltip from "@/assets/js/tooltip";

// store
import { useAppStore } from "@/stores";
const store = useAppStore();

// hook
onMounted(() => {
  setTooltip(store.bootstrap);
});
<\/script>
<template>
  <div class="container">
    <div class="row py-8 text-center">
      <div>
        <MaterialButton
          variant="gradient"
          color="success"
          data-bs-toggle="tooltip"
          data-bs-placement="top"
          title="Tooltip on top">
          Tooltip on top
        </MaterialButton>

        <MaterialButton
          class="mx-2"
          variant="gradient"
          color="success"
          data-bs-toggle="tooltip"
          data-bs-placement="right"
          title="Tooltip on right">
          Tooltip on right
        </MaterialButton>

        <MaterialButton
          variant="gradient"
          color="success"
          data-bs-toggle="tooltip"
          data-bs-placement="bottom"
          title="Tooltip on bottom">
          Tooltip on bottom
        </MaterialButton>

        <MaterialButton
          class="ms-2"
          variant="gradient"
          color="success"
          data-bs-toggle="tooltip"
          data-bs-placement="left"
          title="Tooltip on left">
          Tooltip on left
        </MaterialButton>
      </div>
    </div>
  </div>
</template>
`,nBe={name:"TooltipsPopoversView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Tooltip & Popovers",breadcrumb:[{label:"Attention Catchers",route:"#"},{label:"Tooltip & Popovers"}]},{default:Xe(()=>[Me(zi,{title:"Popovers",code:zt(rBe),id:"popovers"},{default:Xe(()=>[Me(Zze)]),_:1},8,["code"]),Me(zi,{title:"Tooltips",code:zt(iBe),id:"tooltips"},{default:Xe(()=>[Me(tBe)]),_:1},8,["code"])]),_:1}))}};var aBe="/assets/team-1.c59024a1.jpg",oBe="/assets/team-2.f56f4d18.jpg",sBe="/assets/team-3.a7ecd7c8.jpg",fp="/assets/team-4.5bff9832.jpg";const lBe={class:"container py-6"},uBe={class:"row mt-5 text-center"},cBe={class:"col-12"},hBe={class:"avatar-group"},dBe={href:"javascript:;",class:"avatar avatar-lg","data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"Ryan Tompson"},fBe={href:"javascript:;",class:"avatar avatar-lg","data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"Romina Hadid"},pBe={href:"javascript:;",class:"avatar avatar-lg","data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"Alexander Smith"},mBe={href:"javascript:;",class:"avatar avatar-lg","data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"Jessica Doe"},gBe={name:"AvatarGroup",setup(r){const e=PT();return en(()=>{QP(e.bootstrap)}),(t,i)=>(Yt(),lr("div",lBe,[ie("div",uBe,[ie("div",cBe,[ie("div",hBe,[ie("a",dBe,[Me(Zl,{image:zt(aBe),alt:"Image placeholder",size:"lg"},null,8,["image"])]),ie("a",fBe,[Me(Zl,{image:zt(oBe),alt:"Image placeholder",size:"lg"},null,8,["image"])]),ie("a",pBe,[Me(Zl,{image:zt(sBe),alt:"Image placeholder",size:"lg"},null,8,["image"])]),ie("a",mBe,[Me(Zl,{image:zt(fp),alt:"Image placeholder",size:"lg"},null,8,["image"])])])])])]))}},vBe={class:"container py-6"},_Be={class:"row mt-5 text-center"},yBe={class:"col-12"},xBe={href:"javascript:;"},bBe={href:"javascript:;"},wBe={href:"javascript:;"},SBe={href:"javascript:;"},TBe={href:"javascript:;"},MBe={href:"javascript:;"},ABe={name:"AvatarSize",setup(r){return(e,t)=>(Yt(),lr("div",vBe,[ie("div",_Be,[ie("div",yBe,[ie("a",xBe,[Me(Zl,{image:zt(fp),alt:"Image placeholder",size:"xs"},null,8,["image"])]),ie("a",bBe,[Me(Zl,{image:zt(fp),alt:"Image placeholder",size:"sm"},null,8,["image"])]),ie("a",wBe,[Me(Zl,{image:zt(fp),alt:"Image placeholder",size:"md"},null,8,["image"])]),ie("a",SBe,[Me(Zl,{image:zt(fp),alt:"Image placeholder",size:"lg"},null,8,["image"])]),ie("a",TBe,[Me(Zl,{image:zt(fp),alt:"Image placeholder",size:"xl"},null,8,["image"])]),ie("a",MBe,[Me(Zl,{image:zt(fp),alt:"Image placeholder",size:"xxl"},null,8,["image"])])])])]))}},CBe=`<script setup>
import { onMounted } from "vue";

//Vue Material Kit 2 components
import MaterialAvatar from "@/components/MaterialAvatar.vue";

// images
import team1 from "@/assets/img/team-1.jpg";
import team2 from "@/assets/img/team-2.jpg";
import team3 from "@/assets/img/team-3.jpg";
import team4 from "@/assets/img/team-4.jpg";

// popover
import setTooltip from "@/assets/js/tooltip";

// store
import { useAppStore } from "@/stores";
const store = useAppStore();

// hook
onMounted(() => {
  setTooltip(store.bootstrap);
});
<\/script>
<template>
  <div class="container py-6">
    <div class="row mt-5 text-center">
      <div class="col-12">
        <div class="avatar-group">
          <a
            href="javascript:;"
            class="avatar avatar-lg"
            data-bs-toggle="tooltip"
            data-bs-placement="bottom"
            title="Ryan Tompson"
          >
            <MaterialAvatar :image="team1" alt="Image placeholder" size="lg" />
          </a>
          <a
            href="javascript:;"
            class="avatar avatar-lg"
            data-bs-toggle="tooltip"
            data-bs-placement="bottom"
            title="Romina Hadid"
          >
            <MaterialAvatar :image="team2" alt="Image placeholder" size="lg" />
          </a>
          <a
            href="javascript:;"
            class="avatar avatar-lg"
            data-bs-toggle="tooltip"
            data-bs-placement="bottom"
            title="Alexander Smith"
          >
            <MaterialAvatar :image="team3" alt="Image placeholder" size="lg" />
          </a>
          <a
            href="javascript:;"
            class="avatar avatar-lg"
            data-bs-toggle="tooltip"
            data-bs-placement="bottom"
            title="Jessica Doe"
          >
            <MaterialAvatar :image="team4" alt="Image placeholder" size="lg" />
          </a>
        </div>
      </div>
    </div>
  </div>
</template>
`,IBe=`<script setup>
//Vue Material Kit 2 components
import MaterialAvatar from "@/components/MaterialAvatar.vue";

// image
import team4 from "@/assets/img/team-4.jpg";
<\/script>
<template>
  <div class="container py-6">
    <div class="row mt-5 text-center">
      <div class="col-12">
        <a href="javascript:;">
          <MaterialAvatar :image="team4" alt="Image placeholder" size="xs" />
        </a>
        <a href="javascript:;">
          <MaterialAvatar :image="team4" alt="Image placeholder" size="sm" />
        </a>
        <a href="javascript:;">
          <MaterialAvatar :image="team4" alt="Image placeholder" size="md" />
        </a>
        <a href="javascript:;">
          <MaterialAvatar :image="team4" alt="Image placeholder" size="lg" />
        </a>
        <a href="javascript:;">
          <MaterialAvatar :image="team4" alt="Image placeholder" size="xl" />
        </a>
        <a href="javascript:;">
          <MaterialAvatar :image="team4" alt="Image placeholder" size="xxl" />
        </a>
      </div>
    </div>
  </div>
</template>
`,EBe={name:"AvatarsView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Avatars",breadcrumb:[{label:"Elements",route:"#"},{label:"Avatars"}]},{default:Xe(()=>[Me(zi,{title:"Avatar Group",code:zt(CBe),id:"avatar-group"},{default:Xe(()=>[Me(gBe)]),_:1},8,["code"]),Me(zi,{title:"Avatar Size",code:zt(IBe),id:"avatar-size"},{default:Xe(()=>[Me(ABe)]),_:1},8,["code"])]),_:1}))}},Yn={name:"MaterialBadge",props:{size:{type:String,validator(r){return["sm","md","lg"].includes(r)},default:"md"},color:{validator(r){return["primary","secondary","info","success","warning","error","danger","light","dark","white"].includes(r)},default:"success"},variant:{type:String,validator(r){return["fill","gradient"].includes(r)},default:"fill"},rounded:{type:Boolean,default:!1}},setup(r){function e(t,i,n,s){let u,a,h;return t==="gradient"?u=`bg-gradient-${i}`:u=`badge-${i} bg-${i}`,a=n&&`badge-${n}`,h=s&&"rounded-pill",`${u} ${a} ${h}`}return(t,i)=>(Yt(),lr("span",{class:$r(["badge",e(r.variant,r.color,r.size,r.rounded)])},[ru(t.$slots,"default")],2))}},DBe={class:"py-7 m-3 bg-gray-100"},PBe={class:"container"},LBe={class:"row justify-space-between text-center py-2"},kBe={class:"col-12"},RBe=mt(" Primary "),OBe=mt(" Secondary "),zBe=mt(" Success "),BBe=mt(" Danger "),FBe=mt(" Warning "),NBe=mt(" Info "),VBe=mt(" Light "),$Be=mt(" Dark "),GBe={name:"BadgesGradient",setup(r){return(e,t)=>(Yt(),lr("section",DBe,[ie("div",PBe,[ie("div",LBe,[ie("div",kBe,[Me(Yn,{variant:"gradient",color:"primary"},{default:Xe(()=>[RBe]),_:1}),Me(Yn,{variant:"gradient",color:"secondary",class:"mx-1"},{default:Xe(()=>[OBe]),_:1}),Me(Yn,{variant:"gradient",color:"success"},{default:Xe(()=>[zBe]),_:1}),Me(Yn,{variant:"gradient",color:"danger",class:"mx-1"},{default:Xe(()=>[BBe]),_:1}),Me(Yn,{variant:"gradient",color:"warning"},{default:Xe(()=>[FBe]),_:1}),Me(Yn,{variant:"gradient",color:"info",class:"mx-1"},{default:Xe(()=>[NBe]),_:1}),Me(Yn,{variant:"gradient",color:"light",class:"text-dark"},{default:Xe(()=>[VBe]),_:1}),Me(Yn,{variant:"gradient",color:"dark",class:"ms-1"},{default:Xe(()=>[$Be]),_:1})])])])]))}},UBe={class:"py-7 m-3 bg-gray-100"},jBe={class:"container"},HBe={class:"row justify-space-between text-center py-2"},WBe={class:"col-12"},qBe=mt(" Primary "),ZBe=mt(" Secondary "),XBe=mt(" Success "),YBe=mt(" Danger "),KBe=mt(" Warning "),JBe=mt(" Info "),QBe=mt(" Light "),eFe=mt(" Dark "),tFe={name:"BadgesSimple",setup(r){return(e,t)=>(Yt(),lr("section",UBe,[ie("div",jBe,[ie("div",HBe,[ie("div",WBe,[Me(Yn,{color:"primary"},{default:Xe(()=>[qBe]),_:1}),Me(Yn,{color:"secondary",class:"mx-1"},{default:Xe(()=>[ZBe]),_:1}),Me(Yn,{color:"success"},{default:Xe(()=>[XBe]),_:1}),Me(Yn,{color:"danger",class:"mx-1"},{default:Xe(()=>[YBe]),_:1}),Me(Yn,{color:"warning"},{default:Xe(()=>[KBe]),_:1}),Me(Yn,{color:"info",class:"mx-1"},{default:Xe(()=>[JBe]),_:1}),Me(Yn,{color:"light",class:"text-dark"},{default:Xe(()=>[QBe]),_:1}),Me(Yn,{color:"dark",class:"ms-1"},{default:Xe(()=>[eFe]),_:1})])])])]))}},rFe={class:"py-7 m-3 bg-gray-100"},iFe={class:"container"},nFe={class:"row justify-space-between text-center py-2"},aFe={class:"col-12"},oFe=mt(" Primary "),sFe=mt(" Secondary "),lFe=mt(" Success "),uFe=mt(" Danger "),cFe=mt(" Warning "),hFe=mt(" Info "),dFe=mt(" Light "),fFe=mt(" Dark "),pFe={name:"BadgesSimpleRounded",setup(r){return(e,t)=>(Yt(),lr("section",rFe,[ie("div",iFe,[ie("div",nFe,[ie("div",aFe,[Me(Yn,{color:"primary",rounded:""},{default:Xe(()=>[oFe]),_:1}),Me(Yn,{color:"secondary",rounded:"",class:"mx-1"},{default:Xe(()=>[sFe]),_:1}),Me(Yn,{color:"success",rounded:""},{default:Xe(()=>[lFe]),_:1}),Me(Yn,{color:"danger",rounded:"",class:"mx-1"},{default:Xe(()=>[uFe]),_:1}),Me(Yn,{color:"warning",rounded:""},{default:Xe(()=>[cFe]),_:1}),Me(Yn,{color:"info",rounded:"",class:"mx-1"},{default:Xe(()=>[hFe]),_:1}),Me(Yn,{color:"light",rounded:"",class:"text-dark"},{default:Xe(()=>[dFe]),_:1}),Me(Yn,{color:"dark",rounded:"",class:"ms-1"},{default:Xe(()=>[fFe]),_:1})])])])]))}},mFe=`<script setup>
//Vue Material Kit 2 components
import MaterialBadge from "@/components/MaterialBadge.vue";
<\/script>
<template>
  <section class="py-7 m-3 bg-gray-100">
    <div class="container">
      <div class="row justify-space-between text-center py-2">
        <div class="col-12">
          <MaterialBadge variant="gradient" color="primary">
            Primary
          </MaterialBadge>

          <MaterialBadge variant="gradient" color="secondary" class="mx-1">
            Secondary
          </MaterialBadge>

          <MaterialBadge variant="gradient" color="success">
            Success
          </MaterialBadge>

          <MaterialBadge variant="gradient" color="danger" class="mx-1">
            Danger
          </MaterialBadge>

          <MaterialBadge variant="gradient" color="warning">
            Warning
          </MaterialBadge>

          <MaterialBadge variant="gradient" color="info" class="mx-1">
            Info
          </MaterialBadge>

          <MaterialBadge variant="gradient" color="light" class="text-dark">
            Light
          </MaterialBadge>

          <MaterialBadge variant="gradient" color="dark" class="ms-1">
            Dark
          </MaterialBadge>
        </div>
      </div>
    </div>
  </section>
</template>
`,gFe=`<script setup>
//Vue Material Kit 2 components
import MaterialBadge from "@/components/MaterialBadge.vue";
<\/script>
<template>
  <section class="py-7 m-3 bg-gray-100">
    <div class="container">
      <div class="row justify-space-between text-center py-2">
        <div class="col-12">
          <MaterialBadge color="primary"> Primary </MaterialBadge>

          <MaterialBadge color="secondary" class="mx-1">
            Secondary
          </MaterialBadge>

          <MaterialBadge color="success"> Success </MaterialBadge>

          <MaterialBadge color="danger" class="mx-1"> Danger </MaterialBadge>

          <MaterialBadge color="warning"> Warning </MaterialBadge>

          <MaterialBadge color="info" class="mx-1"> Info </MaterialBadge>

          <MaterialBadge color="light" class="text-dark"> Light </MaterialBadge>

          <MaterialBadge color="dark" class="ms-1"> Dark </MaterialBadge>
        </div>
      </div>
    </div>
  </section>
</template>
`,vFe=`<script setup>
//Vue Material Kit 2 components
import MaterialBadge from "@/components/MaterialBadge.vue";
<\/script>
<template>
  <section class="py-7 m-3 bg-gray-100">
    <div class="container">
      <div class="row justify-space-between text-center py-2">
        <div class="col-12">
          <MaterialBadge color="primary" rounded> Primary </MaterialBadge>

          <MaterialBadge color="secondary" rounded class="mx-1">
            Secondary
          </MaterialBadge>

          <MaterialBadge color="success" rounded> Success </MaterialBadge>

          <MaterialBadge color="danger" rounded class="mx-1"> Danger </MaterialBadge>

          <MaterialBadge color="warning" rounded> Warning </MaterialBadge>

          <MaterialBadge color="info" rounded class="mx-1"> Info </MaterialBadge>

          <MaterialBadge color="light" rounded class="text-dark"> Light </MaterialBadge>

          <MaterialBadge color="dark" rounded class="ms-1"> Dark </MaterialBadge>
        </div>
      </div>
    </div>
  </section>
</template>
`,_Fe={name:"BadgesView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Badges",breadcrumb:[{label:"Elements",route:"#"},{label:"Badges"}]},{default:Xe(()=>[Me(zi,{title:"Badges Gradients",code:zt(mFe),id:"badges-gradient"},{default:Xe(()=>[Me(GBe)]),_:1},8,["code"]),Me(zi,{title:"Badges Simple",code:zt(gFe),id:"badges-simple"},{default:Xe(()=>[Me(tFe)]),_:1},8,["code"]),Me(zi,{title:"Badges Simple Rounded",code:zt(vFe),id:"badges-rounded"},{default:Xe(()=>[Me(pFe)]),_:1},8,["code"])]),_:1}))}},yFe=`<script setup>
// example component
import Breadcrumbs from "@/examples/Breadcrumbs.vue";
<\/script>
<template>
<div class="container py-6 mt-2">
<div class="row px-8 ">
  <Breadcrumbs :routes="[{ label: 'Home', route: '/' }]" />

  <Breadcrumbs
    :routes="[
      { label: 'Home', route: '/' },
      { label: 'Library', route: '/' },
    ]"
  />
  <Breadcrumbs
    :routes="[
      { label: 'Home', route: '/some-route' },
      { label: 'Library', route: '/some-route' },
      { label: 'Data' },
    ]"
  />
</div>
</div>
</template>`,xFe={class:"py-6 px-8 mt-2"},bFe={name:"BreadcrumbsView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Breadcrumbs",breadcrumb:[{label:"Elements",route:"#"},{label:"Breadcrumbs"}]},{default:Xe(()=>[Me(zi,{title:"Breadcrumbs",code:zt(yFe),id:"breadcrumbs"},{default:Xe(()=>[ie("div",xFe,[Me(Vw,{routes:[{label:"Home",route:"/"}]}),Me(Vw,{routes:[{label:"Home",route:"/"},{label:"Library",route:"/"}]}),Me(Vw,{routes:[{label:"Home",route:"/some-route"},{label:"Library",route:"/some-route"},{label:"Data"}]})])]),_:1},8,["code"])]),_:1}))}},wFe={class:"py-7 m-3 bg-gray-100"},SFe={class:"container"},TFe={class:"row justify-space-between text-center py-2"},MFe={class:"col-12 mx-auto"},AFe=mt("Primary"),CFe=mt("Secondary"),IFe=mt("Info"),EFe=mt("Success"),DFe=mt("Warning"),PFe=mt("Danger"),LFe=mt("Light"),kFe=mt("Dark"),RFe=mt("White"),OFe={name:"ButtonsGradient",setup(r){return(e,t)=>(Yt(),lr("section",wFe,[ie("div",SFe,[ie("div",TFe,[ie("div",MFe,[Me(Lr,{variant:"gradient",color:"secondary",class:"w-auto me-2"},{default:Xe(()=>[AFe]),_:1}),Me(Lr,{variant:"gradient",color:"primary",class:"w-auto me-2"},{default:Xe(()=>[CFe]),_:1}),Me(Lr,{variant:"gradient",color:"info",class:"w-auto me-2"},{default:Xe(()=>[IFe]),_:1}),Me(Lr,{variant:"gradient",color:"success",class:"w-auto me-2"},{default:Xe(()=>[EFe]),_:1}),Me(Lr,{variant:"gradient",color:"warning",class:"w-auto me-2"},{default:Xe(()=>[DFe]),_:1}),Me(Lr,{variant:"gradient",color:"danger",class:"w-auto me-2"},{default:Xe(()=>[PFe]),_:1}),Me(Lr,{variant:"gradient",color:"light",class:"w-auto me-2"},{default:Xe(()=>[LFe]),_:1}),Me(Lr,{variant:"gradient",color:"dark",class:"w-auto me-2"},{default:Xe(()=>[kFe]),_:1}),Me(Lr,{variant:"gradient",color:"white",class:"w-auto me-2"},{default:Xe(()=>[RFe]),_:1})])])])]))}},zFe={class:"py-7 m-3 bg-gray-100"},BFe={class:"container"},FFe={class:"row justify-space-between text-center py-2"},NFe={class:"col-12 mx-auto"},VFe=mt(" Primary "),$Fe=mt(" Secondary "),GFe=mt(" Info "),UFe=mt(" Success "),jFe=mt(" Warning "),HFe=mt(" Danger "),WFe=mt(" Light "),qFe=mt(" Dark "),ZFe=mt(" White "),XFe={name:"ButtonsContained",setup(r){return(e,t)=>(Yt(),lr("section",zFe,[ie("div",BFe,[ie("div",FFe,[ie("div",NFe,[Me(Lr,{variant:"contained",color:"secondary",class:"w-auto me-2"},{default:Xe(()=>[VFe]),_:1}),Me(Lr,{variant:"contained",color:"primary",class:"w-auto me-2"},{default:Xe(()=>[$Fe]),_:1}),Me(Lr,{variant:"contained",color:"info",class:"w-auto me-2"},{default:Xe(()=>[GFe]),_:1}),Me(Lr,{variant:"contained",color:"success",class:"w-auto me-2"},{default:Xe(()=>[UFe]),_:1}),Me(Lr,{variant:"contained",color:"warning",class:"w-auto me-2"},{default:Xe(()=>[jFe]),_:1}),Me(Lr,{variant:"contained",color:"danger",class:"w-auto me-2"},{default:Xe(()=>[HFe]),_:1}),Me(Lr,{variant:"contained",color:"light",class:"w-auto me-2"},{default:Xe(()=>[WFe]),_:1}),Me(Lr,{variant:"contained",color:"dark",class:"w-auto me-2"},{default:Xe(()=>[qFe]),_:1}),Me(Lr,{variant:"contained",color:"white",class:"w-auto me-2"},{default:Xe(()=>[ZFe]),_:1})])])])]))}},YFe={class:"py-7 m-3 bg-gray-100"},KFe={class:"container"},JFe={class:"row justify-space-between text-center py-2"},QFe={class:"col-12 mx-auto"},e5e=mt("Primary"),t5e=mt("Secondary"),r5e=mt("Info"),i5e=mt("Success"),n5e=mt("Warning"),a5e=mt("Danger"),o5e=mt("Light"),s5e=mt("Dark"),l5e=mt("White"),u5e={name:"ButtonsOutlined",setup(r){return(e,t)=>(Yt(),lr("section",YFe,[ie("div",KFe,[ie("div",JFe,[ie("div",QFe,[Me(Lr,{variant:"outline",color:"secondary",class:"w-auto me-2"},{default:Xe(()=>[e5e]),_:1}),Me(Lr,{variant:"outline",color:"primary",class:"w-auto me-2"},{default:Xe(()=>[t5e]),_:1}),Me(Lr,{variant:"outline",color:"info",class:"w-auto me-2"},{default:Xe(()=>[r5e]),_:1}),Me(Lr,{variant:"outline",color:"success",class:"w-auto me-2"},{default:Xe(()=>[i5e]),_:1}),Me(Lr,{variant:"outline",color:"warning",class:"w-auto me-2"},{default:Xe(()=>[n5e]),_:1}),Me(Lr,{variant:"outline",color:"danger",class:"w-auto me-2"},{default:Xe(()=>[a5e]),_:1}),Me(Lr,{variant:"outline",color:"light",class:"w-auto me-2"},{default:Xe(()=>[o5e]),_:1}),Me(Lr,{variant:"outline",color:"dark",class:"w-auto me-2"},{default:Xe(()=>[s5e]),_:1}),Me(Lr,{variant:"outline",color:"white",class:"w-auto me-2"},{default:Xe(()=>[l5e]),_:1})])])])]))}},c5e={class:"py-7 m-3 bg-gray-100"},h5e={class:"container"},d5e={class:"row justify-space-between text-center py-2"},f5e={class:"col-12 mx-auto"},p5e=mt("Small"),m5e=mt("Default"),g5e=mt("Large"),v5e={name:"ButtonsSizes",setup(r){return(e,t)=>(Yt(),lr("section",c5e,[ie("div",h5e,[ie("div",d5e,[ie("div",f5e,[Me(Lr,{variant:"gradient",color:"success",size:"sm",class:"me-2"},{default:Xe(()=>[p5e]),_:1}),Me(Lr,{variant:"gradient",color:"success",class:"w-auto me-2"},{default:Xe(()=>[m5e]),_:1}),Me(Lr,{variant:"gradient",color:"success",size:"lg"},{default:Xe(()=>[g5e]),_:1})])])])]))}},_5e={class:"py-7 m-3 bg-gray-100"},y5e={class:"container"},x5e={class:"row justify-space-between text-center py-2"},b5e={class:"col-12 mx-auto"},w5e=ie("div",{class:"d-flex align-items-center"},[ie("i",{class:"material-icons me-2","aria-hidden":"true"},"favorite"),mt(" Small ")],-1),S5e=ie("div",{class:"d-flex align-items-center"},[ie("i",{class:"material-icons me-2","aria-hidden":"true"},"favorite"),mt(" Default ")],-1),T5e=ie("div",{class:"d-flex align-items-center"},[ie("i",{class:"material-icons me-2","aria-hidden":"true"},"favorite"),mt(" Large ")],-1),M5e={name:"ButtonsIconLeft",setup(r){return(e,t)=>(Yt(),lr("section",_5e,[ie("div",y5e,[ie("div",x5e,[ie("div",b5e,[Me(Lr,{variant:"gradient",color:"success",size:"sm",class:"btn-icon"},{default:Xe(()=>[w5e]),_:1}),Me(Lr,{variant:"gradient",color:"success",class:"btn-icon mx-2"},{default:Xe(()=>[S5e]),_:1}),Me(Lr,{variant:"gradient",color:"success",size:"lg",class:"btn-icon"},{default:Xe(()=>[T5e]),_:1})])])])]))}},A5e={class:"py-7 m-3 bg-gray-100"},C5e={class:"container"},I5e={class:"row justify-space-between text-center py-2"},E5e={class:"col-12 mx-auto"},D5e=ie("div",{class:"d-flex align-items-center"},[mt(" Small "),ie("i",{class:"material-icons ms-2","aria-hidden":"true"},"favorite")],-1),P5e=ie("div",{class:"d-flex align-items-center"},[mt(" Default "),ie("i",{class:"material-icons ms-2","aria-hidden":"true"},"favorite")],-1),L5e=ie("div",{class:"d-flex align-items-center"},[mt(" Large "),ie("i",{class:"material-icons ms-2","aria-hidden":"true"},"favorite")],-1),k5e={name:"ButtonsIconRight",setup(r){return(e,t)=>(Yt(),lr("section",A5e,[ie("div",C5e,[ie("div",I5e,[ie("div",E5e,[Me(Lr,{variant:"gradient",color:"success",size:"sm",class:"btn-icon"},{default:Xe(()=>[D5e]),_:1}),Me(Lr,{variant:"gradient",color:"success",class:"btn-icon mx-2"},{default:Xe(()=>[P5e]),_:1}),Me(Lr,{variant:"gradient",color:"success",size:"lg",class:"btn-icon"},{default:Xe(()=>[L5e]),_:1})])])])]))}},R5e=`<script setup>
//Vue Material Kit 2 components
import MaterialButton from "@/components/MaterialButton.vue";
<\/script>
<template>
  <section class="py-7 mt-3 bg-gray-100">
    <div class="container">
      <div class="row justify-space-between text-center py-2">
        <div class="col-12 mx-auto">
            <MaterialButton variant="gradient" color="secondary" class="w-auto me-2">Primary</MaterialButton>
            <MaterialButton variant="gradient" color="primary" class="w-auto me-2">Secondary</MaterialButton>
            <MaterialButton variant="gradient" color="info" class="w-auto me-2">Info</MaterialButton>
            <MaterialButton variant="gradient" color="success" class="w-auto me-2">Success</MaterialButton>
            <MaterialButton variant="gradient" color="warning" class="w-auto me-2">Warning</MaterialButton>
            <MaterialButton variant="gradient" color="danger" class="w-auto me-2">Danger</MaterialButton>
            <MaterialButton variant="gradient" color="light" class="w-auto me-2">Light</MaterialButton>
            <MaterialButton variant="gradient" color="dark" class="w-auto me-2">Dark</MaterialButton>
            <MaterialButton variant="gradient" color="white" class="w-auto me-2">White</MaterialButton>

        </div>
      </div>
    </div>
  </section>
</template>
`,O5e=`<script setup>
//Vue Material Kit 2 components
import MaterialButton from "@/components/MaterialButton.vue";
<\/script>
<template>
  <section class="py-7 mt-3">
    <div class="container">
      <div class="row justify-space-between text-center py-2">
        <div class="col-12 mx-auto">
          <MaterialButton
            variant="contained"
            color="secondary"
            class="w-auto me-2">
            Primary
          </MaterialButton>
          
          <MaterialButton
            variant="contained"
            color="primary"
            class="w-auto me-2">
            Secondary
          </MaterialButton>
          
          <MaterialButton variant="contained" color="info" class="w-auto me-2">
            Info
          </MaterialButton>
          
          <MaterialButton
            variant="contained"
            color="success"
            class="w-auto me-2">
            Success
          </MaterialButton>
          
          <MaterialButton
            variant="contained"
            color="warning"
            class="w-auto me-2">
            Warning
          </MaterialButton>
          
          <MaterialButton variant="contained" color="danger" class="w-auto me-2">
            Danger
          </MaterialButton>
          
          <MaterialButton variant="contained" color="light" class="w-auto me-2">
            Light
          </MaterialButton>
          
          <MaterialButton variant="contained" color="dark" class="w-auto me-2">
            Dark
          </MaterialButton>
          <MaterialButton variant="contained" color="white" class="w-auto me-2">
            White
          </MaterialButton>
        </div>
      </div>
    </div>
  </section>
</template>
`,z5e=`<script setup>
//Vue Material Kit 2 components
import MaterialButton from "@/components/MaterialButton.vue";
<\/script>
<template>
        <section class="py-7 mt-3">
  <div class="container">
    <div class="row justify-space-between text-center py-2">
      <div class="col-12 mx-auto">
        <MaterialButton variant="outline" color="secondary" class="w-auto me-2">Primary</MaterialButton>
        <MaterialButton variant="outline" color="primary" class="w-auto me-2">Secondary</MaterialButton>
        <MaterialButton variant="outline" color="info" class="w-auto me-2">Info</MaterialButton>
        <MaterialButton variant="outline" color="success" class="w-auto me-2">Success</MaterialButton>
        <MaterialButton variant="outline" color="warning" class="w-auto me-2">Warning</MaterialButton>
        <MaterialButton variant="outline" color="danger" class="w-auto me-2">Danger</MaterialButton>
        <MaterialButton variant="outline" color="light" class="w-auto me-2">Light</MaterialButton>
        <MaterialButton variant="outline" color="dark" class="w-auto me-2">Dark</MaterialButton>
        <MaterialButton variant="outline" color="white" class="w-auto me-2">White</MaterialButton>        
      </div>
    </div>
  </div>
</section>
</template>`,B5e=`<script setup>
//Vue Material Kit 2 components
import MaterialButton from "@/components/MaterialButton.vue";
<\/script>
<template>
  <section class="py-7 mt-3">
    <div class="container">
      <div class="row justify-space-between text-center py-2">
        <div class="col-12 mx-auto">
            <MaterialButton variant="gradient" color="success" size="sm" class="me-2">Small</MaterialButton>
            <MaterialButton variant="gradient" color="success" class="w-auto me-2">Default</MaterialButton>
            <MaterialButton variant="gradient" color="success" size="lg">Large</MaterialButton>
        </div>
      </div>
    </div>
  </section>
</template>
`,F5e=`<script setup>
//Vue Material Kit 2 components
import MaterialButton from "@/components/MaterialButton.vue";
<\/script>
<template>
  <section class="py-7 m-3 bg-gray-100">
    <div class="container">
      <div class="row justify-space-between text-center py-2">
        <div class="col-12 mx-auto">
            <MaterialButton variant="gradient" color="primary" size="sm" class="btn-icon">
            <div class="d-flex align-items-center">
              <i class="material-icons me-2" aria-hidden="true">favorite</i>
              Small
            </div>
            </MaterialButton>

            <MaterialButton variant="gradient" color="primary" class="btn-icon">
            <div class="d-flex align-items-center">
              <i class="material-icons me-2" aria-hidden="true">favorite</i>
              Default
            </div>
            </MaterialButton>

            <MaterialButton variant="gradient" color="primary" size="lg" class="btn-icon mx-2">
            <div class="d-flex align-items-center">
              <i class="material-icons me-2" aria-hidden="true">favorite</i>
              Large
            </div>
            </MaterialButton>

        </div>
      </div>
    </div>
  </section>
</template>
`,N5e=`<script setup>
//Vue Material Kit 2 components
import MaterialButton from "@/components/MaterialButton.vue";
<\/script>
<template>
  <section class="py-7 m-3 bg-gray-100">
    <div class="container">
      <div class="row justify-space-between text-center py-2">
        <div class="col-12 mx-auto">
            <MaterialButton variant="gradient" color="success" size="sm" class="btn-icon">
            <div class="d-flex align-items-center">
                Small
              <i class="material-icons ms-2" aria-hidden="true">favorite</i>
            </div>
            </MaterialButton>

            <MaterialButton variant="gradient" color="success" class="btn-icon mx-2">
            <div class="d-flex align-items-center">
                Default
              <i class="material-icons ms-2" aria-hidden="true">favorite</i>
            </div>
            </MaterialButton>

            <MaterialButton variant="gradient" color="success" size="lg" class="btn-icon">
            <div class="d-flex align-items-center">
                Large
              <i class="material-icons ms-2" aria-hidden="true">favorite</i>
            </div>
            </MaterialButton>

        </div>
      </div>
    </div>
  </section>
</template>
`,V5e={name:"ButtonsView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Buttons",breadcrumb:[{label:"Elements",route:"#"},{label:"Buttons"}]},{default:Xe(()=>[Me(zi,{title:"Buttons Colors Gradient",code:zt(R5e),id:"button-gradient"},{default:Xe(()=>[Me(OFe)]),_:1},8,["code"]),Me(zi,{title:"Buttons Contained",code:zt(O5e),id:"button-contained"},{default:Xe(()=>[Me(XFe)]),_:1},8,["code"]),Me(zi,{title:"Buttons Outline",code:zt(z5e),id:"button-outlined"},{default:Xe(()=>[Me(u5e)]),_:1},8,["code"]),Me(zi,{title:"Buttons Sizes",code:zt(B5e),id:"button-sizes"},{default:Xe(()=>[Me(v5e)]),_:1},8,["code"]),Me(zi,{title:"Buttons Icon Left",code:zt(F5e),id:"button-icon-left"},{default:Xe(()=>[Me(M5e)]),_:1},8,["code"]),Me(zi,{title:"Buttons Icon Right",code:zt(N5e),id:"button-icon-right"},{default:Xe(()=>[Me(k5e)]),_:1},8,["code"])]),_:1}))}},$5e={class:"py-7 m-3 bg-gray-100"},G5e={class:"container"},U5e={class:"row justify-space-between text-center py-2"},j5e={class:"col-6 mx-auto"},H5e={class:"btn-group",role:"group","aria-label":"Basic example"},W5e=mt("Left"),q5e=mt("Middle"),Z5e=mt("Right"),X5e={name:"ButtonGroupsSimple",setup(r){return(e,t)=>(Yt(),lr("section",$5e,[ie("div",G5e,[ie("div",U5e,[ie("div",j5e,[ie("div",H5e,[Me(Lr,{variant:"contained",color:"success"},{default:Xe(()=>[W5e]),_:1}),Me(Lr,{variant:"contained",color:"success"},{default:Xe(()=>[q5e]),_:1}),Me(Lr,{variant:"contained",color:"success"},{default:Xe(()=>[Z5e]),_:1})])])])])]))}},Y5e={class:"py-7 m-3 bg-gray-100"},K5e={class:"container"},J5e={class:"row justify-space-between text-center py-2"},Q5e={class:"col-6 mx-auto"},e4e={class:"btn-group",role:"group","aria-label":"Basic example"},t4e=mt(" Left "),r4e=mt(" Middle "),i4e=mt(" Right "),n4e={name:"ButtonGroupsOutline",setup(r){return(e,t)=>(Yt(),lr("section",Y5e,[ie("div",K5e,[ie("div",J5e,[ie("div",Q5e,[ie("div",e4e,[Me(Lr,{variant:"outline",color:"dark"},{default:Xe(()=>[t4e]),_:1}),Me(Lr,{variant:"outline",color:"dark"},{default:Xe(()=>[r4e]),_:1}),Me(Lr,{variant:"outline",color:"dark"},{default:Xe(()=>[i4e]),_:1})])])])])]))}},a4e={},o4e={class:"py-7 m-3 bg-gray-100"},s4e=ie("div",{class:"container"},[ie("div",{class:"row justify-space-between text-center py-2"},[ie("div",{class:"col-6 mx-auto"},[ie("div",{class:"btn-group",role:"group","aria-label":"Basic checkbox toggle button group"},[ie("input",{type:"checkbox",class:"btn-check",id:"btncheck1",autocomplete:"off"}),ie("label",{class:"btn btn-outline-dark",for:"btncheck1"},"Checkbox 1"),ie("input",{type:"checkbox",class:"btn-check",id:"btncheck2",autocomplete:"off"}),ie("label",{class:"btn btn-outline-dark",for:"btncheck2"},"Checkbox 2"),ie("input",{type:"checkbox",class:"btn-check",id:"btncheck3",autocomplete:"off"}),ie("label",{class:"btn btn-outline-dark",for:"btncheck3"},"Checkbox 3")])])])],-1),l4e=[s4e];function u4e(r,e){return Yt(),lr("section",o4e,l4e)}var c4e=ph(a4e,[["render",u4e]]);const h4e={},d4e={class:"py-7 m-3 bg-gray-100"},f4e=ie("div",{class:"container"},[ie("div",{class:"row justify-space-between text-center py-2"},[ie("div",{class:"col-6 mx-auto"},[ie("div",{class:"btn-group",role:"group","aria-label":"Basic radio toggle button group"},[ie("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio1",autocomplete:"off",checked:""}),ie("label",{class:"btn btn-outline-dark",for:"btnradio1"},"Radio 1"),ie("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio2",autocomplete:"off"}),ie("label",{class:"btn btn-outline-dark",for:"btnradio2"},"Radio 2"),ie("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio3",autocomplete:"off"}),ie("label",{class:"btn btn-outline-dark",for:"btnradio3"},"Radio 3")])])])],-1),p4e=[f4e];function m4e(r,e){return Yt(),lr("section",d4e,p4e)}var g4e=ph(h4e,[["render",m4e]]);const v4e={class:"py-7 m-3 bg-gray-100"},_4e={class:"container"},y4e={class:"row text-start py-2"},x4e={class:"col-6 mx-auto"},b4e={class:"btn-group btn-group-lg",role:"group","aria-label":"Basic example"},w4e=mt(" Left "),S4e=mt(" Middle "),T4e=mt(" Right "),M4e=ie("br",null,null,-1),A4e={class:"btn-group",role:"group","aria-label":"Basic example"},C4e=mt(" Left "),I4e=mt(" Middle "),E4e=mt(" Right "),D4e=ie("br",null,null,-1),P4e={class:"btn-group btn-group-sm",role:"group","aria-label":"Basic example"},L4e=mt(" Left "),k4e=mt(" Middle "),R4e=mt(" Right "),O4e={name:"ButtonGroupsSizing",setup(r){return(e,t)=>(Yt(),lr("section",v4e,[ie("div",_4e,[ie("div",y4e,[ie("div",x4e,[ie("div",b4e,[Me(Lr,{variant:"contained",color:"success"},{default:Xe(()=>[w4e]),_:1}),Me(Lr,{variant:"contained",color:"success"},{default:Xe(()=>[S4e]),_:1}),Me(Lr,{variant:"contained",color:"success"},{default:Xe(()=>[T4e]),_:1})]),M4e,ie("div",A4e,[Me(Lr,{variant:"contained",color:"success"},{default:Xe(()=>[C4e]),_:1}),Me(Lr,{variant:"contained",color:"success"},{default:Xe(()=>[I4e]),_:1}),Me(Lr,{variant:"contained",color:"success"},{default:Xe(()=>[E4e]),_:1})]),D4e,ie("div",P4e,[Me(Lr,{variant:"contained",color:"success"},{default:Xe(()=>[L4e]),_:1}),Me(Lr,{variant:"contained",color:"success"},{default:Xe(()=>[k4e]),_:1}),Me(Lr,{variant:"contained",color:"success"},{default:Xe(()=>[R4e]),_:1})])])])])]))}},z4e=`<script setup>
//Vue Material Kit 2 components
import MaterialButton from "@/components/MaterialButton.vue";
<\/script>
<template>
  <section class="py-7 m-3 bg-gray-100">
    <div class="container">
      <div class="row justify-space-between text-center py-2">
        <div class="col-6 mx-auto">
          <div class="btn-group" role="group" aria-label="Basic example">
            <MaterialButton variant="contained" color="success">Left</MaterialButton>
            <MaterialButton variant="contained" color="success">Middle</MaterialButton>
            <MaterialButton variant="contained" color="success">Right</MaterialButton>
          </div>
        </div>
      </div>
    </div>
  </section>
</template>
`,B4e=`<script setup>
//Vue Material Kit 2 components
import MaterialButton from "@/components/MaterialButton.vue";
<\/script>
<template>
  <section class="py-7 m-3 bg-gray-100">
    <div class="container">
      <div class="row justify-space-between text-center py-2">
        <div class="col-6 mx-auto">
          <div class="btn-group" role="group" aria-label="Basic example">
            <MaterialButton variant="outline" color="dark">
              Left
            </MaterialButton>
            <MaterialButton variant="outline" color="dark">
              Middle
            </MaterialButton>
            <MaterialButton variant="outline" color="dark">
              Right
            </MaterialButton>
          </div>
        </div>
      </div>
    </div>
  </section>
</template>
`,F4e=`<script setup><\/script>
<template>
  <section class="py-7 m-3 bg-gray-100">
    <div class="container">
      <div class="row justify-space-between text-center py-2">
        <div class="col-6 mx-auto">
        <div class="btn-group" role="group" aria-label="Basic checkbox toggle button group">
          <input type="checkbox" class="btn-check" id="btncheck1" autocomplete="off">
          <label class="btn btn-outline-dark" for="btncheck1">Checkbox 1</label>

          <input type="checkbox" class="btn-check" id="btncheck2" autocomplete="off">
          <label class="btn btn-outline-dark" for="btncheck2">Checkbox 2</label>

          <input type="checkbox" class="btn-check" id="btncheck3" autocomplete="off">
          <label class="btn btn-outline-dark" for="btncheck3">Checkbox 3</label>
          </div>
        </div>
      </div>
    </div>
  </section>
</template>
`,N4e=`<script setup><\/script>
<template>
  <section class="py-7 m-3 bg-gray-100">
    <div class="container">
      <div class="row justify-space-between text-center py-2">
        <div class="col-6 mx-auto">
        <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
          <input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" checked>
          <label class="btn btn-outline-dark" for="btnradio1">Radio 1</label>

          <input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off">
          <label class="btn btn-outline-dark" for="btnradio2">Radio 2</label>

          <input type="radio" class="btn-check" name="btnradio" id="btnradio3" autocomplete="off">
          <label class="btn btn-outline-dark" for="btnradio3">Radio 3</label>
        </div>
        </div>
      </div>
    </div>
  </section>
</template>
`,V4e=`<script setup>
//Vue Material Kit 2 components
import MaterialButton from "@/components/MaterialButton.vue";
<\/script>
<template>
  <section class="py-7 m-3 bg-gray-100">
    <div class="container">
      <div class="row text-start py-2">
        <div class="col-6 mx-auto">
          <div class="btn-group btn-group-lg" role="group" aria-label="Basic example">
            <MaterialButton variant="contained" color="success">
              Left
            </MaterialButton>
            <MaterialButton variant="contained" color="success">
              Middle
            </MaterialButton>
            <MaterialButton variant="contained" color="success">
              Right
            </MaterialButton>
          </div>

          <div class="btn-group" role="group" aria-label="Basic example">
            <MaterialButton variant="contained" color="success">
              Left
            </MaterialButton>
            <MaterialButton variant="contained" color="success">
              Middle
            </MaterialButton>
            <MaterialButton variant="contained" color="success">
              Right
            </MaterialButton>
          </div>

          <div class="btn-group btn-group-sm" role="group" aria-label="Basic example">
            <MaterialButton variant="contained" color="success">
              Left
            </MaterialButton>
            <MaterialButton variant="contained" color="success">
              Middle
            </MaterialButton>
            <MaterialButton variant="contained" color="success">
              Right
            </MaterialButton>
          </div>
        </div>
      </div>
    </div>
  </section>
</template>
`,$4e={name:"ButtonGroupsView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Button Groups",breadcrumb:[{label:"Elements",route:"#"},{label:"Button Groups"}]},{default:Xe(()=>[Me(zi,{title:"Button Groups Simple",code:zt(z4e),id:"button-groups-simple"},{default:Xe(()=>[Me(X5e)]),_:1},8,["code"]),Me(zi,{title:"Button Groups Outline",code:zt(B4e),id:"button-groups-outline"},{default:Xe(()=>[Me(n4e)]),_:1},8,["code"]),Me(zi,{title:"Button Groups Checkbox",code:zt(F4e),id:"button-groups-checkbox"},{default:Xe(()=>[Me(c4e)]),_:1},8,["code"]),Me(zi,{title:"Button Groups Radio",code:zt(N4e),id:"button-groups-radio"},{default:Xe(()=>[Me(g4e)]),_:1},8,["code"]),Me(zi,{title:"Button Groups Sizing",code:zt(V4e),id:"button-groups-sizing"},{default:Xe(()=>[Me(O4e)]),_:1},8,["code"])]),_:1}))}},G4e={class:"container p-5 bg-gray-100 m-3"},U4e={class:"row d-flex justify-content-center"},j4e={class:"col-lg-4 col-md-6 col-sm-3"},H4e={class:"dropdown"},W4e=mt(" Dropdown button "),q4e=ie("li",null,[ie("a",{class:"dropdown-item border-radius-md",href:"javascript:;"},"Action")],-1),Z4e=ie("li",null,[ie("a",{class:"dropdown-item border-radius-md",href:"javascript:;"},"Another action")],-1),X4e=ie("li",null,[ie("a",{class:"dropdown-item border-radius-md",href:"javascript:;"},"Something else here")],-1),Y4e=[q4e,Z4e,X4e],K4e={class:"col-lg-4 col-md-6 col-sm-3"},J4e={class:"btn-group dropup mt-7"},Q4e=mt(" Dropup "),eNe=ie("li",null,[ie("a",{class:"dropdown-item border-radius-md",href:"javascript:;"},"Action")],-1),tNe=ie("li",null,[ie("a",{class:"dropdown-item border-radius-md",href:"javascript:;"},"Another action")],-1),rNe=ie("li",null,[ie("a",{class:"dropdown-item border-radius-md",href:"javascript:;"},"Something else here")],-1),iNe=[eNe,tNe,rNe],nNe={name:"DropdownAndDropup",setup(r){let e=tc(!1),t=tc(!1);return(i,n)=>(Yt(),lr("div",G4e,[ie("div",U4e,[ie("div",j4e,[ie("div",H4e,[Me(Lr,{variant:"gradient",color:"success",class:$r(["dropdown-toggle",{show:zt(e)}]),onFocusout:n[0]||(n[0]=s=>$n(e)?e.value=!1:e=!1),id:"dropdownMenuButton","data-bs-toggle":"dropdown","area-expanded":zt(e),onClick:n[1]||(n[1]=s=>$n(e)?e.value=!zt(e):e=!zt(e))},{default:Xe(()=>[W4e]),_:1},8,["class","area-expanded"]),ie("ul",{class:$r(["dropdown-menu px-2 py-3",{show:zt(e)}]),"aria-labelledby":"dropdownMenuButton"},Y4e,2)])]),ie("div",K4e,[ie("div",J4e,[Me(Lr,{variant:"gradient",color:"success",class:$r(["dropdown-toggle",{show:zt(t)}]),"data-bs-toggle":"dropdown","area-expanded":zt(t),onFocusout:n[2]||(n[2]=s=>$n(t)?t.value=!1:t=!1),onClick:n[3]||(n[3]=s=>$n(t)?t.value=!zt(t):t=!zt(t))},{default:Xe(()=>[Q4e]),_:1},8,["class","area-expanded"]),ie("ul",{class:$r(["dropdown-menu px-2 py-3",{show:zt(t)}]),"aria-labelledby":"dropdownMenuButton"},iNe,2)])])])]))}},aNe=`<script setup>
import { ref } from "vue";
//Vue Material Kit 2 components
import MaterialButton from "@/components/MaterialButton.vue";

let showDropdown = ref(false);
let showDropup = ref(false);
<\/script>
<template>
  <div class="container p-5 m-3 bg-gray-100">
    <div class="row">
      <div class="row">
        <div
          class="col-lg-4 ms-lg-auto col-md-6 col-sm-3 d-flex justify-content-center"
        >
          <div class="dropdown">
            <MaterialButton
              variant="gradient"
              color="success"
              class="dropdown-toggle"
              :class="{ show: showDropdown }"
              @focusout="showDropdown = false"
              id="dropdownMenuButton"
              data-bs-toggle="dropdown"
              :area-expanded="showDropdown"
              @click="showDropdown = !showDropdown"
            >
              Dropdown button
            </MaterialButton>

            <ul
              class="dropdown-menu px-2 py-3"
              :class="{ show: showDropdown }"
              aria-labelledby="dropdownMenuButton"
            >
              <li>
                <a class="dropdown-item border-radius-md" href="javascript:;"
                  >Action</a
                >
              </li>
              <li>
                <a class="dropdown-item border-radius-md" href="javascript:;"
                  >Another action</a
                >
              </li>
              <li>
                <a class="dropdown-item border-radius-md" href="javascript:;"
                  >Something else here</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="col-lg-4 me-lg-auto col-md-6 col-sm-3 d-flex justify-content-center"
        >
          <div class="btn-group dropup mt-7">
            <MaterialButton
              variant="gradient"
              color="success"
              class="dropdown-toggle"
              :class="{ show: showDropup }"
              data-bs-toggle="dropdown"
              :area-expanded="showDropup"
              @focusout="showDropup = false"
              @click="showDropup = !showDropup">
              Dropup
            </MaterialButton>
            <ul
              class="dropdown-menu px-2 py-3" :class="{ show: showDropup }"
              aria-labelledby="dropdownMenuButton"
            >
              <li>
                <a class="dropdown-item border-radius-md" href="javascript:;"
                  >Action</a
                >
              </li>
              <li>
                <a class="dropdown-item border-radius-md" href="javascript:;"
                  >Another action</a
                >
              </li>
              <li>
                <a class="dropdown-item border-radius-md" href="javascript:;"
                  >Something else here</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
`,oNe={name:"DropdownsView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Dropdowns",breadcrumb:[{label:"Elements",route:"#"},{label:"Dropdowns"}]},{default:Xe(()=>[Me(zi,{title:"Dropdown and Dropup",code:zt(aNe),id:"dropdown-dropup"},{default:Xe(()=>[Me(nNe)]),_:1},8,["code"])]),_:1}))}},sNe={class:"progress"},lNe=["aria-valuenow"],np={name:"MaterialProgress",props:{variant:{type:String,validator:r=>["contained","gradient"].includes(r),default:"contained"},color:{type:String,validator(r){return["primary","secondary","info","success","warning","danger","error","light","dark"].includes(r)},default:"success"},value:{type:Number,required:!0}},setup(r){const e=(t,i)=>{let n;return i==="gradient"?n=`bg-gradient-${t}`:i==="contained"?n=`bg-${t}`:i==="striped"&&(n=`progress-bar-striped bg-${t}`),n};return(t,i)=>(Yt(),lr("div",sNe,[ie("div",{class:$r(["progress-bar",e(r.color,r.variant)]),role:"progressbar",style:bo({width:`${r.value}%`}),"aria-valuenow":r.value,"aria-valuemin":"0","aria-valuemax":"100"},null,14,lNe)]))}},uNe={class:"py-6 mt-4"},cNe={class:"container"},hNe={class:"row justify-space-between py-2"},dNe={class:"col-lg-6 mx-auto"},fNe={name:"ProgressSimple",setup(r){return(e,t)=>(Yt(),lr("section",uNe,[ie("div",cNe,[ie("div",hNe,[ie("div",dNe,[Me(np,{class:"mb-3",color:"primary",value:50}),Me(np,{class:"mb-3",color:"secondary",value:50}),Me(np,{class:"mb-3",color:"success",value:50}),Me(np,{class:"mb-3",color:"info",value:50}),Me(np,{class:"mb-3",color:"warning",value:50}),Me(np,{class:"mb-3",color:"danger",value:50}),Me(np,{class:"mb-3",color:"dark",value:50})])])])]))}},pNe=`<script setup>
//Vue Material Kit 2 components
import MaterialProgress from "@/components/MaterialProgress.vue";
<\/script>
<template>
  <section class="py-6 mt-4">
    <div class="container">
      <div class="row justify-space-between py-2">
        <div class="col-lg-6 mx-auto">
          <MaterialProgress class="mb-3" color="primary" :value="50" />
          <MaterialProgress class="mb-3" color="secondary" :value="50" />
          <MaterialProgress class="mb-3" color="success" :value="50" />
          <MaterialProgress class="mb-3" color="info" :value="50" />
          <MaterialProgress class="mb-3" color="warning" :value="50" />
          <MaterialProgress class="mb-3" color="danger" :value="50" />
          <MaterialProgress class="mb-3" color="dark" :value="50" />
        </div>
      </div>
    </div>
  </section>
</template>
`,mNe={name:"ProgressBarsView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Progress Bars",breadcrumb:[{label:"Elements",route:"#"},{label:"Progress Bars"}]},{default:Xe(()=>[Me(zi,{title:"Progress Bars Simple",code:zt(pNe),id:"progress-simple"},{default:Xe(()=>[Me(fNe)]),_:1},8,["code"])]),_:1}))}},gNe={class:"container py-6 mt-3"},vNe={class:"row flex justify-content-center"},_Ne={class:"col-4 ms-10"},yNe=mt(" Remember me "),xNe={name:"Toggle",setup(r){return(e,t)=>(Yt(),lr("div",gNe,[ie("div",vNe,[ie("div",_Ne,[Me(LT,{class:"d-flex align-items-center ps-6",id:"flexSwitchCheckDefault",labelClass:"ms-3 mb-0"},{default:Xe(()=>[yNe]),_:1})])])]))}},bNe={class:"container py-6 mt-3"},wNe={class:"d-flex justify-content-center align-items-center"},SNe=mt(" Remember me "),TNe=ie("span",{class:"ms-1 text-xs d-block"},"Be sure that you will always be logged in.",-1),MNe={name:"ToggleContext",setup(r){return(e,t)=>(Yt(),lr("div",bNe,[ie("div",wNe,[Me(LT,{class:"mb-0",id:"flexSwitchCheckDefault1",labelClass:"text-dark font-weight-bold d-block text-sm"},{description:Xe(()=>[TNe]),default:Xe(()=>[SNe]),_:1})])]))}},ANe=`<script setup>
//Vue Material Kit 2 components
import MaterialSwitch from "@/components/MaterialSwitch.vue";
<\/script>
<template>
  <div class="container py-6 mt-3">
    <div class="row">
      <div class="col-4 mx-auto">
        <MaterialSwitch
          class="d-flex align-items-center ps-6"
          id="flexSwitchCheckDefault"
          labelClass="ms-3 mb-0"
        >
          Remember me
        </MaterialSwitch>
      </div>
    </div>
  </div>
</template>
`,CNe=`<script setup>
//Vue Material Kit 2 components
import MaterialSwitch from "@/components/MaterialSwitch.vue";
<\/script>
<template>
  <div class="container py-6 mt-3">
    <div class="d-flex justify-content-center align-items-center">
      <MaterialSwitch
        class="mb-0"
        id="flexSwitchCheckDefault1"
        labelClass="text-dark font-weight-bold d-block text-sm"
      >
        Remember me

        <template #description>
          <span class="ms-1 text-xs d-block"
            >Be sure that you will always be logged in.</span
          >
        </template>
      </MaterialSwitch>
    </div>
  </div>
</template>
`,INe={name:"TogglesView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Toggles",breadcrumb:[{label:"Elements",route:"#"},{label:"Toggles"}]},{default:Xe(()=>[Me(zi,{title:"Toggle",code:zt(ANe),id:"toggle"},{default:Xe(()=>[Me(xNe)]),_:1},8,["code"]),Me(zi,{title:"Toggle Context",code:zt(CNe),id:"toggle-context"},{default:Xe(()=>[Me(MNe)]),_:1},8,["code"])]),_:1}))}},ENe={},DNe={class:"relative pt-6"},PNe=au('<div class="text-sans-serif container"><h2 class="h2 mb-5"><span>Typography - Font Family Roboto</span></h2><div class="py-3 align-items-center row"><div class="col-sm-3"><small class="text-uppercase font-weight-bold">Heading 1</small></div><div class="col-sm-9"><h1 class="mb-0">H1 Material Kit</h1></div></div><div class="py-3 align-items-center row"><div class="col-sm-3"><small class="text-uppercase font-weight-bold">Heading 2</small></div><div class="col-sm-9"><h2 class="mb-0">H2 Material Kit</h2></div></div><div class="py-3 align-items-center row"><div class="col-sm-3"><small class="text-uppercase font-weight-bold">Heading 3</small></div><div class="col-sm-9"><h3 class="mb-0">H3 Material Kit</h3></div></div><div class="py-3 align-items-center row"><div class="col-sm-3"><small class="text-uppercase font-weight-bold">Heading 4</small></div><div class="col-sm-9"><h4 class="mb-0">H4 Material Kit</h4></div></div><div class="py-3 align-items-center row"><div class="col-sm-3"><small class="text-uppercase font-weight-bold">Heading 5</small></div><div class="col-sm-9"><h5 class="mb-0">H5 Material Kit</h5></div></div><div class="py-3 align-items-center row"><div class="col-sm-3"><small class="text-uppercase font-weight-bold">Heading 6</small></div><div class="col-sm-9"><h6 class="mb-0">H6 Material Kit</h6></div></div><div class="py-3 align-items-center row"><div class="col-sm-3"><small class="text-uppercase font-weight-bold">Lead text</small></div><div class="col-sm-9"><p class="lead mb-0"> I will be the leader of a company that ends up being worth billions of dollars, because I got the answers. I understand culture. I am the nucleus. I think that&#39;s a responsibility that I have, to push possibilities, to show people, this is the level that things could be at. </p></div></div><div class="py-3 align-items-center row"><div class="col-sm-3"><small class="text-uppercase font-weight-bold">Paragraph</small></div><div class="col-sm-9"><p class="mb-0"> I will be the leader of a company that ends up being worth billions of dollars, because I got the answers. I understand culture. I am the nucleus. I think that&#39;s a responsibility that I have, to push possibilities, to show people, this is the level that things could be at. </p></div></div><div class="py-3 align-items-center row"><div class="col-sm-3"><small class="text-uppercase font-weight-bold">Small</small></div><div class="col-sm-9"><p class="text-sm mb-0"> I will be the leader of a company that ends up being worth billions of dollars, because I got the answers. I understand culture. I am the nucleus. I think that&#39;s a responsibility that I have, to push possibilities, to show people, this is the level that things could be at. </p></div></div><div class="py-3 align-items-center row"><div class="col-sm-3"><small class="text-uppercase font-weight-bold">Tiny</small></div><div class="col-sm-9"><p class="text-xs mb-0"> I will be the leader of a company that ends up being worth billions of dollars, because I got the answers. I understand culture. I am the nucleus. I think that&#39;s a responsibility that I have, to push possibilities, to show people, this is the level that things could be at. </p></div></div></div>',1),LNe=[PNe];function kNe(r,e){return Yt(),lr("div",DNe,LNe)}var RNe=ph(ENe,[["render",kNe]]);const ONe=`<template>
<div class="relative pt-6">
  <div class="text-sans-serif container">
    <h2 class="h2 mb-5">
      <span>Typography - Font Family Roboto</span>
    </h2>
    <div class="py-3 align-items-center row">
      <div class="col-sm-3">
        <small class="text-uppercase font-weight-bold">Heading 1</small>
      </div>

      <div class="col-sm-9">
        <h1 class="mb-0">H1 Material Kit</h1>
      </div>
    </div>

    <div class="py-3 align-items-center row">
      <div class="col-sm-3">
        <small class="text-uppercase font-weight-bold">Heading 2</small>
      </div>

      <div class="col-sm-9">
        <h2 class="mb-0">H2 Material Kit</h2>
      </div>
    </div>

    <div class="py-3 align-items-center row">
      <div class="col-sm-3">
        <small class="text-uppercase font-weight-bold">Heading 3</small>
      </div>

      <div class="col-sm-9">
        <h3 class="mb-0">H3 Material Kit</h3>
      </div>
    </div>

    <div class="py-3 align-items-center row">
      <div class="col-sm-3">
        <small class="text-uppercase font-weight-bold">Heading 4</small>
      </div>

      <div class="col-sm-9">
        <h4 class="mb-0">H4 Material Kit</h4>
      </div>
    </div>

    <div class="py-3 align-items-center row">
      <div class="col-sm-3">
        <small class="text-uppercase font-weight-bold">Heading 5</small>
      </div>

      <div class="col-sm-9">
        <h5 class="mb-0">H5 Material Kit</h5>
      </div>
    </div>

    <div class="py-3 align-items-center row">
      <div class="col-sm-3">
        <small class="text-uppercase font-weight-bold">Heading 6</small>
      </div>

      <div class="col-sm-9">
        <h6 class="mb-0">H6 Material Kit</h6>
      </div>
    </div>

    <div class="py-3 align-items-center row">
      <div class="col-sm-3">
        <small class="text-uppercase font-weight-bold">Lead text</small>
      </div>

      <div class="col-sm-9">
        <p class="lead mb-0">
          I will be the leader of a company that ends up being worth billions
          of dollars, because I got the answers. I understand culture. I am
          the nucleus. I think that&#39;s a responsibility that I have, to
          push possibilities, to show people, this is the level that things
          could be at.
        </p>
      </div>
    </div>

    <div class="py-3 align-items-center row">
      <div class="col-sm-3">
        <small class="text-uppercase font-weight-bold">Paragraph</small>
      </div>

      <div class="col-sm-9">
        <p class="mb-0">
          I will be the leader of a company that ends up being worth billions
          of dollars, because I got the answers. I understand culture. I am
          the nucleus. I think that&#39;s a responsibility that I have, to
          push possibilities, to show people, this is the level that things
          could be at.
        </p>
      </div>
    </div>

    <div class="py-3 align-items-center row">
      <div class="col-sm-3">
        <small class="text-uppercase font-weight-bold">Small</small>
      </div>

      <div class="col-sm-9">
        <p class="text-sm mb-0">
          I will be the leader of a company that ends up being worth billions
          of dollars, because I got the answers. I understand culture. I am
          the nucleus. I think that&#39;s a responsibility that I have, to
          push possibilities, to show people, this is the level that things
          could be at.
        </p>
      </div>
    </div>

    <div class="py-3 align-items-center row">
      <div class="col-sm-3">
        <small class="text-uppercase font-weight-bold">Tiny</small>
      </div>

      <div class="col-sm-9">
        <p class="text-xs mb-0">
          I will be the leader of a company that ends up being worth billions
          of dollars, because I got the answers. I understand culture. I am
          the nucleus. I think that&#39;s a responsibility that I have, to
          push possibilities, to show people, this is the level that things
          could be at.
        </p>
      </div>
    </div>
  </div>
</div>
</template>
`,zNe={name:"TypographyView",setup(r){return en(()=>{wa()}),(e,t)=>(Yt(),Wn(ba,{title:"Typography",breadcrumb:[{label:"Elements",route:"#"},{label:"Typography"}]},{default:Xe(()=>[Me(zi,{title:"Typography - Font Family Roboto",code:zt(ONe),id:"typography-roboto",height:"600"},{default:Xe(()=>[Me(RNe)]),_:1},8,["code"])]),_:1}))}},BNe=Lre({history:Yte("/"),routes:[{path:"/",name:"presentation",component:kie},{path:"/pages/stations",name:"stations",component:_3e},{path:"/pages/landing-pages/about-us",name:"about",component:kse},{path:"/pages/landing-pages/contact-us",name:"contactus",component:ole},{path:"/pages/landing-pages/author",name:"author",component:Cce},{path:"/pages/landing-pages/basic",name:"signin-basic",component:Qce},{path:"/sections/page-sections/page-headers",name:"page-headers",component:pde},{path:"/sections/page-sections/features",name:"page-features",component:E3e},{path:"/sections/navigation/navbars",name:"navigation-navbars",component:L3e},{path:"/sections/navigation/nav-tabs",name:"navigation-navtabs",component:V3e},{path:"/sections/navigation/pagination",name:"navigation-pagination",component:K3e},{path:"/sections/input-areas/inputs",name:"inputareas-inputs",component:VOe},{path:"/sections/input-areas/forms",name:"inputareas-forms",component:sze},{path:"/sections/attention-catchers/alerts",name:"ac-alerts",component:Tze},{path:"/sections/attention-catchers/modals",name:"ac-modals",component:Vze},{path:"/sections/attention-catchers/tooltips-popovers",name:"ac-tooltips-popovers",component:nBe},{path:"/sections/elements/avatars",name:"el-avatars",component:EBe},{path:"/sections/elements/badges",name:"el-badges",component:_Fe},{path:"/sections/elements/breadcrumbs",name:"el-breadcrumbs",component:bFe},{path:"/sections/elements/buttons",name:"el-buttons",component:V5e},{path:"/sections/elements/button-groups",name:"el-button-groups",component:$4e},{path:"/sections/elements/dropdowns",name:"el-dropdowns",component:oNe},{path:"/sections/elements/progress-bars",name:"el-progress-bars",component:mNe},{path:"/sections/elements/toggles",name:"el-toggles",component:INe},{path:"/sections/elements/typography",name:"el-typography",component:zNe}]});window.onload=function(){for(var r=document.querySelectorAll(".btn"),e=0;e<r.length;e++)r[e].addEventListener("click",function(t){var i=t.target,n=i.querySelector(".ripple");n=document.createElement("span"),n.classList.add("ripple"),n.style.width=n.style.height=Math.max(i.offsetWidth,i.offsetHeight)+"px",i.appendChild(n),n.style.left=t.offsetX-n.offsetWidth/2+"px",n.style.top=t.offsetY-n.offsetHeight/2+"px",n.classList.add("ripple"),setTimeout(function(){n.parentElement.removeChild(n)},600)},!1)};var FNe={install(){}};const _2=f8(Rre);_2.use(Ate());_2.use(BNe);_2.use(FNe);_2.mount("#app");
